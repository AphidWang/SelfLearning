var gm=Object.defineProperty;var ym=(t,e,r)=>e in t?gm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var cr=(t,e,r)=>ym(t,typeof e!="symbol"?e+"":e,r);function _mergeNamespaces(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(n,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production_min;function requireReact_production_min(){if(hasRequiredReact_production_min)return react_production_min;hasRequiredReact_production_min=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function y(V){return V===null||typeof V!="object"?null:(V=g&&V[g]||V["@@iterator"],typeof V=="function"?V:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,S={};function k(V,z,ne){this.props=V,this.context=z,this.refs=S,this.updater=ne||x}k.prototype.isReactComponent={},k.prototype.setState=function(V,z){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,z,"setState")},k.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function C(){}C.prototype=k.prototype;function P(V,z,ne){this.props=V,this.context=z,this.refs=S,this.updater=ne||x}var R=P.prototype=new C;R.constructor=P,E(R,k.prototype),R.isPureReactComponent=!0;var j=Array.isArray,I=Object.prototype.hasOwnProperty,O={current:null},L={key:!0,ref:!0,__self:!0,__source:!0};function B(V,z,ne){var pe,xe={},Ce=null,ce=null;if(z!=null)for(pe in z.ref!==void 0&&(ce=z.ref),z.key!==void 0&&(Ce=""+z.key),z)I.call(z,pe)&&!L.hasOwnProperty(pe)&&(xe[pe]=z[pe]);var Re=arguments.length-2;if(Re===1)xe.children=ne;else if(1<Re){for(var oe=Array(Re),Se=0;Se<Re;Se++)oe[Se]=arguments[Se+2];xe.children=oe}if(V&&V.defaultProps)for(pe in Re=V.defaultProps,Re)xe[pe]===void 0&&(xe[pe]=Re[pe]);return{$$typeof:t,type:V,key:Ce,ref:ce,props:xe,_owner:O.current}}function Z(V,z){return{$$typeof:t,type:V.type,key:z,ref:V.ref,props:V.props,_owner:V._owner}}function te(V){return typeof V=="object"&&V!==null&&V.$$typeof===t}function ie(V){var z={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ne){return z[ne]})}var Q=/\/+/g;function fe(V,z){return typeof V=="object"&&V!==null&&V.key!=null?ie(""+V.key):z.toString(36)}function se(V,z,ne,pe,xe){var Ce=typeof V;(Ce==="undefined"||Ce==="boolean")&&(V=null);var ce=!1;if(V===null)ce=!0;else switch(Ce){case"string":case"number":ce=!0;break;case"object":switch(V.$$typeof){case t:case e:ce=!0}}if(ce)return ce=V,xe=xe(ce),V=pe===""?"."+fe(ce,0):pe,j(xe)?(ne="",V!=null&&(ne=V.replace(Q,"$&/")+"/"),se(xe,z,ne,"",function(Se){return Se})):xe!=null&&(te(xe)&&(xe=Z(xe,ne+(!xe.key||ce&&ce.key===xe.key?"":(""+xe.key).replace(Q,"$&/")+"/")+V)),z.push(xe)),1;if(ce=0,pe=pe===""?".":pe+":",j(V))for(var Re=0;Re<V.length;Re++){Ce=V[Re];var oe=pe+fe(Ce,Re);ce+=se(Ce,z,ne,oe,xe)}else if(oe=y(V),typeof oe=="function")for(V=oe.call(V),Re=0;!(Ce=V.next()).done;)Ce=Ce.value,oe=pe+fe(Ce,Re++),ce+=se(Ce,z,ne,oe,xe);else if(Ce==="object")throw z=String(V),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.");return ce}function Y(V,z,ne){if(V==null)return V;var pe=[],xe=0;return se(V,pe,"","",function(Ce){return z.call(ne,Ce,xe++)}),pe}function G(V){if(V._status===-1){var z=V._result;z=z(),z.then(function(ne){(V._status===0||V._status===-1)&&(V._status=1,V._result=ne)},function(ne){(V._status===0||V._status===-1)&&(V._status=2,V._result=ne)}),V._status===-1&&(V._status=0,V._result=z)}if(V._status===1)return V._result.default;throw V._result}var q={current:null},N={transition:null},$={ReactCurrentDispatcher:q,ReactCurrentBatchConfig:N,ReactCurrentOwner:O};return react_production_min.Children={map:Y,forEach:function(V,z,ne){Y(V,function(){z.apply(this,arguments)},ne)},count:function(V){var z=0;return Y(V,function(){z++}),z},toArray:function(V){return Y(V,function(z){return z})||[]},only:function(V){if(!te(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},react_production_min.Component=k,react_production_min.Fragment=r,react_production_min.Profiler=s,react_production_min.PureComponent=P,react_production_min.StrictMode=n,react_production_min.Suspense=c,react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$,react_production_min.cloneElement=function(V,z,ne){if(V==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+V+".");var pe=E({},V.props),xe=V.key,Ce=V.ref,ce=V._owner;if(z!=null){if(z.ref!==void 0&&(Ce=z.ref,ce=O.current),z.key!==void 0&&(xe=""+z.key),V.type&&V.type.defaultProps)var Re=V.type.defaultProps;for(oe in z)I.call(z,oe)&&!L.hasOwnProperty(oe)&&(pe[oe]=z[oe]===void 0&&Re!==void 0?Re[oe]:z[oe])}var oe=arguments.length-2;if(oe===1)pe.children=ne;else if(1<oe){Re=Array(oe);for(var Se=0;Se<oe;Se++)Re[Se]=arguments[Se+2];pe.children=Re}return{$$typeof:t,type:V.type,key:xe,ref:Ce,props:pe,_owner:ce}},react_production_min.createContext=function(V){return V={$$typeof:o,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},V.Provider={$$typeof:a,_context:V},V.Consumer=V},react_production_min.createElement=B,react_production_min.createFactory=function(V){var z=B.bind(null,V);return z.type=V,z},react_production_min.createRef=function(){return{current:null}},react_production_min.forwardRef=function(V){return{$$typeof:l,render:V}},react_production_min.isValidElement=te,react_production_min.lazy=function(V){return{$$typeof:p,_payload:{_status:-1,_result:V},_init:G}},react_production_min.memo=function(V,z){return{$$typeof:d,type:V,compare:z===void 0?null:z}},react_production_min.startTransition=function(V){var z=N.transition;N.transition={};try{V()}finally{N.transition=z}},react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},react_production_min.useCallback=function(V,z){return q.current.useCallback(V,z)},react_production_min.useContext=function(V){return q.current.useContext(V)},react_production_min.useDebugValue=function(){},react_production_min.useDeferredValue=function(V){return q.current.useDeferredValue(V)},react_production_min.useEffect=function(V,z){return q.current.useEffect(V,z)},react_production_min.useId=function(){return q.current.useId()},react_production_min.useImperativeHandle=function(V,z,ne){return q.current.useImperativeHandle(V,z,ne)},react_production_min.useInsertionEffect=function(V,z){return q.current.useInsertionEffect(V,z)},react_production_min.useLayoutEffect=function(V,z){return q.current.useLayoutEffect(V,z)},react_production_min.useMemo=function(V,z){return q.current.useMemo(V,z)},react_production_min.useReducer=function(V,z,ne){return q.current.useReducer(V,z,ne)},react_production_min.useRef=function(V){return q.current.useRef(V)},react_production_min.useState=function(V){return q.current.useState(V)},react_production_min.useSyncExternalStore=function(V,z,ne){return q.current.useSyncExternalStore(V,z,ne)},react_production_min.useTransition=function(){return q.current.useTransition()},react_production_min.version="18.2.0",react_production_min}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production_min()),react.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production_min;function requireReactJsxRuntime_production_min(){if(hasRequiredReactJsxRuntime_production_min)return reactJsxRuntime_production_min;hasRequiredReactJsxRuntime_production_min=1;var t=requireReact(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function o(l,c,d){var p,g={},y=null,x=null;d!==void 0&&(y=""+d),c.key!==void 0&&(y=""+c.key),c.ref!==void 0&&(x=c.ref);for(p in c)n.call(c,p)&&!a.hasOwnProperty(p)&&(g[p]=c[p]);if(l&&l.defaultProps)for(p in c=l.defaultProps,c)g[p]===void 0&&(g[p]=c[p]);return{$$typeof:e,type:l,key:y,ref:x,props:g,_owner:s.current}}return reactJsxRuntime_production_min.Fragment=r,reactJsxRuntime_production_min.jsx=o,reactJsxRuntime_production_min.jsxs=o,reactJsxRuntime_production_min}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production_min()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);var client$1={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,function(t){function e(N,$){var V=N.length;N.push($);e:for(;0<V;){var z=V-1>>>1,ne=N[z];if(0<s(ne,$))N[z]=$,N[V]=ne,V=z;else break e}}function r(N){return N.length===0?null:N[0]}function n(N){if(N.length===0)return null;var $=N[0],V=N.pop();if(V!==$){N[0]=V;e:for(var z=0,ne=N.length,pe=ne>>>1;z<pe;){var xe=2*(z+1)-1,Ce=N[xe],ce=xe+1,Re=N[ce];if(0>s(Ce,V))ce<ne&&0>s(Re,Ce)?(N[z]=Re,N[ce]=V,z=ce):(N[z]=Ce,N[xe]=V,z=xe);else if(ce<ne&&0>s(Re,V))N[z]=Re,N[ce]=V,z=ce;else break e}}return $}function s(N,$){var V=N.sortIndex-$.sortIndex;return V!==0?V:N.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],p=1,g=null,y=3,x=!1,E=!1,S=!1,k=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(N){for(var $=r(d);$!==null;){if($.callback===null)n(d);else if($.startTime<=N)n(d),$.sortIndex=$.expirationTime,e(c,$);else break;$=r(d)}}function j(N){if(S=!1,R(N),!E)if(r(c)!==null)E=!0,G(I);else{var $=r(d);$!==null&&q(j,$.startTime-N)}}function I(N,$){E=!1,S&&(S=!1,C(B),B=-1),x=!0;var V=y;try{for(R($),g=r(c);g!==null&&(!(g.expirationTime>$)||N&&!ie());){var z=g.callback;if(typeof z=="function"){g.callback=null,y=g.priorityLevel;var ne=z(g.expirationTime<=$);$=t.unstable_now(),typeof ne=="function"?g.callback=ne:g===r(c)&&n(c),R($)}else n(c);g=r(c)}if(g!==null)var pe=!0;else{var xe=r(d);xe!==null&&q(j,xe.startTime-$),pe=!1}return pe}finally{g=null,y=V,x=!1}}var O=!1,L=null,B=-1,Z=5,te=-1;function ie(){return!(t.unstable_now()-te<Z)}function Q(){if(L!==null){var N=t.unstable_now();te=N;var $=!0;try{$=L(!0,N)}finally{$?fe():(O=!1,L=null)}}else O=!1}var fe;if(typeof P=="function")fe=function(){P(Q)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,Y=se.port2;se.port1.onmessage=Q,fe=function(){Y.postMessage(null)}}else fe=function(){k(Q,0)};function G(N){L=N,O||(O=!0,fe())}function q(N,$){B=k(function(){N(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(N){N.callback=null},t.unstable_continueExecution=function(){E||x||(E=!0,G(I))},t.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<N?Math.floor(1e3/N):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(N){switch(y){case 1:case 2:case 3:var $=3;break;default:$=y}var V=y;y=$;try{return N()}finally{y=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(N,$){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var V=y;y=N;try{return $()}finally{y=V}},t.unstable_scheduleCallback=function(N,$,V){var z=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?z+V:z):V=z,N){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=V+ne,N={id:p++,callback:$,priorityLevel:N,startTime:V,expirationTime:ne,sortIndex:-1},V>z?(N.sortIndex=V,e(d,N),r(c)===null&&N===r(d)&&(S?(C(B),B=-1):S=!0,q(j,V-z))):(N.sortIndex=ne,e(c,N),E||x||(E=!0,G(I))),N},t.unstable_shouldYield=ie,t.unstable_wrapCallback=function(N){var $=y;return function(){var V=y;y=$;try{return N.apply(this,arguments)}finally{y=V}}}}(scheduler_production_min)),scheduler_production_min}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production_min()),scheduler.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production_min;function requireReactDom_production_min(){if(hasRequiredReactDom_production_min)return reactDom_production_min;hasRequiredReactDom_production_min=1;var t=requireReact(),e=requireScheduler();function r(u){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+u,b=1;b<arguments.length;b++)f+="&args[]="+encodeURIComponent(arguments[b]);return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function a(u,f){o(u,f),o(u+"Capture",f)}function o(u,f){for(s[u]=f,u=0;u<f.length;u++)n.add(f[u])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},g={};function y(u){return c.call(g,u)?!0:c.call(p,u)?!1:d.test(u)?g[u]=!0:(p[u]=!0,!1)}function x(u,f,b,T){if(b!==null&&b.type===0)return!1;switch(typeof f){case"function":case"symbol":return!0;case"boolean":return T?!1:b!==null?!b.acceptsBooleans:(u=u.toLowerCase().slice(0,5),u!=="data-"&&u!=="aria-");default:return!1}}function E(u,f,b,T){if(f===null||typeof f>"u"||x(u,f,b,T))return!0;if(T)return!1;if(b!==null)switch(b.type){case 3:return!f;case 4:return f===!1;case 5:return isNaN(f);case 6:return isNaN(f)||1>f}return!1}function S(u,f,b,T,M,D,H){this.acceptsBooleans=f===2||f===3||f===4,this.attributeName=T,this.attributeNamespace=M,this.mustUseProperty=b,this.propertyName=u,this.type=f,this.sanitizeURL=D,this.removeEmptyString=H}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(u){k[u]=new S(u,0,!1,u,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(u){var f=u[0];k[f]=new S(f,1,!1,u[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(u){k[u]=new S(u,2,!1,u.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(u){k[u]=new S(u,2,!1,u,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(u){k[u]=new S(u,3,!1,u.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(u){k[u]=new S(u,3,!0,u,null,!1,!1)}),["capture","download"].forEach(function(u){k[u]=new S(u,4,!1,u,null,!1,!1)}),["cols","rows","size","span"].forEach(function(u){k[u]=new S(u,6,!1,u,null,!1,!1)}),["rowSpan","start"].forEach(function(u){k[u]=new S(u,5,!1,u.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function P(u){return u[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(u){var f=u.replace(C,P);k[f]=new S(f,1,!1,u,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(u){var f=u.replace(C,P);k[f]=new S(f,1,!1,u,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(u){var f=u.replace(C,P);k[f]=new S(f,1,!1,u,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(u){k[u]=new S(u,1,!1,u.toLowerCase(),null,!1,!1)}),k.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(u){k[u]=new S(u,1,!1,u.toLowerCase(),null,!0,!0)});function R(u,f,b,T){var M=k.hasOwnProperty(f)?k[f]:null;(M!==null?M.type!==0:T||!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(E(f,b,M,T)&&(b=null),T||M===null?y(f)&&(b===null?u.removeAttribute(f):u.setAttribute(f,""+b)):M.mustUseProperty?u[M.propertyName]=b===null?M.type===3?!1:"":b:(f=M.attributeName,T=M.attributeNamespace,b===null?u.removeAttribute(f):(M=M.type,b=M===3||M===4&&b===!0?"":""+b,T?u.setAttributeNS(T,f,b):u.setAttribute(f,b))))}var j=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,I=Symbol.for("react.element"),O=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),Z=Symbol.for("react.profiler"),te=Symbol.for("react.provider"),ie=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),q=Symbol.for("react.offscreen"),N=Symbol.iterator;function $(u){return u===null||typeof u!="object"?null:(u=N&&u[N]||u["@@iterator"],typeof u=="function"?u:null)}var V=Object.assign,z;function ne(u){if(z===void 0)try{throw Error()}catch(b){var f=b.stack.trim().match(/\n( *(at )?)/);z=f&&f[1]||""}return`
`+z+u}var pe=!1;function xe(u,f){if(!u||pe)return"";pe=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(f)if(f=function(){throw Error()},Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(_e){var T=_e}Reflect.construct(u,[],f)}else{try{f.call()}catch(_e){T=_e}u.call(f.prototype)}else{try{throw Error()}catch(_e){T=_e}u()}}catch(_e){if(_e&&T&&typeof _e.stack=="string"){for(var M=_e.stack.split(`
`),D=T.stack.split(`
`),H=M.length-1,J=D.length-1;1<=H&&0<=J&&M[H]!==D[J];)J--;for(;1<=H&&0<=J;H--,J--)if(M[H]!==D[J]){if(H!==1||J!==1)do if(H--,J--,0>J||M[H]!==D[J]){var ae=`
`+M[H].replace(" at new "," at ");return u.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",u.displayName)),ae}while(1<=H&&0<=J);break}}}finally{pe=!1,Error.prepareStackTrace=b}return(u=u?u.displayName||u.name:"")?ne(u):""}function Ce(u){switch(u.tag){case 5:return ne(u.type);case 16:return ne("Lazy");case 13:return ne("Suspense");case 19:return ne("SuspenseList");case 0:case 2:case 15:return u=xe(u.type,!1),u;case 11:return u=xe(u.type.render,!1),u;case 1:return u=xe(u.type,!0),u;default:return""}}function ce(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case L:return"Fragment";case O:return"Portal";case Z:return"Profiler";case B:return"StrictMode";case fe:return"Suspense";case se:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case ie:return(u.displayName||"Context")+".Consumer";case te:return(u._context.displayName||"Context")+".Provider";case Q:var f=u.render;return u=u.displayName,u||(u=f.displayName||f.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case Y:return f=u.displayName||null,f!==null?f:ce(u.type)||"Memo";case G:f=u._payload,u=u._init;try{return ce(u(f))}catch{}}return null}function Re(u){var f=u.type;switch(u.tag){case 24:return"Cache";case 9:return(f.displayName||"Context")+".Consumer";case 10:return(f._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=f.render,u=u.displayName||u.name||"",f.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return f;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ce(f);case 8:return f===B?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f}return null}function oe(u){switch(typeof u){case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function Se(u){var f=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function Ne(u){var f=Se(u)?"checked":"value",b=Object.getOwnPropertyDescriptor(u.constructor.prototype,f),T=""+u[f];if(!u.hasOwnProperty(f)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var M=b.get,D=b.set;return Object.defineProperty(u,f,{configurable:!0,get:function(){return M.call(this)},set:function(H){T=""+H,D.call(this,H)}}),Object.defineProperty(u,f,{enumerable:b.enumerable}),{getValue:function(){return T},setValue:function(H){T=""+H},stopTracking:function(){u._valueTracker=null,delete u[f]}}}}function Fe(u){u._valueTracker||(u._valueTracker=Ne(u))}function et(u){if(!u)return!1;var f=u._valueTracker;if(!f)return!0;var b=f.getValue(),T="";return u&&(T=Se(u)?u.checked?"true":"false":u.value),u=T,u!==b?(f.setValue(u),!0):!1}function Le(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}function Ee(u,f){var b=f.checked;return V({},f,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:b??u._wrapperState.initialChecked})}function Pt(u,f){var b=f.defaultValue==null?"":f.defaultValue,T=f.checked!=null?f.checked:f.defaultChecked;b=oe(f.value!=null?f.value:b),u._wrapperState={initialChecked:T,initialValue:b,controlled:f.type==="checkbox"||f.type==="radio"?f.checked!=null:f.value!=null}}function Dt(u,f){f=f.checked,f!=null&&R(u,"checked",f,!1)}function Et(u,f){Dt(u,f);var b=oe(f.value),T=f.type;if(b!=null)T==="number"?(b===0&&u.value===""||u.value!=b)&&(u.value=""+b):u.value!==""+b&&(u.value=""+b);else if(T==="submit"||T==="reset"){u.removeAttribute("value");return}f.hasOwnProperty("value")?Ct(u,f.type,b):f.hasOwnProperty("defaultValue")&&Ct(u,f.type,oe(f.defaultValue)),f.checked==null&&f.defaultChecked!=null&&(u.defaultChecked=!!f.defaultChecked)}function St(u,f,b){if(f.hasOwnProperty("value")||f.hasOwnProperty("defaultValue")){var T=f.type;if(!(T!=="submit"&&T!=="reset"||f.value!==void 0&&f.value!==null))return;f=""+u._wrapperState.initialValue,b||f===u.value||(u.value=f),u.defaultValue=f}b=u.name,b!==""&&(u.name=""),u.defaultChecked=!!u._wrapperState.initialChecked,b!==""&&(u.name=b)}function Ct(u,f,b){(f!=="number"||Le(u.ownerDocument)!==u)&&(b==null?u.defaultValue=""+u._wrapperState.initialValue:u.defaultValue!==""+b&&(u.defaultValue=""+b))}var ct=Array.isArray;function Qe(u,f,b,T){if(u=u.options,f){f={};for(var M=0;M<b.length;M++)f["$"+b[M]]=!0;for(b=0;b<u.length;b++)M=f.hasOwnProperty("$"+u[b].value),u[b].selected!==M&&(u[b].selected=M),M&&T&&(u[b].defaultSelected=!0)}else{for(b=""+oe(b),f=null,M=0;M<u.length;M++){if(u[M].value===b){u[M].selected=!0,T&&(u[M].defaultSelected=!0);return}f!==null||u[M].disabled||(f=u[M])}f!==null&&(f.selected=!0)}}function _t(u,f){if(f.dangerouslySetInnerHTML!=null)throw Error(r(91));return V({},f,{value:void 0,defaultValue:void 0,children:""+u._wrapperState.initialValue})}function ft(u,f){var b=f.value;if(b==null){if(b=f.children,f=f.defaultValue,b!=null){if(f!=null)throw Error(r(92));if(ct(b)){if(1<b.length)throw Error(r(93));b=b[0]}f=b}f==null&&(f=""),b=f}u._wrapperState={initialValue:oe(b)}}function Bt(u,f){var b=oe(f.value),T=oe(f.defaultValue);b!=null&&(b=""+b,b!==u.value&&(u.value=b),f.defaultValue==null&&u.defaultValue!==b&&(u.defaultValue=b)),T!=null&&(u.defaultValue=""+T)}function Wt(u){var f=u.textContent;f===u._wrapperState.initialValue&&f!==""&&f!==null&&(u.value=f)}function Zt(u){switch(u){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ft(u,f){return u==null||u==="http://www.w3.org/1999/xhtml"?Zt(f):u==="http://www.w3.org/2000/svg"&&f==="foreignObject"?"http://www.w3.org/1999/xhtml":u}var Mt,bt=function(u){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(f,b,T,M){MSApp.execUnsafeLocalFunction(function(){return u(f,b,T,M)})}:u}(function(u,f){if(u.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in u)u.innerHTML=f;else{for(Mt=Mt||document.createElement("div"),Mt.innerHTML="<svg>"+f.valueOf().toString()+"</svg>",f=Mt.firstChild;u.firstChild;)u.removeChild(u.firstChild);for(;f.firstChild;)u.appendChild(f.firstChild)}});function Be(u,f){if(f){var b=u.firstChild;if(b&&b===u.lastChild&&b.nodeType===3){b.nodeValue=f;return}}u.textContent=f}var tt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yt=["Webkit","ms","Moz","O"];Object.keys(tt).forEach(function(u){yt.forEach(function(f){f=f+u.charAt(0).toUpperCase()+u.substring(1),tt[f]=tt[u]})});function jr(u,f,b){return f==null||typeof f=="boolean"||f===""?"":b||typeof f!="number"||f===0||tt.hasOwnProperty(u)&&tt[u]?(""+f).trim():f+"px"}function ir(u,f){u=u.style;for(var b in f)if(f.hasOwnProperty(b)){var T=b.indexOf("--")===0,M=jr(b,f[b],T);b==="float"&&(b="cssFloat"),T?u.setProperty(b,M):u[b]=M}}var vr=V({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vt(u,f){if(f){if(vr[u]&&(f.children!=null||f.dangerouslySetInnerHTML!=null))throw Error(r(137,u));if(f.dangerouslySetInnerHTML!=null){if(f.children!=null)throw Error(r(60));if(typeof f.dangerouslySetInnerHTML!="object"||!("__html"in f.dangerouslySetInnerHTML))throw Error(r(61))}if(f.style!=null&&typeof f.style!="object")throw Error(r(62))}}function Ut(u,f){if(u.indexOf("-")===-1)return typeof f.is=="string";switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ir=null;function kr(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var me=null,je=null,Te=null;function Ae(u){if(u=$r(u)){if(typeof me!="function")throw Error(r(280));var f=u.stateNode;f&&(f=Do(f),me(u.stateNode,u.type,f))}}function be(u){je?Te?Te.push(u):Te=[u]:je=u}function We(){if(je){var u=je,f=Te;if(Te=je=null,Ae(u),f)for(u=0;u<f.length;u++)Ae(f[u])}}function Ve(u,f){return u(f)}function Ge(){}var qe=!1;function it(u,f,b){if(qe)return u(f,b);qe=!0;try{return Ve(u,f,b)}finally{qe=!1,(je!==null||Te!==null)&&(Ge(),We())}}function at(u,f){var b=u.stateNode;if(b===null)return null;var T=Do(b);if(T===null)return null;b=T[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(T=!T.disabled)||(u=u.type,T=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!T;break e;default:u=!1}if(u)return null;if(b&&typeof b!="function")throw Error(r(231,f,typeof b));return b}var xt=!1;if(l)try{var ht={};Object.defineProperty(ht,"passive",{get:function(){xt=!0}}),window.addEventListener("test",ht,ht),window.removeEventListener("test",ht,ht)}catch{xt=!1}function Nt(u,f,b,T,M,D,H,J,ae){var _e=Array.prototype.slice.call(arguments,3);try{f.apply(b,_e)}catch(Me){this.onError(Me)}}var qt=!1,Qt=null,Kt=!1,Nn=null,Qs={onError:function(u){qt=!0,Qt=u}};function Kr(u,f,b,T,M,D,H,J,ae){qt=!1,Qt=null,Nt.apply(Qs,arguments)}function Xr(u,f,b,T,M,D,H,J,ae){if(Kr.apply(this,arguments),qt){if(qt){var _e=Qt;qt=!1,Qt=null}else throw Error(r(198));Kt||(Kt=!0,Nn=_e)}}function pr(u){var f=u,b=u;if(u.alternate)for(;f.return;)f=f.return;else{u=f;do f=u,(f.flags&4098)!==0&&(b=f.return),u=f.return;while(u)}return f.tag===3?b:null}function Or(u){if(u.tag===13){var f=u.memoizedState;if(f===null&&(u=u.alternate,u!==null&&(f=u.memoizedState)),f!==null)return f.dehydrated}return null}function Pi(u){if(pr(u)!==u)throw Error(r(188))}function dn(u){var f=u.alternate;if(!f){if(f=pr(u),f===null)throw Error(r(188));return f!==u?null:u}for(var b=u,T=f;;){var M=b.return;if(M===null)break;var D=M.alternate;if(D===null){if(T=M.return,T!==null){b=T;continue}break}if(M.child===D.child){for(D=M.child;D;){if(D===b)return Pi(M),u;if(D===T)return Pi(M),f;D=D.sibling}throw Error(r(188))}if(b.return!==T.return)b=M,T=D;else{for(var H=!1,J=M.child;J;){if(J===b){H=!0,b=M,T=D;break}if(J===T){H=!0,T=M,b=D;break}J=J.sibling}if(!H){for(J=D.child;J;){if(J===b){H=!0,b=D,T=M;break}if(J===T){H=!0,T=D,b=M;break}J=J.sibling}if(!H)throw Error(r(189))}}if(b.alternate!==T)throw Error(r(190))}if(b.tag!==3)throw Error(r(188));return b.stateNode.current===b?u:f}function ha(u){return u=dn(u),u!==null?pa(u):null}function pa(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var f=pa(u);if(f!==null)return f;u=u.sibling}return null}var ma=e.unstable_scheduleCallback,ga=e.unstable_cancelCallback,ei=e.unstable_shouldYield,oo=e.unstable_requestPaint,Xt=e.unstable_now,Ol=e.unstable_getCurrentPriorityLevel,ti=e.unstable_ImmediatePriority,ki=e.unstable_UserBlockingPriority,ri=e.unstable_NormalPriority,lo=e.unstable_LowPriority,ya=e.unstable_IdlePriority,ws=null,Zn=null;function Pd(u){if(Zn&&typeof Zn.onCommitFiberRoot=="function")try{Zn.onCommitFiberRoot(ws,u,void 0,(u.current.flags&128)===128)}catch{}}var On=Math.clz32?Math.clz32:sc,rc=Math.log,nc=Math.LN2;function sc(u){return u>>>=0,u===0?32:31-(rc(u)/nc|0)|0}var Ti=64,uo=4194304;function Ai(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function ni(u,f){var b=u.pendingLanes;if(b===0)return 0;var T=0,M=u.suspendedLanes,D=u.pingedLanes,H=b&268435455;if(H!==0){var J=H&~M;J!==0?T=Ai(J):(D&=H,D!==0&&(T=Ai(D)))}else H=b&~M,H!==0?T=Ai(H):D!==0&&(T=Ai(D));if(T===0)return 0;if(f!==0&&f!==T&&(f&M)===0&&(M=T&-T,D=f&-f,M>=D||M===16&&(D&4194240)!==0))return f;if((T&4)!==0&&(T|=b&16),f=u.entangledLanes,f!==0)for(u=u.entanglements,f&=T;0<f;)b=31-On(f),M=1<<b,T|=u[b],f&=~M;return T}function ic(u,f){switch(u){case 1:case 2:case 4:return f+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kd(u,f){for(var b=u.suspendedLanes,T=u.pingedLanes,M=u.expirationTimes,D=u.pendingLanes;0<D;){var H=31-On(D),J=1<<H,ae=M[H];ae===-1?((J&b)===0||(J&T)!==0)&&(M[H]=ic(J,f)):ae<=f&&(u.expiredLanes|=J),D&=~J}}function co(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function Dl(){var u=Ti;return Ti<<=1,(Ti&4194240)===0&&(Ti=64),u}function xa(u){for(var f=[],b=0;31>b;b++)f.push(u);return f}function va(u,f,b){u.pendingLanes|=f,f!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,f=31-On(f),u[f]=b}function ac(u,f){var b=u.pendingLanes&~f;u.pendingLanes=f,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=f,u.mutableReadLanes&=f,u.entangledLanes&=f,f=u.entanglements;var T=u.eventTimes;for(u=u.expirationTimes;0<b;){var M=31-On(b),D=1<<M;f[M]=0,T[M]=-1,u[M]=-1,b&=~D}}function ba(u,f){var b=u.entangledLanes|=f;for(u=u.entanglements;b;){var T=31-On(b),M=1<<T;M&f|u[T]&f&&(u[T]|=f),b&=~M}}var Ot=0;function si(u){return u&=-u,1<u?4<u?(u&268435455)!==0?16:536870912:4:1}var Fl,fo,oc,$l,Ll,ho=!1,wa=[],Es=null,Ss=null,Cs=null,ji=new Map,Ea=new Map,Rs=[],Td="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lc(u,f){switch(u){case"focusin":case"focusout":Es=null;break;case"dragenter":case"dragleave":Ss=null;break;case"mouseover":case"mouseout":Cs=null;break;case"pointerover":case"pointerout":ji.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ea.delete(f.pointerId)}}function ii(u,f,b,T,M,D){return u===null||u.nativeEvent!==D?(u={blockedOn:f,domEventName:b,eventSystemFlags:T,nativeEvent:D,targetContainers:[M]},f!==null&&(f=$r(f),f!==null&&fo(f)),u):(u.eventSystemFlags|=T,f=u.targetContainers,M!==null&&f.indexOf(M)===-1&&f.push(M),u)}function Ad(u,f,b,T,M){switch(f){case"focusin":return Es=ii(Es,u,f,b,T,M),!0;case"dragenter":return Ss=ii(Ss,u,f,b,T,M),!0;case"mouseover":return Cs=ii(Cs,u,f,b,T,M),!0;case"pointerover":var D=M.pointerId;return ji.set(D,ii(ji.get(D)||null,u,f,b,T,M)),!0;case"gotpointercapture":return D=M.pointerId,Ea.set(D,ii(Ea.get(D)||null,u,f,b,T,M)),!0}return!1}function uc(u){var f=Jn(u.target);if(f!==null){var b=pr(f);if(b!==null){if(f=b.tag,f===13){if(f=Or(b),f!==null){u.blockedOn=f,Ll(u.priority,function(){oc(b)});return}}else if(f===3&&b.stateNode.current.memoizedState.isDehydrated){u.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}u.blockedOn=null}function po(u){if(u.blockedOn!==null)return!1;for(var f=u.targetContainers;0<f.length;){var b=yo(u.domEventName,u.eventSystemFlags,f[0],u.nativeEvent);if(b===null){b=u.nativeEvent;var T=new b.constructor(b.type,b);Ir=T,b.target.dispatchEvent(T),Ir=null}else return f=$r(b),f!==null&&fo(f),u.blockedOn=b,!1;f.shift()}return!0}function cc(u,f,b){po(u)&&b.delete(f)}function jd(){ho=!1,Es!==null&&po(Es)&&(Es=null),Ss!==null&&po(Ss)&&(Ss=null),Cs!==null&&po(Cs)&&(Cs=null),ji.forEach(cc),Ea.forEach(cc)}function Gt(u,f){u.blockedOn===f&&(u.blockedOn=null,ho||(ho=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,jd)))}function $t(u){function f(M){return Gt(M,u)}if(0<wa.length){Gt(wa[0],u);for(var b=1;b<wa.length;b++){var T=wa[b];T.blockedOn===u&&(T.blockedOn=null)}}for(Es!==null&&Gt(Es,u),Ss!==null&&Gt(Ss,u),Cs!==null&&Gt(Cs,u),ji.forEach(f),Ea.forEach(f),b=0;b<Rs.length;b++)T=Rs[b],T.blockedOn===u&&(T.blockedOn=null);for(;0<Rs.length&&(b=Rs[0],b.blockedOn===null);)uc(b),b.blockedOn===null&&Rs.shift()}var Ii=j.ReactCurrentBatchConfig,mo=!0;function Id(u,f,b,T){var M=Ot,D=Ii.transition;Ii.transition=null;try{Ot=1,Bl(u,f,b,T)}finally{Ot=M,Ii.transition=D}}function Md(u,f,b,T){var M=Ot,D=Ii.transition;Ii.transition=null;try{Ot=4,Bl(u,f,b,T)}finally{Ot=M,Ii.transition=D}}function Bl(u,f,b,T){if(mo){var M=yo(u,f,b,T);if(M===null)nu(u,f,T,go,b),lc(u,T);else if(Ad(M,u,f,b,T))T.stopPropagation();else if(lc(u,T),f&4&&-1<Td.indexOf(u)){for(;M!==null;){var D=$r(M);if(D!==null&&Fl(D),D=yo(u,f,b,T),D===null&&nu(u,f,T,go,b),D===M)break;M=D}M!==null&&T.stopPropagation()}else nu(u,f,T,null,b)}}var go=null;function yo(u,f,b,T){if(go=null,u=kr(T),u=Jn(u),u!==null)if(f=pr(u),f===null)u=null;else if(b=f.tag,b===13){if(u=Or(f),u!==null)return u;u=null}else if(b===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;u=null}else f!==u&&(u=null);return go=u,null}function dc(u){switch(u){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ol()){case ti:return 1;case ki:return 4;case ri:case lo:return 16;case ya:return 536870912;default:return 16}default:return 16}}var sr=null,Sa=null,Kn=null;function Vl(){if(Kn)return Kn;var u,f=Sa,b=f.length,T,M="value"in sr?sr.value:sr.textContent,D=M.length;for(u=0;u<b&&f[u]===M[u];u++);var H=b-u;for(T=1;T<=H&&f[b-T]===M[D-T];T++);return Kn=M.slice(u,1<T?1-T:void 0)}function Mi(u){var f=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&f===13&&(u=13)):u=f,u===10&&(u=13),32<=u||u===13?u:0}function Yr(){return!0}function Gl(){return!1}function sn(u){function f(b,T,M,D,H){this._reactName=b,this._targetInst=M,this.type=T,this.nativeEvent=D,this.target=H,this.currentTarget=null;for(var J in u)u.hasOwnProperty(J)&&(b=u[J],this[J]=b?b(D):D[J]);return this.isDefaultPrevented=(D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1)?Yr:Gl,this.isPropagationStopped=Gl,this}return V(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=Yr)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=Yr)},persist:function(){},isPersistent:Yr}),f}var ai={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xo=sn(ai),Ni=V({},ai,{view:0,detail:0}),fc=sn(Ni),Jr,Ul,Dr,vo=V({},Ni,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zl,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==Dr&&(Dr&&u.type==="mousemove"?(Jr=u.screenX-Dr.screenX,Ul=u.screenY-Dr.screenY):Ul=Jr=0,Dr=u),Jr)},movementY:function(u){return"movementY"in u?u.movementY:Ul}}),zl=sn(vo),Ps=V({},vo,{dataTransfer:0}),_o=sn(Ps),Hl=V({},Ni,{relatedTarget:0}),Yt=sn(Hl),ks=V({},ai,{animationName:0,elapsedTime:0,pseudoElement:0}),ql=sn(ks),Nd=V({},ai,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),Wl=sn(Nd),Od=V({},ai,{data:0}),hc=sn(Od),Dd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Oi(u){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(u):(u=bo[u])?!!f[u]:!1}function Zl(){return Oi}var mc=V({},Ni,{key:function(u){if(u.key){var f=Dd[u.key]||u.key;if(f!=="Unidentified")return f}return u.type==="keypress"?(u=Mi(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?pc[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zl,charCode:function(u){return u.type==="keypress"?Mi(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?Mi(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),gc=sn(mc),Kl=V({},vo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wo=sn(Kl),yc=V({},Ni,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zl}),Fd=sn(yc),Xl=V({},ai,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yl=sn(Xl),$d=V({},vo,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),xc=sn($d),fn=[9,13,27,32],Ca=l&&"CompositionEvent"in window,ls=null;l&&"documentMode"in document&&(ls=document.documentMode);var vc=l&&"TextEvent"in window&&!ls,Jl=l&&(!Ca||ls&&8<ls&&11>=ls),_c=" ",bc=!1;function wc(u,f){switch(u){case"keyup":return fn.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ec(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var Di=!1;function Fi(u,f){switch(u){case"compositionend":return Ec(f);case"keypress":return f.which!==32?null:(bc=!0,_c);case"textInput":return u=f.data,u===_c&&bc?null:u;default:return null}}function Ld(u,f){if(Di)return u==="compositionend"||!Ca&&wc(u,f)?(u=Vl(),Kn=Sa=sr=null,Di=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return Jl&&f.locale!=="ko"?null:f.data;default:return null}}var Bd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Eo(u){var f=u&&u.nodeName&&u.nodeName.toLowerCase();return f==="input"?!!Bd[u.type]:f==="textarea"}function Ql(u,f,b,T){be(T),f=Io(f,"onChange"),0<f.length&&(b=new xo("onChange","change",null,b,T),u.push({event:b,listeners:f}))}var wn=null,Ts=null;function Vd(u){Ac(u,0)}function So(u){var f=pt(u);if(et(f))return u}function Gd(u,f){if(u==="change")return f}var oi=!1;if(l){var hn;if(l){var Co="oninput"in document;if(!Co){var Sc=document.createElement("div");Sc.setAttribute("oninput","return;"),Co=typeof Sc.oninput=="function"}hn=Co}else hn=!1;oi=hn&&(!document.documentMode||9<document.documentMode)}function Cc(){wn&&(wn.detachEvent("onpropertychange",Rc),Ts=wn=null)}function Rc(u){if(u.propertyName==="value"&&So(Ts)){var f=[];Ql(f,Ts,u,kr(u)),it(Vd,f)}}function Ud(u,f,b){u==="focusin"?(Cc(),wn=f,Ts=b,wn.attachEvent("onpropertychange",Rc)):u==="focusout"&&Cc()}function zd(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return So(Ts)}function $i(u,f){if(u==="click")return So(f)}function de(u,f){if(u==="input"||u==="change")return So(f)}function we(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var ve=typeof Object.is=="function"?Object.is:we;function ze(u,f){if(ve(u,f))return!0;if(typeof u!="object"||u===null||typeof f!="object"||f===null)return!1;var b=Object.keys(u),T=Object.keys(f);if(b.length!==T.length)return!1;for(T=0;T<b.length;T++){var M=b[T];if(!c.call(f,M)||!ve(u[M],f[M]))return!1}return!0}function dt(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function At(u,f){var b=dt(u);u=0;for(var T;b;){if(b.nodeType===3){if(T=u+b.textContent.length,u<=f&&T>=f)return{node:b,offset:f-u};u=T}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=dt(b)}}function mr(u,f){return u&&f?u===f?!0:u&&u.nodeType===3?!1:f&&f.nodeType===3?mr(u,f.parentNode):"contains"in u?u.contains(f):u.compareDocumentPosition?!!(u.compareDocumentPosition(f)&16):!1:!1}function zt(){for(var u=window,f=Le();f instanceof u.HTMLIFrameElement;){try{var b=typeof f.contentWindow.location.href=="string"}catch{b=!1}if(b)u=f.contentWindow;else break;f=Le(u.document)}return f}function Ra(u){var f=u&&u.nodeName&&u.nodeName.toLowerCase();return f&&(f==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||f==="textarea"||u.contentEditable==="true")}function Hd(u){var f=zt(),b=u.focusedElem,T=u.selectionRange;if(f!==b&&b&&b.ownerDocument&&mr(b.ownerDocument.documentElement,b)){if(T!==null&&Ra(b)){if(f=T.start,u=T.end,u===void 0&&(u=f),"selectionStart"in b)b.selectionStart=f,b.selectionEnd=Math.min(u,b.value.length);else if(u=(f=b.ownerDocument||document)&&f.defaultView||window,u.getSelection){u=u.getSelection();var M=b.textContent.length,D=Math.min(T.start,M);T=T.end===void 0?D:Math.min(T.end,M),!u.extend&&D>T&&(M=T,T=D,D=M),M=At(b,D);var H=At(b,T);M&&H&&(u.rangeCount!==1||u.anchorNode!==M.node||u.anchorOffset!==M.offset||u.focusNode!==H.node||u.focusOffset!==H.offset)&&(f=f.createRange(),f.setStart(M.node,M.offset),u.removeAllRanges(),D>T?(u.addRange(f),u.extend(H.node,H.offset)):(f.setEnd(H.node,H.offset),u.addRange(f)))}}for(f=[],u=b;u=u.parentNode;)u.nodeType===1&&f.push({element:u,left:u.scrollLeft,top:u.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<f.length;b++)u=f[b],u.element.scrollLeft=u.left,u.element.scrollTop=u.top}}var En=l&&"documentMode"in document&&11>=document.documentMode,us=null,eu=null,Xn=null,Li=!1;function Pa(u,f,b){var T=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;Li||us==null||us!==Le(T)||(T=us,"selectionStart"in T&&Ra(T)?T={start:T.selectionStart,end:T.selectionEnd}:(T=(T.ownerDocument&&T.ownerDocument.defaultView||window).getSelection(),T={anchorNode:T.anchorNode,anchorOffset:T.anchorOffset,focusNode:T.focusNode,focusOffset:T.focusOffset}),Xn&&ze(Xn,T)||(Xn=T,T=Io(eu,"onSelect"),0<T.length&&(f=new xo("onSelect","select",null,f,b),u.push({event:f,listeners:T}),f.target=us)))}function jt(u,f){var b={};return b[u.toLowerCase()]=f.toLowerCase(),b["Webkit"+u]="webkit"+f,b["Moz"+u]="moz"+f,b}var Bi={animationend:jt("Animation","AnimationEnd"),animationiteration:jt("Animation","AnimationIteration"),animationstart:jt("Animation","AnimationStart"),transitionend:jt("Transition","TransitionEnd")},Ro={},ka={};l&&(ka=document.createElement("div").style,"AnimationEvent"in window||(delete Bi.animationend.animation,delete Bi.animationiteration.animation,delete Bi.animationstart.animation),"TransitionEvent"in window||delete Bi.transitionend.transition);function Po(u){if(Ro[u])return Ro[u];if(!Bi[u])return u;var f=Bi[u],b;for(b in f)if(f.hasOwnProperty(b)&&b in ka)return Ro[u]=f[b];return u}var Pc=Po("animationend"),kc=Po("animationiteration"),Ta=Po("animationstart"),cs=Po("transitionend"),Aa=new Map,tu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dn(u,f){Aa.set(u,f),a(f,[u])}for(var ko=0;ko<tu.length;ko++){var To=tu[ko],Ao=To.toLowerCase(),Tc=To[0].toUpperCase()+To.slice(1);Dn(Ao,"on"+Tc)}Dn(Pc,"onAnimationEnd"),Dn(kc,"onAnimationIteration"),Dn(Ta,"onAnimationStart"),Dn("dblclick","onDoubleClick"),Dn("focusin","onFocus"),Dn("focusout","onBlur"),Dn(cs,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ds="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),li=new Set("cancel close invalid load scroll toggle".split(" ").concat(ds));function ja(u,f,b){var T=u.type||"unknown-event";u.currentTarget=b,Xr(T,f,void 0,u),u.currentTarget=null}function Ac(u,f){f=(f&4)!==0;for(var b=0;b<u.length;b++){var T=u[b],M=T.event;T=T.listeners;e:{var D=void 0;if(f)for(var H=T.length-1;0<=H;H--){var J=T[H],ae=J.instance,_e=J.currentTarget;if(J=J.listener,ae!==D&&M.isPropagationStopped())break e;ja(M,J,_e),D=ae}else for(H=0;H<T.length;H++){if(J=T[H],ae=J.instance,_e=J.currentTarget,J=J.listener,ae!==D&&M.isPropagationStopped())break e;ja(M,J,_e),D=ae}}}if(Kt)throw u=Nn,Kt=!1,Nn=null,u}function er(u,f){var b=f[Oo];b===void 0&&(b=f[Oo]=new Set);var T=u+"__bubble";b.has(T)||(jo(f,u,2,!1),b.add(T))}function ru(u,f,b){var T=0;f&&(T|=4),jo(b,u,T,f)}var ui="_reactListening"+Math.random().toString(36).slice(2);function As(u){if(!u[ui]){u[ui]=!0,n.forEach(function(b){b!=="selectionchange"&&(li.has(b)||ru(b,!1,u),ru(b,!0,u))});var f=u.nodeType===9?u:u.ownerDocument;f===null||f[ui]||(f[ui]=!0,ru("selectionchange",!1,f))}}function jo(u,f,b,T){switch(dc(f)){case 1:var M=Id;break;case 4:M=Md;break;default:M=Bl}b=M.bind(null,f,b,u),M=void 0,!xt||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(M=!0),T?M!==void 0?u.addEventListener(f,b,{capture:!0,passive:M}):u.addEventListener(f,b,!0):M!==void 0?u.addEventListener(f,b,{passive:M}):u.addEventListener(f,b,!1)}function nu(u,f,b,T,M){var D=T;if((f&1)===0&&(f&2)===0&&T!==null)e:for(;;){if(T===null)return;var H=T.tag;if(H===3||H===4){var J=T.stateNode.containerInfo;if(J===M||J.nodeType===8&&J.parentNode===M)break;if(H===4)for(H=T.return;H!==null;){var ae=H.tag;if((ae===3||ae===4)&&(ae=H.stateNode.containerInfo,ae===M||ae.nodeType===8&&ae.parentNode===M))return;H=H.return}for(;J!==null;){if(H=Jn(J),H===null)return;if(ae=H.tag,ae===5||ae===6){T=D=H;continue e}J=J.parentNode}}T=T.return}it(function(){var _e=D,Me=kr(b),De=[];e:{var Ie=Aa.get(u);if(Ie!==void 0){var He=xo,Ke=u;switch(u){case"keypress":if(Mi(b)===0)break e;case"keydown":case"keyup":He=gc;break;case"focusin":Ke="focus",He=Yt;break;case"focusout":Ke="blur",He=Yt;break;case"beforeblur":case"afterblur":He=Yt;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":He=zl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":He=_o;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":He=Fd;break;case Pc:case kc:case Ta:He=ql;break;case cs:He=Yl;break;case"scroll":He=fc;break;case"wheel":He=xc;break;case"copy":case"cut":case"paste":He=Wl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":He=wo}var Xe=(f&4)!==0,dr=!Xe&&u==="scroll",ge=Xe?Ie!==null?Ie+"Capture":null:Ie;Xe=[];for(var ue=_e,ye;ue!==null;){ye=ue;var $e=ye.stateNode;if(ye.tag===5&&$e!==null&&(ye=$e,ge!==null&&($e=at(ue,ge),$e!=null&&Xe.push(Vi(ue,$e,ye)))),dr)break;ue=ue.return}0<Xe.length&&(Ie=new He(Ie,Ke,null,b,Me),De.push({event:Ie,listeners:Xe}))}}if((f&7)===0){e:{if(Ie=u==="mouseover"||u==="pointerover",He=u==="mouseout"||u==="pointerout",Ie&&b!==Ir&&(Ke=b.relatedTarget||b.fromElement)&&(Jn(Ke)||Ke[pn]))break e;if((He||Ie)&&(Ie=Me.window===Me?Me:(Ie=Me.ownerDocument)?Ie.defaultView||Ie.parentWindow:window,He?(Ke=b.relatedTarget||b.toElement,He=_e,Ke=Ke?Jn(Ke):null,Ke!==null&&(dr=pr(Ke),Ke!==dr||Ke.tag!==5&&Ke.tag!==6)&&(Ke=null)):(He=null,Ke=_e),He!==Ke)){if(Xe=zl,$e="onMouseLeave",ge="onMouseEnter",ue="mouse",(u==="pointerout"||u==="pointerover")&&(Xe=wo,$e="onPointerLeave",ge="onPointerEnter",ue="pointer"),dr=He==null?Ie:pt(He),ye=Ke==null?Ie:pt(Ke),Ie=new Xe($e,ue+"leave",He,b,Me),Ie.target=dr,Ie.relatedTarget=ye,$e=null,Jn(Me)===_e&&(Xe=new Xe(ge,ue+"enter",Ke,b,Me),Xe.target=ye,Xe.relatedTarget=dr,$e=Xe),dr=$e,He&&Ke)t:{for(Xe=He,ge=Ke,ue=0,ye=Xe;ye;ye=Gi(ye))ue++;for(ye=0,$e=ge;$e;$e=Gi($e))ye++;for(;0<ue-ye;)Xe=Gi(Xe),ue--;for(;0<ye-ue;)ge=Gi(ge),ye--;for(;ue--;){if(Xe===ge||ge!==null&&Xe===ge.alternate)break t;Xe=Gi(Xe),ge=Gi(ge)}Xe=null}else Xe=null;He!==null&&gr(De,Ie,He,Xe,!1),Ke!==null&&dr!==null&&gr(De,dr,Ke,Xe,!0)}}e:{if(Ie=_e?pt(_e):window,He=Ie.nodeName&&Ie.nodeName.toLowerCase(),He==="select"||He==="input"&&Ie.type==="file")var Ye=Gd;else if(Eo(Ie))if(oi)Ye=de;else{Ye=zd;var nt=Ud}else(He=Ie.nodeName)&&He.toLowerCase()==="input"&&(Ie.type==="checkbox"||Ie.type==="radio")&&(Ye=$i);if(Ye&&(Ye=Ye(u,_e))){Ql(De,Ye,b,Me);break e}nt&&nt(u,Ie,_e),u==="focusout"&&(nt=Ie._wrapperState)&&nt.controlled&&Ie.type==="number"&&Ct(Ie,"number",Ie.value)}switch(nt=_e?pt(_e):window,u){case"focusin":(Eo(nt)||nt.contentEditable==="true")&&(us=nt,eu=_e,Xn=null);break;case"focusout":Xn=eu=us=null;break;case"mousedown":Li=!0;break;case"contextmenu":case"mouseup":case"dragend":Li=!1,Pa(De,b,Me);break;case"selectionchange":if(En)break;case"keydown":case"keyup":Pa(De,b,Me)}var st;if(Ca)e:{switch(u){case"compositionstart":var ut="onCompositionStart";break e;case"compositionend":ut="onCompositionEnd";break e;case"compositionupdate":ut="onCompositionUpdate";break e}ut=void 0}else Di?wc(u,b)&&(ut="onCompositionEnd"):u==="keydown"&&b.keyCode===229&&(ut="onCompositionStart");ut&&(Jl&&b.locale!=="ko"&&(Di||ut!=="onCompositionStart"?ut==="onCompositionEnd"&&Di&&(st=Vl()):(sr=Me,Sa="value"in sr?sr.value:sr.textContent,Di=!0)),nt=Io(_e,ut),0<nt.length&&(ut=new hc(ut,u,null,b,Me),De.push({event:ut,listeners:nt}),st?ut.data=st:(st=Ec(b),st!==null&&(ut.data=st)))),(st=vc?Fi(u,b):Ld(u,b))&&(_e=Io(_e,"onBeforeInput"),0<_e.length&&(Me=new hc("onBeforeInput","beforeinput",null,b,Me),De.push({event:Me,listeners:_e}),Me.data=st))}Ac(De,f)})}function Vi(u,f,b){return{instance:u,listener:f,currentTarget:b}}function Io(u,f){for(var b=f+"Capture",T=[];u!==null;){var M=u,D=M.stateNode;M.tag===5&&D!==null&&(M=D,D=at(u,b),D!=null&&T.unshift(Vi(u,D,M)),D=at(u,f),D!=null&&T.push(Vi(u,D,M))),u=u.return}return T}function Gi(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5);return u||null}function gr(u,f,b,T,M){for(var D=f._reactName,H=[];b!==null&&b!==T;){var J=b,ae=J.alternate,_e=J.stateNode;if(ae!==null&&ae===T)break;J.tag===5&&_e!==null&&(J=_e,M?(ae=at(b,D),ae!=null&&H.unshift(Vi(b,ae,J))):M||(ae=at(b,D),ae!=null&&H.push(Vi(b,ae,J)))),b=b.return}H.length!==0&&u.push({event:f,listeners:H})}var Fr=/\r\n?/g,qd=/\u0000|\uFFFD/g;function jc(u){return(typeof u=="string"?u:""+u).replace(Fr,`
`).replace(qd,"")}function Ia(u,f,b){if(f=jc(f),jc(u)!==f&&b)throw Error(r(425))}function Mo(){}var Ma=null,ci=null;function Na(u,f){return u==="textarea"||u==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var js=typeof setTimeout=="function"?setTimeout:void 0,Oa=typeof clearTimeout=="function"?clearTimeout:void 0,Ui=typeof Promise=="function"?Promise:void 0,No=typeof queueMicrotask=="function"?queueMicrotask:typeof Ui<"u"?function(u){return Ui.resolve(null).then(u).catch(zi)}:js;function zi(u){setTimeout(function(){throw u})}function su(u,f){var b=f,T=0;do{var M=b.nextSibling;if(u.removeChild(b),M&&M.nodeType===8)if(b=M.data,b==="/$"){if(T===0){u.removeChild(M),$t(f);return}T--}else b!=="$"&&b!=="$?"&&b!=="$!"||T++;b=M}while(b);$t(f)}function Is(u){for(;u!=null;u=u.nextSibling){var f=u.nodeType;if(f===1||f===3)break;if(f===8){if(f=u.data,f==="$"||f==="$!"||f==="$?")break;if(f==="/$")return null}}return u}function Ic(u){u=u.previousSibling;for(var f=0;u;){if(u.nodeType===8){var b=u.data;if(b==="$"||b==="$!"||b==="$?"){if(f===0)return u;f--}else b==="/$"&&f++}u=u.previousSibling}return null}var Hi=Math.random().toString(36).slice(2),Yn="__reactFiber$"+Hi,Ms="__reactProps$"+Hi,pn="__reactContainer$"+Hi,Oo="__reactEvents$"+Hi,W="__reactListeners$"+Hi,qi="__reactHandles$"+Hi;function Jn(u){var f=u[Yn];if(f)return f;for(var b=u.parentNode;b;){if(f=b[pn]||b[Yn]){if(b=f.alternate,f.child!==null||b!==null&&b.child!==null)for(u=Ic(u);u!==null;){if(b=u[Yn])return b;u=Ic(u)}return f}u=b,b=u.parentNode}return null}function $r(u){return u=u[Yn]||u[pn],!u||u.tag!==5&&u.tag!==6&&u.tag!==13&&u.tag!==3?null:u}function pt(u){if(u.tag===5||u.tag===6)return u.stateNode;throw Error(r(33))}function Do(u){return u[Ms]||null}var iu=[],Wi=-1;function an(u){return{current:u}}function tr(u){0>Wi||(u.current=iu[Wi],iu[Wi]=null,Wi--)}function Jt(u,f){Wi++,iu[Wi]=u.current,u.current=f}var Ns={},Lr=an(Ns),on=an(!1),Qr=Ns;function Zi(u,f){var b=u.type.contextTypes;if(!b)return Ns;var T=u.stateNode;if(T&&T.__reactInternalMemoizedUnmaskedChildContext===f)return T.__reactInternalMemoizedMaskedChildContext;var M={},D;for(D in b)M[D]=f[D];return T&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=f,u.__reactInternalMemoizedMaskedChildContext=M),M}function ln(u){return u=u.childContextTypes,u!=null}function Fo(){tr(on),tr(Lr)}function Mc(u,f,b){if(Lr.current!==Ns)throw Error(r(168));Jt(Lr,f),Jt(on,b)}function Nc(u,f,b){var T=u.stateNode;if(f=f.childContextTypes,typeof T.getChildContext!="function")return b;T=T.getChildContext();for(var M in T)if(!(M in f))throw Error(r(108,Re(u)||"Unknown",M));return V({},b,T)}function Sn(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||Ns,Qr=Lr.current,Jt(Lr,u),Jt(on,on.current),!0}function Oc(u,f,b){var T=u.stateNode;if(!T)throw Error(r(169));b?(u=Nc(u,f,Qr),T.__reactInternalMemoizedMergedChildContext=u,tr(on),tr(Lr),Jt(Lr,u)):tr(on),Jt(on,b)}var fs=null,$o=!1,au=!1;function Dc(u){fs===null?fs=[u]:fs.push(u)}function di(u){$o=!0,Dc(u)}function Os(){if(!au&&fs!==null){au=!0;var u=0,f=Ot;try{var b=fs;for(Ot=1;u<b.length;u++){var T=b[u];do T=T(!0);while(T!==null)}fs=null,$o=!1}catch(M){throw fs!==null&&(fs=fs.slice(u+1)),ma(ti,Os),M}finally{Ot=f,au=!1}}return null}var Ki=[],Br=0,Lo=null,Bo=0,Cn=[],Rn=0,fi=null,Qn=1,es="";function hi(u,f){Ki[Br++]=Bo,Ki[Br++]=Lo,Lo=u,Bo=f}function Fc(u,f,b){Cn[Rn++]=Qn,Cn[Rn++]=es,Cn[Rn++]=fi,fi=u;var T=Qn;u=es;var M=32-On(T)-1;T&=~(1<<M),b+=1;var D=32-On(f)+M;if(30<D){var H=M-M%5;D=(T&(1<<H)-1).toString(32),T>>=H,M-=H,Qn=1<<32-On(f)+M|b<<M|T,es=D+u}else Qn=1<<D|b<<M|T,es=u}function Da(u){u.return!==null&&(hi(u,1),Fc(u,1,0))}function pi(u){for(;u===Lo;)Lo=Ki[--Br],Ki[Br]=null,Bo=Ki[--Br],Ki[Br]=null;for(;u===fi;)fi=Cn[--Rn],Cn[Rn]=null,es=Cn[--Rn],Cn[Rn]=null,Qn=Cn[--Rn],Cn[Rn]=null}var Vr=null,mn=null,rr=!1,Fn=null;function ts(u,f){var b=_n(5,null,null,0);b.elementType="DELETED",b.stateNode=f,b.return=u,f=u.deletions,f===null?(u.deletions=[b],u.flags|=16):f.push(b)}function Vo(u,f){switch(u.tag){case 5:var b=u.type;return f=f.nodeType!==1||b.toLowerCase()!==f.nodeName.toLowerCase()?null:f,f!==null?(u.stateNode=f,Vr=u,mn=Is(f.firstChild),!0):!1;case 6:return f=u.pendingProps===""||f.nodeType!==3?null:f,f!==null?(u.stateNode=f,Vr=u,mn=null,!0):!1;case 13:return f=f.nodeType!==8?null:f,f!==null?(b=fi!==null?{id:Qn,overflow:es}:null,u.memoizedState={dehydrated:f,treeContext:b,retryLane:1073741824},b=_n(18,null,null,0),b.stateNode=f,b.return=u,u.child=b,Vr=u,mn=null,!0):!1;default:return!1}}function hs(u){return(u.mode&1)!==0&&(u.flags&128)===0}function un(u){if(rr){var f=mn;if(f){var b=f;if(!Vo(u,f)){if(hs(u))throw Error(r(418));f=Is(b.nextSibling);var T=Vr;f&&Vo(u,f)?ts(T,b):(u.flags=u.flags&-4097|2,rr=!1,Vr=u)}}else{if(hs(u))throw Error(r(418));u.flags=u.flags&-4097|2,rr=!1,Vr=u}}}function $c(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;Vr=u}function Fa(u){if(u!==Vr)return!1;if(!rr)return $c(u),rr=!0,!1;var f;if((f=u.tag!==3)&&!(f=u.tag!==5)&&(f=u.type,f=f!=="head"&&f!=="body"&&!Na(u.type,u.memoizedProps)),f&&(f=mn)){if(hs(u))throw ou(),Error(r(418));for(;f;)ts(u,f),f=Is(f.nextSibling)}if($c(u),u.tag===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(r(317));e:{for(u=u.nextSibling,f=0;u;){if(u.nodeType===8){var b=u.data;if(b==="/$"){if(f===0){mn=Is(u.nextSibling);break e}f--}else b!=="$"&&b!=="$!"&&b!=="$?"||f++}u=u.nextSibling}mn=null}}else mn=Vr?Is(u.stateNode.nextSibling):null;return!0}function ou(){for(var u=mn;u;)u=Is(u.nextSibling)}function rs(){mn=Vr=null,rr=!1}function ns(u){Fn===null?Fn=[u]:Fn.push(u)}var Lc=j.ReactCurrentBatchConfig;function $n(u,f){if(u&&u.defaultProps){f=V({},f),u=u.defaultProps;for(var b in u)f[b]===void 0&&(f[b]=u[b]);return f}return f}var mi=an(null),Go=null,gi=null,_r=null;function $a(){_r=gi=Go=null}function Uo(u){var f=mi.current;tr(mi),u._currentValue=f}function Pn(u,f,b){for(;u!==null;){var T=u.alternate;if((u.childLanes&f)!==f?(u.childLanes|=f,T!==null&&(T.childLanes|=f)):T!==null&&(T.childLanes&f)!==f&&(T.childLanes|=f),u===b)break;u=u.return}}function Ds(u,f){Go=u,_r=gi=null,u=u.dependencies,u!==null&&u.firstContext!==null&&((u.lanes&f)!==0&&(zr=!0),u.firstContext=null)}function en(u){var f=u._currentValue;if(_r!==u)if(u={context:u,memoizedValue:f,next:null},gi===null){if(Go===null)throw Error(r(308));gi=u,Go.dependencies={lanes:0,firstContext:u}}else gi=gi.next=u;return f}var gn=null;function zo(u){gn===null?gn=[u]:gn.push(u)}function Gr(u,f,b,T){var M=f.interleaved;return M===null?(b.next=b,zo(f)):(b.next=M.next,M.next=b),f.interleaved=b,Ln(u,T)}function Ln(u,f){u.lanes|=f;var b=u.alternate;for(b!==null&&(b.lanes|=f),b=u,u=u.return;u!==null;)u.childLanes|=f,b=u.alternate,b!==null&&(b.childLanes|=f),b=u,u=u.return;return b.tag===3?b.stateNode:null}var Fs=!1;function lu(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bc(u,f){u=u.updateQueue,f.updateQueue===u&&(f.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function Bn(u,f){return{eventTime:u,lane:f,tag:0,payload:null,callback:null,next:null}}function $s(u,f,b){var T=u.updateQueue;if(T===null)return null;if(T=T.shared,(kt&2)!==0){var M=T.pending;return M===null?f.next=f:(f.next=M.next,M.next=f),T.pending=f,Ln(u,b)}return M=T.interleaved,M===null?(f.next=f,zo(T)):(f.next=M.next,M.next=f),T.interleaved=f,Ln(u,b)}function Ls(u,f,b){if(f=f.updateQueue,f!==null&&(f=f.shared,(b&4194240)!==0)){var T=f.lanes;T&=u.pendingLanes,b|=T,f.lanes=b,ba(u,b)}}function uu(u,f){var b=u.updateQueue,T=u.alternate;if(T!==null&&(T=T.updateQueue,b===T)){var M=null,D=null;if(b=b.firstBaseUpdate,b!==null){do{var H={eventTime:b.eventTime,lane:b.lane,tag:b.tag,payload:b.payload,callback:b.callback,next:null};D===null?M=D=H:D=D.next=H,b=b.next}while(b!==null);D===null?M=D=f:D=D.next=f}else M=D=f;b={baseState:T.baseState,firstBaseUpdate:M,lastBaseUpdate:D,shared:T.shared,effects:T.effects},u.updateQueue=b;return}u=b.lastBaseUpdate,u===null?b.firstBaseUpdate=f:u.next=f,b.lastBaseUpdate=f}function Ho(u,f,b,T){var M=u.updateQueue;Fs=!1;var D=M.firstBaseUpdate,H=M.lastBaseUpdate,J=M.shared.pending;if(J!==null){M.shared.pending=null;var ae=J,_e=ae.next;ae.next=null,H===null?D=_e:H.next=_e,H=ae;var Me=u.alternate;Me!==null&&(Me=Me.updateQueue,J=Me.lastBaseUpdate,J!==H&&(J===null?Me.firstBaseUpdate=_e:J.next=_e,Me.lastBaseUpdate=ae))}if(D!==null){var De=M.baseState;H=0,Me=_e=ae=null,J=D;do{var Ie=J.lane,He=J.eventTime;if((T&Ie)===Ie){Me!==null&&(Me=Me.next={eventTime:He,lane:0,tag:J.tag,payload:J.payload,callback:J.callback,next:null});e:{var Ke=u,Xe=J;switch(Ie=f,He=b,Xe.tag){case 1:if(Ke=Xe.payload,typeof Ke=="function"){De=Ke.call(He,De,Ie);break e}De=Ke;break e;case 3:Ke.flags=Ke.flags&-65537|128;case 0:if(Ke=Xe.payload,Ie=typeof Ke=="function"?Ke.call(He,De,Ie):Ke,Ie==null)break e;De=V({},De,Ie);break e;case 2:Fs=!0}}J.callback!==null&&J.lane!==0&&(u.flags|=64,Ie=M.effects,Ie===null?M.effects=[J]:Ie.push(J))}else He={eventTime:He,lane:Ie,tag:J.tag,payload:J.payload,callback:J.callback,next:null},Me===null?(_e=Me=He,ae=De):Me=Me.next=He,H|=Ie;if(J=J.next,J===null){if(J=M.shared.pending,J===null)break;Ie=J,J=Ie.next,Ie.next=null,M.lastBaseUpdate=Ie,M.shared.pending=null}}while(!0);if(Me===null&&(ae=De),M.baseState=ae,M.firstBaseUpdate=_e,M.lastBaseUpdate=Me,f=M.shared.interleaved,f!==null){M=f;do H|=M.lane,M=M.next;while(M!==f)}else D===null&&(M.shared.lanes=0);qs|=H,u.lanes=H,u.memoizedState=De}}function Vc(u,f,b){if(u=f.effects,f.effects=null,u!==null)for(f=0;f<u.length;f++){var T=u[f],M=T.callback;if(M!==null){if(T.callback=null,T=b,typeof M!="function")throw Error(r(191,M));M.call(T)}}}var Xi=new t.Component().refs;function cu(u,f,b,T){f=u.memoizedState,b=b(T,f),b=b==null?f:V({},f,b),u.memoizedState=b,u.lanes===0&&(u.updateQueue.baseState=b)}var qo={isMounted:function(u){return(u=u._reactInternals)?pr(u)===u:!1},enqueueSetState:function(u,f,b){u=u._reactInternals;var T=nn(),M=Zs(u),D=Bn(T,M);D.payload=f,b!=null&&(D.callback=b),f=$s(u,D,M),f!==null&&(zn(f,u,M,T),Ls(f,u,M))},enqueueReplaceState:function(u,f,b){u=u._reactInternals;var T=nn(),M=Zs(u),D=Bn(T,M);D.tag=1,D.payload=f,b!=null&&(D.callback=b),f=$s(u,D,M),f!==null&&(zn(f,u,M,T),Ls(f,u,M))},enqueueForceUpdate:function(u,f){u=u._reactInternals;var b=nn(),T=Zs(u),M=Bn(b,T);M.tag=2,f!=null&&(M.callback=f),f=$s(u,M,T),f!==null&&(zn(f,u,T,b),Ls(f,u,T))}};function Wo(u,f,b,T,M,D,H){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(T,D,H):f.prototype&&f.prototype.isPureReactComponent?!ze(b,T)||!ze(M,D):!0}function du(u,f,b){var T=!1,M=Ns,D=f.contextType;return typeof D=="object"&&D!==null?D=en(D):(M=ln(f)?Qr:Lr.current,T=f.contextTypes,D=(T=T!=null)?Zi(u,M):Ns),f=new f(b,D),u.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=qo,u.stateNode=f,f._reactInternals=u,T&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=M,u.__reactInternalMemoizedMaskedChildContext=D),f}function Gc(u,f,b,T){u=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(b,T),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(b,T),f.state!==u&&qo.enqueueReplaceState(f,f.state,null)}function fu(u,f,b,T){var M=u.stateNode;M.props=b,M.state=u.memoizedState,M.refs=Xi,lu(u);var D=f.contextType;typeof D=="object"&&D!==null?M.context=en(D):(D=ln(f)?Qr:Lr.current,M.context=Zi(u,D)),M.state=u.memoizedState,D=f.getDerivedStateFromProps,typeof D=="function"&&(cu(u,f,D,b),M.state=u.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof M.getSnapshotBeforeUpdate=="function"||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(f=M.state,typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount(),f!==M.state&&qo.enqueueReplaceState(M,M.state,null),Ho(u,b,M,T),M.state=u.memoizedState),typeof M.componentDidMount=="function"&&(u.flags|=4194308)}function La(u,f,b){if(u=b.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(b._owner){if(b=b._owner,b){if(b.tag!==1)throw Error(r(309));var T=b.stateNode}if(!T)throw Error(r(147,u));var M=T,D=""+u;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===D?f.ref:(f=function(H){var J=M.refs;J===Xi&&(J=M.refs={}),H===null?delete J[D]:J[D]=H},f._stringRef=D,f)}if(typeof u!="string")throw Error(r(284));if(!b._owner)throw Error(r(290,u))}return u}function Ba(u,f){throw u=Object.prototype.toString.call(f),Error(r(31,u==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":u))}function Zo(u){var f=u._init;return f(u._payload)}function Uc(u){function f(ge,ue){if(u){var ye=ge.deletions;ye===null?(ge.deletions=[ue],ge.flags|=16):ye.push(ue)}}function b(ge,ue){if(!u)return null;for(;ue!==null;)f(ge,ue),ue=ue.sibling;return null}function T(ge,ue){for(ge=new Map;ue!==null;)ue.key!==null?ge.set(ue.key,ue):ge.set(ue.index,ue),ue=ue.sibling;return ge}function M(ge,ue){return ge=Ys(ge,ue),ge.index=0,ge.sibling=null,ge}function D(ge,ue,ye){return ge.index=ye,u?(ye=ge.alternate,ye!==null?(ye=ye.index,ye<ue?(ge.flags|=2,ue):ye):(ge.flags|=2,ue)):(ge.flags|=1048576,ue)}function H(ge){return u&&ge.alternate===null&&(ge.flags|=2),ge}function J(ge,ue,ye,$e){return ue===null||ue.tag!==6?(ue=Ku(ye,ge.mode,$e),ue.return=ge,ue):(ue=M(ue,ye),ue.return=ge,ue)}function ae(ge,ue,ye,$e){var Ye=ye.type;return Ye===L?Me(ge,ue,ye.props.children,$e,ye.key):ue!==null&&(ue.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===G&&Zo(Ye)===ue.type)?($e=M(ue,ye.props),$e.ref=La(ge,ue,ye),$e.return=ge,$e):($e=El(ye.type,ye.key,ye.props,null,ge.mode,$e),$e.ref=La(ge,ue,ye),$e.return=ge,$e)}function _e(ge,ue,ye,$e){return ue===null||ue.tag!==4||ue.stateNode.containerInfo!==ye.containerInfo||ue.stateNode.implementation!==ye.implementation?(ue=Xu(ye,ge.mode,$e),ue.return=ge,ue):(ue=M(ue,ye.children||[]),ue.return=ge,ue)}function Me(ge,ue,ye,$e,Ye){return ue===null||ue.tag!==7?(ue=Ei(ye,ge.mode,$e,Ye),ue.return=ge,ue):(ue=M(ue,ye),ue.return=ge,ue)}function De(ge,ue,ye){if(typeof ue=="string"&&ue!==""||typeof ue=="number")return ue=Ku(""+ue,ge.mode,ye),ue.return=ge,ue;if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case I:return ye=El(ue.type,ue.key,ue.props,null,ge.mode,ye),ye.ref=La(ge,null,ue),ye.return=ge,ye;case O:return ue=Xu(ue,ge.mode,ye),ue.return=ge,ue;case G:var $e=ue._init;return De(ge,$e(ue._payload),ye)}if(ct(ue)||$(ue))return ue=Ei(ue,ge.mode,ye,null),ue.return=ge,ue;Ba(ge,ue)}return null}function Ie(ge,ue,ye,$e){var Ye=ue!==null?ue.key:null;if(typeof ye=="string"&&ye!==""||typeof ye=="number")return Ye!==null?null:J(ge,ue,""+ye,$e);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case I:return ye.key===Ye?ae(ge,ue,ye,$e):null;case O:return ye.key===Ye?_e(ge,ue,ye,$e):null;case G:return Ye=ye._init,Ie(ge,ue,Ye(ye._payload),$e)}if(ct(ye)||$(ye))return Ye!==null?null:Me(ge,ue,ye,$e,null);Ba(ge,ye)}return null}function He(ge,ue,ye,$e,Ye){if(typeof $e=="string"&&$e!==""||typeof $e=="number")return ge=ge.get(ye)||null,J(ue,ge,""+$e,Ye);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case I:return ge=ge.get($e.key===null?ye:$e.key)||null,ae(ue,ge,$e,Ye);case O:return ge=ge.get($e.key===null?ye:$e.key)||null,_e(ue,ge,$e,Ye);case G:var nt=$e._init;return He(ge,ue,ye,nt($e._payload),Ye)}if(ct($e)||$($e))return ge=ge.get(ye)||null,Me(ue,ge,$e,Ye,null);Ba(ue,$e)}return null}function Ke(ge,ue,ye,$e){for(var Ye=null,nt=null,st=ue,ut=ue=0,Ar=null;st!==null&&ut<ye.length;ut++){st.index>ut?(Ar=st,st=null):Ar=st.sibling;var It=Ie(ge,st,ye[ut],$e);if(It===null){st===null&&(st=Ar);break}u&&st&&It.alternate===null&&f(ge,st),ue=D(It,ue,ut),nt===null?Ye=It:nt.sibling=It,nt=It,st=Ar}if(ut===ye.length)return b(ge,st),rr&&hi(ge,ut),Ye;if(st===null){for(;ut<ye.length;ut++)st=De(ge,ye[ut],$e),st!==null&&(ue=D(st,ue,ut),nt===null?Ye=st:nt.sibling=st,nt=st);return rr&&hi(ge,ut),Ye}for(st=T(ge,st);ut<ye.length;ut++)Ar=He(st,ge,ut,ye[ut],$e),Ar!==null&&(u&&Ar.alternate!==null&&st.delete(Ar.key===null?ut:Ar.key),ue=D(Ar,ue,ut),nt===null?Ye=Ar:nt.sibling=Ar,nt=Ar);return u&&st.forEach(function(Js){return f(ge,Js)}),rr&&hi(ge,ut),Ye}function Xe(ge,ue,ye,$e){var Ye=$(ye);if(typeof Ye!="function")throw Error(r(150));if(ye=Ye.call(ye),ye==null)throw Error(r(151));for(var nt=Ye=null,st=ue,ut=ue=0,Ar=null,It=ye.next();st!==null&&!It.done;ut++,It=ye.next()){st.index>ut?(Ar=st,st=null):Ar=st.sibling;var Js=Ie(ge,st,It.value,$e);if(Js===null){st===null&&(st=Ar);break}u&&st&&Js.alternate===null&&f(ge,st),ue=D(Js,ue,ut),nt===null?Ye=Js:nt.sibling=Js,nt=Js,st=Ar}if(It.done)return b(ge,st),rr&&hi(ge,ut),Ye;if(st===null){for(;!It.done;ut++,It=ye.next())It=De(ge,It.value,$e),It!==null&&(ue=D(It,ue,ut),nt===null?Ye=It:nt.sibling=It,nt=It);return rr&&hi(ge,ut),Ye}for(st=T(ge,st);!It.done;ut++,It=ye.next())It=He(st,ge,ut,It.value,$e),It!==null&&(u&&It.alternate!==null&&st.delete(It.key===null?ut:It.key),ue=D(It,ue,ut),nt===null?Ye=It:nt.sibling=It,nt=It);return u&&st.forEach(function(hf){return f(ge,hf)}),rr&&hi(ge,ut),Ye}function dr(ge,ue,ye,$e){if(typeof ye=="object"&&ye!==null&&ye.type===L&&ye.key===null&&(ye=ye.props.children),typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case I:e:{for(var Ye=ye.key,nt=ue;nt!==null;){if(nt.key===Ye){if(Ye=ye.type,Ye===L){if(nt.tag===7){b(ge,nt.sibling),ue=M(nt,ye.props.children),ue.return=ge,ge=ue;break e}}else if(nt.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===G&&Zo(Ye)===nt.type){b(ge,nt.sibling),ue=M(nt,ye.props),ue.ref=La(ge,nt,ye),ue.return=ge,ge=ue;break e}b(ge,nt);break}else f(ge,nt);nt=nt.sibling}ye.type===L?(ue=Ei(ye.props.children,ge.mode,$e,ye.key),ue.return=ge,ge=ue):($e=El(ye.type,ye.key,ye.props,null,ge.mode,$e),$e.ref=La(ge,ue,ye),$e.return=ge,ge=$e)}return H(ge);case O:e:{for(nt=ye.key;ue!==null;){if(ue.key===nt)if(ue.tag===4&&ue.stateNode.containerInfo===ye.containerInfo&&ue.stateNode.implementation===ye.implementation){b(ge,ue.sibling),ue=M(ue,ye.children||[]),ue.return=ge,ge=ue;break e}else{b(ge,ue);break}else f(ge,ue);ue=ue.sibling}ue=Xu(ye,ge.mode,$e),ue.return=ge,ge=ue}return H(ge);case G:return nt=ye._init,dr(ge,ue,nt(ye._payload),$e)}if(ct(ye))return Ke(ge,ue,ye,$e);if($(ye))return Xe(ge,ue,ye,$e);Ba(ge,ye)}return typeof ye=="string"&&ye!==""||typeof ye=="number"?(ye=""+ye,ue!==null&&ue.tag===6?(b(ge,ue.sibling),ue=M(ue,ye),ue.return=ge,ge=ue):(b(ge,ue),ue=Ku(ye,ge.mode,$e),ue.return=ge,ge=ue),H(ge)):b(ge,ue)}return dr}var Bs=Uc(!0),hu=Uc(!1),Yi={},Vn=an(Yi),Vs=an(Yi),Va=an(Yi);function Gs(u){if(u===Yi)throw Error(r(174));return u}function Ko(u,f){switch(Jt(Va,f),Jt(Vs,u),Jt(Vn,Yi),u=f.nodeType,u){case 9:case 11:f=(f=f.documentElement)?f.namespaceURI:Ft(null,"");break;default:u=u===8?f.parentNode:f,f=u.namespaceURI||null,u=u.tagName,f=Ft(f,u)}tr(Vn),Jt(Vn,f)}function Ji(){tr(Vn),tr(Vs),tr(Va)}function pu(u){Gs(Va.current);var f=Gs(Vn.current),b=Ft(f,u.type);f!==b&&(Jt(Vs,u),Jt(Vn,b))}function mu(u){Vs.current===u&&(tr(Vn),tr(Vs))}var nr=an(0);function Ga(u){for(var f=u;f!==null;){if(f.tag===13){var b=f.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||b.data==="$?"||b.data==="$!"))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var Ua=[];function gu(){for(var u=0;u<Ua.length;u++)Ua[u]._workInProgressVersionPrimary=null;Ua.length=0}var Qi=j.ReactCurrentDispatcher,mt=j.ReactCurrentBatchConfig,yi=0,ar=null,or=null,br=null,Xo=!1,za=!1,Ur=0,Wd=0;function wr(){throw Error(r(321))}function Ha(u,f){if(f===null)return!1;for(var b=0;b<f.length&&b<u.length;b++)if(!ve(u[b],f[b]))return!1;return!0}function Yo(u,f,b,T,M,D){if(yi=D,ar=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,Qi.current=u===null||u.memoizedState===null?Wa:Kd,u=b(T,M),za){D=0;do{if(za=!1,Ur=0,25<=D)throw Error(r(301));D+=1,br=or=null,f.updateQueue=null,Qi.current=Xc,u=b(T,M)}while(za)}if(Qi.current=gs,f=or!==null&&or.next!==null,yi=0,br=or=ar=null,Xo=!1,f)throw Error(r(300));return u}function Jo(){var u=Ur!==0;return Ur=0,u}function lr(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return br===null?ar.memoizedState=br=u:br=br.next=u,br}function Er(){if(or===null){var u=ar.alternate;u=u!==null?u.memoizedState:null}else u=or.next;var f=br===null?ar.memoizedState:br.next;if(f!==null)br=f,or=u;else{if(u===null)throw Error(r(310));or=u,u={memoizedState:or.memoizedState,baseState:or.baseState,baseQueue:or.baseQueue,queue:or.queue,next:null},br===null?ar.memoizedState=br=u:br=br.next=u}return br}function xi(u,f){return typeof f=="function"?f(u):f}function Qo(u){var f=Er(),b=f.queue;if(b===null)throw Error(r(311));b.lastRenderedReducer=u;var T=or,M=T.baseQueue,D=b.pending;if(D!==null){if(M!==null){var H=M.next;M.next=D.next,D.next=H}T.baseQueue=M=D,b.pending=null}if(M!==null){D=M.next,T=T.baseState;var J=H=null,ae=null,_e=D;do{var Me=_e.lane;if((yi&Me)===Me)ae!==null&&(ae=ae.next={lane:0,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null}),T=_e.hasEagerState?_e.eagerState:u(T,_e.action);else{var De={lane:Me,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null};ae===null?(J=ae=De,H=T):ae=ae.next=De,ar.lanes|=Me,qs|=Me}_e=_e.next}while(_e!==null&&_e!==D);ae===null?H=T:ae.next=J,ve(T,f.memoizedState)||(zr=!0),f.memoizedState=T,f.baseState=H,f.baseQueue=ae,b.lastRenderedState=T}if(u=b.interleaved,u!==null){M=u;do D=M.lane,ar.lanes|=D,qs|=D,M=M.next;while(M!==u)}else M===null&&(b.lanes=0);return[f.memoizedState,b.dispatch]}function ea(u){var f=Er(),b=f.queue;if(b===null)throw Error(r(311));b.lastRenderedReducer=u;var T=b.dispatch,M=b.pending,D=f.memoizedState;if(M!==null){b.pending=null;var H=M=M.next;do D=u(D,H.action),H=H.next;while(H!==M);ve(D,f.memoizedState)||(zr=!0),f.memoizedState=D,f.baseQueue===null&&(f.baseState=D),b.lastRenderedState=D}return[D,T]}function yu(){}function el(u,f){var b=ar,T=Er(),M=f(),D=!ve(T.memoizedState,M);if(D&&(T.memoizedState=M,zr=!0),T=T.queue,_u(rl.bind(null,b,T,u),[u]),T.getSnapshot!==f||D||br!==null&&br.memoizedState.tag&1){if(b.flags|=2048,ta(9,tl.bind(null,b,T,M,f),void 0,null),Tr===null)throw Error(r(349));(yi&30)!==0||xu(b,f,M)}return M}function xu(u,f,b){u.flags|=16384,u={getSnapshot:f,value:b},f=ar.updateQueue,f===null?(f={lastEffect:null,stores:null},ar.updateQueue=f,f.stores=[u]):(b=f.stores,b===null?f.stores=[u]:b.push(u))}function tl(u,f,b,T){f.value=b,f.getSnapshot=T,ps(f)&&zc(u)}function rl(u,f,b){return b(function(){ps(f)&&zc(u)})}function ps(u){var f=u.getSnapshot;u=u.value;try{var b=f();return!ve(u,b)}catch{return!0}}function zc(u){var f=Ln(u,1);f!==null&&zn(f,u,1,-1)}function ms(u){var f=lr();return typeof u=="function"&&(u=u()),f.memoizedState=f.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:u},f.queue=u,u=u.dispatch=Zc.bind(null,ar,u),[f.memoizedState,u]}function ta(u,f,b,T){return u={tag:u,create:f,destroy:b,deps:T,next:null},f=ar.updateQueue,f===null?(f={lastEffect:null,stores:null},ar.updateQueue=f,f.lastEffect=u.next=u):(b=f.lastEffect,b===null?f.lastEffect=u.next=u:(T=b.next,b.next=u,u.next=T,f.lastEffect=u)),u}function vu(){return Er().memoizedState}function ra(u,f,b,T){var M=lr();ar.flags|=u,M.memoizedState=ta(1|f,b,void 0,T===void 0?null:T)}function nl(u,f,b,T){var M=Er();T=T===void 0?null:T;var D=void 0;if(or!==null){var H=or.memoizedState;if(D=H.destroy,T!==null&&Ha(T,H.deps)){M.memoizedState=ta(f,b,D,T);return}}ar.flags|=u,M.memoizedState=ta(1|f,b,D,T)}function Hc(u,f){return ra(8390656,8,u,f)}function _u(u,f){return nl(2048,8,u,f)}function bu(u,f){return nl(4,2,u,f)}function wu(u,f){return nl(4,4,u,f)}function qc(u,f){if(typeof f=="function")return u=u(),f(u),function(){f(null)};if(f!=null)return u=u(),f.current=u,function(){f.current=null}}function Eu(u,f,b){return b=b!=null?b.concat([u]):null,nl(4,4,qc.bind(null,f,u),b)}function sl(){}function tn(u,f){var b=Er();f=f===void 0?null:f;var T=b.memoizedState;return T!==null&&f!==null&&Ha(f,T[1])?T[0]:(b.memoizedState=[u,f],u)}function Gn(u,f){var b=Er();f=f===void 0?null:f;var T=b.memoizedState;return T!==null&&f!==null&&Ha(f,T[1])?T[0]:(u=u(),b.memoizedState=[u,f],u)}function Wc(u,f,b){return(yi&21)===0?(u.baseState&&(u.baseState=!1,zr=!0),u.memoizedState=b):(ve(b,f)||(b=Dl(),ar.lanes|=b,qs|=b,u.baseState=!0),f)}function Zd(u,f){var b=Ot;Ot=b!==0&&4>b?b:4,u(!0);var T=mt.transition;mt.transition={};try{u(!1),f()}finally{Ot=b,mt.transition=T}}function qa(){return Er().memoizedState}function na(u,f,b){var T=Zs(u);if(b={lane:T,action:b,hasEagerState:!1,eagerState:null,next:null},Su(u))Kc(f,b);else if(b=Gr(u,f,b,T),b!==null){var M=nn();zn(b,u,T,M),Cu(b,f,T)}}function Zc(u,f,b){var T=Zs(u),M={lane:T,action:b,hasEagerState:!1,eagerState:null,next:null};if(Su(u))Kc(f,M);else{var D=u.alternate;if(u.lanes===0&&(D===null||D.lanes===0)&&(D=f.lastRenderedReducer,D!==null))try{var H=f.lastRenderedState,J=D(H,b);if(M.hasEagerState=!0,M.eagerState=J,ve(J,H)){var ae=f.interleaved;ae===null?(M.next=M,zo(f)):(M.next=ae.next,ae.next=M),f.interleaved=M;return}}catch{}finally{}b=Gr(u,f,M,T),b!==null&&(M=nn(),zn(b,u,T,M),Cu(b,f,T))}}function Su(u){var f=u.alternate;return u===ar||f!==null&&f===ar}function Kc(u,f){za=Xo=!0;var b=u.pending;b===null?f.next=f:(f.next=b.next,b.next=f),u.pending=f}function Cu(u,f,b){if((b&4194240)!==0){var T=f.lanes;T&=u.pendingLanes,b|=T,f.lanes=b,ba(u,b)}}var gs={readContext:en,useCallback:wr,useContext:wr,useEffect:wr,useImperativeHandle:wr,useInsertionEffect:wr,useLayoutEffect:wr,useMemo:wr,useReducer:wr,useRef:wr,useState:wr,useDebugValue:wr,useDeferredValue:wr,useTransition:wr,useMutableSource:wr,useSyncExternalStore:wr,useId:wr,unstable_isNewReconciler:!1},Wa={readContext:en,useCallback:function(u,f){return lr().memoizedState=[u,f===void 0?null:f],u},useContext:en,useEffect:Hc,useImperativeHandle:function(u,f,b){return b=b!=null?b.concat([u]):null,ra(4194308,4,qc.bind(null,f,u),b)},useLayoutEffect:function(u,f){return ra(4194308,4,u,f)},useInsertionEffect:function(u,f){return ra(4,2,u,f)},useMemo:function(u,f){var b=lr();return f=f===void 0?null:f,u=u(),b.memoizedState=[u,f],u},useReducer:function(u,f,b){var T=lr();return f=b!==void 0?b(f):f,T.memoizedState=T.baseState=f,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:f},T.queue=u,u=u.dispatch=na.bind(null,ar,u),[T.memoizedState,u]},useRef:function(u){var f=lr();return u={current:u},f.memoizedState=u},useState:ms,useDebugValue:sl,useDeferredValue:function(u){return lr().memoizedState=u},useTransition:function(){var u=ms(!1),f=u[0];return u=Zd.bind(null,u[1]),lr().memoizedState=u,[f,u]},useMutableSource:function(){},useSyncExternalStore:function(u,f,b){var T=ar,M=lr();if(rr){if(b===void 0)throw Error(r(407));b=b()}else{if(b=f(),Tr===null)throw Error(r(349));(yi&30)!==0||xu(T,f,b)}M.memoizedState=b;var D={value:b,getSnapshot:f};return M.queue=D,Hc(rl.bind(null,T,D,u),[u]),T.flags|=2048,ta(9,tl.bind(null,T,D,b,f),void 0,null),b},useId:function(){var u=lr(),f=Tr.identifierPrefix;if(rr){var b=es,T=Qn;b=(T&~(1<<32-On(T)-1)).toString(32)+b,f=":"+f+"R"+b,b=Ur++,0<b&&(f+="H"+b.toString(32)),f+=":"}else b=Wd++,f=":"+f+"r"+b.toString(32)+":";return u.memoizedState=f},unstable_isNewReconciler:!1},Kd={readContext:en,useCallback:tn,useContext:en,useEffect:_u,useImperativeHandle:Eu,useInsertionEffect:bu,useLayoutEffect:wu,useMemo:Gn,useReducer:Qo,useRef:vu,useState:function(){return Qo(xi)},useDebugValue:sl,useDeferredValue:function(u){var f=Er();return Wc(f,or.memoizedState,u)},useTransition:function(){var u=Qo(xi)[0],f=Er().memoizedState;return[u,f]},useMutableSource:yu,useSyncExternalStore:el,useId:qa,unstable_isNewReconciler:!1},Xc={readContext:en,useCallback:tn,useContext:en,useEffect:_u,useImperativeHandle:Eu,useInsertionEffect:bu,useLayoutEffect:wu,useMemo:Gn,useReducer:ea,useRef:vu,useState:function(){return ea(xi)},useDebugValue:sl,useDeferredValue:function(u){var f=Er();return or===null?f.memoizedState=u:Wc(f,or.memoizedState,u)},useTransition:function(){var u=ea(xi)[0],f=Er().memoizedState;return[u,f]},useMutableSource:yu,useSyncExternalStore:el,useId:qa,unstable_isNewReconciler:!1};function vi(u,f){try{var b="",T=f;do b+=Ce(T),T=T.return;while(T);var M=b}catch(D){M=`
Error generating stack: `+D.message+`
`+D.stack}return{value:u,source:f,stack:M,digest:null}}function sa(u,f,b){return{value:u,source:null,stack:b??null,digest:f??null}}function il(u,f){try{console.error(f.value)}catch(b){setTimeout(function(){throw b})}}var al=typeof WeakMap=="function"?WeakMap:Map;function ol(u,f,b){b=Bn(-1,b),b.tag=3,b.payload={element:null};var T=f.value;return b.callback=function(){yl||(yl=!0,Bu=T),il(u,f)},b}function Za(u,f,b){b=Bn(-1,b),b.tag=3;var T=u.type.getDerivedStateFromError;if(typeof T=="function"){var M=f.value;b.payload=function(){return T(M)},b.callback=function(){il(u,f)}}var D=u.stateNode;return D!==null&&typeof D.componentDidCatch=="function"&&(b.callback=function(){il(u,f),typeof T!="function"&&(Ws===null?Ws=new Set([this]):Ws.add(this));var H=f.stack;this.componentDidCatch(f.value,{componentStack:H!==null?H:""})}),b}function Yc(u,f,b){var T=u.pingCache;if(T===null){T=u.pingCache=new al;var M=new Set;T.set(f,M)}else M=T.get(f),M===void 0&&(M=new Set,T.set(f,M));M.has(b)||(M.add(b),u=nf.bind(null,u,f,b),f.then(u,u))}function Ru(u){do{var f;if((f=u.tag===13)&&(f=u.memoizedState,f=f!==null?f.dehydrated!==null:!0),f)return u;u=u.return}while(u!==null);return null}function Ka(u,f,b,T,M){return(u.mode&1)===0?(u===f?u.flags|=65536:(u.flags|=128,b.flags|=131072,b.flags&=-52805,b.tag===1&&(b.alternate===null?b.tag=17:(f=Bn(-1,1),f.tag=2,$s(b,f,1))),b.lanes|=1),u):(u.flags|=65536,u.lanes=M,u)}var Jc=j.ReactCurrentOwner,zr=!1;function rn(u,f,b,T){f.child=u===null?hu(f,null,b,T):Bs(f,u.child,b,T)}function Pu(u,f,b,T,M){b=b.render;var D=f.ref;return Ds(f,M),T=Yo(u,f,b,T,D,M),b=Jo(),u!==null&&!zr?(f.updateQueue=u.updateQueue,f.flags&=-2053,u.lanes&=~M,as(u,f,M)):(rr&&b&&Da(f),f.flags|=1,rn(u,f,T,M),f.child)}function ss(u,f,b,T,M){if(u===null){var D=b.type;return typeof D=="function"&&!Zu(D)&&D.defaultProps===void 0&&b.compare===null&&b.defaultProps===void 0?(f.tag=15,f.type=D,ku(u,f,D,T,M)):(u=El(b.type,null,T,f,f.mode,M),u.ref=f.ref,u.return=f,f.child=u)}if(D=u.child,(u.lanes&M)===0){var H=D.memoizedProps;if(b=b.compare,b=b!==null?b:ze,b(H,T)&&u.ref===f.ref)return as(u,f,M)}return f.flags|=1,u=Ys(D,T),u.ref=f.ref,u.return=f,f.child=u}function ku(u,f,b,T,M){if(u!==null){var D=u.memoizedProps;if(ze(D,T)&&u.ref===f.ref)if(zr=!1,f.pendingProps=T=D,(u.lanes&M)!==0)(u.flags&131072)!==0&&(zr=!0);else return f.lanes=u.lanes,as(u,f,M)}return ll(u,f,b,T,M)}function Tu(u,f,b){var T=f.pendingProps,M=T.children,D=u!==null?u.memoizedState:null;if(T.mode==="hidden")if((f.mode&1)===0)f.memoizedState={baseLanes:0,cachePool:null,transitions:null},Jt(ua,vn),vn|=b;else{if((b&1073741824)===0)return u=D!==null?D.baseLanes|b:b,f.lanes=f.childLanes=1073741824,f.memoizedState={baseLanes:u,cachePool:null,transitions:null},f.updateQueue=null,Jt(ua,vn),vn|=u,null;f.memoizedState={baseLanes:0,cachePool:null,transitions:null},T=D!==null?D.baseLanes:b,Jt(ua,vn),vn|=T}else D!==null?(T=D.baseLanes|b,f.memoizedState=null):T=b,Jt(ua,vn),vn|=T;return rn(u,f,M,b),f.child}function Qc(u,f){var b=f.ref;(u===null&&b!==null||u!==null&&u.ref!==b)&&(f.flags|=512,f.flags|=2097152)}function ll(u,f,b,T,M){var D=ln(b)?Qr:Lr.current;return D=Zi(f,D),Ds(f,M),b=Yo(u,f,b,T,D,M),T=Jo(),u!==null&&!zr?(f.updateQueue=u.updateQueue,f.flags&=-2053,u.lanes&=~M,as(u,f,M)):(rr&&T&&Da(f),f.flags|=1,rn(u,f,b,M),f.child)}function ed(u,f,b,T,M){if(ln(b)){var D=!0;Sn(f)}else D=!1;if(Ds(f,M),f.stateNode===null)ia(u,f),du(f,b,T),fu(f,b,T,M),T=!0;else if(u===null){var H=f.stateNode,J=f.memoizedProps;H.props=J;var ae=H.context,_e=b.contextType;typeof _e=="object"&&_e!==null?_e=en(_e):(_e=ln(b)?Qr:Lr.current,_e=Zi(f,_e));var Me=b.getDerivedStateFromProps,De=typeof Me=="function"||typeof H.getSnapshotBeforeUpdate=="function";De||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(J!==T||ae!==_e)&&Gc(f,H,T,_e),Fs=!1;var Ie=f.memoizedState;H.state=Ie,Ho(f,T,H,M),ae=f.memoizedState,J!==T||Ie!==ae||on.current||Fs?(typeof Me=="function"&&(cu(f,b,Me,T),ae=f.memoizedState),(J=Fs||Wo(f,b,J,T,Ie,ae,_e))?(De||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount()),typeof H.componentDidMount=="function"&&(f.flags|=4194308)):(typeof H.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=T,f.memoizedState=ae),H.props=T,H.state=ae,H.context=_e,T=J):(typeof H.componentDidMount=="function"&&(f.flags|=4194308),T=!1)}else{H=f.stateNode,Bc(u,f),J=f.memoizedProps,_e=f.type===f.elementType?J:$n(f.type,J),H.props=_e,De=f.pendingProps,Ie=H.context,ae=b.contextType,typeof ae=="object"&&ae!==null?ae=en(ae):(ae=ln(b)?Qr:Lr.current,ae=Zi(f,ae));var He=b.getDerivedStateFromProps;(Me=typeof He=="function"||typeof H.getSnapshotBeforeUpdate=="function")||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(J!==De||Ie!==ae)&&Gc(f,H,T,ae),Fs=!1,Ie=f.memoizedState,H.state=Ie,Ho(f,T,H,M);var Ke=f.memoizedState;J!==De||Ie!==Ke||on.current||Fs?(typeof He=="function"&&(cu(f,b,He,T),Ke=f.memoizedState),(_e=Fs||Wo(f,b,_e,T,Ie,Ke,ae)||!1)?(Me||typeof H.UNSAFE_componentWillUpdate!="function"&&typeof H.componentWillUpdate!="function"||(typeof H.componentWillUpdate=="function"&&H.componentWillUpdate(T,Ke,ae),typeof H.UNSAFE_componentWillUpdate=="function"&&H.UNSAFE_componentWillUpdate(T,Ke,ae)),typeof H.componentDidUpdate=="function"&&(f.flags|=4),typeof H.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof H.componentDidUpdate!="function"||J===u.memoizedProps&&Ie===u.memoizedState||(f.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||J===u.memoizedProps&&Ie===u.memoizedState||(f.flags|=1024),f.memoizedProps=T,f.memoizedState=Ke),H.props=T,H.state=Ke,H.context=ae,T=_e):(typeof H.componentDidUpdate!="function"||J===u.memoizedProps&&Ie===u.memoizedState||(f.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||J===u.memoizedProps&&Ie===u.memoizedState||(f.flags|=1024),T=!1)}return Au(u,f,b,T,D,M)}function Au(u,f,b,T,M,D){Qc(u,f);var H=(f.flags&128)!==0;if(!T&&!H)return M&&Oc(f,b,!1),as(u,f,D);T=f.stateNode,Jc.current=f;var J=H&&typeof b.getDerivedStateFromError!="function"?null:T.render();return f.flags|=1,u!==null&&H?(f.child=Bs(f,u.child,null,D),f.child=Bs(f,null,J,D)):rn(u,f,J,D),f.memoizedState=T.state,M&&Oc(f,b,!0),f.child}function is(u){var f=u.stateNode;f.pendingContext?Mc(u,f.pendingContext,f.pendingContext!==f.context):f.context&&Mc(u,f.context,!1),Ko(u,f.containerInfo)}function ul(u,f,b,T,M){return rs(),ns(M),f.flags|=256,rn(u,f,b,T),f.child}var Xa={dehydrated:null,treeContext:null,retryLane:0};function Ya(u){return{baseLanes:u,cachePool:null,transitions:null}}function Ja(u,f,b){var T=f.pendingProps,M=nr.current,D=!1,H=(f.flags&128)!==0,J;if((J=H)||(J=u!==null&&u.memoizedState===null?!1:(M&2)!==0),J?(D=!0,f.flags&=-129):(u===null||u.memoizedState!==null)&&(M|=1),Jt(nr,M&1),u===null)return un(f),u=f.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?((f.mode&1)===0?f.lanes=1:u.data==="$!"?f.lanes=8:f.lanes=1073741824,null):(H=T.children,u=T.fallback,D?(T=f.mode,D=f.child,H={mode:"hidden",children:H},(T&1)===0&&D!==null?(D.childLanes=0,D.pendingProps=H):D=Sl(H,T,0,null),u=Ei(u,T,b,null),D.return=f,u.return=f,D.sibling=u,f.child=D,f.child.memoizedState=Ya(b),f.memoizedState=Xa,u):Us(f,H));if(M=u.memoizedState,M!==null&&(J=M.dehydrated,J!==null))return cl(u,f,H,T,J,M,b);if(D){D=T.fallback,H=f.mode,M=u.child,J=M.sibling;var ae={mode:"hidden",children:T.children};return(H&1)===0&&f.child!==M?(T=f.child,T.childLanes=0,T.pendingProps=ae,f.deletions=null):(T=Ys(M,ae),T.subtreeFlags=M.subtreeFlags&14680064),J!==null?D=Ys(J,D):(D=Ei(D,H,b,null),D.flags|=2),D.return=f,T.return=f,T.sibling=D,f.child=T,T=D,D=f.child,H=u.child.memoizedState,H=H===null?Ya(b):{baseLanes:H.baseLanes|b,cachePool:null,transitions:H.transitions},D.memoizedState=H,D.childLanes=u.childLanes&~b,f.memoizedState=Xa,T}return D=u.child,u=D.sibling,T=Ys(D,{mode:"visible",children:T.children}),(f.mode&1)===0&&(T.lanes=b),T.return=f,T.sibling=null,u!==null&&(b=f.deletions,b===null?(f.deletions=[u],f.flags|=16):b.push(u)),f.child=T,f.memoizedState=null,T}function Us(u,f){return f=Sl({mode:"visible",children:f},u.mode,0,null),f.return=u,u.child=f}function rt(u,f,b,T){return T!==null&&ns(T),Bs(f,u.child,null,b),u=Us(f,f.pendingProps.children),u.flags|=2,f.memoizedState=null,u}function cl(u,f,b,T,M,D,H){if(b)return f.flags&256?(f.flags&=-257,T=sa(Error(r(422))),rt(u,f,H,T)):f.memoizedState!==null?(f.child=u.child,f.flags|=128,null):(D=T.fallback,M=f.mode,T=Sl({mode:"visible",children:T.children},M,0,null),D=Ei(D,M,H,null),D.flags|=2,T.return=f,D.return=f,T.sibling=D,f.child=T,(f.mode&1)!==0&&Bs(f,u.child,null,H),f.child.memoizedState=Ya(H),f.memoizedState=Xa,D);if((f.mode&1)===0)return rt(u,f,H,null);if(M.data==="$!"){if(T=M.nextSibling&&M.nextSibling.dataset,T)var J=T.dgst;return T=J,D=Error(r(419)),T=sa(D,T,void 0),rt(u,f,H,T)}if(J=(H&u.childLanes)!==0,zr||J){if(T=Tr,T!==null){switch(H&-H){case 4:M=2;break;case 16:M=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:M=32;break;case 536870912:M=268435456;break;default:M=0}M=(M&(T.suspendedLanes|H))!==0?0:M,M!==0&&M!==D.retryLane&&(D.retryLane=M,Ln(u,M),zn(T,u,M,-1))}return qu(),T=sa(Error(r(421))),rt(u,f,H,T)}return M.data==="$?"?(f.flags|=128,f.child=u.child,f=sf.bind(null,u),M._reactRetry=f,null):(u=D.treeContext,mn=Is(M.nextSibling),Vr=f,rr=!0,Fn=null,u!==null&&(Cn[Rn++]=Qn,Cn[Rn++]=es,Cn[Rn++]=fi,Qn=u.id,es=u.overflow,fi=f),f=Us(f,T.children),f.flags|=4096,f)}function dl(u,f,b){u.lanes|=f;var T=u.alternate;T!==null&&(T.lanes|=f),Pn(u.return,f,b)}function ys(u,f,b,T,M){var D=u.memoizedState;D===null?u.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:T,tail:b,tailMode:M}:(D.isBackwards=f,D.rendering=null,D.renderingStartTime=0,D.last=T,D.tail=b,D.tailMode=M)}function td(u,f,b){var T=f.pendingProps,M=T.revealOrder,D=T.tail;if(rn(u,f,T.children,b),T=nr.current,(T&2)!==0)T=T&1|2,f.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=f.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&dl(u,b,f);else if(u.tag===19)dl(u,b,f);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===f)break e;for(;u.sibling===null;){if(u.return===null||u.return===f)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}T&=1}if(Jt(nr,T),(f.mode&1)===0)f.memoizedState=null;else switch(M){case"forwards":for(b=f.child,M=null;b!==null;)u=b.alternate,u!==null&&Ga(u)===null&&(M=b),b=b.sibling;b=M,b===null?(M=f.child,f.child=null):(M=b.sibling,b.sibling=null),ys(f,!1,M,b,D);break;case"backwards":for(b=null,M=f.child,f.child=null;M!==null;){if(u=M.alternate,u!==null&&Ga(u)===null){f.child=M;break}u=M.sibling,M.sibling=b,b=M,M=u}ys(f,!0,b,null,D);break;case"together":ys(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function ia(u,f){(f.mode&1)===0&&u!==null&&(u.alternate=null,f.alternate=null,f.flags|=2)}function as(u,f,b){if(u!==null&&(f.dependencies=u.dependencies),qs|=f.lanes,(b&f.childLanes)===0)return null;if(u!==null&&f.child!==u.child)throw Error(r(153));if(f.child!==null){for(u=f.child,b=Ys(u,u.pendingProps),f.child=b,b.return=f;u.sibling!==null;)u=u.sibling,b=b.sibling=Ys(u,u.pendingProps),b.return=f;b.sibling=null}return f.child}function Hr(u,f,b){switch(f.tag){case 3:is(f),rs();break;case 5:pu(f);break;case 1:ln(f.type)&&Sn(f);break;case 4:Ko(f,f.stateNode.containerInfo);break;case 10:var T=f.type._context,M=f.memoizedProps.value;Jt(mi,T._currentValue),T._currentValue=M;break;case 13:if(T=f.memoizedState,T!==null)return T.dehydrated!==null?(Jt(nr,nr.current&1),f.flags|=128,null):(b&f.child.childLanes)!==0?Ja(u,f,b):(Jt(nr,nr.current&1),u=as(u,f,b),u!==null?u.sibling:null);Jt(nr,nr.current&1);break;case 19:if(T=(b&f.childLanes)!==0,(u.flags&128)!==0){if(T)return td(u,f,b);f.flags|=128}if(M=f.memoizedState,M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),Jt(nr,nr.current),T)break;return null;case 22:case 23:return f.lanes=0,Tu(u,f,b)}return as(u,f,b)}var rd,ju,Iu,nd;rd=function(u,f){for(var b=f.child;b!==null;){if(b.tag===5||b.tag===6)u.appendChild(b.stateNode);else if(b.tag!==4&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===f)break;for(;b.sibling===null;){if(b.return===null||b.return===f)return;b=b.return}b.sibling.return=b.return,b=b.sibling}},ju=function(){},Iu=function(u,f,b,T){var M=u.memoizedProps;if(M!==T){u=f.stateNode,Gs(Vn.current);var D=null;switch(b){case"input":M=Ee(u,M),T=Ee(u,T),D=[];break;case"select":M=V({},M,{value:void 0}),T=V({},T,{value:void 0}),D=[];break;case"textarea":M=_t(u,M),T=_t(u,T),D=[];break;default:typeof M.onClick!="function"&&typeof T.onClick=="function"&&(u.onclick=Mo)}Vt(b,T);var H;b=null;for(_e in M)if(!T.hasOwnProperty(_e)&&M.hasOwnProperty(_e)&&M[_e]!=null)if(_e==="style"){var J=M[_e];for(H in J)J.hasOwnProperty(H)&&(b||(b={}),b[H]="")}else _e!=="dangerouslySetInnerHTML"&&_e!=="children"&&_e!=="suppressContentEditableWarning"&&_e!=="suppressHydrationWarning"&&_e!=="autoFocus"&&(s.hasOwnProperty(_e)?D||(D=[]):(D=D||[]).push(_e,null));for(_e in T){var ae=T[_e];if(J=M!=null?M[_e]:void 0,T.hasOwnProperty(_e)&&ae!==J&&(ae!=null||J!=null))if(_e==="style")if(J){for(H in J)!J.hasOwnProperty(H)||ae&&ae.hasOwnProperty(H)||(b||(b={}),b[H]="");for(H in ae)ae.hasOwnProperty(H)&&J[H]!==ae[H]&&(b||(b={}),b[H]=ae[H])}else b||(D||(D=[]),D.push(_e,b)),b=ae;else _e==="dangerouslySetInnerHTML"?(ae=ae?ae.__html:void 0,J=J?J.__html:void 0,ae!=null&&J!==ae&&(D=D||[]).push(_e,ae)):_e==="children"?typeof ae!="string"&&typeof ae!="number"||(D=D||[]).push(_e,""+ae):_e!=="suppressContentEditableWarning"&&_e!=="suppressHydrationWarning"&&(s.hasOwnProperty(_e)?(ae!=null&&_e==="onScroll"&&er("scroll",u),D||J===ae||(D=[])):(D=D||[]).push(_e,ae))}b&&(D=D||[]).push("style",b);var _e=D;(f.updateQueue=_e)&&(f.flags|=4)}},nd=function(u,f,b,T){b!==T&&(f.flags|=4)};function aa(u,f){if(!rr)switch(u.tailMode){case"hidden":f=u.tail;for(var b=null;f!==null;)f.alternate!==null&&(b=f),f=f.sibling;b===null?u.tail=null:b.sibling=null;break;case"collapsed":b=u.tail;for(var T=null;b!==null;)b.alternate!==null&&(T=b),b=b.sibling;T===null?f||u.tail===null?u.tail=null:u.tail.sibling=null:T.sibling=null}}function qr(u){var f=u.alternate!==null&&u.alternate.child===u.child,b=0,T=0;if(f)for(var M=u.child;M!==null;)b|=M.lanes|M.childLanes,T|=M.subtreeFlags&14680064,T|=M.flags&14680064,M.return=u,M=M.sibling;else for(M=u.child;M!==null;)b|=M.lanes|M.childLanes,T|=M.subtreeFlags,T|=M.flags,M.return=u,M=M.sibling;return u.subtreeFlags|=T,u.childLanes=b,f}function Xd(u,f,b){var T=f.pendingProps;switch(pi(f),f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qr(f),null;case 1:return ln(f.type)&&Fo(),qr(f),null;case 3:return T=f.stateNode,Ji(),tr(on),tr(Lr),gu(),T.pendingContext&&(T.context=T.pendingContext,T.pendingContext=null),(u===null||u.child===null)&&(Fa(f)?f.flags|=4:u===null||u.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,Fn!==null&&(Uu(Fn),Fn=null))),ju(u,f),qr(f),null;case 5:mu(f);var M=Gs(Va.current);if(b=f.type,u!==null&&f.stateNode!=null)Iu(u,f,b,T,M),u.ref!==f.ref&&(f.flags|=512,f.flags|=2097152);else{if(!T){if(f.stateNode===null)throw Error(r(166));return qr(f),null}if(u=Gs(Vn.current),Fa(f)){T=f.stateNode,b=f.type;var D=f.memoizedProps;switch(T[Yn]=f,T[Ms]=D,u=(f.mode&1)!==0,b){case"dialog":er("cancel",T),er("close",T);break;case"iframe":case"object":case"embed":er("load",T);break;case"video":case"audio":for(M=0;M<ds.length;M++)er(ds[M],T);break;case"source":er("error",T);break;case"img":case"image":case"link":er("error",T),er("load",T);break;case"details":er("toggle",T);break;case"input":Pt(T,D),er("invalid",T);break;case"select":T._wrapperState={wasMultiple:!!D.multiple},er("invalid",T);break;case"textarea":ft(T,D),er("invalid",T)}Vt(b,D),M=null;for(var H in D)if(D.hasOwnProperty(H)){var J=D[H];H==="children"?typeof J=="string"?T.textContent!==J&&(D.suppressHydrationWarning!==!0&&Ia(T.textContent,J,u),M=["children",J]):typeof J=="number"&&T.textContent!==""+J&&(D.suppressHydrationWarning!==!0&&Ia(T.textContent,J,u),M=["children",""+J]):s.hasOwnProperty(H)&&J!=null&&H==="onScroll"&&er("scroll",T)}switch(b){case"input":Fe(T),St(T,D,!0);break;case"textarea":Fe(T),Wt(T);break;case"select":case"option":break;default:typeof D.onClick=="function"&&(T.onclick=Mo)}T=M,f.updateQueue=T,T!==null&&(f.flags|=4)}else{H=M.nodeType===9?M:M.ownerDocument,u==="http://www.w3.org/1999/xhtml"&&(u=Zt(b)),u==="http://www.w3.org/1999/xhtml"?b==="script"?(u=H.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild)):typeof T.is=="string"?u=H.createElement(b,{is:T.is}):(u=H.createElement(b),b==="select"&&(H=u,T.multiple?H.multiple=!0:T.size&&(H.size=T.size))):u=H.createElementNS(u,b),u[Yn]=f,u[Ms]=T,rd(u,f,!1,!1),f.stateNode=u;e:{switch(H=Ut(b,T),b){case"dialog":er("cancel",u),er("close",u),M=T;break;case"iframe":case"object":case"embed":er("load",u),M=T;break;case"video":case"audio":for(M=0;M<ds.length;M++)er(ds[M],u);M=T;break;case"source":er("error",u),M=T;break;case"img":case"image":case"link":er("error",u),er("load",u),M=T;break;case"details":er("toggle",u),M=T;break;case"input":Pt(u,T),M=Ee(u,T),er("invalid",u);break;case"option":M=T;break;case"select":u._wrapperState={wasMultiple:!!T.multiple},M=V({},T,{value:void 0}),er("invalid",u);break;case"textarea":ft(u,T),M=_t(u,T),er("invalid",u);break;default:M=T}Vt(b,M),J=M;for(D in J)if(J.hasOwnProperty(D)){var ae=J[D];D==="style"?ir(u,ae):D==="dangerouslySetInnerHTML"?(ae=ae?ae.__html:void 0,ae!=null&&bt(u,ae)):D==="children"?typeof ae=="string"?(b!=="textarea"||ae!=="")&&Be(u,ae):typeof ae=="number"&&Be(u,""+ae):D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&D!=="autoFocus"&&(s.hasOwnProperty(D)?ae!=null&&D==="onScroll"&&er("scroll",u):ae!=null&&R(u,D,ae,H))}switch(b){case"input":Fe(u),St(u,T,!1);break;case"textarea":Fe(u),Wt(u);break;case"option":T.value!=null&&u.setAttribute("value",""+oe(T.value));break;case"select":u.multiple=!!T.multiple,D=T.value,D!=null?Qe(u,!!T.multiple,D,!1):T.defaultValue!=null&&Qe(u,!!T.multiple,T.defaultValue,!0);break;default:typeof M.onClick=="function"&&(u.onclick=Mo)}switch(b){case"button":case"input":case"select":case"textarea":T=!!T.autoFocus;break e;case"img":T=!0;break e;default:T=!1}}T&&(f.flags|=4)}f.ref!==null&&(f.flags|=512,f.flags|=2097152)}return qr(f),null;case 6:if(u&&f.stateNode!=null)nd(u,f,u.memoizedProps,T);else{if(typeof T!="string"&&f.stateNode===null)throw Error(r(166));if(b=Gs(Va.current),Gs(Vn.current),Fa(f)){if(T=f.stateNode,b=f.memoizedProps,T[Yn]=f,(D=T.nodeValue!==b)&&(u=Vr,u!==null))switch(u.tag){case 3:Ia(T.nodeValue,b,(u.mode&1)!==0);break;case 5:u.memoizedProps.suppressHydrationWarning!==!0&&Ia(T.nodeValue,b,(u.mode&1)!==0)}D&&(f.flags|=4)}else T=(b.nodeType===9?b:b.ownerDocument).createTextNode(T),T[Yn]=f,f.stateNode=T}return qr(f),null;case 13:if(tr(nr),T=f.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(rr&&mn!==null&&(f.mode&1)!==0&&(f.flags&128)===0)ou(),rs(),f.flags|=98560,D=!1;else if(D=Fa(f),T!==null&&T.dehydrated!==null){if(u===null){if(!D)throw Error(r(318));if(D=f.memoizedState,D=D!==null?D.dehydrated:null,!D)throw Error(r(317));D[Yn]=f}else rs(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;qr(f),D=!1}else Fn!==null&&(Uu(Fn),Fn=null),D=!0;if(!D)return f.flags&65536?f:null}return(f.flags&128)!==0?(f.lanes=b,f):(T=T!==null,T!==(u!==null&&u.memoizedState!==null)&&T&&(f.child.flags|=8192,(f.mode&1)!==0&&(u===null||(nr.current&1)!==0?Sr===0&&(Sr=3):qu())),f.updateQueue!==null&&(f.flags|=4),qr(f),null);case 4:return Ji(),ju(u,f),u===null&&As(f.stateNode.containerInfo),qr(f),null;case 10:return Uo(f.type._context),qr(f),null;case 17:return ln(f.type)&&Fo(),qr(f),null;case 19:if(tr(nr),D=f.memoizedState,D===null)return qr(f),null;if(T=(f.flags&128)!==0,H=D.rendering,H===null)if(T)aa(D,!1);else{if(Sr!==0||u!==null&&(u.flags&128)!==0)for(u=f.child;u!==null;){if(H=Ga(u),H!==null){for(f.flags|=128,aa(D,!1),T=H.updateQueue,T!==null&&(f.updateQueue=T,f.flags|=4),f.subtreeFlags=0,T=b,b=f.child;b!==null;)D=b,u=T,D.flags&=14680066,H=D.alternate,H===null?(D.childLanes=0,D.lanes=u,D.child=null,D.subtreeFlags=0,D.memoizedProps=null,D.memoizedState=null,D.updateQueue=null,D.dependencies=null,D.stateNode=null):(D.childLanes=H.childLanes,D.lanes=H.lanes,D.child=H.child,D.subtreeFlags=0,D.deletions=null,D.memoizedProps=H.memoizedProps,D.memoizedState=H.memoizedState,D.updateQueue=H.updateQueue,D.type=H.type,u=H.dependencies,D.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),b=b.sibling;return Jt(nr,nr.current&1|2),f.child}u=u.sibling}D.tail!==null&&Xt()>da&&(f.flags|=128,T=!0,aa(D,!1),f.lanes=4194304)}else{if(!T)if(u=Ga(H),u!==null){if(f.flags|=128,T=!0,b=u.updateQueue,b!==null&&(f.updateQueue=b,f.flags|=4),aa(D,!0),D.tail===null&&D.tailMode==="hidden"&&!H.alternate&&!rr)return qr(f),null}else 2*Xt()-D.renderingStartTime>da&&b!==1073741824&&(f.flags|=128,T=!0,aa(D,!1),f.lanes=4194304);D.isBackwards?(H.sibling=f.child,f.child=H):(b=D.last,b!==null?b.sibling=H:f.child=H,D.last=H)}return D.tail!==null?(f=D.tail,D.rendering=f,D.tail=f.sibling,D.renderingStartTime=Xt(),f.sibling=null,b=nr.current,Jt(nr,T?b&1|2:b&1),f):(qr(f),null);case 22:case 23:return Hu(),T=f.memoizedState!==null,u!==null&&u.memoizedState!==null!==T&&(f.flags|=8192),T&&(f.mode&1)!==0?(vn&1073741824)!==0&&(qr(f),f.subtreeFlags&6&&(f.flags|=8192)):qr(f),null;case 24:return null;case 25:return null}throw Error(r(156,f.tag))}function Yd(u,f){switch(pi(f),f.tag){case 1:return ln(f.type)&&Fo(),u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 3:return Ji(),tr(on),tr(Lr),gu(),u=f.flags,(u&65536)!==0&&(u&128)===0?(f.flags=u&-65537|128,f):null;case 5:return mu(f),null;case 13:if(tr(nr),u=f.memoizedState,u!==null&&u.dehydrated!==null){if(f.alternate===null)throw Error(r(340));rs()}return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 19:return tr(nr),null;case 4:return Ji(),null;case 10:return Uo(f.type._context),null;case 22:case 23:return Hu(),null;case 24:return null;default:return null}}var kn=!1,Lt=!1,Mu=typeof WeakSet=="function"?WeakSet:Set,Ze=null;function zs(u,f){var b=u.ref;if(b!==null)if(typeof b=="function")try{b(null)}catch(T){ur(u,f,T)}else b.current=null}function Nu(u,f,b){try{b()}catch(T){ur(u,f,T)}}var sd=!1;function Qa(u,f){if(Ma=mo,u=zt(),Ra(u)){if("selectionStart"in u)var b={start:u.selectionStart,end:u.selectionEnd};else e:{b=(b=u.ownerDocument)&&b.defaultView||window;var T=b.getSelection&&b.getSelection();if(T&&T.rangeCount!==0){b=T.anchorNode;var M=T.anchorOffset,D=T.focusNode;T=T.focusOffset;try{b.nodeType,D.nodeType}catch{b=null;break e}var H=0,J=-1,ae=-1,_e=0,Me=0,De=u,Ie=null;t:for(;;){for(var He;De!==b||M!==0&&De.nodeType!==3||(J=H+M),De!==D||T!==0&&De.nodeType!==3||(ae=H+T),De.nodeType===3&&(H+=De.nodeValue.length),(He=De.firstChild)!==null;)Ie=De,De=He;for(;;){if(De===u)break t;if(Ie===b&&++_e===M&&(J=H),Ie===D&&++Me===T&&(ae=H),(He=De.nextSibling)!==null)break;De=Ie,Ie=De.parentNode}De=He}b=J===-1||ae===-1?null:{start:J,end:ae}}else b=null}b=b||{start:0,end:0}}else b=null;for(ci={focusedElem:u,selectionRange:b},mo=!1,Ze=f;Ze!==null;)if(f=Ze,u=f.child,(f.subtreeFlags&1028)!==0&&u!==null)u.return=f,Ze=u;else for(;Ze!==null;){f=Ze;try{var Ke=f.alternate;if((f.flags&1024)!==0)switch(f.tag){case 0:case 11:case 15:break;case 1:if(Ke!==null){var Xe=Ke.memoizedProps,dr=Ke.memoizedState,ge=f.stateNode,ue=ge.getSnapshotBeforeUpdate(f.elementType===f.type?Xe:$n(f.type,Xe),dr);ge.__reactInternalSnapshotBeforeUpdate=ue}break;case 3:var ye=f.stateNode.containerInfo;ye.nodeType===1?ye.textContent="":ye.nodeType===9&&ye.documentElement&&ye.removeChild(ye.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch($e){ur(f,f.return,$e)}if(u=f.sibling,u!==null){u.return=f.return,Ze=u;break}Ze=f.return}return Ke=sd,sd=!1,Ke}function oa(u,f,b){var T=f.updateQueue;if(T=T!==null?T.lastEffect:null,T!==null){var M=T=T.next;do{if((M.tag&u)===u){var D=M.destroy;M.destroy=void 0,D!==void 0&&Nu(f,b,D)}M=M.next}while(M!==T)}}function eo(u,f){if(f=f.updateQueue,f=f!==null?f.lastEffect:null,f!==null){var b=f=f.next;do{if((b.tag&u)===u){var T=b.create;b.destroy=T()}b=b.next}while(b!==f)}}function Ou(u){var f=u.ref;if(f!==null){var b=u.stateNode;switch(u.tag){case 5:u=b;break;default:u=b}typeof f=="function"?f(u):f.current=u}}function ad(u){var f=u.alternate;f!==null&&(u.alternate=null,ad(f)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(f=u.stateNode,f!==null&&(delete f[Yn],delete f[Ms],delete f[Oo],delete f[W],delete f[qi])),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function od(u){return u.tag===5||u.tag===3||u.tag===4}function ld(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||od(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function fl(u,f,b){var T=u.tag;if(T===5||T===6)u=u.stateNode,f?b.nodeType===8?b.parentNode.insertBefore(u,f):b.insertBefore(u,f):(b.nodeType===8?(f=b.parentNode,f.insertBefore(u,b)):(f=b,f.appendChild(u)),b=b._reactRootContainer,b!=null||f.onclick!==null||(f.onclick=Mo));else if(T!==4&&(u=u.child,u!==null))for(fl(u,f,b),u=u.sibling;u!==null;)fl(u,f,b),u=u.sibling}function hl(u,f,b){var T=u.tag;if(T===5||T===6)u=u.stateNode,f?b.insertBefore(u,f):b.appendChild(u);else if(T!==4&&(u=u.child,u!==null))for(hl(u,f,b),u=u.sibling;u!==null;)hl(u,f,b),u=u.sibling}var Mr=null,yn=!1;function xs(u,f,b){for(b=b.child;b!==null;)la(u,f,b),b=b.sibling}function la(u,f,b){if(Zn&&typeof Zn.onCommitFiberUnmount=="function")try{Zn.onCommitFiberUnmount(ws,b)}catch{}switch(b.tag){case 5:Lt||zs(b,f);case 6:var T=Mr,M=yn;Mr=null,xs(u,f,b),Mr=T,yn=M,Mr!==null&&(yn?(u=Mr,b=b.stateNode,u.nodeType===8?u.parentNode.removeChild(b):u.removeChild(b)):Mr.removeChild(b.stateNode));break;case 18:Mr!==null&&(yn?(u=Mr,b=b.stateNode,u.nodeType===8?su(u.parentNode,b):u.nodeType===1&&su(u,b),$t(u)):su(Mr,b.stateNode));break;case 4:T=Mr,M=yn,Mr=b.stateNode.containerInfo,yn=!0,xs(u,f,b),Mr=T,yn=M;break;case 0:case 11:case 14:case 15:if(!Lt&&(T=b.updateQueue,T!==null&&(T=T.lastEffect,T!==null))){M=T=T.next;do{var D=M,H=D.destroy;D=D.tag,H!==void 0&&((D&2)!==0||(D&4)!==0)&&Nu(b,f,H),M=M.next}while(M!==T)}xs(u,f,b);break;case 1:if(!Lt&&(zs(b,f),T=b.stateNode,typeof T.componentWillUnmount=="function"))try{T.props=b.memoizedProps,T.state=b.memoizedState,T.componentWillUnmount()}catch(J){ur(b,f,J)}xs(u,f,b);break;case 21:xs(u,f,b);break;case 22:b.mode&1?(Lt=(T=Lt)||b.memoizedState!==null,xs(u,f,b),Lt=T):xs(u,f,b);break;default:xs(u,f,b)}}function pl(u){var f=u.updateQueue;if(f!==null){u.updateQueue=null;var b=u.stateNode;b===null&&(b=u.stateNode=new Mu),f.forEach(function(T){var M=af.bind(null,u,T);b.has(T)||(b.add(T),T.then(M,M))})}}function Tn(u,f){var b=f.deletions;if(b!==null)for(var T=0;T<b.length;T++){var M=b[T];try{var D=u,H=f,J=H;e:for(;J!==null;){switch(J.tag){case 5:Mr=J.stateNode,yn=!1;break e;case 3:Mr=J.stateNode.containerInfo,yn=!0;break e;case 4:Mr=J.stateNode.containerInfo,yn=!0;break e}J=J.return}if(Mr===null)throw Error(r(160));la(D,H,M),Mr=null,yn=!1;var ae=M.alternate;ae!==null&&(ae.return=null),M.return=null}catch(_e){ur(M,f,_e)}}if(f.subtreeFlags&12854)for(f=f.child;f!==null;)Du(f,u),f=f.sibling}function Du(u,f){var b=u.alternate,T=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:if(Tn(f,u),xn(u),T&4){try{oa(3,u,u.return),eo(3,u)}catch(Xe){ur(u,u.return,Xe)}try{oa(5,u,u.return)}catch(Xe){ur(u,u.return,Xe)}}break;case 1:Tn(f,u),xn(u),T&512&&b!==null&&zs(b,b.return);break;case 5:if(Tn(f,u),xn(u),T&512&&b!==null&&zs(b,b.return),u.flags&32){var M=u.stateNode;try{Be(M,"")}catch(Xe){ur(u,u.return,Xe)}}if(T&4&&(M=u.stateNode,M!=null)){var D=u.memoizedProps,H=b!==null?b.memoizedProps:D,J=u.type,ae=u.updateQueue;if(u.updateQueue=null,ae!==null)try{J==="input"&&D.type==="radio"&&D.name!=null&&Dt(M,D),Ut(J,H);var _e=Ut(J,D);for(H=0;H<ae.length;H+=2){var Me=ae[H],De=ae[H+1];Me==="style"?ir(M,De):Me==="dangerouslySetInnerHTML"?bt(M,De):Me==="children"?Be(M,De):R(M,Me,De,_e)}switch(J){case"input":Et(M,D);break;case"textarea":Bt(M,D);break;case"select":var Ie=M._wrapperState.wasMultiple;M._wrapperState.wasMultiple=!!D.multiple;var He=D.value;He!=null?Qe(M,!!D.multiple,He,!1):Ie!==!!D.multiple&&(D.defaultValue!=null?Qe(M,!!D.multiple,D.defaultValue,!0):Qe(M,!!D.multiple,D.multiple?[]:"",!1))}M[Ms]=D}catch(Xe){ur(u,u.return,Xe)}}break;case 6:if(Tn(f,u),xn(u),T&4){if(u.stateNode===null)throw Error(r(162));M=u.stateNode,D=u.memoizedProps;try{M.nodeValue=D}catch(Xe){ur(u,u.return,Xe)}}break;case 3:if(Tn(f,u),xn(u),T&4&&b!==null&&b.memoizedState.isDehydrated)try{$t(f.containerInfo)}catch(Xe){ur(u,u.return,Xe)}break;case 4:Tn(f,u),xn(u);break;case 13:Tn(f,u),xn(u),M=u.child,M.flags&8192&&(D=M.memoizedState!==null,M.stateNode.isHidden=D,!D||M.alternate!==null&&M.alternate.memoizedState!==null||(gl=Xt())),T&4&&pl(u);break;case 22:if(Me=b!==null&&b.memoizedState!==null,u.mode&1?(Lt=(_e=Lt)||Me,Tn(f,u),Lt=_e):Tn(f,u),xn(u),T&8192){if(_e=u.memoizedState!==null,(u.stateNode.isHidden=_e)&&!Me&&(u.mode&1)!==0)for(Ze=u,Me=u.child;Me!==null;){for(De=Ze=Me;Ze!==null;){switch(Ie=Ze,He=Ie.child,Ie.tag){case 0:case 11:case 14:case 15:oa(4,Ie,Ie.return);break;case 1:zs(Ie,Ie.return);var Ke=Ie.stateNode;if(typeof Ke.componentWillUnmount=="function"){T=Ie,b=Ie.return;try{f=T,Ke.props=f.memoizedProps,Ke.state=f.memoizedState,Ke.componentWillUnmount()}catch(Xe){ur(T,b,Xe)}}break;case 5:zs(Ie,Ie.return);break;case 22:if(Ie.memoizedState!==null){cd(De);continue}}He!==null?(He.return=Ie,Ze=He):cd(De)}Me=Me.sibling}e:for(Me=null,De=u;;){if(De.tag===5){if(Me===null){Me=De;try{M=De.stateNode,_e?(D=M.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none"):(J=De.stateNode,ae=De.memoizedProps.style,H=ae!=null&&ae.hasOwnProperty("display")?ae.display:null,J.style.display=jr("display",H))}catch(Xe){ur(u,u.return,Xe)}}}else if(De.tag===6){if(Me===null)try{De.stateNode.nodeValue=_e?"":De.memoizedProps}catch(Xe){ur(u,u.return,Xe)}}else if((De.tag!==22&&De.tag!==23||De.memoizedState===null||De===u)&&De.child!==null){De.child.return=De,De=De.child;continue}if(De===u)break e;for(;De.sibling===null;){if(De.return===null||De.return===u)break e;Me===De&&(Me=null),De=De.return}Me===De&&(Me=null),De.sibling.return=De.return,De=De.sibling}}break;case 19:Tn(f,u),xn(u),T&4&&pl(u);break;case 21:break;default:Tn(f,u),xn(u)}}function xn(u){var f=u.flags;if(f&2){try{e:{for(var b=u.return;b!==null;){if(od(b)){var T=b;break e}b=b.return}throw Error(r(160))}switch(T.tag){case 5:var M=T.stateNode;T.flags&32&&(Be(M,""),T.flags&=-33);var D=ld(u);hl(u,D,M);break;case 3:case 4:var H=T.stateNode.containerInfo,J=ld(u);fl(u,J,H);break;default:throw Error(r(161))}}catch(ae){ur(u,u.return,ae)}u.flags&=-3}f&4096&&(u.flags&=-4097)}function ud(u,f,b){Ze=u,Un(u)}function Un(u,f,b){for(var T=(u.mode&1)!==0;Ze!==null;){var M=Ze,D=M.child;if(M.tag===22&&T){var H=M.memoizedState!==null||kn;if(!H){var J=M.alternate,ae=J!==null&&J.memoizedState!==null||Lt;J=kn;var _e=Lt;if(kn=H,(Lt=ae)&&!_e)for(Ze=M;Ze!==null;)H=Ze,ae=H.child,H.tag===22&&H.memoizedState!==null?Fu(M):ae!==null?(ae.return=H,Ze=ae):Fu(M);for(;D!==null;)Ze=D,Un(D),D=D.sibling;Ze=M,kn=J,Lt=_e}Hs(u)}else(M.subtreeFlags&8772)!==0&&D!==null?(D.return=M,Ze=D):Hs(u)}}function Hs(u){for(;Ze!==null;){var f=Ze;if((f.flags&8772)!==0){var b=f.alternate;try{if((f.flags&8772)!==0)switch(f.tag){case 0:case 11:case 15:Lt||eo(5,f);break;case 1:var T=f.stateNode;if(f.flags&4&&!Lt)if(b===null)T.componentDidMount();else{var M=f.elementType===f.type?b.memoizedProps:$n(f.type,b.memoizedProps);T.componentDidUpdate(M,b.memoizedState,T.__reactInternalSnapshotBeforeUpdate)}var D=f.updateQueue;D!==null&&Vc(f,D,T);break;case 3:var H=f.updateQueue;if(H!==null){if(b=null,f.child!==null)switch(f.child.tag){case 5:b=f.child.stateNode;break;case 1:b=f.child.stateNode}Vc(f,H,b)}break;case 5:var J=f.stateNode;if(b===null&&f.flags&4){b=J;var ae=f.memoizedProps;switch(f.type){case"button":case"input":case"select":case"textarea":ae.autoFocus&&b.focus();break;case"img":ae.src&&(b.src=ae.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(f.memoizedState===null){var _e=f.alternate;if(_e!==null){var Me=_e.memoizedState;if(Me!==null){var De=Me.dehydrated;De!==null&&$t(De)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Lt||f.flags&512&&Ou(f)}catch(Ie){ur(f,f.return,Ie)}}if(f===u){Ze=null;break}if(b=f.sibling,b!==null){b.return=f.return,Ze=b;break}Ze=f.return}}function cd(u){for(;Ze!==null;){var f=Ze;if(f===u){Ze=null;break}var b=f.sibling;if(b!==null){b.return=f.return,Ze=b;break}Ze=f.return}}function Fu(u){for(;Ze!==null;){var f=Ze;try{switch(f.tag){case 0:case 11:case 15:var b=f.return;try{eo(4,f)}catch(ae){ur(f,b,ae)}break;case 1:var T=f.stateNode;if(typeof T.componentDidMount=="function"){var M=f.return;try{T.componentDidMount()}catch(ae){ur(f,M,ae)}}var D=f.return;try{Ou(f)}catch(ae){ur(f,D,ae)}break;case 5:var H=f.return;try{Ou(f)}catch(ae){ur(f,H,ae)}}}catch(ae){ur(f,f.return,ae)}if(f===u){Ze=null;break}var J=f.sibling;if(J!==null){J.return=f.return,Ze=J;break}Ze=f.return}}var Jd=Math.ceil,ml=j.ReactCurrentDispatcher,$u=j.ReactCurrentOwner,An=j.ReactCurrentBatchConfig,kt=0,Tr=null,yr=null,Nr=0,vn=0,ua=an(0),Sr=0,ca=null,qs=0,to=0,Lu=0,ro=null,cn=null,gl=0,da=1/0,vs=null,yl=!1,Bu=null,Ws=null,xl=!1,Cr=null,vl=0,no=0,Vu=null,so=-1,_l=0;function nn(){return(kt&6)!==0?Xt():so!==-1?so:so=Xt()}function Zs(u){return(u.mode&1)===0?1:(kt&2)!==0&&Nr!==0?Nr&-Nr:Lc.transition!==null?(_l===0&&(_l=Dl()),_l):(u=Ot,u!==0||(u=window.event,u=u===void 0?16:dc(u.type)),u)}function zn(u,f,b,T){if(50<no)throw no=0,Vu=null,Error(r(185));va(u,b,T),((kt&2)===0||u!==Tr)&&(u===Tr&&((kt&2)===0&&(to|=b),Sr===4&&Ks(u,Nr)),Wr(u,T),b===1&&kt===0&&(f.mode&1)===0&&(da=Xt()+500,$o&&Os()))}function Wr(u,f){var b=u.callbackNode;kd(u,f);var T=ni(u,u===Tr?Nr:0);if(T===0)b!==null&&ga(b),u.callbackNode=null,u.callbackPriority=0;else if(f=T&-T,u.callbackPriority!==f){if(b!=null&&ga(b),f===1)u.tag===0?di(fd.bind(null,u)):Dc(fd.bind(null,u)),No(function(){(kt&6)===0&&Os()}),b=null;else{switch(si(T)){case 1:b=ti;break;case 4:b=ki;break;case 16:b=ri;break;case 536870912:b=ya;break;default:b=ri}b=vd(b,dd.bind(null,u))}u.callbackPriority=f,u.callbackNode=b}}function dd(u,f){if(so=-1,_l=0,(kt&6)!==0)throw Error(r(327));var b=u.callbackNode;if(Xs()&&u.callbackNode!==b)return null;var T=ni(u,u===Tr?Nr:0);if(T===0)return null;if((T&30)!==0||(T&u.expiredLanes)!==0||f)f=bl(u,T);else{f=T;var M=kt;kt|=2;var D=pd();(Tr!==u||Nr!==f)&&(vs=null,da=Xt()+500,bi(u,f));do try{tf();break}catch(J){hd(u,J)}while(!0);$a(),ml.current=D,kt=M,yr!==null?f=0:(Tr=null,Nr=0,f=Sr)}if(f!==0){if(f===2&&(M=co(u),M!==0&&(T=M,f=Gu(u,M))),f===1)throw b=ca,bi(u,0),Ks(u,T),Wr(u,Xt()),b;if(f===6)Ks(u,T);else{if(M=u.current.alternate,(T&30)===0&&!Qd(M)&&(f=bl(u,T),f===2&&(D=co(u),D!==0&&(T=D,f=Gu(u,D))),f===1))throw b=ca,bi(u,0),Ks(u,T),Wr(u,Xt()),b;switch(u.finishedWork=M,u.finishedLanes=T,f){case 0:case 1:throw Error(r(345));case 2:wi(u,cn,vs);break;case 3:if(Ks(u,T),(T&130023424)===T&&(f=gl+500-Xt(),10<f)){if(ni(u,0)!==0)break;if(M=u.suspendedLanes,(M&T)!==T){nn(),u.pingedLanes|=u.suspendedLanes&M;break}u.timeoutHandle=js(wi.bind(null,u,cn,vs),f);break}wi(u,cn,vs);break;case 4:if(Ks(u,T),(T&4194240)===T)break;for(f=u.eventTimes,M=-1;0<T;){var H=31-On(T);D=1<<H,H=f[H],H>M&&(M=H),T&=~D}if(T=M,T=Xt()-T,T=(120>T?120:480>T?480:1080>T?1080:1920>T?1920:3e3>T?3e3:4320>T?4320:1960*Jd(T/1960))-T,10<T){u.timeoutHandle=js(wi.bind(null,u,cn,vs),T);break}wi(u,cn,vs);break;case 5:wi(u,cn,vs);break;default:throw Error(r(329))}}}return Wr(u,Xt()),u.callbackNode===b?dd.bind(null,u):null}function Gu(u,f){var b=ro;return u.current.memoizedState.isDehydrated&&(bi(u,f).flags|=256),u=bl(u,f),u!==2&&(f=cn,cn=b,f!==null&&Uu(f)),u}function Uu(u){cn===null?cn=u:cn.push.apply(cn,u)}function Qd(u){for(var f=u;;){if(f.flags&16384){var b=f.updateQueue;if(b!==null&&(b=b.stores,b!==null))for(var T=0;T<b.length;T++){var M=b[T],D=M.getSnapshot;M=M.value;try{if(!ve(D(),M))return!1}catch{return!1}}}if(b=f.child,f.subtreeFlags&16384&&b!==null)b.return=f,f=b;else{if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Ks(u,f){for(f&=~Lu,f&=~to,u.suspendedLanes|=f,u.pingedLanes&=~f,u=u.expirationTimes;0<f;){var b=31-On(f),T=1<<b;u[b]=-1,f&=~T}}function fd(u){if((kt&6)!==0)throw Error(r(327));Xs();var f=ni(u,0);if((f&1)===0)return Wr(u,Xt()),null;var b=bl(u,f);if(u.tag!==0&&b===2){var T=co(u);T!==0&&(f=T,b=Gu(u,T))}if(b===1)throw b=ca,bi(u,0),Ks(u,f),Wr(u,Xt()),b;if(b===6)throw Error(r(345));return u.finishedWork=u.current.alternate,u.finishedLanes=f,wi(u,cn,vs),Wr(u,Xt()),null}function zu(u,f){var b=kt;kt|=1;try{return u(f)}finally{kt=b,kt===0&&(da=Xt()+500,$o&&Os())}}function _i(u){Cr!==null&&Cr.tag===0&&(kt&6)===0&&Xs();var f=kt;kt|=1;var b=An.transition,T=Ot;try{if(An.transition=null,Ot=1,u)return u()}finally{Ot=T,An.transition=b,kt=f,(kt&6)===0&&Os()}}function Hu(){vn=ua.current,tr(ua)}function bi(u,f){u.finishedWork=null,u.finishedLanes=0;var b=u.timeoutHandle;if(b!==-1&&(u.timeoutHandle=-1,Oa(b)),yr!==null)for(b=yr.return;b!==null;){var T=b;switch(pi(T),T.tag){case 1:T=T.type.childContextTypes,T!=null&&Fo();break;case 3:Ji(),tr(on),tr(Lr),gu();break;case 5:mu(T);break;case 4:Ji();break;case 13:tr(nr);break;case 19:tr(nr);break;case 10:Uo(T.type._context);break;case 22:case 23:Hu()}b=b.return}if(Tr=u,yr=u=Ys(u.current,null),Nr=vn=f,Sr=0,ca=null,Lu=to=qs=0,cn=ro=null,gn!==null){for(f=0;f<gn.length;f++)if(b=gn[f],T=b.interleaved,T!==null){b.interleaved=null;var M=T.next,D=b.pending;if(D!==null){var H=D.next;D.next=M,T.next=H}b.pending=T}gn=null}return u}function hd(u,f){do{var b=yr;try{if($a(),Qi.current=gs,Xo){for(var T=ar.memoizedState;T!==null;){var M=T.queue;M!==null&&(M.pending=null),T=T.next}Xo=!1}if(yi=0,br=or=ar=null,za=!1,Ur=0,$u.current=null,b===null||b.return===null){Sr=1,ca=f,yr=null;break}e:{var D=u,H=b.return,J=b,ae=f;if(f=Nr,J.flags|=32768,ae!==null&&typeof ae=="object"&&typeof ae.then=="function"){var _e=ae,Me=J,De=Me.tag;if((Me.mode&1)===0&&(De===0||De===11||De===15)){var Ie=Me.alternate;Ie?(Me.updateQueue=Ie.updateQueue,Me.memoizedState=Ie.memoizedState,Me.lanes=Ie.lanes):(Me.updateQueue=null,Me.memoizedState=null)}var He=Ru(H);if(He!==null){He.flags&=-257,Ka(He,H,J,D,f),He.mode&1&&Yc(D,_e,f),f=He,ae=_e;var Ke=f.updateQueue;if(Ke===null){var Xe=new Set;Xe.add(ae),f.updateQueue=Xe}else Ke.add(ae);break e}else{if((f&1)===0){Yc(D,_e,f),qu();break e}ae=Error(r(426))}}else if(rr&&J.mode&1){var dr=Ru(H);if(dr!==null){(dr.flags&65536)===0&&(dr.flags|=256),Ka(dr,H,J,D,f),ns(vi(ae,J));break e}}D=ae=vi(ae,J),Sr!==4&&(Sr=2),ro===null?ro=[D]:ro.push(D),D=H;do{switch(D.tag){case 3:D.flags|=65536,f&=-f,D.lanes|=f;var ge=ol(D,ae,f);uu(D,ge);break e;case 1:J=ae;var ue=D.type,ye=D.stateNode;if((D.flags&128)===0&&(typeof ue.getDerivedStateFromError=="function"||ye!==null&&typeof ye.componentDidCatch=="function"&&(Ws===null||!Ws.has(ye)))){D.flags|=65536,f&=-f,D.lanes|=f;var $e=Za(D,J,f);uu(D,$e);break e}}D=D.return}while(D!==null)}gd(b)}catch(Ye){f=Ye,yr===b&&b!==null&&(yr=b=b.return);continue}break}while(!0)}function pd(){var u=ml.current;return ml.current=gs,u===null?gs:u}function qu(){(Sr===0||Sr===3||Sr===2)&&(Sr=4),Tr===null||(qs&268435455)===0&&(to&268435455)===0||Ks(Tr,Nr)}function bl(u,f){var b=kt;kt|=2;var T=pd();(Tr!==u||Nr!==f)&&(vs=null,bi(u,f));do try{ef();break}catch(M){hd(u,M)}while(!0);if($a(),kt=b,ml.current=T,yr!==null)throw Error(r(261));return Tr=null,Nr=0,Sr}function ef(){for(;yr!==null;)md(yr)}function tf(){for(;yr!==null&&!ei();)md(yr)}function md(u){var f=xd(u.alternate,u,vn);u.memoizedProps=u.pendingProps,f===null?gd(u):yr=f,$u.current=null}function gd(u){var f=u;do{var b=f.alternate;if(u=f.return,(f.flags&32768)===0){if(b=Xd(b,f,vn),b!==null){yr=b;return}}else{if(b=Yd(b,f),b!==null){b.flags&=32767,yr=b;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{Sr=6,yr=null;return}}if(f=f.sibling,f!==null){yr=f;return}yr=f=u}while(f!==null);Sr===0&&(Sr=5)}function wi(u,f,b){var T=Ot,M=An.transition;try{An.transition=null,Ot=1,rf(u,f,b,T)}finally{An.transition=M,Ot=T}return null}function rf(u,f,b,T){do Xs();while(Cr!==null);if((kt&6)!==0)throw Error(r(327));b=u.finishedWork;var M=u.finishedLanes;if(b===null)return null;if(u.finishedWork=null,u.finishedLanes=0,b===u.current)throw Error(r(177));u.callbackNode=null,u.callbackPriority=0;var D=b.lanes|b.childLanes;if(ac(u,D),u===Tr&&(yr=Tr=null,Nr=0),(b.subtreeFlags&2064)===0&&(b.flags&2064)===0||xl||(xl=!0,vd(ri,function(){return Xs(),null})),D=(b.flags&15990)!==0,(b.subtreeFlags&15990)!==0||D){D=An.transition,An.transition=null;var H=Ot;Ot=1;var J=kt;kt|=4,$u.current=null,Qa(u,b),Du(b,u),Hd(ci),mo=!!Ma,ci=Ma=null,u.current=b,ud(b),oo(),kt=J,Ot=H,An.transition=D}else u.current=b;if(xl&&(xl=!1,Cr=u,vl=M),D=u.pendingLanes,D===0&&(Ws=null),Pd(b.stateNode),Wr(u,Xt()),f!==null)for(T=u.onRecoverableError,b=0;b<f.length;b++)M=f[b],T(M.value,{componentStack:M.stack,digest:M.digest});if(yl)throw yl=!1,u=Bu,Bu=null,u;return(vl&1)!==0&&u.tag!==0&&Xs(),D=u.pendingLanes,(D&1)!==0?u===Vu?no++:(no=0,Vu=u):no=0,Os(),null}function Xs(){if(Cr!==null){var u=si(vl),f=An.transition,b=Ot;try{if(An.transition=null,Ot=16>u?16:u,Cr===null)var T=!1;else{if(u=Cr,Cr=null,vl=0,(kt&6)!==0)throw Error(r(331));var M=kt;for(kt|=4,Ze=u.current;Ze!==null;){var D=Ze,H=D.child;if((Ze.flags&16)!==0){var J=D.deletions;if(J!==null){for(var ae=0;ae<J.length;ae++){var _e=J[ae];for(Ze=_e;Ze!==null;){var Me=Ze;switch(Me.tag){case 0:case 11:case 15:oa(8,Me,D)}var De=Me.child;if(De!==null)De.return=Me,Ze=De;else for(;Ze!==null;){Me=Ze;var Ie=Me.sibling,He=Me.return;if(ad(Me),Me===_e){Ze=null;break}if(Ie!==null){Ie.return=He,Ze=Ie;break}Ze=He}}}var Ke=D.alternate;if(Ke!==null){var Xe=Ke.child;if(Xe!==null){Ke.child=null;do{var dr=Xe.sibling;Xe.sibling=null,Xe=dr}while(Xe!==null)}}Ze=D}}if((D.subtreeFlags&2064)!==0&&H!==null)H.return=D,Ze=H;else e:for(;Ze!==null;){if(D=Ze,(D.flags&2048)!==0)switch(D.tag){case 0:case 11:case 15:oa(9,D,D.return)}var ge=D.sibling;if(ge!==null){ge.return=D.return,Ze=ge;break e}Ze=D.return}}var ue=u.current;for(Ze=ue;Ze!==null;){H=Ze;var ye=H.child;if((H.subtreeFlags&2064)!==0&&ye!==null)ye.return=H,Ze=ye;else e:for(H=ue;Ze!==null;){if(J=Ze,(J.flags&2048)!==0)try{switch(J.tag){case 0:case 11:case 15:eo(9,J)}}catch(Ye){ur(J,J.return,Ye)}if(J===H){Ze=null;break e}var $e=J.sibling;if($e!==null){$e.return=J.return,Ze=$e;break e}Ze=J.return}}if(kt=M,Os(),Zn&&typeof Zn.onPostCommitFiberRoot=="function")try{Zn.onPostCommitFiberRoot(ws,u)}catch{}T=!0}return T}finally{Ot=b,An.transition=f}}return!1}function Wu(u,f,b){f=vi(b,f),f=ol(u,f,1),u=$s(u,f,1),f=nn(),u!==null&&(va(u,1,f),Wr(u,f))}function ur(u,f,b){if(u.tag===3)Wu(u,u,b);else for(;f!==null;){if(f.tag===3){Wu(f,u,b);break}else if(f.tag===1){var T=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof T.componentDidCatch=="function"&&(Ws===null||!Ws.has(T))){u=vi(b,u),u=Za(f,u,1),f=$s(f,u,1),u=nn(),f!==null&&(va(f,1,u),Wr(f,u));break}}f=f.return}}function nf(u,f,b){var T=u.pingCache;T!==null&&T.delete(f),f=nn(),u.pingedLanes|=u.suspendedLanes&b,Tr===u&&(Nr&b)===b&&(Sr===4||Sr===3&&(Nr&130023424)===Nr&&500>Xt()-gl?bi(u,0):Lu|=b),Wr(u,f)}function yd(u,f){f===0&&((u.mode&1)===0?f=1:(f=uo,uo<<=1,(uo&130023424)===0&&(uo=4194304)));var b=nn();u=Ln(u,f),u!==null&&(va(u,f,b),Wr(u,b))}function sf(u){var f=u.memoizedState,b=0;f!==null&&(b=f.retryLane),yd(u,b)}function af(u,f){var b=0;switch(u.tag){case 13:var T=u.stateNode,M=u.memoizedState;M!==null&&(b=M.retryLane);break;case 19:T=u.stateNode;break;default:throw Error(r(314))}T!==null&&T.delete(f),yd(u,b)}var xd;xd=function(u,f,b){if(u!==null)if(u.memoizedProps!==f.pendingProps||on.current)zr=!0;else{if((u.lanes&b)===0&&(f.flags&128)===0)return zr=!1,Hr(u,f,b);zr=(u.flags&131072)!==0}else zr=!1,rr&&(f.flags&1048576)!==0&&Fc(f,Bo,f.index);switch(f.lanes=0,f.tag){case 2:var T=f.type;ia(u,f),u=f.pendingProps;var M=Zi(f,Lr.current);Ds(f,b),M=Yo(null,f,T,u,M,b);var D=Jo();return f.flags|=1,typeof M=="object"&&M!==null&&typeof M.render=="function"&&M.$$typeof===void 0?(f.tag=1,f.memoizedState=null,f.updateQueue=null,ln(T)?(D=!0,Sn(f)):D=!1,f.memoizedState=M.state!==null&&M.state!==void 0?M.state:null,lu(f),M.updater=qo,f.stateNode=M,M._reactInternals=f,fu(f,T,u,b),f=Au(null,f,T,!0,D,b)):(f.tag=0,rr&&D&&Da(f),rn(null,f,M,b),f=f.child),f;case 16:T=f.elementType;e:{switch(ia(u,f),u=f.pendingProps,M=T._init,T=M(T._payload),f.type=T,M=f.tag=wl(T),u=$n(T,u),M){case 0:f=ll(null,f,T,u,b);break e;case 1:f=ed(null,f,T,u,b);break e;case 11:f=Pu(null,f,T,u,b);break e;case 14:f=ss(null,f,T,$n(T.type,u),b);break e}throw Error(r(306,T,""))}return f;case 0:return T=f.type,M=f.pendingProps,M=f.elementType===T?M:$n(T,M),ll(u,f,T,M,b);case 1:return T=f.type,M=f.pendingProps,M=f.elementType===T?M:$n(T,M),ed(u,f,T,M,b);case 3:e:{if(is(f),u===null)throw Error(r(387));T=f.pendingProps,D=f.memoizedState,M=D.element,Bc(u,f),Ho(f,T,null,b);var H=f.memoizedState;if(T=H.element,D.isDehydrated)if(D={element:T,isDehydrated:!1,cache:H.cache,pendingSuspenseBoundaries:H.pendingSuspenseBoundaries,transitions:H.transitions},f.updateQueue.baseState=D,f.memoizedState=D,f.flags&256){M=vi(Error(r(423)),f),f=ul(u,f,T,b,M);break e}else if(T!==M){M=vi(Error(r(424)),f),f=ul(u,f,T,b,M);break e}else for(mn=Is(f.stateNode.containerInfo.firstChild),Vr=f,rr=!0,Fn=null,b=hu(f,null,T,b),f.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling;else{if(rs(),T===M){f=as(u,f,b);break e}rn(u,f,T,b)}f=f.child}return f;case 5:return pu(f),u===null&&un(f),T=f.type,M=f.pendingProps,D=u!==null?u.memoizedProps:null,H=M.children,Na(T,M)?H=null:D!==null&&Na(T,D)&&(f.flags|=32),Qc(u,f),rn(u,f,H,b),f.child;case 6:return u===null&&un(f),null;case 13:return Ja(u,f,b);case 4:return Ko(f,f.stateNode.containerInfo),T=f.pendingProps,u===null?f.child=Bs(f,null,T,b):rn(u,f,T,b),f.child;case 11:return T=f.type,M=f.pendingProps,M=f.elementType===T?M:$n(T,M),Pu(u,f,T,M,b);case 7:return rn(u,f,f.pendingProps,b),f.child;case 8:return rn(u,f,f.pendingProps.children,b),f.child;case 12:return rn(u,f,f.pendingProps.children,b),f.child;case 10:e:{if(T=f.type._context,M=f.pendingProps,D=f.memoizedProps,H=M.value,Jt(mi,T._currentValue),T._currentValue=H,D!==null)if(ve(D.value,H)){if(D.children===M.children&&!on.current){f=as(u,f,b);break e}}else for(D=f.child,D!==null&&(D.return=f);D!==null;){var J=D.dependencies;if(J!==null){H=D.child;for(var ae=J.firstContext;ae!==null;){if(ae.context===T){if(D.tag===1){ae=Bn(-1,b&-b),ae.tag=2;var _e=D.updateQueue;if(_e!==null){_e=_e.shared;var Me=_e.pending;Me===null?ae.next=ae:(ae.next=Me.next,Me.next=ae),_e.pending=ae}}D.lanes|=b,ae=D.alternate,ae!==null&&(ae.lanes|=b),Pn(D.return,b,f),J.lanes|=b;break}ae=ae.next}}else if(D.tag===10)H=D.type===f.type?null:D.child;else if(D.tag===18){if(H=D.return,H===null)throw Error(r(341));H.lanes|=b,J=H.alternate,J!==null&&(J.lanes|=b),Pn(H,b,f),H=D.sibling}else H=D.child;if(H!==null)H.return=D;else for(H=D;H!==null;){if(H===f){H=null;break}if(D=H.sibling,D!==null){D.return=H.return,H=D;break}H=H.return}D=H}rn(u,f,M.children,b),f=f.child}return f;case 9:return M=f.type,T=f.pendingProps.children,Ds(f,b),M=en(M),T=T(M),f.flags|=1,rn(u,f,T,b),f.child;case 14:return T=f.type,M=$n(T,f.pendingProps),M=$n(T.type,M),ss(u,f,T,M,b);case 15:return ku(u,f,f.type,f.pendingProps,b);case 17:return T=f.type,M=f.pendingProps,M=f.elementType===T?M:$n(T,M),ia(u,f),f.tag=1,ln(T)?(u=!0,Sn(f)):u=!1,Ds(f,b),du(f,T,M),fu(f,T,M,b),Au(null,f,T,!0,u,b);case 19:return td(u,f,b);case 22:return Tu(u,f,b)}throw Error(r(156,f.tag))};function vd(u,f){return ma(u,f)}function of(u,f,b,T){this.tag=u,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=T,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _n(u,f,b,T){return new of(u,f,b,T)}function Zu(u){return u=u.prototype,!(!u||!u.isReactComponent)}function wl(u){if(typeof u=="function")return Zu(u)?1:0;if(u!=null){if(u=u.$$typeof,u===Q)return 11;if(u===Y)return 14}return 2}function Ys(u,f){var b=u.alternate;return b===null?(b=_n(u.tag,f,u.key,u.mode),b.elementType=u.elementType,b.type=u.type,b.stateNode=u.stateNode,b.alternate=u,u.alternate=b):(b.pendingProps=f,b.type=u.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=u.flags&14680064,b.childLanes=u.childLanes,b.lanes=u.lanes,b.child=u.child,b.memoizedProps=u.memoizedProps,b.memoizedState=u.memoizedState,b.updateQueue=u.updateQueue,f=u.dependencies,b.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},b.sibling=u.sibling,b.index=u.index,b.ref=u.ref,b}function El(u,f,b,T,M,D){var H=2;if(T=u,typeof u=="function")Zu(u)&&(H=1);else if(typeof u=="string")H=5;else e:switch(u){case L:return Ei(b.children,M,D,f);case B:H=8,M|=8;break;case Z:return u=_n(12,b,f,M|2),u.elementType=Z,u.lanes=D,u;case fe:return u=_n(13,b,f,M),u.elementType=fe,u.lanes=D,u;case se:return u=_n(19,b,f,M),u.elementType=se,u.lanes=D,u;case q:return Sl(b,M,D,f);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case te:H=10;break e;case ie:H=9;break e;case Q:H=11;break e;case Y:H=14;break e;case G:H=16,T=null;break e}throw Error(r(130,u==null?u:typeof u,""))}return f=_n(H,b,f,M),f.elementType=u,f.type=T,f.lanes=D,f}function Ei(u,f,b,T){return u=_n(7,u,T,f),u.lanes=b,u}function Sl(u,f,b,T){return u=_n(22,u,T,f),u.elementType=q,u.lanes=b,u.stateNode={isHidden:!1},u}function Ku(u,f,b){return u=_n(6,u,null,f),u.lanes=b,u}function Xu(u,f,b){return f=_n(4,u.children!==null?u.children:[],u.key,f),f.lanes=b,f.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},f}function lf(u,f,b,T,M){this.tag=f,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xa(0),this.expirationTimes=xa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xa(0),this.identifierPrefix=T,this.onRecoverableError=M,this.mutableSourceEagerHydrationData=null}function Yu(u,f,b,T,M,D,H,J,ae){return u=new lf(u,f,b,J,ae),f===1?(f=1,D===!0&&(f|=8)):f=0,D=_n(3,null,null,f),u.current=D,D.stateNode=u,D.memoizedState={element:T,isDehydrated:b,cache:null,transitions:null,pendingSuspenseBoundaries:null},lu(D),u}function uf(u,f,b){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:O,key:T==null?null:""+T,children:u,containerInfo:f,implementation:b}}function _d(u){if(!u)return Ns;u=u._reactInternals;e:{if(pr(u)!==u||u.tag!==1)throw Error(r(170));var f=u;do{switch(f.tag){case 3:f=f.stateNode.context;break e;case 1:if(ln(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break e}}f=f.return}while(f!==null);throw Error(r(171))}if(u.tag===1){var b=u.type;if(ln(b))return Nc(u,b,f)}return f}function bd(u,f,b,T,M,D,H,J,ae){return u=Yu(b,T,!0,u,M,D,H,J,ae),u.context=_d(null),b=u.current,T=nn(),M=Zs(b),D=Bn(T,M),D.callback=f??null,$s(b,D,M),u.current.lanes=M,va(u,M,T),Wr(u,T),u}function Cl(u,f,b,T){var M=f.current,D=nn(),H=Zs(M);return b=_d(b),f.context===null?f.context=b:f.pendingContext=b,f=Bn(D,H),f.payload={element:u},T=T===void 0?null:T,T!==null&&(f.callback=T),u=$s(M,f,H),u!==null&&(zn(u,M,H,D),Ls(u,M,H)),H}function Rl(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return u.child.stateNode;default:return u.child.stateNode}}function wd(u,f){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var b=u.retryLane;u.retryLane=b!==0&&b<f?b:f}}function Ju(u,f){wd(u,f),(u=u.alternate)&&wd(u,f)}function cf(){return null}var Qu=typeof reportError=="function"?reportError:function(u){console.error(u)};function Pl(u){this._internalRoot=u}kl.prototype.render=Pl.prototype.render=function(u){var f=this._internalRoot;if(f===null)throw Error(r(409));Cl(u,f,null,null)},kl.prototype.unmount=Pl.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var f=u.containerInfo;_i(function(){Cl(null,u,null,null)}),f[pn]=null}};function kl(u){this._internalRoot=u}kl.prototype.unstable_scheduleHydration=function(u){if(u){var f=$l();u={blockedOn:null,target:u,priority:f};for(var b=0;b<Rs.length&&f!==0&&f<Rs[b].priority;b++);Rs.splice(b,0,u),b===0&&uc(u)}};function ec(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function Tl(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11&&(u.nodeType!==8||u.nodeValue!==" react-mount-point-unstable "))}function Ed(){}function Al(u,f,b,T,M){if(M){if(typeof T=="function"){var D=T;T=function(){var _e=Rl(H);D.call(_e)}}var H=bd(f,T,u,0,null,!1,!1,"",Ed);return u._reactRootContainer=H,u[pn]=H.current,As(u.nodeType===8?u.parentNode:u),_i(),H}for(;M=u.lastChild;)u.removeChild(M);if(typeof T=="function"){var J=T;T=function(){var _e=Rl(ae);J.call(_e)}}var ae=Yu(u,0,!1,null,null,!1,!1,"",Ed);return u._reactRootContainer=ae,u[pn]=ae.current,As(u.nodeType===8?u.parentNode:u),_i(function(){Cl(f,ae,b,T)}),ae}function jl(u,f,b,T,M){var D=b._reactRootContainer;if(D){var H=D;if(typeof M=="function"){var J=M;M=function(){var ae=Rl(H);J.call(ae)}}Cl(f,H,u,M)}else H=Al(b,f,u,M,T);return Rl(H)}Fl=function(u){switch(u.tag){case 3:var f=u.stateNode;if(f.current.memoizedState.isDehydrated){var b=Ai(f.pendingLanes);b!==0&&(ba(f,b|1),Wr(f,Xt()),(kt&6)===0&&(da=Xt()+500,Os()))}break;case 13:_i(function(){var T=Ln(u,1);if(T!==null){var M=nn();zn(T,u,1,M)}}),Ju(u,1)}},fo=function(u){if(u.tag===13){var f=Ln(u,134217728);if(f!==null){var b=nn();zn(f,u,134217728,b)}Ju(u,134217728)}},oc=function(u){if(u.tag===13){var f=Zs(u),b=Ln(u,f);if(b!==null){var T=nn();zn(b,u,f,T)}Ju(u,f)}},$l=function(){return Ot},Ll=function(u,f){var b=Ot;try{return Ot=u,f()}finally{Ot=b}},me=function(u,f,b){switch(f){case"input":if(Et(u,b),f=b.name,b.type==="radio"&&f!=null){for(b=u;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll("input[name="+JSON.stringify(""+f)+'][type="radio"]'),f=0;f<b.length;f++){var T=b[f];if(T!==u&&T.form===u.form){var M=Do(T);if(!M)throw Error(r(90));et(T),Et(T,M)}}}break;case"textarea":Bt(u,b);break;case"select":f=b.value,f!=null&&Qe(u,!!b.multiple,f,!1)}},Ve=zu,Ge=_i;var df={usingClientEntryPoint:!1,Events:[$r,pt,Do,be,We,zu]},io={findFiberByHostInstance:Jn,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ff={bundleType:io.bundleType,version:io.version,rendererPackageName:io.rendererPackageName,rendererConfig:io.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:j.ReactCurrentDispatcher,findHostInstanceByFiber:function(u){return u=ha(u),u===null?null:u.stateNode},findFiberByHostInstance:io.findFiberByHostInstance||cf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Il.isDisabled&&Il.supportsFiber)try{ws=Il.inject(ff),Zn=Il}catch{}}return reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=df,reactDom_production_min.createPortal=function(u,f){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ec(f))throw Error(r(200));return uf(u,f,null,b)},reactDom_production_min.createRoot=function(u,f){if(!ec(u))throw Error(r(299));var b=!1,T="",M=Qu;return f!=null&&(f.unstable_strictMode===!0&&(b=!0),f.identifierPrefix!==void 0&&(T=f.identifierPrefix),f.onRecoverableError!==void 0&&(M=f.onRecoverableError)),f=Yu(u,1,!1,null,null,b,!1,T,M),u[pn]=f.current,As(u.nodeType===8?u.parentNode:u),new Pl(f)},reactDom_production_min.findDOMNode=function(u){if(u==null)return null;if(u.nodeType===1)return u;var f=u._reactInternals;if(f===void 0)throw typeof u.render=="function"?Error(r(188)):(u=Object.keys(u).join(","),Error(r(268,u)));return u=ha(f),u=u===null?null:u.stateNode,u},reactDom_production_min.flushSync=function(u){return _i(u)},reactDom_production_min.hydrate=function(u,f,b){if(!Tl(f))throw Error(r(200));return jl(null,u,f,!0,b)},reactDom_production_min.hydrateRoot=function(u,f,b){if(!ec(u))throw Error(r(405));var T=b!=null&&b.hydratedSources||null,M=!1,D="",H=Qu;if(b!=null&&(b.unstable_strictMode===!0&&(M=!0),b.identifierPrefix!==void 0&&(D=b.identifierPrefix),b.onRecoverableError!==void 0&&(H=b.onRecoverableError)),f=bd(f,null,u,1,b??null,M,!1,D,H),u[pn]=f.current,As(u),T)for(u=0;u<T.length;u++)b=T[u],M=b._getVersion,M=M(b._source),f.mutableSourceEagerHydrationData==null?f.mutableSourceEagerHydrationData=[b,M]:f.mutableSourceEagerHydrationData.push(b,M);return new kl(f)},reactDom_production_min.render=function(u,f,b){if(!Tl(f))throw Error(r(200));return jl(null,u,f,!1,b)},reactDom_production_min.unmountComponentAtNode=function(u){if(!Tl(u))throw Error(r(40));return u._reactRootContainer?(_i(function(){jl(null,null,u,!1,function(){u._reactRootContainer=null,u[pn]=null})}),!0):!1},reactDom_production_min.unstable_batchedUpdates=zu,reactDom_production_min.unstable_renderSubtreeIntoContainer=function(u,f,b,T){if(!Tl(b))throw Error(r(200));if(u==null||u._reactInternals===void 0)throw Error(r(38));return jl(u,f,b,!1,T)},reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608",reactDom_production_min}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),reactDom.exports=requireReactDom_production_min(),reactDom.exports}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client$1;hasRequiredClient=1;var t=requireReactDom();return client$1.createRoot=t.createRoot,client$1.hydrateRoot=t.hydrateRoot,client$1}var clientExports=requireClient(),dist$1={},hasRequiredDist$1;function requireDist$1(){if(hasRequiredDist$1)return dist$1;hasRequiredDist$1=1,Object.defineProperty(dist$1,"__esModule",{value:!0}),dist$1.parse=o,dist$1.serialize=d;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,r=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,a=(()=>{const y=function(){};return y.prototype=Object.create(null),y})();function o(y,x){const E=new a,S=y.length;if(S<2)return E;const k=(x==null?void 0:x.decode)||p;let C=0;do{const P=y.indexOf("=",C);if(P===-1)break;const R=y.indexOf(";",C),j=R===-1?S:R;if(P>j){C=y.lastIndexOf(";",P-1)+1;continue}const I=l(y,C,P),O=c(y,P,I),L=y.slice(I,O);if(E[L]===void 0){let B=l(y,P+1,j),Z=c(y,j,B);const te=k(y.slice(B,Z));E[L]=te}C=j+1}while(C<S);return E}function l(y,x,E){do{const S=y.charCodeAt(x);if(S!==32&&S!==9)return x}while(++x<E);return E}function c(y,x,E){for(;x>E;){const S=y.charCodeAt(--x);if(S!==32&&S!==9)return x+1}return E}function d(y,x,E){const S=(E==null?void 0:E.encode)||encodeURIComponent;if(!t.test(y))throw new TypeError(`argument name is invalid: ${y}`);const k=S(x);if(!e.test(k))throw new TypeError(`argument val is invalid: ${x}`);let C=y+"="+k;if(!E)return C;if(E.maxAge!==void 0){if(!Number.isInteger(E.maxAge))throw new TypeError(`option maxAge is invalid: ${E.maxAge}`);C+="; Max-Age="+E.maxAge}if(E.domain){if(!r.test(E.domain))throw new TypeError(`option domain is invalid: ${E.domain}`);C+="; Domain="+E.domain}if(E.path){if(!n.test(E.path))throw new TypeError(`option path is invalid: ${E.path}`);C+="; Path="+E.path}if(E.expires){if(!g(E.expires)||!Number.isFinite(E.expires.valueOf()))throw new TypeError(`option expires is invalid: ${E.expires}`);C+="; Expires="+E.expires.toUTCString()}if(E.httpOnly&&(C+="; HttpOnly"),E.secure&&(C+="; Secure"),E.partitioned&&(C+="; Partitioned"),E.priority)switch(typeof E.priority=="string"?E.priority.toLowerCase():void 0){case"low":C+="; Priority=Low";break;case"medium":C+="; Priority=Medium";break;case"high":C+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${E.priority}`)}if(E.sameSite)switch(typeof E.sameSite=="string"?E.sameSite.toLowerCase():E.sameSite){case!0:case"strict":C+="; SameSite=Strict";break;case"lax":C+="; SameSite=Lax";break;case"none":C+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${E.sameSite}`)}return C}function p(y){if(y.indexOf("%")===-1)return y;try{return decodeURIComponent(y)}catch{return y}}function g(y){return s.call(y)==="[object Date]"}return dist$1}requireDist$1();var PopStateEventType="popstate";function createBrowserHistory(t={}){function e(n,s){let{pathname:a,search:o,hash:l}=n.location;return createLocation("",{pathname:a,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:createPath(s)}return getUrlBasedHistory(e,r,null,t)}function invariant$1(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function warning(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function createKey(){return Math.random().toString(36).substring(2,10)}function getHistoryState(t,e){return{usr:t.state,key:t.key,idx:e}}function createLocation(t,e,r=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?parsePath(e):e,state:r,key:e&&e.key||n||createKey()}}function createPath({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function parsePath(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function getUrlBasedHistory(t,e,r,n={}){let{window:s=document.defaultView,v5Compat:a=!1}=n,o=s.history,l="POP",c=null,d=p();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function p(){return(o.state||{idx:null}).idx}function g(){l="POP";let k=p(),C=k==null?null:k-d;d=k,c&&c({action:l,location:S.location,delta:C})}function y(k,C){l="PUSH";let P=createLocation(S.location,k,C);d=p()+1;let R=getHistoryState(P,d),j=S.createHref(P);try{o.pushState(R,"",j)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;s.location.assign(j)}a&&c&&c({action:l,location:S.location,delta:1})}function x(k,C){l="REPLACE";let P=createLocation(S.location,k,C);d=p();let R=getHistoryState(P,d),j=S.createHref(P);o.replaceState(R,"",j),a&&c&&c({action:l,location:S.location,delta:0})}function E(k){return createBrowserURLImpl(k)}let S={get action(){return l},get location(){return t(s,o)},listen(k){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(PopStateEventType,g),c=k,()=>{s.removeEventListener(PopStateEventType,g),c=null}},createHref(k){return e(s,k)},createURL:E,encodeLocation(k){let C=E(k);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:y,replace:x,go(k){return o.go(k)}};return S}function createBrowserURLImpl(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),invariant$1(r,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:createPath(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function matchRoutes(t,e,r="/"){return matchRoutesImpl(t,e,r,!1)}function matchRoutesImpl(t,e,r,n){let s=typeof e=="string"?parsePath(e):e,a=stripBasename(s.pathname||"/",r);if(a==null)return null;let o=flattenRoutes(t);rankRouteBranches(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=decodePath(a);l=matchRouteBranch(o[c],d,n)}return l}function flattenRoutes(t,e=[],r=[],n=""){let s=(a,o,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};c.relativePath.startsWith("/")&&(invariant$1(c.relativePath.startsWith(n),`Absolute route path "${c.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(n.length));let d=joinPaths([n,c.relativePath]),p=r.concat(c);a.children&&a.children.length>0&&(invariant$1(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),flattenRoutes(a.children,e,p,d)),!(a.path==null&&!a.index)&&e.push({path:d,score:computeScore(d,a.index),routesMeta:p})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))s(a,o);else for(let c of explodeOptionalSegments(a.path))s(a,o,c)}),e}function explodeOptionalSegments(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return s?[a,""]:[a];let o=explodeOptionalSegments(n.join("/")),l=[];return l.push(...o.map(c=>c===""?a:[a,c].join("/"))),s&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function rankRouteBranches(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:compareIndexes(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=t=>t==="*";function computeScore(t,e){let r=t.split("/"),n=r.length;return r.some(isSplat)&&(n+=splatPenalty),e&&(n+=indexRouteValue),r.filter(s=>!isSplat(s)).reduce((s,a)=>s+(paramRe.test(a)?dynamicSegmentValue:a===""?emptySegmentValue:staticSegmentValue),n)}function compareIndexes(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function matchRouteBranch(t,e,r=!1){let{routesMeta:n}=t,s={},a="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,p=a==="/"?e:e.slice(a.length)||"/",g=matchPath({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},p),y=c.route;if(!g&&d&&r&&!n[n.length-1].route.index&&(g=matchPath({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},p)),!g)return null;Object.assign(s,g.params),o.push({params:s,pathname:joinPaths([a,g.pathname]),pathnameBase:normalizePathname(joinPaths([a,g.pathnameBase])),route:y}),g.pathnameBase!=="/"&&(a=joinPaths([a,g.pathnameBase]))}return o}function matchPath(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=compilePath(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let a=s[0],o=a.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((d,{paramName:p,isOptional:g},y)=>{if(p==="*"){let E=l[y]||"";o=a.slice(0,a.length-E.length).replace(/(.)\/+$/,"$1")}const x=l[y];return g&&!x?d[p]=void 0:d[p]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:t}}function compilePath(t,e=!1,r=!0){warning(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function decodePath(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return warning(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function stripBasename(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function resolvePath(t,e="/"){let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?parsePath(t):t;return{pathname:r?r.startsWith("/")?r:resolvePathname(r,e):e,search:normalizeSearch(n),hash:normalizeHash(s)}}function resolvePathname(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function getInvalidPathError(t,e,r,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function getResolveToMatches(t){let e=getPathContributingMatches(t);return e.map((r,n)=>n===e.length-1?r.pathname:r.pathnameBase)}function resolveTo(t,e,r,n=!1){let s;typeof t=="string"?s=parsePath(t):(s={...t},invariant$1(!s.pathname||!s.pathname.includes("?"),getInvalidPathError("?","pathname","search",s)),invariant$1(!s.pathname||!s.pathname.includes("#"),getInvalidPathError("#","pathname","hash",s)),invariant$1(!s.search||!s.search.includes("#"),getInvalidPathError("#","search","hash",s)));let a=t===""||s.pathname==="",o=a?"/":s.pathname,l;if(o==null)l=r;else{let g=e.length-1;if(!n&&o.startsWith("..")){let y=o.split("/");for(;y[0]==="..";)y.shift(),g-=1;s.pathname=y.join("/")}l=g>=0?e[g]:"/"}let c=resolvePath(s,l),d=o&&o!=="/"&&o.endsWith("/"),p=(a||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||p)&&(c.pathname+="/"),c}var joinPaths=t=>t.join("/").replace(/\/\/+/g,"/"),normalizePathname=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,normalizeHash=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function isRouteErrorResponse(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"];new Set(validMutationMethodsArr);var validRequestMethodsArr=["GET",...validMutationMethodsArr];new Set(validRequestMethodsArr);var DataRouterContext=reactExports.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=reactExports.createContext(null);DataRouterStateContext.displayName="DataRouterState";var ViewTransitionContext=reactExports.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=reactExports.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=reactExports.createContext(null);AwaitContext.displayName="Await";var NavigationContext=reactExports.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=reactExports.createContext(null);LocationContext.displayName="Location";var RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=reactExports.createContext(null);RouteErrorContext.displayName="RouteError";function useHref(t,{relative:e}={}){invariant$1(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=reactExports.useContext(NavigationContext),{hash:s,pathname:a,search:o}=useResolvedPath(t,{relative:e}),l=a;return r!=="/"&&(l=a==="/"?r:joinPaths([r,a])),n.createHref({pathname:l,search:o,hash:s})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return invariant$1(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),reactExports.useContext(LocationContext).location}var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect$3(t){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(t)}function useNavigate(){let{isDataRoute:t}=reactExports.useContext(RouteContext);return t?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant$1(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let t=reactExports.useContext(DataRouterContext),{basename:e,navigator:r}=reactExports.useContext(NavigationContext),{matches:n}=reactExports.useContext(RouteContext),{pathname:s}=useLocation(),a=JSON.stringify(getResolveToMatches(n)),o=reactExports.useRef(!1);return useIsomorphicLayoutEffect$3(()=>{o.current=!0}),reactExports.useCallback((c,d={})=>{if(warning(o.current,navigateEffectWarning),!o.current)return;if(typeof c=="number"){r.go(c);return}let p=resolveTo(c,JSON.parse(a),s,d.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:joinPaths([e,p.pathname])),(d.replace?r.replace:r.push)(p,d.state,d)},[e,r,a,s,t])}reactExports.createContext(null);function useParams(){let{matches:t}=reactExports.useContext(RouteContext),e=t[t.length-1];return e?e.params:{}}function useResolvedPath(t,{relative:e}={}){let{matches:r}=reactExports.useContext(RouteContext),{pathname:n}=useLocation(),s=JSON.stringify(getResolveToMatches(r));return reactExports.useMemo(()=>resolveTo(t,JSON.parse(s),n,e==="path"),[t,s,n,e])}function useRoutes(t,e){return useRoutesImpl(t,e)}function useRoutesImpl(t,e,r,n){var P;invariant$1(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:a}=reactExports.useContext(NavigationContext),{matches:o}=reactExports.useContext(RouteContext),l=o[o.length-1],c=l?l.params:{},d=l?l.pathname:"/",p=l?l.pathnameBase:"/",g=l&&l.route;{let R=g&&g.path||"";warningOnce(d,!g||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let y=useLocation(),x;if(e){let R=typeof e=="string"?parsePath(e):e;invariant$1(p==="/"||((P=R.pathname)==null?void 0:P.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${R.pathname}" was given in the \`location\` prop.`),x=R}else x=y;let E=x.pathname||"/",S=E;if(p!=="/"){let R=p.replace(/^\//,"").split("/");S="/"+E.replace(/^\//,"").split("/").slice(R.length).join("/")}let k=!a&&r&&r.matches&&r.matches.length>0?r.matches:matchRoutes(t,{pathname:S});warning(g||k!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),warning(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=_renderMatches(k&&k.map(R=>Object.assign({},R,{params:Object.assign({},c,R.params),pathname:joinPaths([p,s.encodeLocation?s.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?p:joinPaths([p,s.encodeLocation?s.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),o,r,n);return e&&C?reactExports.createElement(LocationContext.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},C):C}function DefaultErrorComponent(){let t=useRouteError(),e=isRouteErrorResponse(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},a={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("p",null,"💿 Hey developer 👋"),reactExports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",reactExports.createElement("code",{style:a},"ErrorBoundary")," or"," ",reactExports.createElement("code",{style:a},"errorElement")," prop on your route.")),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},e),r?reactExports.createElement("pre",{style:s},r):null,o)}var defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends reactExports.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function RenderedRoute({routeContext:t,match:e,children:r}){let n=reactExports.useContext(DataRouterContext);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),reactExports.createElement(RouteContext.Provider,{value:t},r)}function _renderMatches(t,e=[],r=null,n=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let s=t,a=r==null?void 0:r.errors;if(a!=null){let c=s.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);invariant$1(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,c+1))}let o=!1,l=-1;if(r)for(let c=0;c<s.length;c++){let d=s[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=c),d.route.id){let{loaderData:p,errors:g}=r,y=d.route.loader&&!p.hasOwnProperty(d.route.id)&&(!g||g[d.route.id]===void 0);if(d.route.lazy||y){o=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((c,d,p)=>{let g,y=!1,x=null,E=null;r&&(g=a&&d.route.id?a[d.route.id]:void 0,x=d.route.errorElement||defaultErrorElement,o&&(l<0&&p===0?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,E=null):l===p&&(y=!0,E=d.route.hydrateFallbackElement||null)));let S=e.concat(s.slice(0,p+1)),k=()=>{let C;return g?C=x:y?C=E:d.route.Component?C=reactExports.createElement(d.route.Component,null):d.route.element?C=d.route.element:C=c,reactExports.createElement(RenderedRoute,{match:d,routeContext:{outlet:c,matches:S,isDataRoute:r!=null},children:C})};return r&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?reactExports.createElement(RenderErrorBoundary,{location:r.location,revalidation:r.revalidation,component:x,error:g,children:k(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):k()},null)}function getDataRouterConsoleError(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(t){let e=reactExports.useContext(DataRouterContext);return invariant$1(e,getDataRouterConsoleError(t)),e}function useDataRouterState(t){let e=reactExports.useContext(DataRouterStateContext);return invariant$1(e,getDataRouterConsoleError(t)),e}function useRouteContext(t){let e=reactExports.useContext(RouteContext);return invariant$1(e,getDataRouterConsoleError(t)),e}function useCurrentRouteId(t){let e=useRouteContext(t),r=e.matches[e.matches.length-1];return invariant$1(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function useRouteId(){return useCurrentRouteId("useRouteId")}function useRouteError(){var n;let t=reactExports.useContext(RouteErrorContext),e=useDataRouterState("useRouteError"),r=useCurrentRouteId("useRouteError");return t!==void 0?t:(n=e.errors)==null?void 0:n[r]}function useNavigateStable(){let{router:t}=useDataRouterContext("useNavigate"),e=useCurrentRouteId("useNavigate"),r=reactExports.useRef(!1);return useIsomorphicLayoutEffect$3(()=>{r.current=!0}),reactExports.useCallback(async(s,a={})=>{warning(r.current,navigateEffectWarning),r.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...a}))},[t,e])}var alreadyWarned={};function warningOnce(t,e,r){!e&&!alreadyWarned[t]&&(alreadyWarned[t]=!0,warning(!1,r))}reactExports.memo(DataRoutes);function DataRoutes({routes:t,future:e,state:r}){return useRoutesImpl(t,void 0,r,e)}function Navigate({to:t,replace:e,state:r,relative:n}){invariant$1(useInRouterContext(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=reactExports.useContext(NavigationContext);warning(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=reactExports.useContext(RouteContext),{pathname:o}=useLocation(),l=useNavigate(),c=resolveTo(t,getResolveToMatches(a),o,n==="path"),d=JSON.stringify(c);return reactExports.useEffect(()=>{l(JSON.parse(d),{replace:e,state:r,relative:n})},[l,d,n,e,r]),null}function Route(t){invariant$1(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Router({basename:t="/",children:e=null,location:r,navigationType:n="POP",navigator:s,static:a=!1}){invariant$1(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),l=reactExports.useMemo(()=>({basename:o,navigator:s,static:a,future:{}}),[o,s,a]);typeof r=="string"&&(r=parsePath(r));let{pathname:c="/",search:d="",hash:p="",state:g=null,key:y="default"}=r,x=reactExports.useMemo(()=>{let E=stripBasename(c,o);return E==null?null:{location:{pathname:E,search:d,hash:p,state:g,key:y},navigationType:n}},[o,c,d,p,g,y,n]);return warning(x!=null,`<Router basename="${o}"> is not able to match the URL "${c}${d}${p}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:reactExports.createElement(NavigationContext.Provider,{value:l},reactExports.createElement(LocationContext.Provider,{children:e,value:x}))}function Routes({children:t,location:e}){return useRoutes(createRoutesFromChildren(t),e)}function createRoutesFromChildren(t,e=[]){let r=[];return reactExports.Children.forEach(t,(n,s)=>{if(!reactExports.isValidElement(n))return;let a=[...e,s];if(n.type===reactExports.Fragment){r.push.apply(r,createRoutesFromChildren(n.props.children,a));return}invariant$1(n.type===Route,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),invariant$1(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=createRoutesFromChildren(n.props.children,a)),r.push(o)}),r}var defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(t){return t!=null&&typeof t.tagName=="string"}function isButtonElement(t){return isHtmlElement(t)&&t.tagName.toLowerCase()==="button"}function isFormElement(t){return isHtmlElement(t)&&t.tagName.toLowerCase()==="form"}function isInputElement(t){return isHtmlElement(t)&&t.tagName.toLowerCase()==="input"}function isModifiedEvent(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function shouldProcessLinkClick(t,e){return t.button===0&&(!e||e==="_self")&&!isModifiedEvent(t)}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(t){return t!=null&&!supportedFormEncTypes.has(t)?(warning(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):t}function getFormSubmissionInfo(t,e){let r,n,s,a,o;if(isFormElement(t)){let l=t.getAttribute("action");n=l?stripBasename(l,e):null,r=t.getAttribute("method")||defaultMethod,s=getFormEncType(t.getAttribute("enctype"))||defaultEncType,a=new FormData(t)}else if(isButtonElement(t)||isInputElement(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(n=c?stripBasename(c,e):null,r=t.getAttribute("formmethod")||l.getAttribute("method")||defaultMethod,s=getFormEncType(t.getAttribute("formenctype"))||getFormEncType(l.getAttribute("enctype"))||defaultEncType,a=new FormData(l,t),!isFormDataSubmitterSupported()){let{name:d,type:p,value:g}=t;if(p==="image"){let y=d?`${d}.`:"";a.append(`${y}x`,"0"),a.append(`${y}y`,"0")}else d&&a.append(d,g)}}else{if(isHtmlElement(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=defaultMethod,n=null,s=defaultEncType,o=t}return a&&s==="text/plain"&&(o=a,a=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:a,body:o}}function invariant2(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function loadRouteModule(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isHtmlLinkDescriptor(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function getKeyedPrefetchLinks(t,e,r){let n=await Promise.all(t.map(async s=>{let a=e.routes[s.route.id];if(a){let o=await loadRouteModule(a,r);return o.links?o.links():[]}return[]}));return dedupeLinkDescriptors(n.flat(1).filter(isHtmlLinkDescriptor).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function getNewMatchesForLinks(t,e,r,n,s,a){let o=(c,d)=>r[d]?c.route.id!==r[d].route.id:!0,l=(c,d)=>{var p;return r[d].pathname!==c.pathname||((p=r[d].route.path)==null?void 0:p.endsWith("*"))&&r[d].params["*"]!==c.params["*"]};return a==="assets"?e.filter((c,d)=>o(c,d)||l(c,d)):a==="data"?e.filter((c,d)=>{var g;let p=n.routes[c.route.id];if(!p||!p.hasLoader)return!1;if(o(c,d)||l(c,d))return!0;if(c.route.shouldRevalidate){let y=c.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((g=r[0])==null?void 0:g.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function getModuleLinkHrefs(t,e,{includeHydrateFallback:r}={}){return dedupeHrefs(t.map(n=>{let s=e.routes[n.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function dedupeHrefs(t){return[...new Set(t)]}function sortKeys(t){let e={},r=Object.keys(t).sort();for(let n of r)e[n]=t[n];return e}function dedupeLinkDescriptors(t,e){let r=new Set;return new Set(e),t.reduce((n,s)=>{let a=JSON.stringify(sortKeys(s));return r.has(a)||(r.add(a),n.push({key:a,link:s})),n},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var NO_BODY_STATUS_CODES=new Set([100,101,204,205]);function singleFetchUrl(t,e){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname="_root.data":e&&stripBasename(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.data`:r.pathname=`${r.pathname.replace(/\/$/,"")}.data`,r}function useDataRouterContext2(){let t=reactExports.useContext(DataRouterContext);return invariant2(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function useDataRouterStateContext(){let t=reactExports.useContext(DataRouterStateContext);return invariant2(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var FrameworkContext=reactExports.createContext(void 0);FrameworkContext.displayName="FrameworkContext";function useFrameworkContext(){let t=reactExports.useContext(FrameworkContext);return invariant2(t,"You must render this element inside a <HydratedRouter> element"),t}function usePrefetchBehavior(t,e){let r=reactExports.useContext(FrameworkContext),[n,s]=reactExports.useState(!1),[a,o]=reactExports.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:p,onTouchStart:g}=e,y=reactExports.useRef(null);reactExports.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let S=C=>{C.forEach(P=>{o(P.isIntersecting)})},k=new IntersectionObserver(S,{threshold:.5});return y.current&&k.observe(y.current),()=>{k.disconnect()}}},[t]),reactExports.useEffect(()=>{if(n){let S=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(S)}}},[n]);let x=()=>{s(!0)},E=()=>{s(!1),o(!1)};return r?t!=="intent"?[a,y,{}]:[a,y,{onFocus:composeEventHandlers$1(l,x),onBlur:composeEventHandlers$1(c,E),onMouseEnter:composeEventHandlers$1(d,x),onMouseLeave:composeEventHandlers$1(p,E),onTouchStart:composeEventHandlers$1(g,x)}]:[!1,y,{}]}function composeEventHandlers$1(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function PrefetchPageLinks({page:t,...e}){let{router:r}=useDataRouterContext2(),n=reactExports.useMemo(()=>matchRoutes(r.routes,t,r.basename),[r.routes,t,r.basename]);return n?reactExports.createElement(PrefetchPageLinksImpl,{page:t,matches:n,...e}):null}function useKeyedPrefetchLinks(t){let{manifest:e,routeModules:r}=useFrameworkContext(),[n,s]=reactExports.useState([]);return reactExports.useEffect(()=>{let a=!1;return getKeyedPrefetchLinks(t,e,r).then(o=>{a||s(o)}),()=>{a=!0}},[t,e,r]),n}function PrefetchPageLinksImpl({page:t,matches:e,...r}){let n=useLocation(),{manifest:s,routeModules:a}=useFrameworkContext(),{basename:o}=useDataRouterContext2(),{loaderData:l,matches:c}=useDataRouterStateContext(),d=reactExports.useMemo(()=>getNewMatchesForLinks(t,e,c,s,n,"data"),[t,e,c,s,n]),p=reactExports.useMemo(()=>getNewMatchesForLinks(t,e,c,s,n,"assets"),[t,e,c,s,n]),g=reactExports.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let E=new Set,S=!1;if(e.forEach(C=>{var R;let P=s.routes[C.route.id];!P||!P.hasLoader||(!d.some(j=>j.route.id===C.route.id)&&C.route.id in l&&((R=a[C.route.id])!=null&&R.shouldRevalidate)||P.hasClientLoader?S=!0:E.add(C.route.id))}),E.size===0)return[];let k=singleFetchUrl(t,o);return S&&E.size>0&&k.searchParams.set("_routes",e.filter(C=>E.has(C.route.id)).map(C=>C.route.id).join(",")),[k.pathname+k.search]},[o,l,n,s,d,e,t,a]),y=reactExports.useMemo(()=>getModuleLinkHrefs(p,s),[p,s]),x=useKeyedPrefetchLinks(p);return reactExports.createElement(reactExports.Fragment,null,g.map(E=>reactExports.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...r})),y.map(E=>reactExports.createElement("link",{key:E,rel:"modulepreload",href:E,...r})),x.map(({key:E,link:S})=>reactExports.createElement("link",{key:E,...S})))}function mergeRefs(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var isBrowser$3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{isBrowser$3&&(window.__reactRouterVersion="7.6.0")}catch{}function BrowserRouter({basename:t,children:e,window:r}){let n=reactExports.useRef();n.current==null&&(n.current=createBrowserHistory({window:r,v5Compat:!0}));let s=n.current,[a,o]=reactExports.useState({action:s.action,location:s.location}),l=reactExports.useCallback(c=>{reactExports.startTransition(()=>o(c))},[o]);return reactExports.useLayoutEffect(()=>s.listen(l),[s,l]),reactExports.createElement(Router,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:s})}var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function({onClick:e,discover:r="render",prefetch:n="none",relative:s,reloadDocument:a,replace:o,state:l,target:c,to:d,preventScrollReset:p,viewTransition:g,...y},x){let{basename:E}=reactExports.useContext(NavigationContext),S=typeof d=="string"&&ABSOLUTE_URL_REGEX2.test(d),k,C=!1;if(typeof d=="string"&&S&&(k=d,isBrowser$3))try{let Z=new URL(window.location.href),te=d.startsWith("//")?new URL(Z.protocol+d):new URL(d),ie=stripBasename(te.pathname,E);te.origin===Z.origin&&ie!=null?d=ie+te.search+te.hash:C=!0}catch{warning(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let P=useHref(d,{relative:s}),[R,j,I]=usePrefetchBehavior(n,y),O=useLinkClickHandler(d,{replace:o,state:l,target:c,preventScrollReset:p,relative:s,viewTransition:g});function L(Z){e&&e(Z),Z.defaultPrevented||O(Z)}let B=reactExports.createElement("a",{...y,...I,href:k||P,onClick:C||a?e:L,ref:mergeRefs(x,j),target:c,"data-discover":!S&&r==="render"?"true":void 0});return R&&!S?reactExports.createElement(reactExports.Fragment,null,B,reactExports.createElement(PrefetchPageLinks,{page:P})):B});Link.displayName="Link";var NavLink=reactExports.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:n="",end:s=!1,style:a,to:o,viewTransition:l,children:c,...d},p){let g=useResolvedPath(o,{relative:d.relative}),y=useLocation(),x=reactExports.useContext(DataRouterStateContext),{navigator:E,basename:S}=reactExports.useContext(NavigationContext),k=x!=null&&useViewTransitionState(g)&&l===!0,C=E.encodeLocation?E.encodeLocation(g).pathname:g.pathname,P=y.pathname,R=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;r||(P=P.toLowerCase(),R=R?R.toLowerCase():null,C=C.toLowerCase()),R&&S&&(R=stripBasename(R,S)||R);const j=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let I=P===C||!s&&P.startsWith(C)&&P.charAt(j)==="/",O=R!=null&&(R===C||!s&&R.startsWith(C)&&R.charAt(C.length)==="/"),L={isActive:I,isPending:O,isTransitioning:k},B=I?e:void 0,Z;typeof n=="function"?Z=n(L):Z=[n,I?"active":null,O?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let te=typeof a=="function"?a(L):a;return reactExports.createElement(Link,{...d,"aria-current":B,className:Z,ref:p,style:te,to:o,viewTransition:l},typeof c=="function"?c(L):c)});NavLink.displayName="NavLink";var Form=reactExports.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:n,replace:s,state:a,method:o=defaultMethod,action:l,onSubmit:c,relative:d,preventScrollReset:p,viewTransition:g,...y},x)=>{let E=useSubmit(),S=useFormAction(l,{relative:d}),k=o.toLowerCase()==="get"?"get":"post",C=typeof l=="string"&&ABSOLUTE_URL_REGEX2.test(l),P=R=>{if(c&&c(R),R.defaultPrevented)return;R.preventDefault();let j=R.nativeEvent.submitter,I=(j==null?void 0:j.getAttribute("formmethod"))||o;E(j||R.currentTarget,{fetcherKey:e,method:I,navigate:r,replace:s,state:a,relative:d,preventScrollReset:p,viewTransition:g})};return reactExports.createElement("form",{ref:x,method:k,action:S,onSubmit:n?c:P,...y,"data-discover":!C&&t==="render"?"true":void 0})});Form.displayName="Form";function getDataRouterConsoleError2(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(t){let e=reactExports.useContext(DataRouterContext);return invariant$1(e,getDataRouterConsoleError2(t)),e}function useLinkClickHandler(t,{target:e,replace:r,state:n,preventScrollReset:s,relative:a,viewTransition:o}={}){let l=useNavigate(),c=useLocation(),d=useResolvedPath(t,{relative:a});return reactExports.useCallback(p=>{if(shouldProcessLinkClick(p,e)){p.preventDefault();let g=r!==void 0?r:createPath(c)===createPath(d);l(t,{replace:g,state:n,preventScrollReset:s,relative:a,viewTransition:o})}},[c,l,d,r,n,e,t,s,a,o])}var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:t}=useDataRouterContext3("useSubmit"),{basename:e}=reactExports.useContext(NavigationContext),r=useRouteId();return reactExports.useCallback(async(n,s={})=>{let{action:a,method:o,encType:l,formData:c,body:d}=getFormSubmissionInfo(n,e);if(s.navigate===!1){let p=s.fetcherKey||getUniqueFetcherId();await t.fetch(p,r,s.action||a,{preventScrollReset:s.preventScrollReset,formData:c,body:d,formMethod:s.method||o,formEncType:s.encType||l,flushSync:s.flushSync})}else await t.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:c,body:d,formMethod:s.method||o,formEncType:s.encType||l,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,r])}function useFormAction(t,{relative:e}={}){let{basename:r}=reactExports.useContext(NavigationContext),n=reactExports.useContext(RouteContext);invariant$1(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),a={...useResolvedPath(t||".",{relative:e})},o=useLocation();if(t==null){a.search=o.search;let l=new URLSearchParams(a.search),c=l.getAll("index");if(c.some(p=>p==="")){l.delete("index"),c.filter(g=>g).forEach(g=>l.append("index",g));let p=l.toString();a.search=p?`?${p}`:""}}return(!t||t===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(a.pathname=a.pathname==="/"?r:joinPaths([r,a.pathname])),createPath(a)}function useViewTransitionState(t,e={}){let r=reactExports.useContext(ViewTransitionContext);invariant$1(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=useDataRouterContext3("useViewTransitionState"),s=useResolvedPath(t,{relative:e.relative});if(!r.isTransitioning)return!1;let a=stripBasename(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=stripBasename(r.nextLocation.pathname,n)||r.nextLocation.pathname;return matchPath(s.pathname,o)!=null||matchPath(s.pathname,a)!=null}[...NO_BODY_STATUS_CODES];var reactDomExports=requireReactDom();const ReactDOM=getDefaultExportFromCjs(reactDomExports);function bind(t,e){return function(){return t.apply(e,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,{iterator,toStringTag}=Symbol,kindOf=(t=>e=>{const r=toString.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=t=>(t=t.toLowerCase(),e=>kindOf(e)===t),typeOfTest=t=>e=>typeof e===t,{isArray:isArray$1}=Array,isUndefined=typeOfTest("undefined");function isBuffer(t){return t!==null&&!isUndefined(t)&&t.constructor!==null&&!isUndefined(t.constructor)&&isFunction$2(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&isArrayBuffer(t.buffer),e}const isString=typeOfTest("string"),isFunction$2=typeOfTest("function"),isNumber=typeOfTest("number"),isObject$1=t=>t!==null&&typeof t=="object",isBoolean=t=>t===!0||t===!1,isPlainObject=t=>{if(kindOf(t)!=="object")return!1;const e=getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(toStringTag in t)&&!(iterator in t)},isDate$1=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=t=>isObject$1(t)&&isFunction$2(t.pipe),isFormData=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||isFunction$2(t.append)&&((e=kindOf(t))==="formdata"||e==="object"&&isFunction$2(t.toString)&&t.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,s;if(typeof t!="object"&&(t=[t]),isArray$1(t))for(n=0,s=t.length;n<s;n++)e.call(null,t[n],n,t);else{const a=r?Object.getOwnPropertyNames(t):Object.keys(t),o=a.length;let l;for(n=0;n<o;n++)l=a[n],e.call(null,t[l],l,t)}}function findKey$1(t,e){e=e.toLowerCase();const r=Object.keys(t);let n=r.length,s;for(;n-- >0;)if(s=r[n],e===s.toLowerCase())return s;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,isContextDefined=t=>!isUndefined(t)&&t!==_global;function merge(){const{caseless:t}=isContextDefined(this)&&this||{},e={},r=(n,s)=>{const a=t&&findKey$1(e,s)||s;isPlainObject(e[a])&&isPlainObject(n)?e[a]=merge(e[a],n):isPlainObject(n)?e[a]=merge({},n):isArray$1(n)?e[a]=n.slice():e[a]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&forEach(arguments[n],r);return e}const extend=(t,e,r,{allOwnKeys:n}={})=>(forEach(e,(s,a)=>{r&&isFunction$2(s)?t[a]=bind(s,r):t[a]=s},{allOwnKeys:n}),t),stripBOM=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),inherits=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},toFlatObject=(t,e,r,n)=>{let s,a,o;const l={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),a=s.length;a-- >0;)o=s[a],(!n||n(o,t,e))&&!l[o]&&(e[o]=t[o],l[o]=!0);t=r!==!1&&getPrototypeOf(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},endsWith=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},toArray$1=t=>{if(!t)return null;if(isArray$1(t))return t;let e=t.length;if(!isNumber(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},isTypedArray=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(t,e)=>{const n=(t&&t[iterator]).call(t);let s;for(;(s=n.next())&&!s.done;){const a=s.value;e.call(t,a[0],a[1])}},matchAll=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase$1=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,s){return n.toUpperCase()+s}),hasOwnProperty$1=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};forEach(r,(s,a)=>{let o;(o=e(s,a,t))!==!1&&(n[a]=o||s)}),Object.defineProperties(t,n)},freezeMethods=t=>{reduceDescriptors(t,(e,r)=>{if(isFunction$2(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(isFunction$2(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},toObjectSet=(t,e)=>{const r={},n=s=>{s.forEach(a=>{r[a]=!0})};return isArray$1(t)?n(t):n(String(t).split(e)),r},noop$2=()=>{},toFiniteNumber=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function isSpecCompliantForm(t){return!!(t&&isFunction$2(t.append)&&t[toStringTag]==="FormData"&&t[iterator])}const toJSONObject=t=>{const e=new Array(10),r=(n,s)=>{if(isObject$1(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[s]=n;const a=isArray$1(n)?[]:{};return forEach(n,(o,l)=>{const c=r(o,s+1);!isUndefined(c)&&(a[l]=c)}),e[s]=void 0,a}}return n};return r(t,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=t=>t&&(isObject$1(t)||isFunction$2(t))&&isFunction$2(t.then)&&isFunction$2(t.catch),_setImmediate=((t,e)=>t?setImmediate:e?((r,n)=>(_global.addEventListener("message",({source:s,data:a})=>{s===_global&&a===r&&n.length&&n.shift()()},!1),s=>{n.push(s),_global.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",isFunction$2(_global.postMessage)),asap=typeof queueMicrotask<"u"?queueMicrotask.bind(_global):typeof process<"u"&&process.nextTick||_setImmediate,isIterable=t=>t!=null&&isFunction$2(t[iterator]),utils$1={isArray:isArray$1,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isBoolean,isObject:isObject$1,isPlainObject,isReadableStream,isRequest,isResponse,isHeaders,isUndefined,isDate:isDate$1,isFile,isBlob,isRegExp,isFunction:isFunction$2,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray:toArray$1,forEachEntry,matchAll,isHTMLForm,hasOwnProperty:hasOwnProperty$1,hasOwnProp:hasOwnProperty$1,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase:toCamelCase$1,noop:noop$2,toFiniteNumber,findKey:findKey$1,global:_global,isContextDefined,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable,setImmediate:_setImmediate,asap,isIterable};function AxiosError$1(t,e,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}utils$1.inherits(AxiosError$1,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.status}}});const prototype$1=AxiosError$1.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{descriptors[t]={value:t}});Object.defineProperties(AxiosError$1,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError$1.from=(t,e,r,n,s,a)=>{const o=Object.create(prototype$1);return utils$1.toFlatObject(t,o,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),AxiosError$1.call(o,t.message,e,r,n,s),o.cause=t,o.name=t.name,a&&Object.assign(o,a),o};const httpAdapter=null;function isVisitable(t){return utils$1.isPlainObject(t)||utils$1.isArray(t)}function removeBrackets(t){return utils$1.endsWith(t,"[]")?t.slice(0,-2):t}function renderKey(t,e,r){return t?t.concat(e).map(function(s,a){return s=removeBrackets(s),!r&&a?"["+s+"]":s}).join(r?".":""):e}function isFlatArray(t){return utils$1.isArray(t)&&!t.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function(e){return/^is[A-Z]/.test(e)});function toFormData$1(t,e,r){if(!utils$1.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=utils$1.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,k){return!utils$1.isUndefined(k[S])});const n=r.metaTokens,s=r.visitor||p,a=r.dots,o=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(e);if(!utils$1.isFunction(s))throw new TypeError("visitor must be a function");function d(E){if(E===null)return"";if(utils$1.isDate(E))return E.toISOString();if(!c&&utils$1.isBlob(E))throw new AxiosError$1("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(E)||utils$1.isTypedArray(E)?c&&typeof Blob=="function"?new Blob([E]):Buffer.from(E):E}function p(E,S,k){let C=E;if(E&&!k&&typeof E=="object"){if(utils$1.endsWith(S,"{}"))S=n?S:S.slice(0,-2),E=JSON.stringify(E);else if(utils$1.isArray(E)&&isFlatArray(E)||(utils$1.isFileList(E)||utils$1.endsWith(S,"[]"))&&(C=utils$1.toArray(E)))return S=removeBrackets(S),C.forEach(function(R,j){!(utils$1.isUndefined(R)||R===null)&&e.append(o===!0?renderKey([S],j,a):o===null?S:S+"[]",d(R))}),!1}return isVisitable(E)?!0:(e.append(renderKey(k,S,a),d(E)),!1)}const g=[],y=Object.assign(predicates,{defaultVisitor:p,convertValue:d,isVisitable});function x(E,S){if(!utils$1.isUndefined(E)){if(g.indexOf(E)!==-1)throw Error("Circular reference detected in "+S.join("."));g.push(E),utils$1.forEach(E,function(C,P){(!(utils$1.isUndefined(C)||C===null)&&s.call(e,C,utils$1.isString(P)?P.trim():P,S,y))===!0&&x(C,S?S.concat(P):[P])}),g.pop()}}if(!utils$1.isObject(t))throw new TypeError("data must be an object");return x(t),e}function encode$2(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function AxiosURLSearchParams(t,e){this._pairs=[],t&&toFormData$1(t,this,e)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(e,r){this._pairs.push([e,r])};prototype.toString=function(e){const r=e?function(n){return e.call(this,n,encode$2)}:encode$2;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function encode$1(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(t,e,r){if(!e)return t;const n=r&&r.encode||encode$1;utils$1.isFunction(r)&&(r={serialize:r});const s=r&&r.serialize;let a;if(s?a=s(e,r):a=utils$1.isURLSearchParams(e)?e.toString():new AxiosURLSearchParams(e,r).toString(n),a){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+a}return t}class InterceptorManager{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){utils$1.forEach(this.handlers,function(n){n!==null&&e(n)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$2=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$2={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$2,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",_navigator=typeof navigator=="object"&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||["ReactNative","NativeScript","NS"].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",origin=hasBrowserEnv&&window.location.href||"http://localhost",utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv,navigator:_navigator,origin},Symbol.toStringTag,{value:"Module"})),platform$1={...utils,...platform$2};function toURLEncodedForm(t,e){return toFormData$1(t,new platform$1.classes.URLSearchParams,Object.assign({visitor:function(r,n,s,a){return platform$1.isNode&&utils$1.isBuffer(r)?(this.append(n,r.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},e))}function parsePropPath(t){return utils$1.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function arrayToObject(t){const e={},r=Object.keys(t);let n;const s=r.length;let a;for(n=0;n<s;n++)a=r[n],e[a]=t[a];return e}function formDataToJSON(t){function e(r,n,s,a){let o=r[a++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=a>=r.length;return o=!o&&utils$1.isArray(s)?s.length:o,c?(utils$1.hasOwnProp(s,o)?s[o]=[s[o],n]:s[o]=n,!l):((!s[o]||!utils$1.isObject(s[o]))&&(s[o]=[]),e(r,n,s[o],a)&&utils$1.isArray(s[o])&&(s[o]=arrayToObject(s[o])),!l)}if(utils$1.isFormData(t)&&utils$1.isFunction(t.entries)){const r={};return utils$1.forEachEntry(t,(n,s)=>{e(parsePropPath(n),s,r,0)}),r}return null}function stringifySafely(t,e,r){if(utils$1.isString(t))try{return(e||JSON.parse)(t),utils$1.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const defaults$1={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){const n=r.getContentType()||"",s=n.indexOf("application/json")>-1,a=utils$1.isObject(e);if(a&&utils$1.isHTMLForm(e)&&(e=new FormData(e)),utils$1.isFormData(e))return s?JSON.stringify(formDataToJSON(e)):e;if(utils$1.isArrayBuffer(e)||utils$1.isBuffer(e)||utils$1.isStream(e)||utils$1.isFile(e)||utils$1.isBlob(e)||utils$1.isReadableStream(e))return e;if(utils$1.isArrayBufferView(e))return e.buffer;if(utils$1.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(e,this.formSerializer).toString();if((l=utils$1.isFileList(e))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return toFormData$1(l?{"files[]":e}:e,c&&new c,this.formSerializer)}}return a||s?(r.setContentType("application/json",!1),stringifySafely(e)):e}],transformResponse:[function(e){const r=this.transitional||defaults$1.transitional,n=r&&r.forcedJSONParsing,s=this.responseType==="json";if(utils$1.isResponse(e)||utils$1.isReadableStream(e))return e;if(e&&utils$1.isString(e)&&(n&&!this.responseType||s)){const o=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(l){if(o)throw l.name==="SyntaxError"?AxiosError$1.from(l,AxiosError$1.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform$1.classes.FormData,Blob:platform$1.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],t=>{defaults$1.headers[t]={}});const ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=t=>{const e={};let r,n,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),r=o.substring(0,s).trim().toLowerCase(),n=o.substring(s+1).trim(),!(!r||e[r]&&ignoreDuplicateOf[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},$internals=Symbol("internals");function normalizeHeader(t){return t&&String(t).trim().toLowerCase()}function normalizeValue(t){return t===!1||t==null?t:utils$1.isArray(t)?t.map(normalizeValue):String(t)}function parseTokens(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const isValidHeaderName=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function matchHeaderValue(t,e,r,n,s){if(utils$1.isFunction(n))return n.call(this,e,r);if(s&&(e=r),!!utils$1.isString(e)){if(utils$1.isString(n))return e.indexOf(n)!==-1;if(utils$1.isRegExp(n))return n.test(e)}}function formatHeader(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function buildAccessors(t,e){const r=utils$1.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(s,a,o){return this[n].call(this,e,s,a,o)},configurable:!0})})}let AxiosHeaders$1=class{constructor(e){e&&this.set(e)}set(e,r,n){const s=this;function a(l,c,d){const p=normalizeHeader(c);if(!p)throw new Error("header name must be a non-empty string");const g=utils$1.findKey(s,p);(!g||s[g]===void 0||d===!0||d===void 0&&s[g]!==!1)&&(s[g||c]=normalizeValue(l))}const o=(l,c)=>utils$1.forEach(l,(d,p)=>a(d,p,c));if(utils$1.isPlainObject(e)||e instanceof this.constructor)o(e,r);else if(utils$1.isString(e)&&(e=e.trim())&&!isValidHeaderName(e))o(parseHeaders(e),r);else if(utils$1.isObject(e)&&utils$1.isIterable(e)){let l={},c,d;for(const p of e){if(!utils$1.isArray(p))throw TypeError("Object iterator must return a key-value pair");l[d=p[0]]=(c=l[d])?utils$1.isArray(c)?[...c,p[1]]:[c,p[1]]:p[1]}o(l,r)}else e!=null&&a(r,e,n);return this}get(e,r){if(e=normalizeHeader(e),e){const n=utils$1.findKey(this,e);if(n){const s=this[n];if(!r)return s;if(r===!0)return parseTokens(s);if(utils$1.isFunction(r))return r.call(this,s,n);if(utils$1.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=normalizeHeader(e),e){const n=utils$1.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||matchHeaderValue(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let s=!1;function a(o){if(o=normalizeHeader(o),o){const l=utils$1.findKey(n,o);l&&(!r||matchHeaderValue(n,n[l],l,r))&&(delete n[l],s=!0)}}return utils$1.isArray(e)?e.forEach(a):a(e),s}clear(e){const r=Object.keys(this);let n=r.length,s=!1;for(;n--;){const a=r[n];(!e||matchHeaderValue(this,this[a],a,e,!0))&&(delete this[a],s=!0)}return s}normalize(e){const r=this,n={};return utils$1.forEach(this,(s,a)=>{const o=utils$1.findKey(n,a);if(o){r[o]=normalizeValue(s),delete r[a];return}const l=e?formatHeader(a):String(a).trim();l!==a&&delete r[a],r[l]=normalizeValue(s),n[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return utils$1.forEach(this,(n,s)=>{n!=null&&n!==!1&&(r[s]=e&&utils$1.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(s=>n.set(s)),n}static accessor(e){const n=(this[$internals]=this[$internals]={accessors:{}}).accessors,s=this.prototype;function a(o){const l=normalizeHeader(o);n[l]||(buildAccessors(s,o),n[l]=!0)}return utils$1.isArray(e)?e.forEach(a):a(e),this}};AxiosHeaders$1.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.reduceDescriptors(AxiosHeaders$1.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});utils$1.freezeMethods(AxiosHeaders$1);function transformData(t,e){const r=this||defaults$1,n=e||r,s=AxiosHeaders$1.from(n.headers);let a=n.data;return utils$1.forEach(t,function(l){a=l.call(r,a,s.normalize(),e?e.status:void 0)}),s.normalize(),a}function isCancel$1(t){return!!(t&&t.__CANCEL__)}function CanceledError$1(t,e,r){AxiosError$1.call(this,t??"canceled",AxiosError$1.ERR_CANCELED,e,r),this.name="CanceledError"}utils$1.inherits(CanceledError$1,AxiosError$1,{__CANCEL__:!0});function settle(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new AxiosError$1("Request failed with status code "+r.status,[AxiosError$1.ERR_BAD_REQUEST,AxiosError$1.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function parseProtocol(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function speedometer(t,e){t=t||10;const r=new Array(t),n=new Array(t);let s=0,a=0,o;return e=e!==void 0?e:1e3,function(c){const d=Date.now(),p=n[a];o||(o=d),r[s]=c,n[s]=d;let g=a,y=0;for(;g!==s;)y+=r[g++],g=g%t;if(s=(s+1)%t,s===a&&(a=(a+1)%t),d-o<e)return;const x=p&&d-p;return x?Math.round(y*1e3/x):void 0}}function throttle(t,e){let r=0,n=1e3/e,s,a;const o=(d,p=Date.now())=>{r=p,s=null,a&&(clearTimeout(a),a=null),t.apply(null,d)};return[(...d)=>{const p=Date.now(),g=p-r;g>=n?o(d,p):(s=d,a||(a=setTimeout(()=>{a=null,o(s)},n-g)))},()=>s&&o(s)]}const progressEventReducer=(t,e,r=3)=>{let n=0;const s=speedometer(50,250);return throttle(a=>{const o=a.loaded,l=a.lengthComputable?a.total:void 0,c=o-n,d=s(c),p=o<=l;n=o;const g={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&p?(l-o)/d:void 0,event:a,lengthComputable:l!=null,[e?"download":"upload"]:!0};t(g)},r)},progressEventDecorator=(t,e)=>{const r=t!=null;return[n=>e[0]({lengthComputable:r,total:t,loaded:n}),e[1]]},asyncDecorator=t=>(...e)=>utils$1.asap(()=>t(...e)),isURLSameOrigin=platform$1.hasStandardBrowserEnv?((t,e)=>r=>(r=new URL(r,platform$1.origin),t.protocol===r.protocol&&t.host===r.host&&(e||t.port===r.port)))(new URL(platform$1.origin),platform$1.navigator&&/(msie|trident)/i.test(platform$1.navigator.userAgent)):()=>!0,cookies=platform$1.hasStandardBrowserEnv?{write(t,e,r,n,s,a){const o=[t+"="+encodeURIComponent(e)];utils$1.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),utils$1.isString(n)&&o.push("path="+n),utils$1.isString(s)&&o.push("domain="+s),a===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL$1(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function combineURLs(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function buildFullPath(t,e,r){let n=!isAbsoluteURL$1(e);return t&&(n||r==!1)?combineURLs(t,e):e}const headersToObject=t=>t instanceof AxiosHeaders$1?{...t}:t;function mergeConfig$1(t,e){e=e||{};const r={};function n(d,p,g,y){return utils$1.isPlainObject(d)&&utils$1.isPlainObject(p)?utils$1.merge.call({caseless:y},d,p):utils$1.isPlainObject(p)?utils$1.merge({},p):utils$1.isArray(p)?p.slice():p}function s(d,p,g,y){if(utils$1.isUndefined(p)){if(!utils$1.isUndefined(d))return n(void 0,d,g,y)}else return n(d,p,g,y)}function a(d,p){if(!utils$1.isUndefined(p))return n(void 0,p)}function o(d,p){if(utils$1.isUndefined(p)){if(!utils$1.isUndefined(d))return n(void 0,d)}else return n(void 0,p)}function l(d,p,g){if(g in e)return n(d,p);if(g in t)return n(void 0,d)}const c={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(d,p,g)=>s(headersToObject(d),headersToObject(p),g,!0)};return utils$1.forEach(Object.keys(Object.assign({},t,e)),function(p){const g=c[p]||s,y=g(t[p],e[p],p);utils$1.isUndefined(y)&&g!==l||(r[p]=y)}),r}const resolveConfig=t=>{const e=mergeConfig$1({},t);let{data:r,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:a,headers:o,auth:l}=e;e.headers=o=AxiosHeaders$1.from(o),e.url=buildURL(buildFullPath(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(utils$1.isFormData(r)){if(platform$1.hasStandardBrowserEnv||platform$1.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[d,...p]=c?c.split(";").map(g=>g.trim()).filter(Boolean):[];o.setContentType([d||"multipart/form-data",...p].join("; "))}}if(platform$1.hasStandardBrowserEnv&&(n&&utils$1.isFunction(n)&&(n=n(e)),n||n!==!1&&isURLSameOrigin(e.url))){const d=s&&a&&cookies.read(a);d&&o.set(s,d)}return e},isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(t){return new Promise(function(r,n){const s=resolveConfig(t);let a=s.data;const o=AxiosHeaders$1.from(s.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=s,p,g,y,x,E;function S(){x&&x(),E&&E(),s.cancelToken&&s.cancelToken.unsubscribe(p),s.signal&&s.signal.removeEventListener("abort",p)}let k=new XMLHttpRequest;k.open(s.method.toUpperCase(),s.url,!0),k.timeout=s.timeout;function C(){if(!k)return;const R=AxiosHeaders$1.from("getAllResponseHeaders"in k&&k.getAllResponseHeaders()),I={data:!l||l==="text"||l==="json"?k.responseText:k.response,status:k.status,statusText:k.statusText,headers:R,config:t,request:k};settle(function(L){r(L),S()},function(L){n(L),S()},I),k=null}"onloadend"in k?k.onloadend=C:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(C)},k.onabort=function(){k&&(n(new AxiosError$1("Request aborted",AxiosError$1.ECONNABORTED,t,k)),k=null)},k.onerror=function(){n(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,t,k)),k=null},k.ontimeout=function(){let j=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const I=s.transitional||transitionalDefaults;s.timeoutErrorMessage&&(j=s.timeoutErrorMessage),n(new AxiosError$1(j,I.clarifyTimeoutError?AxiosError$1.ETIMEDOUT:AxiosError$1.ECONNABORTED,t,k)),k=null},a===void 0&&o.setContentType(null),"setRequestHeader"in k&&utils$1.forEach(o.toJSON(),function(j,I){k.setRequestHeader(I,j)}),utils$1.isUndefined(s.withCredentials)||(k.withCredentials=!!s.withCredentials),l&&l!=="json"&&(k.responseType=s.responseType),d&&([y,E]=progressEventReducer(d,!0),k.addEventListener("progress",y)),c&&k.upload&&([g,x]=progressEventReducer(c),k.upload.addEventListener("progress",g),k.upload.addEventListener("loadend",x)),(s.cancelToken||s.signal)&&(p=R=>{k&&(n(!R||R.type?new CanceledError$1(null,t,k):R),k.abort(),k=null)},s.cancelToken&&s.cancelToken.subscribe(p),s.signal&&(s.signal.aborted?p():s.signal.addEventListener("abort",p)));const P=parseProtocol(s.url);if(P&&platform$1.protocols.indexOf(P)===-1){n(new AxiosError$1("Unsupported protocol "+P+":",AxiosError$1.ERR_BAD_REQUEST,t));return}k.send(a||null)})},composeSignals=(t,e)=>{const{length:r}=t=t?t.filter(Boolean):[];if(e||r){let n=new AbortController,s;const a=function(d){if(!s){s=!0,l();const p=d instanceof Error?d:this.reason;n.abort(p instanceof AxiosError$1?p:new CanceledError$1(p instanceof Error?p.message:p))}};let o=e&&setTimeout(()=>{o=null,a(new AxiosError$1(`timeout ${e} of ms exceeded`,AxiosError$1.ETIMEDOUT))},e);const l=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(a):d.removeEventListener("abort",a)}),t=null)};t.forEach(d=>d.addEventListener("abort",a));const{signal:c}=n;return c.unsubscribe=()=>utils$1.asap(l),c}},streamChunk=function*(t,e){let r=t.byteLength;if(r<e){yield t;return}let n=0,s;for(;n<r;)s=n+e,yield t.slice(n,s),n=s},readBytes=async function*(t,e){for await(const r of readStream(t))yield*streamChunk(r,e)},readStream=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:r,value:n}=await e.read();if(r)break;yield n}}finally{await e.cancel()}},trackStream=(t,e,r,n)=>{const s=readBytes(t,e);let a=0,o,l=c=>{o||(o=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:d,value:p}=await s.next();if(d){l(),c.close();return}let g=p.byteLength;if(r){let y=a+=g;r(y)}c.enqueue(new Uint8Array(p))}catch(d){throw l(d),d}},cancel(c){return l(c),s.return()}},{highWaterMark:2})},isFetchSupported=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",isReadableStreamSupported=isFetchSupported&&typeof ReadableStream=="function",encodeText=isFetchSupported&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),test$1=(t,...e)=>{try{return!!t(...e)}catch{return!1}},supportsRequestStream=isReadableStreamSupported&&test$1(()=>{let t=!1;const e=new Request(platform$1.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),DEFAULT_CHUNK_SIZE=64*1024,supportsResponseStream=isReadableStreamSupported&&test$1(()=>utils$1.isReadableStream(new Response("").body)),resolvers={stream:supportsResponseStream&&(t=>t.body)};isFetchSupported&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!resolvers[e]&&(resolvers[e]=utils$1.isFunction(t[e])?r=>r[e]():(r,n)=>{throw new AxiosError$1(`Response type '${e}' is not supported`,AxiosError$1.ERR_NOT_SUPPORT,n)})})})(new Response);const getBodyLength=async t=>{if(t==null)return 0;if(utils$1.isBlob(t))return t.size;if(utils$1.isSpecCompliantForm(t))return(await new Request(platform$1.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(utils$1.isArrayBufferView(t)||utils$1.isArrayBuffer(t))return t.byteLength;if(utils$1.isURLSearchParams(t)&&(t=t+""),utils$1.isString(t))return(await encodeText(t)).byteLength},resolveBodyLength=async(t,e)=>{const r=utils$1.toFiniteNumber(t.getContentLength());return r??getBodyLength(e)},fetchAdapter=isFetchSupported&&(async t=>{let{url:e,method:r,data:n,signal:s,cancelToken:a,timeout:o,onDownloadProgress:l,onUploadProgress:c,responseType:d,headers:p,withCredentials:g="same-origin",fetchOptions:y}=resolveConfig(t);d=d?(d+"").toLowerCase():"text";let x=composeSignals([s,a&&a.toAbortSignal()],o),E;const S=x&&x.unsubscribe&&(()=>{x.unsubscribe()});let k;try{if(c&&supportsRequestStream&&r!=="get"&&r!=="head"&&(k=await resolveBodyLength(p,n))!==0){let I=new Request(e,{method:"POST",body:n,duplex:"half"}),O;if(utils$1.isFormData(n)&&(O=I.headers.get("content-type"))&&p.setContentType(O),I.body){const[L,B]=progressEventDecorator(k,progressEventReducer(asyncDecorator(c)));n=trackStream(I.body,DEFAULT_CHUNK_SIZE,L,B)}}utils$1.isString(g)||(g=g?"include":"omit");const C="credentials"in Request.prototype;E=new Request(e,{...y,signal:x,method:r.toUpperCase(),headers:p.normalize().toJSON(),body:n,duplex:"half",credentials:C?g:void 0});let P=await fetch(E);const R=supportsResponseStream&&(d==="stream"||d==="response");if(supportsResponseStream&&(l||R&&S)){const I={};["status","statusText","headers"].forEach(Z=>{I[Z]=P[Z]});const O=utils$1.toFiniteNumber(P.headers.get("content-length")),[L,B]=l&&progressEventDecorator(O,progressEventReducer(asyncDecorator(l),!0))||[];P=new Response(trackStream(P.body,DEFAULT_CHUNK_SIZE,L,()=>{B&&B(),S&&S()}),I)}d=d||"text";let j=await resolvers[utils$1.findKey(resolvers,d)||"text"](P,t);return!R&&S&&S(),await new Promise((I,O)=>{settle(I,O,{data:j,headers:AxiosHeaders$1.from(P.headers),status:P.status,statusText:P.statusText,config:t,request:E})})}catch(C){throw S&&S(),C&&C.name==="TypeError"&&/Load failed|fetch/i.test(C.message)?Object.assign(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,t,E),{cause:C.cause||C}):AxiosError$1.from(C,C&&C.code,t,E)}}),knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:fetchAdapter};utils$1.forEach(knownAdapters,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const renderReason=t=>`- ${t}`,isResolvedHandle=t=>utils$1.isFunction(t)||t===null||t===!1,adapters={getAdapter:t=>{t=utils$1.isArray(t)?t:[t];const{length:e}=t;let r,n;const s={};for(let a=0;a<e;a++){r=t[a];let o;if(n=r,!isResolvedHandle(r)&&(n=knownAdapters[(o=String(r)).toLowerCase()],n===void 0))throw new AxiosError$1(`Unknown adapter '${o}'`);if(n)break;s[o||"#"+a]=n}if(!n){const a=Object.entries(s).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=e?a.length>1?`since :
`+a.map(renderReason).join(`
`):" "+renderReason(a[0]):"as no adapter specified";throw new AxiosError$1("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:knownAdapters};function throwIfCancellationRequested(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new CanceledError$1(null,t)}function dispatchRequest(t){return throwIfCancellationRequested(t),t.headers=AxiosHeaders$1.from(t.headers),t.data=transformData.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(t.adapter||defaults$1.adapter)(t).then(function(n){return throwIfCancellationRequested(t),n.data=transformData.call(t,t.transformResponse,n),n.headers=AxiosHeaders$1.from(n.headers),n},function(n){return isCancel$1(n)||(throwIfCancellationRequested(t),n&&n.response&&(n.response.data=transformData.call(t,t.transformResponse,n.response),n.response.headers=AxiosHeaders$1.from(n.response.headers))),Promise.reject(n)})}const VERSION$2="1.9.0",validators$1={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{validators$1[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const deprecatedWarnings={};validators$1.transitional=function(e,r,n){function s(a,o){return"[Axios v"+VERSION$2+"] Transitional option '"+a+"'"+o+(n?". "+n:"")}return(a,o,l)=>{if(e===!1)throw new AxiosError$1(s(o," has been removed"+(r?" in "+r:"")),AxiosError$1.ERR_DEPRECATED);return r&&!deprecatedWarnings[o]&&(deprecatedWarnings[o]=!0,console.warn(s(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(a,o,l):!0}};validators$1.spelling=function(e){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function assertOptions(t,e,r){if(typeof t!="object")throw new AxiosError$1("options must be an object",AxiosError$1.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let s=n.length;for(;s-- >0;){const a=n[s],o=e[a];if(o){const l=t[a],c=l===void 0||o(l,a,t);if(c!==!0)throw new AxiosError$1("option "+a+" must be "+c,AxiosError$1.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new AxiosError$1("Unknown option "+a,AxiosError$1.ERR_BAD_OPTION)}}const validator$1={assertOptions,validators:validators$1},validators=validator$1.validators;let Axios$1=class{constructor(e){this.defaults=e||{},this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const a=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?a&&!String(n.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+a):n.stack=a}catch{}}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=mergeConfig$1(this.defaults,r);const{transitional:n,paramsSerializer:s,headers:a}=r;n!==void 0&&validator$1.assertOptions(n,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),s!=null&&(utils$1.isFunction(s)?r.paramsSerializer={serialize:s}:validator$1.assertOptions(s,{encode:validators.function,serialize:validators.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),validator$1.assertOptions(r,{baseUrl:validators.spelling("baseURL"),withXsrfToken:validators.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=a&&utils$1.merge(a.common,a[r.method]);a&&utils$1.forEach(["delete","get","head","post","put","patch","common"],E=>{delete a[E]}),r.headers=AxiosHeaders$1.concat(o,a);const l=[];let c=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(r)===!1||(c=c&&S.synchronous,l.unshift(S.fulfilled,S.rejected))});const d=[];this.interceptors.response.forEach(function(S){d.push(S.fulfilled,S.rejected)});let p,g=0,y;if(!c){const E=[dispatchRequest.bind(this),void 0];for(E.unshift.apply(E,l),E.push.apply(E,d),y=E.length,p=Promise.resolve(r);g<y;)p=p.then(E[g++],E[g++]);return p}y=l.length;let x=r;for(g=0;g<y;){const E=l[g++],S=l[g++];try{x=E(x)}catch(k){S.call(this,k);break}}try{p=dispatchRequest.call(this,x)}catch(E){return Promise.reject(E)}for(g=0,y=d.length;g<y;)p=p.then(d[g++],d[g++]);return p}getUri(e){e=mergeConfig$1(this.defaults,e);const r=buildFullPath(e.baseURL,e.url,e.allowAbsoluteUrls);return buildURL(r,e.params,e.paramsSerializer)}};utils$1.forEach(["delete","get","head","options"],function(e){Axios$1.prototype[e]=function(r,n){return this.request(mergeConfig$1(n||{},{method:e,url:r,data:(n||{}).data}))}});utils$1.forEach(["post","put","patch"],function(e){function r(n){return function(a,o,l){return this.request(mergeConfig$1(l||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:a,data:o}))}}Axios$1.prototype[e]=r(),Axios$1.prototype[e+"Form"]=r(!0)});let CancelToken$1=class Uf{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(a){r=a});const n=this;this.promise.then(s=>{if(!n._listeners)return;let a=n._listeners.length;for(;a-- >0;)n._listeners[a](s);n._listeners=null}),this.promise.then=s=>{let a;const o=new Promise(l=>{n.subscribe(l),a=l}).then(s);return o.cancel=function(){n.unsubscribe(a)},o},e(function(a,o,l){n.reason||(n.reason=new CanceledError$1(a,o,l),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const e=new AbortController,r=n=>{e.abort(n)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new Uf(function(s){e=s}),cancel:e}}};function spread$1(t){return function(r){return t.apply(null,r)}}function isAxiosError$1(t){return utils$1.isObject(t)&&t.isAxiosError===!0}const HttpStatusCode$1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode$1).forEach(([t,e])=>{HttpStatusCode$1[e]=t});function createInstance(t){const e=new Axios$1(t),r=bind(Axios$1.prototype.request,e);return utils$1.extend(r,Axios$1.prototype,e,{allOwnKeys:!0}),utils$1.extend(r,e,null,{allOwnKeys:!0}),r.create=function(s){return createInstance(mergeConfig$1(t,s))},r}const axios=createInstance(defaults$1);axios.Axios=Axios$1;axios.CanceledError=CanceledError$1;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel$1;axios.VERSION=VERSION$2;axios.toFormData=toFormData$1;axios.AxiosError=AxiosError$1;axios.Cancel=axios.CanceledError;axios.all=function(e){return Promise.all(e)};axios.spread=spread$1;axios.isAxiosError=isAxiosError$1;axios.mergeConfig=mergeConfig$1;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=t=>formDataToJSON(utils$1.isHTMLForm(t)?new FormData(t):t);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const{Axios,AxiosError,CanceledError,isCancel,CancelToken,VERSION:VERSION$1,all,Cancel,isAxiosError,spread,toFormData,AxiosHeaders,HttpStatusCode,formToJSON,getAdapter,mergeConfig}=axios,api=axios.create({baseURL:"http://localhost:3000",headers:{"Content-Type":"application/json"},withCredentials:!0,timeout:15e3});api.interceptors.request.use(t=>{const e=localStorage.getItem("token");return e&&(t.headers.Authorization=`Bearer ${e}`),t});api.interceptors.response.use(t=>t,t=>{var e;return((e=t.response)==null?void 0:e.status)===401&&(localStorage.removeItem("token"),window.location.href="/"),Promise.reject(t)});const authService={async login(t){return(await api.post("/api/auth/login",t)).data},async logout(){try{await api.post("/api/auth/logout")}finally{localStorage.removeItem("token")}},async getCurrentUser(){try{return(await api.get("/api/auth/me")).data}catch{return null}}},UserContext=reactExports.createContext(void 0),useUser=()=>{const t=reactExports.useContext(UserContext);if(t===void 0)throw new Error("useUser must be used within a UserProvider");return t},UserProvider=({children:t})=>{const[e,r]=reactExports.useState(null),[n,s]=reactExports.useState(!1),[a,o]=reactExports.useState(null),d={currentUser:e,setCurrentUser:r,isAuthenticated:!!e,login:async(p,g)=>{try{s(!0),o(null);const{user:y,token:x}=await authService.login({email:p,password:g});return localStorage.setItem("token",x),r(y),!0}catch(y){return o(y instanceof Error?y.message:"登入失敗"),!1}finally{s(!1)}},logout:async()=>{try{await authService.logout(),r(null)}catch(p){console.error("Logout failed:",p)}},isLoading:n,error:a};return jsxRuntimeExports.jsx(UserContext.Provider,{value:d,children:t})};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),toCamelCase=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,n)=>n?n.toUpperCase():r.toLowerCase()),toPascalCase=t=>{const e=toCamelCase(t);return e.charAt(0).toUpperCase()+e.slice(1)},mergeClasses=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim(),hasA11yProp=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon=reactExports.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:a,iconNode:o,...l},c)=>reactExports.createElement("svg",{ref:c,...defaultAttributes,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:mergeClasses("lucide",s),...!a&&!hasA11yProp(l)&&{"aria-hidden":"true"},...l},[...o.map(([d,p])=>reactExports.createElement(d,p)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(t,e)=>{const r=reactExports.forwardRef(({className:n,...s},a)=>reactExports.createElement(Icon,{ref:a,iconNode:e,className:mergeClasses(`lucide-${toKebabCase(toPascalCase(t))}`,`lucide-${t}`,n),...s}));return r.displayName=toPascalCase(t),r};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$$=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ArrowLeft=createLucideIcon("arrow-left",__iconNode$$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$_=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ArrowRight=createLucideIcon("arrow-right",__iconNode$_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$Z=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Award=createLucideIcon("award",__iconNode$Z);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$Y=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Bell=createLucideIcon("bell",__iconNode$Y);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$X=[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],BookMarked=createLucideIcon("book-marked",__iconNode$X);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$W=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],BookOpen=createLucideIcon("book-open",__iconNode$W);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$V=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],Book=createLucideIcon("book",__iconNode$V);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$U=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],Bookmark=createLucideIcon("bookmark",__iconNode$U);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$T=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],Brain=createLucideIcon("brain",__iconNode$T);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$S=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],CalendarDays=createLucideIcon("calendar-days",__iconNode$S);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$R=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Calendar$1=createLucideIcon("calendar",__iconNode$R);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$Q=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Check=createLucideIcon("check",__iconNode$Q);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$P=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ChevronDown=createLucideIcon("chevron-down",__iconNode$P);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$O=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],ChevronLeft=createLucideIcon("chevron-left",__iconNode$O);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$N=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ChevronRight=createLucideIcon("chevron-right",__iconNode$N);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$M=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ChevronUp=createLucideIcon("chevron-up",__iconNode$M);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$L=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],CircleAlert=createLucideIcon("circle-alert",__iconNode$L);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$K=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],CircleCheckBig=createLucideIcon("circle-check-big",__iconNode$K);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$J=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],CircleCheck=createLucideIcon("circle-check",__iconNode$J);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$I=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Circle=createLucideIcon("circle",__iconNode$I);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$H=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Clock=createLucideIcon("clock",__iconNode$H);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$G=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Compass=createLucideIcon("compass",__iconNode$G);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$F=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Download=createLucideIcon("download",__iconNode$F);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$E=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],FilePlus=createLucideIcon("file-plus",__iconNode$E);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$D=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],FileText=createLucideIcon("file-text",__iconNode$D);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$C=[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]],Flag=createLucideIcon("flag",__iconNode$C);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$B=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Funnel=createLucideIcon("funnel",__iconNode$B);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$A=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],History=createLucideIcon("history",__iconNode$A);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$z=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],House=createLucideIcon("house",__iconNode$z);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$y=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],KeyRound=createLucideIcon("key-round",__iconNode$y);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$x=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Lightbulb=createLucideIcon("lightbulb",__iconNode$x);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$w=[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]],ListChecks=createLucideIcon("list-checks",__iconNode$w);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$v=[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]],ListTodo=createLucideIcon("list-todo",__iconNode$v);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$u=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],LoaderCircle=createLucideIcon("loader-circle",__iconNode$u);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$t=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Lock=createLucideIcon("lock",__iconNode$t);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$s=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],LogOut=createLucideIcon("log-out",__iconNode$s);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$r=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Mail=createLucideIcon("mail",__iconNode$r);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$q=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],Map$1=createLucideIcon("map",__iconNode$q);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$p=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],Menu$1=createLucideIcon("menu",__iconNode$p);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$o=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],MessageSquare=createLucideIcon("message-square",__iconNode$o);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$n=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],Moon=createLucideIcon("moon",__iconNode$n);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$m=[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]],PartyPopper=createLucideIcon("party-popper",__iconNode$m);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$l=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Pen=createLucideIcon("pen",__iconNode$l);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$k=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Pencil=createLucideIcon("pencil",__iconNode$k);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$j=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Plus=createLucideIcon("plus",__iconNode$j);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$i=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],RotateCcw=createLucideIcon("rotate-ccw",__iconNode$i);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$h=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Search=createLucideIcon("search",__iconNode$h);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$g=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Send=createLucideIcon("send",__iconNode$g);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$f=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Settings=createLucideIcon("settings",__iconNode$f);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$e=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Share2=createLucideIcon("share-2",__iconNode$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$d=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],Sparkles=createLucideIcon("sparkles",__iconNode$d);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$c=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Star=createLucideIcon("star",__iconNode$c);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$b=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Sun=createLucideIcon("sun",__iconNode$b);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$a=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Tag=createLucideIcon("tag",__iconNode$a);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Target=createLucideIcon("target",__iconNode$9);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$8=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Trash2=createLucideIcon("trash-2",__iconNode$8);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$7=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],TrendingUp=createLucideIcon("trending-up",__iconNode$7);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$6=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],TriangleAlert=createLucideIcon("triangle-alert",__iconNode$6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$5=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],Trophy=createLucideIcon("trophy",__iconNode$5);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$4=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Upload=createLucideIcon("upload",__iconNode$4);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],User=createLucideIcon("user",__iconNode$3);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$2=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],X=createLucideIcon("x",__iconNode$2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],ZoomIn=createLucideIcon("zoom-in",__iconNode$1);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],ZoomOut=createLucideIcon("zoom-out",__iconNode),CONTACT_EMAIL="chiawentsai.0807@gmail.com",Login=()=>{const[t,e]=reactExports.useState(""),[r,n]=reactExports.useState(""),[s,a]=reactExports.useState(""),[o,l]=reactExports.useState(!1),{login:c,isAuthenticated:d,currentUser:p}=useUser(),g=useNavigate();React.useEffect(()=>{d&&p&&g(p.role==="student"?"/student":"/mentor")},[d,p,g]);const y=async E=>{E.preventDefault(),l(!0),a("");try{await c(t,r)||a("Invalid email or password")}catch{a("An error occurred. Please try again.")}finally{l(!1)}},x=async E=>{l(!0);try{await c(`demo-${E}@example.com`,"demo-password")}catch{a("Demo login failed. Please try again.")}finally{l(!1)}};return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-100 to-teal-100 dark:from-gray-900 dark:to-indigo-950 flex items-center justify-center p-4 relative",children:jsxRuntimeExports.jsxs("div",{className:"max-w-md w-full space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-center space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-indigo-600 to-teal-600 dark:from-indigo-400 dark:to-teal-400 bg-clip-text text-transparent",children:"探索每個人獨特的學習旅程"}),jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center text-base",children:jsxRuntimeExports.jsx("span",{className:"bg-gradient-to-r from-indigo-500 to-indigo-600 dark:from-indigo-400 dark:to-indigo-500 bg-clip-text text-transparent font-medium",children:"老師和學生的溝通橋樑"})}),jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center text-base",children:jsxRuntimeExports.jsx("span",{className:"bg-gradient-to-r from-teal-500 to-teal-600 dark:from-teal-400 dark:to-teal-500 bg-clip-text text-transparent font-medium",children:"培養自主學習能力"})})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>window.location.href=`mailto:${CONTACT_EMAIL}`,className:"inline-flex items-center px-6 py-3 text-base font-medium rounded-full shadow-lg text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 transition-colors",children:[jsxRuntimeExports.jsx(Mail,{className:"h-5 w-5 mr-2"}),"加入我們成為早期使用者"]}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["歡迎來信了解更多：",CONTACT_EMAIL]})]})]}),jsxRuntimeExports.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden",children:jsxRuntimeExports.jsxs("div",{className:"p-6 sm:p-8",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-8",children:[jsxRuntimeExports.jsx("div",{className:"mx-auto bg-indigo-100 dark:bg-indigo-900 rounded-full w-16 h-16 flex items-center justify-center mb-4",children:jsxRuntimeExports.jsx(BookOpen,{size:32,className:"text-indigo-600 dark:text-indigo-400"})}),jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"學習進度追蹤"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:"登入以管理學習進度和目標"})]}),s&&jsxRuntimeExports.jsx("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded-lg text-sm",children:s}),jsxRuntimeExports.jsxs("form",{onSubmit:y,className:"space-y-5",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"電子郵件"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:jsxRuntimeExports.jsx(User,{size:18,className:"text-gray-400"})}),jsxRuntimeExports.jsx("input",{id:"email",type:"email",value:t,onChange:E=>e(E.target.value),autoComplete:"email",className:"block w-full pl-10 pr-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"your@email.com",required:!0})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"密碼"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:jsxRuntimeExports.jsx(KeyRound,{size:18,className:"text-gray-400"})}),jsxRuntimeExports.jsx("input",{id:"password",type:"password",value:r,onChange:E=>n(E.target.value),autoComplete:"current-password",className:"block w-full pl-10 pr-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"••••••••",required:!0})]})]}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:o,className:"w-full flex justify-center py-2.5 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:o?"登入中...":"登入"})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center",children:jsxRuntimeExports.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),jsxRuntimeExports.jsx("div",{className:"relative flex justify-center text-sm",children:jsxRuntimeExports.jsx("span",{className:"px-2 bg-white dark:bg-gray-800 text-gray-500 dark:text-gray-400",children:"快速體驗"})})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-3",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>x("student"),disabled:o,className:"py-2.5 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"學生示範"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>x("mentor"),disabled:o,className:"py-2.5 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"老師示範"})]})]})]})})]})})},Sidebar=({isOpen:t,setIsOpen:e,isCollapsed:r,setIsCollapsed:n})=>{const{currentUser:s,logout:a}=useUser(),o=s==null?void 0:s.role,c=o?{student:[{name:"時間表",path:"/student/schedule",icon:jsxRuntimeExports.jsx(CalendarDays,{size:20})},{name:"儀表板",path:"/student",icon:jsxRuntimeExports.jsx(BookOpen,{size:20})},{name:"學習規劃",path:"/student/planning",icon:jsxRuntimeExports.jsx(Target,{size:20})},{name:"學習日誌",path:"/student/journal",icon:jsxRuntimeExports.jsx(BookMarked,{size:20})}],mentor:[{name:"儀表板",path:"/mentor",icon:jsxRuntimeExports.jsx(BookOpen,{size:20})},{name:"任務管理",path:"/mentor/tasks",icon:jsxRuntimeExports.jsx(ListTodo,{size:20})},{name:"課程規劃",path:"/mentor/curriculum",icon:jsxRuntimeExports.jsx(Map$1,{size:20})},{name:"任務規劃",path:"/mentor/task-planner",icon:jsxRuntimeExports.jsx(Calendar$1,{size:20})}]}[o]:[],d=()=>e(!t),p=()=>n(!r);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[t&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-20 lg:hidden",onClick:d}),jsxRuntimeExports.jsx("button",{className:"fixed top-4 left-4 z-30 lg:hidden bg-indigo-600 text-white p-2 rounded-md",onClick:d,children:t?jsxRuntimeExports.jsx(X,{size:20}):jsxRuntimeExports.jsx(Menu$1,{size:20})}),jsxRuntimeExports.jsxs("div",{className:`fixed lg:relative bg-white dark:bg-gray-900 transform transition-all duration-300 ease-in-out ${t?"translate-x-0":"-translate-x-full lg:translate-x-0"} ${r?"w-16":"w-64"} h-full z-30 shadow-lg`,children:[jsxRuntimeExports.jsx("button",{onClick:p,className:"hidden lg:flex absolute -right-3 top-1/2 transform -translate-y-1/2 w-6 h-6 bg-indigo-600 text-white items-center justify-center rounded-full shadow-lg hover:bg-indigo-700",children:r?jsxRuntimeExports.jsx(ChevronRight,{size:14}):jsxRuntimeExports.jsx(ChevronLeft,{size:14})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col h-full",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsx("h1",{className:`text-xl font-bold text-indigo-600 dark:text-indigo-400 truncate ${r?"text-center":""}`,children:r?"學習":"學習進度追蹤"}),!r&&jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:o==="student"?"學生版":"指導老師版"})]}),jsxRuntimeExports.jsx("nav",{className:"flex-1 overflow-y-auto py-4",children:jsxRuntimeExports.jsx("ul",{className:"space-y-1 px-2",children:c.map(g=>jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsxs(NavLink,{to:g.path,className:({isActive:y})=>`flex items-center px-4 py-2.5 text-sm rounded-lg transition-colors ${y?"bg-indigo-100 text-indigo-700 dark:bg-indigo-900 dark:text-indigo-300 font-medium":"text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800"}`,onClick:()=>e(!1),title:r?g.name:void 0,children:[jsxRuntimeExports.jsx("span",{className:r?"mx-auto":"mr-3",children:g.icon}),!r&&g.name]})},g.path))})}),jsxRuntimeExports.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[(s==null?void 0:s.avatar)&&jsxRuntimeExports.jsx("img",{src:s.avatar,alt:s.name,className:`w-10 h-10 rounded-full object-cover ${r?"mx-auto":"mr-3"}`}),!r&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate",children:s==null?void 0:s.name}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:o==="student"?"學生":"指導老師"})]}),jsxRuntimeExports.jsx("button",{onClick:a,className:"p-1.5 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",title:"登出",children:jsxRuntimeExports.jsx(LogOut,{size:18})})]})]})})]})]})]})},Header=({title:t})=>{const{currentUser:e}=useUser(),[r,n]=React.useState(!1),s=()=>{n(!r),document.documentElement.classList.toggle("dark")};return jsxRuntimeExports.jsxs("header",{className:"bg-white dark:bg-gray-900 shadow-sm border-b border-gray-200 dark:border-gray-800 h-16 flex items-center px-4 lg:px-6",children:[jsxRuntimeExports.jsx("div",{className:"flex-1 min-w-0",children:jsxRuntimeExports.jsx("h1",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100 truncate",children:t})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsx("button",{className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",onClick:s,children:r?jsxRuntimeExports.jsx(Sun,{size:20}):jsxRuntimeExports.jsx(Moon,{size:20})}),jsxRuntimeExports.jsxs("button",{className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors relative",children:[jsxRuntimeExports.jsx(Bell,{size:20}),jsxRuntimeExports.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]}),jsxRuntimeExports.jsxs("div",{className:"hidden sm:flex items-center",children:[(e==null?void 0:e.avatar)&&jsxRuntimeExports.jsx("img",{src:e.avatar,alt:e.name,className:"w-8 h-8 rounded-full object-cover"}),jsxRuntimeExports.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:e==null?void 0:e.name})]})]})]})},PageLayout=({children:t,title:e})=>{const[r,n]=reactExports.useState(!1),[s,a]=reactExports.useState(!1),{isAuthenticated:o}=useUser(),l=useNavigate();return React.useEffect(()=>{o||l("/login")},[o,l]),o?jsxRuntimeExports.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-950",children:[jsxRuntimeExports.jsx(Sidebar,{isOpen:r,setIsOpen:n,isCollapsed:s,setIsCollapsed:a}),jsxRuntimeExports.jsxs("div",{className:"flex-1 flex flex-col",children:[jsxRuntimeExports.jsx(Header,{title:e,toggleSidebar:()=>n(!r)}),jsxRuntimeExports.jsx("main",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:t})]})]}):null},ProgressChart=({data:t,title:e="學習進度"})=>{const r=Math.round(t.reduce((n,s)=>n+s.progress,0)/t.length);return jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:e}),jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-700 dark:text-gray-300 mr-2 font-medium",children:"總進度："}),jsxRuntimeExports.jsxs("span",{className:"text-lg font-bold text-indigo-600 dark:text-indigo-400",children:[r,"%"]})]}),jsxRuntimeExports.jsx("div",{className:"w-full h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden mb-6",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-indigo-500 dark:bg-indigo-400 transition-all duration-500",style:{width:`${r}%`}})})]}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:t.map((n,s)=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between mb-1",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:n.subject}),jsxRuntimeExports.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[n.progress,"%"]})]}),jsxRuntimeExports.jsx("div",{className:"w-full h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"h-full transition-all duration-500",style:{width:`${n.progress}%`,backgroundColor:n.color}})})]},s))})]})},todayEvents=[{id:"1",title:"國語課",date:new Date,startTime:"10:30",endTime:"12:00",category:"國語",color:"indigo"},{id:"2",title:"自然科學",date:new Date,startTime:"13:00",endTime:"14:30",category:"自然",color:"green"}],upcomingTasks$1=[{id:"1",title:"寫一篇遊記",description:"選擇一個最近去過的地方，寫一篇遊記",dueDate:new Date(new Date().setDate(new Date().getDate()+1)),completed:!1,subject:"國語",priority:"high",assignedBy:"陳老師"},{id:"2",title:"水三態的科學實驗",description:"準備水三態實驗的報告",dueDate:new Date(new Date().setDate(new Date().getDate()+3)),completed:!1,subject:"自然",priority:"medium",assignedBy:"林老師"},{id:"3",title:"閱讀課外讀物 - 科學家",description:"閱讀科學家的傳記並做筆記",dueDate:new Date,completed:!0,subject:"自然",priority:"low",assignedBy:"林老師"}],progressData$1=[{subject:"國語",progress:38,color:"#4F46E5"},{subject:"數學",progress:55,color:"#0EA5E9"},{subject:"英語",progress:47,color:"#F97316"},{subject:"自然",progress:62,color:"#10B981"},{subject:"社會",progress:41,color:"#8B5CF6"}],StudentDashboard=()=>{const[t,e]=React.useState(upcomingTasks$1),r=n=>{e(t.map(s=>s.id===n?{...s,completed:!s.completed}:s))};return jsxRuntimeExports.jsx(PageLayout,{title:"學生儀表板",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white mb-4",children:"今日學習規劃"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:todayEvents.map((n,s)=>jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 border-l-4",style:{borderLeftColor:n.color==="indigo"?"#4F46E5":"#10B981"},children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start",children:[jsxRuntimeExports.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:n.title}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[n.startTime," - ",n.endTime]})]}),jsxRuntimeExports.jsx("div",{className:"mt-4 space-y-3",children:s===0?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"flex items-center",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(Check,{size:16,className:"text-green-500 mr-2"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300 line-through",children:"課文閱讀"})]})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"h-4 w-4 border border-gray-300 dark:border-gray-600 rounded mr-2"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"寫一篇遊記 (1/3)"})]}),jsxRuntimeExports.jsxs("div",{className:"mt-3 text-xs text-gray-500 dark:text-gray-400",children:[jsxRuntimeExports.jsx("strong",{children:"進度規劃:"})," 第六課, 第七課"]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(Check,{size:16,className:"text-green-500 mr-2"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300 line-through",children:"閱讀課外讀物 - 科學家"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"h-4 w-4 border border-gray-300 dark:border-gray-600 rounded mr-2"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"水三態的科學實驗"})]}),jsxRuntimeExports.jsxs("div",{className:"mt-3 text-xs text-gray-500 dark:text-gray-400",children:[jsxRuntimeExports.jsx("strong",{children:"進度紀錄:"})," 《居禮夫人傳》, 已閱讀 60 頁"]})]})})]},s))})]}),jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"待完成任務"}),jsxRuntimeExports.jsx("button",{className:"text-sm text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 font-medium",children:"查看全部"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow divide-y divide-gray-200 dark:divide-gray-700",children:[t.filter(n=>!n.completed).slice(0,3).map((n,s)=>jsxRuntimeExports.jsxs("div",{className:"p-4 flex items-start",children:[jsxRuntimeExports.jsx("button",{className:"mt-0.5 mr-3 focus:outline-none",onClick:()=>r(n.id),children:jsxRuntimeExports.jsx("div",{className:"h-5 w-5 border-2 border-gray-300 dark:border-gray-600 rounded-full"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:n.title}),jsxRuntimeExports.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${n.priority==="high"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":n.priority==="medium"?"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"}`,children:n.priority==="high"?"優先":n.priority==="medium"?"一般":"次要"})]}),n.description&&jsxRuntimeExports.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:n.description}),jsxRuntimeExports.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[jsxRuntimeExports.jsxs("span",{className:"inline-flex items-center text-xs font-medium text-indigo-600 dark:text-indigo-400",children:[jsxRuntimeExports.jsx(BookOpen,{size:14,className:"mr-1"}),n.subject]}),jsxRuntimeExports.jsxs("span",{className:"inline-flex items-center text-xs font-medium text-gray-500 dark:text-gray-400",children:[jsxRuntimeExports.jsx(Clock,{size:14,className:"mr-1"}),"到期: ",new Intl.DateTimeFormat("zh-TW",{month:"short",day:"numeric"}).format(n.dueDate)]})]})]})]},s)),t.filter(n=>!n.completed).length===0&&jsxRuntimeExports.jsx("div",{className:"p-6 text-center text-gray-500 dark:text-gray-400",children:"沒有待完成的任務"})]})]}),jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsx("div",{className:"flex justify-between items-center mb-4",children:jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"最近完成"})}),jsxRuntimeExports.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:jsxRuntimeExports.jsx("div",{className:"space-y-4",children:t.filter(n=>n.completed).map((n,s)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"h-8 w-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center mr-3",children:jsxRuntimeExports.jsx(Check,{size:16,className:"text-green-600 dark:text-green-400"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:n.title}),jsxRuntimeExports.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[n.subject," · 今天完成"]})]})]},s))})})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"學習進度"}),jsxRuntimeExports.jsx("button",{className:"text-sm text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 font-medium",children:"詳細資料"})]}),jsxRuntimeExports.jsx(ProgressChart,{data:progressData$1})]}),jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"本週課表"}),jsxRuntimeExports.jsx("button",{className:"text-sm text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 font-medium",children:"完整課表"})]}),jsxRuntimeExports.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:jsxRuntimeExports.jsx("div",{className:"space-y-3",children:["一","二","三","四","五"].map((n,s)=>jsxRuntimeExports.jsxs("div",{className:"flex items-start",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 flex items-center justify-center mr-3",children:jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:n})}),jsxRuntimeExports.jsx("div",{className:"flex-1",children:s===0?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:"國語、數學"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500",children:"10:30 - 15:00"})]})}):s===2?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:"自然、社會"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500",children:"13:00 - 16:30"})]})}):s===4?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:"英語、藝術"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500",children:"10:00 - 15:00"})]})}):jsxRuntimeExports.jsx("p",{className:"text-gray-500 dark:text-gray-400 italic",children:"自主學習日"})})]},s))})})]}),jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"學習筆記"}),jsxRuntimeExports.jsx("button",{className:"text-sm text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 font-medium",children:"所有筆記"})]}),jsxRuntimeExports.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"今日反思"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"今天"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"今天閱讀了居禮夫人的生平，她的堅持和毅力讓我很受啟發。在遇到困難時也要像她一樣堅持..."}),jsxRuntimeExports.jsxs("div",{className:"mt-2 flex items-center",children:[jsxRuntimeExports.jsx(FileText,{size:14,className:"text-gray-400 mr-1"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"自然科學"})]})]}),jsxRuntimeExports.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"遊記初稿"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"昨天"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"上週去了海邊，我觀察到許多有趣的海洋生物。寫作過程中我發現可以加入更多細節..."}),jsxRuntimeExports.jsxs("div",{className:"mt-2 flex items-center",children:[jsxRuntimeExports.jsx(FileText,{size:14,className:"text-gray-400 mr-1"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"國語"})]})]})]})})]})]})]})})},colors={indigo:{100:"bg-indigo-100 dark:bg-indigo-900/30",500:"bg-indigo-500 dark:bg-indigo-500",600:"text-indigo-600 dark:text-indigo-400",border:"#4F46E5"},green:{100:"bg-green-100 dark:bg-green-900/30",500:"bg-green-500 dark:bg-green-500",600:"text-green-600 dark:text-green-400",border:"#16A34A"},orange:{100:"bg-orange-100 dark:bg-orange-900/30",500:"bg-orange-500 dark:bg-orange-500",600:"text-orange-600 dark:text-orange-400",border:"#EA580C"},purple:{100:"bg-purple-100 dark:bg-purple-900/30",500:"bg-purple-500 dark:bg-purple-500",600:"text-purple-600 dark:text-purple-400",border:"#9333EA"}},card={base:"bg-white dark:bg-gray-800 rounded-lg shadow",border:"border-l-4"},text={label:"text-sm font-medium text-gray-500 dark:text-gray-400",value:"text-2xl font-semibold text-gray-900 dark:text-white",title:"text-xl font-semibold text-gray-900 dark:text-white",link:"text-sm text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 font-medium",name:"font-medium text-gray-900 dark:text-white",description:"text-sm text-gray-600 dark:text-gray-300",meta:"text-sm text-gray-500 dark:text-gray-400",activity:"text-sm font-medium text-gray-900 dark:text-white"},iconContainer={base:"flex-shrink-0 p-3 rounded-lg"},layout$1={section:{header:"flex items-center justify-between mb-4",content:"space-y-6",wrapper:"space-y-6"},icon:{wrapper:"mr-4 flex-shrink-0",circle:"h-8 w-8 rounded-full bg-indigo-100 dark:bg-indigo-900/30 flex items-center justify-center",base:"text-indigo-600 dark:text-indigo-400"},activity:{container:"flex"},grid:{main:"grid grid-cols-1 xl:grid-cols-3 gap-6",sidebar:"xl:col-span-2 space-y-6"},card:{base:"bg-white dark:bg-gray-800 rounded-lg shadow",padding:"p-4",border:"border border-gray-200 dark:border-gray-700"},table:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",tableHeader:"bg-gray-50 dark:bg-gray-800/50",tableHeaderCell:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",tableRow:"hover:bg-gray-50 dark:hover:bg-gray-800/50",tableCell:"px-6 py-4 whitespace-nowrap"},subjects={colors:{國語:{bg:"bg-blue-100 dark:bg-blue-900/30",text:"text-blue-800 dark:text-blue-300",accent:"#3B82F6"},英語:{bg:"bg-cyan-100 dark:bg-cyan-900/30",text:"text-cyan-800 dark:text-cyan-300",accent:"#06B6D4"},數學:{bg:"bg-orange-100 dark:bg-orange-900/30",text:"text-orange-800 dark:text-orange-300",accent:"#F97316"},自然:{bg:"bg-emerald-100 dark:bg-emerald-900/30",text:"text-emerald-800 dark:text-emerald-300",accent:"#10B981"},社會:{bg:"bg-amber-100 dark:bg-amber-900/30",text:"text-amber-800 dark:text-amber-300",accent:"#F59E0B"},藝術:{bg:"bg-fuchsia-100 dark:bg-fuchsia-900/30",text:"text-fuchsia-800 dark:text-fuchsia-300",accent:"#D946EF"},體育:{bg:"bg-rose-100 dark:bg-rose-900/30",text:"text-rose-800 dark:text-rose-300",accent:"#E11D48"},自訂:{bg:"bg-violet-100 dark:bg-violet-900/30",text:"text-violet-800 dark:text-violet-300",accent:"#8B5CF6"}},getSubjectStyle:t=>{const e={bg:"bg-gray-100 dark:bg-gray-800",text:"text-gray-600 dark:text-gray-400",accent:"#6B7280"};return subjects.colors[t]||e}},taskStyles={title:"text-sm font-medium text-gray-900 dark:text-white",description:"text-sm text-gray-600 dark:text-gray-300 break-words",status:{completed:"inline-flex px-2 py-0.5 rounded-full text-xs font-medium text-gray-600 dark:text-gray-400",in_progress:"inline-flex px-2 py-0.5 rounded-full text-xs font-medium text-gray-600 dark:text-gray-400",waiting_feedback:"inline-flex px-2 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300",pending:"inline-flex px-2 py-0.5 rounded-full text-xs font-medium text-gray-600 dark:text-gray-400",overdue:"inline-flex px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"},badge:{feedback:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300"}},statsConfig=[{key:"studentCount",icon:User,label:"學生總數",color:"indigo"},{key:"completedTasks",icon:CircleCheckBig,label:"已完成任務",color:"green"},{key:"pendingTasks",icon:Clock,label:"待完成任務",color:"orange"},{key:"weeklyPlans",icon:Calendar$1,label:"本週計畫",color:"purple"}],StatsBlock=({data:t})=>jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:statsConfig.map(e=>jsxRuntimeExports.jsx("div",{className:`${card.base} ${card.border} p-4`,style:{borderLeftColor:colors[e.color].border},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:`${iconContainer.base} ${colors[e.color][100]}`,children:jsxRuntimeExports.jsx(e.icon,{className:`h-6 w-6 ${colors[e.color][600]}`})}),jsxRuntimeExports.jsxs("div",{className:"ml-4",children:[jsxRuntimeExports.jsx("p",{className:text.label,children:e.label}),jsxRuntimeExports.jsx("p",{className:text.value,children:t[e.key]})]})]})},e.key))}),formatDate=t=>{const e=new Date;e.setHours(0,0,0,0);const r=new Date(t);r.setHours(0,0,0,0);const n=r.getTime()-e.getTime(),s=Math.ceil(n/(1e3*60*60*24));if(s===0)return"今天";if(s===1)return"明天";if(s===-1)return"昨天";const a=new Date(e);a.setDate(e.getDate()-e.getDay());const o=new Date(a);return o.setDate(a.getDate()+6),r>=a&&r<=o?["週日","週一","週二","週三","週四","週五","週六"][r.getDay()]:`${r.getMonth()+1}/${r.getDate()}`},getDueDateStyle=(t,e)=>{if(e==="completed"||e==="waiting_feedback")return"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium text-gray-600 dark:text-gray-400";const r=new Date;r.setHours(0,0,0,0);const n=new Date(t);n.setHours(0,0,0,0);const s=n.getTime()-r.getTime();return Math.ceil(s/(1e3*60*60*24))<0?"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium text-gray-600 dark:text-gray-400"},StudentProgressTable=({students:t,onViewDetails:e})=>{const[r,n]=reactExports.useState(new Set),s=l=>{const c=new Set(r);c.has(l)?c.delete(l):c.add(l),n(c)},a=l=>{switch(l){case"completed":return"已完成";case"in_progress":return"進行中";case"waiting_feedback":return"待回饋";case"overdue":return"已逾期";default:return"未開始"}},o=l=>{var d;let c=0;return(d=l.weeklyPlans)==null||d.forEach(p=>{c+=p.tasks.filter(g=>g.status==="overdue").length}),c};return jsxRuntimeExports.jsx("div",{className:`${layout$1.card.base} ${layout$1.card.border}`,children:jsxRuntimeExports.jsx("div",{className:layout$1.card.padding,children:jsxRuntimeExports.jsxs("table",{className:layout$1.table,children:[jsxRuntimeExports.jsx("thead",{className:layout$1.tableHeader,children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:`${layout$1.tableHeaderCell} w-3/12`,children:"學生"}),jsxRuntimeExports.jsx("th",{className:`${layout$1.tableHeaderCell} w-2/12`,children:"進度"}),jsxRuntimeExports.jsx("th",{className:`${layout$1.tableHeaderCell} w-2/12`,children:"關注項目"}),jsxRuntimeExports.jsx("th",{className:`${layout$1.tableHeaderCell} w-2/12`,children:"待回饋"}),jsxRuntimeExports.jsx("th",{className:`${layout$1.tableHeaderCell} w-2/12`,children:"最後活動"}),jsxRuntimeExports.jsx("th",{className:`${layout$1.tableHeaderCell} w-1/12`,children:"操作"})]})}),jsxRuntimeExports.jsx("tbody",{children:t.map(l=>jsxRuntimeExports.jsxs(React.Fragment,{children:[jsxRuntimeExports.jsxs("tr",{className:layout$1.tableRow,children:[jsxRuntimeExports.jsx("td",{className:layout$1.tableCell,children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("img",{src:l.avatar,alt:l.name,className:"w-8 h-8 rounded-full mr-3"}),jsxRuntimeExports.jsx("span",{className:text.name,children:l.name})]})}),jsxRuntimeExports.jsx("td",{className:layout$1.tableCell,children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700 mr-2",children:jsxRuntimeExports.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full dark:bg-blue-500",style:{width:`${l.progress}%`}})}),jsxRuntimeExports.jsxs("span",{className:text.meta,children:[l.progress,"%"]})]})}),jsxRuntimeExports.jsx("td",{className:layout$1.tableCell,children:o(l)>0?jsxRuntimeExports.jsx("span",{className:taskStyles.status.overdue,children:o(l)}):jsxRuntimeExports.jsx("span",{className:text.meta,children:"正常"})}),jsxRuntimeExports.jsx("td",{className:layout$1.tableCell,children:jsxRuntimeExports.jsx("span",{className:taskStyles.badge.feedback,children:l.pendingFeedback})}),jsxRuntimeExports.jsx("td",{className:layout$1.tableCell,children:jsxRuntimeExports.jsx("span",{className:text.meta,children:l.lastActive})}),jsxRuntimeExports.jsx("td",{className:`${layout$1.tableCell} text-center`,children:jsxRuntimeExports.jsx("button",{onClick:()=>s(l.id),className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:r.has(l.id)?jsxRuntimeExports.jsx(ChevronUp,{size:20}):jsxRuntimeExports.jsx(ChevronDown,{size:20})})})]}),r.has(l.id)&&jsxRuntimeExports.jsx("tr",{children:jsxRuntimeExports.jsx("td",{colSpan:6,className:"p-0",children:jsxRuntimeExports.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800/50",children:l.weeklyPlans&&l.weeklyPlans.length>0?jsxRuntimeExports.jsx("div",{className:layout$1.section.content,children:l.weeklyPlans.map((c,d)=>jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("h3",{className:text.name,children:c.curriculum}),jsxRuntimeExports.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${subjects.getSubjectStyle(c.subject).bg} ${subjects.getSubjectStyle(c.subject).text}`,children:[jsxRuntimeExports.jsx(BookOpen,{size:14,className:"mr-1"}),c.subject]})]})}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:c.tasks.map((p,g)=>jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-12 items-center bg-white dark:bg-gray-700/50 px-6 py-3 rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"col-span-3",children:jsxRuntimeExports.jsx("h3",{className:taskStyles.title,children:p.title})}),jsxRuntimeExports.jsx("div",{className:"col-span-5",children:jsxRuntimeExports.jsx("p",{className:taskStyles.description,children:p.description})}),jsxRuntimeExports.jsx("div",{className:"col-span-2 text-center",children:jsxRuntimeExports.jsxs("span",{className:getDueDateStyle(p.endDate,p.status),children:[jsxRuntimeExports.jsx(Clock,{size:14,className:"mr-1"}),formatDate(p.endDate)]})}),jsxRuntimeExports.jsx("div",{className:"col-span-2 text-right",children:jsxRuntimeExports.jsx("span",{className:taskStyles.status[p.status],children:a(p.status)})})]},`${l.id}-plan-${d}-task-${g}`))})]},`${l.id}-plan-${d}`))}):jsxRuntimeExports.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:"本週沒有安排的任務"})})})})]},l.id))})]})})})},AttentionBlock=({items:t})=>{const e=r=>({error:{border:"border-red-500",bg:"bg-red-50 dark:bg-red-900/10",icon:"text-red-400",title:"text-red-800 dark:text-red-300",description:"text-red-700 dark:text-red-200"},warning:{border:"border-orange-500",bg:"bg-orange-50 dark:bg-orange-900/10",icon:"text-orange-400",title:"text-orange-800 dark:text-orange-300",description:"text-orange-700 dark:text-orange-200"},success:{border:"border-blue-500",bg:"bg-blue-50 dark:bg-blue-900/10",icon:"text-blue-400",title:"text-blue-800 dark:text-blue-300",description:"text-blue-700 dark:text-blue-200"}})[r];return jsxRuntimeExports.jsx("div",{className:`${card.base} p-4`,children:jsxRuntimeExports.jsx("div",{className:"space-y-4",children:t.map((r,n)=>{const s=e(r.type);return jsxRuntimeExports.jsx("div",{className:`p-3 border-l-4 ${s.border} ${s.bg} rounded-r-lg`,children:jsxRuntimeExports.jsxs("div",{className:"flex",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:r.type==="success"?jsxRuntimeExports.jsx(TrendingUp,{className:`h-5 w-5 ${s.icon}`,"aria-hidden":"true"}):jsxRuntimeExports.jsx(TriangleAlert,{className:`h-5 w-5 ${s.icon}`,"aria-hidden":"true"})}),jsxRuntimeExports.jsxs("div",{className:"ml-3",children:[jsxRuntimeExports.jsx("h3",{className:`text-sm font-medium ${s.title}`,children:r.title}),jsxRuntimeExports.jsx("div",{className:`mt-1 text-sm ${s.description}`,children:jsxRuntimeExports.jsx("p",{children:r.description})})]})]})},n)})})})},TasksBlock=({tasks:t})=>jsxRuntimeExports.jsx("div",{className:`${card.base} p-4`,children:jsxRuntimeExports.jsx("div",{className:"space-y-4",children:t.map(e=>jsxRuntimeExports.jsxs("div",{className:"p-3 border border-gray-200 dark:border-gray-700 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:e.title}),jsxRuntimeExports.jsx("span",{className:getDueDateStyle(e.endDate,e.status),children:formatDate(e.endDate)})]}),jsxRuntimeExports.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:e.students.map((r,n)=>jsxRuntimeExports.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300",children:r},n))})]},e.id))})}),RecentActivitiesBlock=({activities:t})=>jsxRuntimeExports.jsx("div",{className:`${card.base} p-4`,children:jsxRuntimeExports.jsx("div",{className:layout$1.section.content,children:t.map(e=>jsxRuntimeExports.jsxs("div",{className:layout$1.activity.container,children:[jsxRuntimeExports.jsx("div",{className:layout$1.icon.wrapper,children:jsxRuntimeExports.jsx("div",{className:layout$1.icon.circle,children:jsxRuntimeExports.jsx(Book,{size:16,className:layout$1.icon.base})})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:text.activity,children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:e.student})," ",e.activity]}),jsxRuntimeExports.jsx("p",{className:text.description,children:e.detail}),jsxRuntimeExports.jsx("p",{className:`mt-1 ${text.meta}`,children:e.time})]})]},e.id))})}),today$1=new Date,yesterday$1=new Date(today$1);yesterday$1.setDate(today$1.getDate()-1);const twoDaysAgo=new Date(today$1);twoDaysAgo.setDate(today$1.getDate()-2);const tomorrow$1=new Date(today$1);tomorrow$1.setDate(today$1.getDate()+1);const dayAfterTomorrow$1=new Date(today$1);dayAfterTomorrow$1.setDate(today$1.getDate()+2);const mockStudents=[{id:"1",name:"王小明",progress:75,subjects:[{name:"國語",progress:80},{name:"數學",progress:70},{name:"英語",progress:75}],avatar:"https://images.pexels.com/photos/2379004/pexels-photo-2379004.jpeg?auto=compress&cs=tinysrgb&w=150",completedTasks:3,totalTasks:5,lastActive:"今天",pendingFeedback:2,weeklyPlans:[{subject:"國語",curriculum:"第六課 - 生活中的科學",tasks:[{id:"t1",title:"寫一篇遊記",description:"選擇一個最近去過的地方，寫一篇遊記",startDate:today$1,endDate:dayAfterTomorrow$1,status:"in_progress",progress:30},{id:"t2",title:"課文朗讀練習",description:"練習課文朗讀並錄音",startDate:twoDaysAgo,endDate:twoDaysAgo,status:"in_progress",progress:50},{id:"t3",title:"詞語練習",description:"完成詞語練習作業",startDate:yesterday$1,endDate:today$1,status:"pending",progress:0}]},{subject:"自然",curriculum:"水的三態變化",tasks:[{id:"t6",title:"實驗報告",description:"完成水的三態變化實驗報告",startDate:yesterday$1,endDate:tomorrow$1,status:"waiting_feedback",progress:100},{id:"t7",title:"課堂練習",description:"完成課本練習題",startDate:today$1,endDate:today$1,status:"waiting_feedback",progress:100}]}]},{id:"2",name:"陳小美",progress:62,subjects:[{name:"國語",progress:65},{name:"數學",progress:55},{name:"英語",progress:72}],avatar:"https://images.pexels.com/photos/774909/pexels-photo-774909.jpeg?auto=compress&cs=tinysrgb&w=150",completedTasks:0,totalTasks:2,lastActive:"昨天",pendingFeedback:1,weeklyPlans:[{subject:"數學",curriculum:"分數的加減",tasks:[{id:"t4",title:"分數加減練習",description:"完成課本練習題",startDate:today$1,endDate:tomorrow$1,status:"in_progress",progress:50},{id:"t5",title:"情境應用題",description:"完成應用題作業",startDate:yesterday$1,endDate:today$1,status:"pending",progress:0}]}]},{id:"3",name:"林大文",progress:91,completedTasks:0,totalTasks:0,lastActive:"3 小時前",avatar:"https://images.pexels.com/photos/614810/pexels-photo-614810.jpeg?auto=compress&cs=tinysrgb&w=150",subjects:[{name:"國語",progress:92},{name:"數學",progress:88},{name:"英語",progress:95},{name:"自然",progress:89}],pendingFeedback:0}],today=new Date,yesterday=new Date(today);yesterday.setDate(today.getDate()-1);const tomorrow=new Date(today);tomorrow.setDate(today.getDate()+1);const dayAfterTomorrow=new Date(today);dayAfterTomorrow.setDate(today.getDate()+2);const recentActivities=[{id:"1",student:"王小明",activity:"完成了任務",detail:"水三態的科學實驗",time:"1 小時前"},{id:"2",student:"陳小美",activity:"提交了學習筆記",detail:"遊記初稿",time:"3 小時前"},{id:"3",student:"林大文",activity:"完成了測驗",detail:"英語單字測驗：95 分",time:"昨天"},{id:"4",student:"王小明",activity:"需要幫助",detail:"數學：分數除法",time:"昨天"},{id:"5",student:"陳小美",activity:"報名了活動",detail:"戶外教學：自然博物館",time:"2 天前"}],upcomingTasks=[{id:"1",title:"審核遊記作業",dueDate:"今天",students:["王小明","陳小美"]},{id:"2",title:"準備下週自然科實驗",dueDate:"明天",students:["全班"]},{id:"3",title:"英語對話練習",dueDate:"週五",students:["林大文"]}],attentionItems=[{type:"error",title:"任務進度延遲",description:"陳小美: 自然科作業已延遲 3 天"},{type:"warning",title:"學習時間不足",description:"王小明: 數學科學習時間連續兩週低於計畫"},{type:"success",title:"進步顯著",description:"林大文: 英語口說能力提升 25%"}],MentorDashboard=()=>{const t=useNavigate(),e={studentCount:mockStudents.length,completedTasks:mockStudents.reduce((r,n)=>r+n.completedTasks,0),pendingTasks:mockStudents.reduce((r,n)=>r+(n.totalTasks-n.completedTasks),0),weeklyPlans:5};return jsxRuntimeExports.jsx(PageLayout,{title:"指導老師儀表板",children:jsxRuntimeExports.jsxs("div",{className:layout$1.grid.main,children:[jsxRuntimeExports.jsxs("div",{className:layout$1.grid.sidebar,children:[jsxRuntimeExports.jsx("section",{className:layout$1.section.wrapper,children:jsxRuntimeExports.jsx(StatsBlock,{data:e})}),jsxRuntimeExports.jsxs("section",{className:layout$1.section.wrapper,children:[jsxRuntimeExports.jsx("div",{className:layout$1.section.header,children:jsxRuntimeExports.jsx("h2",{className:text.title,children:"學生進度總覽"})}),jsxRuntimeExports.jsx("div",{className:`${layout$1.card.base} overflow-hidden`,children:jsxRuntimeExports.jsx(StudentProgressTable,{students:mockStudents,onViewDetails:r=>t(`/mentor/students/${r}`)})})]})]}),jsxRuntimeExports.jsxs("div",{className:layout$1.section.wrapper,children:[jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsx("div",{className:layout$1.section.header,children:jsxRuntimeExports.jsx("h2",{className:text.title,children:"需要關注"})}),jsxRuntimeExports.jsx(AttentionBlock,{items:attentionItems})]}),jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsxs("div",{className:layout$1.section.header,children:[jsxRuntimeExports.jsx("h2",{className:text.title,children:"您的待辦事項"}),jsxRuntimeExports.jsx("button",{onClick:()=>t("/mentor/tasks"),className:text.link,children:"查看全部"})]}),jsxRuntimeExports.jsx(TasksBlock,{tasks:upcomingTasks})]}),jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsxs("div",{className:layout$1.section.header,children:[jsxRuntimeExports.jsx("h2",{className:text.title,children:"學生最近活動"}),jsxRuntimeExports.jsx("button",{onClick:()=>t("/mentor/activities"),className:text.link,children:"查看全部"})]}),jsxRuntimeExports.jsx(RecentActivitiesBlock,{activities:recentActivities})]})]})]})})},millisecondsInWeek=6048e5,millisecondsInDay=864e5,constructFromSymbol=Symbol.for("constructDateFrom");function constructFrom(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&constructFromSymbol in t?t[constructFromSymbol](e):t instanceof Date?new t.constructor(e):new Date(e)}function toDate(t,e){return constructFrom(e||t,t)}function addMonths(t,e,r){const n=toDate(t,r==null?void 0:r.in);if(isNaN(e))return constructFrom(t,NaN);if(!e)return n;const s=n.getDate(),a=constructFrom(t,n.getTime());a.setMonth(n.getMonth()+e+1,0);const o=a.getDate();return s>=o?a:(n.setFullYear(a.getFullYear(),a.getMonth(),s),n)}let defaultOptions$4={};function getDefaultOptions$2(){return defaultOptions$4}function startOfWeek(t,e){var l,c,d,p;const r=getDefaultOptions$2(),n=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((p=(d=r.locale)==null?void 0:d.options)==null?void 0:p.weekStartsOn)??0,s=toDate(t,e==null?void 0:e.in),a=s.getDay(),o=(a<n?7:0)+a-n;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function startOfISOWeek(t,e){return startOfWeek(t,{...e,weekStartsOn:1})}function getISOWeekYear(t,e){const r=toDate(t,e==null?void 0:e.in),n=r.getFullYear(),s=constructFrom(r,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const a=startOfISOWeek(s),o=constructFrom(r,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const l=startOfISOWeek(o);return r.getTime()>=a.getTime()?n+1:r.getTime()>=l.getTime()?n:n-1}function getTimezoneOffsetInMilliseconds(t){const e=toDate(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function normalizeDates(t,...e){const r=constructFrom.bind(null,e.find(n=>typeof n=="object"));return e.map(r)}function startOfDay(t,e){const r=toDate(t,e==null?void 0:e.in);return r.setHours(0,0,0,0),r}function differenceInCalendarDays(t,e,r){const[n,s]=normalizeDates(r==null?void 0:r.in,t,e),a=startOfDay(n),o=startOfDay(s),l=+a-getTimezoneOffsetInMilliseconds(a),c=+o-getTimezoneOffsetInMilliseconds(o);return Math.round((l-c)/millisecondsInDay)}function startOfISOWeekYear(t,e){const r=getISOWeekYear(t,e),n=constructFrom(t,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),startOfISOWeek(n)}function constructNow(t){return constructFrom(t,Date.now())}function isSameDay(t,e,r){const[n,s]=normalizeDates(r==null?void 0:r.in,t,e);return+startOfDay(n)==+startOfDay(s)}function isDate(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function isValid$1(t){return!(!isDate(t)&&typeof t!="number"||isNaN(+toDate(t)))}function endOfMonth(t,e){const r=toDate(t,e==null?void 0:e.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function normalizeInterval(t,e){const[r,n]=normalizeDates(t,e.start,e.end);return{start:r,end:n}}function eachDayOfInterval(t,e){const{start:r,end:n}=normalizeInterval(e==null?void 0:e.in,t);let s=+r>+n;const a=s?+r:+n,o=s?n:r;o.setHours(0,0,0,0);let l=1;const c=[];for(;+o<=a;)c.push(constructFrom(r,o)),o.setDate(o.getDate()+l),o.setHours(0,0,0,0);return s?c.reverse():c}function startOfMonth(t,e){const r=toDate(t,e==null?void 0:e.in);return r.setDate(1),r.setHours(0,0,0,0),r}function startOfYear(t,e){const r=toDate(t,e==null?void 0:e.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}const formatDistanceLocale={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},formatDistance=(t,e,r)=>{let n;const s=formatDistanceLocale[t];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function buildFormatLongFn(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const dateFormats={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},timeFormats={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},formatLong={date:buildFormatLongFn({formats:dateFormats,defaultWidth:"full"}),time:buildFormatLongFn({formats:timeFormats,defaultWidth:"full"}),dateTime:buildFormatLongFn({formats:dateTimeFormats,defaultWidth:"full"})},formatRelativeLocale={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},formatRelative=(t,e,r,n)=>formatRelativeLocale[t];function buildLocalizeFn(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let s;if(n==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=r!=null&&r.width?String(r.width):o;s=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=r!=null&&r.width?String(r.width):t.defaultWidth;s=t.values[l]||t.values[o]}const a=t.argumentCallback?t.argumentCallback(e):e;return s[a]}}const eraValues={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},quarterValues={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},monthValues={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dayValues={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},formattingDayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ordinalNumber=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},localize={ordinalNumber,era:buildLocalizeFn({values:eraValues,defaultWidth:"wide"}),quarter:buildLocalizeFn({values:quarterValues,defaultWidth:"wide",argumentCallback:t=>t-1}),month:buildLocalizeFn({values:monthValues,defaultWidth:"wide"}),day:buildLocalizeFn({values:dayValues,defaultWidth:"wide"}),dayPeriod:buildLocalizeFn({values:dayPeriodValues,defaultWidth:"wide",formattingValues:formattingDayPeriodValues,defaultFormattingWidth:"wide"})};function buildMatchFn(t){return(e,r={})=>{const n=r.width,s=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],a=e.match(s);if(!a)return null;const o=a[0],l=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?findIndex(l,g=>g.test(o)):findKey(l,g=>g.test(o));let d;d=t.valueCallback?t.valueCallback(c):c,d=r.valueCallback?r.valueCallback(d):d;const p=e.slice(o.length);return{value:d,rest:p}}}function findKey(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function findIndex(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function buildMatchPatternFn(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const s=n[0],a=e.match(t.parsePattern);if(!a)return null;let o=t.valueCallback?t.valueCallback(a[0]):a[0];o=r.valueCallback?r.valueCallback(o):o;const l=e.slice(s.length);return{value:o,rest:l}}}const matchOrdinalNumberPattern=/^(\d+)(th|st|nd|rd)?/i,parseOrdinalNumberPattern=/\d+/i,matchEraPatterns={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},parseEraPatterns={any:[/^b/i,/^(a|c)/i]},matchQuarterPatterns={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},parseQuarterPatterns={any:[/1/i,/2/i,/3/i,/4/i]},matchMonthPatterns={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},parseMonthPatterns={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},matchDayPatterns={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},parseDayPatterns={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},matchDayPeriodPatterns={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},parseDayPeriodPatterns={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},match={ordinalNumber:buildMatchPatternFn({matchPattern:matchOrdinalNumberPattern,parsePattern:parseOrdinalNumberPattern,valueCallback:t=>parseInt(t,10)}),era:buildMatchFn({matchPatterns:matchEraPatterns,defaultMatchWidth:"wide",parsePatterns:parseEraPatterns,defaultParseWidth:"any"}),quarter:buildMatchFn({matchPatterns:matchQuarterPatterns,defaultMatchWidth:"wide",parsePatterns:parseQuarterPatterns,defaultParseWidth:"any",valueCallback:t=>t+1}),month:buildMatchFn({matchPatterns:matchMonthPatterns,defaultMatchWidth:"wide",parsePatterns:parseMonthPatterns,defaultParseWidth:"any"}),day:buildMatchFn({matchPatterns:matchDayPatterns,defaultMatchWidth:"wide",parsePatterns:parseDayPatterns,defaultParseWidth:"any"}),dayPeriod:buildMatchFn({matchPatterns:matchDayPeriodPatterns,defaultMatchWidth:"any",parsePatterns:parseDayPeriodPatterns,defaultParseWidth:"any"})},enUS={code:"en-US",formatDistance,formatLong,formatRelative,localize,match,options:{weekStartsOn:0,firstWeekContainsDate:1}};function getDayOfYear(t,e){const r=toDate(t,e==null?void 0:e.in);return differenceInCalendarDays(r,startOfYear(r))+1}function getISOWeek(t,e){const r=toDate(t,e==null?void 0:e.in),n=+startOfISOWeek(r)-+startOfISOWeekYear(r);return Math.round(n/millisecondsInWeek)+1}function getWeekYear(t,e){var p,g,y,x;const r=toDate(t,e==null?void 0:e.in),n=r.getFullYear(),s=getDefaultOptions$2(),a=(e==null?void 0:e.firstWeekContainsDate)??((g=(p=e==null?void 0:e.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??s.firstWeekContainsDate??((x=(y=s.locale)==null?void 0:y.options)==null?void 0:x.firstWeekContainsDate)??1,o=constructFrom((e==null?void 0:e.in)||t,0);o.setFullYear(n+1,0,a),o.setHours(0,0,0,0);const l=startOfWeek(o,e),c=constructFrom((e==null?void 0:e.in)||t,0);c.setFullYear(n,0,a),c.setHours(0,0,0,0);const d=startOfWeek(c,e);return+r>=+l?n+1:+r>=+d?n:n-1}function startOfWeekYear(t,e){var l,c,d,p;const r=getDefaultOptions$2(),n=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((p=(d=r.locale)==null?void 0:d.options)==null?void 0:p.firstWeekContainsDate)??1,s=getWeekYear(t,e),a=constructFrom((e==null?void 0:e.in)||t,0);return a.setFullYear(s,0,n),a.setHours(0,0,0,0),startOfWeek(a,e)}function getWeek(t,e){const r=toDate(t,e==null?void 0:e.in),n=+startOfWeek(r,e)-+startOfWeekYear(r,e);return Math.round(n/millisecondsInWeek)+1}function addLeadingZeros(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const lightFormatters={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return addLeadingZeros(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):addLeadingZeros(r+1,2)},d(t,e){return addLeadingZeros(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return addLeadingZeros(t.getHours()%12||12,e.length)},H(t,e){return addLeadingZeros(t.getHours(),e.length)},m(t,e){return addLeadingZeros(t.getMinutes(),e.length)},s(t,e){return addLeadingZeros(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),s=Math.trunc(n*Math.pow(10,r-3));return addLeadingZeros(s,e.length)}},dayPeriodEnum={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},formatters$1={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),s=n>0?n:1-n;return r.ordinalNumber(s,{unit:"year"})}return lightFormatters.y(t,e)},Y:function(t,e,r,n){const s=getWeekYear(t,n),a=s>0?s:1-s;if(e==="YY"){const o=a%100;return addLeadingZeros(o,2)}return e==="Yo"?r.ordinalNumber(a,{unit:"year"}):addLeadingZeros(a,e.length)},R:function(t,e){const r=getISOWeekYear(t);return addLeadingZeros(r,e.length)},u:function(t,e){const r=t.getFullYear();return addLeadingZeros(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return addLeadingZeros(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return addLeadingZeros(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return lightFormatters.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return addLeadingZeros(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const s=getWeek(t,n);return e==="wo"?r.ordinalNumber(s,{unit:"week"}):addLeadingZeros(s,e.length)},I:function(t,e,r){const n=getISOWeek(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):addLeadingZeros(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):lightFormatters.d(t,e)},D:function(t,e,r){const n=getDayOfYear(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):addLeadingZeros(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const s=t.getDay(),a=(s-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return addLeadingZeros(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const s=t.getDay(),a=(s-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return addLeadingZeros(a,e.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),s=n===0?7:n;switch(e){case"i":return String(s);case"ii":return addLeadingZeros(s,e.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let s;switch(n===12?s=dayPeriodEnum.noon:n===0?s=dayPeriodEnum.midnight:s=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let s;switch(n>=17?s=dayPeriodEnum.evening:n>=12?s=dayPeriodEnum.afternoon:n>=4?s=dayPeriodEnum.morning:s=dayPeriodEnum.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return lightFormatters.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):lightFormatters.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):addLeadingZeros(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):addLeadingZeros(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):lightFormatters.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):lightFormatters.s(t,e)},S:function(t,e){return lightFormatters.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return formatTimezoneWithOptionalMinutes(n);case"XXXX":case"XX":return formatTimezone(n);case"XXXXX":case"XXX":default:return formatTimezone(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return formatTimezoneWithOptionalMinutes(n);case"xxxx":case"xx":return formatTimezone(n);case"xxxxx":case"xxx":default:return formatTimezone(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+formatTimezoneShort(n,":");case"OOOO":default:return"GMT"+formatTimezone(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+formatTimezoneShort(n,":");case"zzzz":default:return"GMT"+formatTimezone(n,":")}},t:function(t,e,r){const n=Math.trunc(+t/1e3);return addLeadingZeros(n,e.length)},T:function(t,e,r){return addLeadingZeros(+t,e.length)}};function formatTimezoneShort(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=Math.trunc(n/60),a=n%60;return a===0?r+String(s):r+String(s)+e+addLeadingZeros(a,2)}function formatTimezoneWithOptionalMinutes(t,e){return t%60===0?(t>0?"-":"+")+addLeadingZeros(Math.abs(t)/60,2):formatTimezone(t,e)}function formatTimezone(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=addLeadingZeros(Math.trunc(n/60),2),a=addLeadingZeros(n%60,2);return r+s+e+a}const dateLongFormatter=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},timeLongFormatter=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},dateTimeLongFormatter=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return dateLongFormatter(t,e);let a;switch(n){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",dateLongFormatter(n,e)).replace("{{time}}",timeLongFormatter(s,e))},longFormatters={p:timeLongFormatter,P:dateTimeLongFormatter},dayOfYearTokenRE=/^D+$/,weekYearTokenRE=/^Y+$/,throwTokens=["D","DD","YY","YYYY"];function isProtectedDayOfYearToken(t){return dayOfYearTokenRE.test(t)}function isProtectedWeekYearToken(t){return weekYearTokenRE.test(t)}function warnOrThrowProtectedError(t,e,r){const n=message(t,e,r);if(console.warn(n),throwTokens.includes(t))throw new RangeError(n)}function message(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const formattingTokensRegExp=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,longFormattingTokensRegExp=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,escapedStringRegExp=/^'([^]*?)'?$/,doubleQuoteRegExp=/''/g,unescapedLatinCharacterRegExp=/[a-zA-Z]/;function format(t,e,r){var p,g,y,x;const n=getDefaultOptions$2(),s=n.locale??enUS,a=n.firstWeekContainsDate??((g=(p=n.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??1,o=n.weekStartsOn??((x=(y=n.locale)==null?void 0:y.options)==null?void 0:x.weekStartsOn)??0,l=toDate(t,r==null?void 0:r.in);if(!isValid$1(l))throw new RangeError("Invalid time value");let c=e.match(longFormattingTokensRegExp).map(E=>{const S=E[0];if(S==="p"||S==="P"){const k=longFormatters[S];return k(E,s.formatLong)}return E}).join("").match(formattingTokensRegExp).map(E=>{if(E==="''")return{isToken:!1,value:"'"};const S=E[0];if(S==="'")return{isToken:!1,value:cleanEscapedString(E)};if(formatters$1[S])return{isToken:!0,value:E};if(S.match(unescapedLatinCharacterRegExp))throw new RangeError("Format string contains an unescaped latin alphabet character `"+S+"`");return{isToken:!1,value:E}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const d={firstWeekContainsDate:a,weekStartsOn:o,locale:s};return c.map(E=>{if(!E.isToken)return E.value;const S=E.value;(isProtectedWeekYearToken(S)||isProtectedDayOfYearToken(S))&&warnOrThrowProtectedError(S,e,String(t));const k=formatters$1[S[0]];return k(l,S,s.localize,d)}).join("")}function cleanEscapedString(t){const e=t.match(escapedStringRegExp);return e?e[1].replace(doubleQuoteRegExp,"'"):t}function isSameMonth(t,e,r){const[n,s]=normalizeDates(r==null?void 0:r.in,t,e);return n.getFullYear()===s.getFullYear()&&n.getMonth()===s.getMonth()}function isToday(t,e){return isSameDay(constructFrom(t,t),constructNow(t))}function subMonths(t,e,r){return addMonths(t,-1,r)}const Calendar=({events:t,onSelectDate:e,onSelectEvent:r,showImportantOnly:n=!1})=>{const[s,a]=reactExports.useState(new Date),[o,l]=reactExports.useState("month"),c=startOfMonth(s),d=endOfMonth(c),p=eachDayOfInterval({start:c,end:d}),g=["日","一","二","三","四","五","六"],y=t.filter(R=>{const j=new Date(R.date);return isSameMonth(j,s)&&(!n||R.isImportant)}),x=()=>a(subMonths(s)),E=()=>a(addMonths(s,1)),S=()=>a(new Date),k=()=>{l(o==="month"?"week":"month")},C=R=>y.filter(j=>isSameDay(new Date(j.date),R)),P=R=>{let j="h-24 border border-gray-200 dark:border-gray-700 p-1 transition duration-150";return isSameMonth(R,s)?isToday(R)?j+=" bg-indigo-50 dark:bg-indigo-900/30":j+=" bg-white dark:bg-gray-800":j+=" bg-gray-50 dark:bg-gray-900 text-gray-400",j};return jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 flex items-center justify-between border-b border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:format(s,"yyyy年 M月")}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-2",children:[jsxRuntimeExports.jsx("button",{onClick:S,className:"px-3 py-1 text-sm rounded-md border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 transition",children:"今天"}),jsxRuntimeExports.jsx("button",{onClick:k,className:"px-3 py-1 text-sm rounded-md border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 transition",children:o==="month"?"週檢視":"月檢視"}),jsxRuntimeExports.jsxs("div",{className:"flex",children:[jsxRuntimeExports.jsx("button",{onClick:x,className:"p-1 rounded-l-md border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 transition",children:jsxRuntimeExports.jsx(ChevronLeft,{size:16})}),jsxRuntimeExports.jsx("button",{onClick:E,className:"p-1 rounded-r-md border border-gray-300 dark:border-gray-600 border-l-0 hover:bg-gray-100 dark:hover:bg-gray-700 transition",children:jsxRuntimeExports.jsx(ChevronRight,{size:16})})]})]})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-7 bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700",children:g.map((R,j)=>jsxRuntimeExports.jsx("div",{className:"p-2 text-center text-sm font-medium text-gray-700 dark:text-gray-300",children:R},j))}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-7 h-[600px] overflow-y-auto",children:p.map((R,j)=>jsxRuntimeExports.jsxs("div",{className:P(R),onClick:()=>e&&e(R),children:[jsxRuntimeExports.jsx("div",{className:"flex justify-between",children:jsxRuntimeExports.jsx("span",{className:`text-sm font-medium ${isToday(R)?"bg-indigo-600 text-white w-6 h-6 rounded-full flex items-center justify-center":"text-gray-700 dark:text-gray-300"}`,children:format(R,"d")})}),jsxRuntimeExports.jsx("div",{className:"mt-1 space-y-1 max-h-[80px] overflow-y-auto",children:C(R).map(I=>jsxRuntimeExports.jsxs("div",{onClick:O=>{O.stopPropagation(),r&&r(I)},className:`text-xs truncate px-2 py-1 rounded ${I.isImportant?"bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-300 border-l-2 border-orange-500":`bg-${I.color||"blue"}-100 dark:bg-${I.color||"blue"}-900/30 text-${I.color||"blue"}-800 dark:text-${I.color||"blue"}-300`} cursor-pointer hover:opacity-80 transition`,children:[I.startTime&&jsxRuntimeExports.jsxs("span",{className:"font-medium",children:[I.startTime," "]}),I.title]},I.id))})]},j))})]})},mockEvents=[{id:"1",title:"國語課",date:new Date,startTime:"10:30",endTime:"12:00",category:"國語",location:"主教室",color:"indigo",isImportant:!0},{id:"2",title:"自然科學",date:new Date,startTime:"13:00",endTime:"14:30",category:"自然",location:"科學教室",color:"green",isImportant:!1},{id:"3",title:"數學課",date:new Date(new Date().setDate(new Date().getDate()+2)),startTime:"09:00",endTime:"10:30",category:"數學",location:"主教室",color:"blue",isImportant:!1},{id:"4",title:"戶外教學",date:new Date(new Date().setDate(new Date().getDate()+7)),startTime:"08:30",endTime:"16:00",category:"社會",location:"自然博物館",color:"orange",isImportant:!0},{id:"5",title:"英語會話",date:new Date(new Date().setDate(new Date().getDate()-1)),startTime:"14:00",endTime:"15:30",category:"英語",location:"視訊教室",color:"purple",isImportant:!1}],StudentSchedule=()=>{const[t,e]=reactExports.useState(mockEvents),[r,n]=reactExports.useState(null),[s,a]=reactExports.useState(!1),[o,l]=reactExports.useState(!1),c=x=>{n(x),a(!0)},d=x=>{n({id:String(Date.now()),title:"",date:x,startTime:"",endTime:"",isImportant:!1}),a(!0)},p=x=>{t.find(E=>E.id===x.id)?e(t.map(E=>E.id===x.id?x:E)):e([...t,x]),a(!1),n(null)},g=x=>{e(t.filter(E=>E.id!==x)),a(!1),n(null)},y=()=>{a(!1),n(null)};return jsxRuntimeExports.jsxs(PageLayout,{title:"課表",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[jsxRuntimeExports.jsx("div",{className:"lg:col-span-3",children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"月課表"}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("input",{id:"showImportant",type:"checkbox",checked:o,onChange:()=>l(!o),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),jsxRuntimeExports.jsx("label",{htmlFor:"showImportant",className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"僅顯示重要事項"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>d(new Date),className:"inline-flex items-center px-3 py-1.5 text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[jsxRuntimeExports.jsx(Plus,{size:16,className:"mr-1"}),"新增課程"]})]})]}),jsxRuntimeExports.jsx(Calendar,{events:t,onSelectDate:d,onSelectEvent:c,showImportantOnly:o})]})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"課表類型"}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("button",{className:"w-full flex items-center px-4 py-2 text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"一般課表 (目前)"}),jsxRuntimeExports.jsx("button",{className:"w-full flex items-center px-4 py-2 text-sm font-medium rounded-md text-gray-700 dark:text-gray-200 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 focus:outline-none",children:"旅行課表"}),jsxRuntimeExports.jsx("button",{className:"w-full flex items-center px-4 py-2 text-sm font-medium rounded-md text-gray-700 dark:text-gray-200 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 focus:outline-none",children:"滑雪課表"}),jsxRuntimeExports.jsx("button",{className:"w-full flex items-center px-4 py-2 text-sm font-medium rounded-md text-gray-700 dark:text-gray-200 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 focus:outline-none",children:"假期課表"})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"即將到來的課程"}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:t.filter(x=>new Date(x.date)>=new Date).sort((x,E)=>new Date(x.date).getTime()-new Date(E.date).getTime()).slice(0,3).map((x,E)=>jsxRuntimeExports.jsxs("div",{className:"p-3 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800/70 cursor-pointer",onClick:()=>c(x),children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:x.title}),x.isImportant&&jsxRuntimeExports.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300",children:"重要"})]}),jsxRuntimeExports.jsxs("div",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:[new Intl.DateTimeFormat("zh-TW",{month:"short",day:"numeric",weekday:"short"}).format(new Date(x.date)),x.startTime&&` · ${x.startTime} - ${x.endTime}`]}),x.category&&jsxRuntimeExports.jsx("div",{className:"mt-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-300",children:x.category})]},E))})]})]})})]}),s&&r&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center border-b border-gray-200 dark:border-gray-700 p-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:r.id?"編輯課程":"新增課程"}),jsxRuntimeExports.jsx("button",{onClick:y,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:jsxRuntimeExports.jsx(X,{size:20})})]}),jsxRuntimeExports.jsx("div",{className:"p-4",children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"標題"}),jsxRuntimeExports.jsx("input",{type:"text",id:"title",value:r.title,onChange:x=>n({...r,title:x.target.value}),className:"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"課程名稱"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"startTime",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"開始時間"}),jsxRuntimeExports.jsx("input",{type:"time",id:"startTime",value:r.startTime,onChange:x=>n({...r,startTime:x.target.value}),className:"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"endTime",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"結束時間"}),jsxRuntimeExports.jsx("input",{type:"time",id:"endTime",value:r.endTime,onChange:x=>n({...r,endTime:x.target.value}),className:"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"科目"}),jsxRuntimeExports.jsxs("select",{id:"category",value:r.category,onChange:x=>n({...r,category:x.target.value}),className:"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[jsxRuntimeExports.jsx("option",{value:"",children:"選擇科目"}),jsxRuntimeExports.jsx("option",{value:"國語",children:"國語"}),jsxRuntimeExports.jsx("option",{value:"數學",children:"數學"}),jsxRuntimeExports.jsx("option",{value:"英語",children:"英語"}),jsxRuntimeExports.jsx("option",{value:"自然",children:"自然"}),jsxRuntimeExports.jsx("option",{value:"社會",children:"社會"}),jsxRuntimeExports.jsx("option",{value:"藝術",children:"藝術"}),jsxRuntimeExports.jsx("option",{value:"體育",children:"體育"}),jsxRuntimeExports.jsx("option",{value:"其他",children:"其他"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"地點"}),jsxRuntimeExports.jsx("input",{type:"text",id:"location",value:r.location,onChange:x=>n({...r,location:x.target.value}),className:"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"上課地點"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("input",{id:"isImportant",type:"checkbox",checked:r.isImportant,onChange:x=>n({...r,isImportant:x.target.checked}),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),jsxRuntimeExports.jsx("label",{htmlFor:"isImportant",className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"標記為重要事項"})]})]})}),jsxRuntimeExports.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 p-4 flex justify-end space-x-3",children:[r.id&&jsxRuntimeExports.jsx("button",{onClick:()=>g(r.id),className:"inline-flex items-center px-4 py-2 text-sm font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 dark:text-red-300 dark:bg-red-900/30 dark:hover:bg-red-900/50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"刪除"}),jsxRuntimeExports.jsx("button",{onClick:y,className:"inline-flex items-center px-4 py-2 text-sm font-medium rounded-md text-gray-700 bg-gray-100 hover:bg-gray-200 dark:text-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"取消"}),jsxRuntimeExports.jsx("button",{onClick:()=>p(r),className:"inline-flex items-center px-4 py-2 text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"儲存"})]})]})})]})},TaskList=({tasks:t,onStatusChange:e,onTaskSelect:r,groupBy:n="none"})=>{const[s,a]=reactExports.useState([]),o=x=>{s.includes(x)?a(s.filter(E=>E!==x)):a([...s,x])},c=n==="none"?{"All Tasks":t}:t.reduce((x,E)=>{let S;if(n==="subject")S=E.subject;else if(n==="priority")S=E.priority?E.priority.charAt(0).toUpperCase()+E.priority.slice(1):"Normal";else if(n==="dueDate"){const k=new Date;k.setHours(0,0,0,0);const C=new Date(E.endDate);C.setHours(0,0,0,0);const P=C.getTime()-k.getTime(),R=Math.ceil(P/(1e3*60*60*24));R<0?S="已過期":R===0?S="今天":R===1?S="明天":R<7?S="本週":S="未來"}else S="All Tasks";return x[S]||(x[S]=[]),x[S].push(E),x},{}),d=Object.keys(c),p=x=>{switch(x){case"high":return jsxRuntimeExports.jsx(CircleAlert,{size:16,className:"text-red-500"});case"medium":return jsxRuntimeExports.jsx(Clock,{size:16,className:"text-orange-500"});default:return jsxRuntimeExports.jsx(Clock,{size:16,className:"text-blue-500"})}},g=x=>{switch(x){case"completed":return jsxRuntimeExports.jsx(CircleCheckBig,{size:20,className:"text-green-500"});case"in_progress":return jsxRuntimeExports.jsx(Circle,{size:20,className:"text-blue-500 fill-blue-100"});case"waiting_feedback":return jsxRuntimeExports.jsx(Circle,{size:20,className:"text-orange-500 fill-orange-100"});case"overdue":return jsxRuntimeExports.jsx(CircleAlert,{size:20,className:"text-red-500"});default:return jsxRuntimeExports.jsx(Circle,{size:20,className:"text-gray-400"})}},y=x=>{const E=new Date;E.setHours(0,0,0,0);const S=new Date(x);S.setHours(0,0,0,0);const k=S.getTime()-E.getTime(),C=Math.ceil(k/(1e3*60*60*24));return C<0?"已過期":C===0?"今天":C===1?"明天":new Intl.DateTimeFormat("zh-TW",{month:"short",day:"numeric"}).format(S)};return jsxRuntimeExports.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:d.map(x=>{const E=s.includes(x)||n==="none",S=c[x];return jsxRuntimeExports.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 last:border-b-0",children:[n!=="none"&&jsxRuntimeExports.jsxs("div",{className:"flex items-center px-4 py-3 bg-gray-50 dark:bg-gray-900 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-950 transition",onClick:()=>o(x),children:[jsxRuntimeExports.jsx("div",{className:"mr-2",children:E?jsxRuntimeExports.jsx(ChevronDown,{size:18}):jsxRuntimeExports.jsx(ChevronRight,{size:18})}),jsxRuntimeExports.jsx("h3",{className:"font-medium",children:x}),jsxRuntimeExports.jsxs("span",{className:"ml-2 text-sm text-gray-500 dark:text-gray-400",children:["(",S.length,")"]})]}),E&&jsxRuntimeExports.jsxs("ul",{children:[S.map(k=>jsxRuntimeExports.jsx("li",{className:"px-4 py-3 border-b border-gray-100 dark:border-gray-800 last:border-b-0 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition cursor-pointer",onClick:()=>r&&r(k),children:jsxRuntimeExports.jsxs("div",{className:"flex items-start",children:[jsxRuntimeExports.jsx("button",{className:"mt-0.5 mr-3 focus:outline-none",onClick:C=>{C.stopPropagation(),e==null||e(k.id,k.status==="completed"?"pending":"completed")},children:g(k.status)}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("p",{className:`font-medium ${k.status==="completed"?"text-gray-500 dark:text-gray-400 line-through":"text-gray-900 dark:text-white"}`,children:k.title}),jsxRuntimeExports.jsxs("div",{className:"flex items-center ml-2",children:[k.priority&&p(k.priority),jsxRuntimeExports.jsx("span",{className:`ml-1 text-xs ${k.status==="overdue"?"text-red-500":"text-gray-500"}`,children:y(k.endDate)})]})]}),k.description&&jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 line-clamp-2",children:k.description}),jsxRuntimeExports.jsxs("div",{className:"flex items-center mt-2",children:[jsxRuntimeExports.jsx("span",{className:"text-xs font-medium px-2 py-0.5 rounded-full bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-300",children:k.subject}),k.assignedBy&&jsxRuntimeExports.jsxs("span",{className:"ml-2 text-xs text-gray-500 dark:text-gray-400",children:["由 ",k.assignedBy," 指派"]}),k.progress>0&&jsxRuntimeExports.jsxs("span",{className:"ml-2 text-xs text-gray-500 dark:text-gray-400",children:["進度: ",k.progress,"%"]})]})]})]})},k.id)),S.length===0&&jsxRuntimeExports.jsx("li",{className:"px-4 py-8 text-center text-gray-500 dark:text-gray-400",children:"沒有任務"})]})]},x)})})},mockTasks=[{id:"1",title:"寫一篇遊記",description:"選擇一個最近去過的地方，寫一篇遊記",dueDate:new Date(new Date().setDate(new Date().getDate()+1)),completed:!1,subject:"國語",priority:"high",assignedBy:"陳老師"},{id:"2",title:"水三態的科學實驗",description:"準備水三態實驗的報告",dueDate:new Date(new Date().setDate(new Date().getDate()+3)),completed:!1,subject:"自然",priority:"medium",assignedBy:"林老師"},{id:"3",title:"閱讀課外讀物 - 科學家",description:"閱讀科學家的傳記並做筆記",dueDate:new Date,completed:!0,subject:"自然",priority:"low",assignedBy:"林老師"},{id:"4",title:"英語單字測驗準備",description:"準備下週的英語單字測驗，範圍：Unit 5-7",dueDate:new Date(new Date().setDate(new Date().getDate()+5)),completed:!1,subject:"英語",priority:"high",assignedBy:"王老師"},{id:"5",title:"數學練習題",description:"完成分數除法練習題",dueDate:new Date(new Date().setDate(new Date().getDate()+2)),completed:!1,subject:"數學",priority:"medium",assignedBy:"李老師"}],StudentTasks=()=>{const[t,e]=reactExports.useState(mockTasks),[r,n]=reactExports.useState("dueDate"),[s,a]=reactExports.useState(null),[o,l]=reactExports.useState(!1),c=p=>{e(t.map(g=>g.id===p?{...g,completed:!g.completed}:g))},d=p=>{a(p),l(!0)};return jsxRuntimeExports.jsx(PageLayout,{title:"任務列表",children:jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4",children:[jsxRuntimeExports.jsxs("select",{value:r,onChange:p=>n(p.target.value),className:"block w-40 pl-3 pr-10 py-2 text-base border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[jsxRuntimeExports.jsx("option",{value:"none",children:"不分組"}),jsxRuntimeExports.jsx("option",{value:"subject",children:"依科目"}),jsxRuntimeExports.jsx("option",{value:"dueDate",children:"依到期日"}),jsxRuntimeExports.jsx("option",{value:"priority",children:"依優先順序"})]}),jsxRuntimeExports.jsxs("button",{className:"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[jsxRuntimeExports.jsx(Funnel,{className:"h-4 w-4 mr-2"}),"篩選"]})]}),jsxRuntimeExports.jsxs("button",{className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[jsxRuntimeExports.jsx(Plus,{className:"h-4 w-4 mr-2"}),"新增任務"]})]}),jsxRuntimeExports.jsx(TaskList,{tasks:t,onTaskToggle:c,onTaskSelect:d,groupBy:r})]})})},mockEntries=[{id:"1",title:"今日反思",content:"今天閱讀了居禮夫人的生平，她的堅持和毅力讓我很受啟發。在遇到困難時也要像她一樣堅持下去。我學到了很多關於放射性元素的知識，也對科學家的研究精神有了更深的認識。",date:new Date,subject:"自然科學",tags:["閱讀心得","科學家","反思"]},{id:"2",title:"遊記初稿",content:"上週去了海邊，我觀察到許多有趣的海洋生物。寫作過程中我發現可以加入更多細節來描述潮間帶的生態系統。下次修改時要著重描寫顏色和形狀的變化。",date:new Date(new Date().setDate(new Date().getDate()-1)),subject:"國語",tags:["作文","遊記","海洋生物"]},{id:"3",title:"數學解題思路",content:"今天學習了分數除法，一開始覺得很困難，但是在理解了倒數的概念後就豁然開朗。我發現把複雜的問題拆解成小步驟會更容易理解。",date:new Date(new Date().setDate(new Date().getDate()-2)),subject:"數學",tags:["解題技巧","分數","心得"]}],StudentJournal=()=>{const[t,e]=reactExports.useState(mockEntries),[r,n]=reactExports.useState(""),[s,a]=reactExports.useState("all"),o=t.filter(l=>{const c=l.title.toLowerCase().includes(r.toLowerCase())||l.content.toLowerCase().includes(r.toLowerCase())||l.tags.some(p=>p.toLowerCase().includes(r.toLowerCase())),d=s==="all"||l.subject===s;return c&&d});return jsxRuntimeExports.jsx(PageLayout,{title:"學習日誌",children:jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[jsxRuntimeExports.jsx("div",{className:"flex-1 w-full sm:w-auto",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"搜尋日誌...",value:r,onChange:l=>n(l.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"})]})}),jsxRuntimeExports.jsxs("button",{className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[jsxRuntimeExports.jsx(Plus,{className:"h-4 w-4 mr-2"}),"新增日誌"]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsx("div",{className:"lg:col-span-2 space-y-6",children:o.map(l=>jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:l.title}),jsxRuntimeExports.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[jsxRuntimeExports.jsx(Calendar$1,{className:"h-4 w-4 mr-1"}),new Intl.DateTimeFormat("zh-TW",{year:"numeric",month:"long",day:"numeric"}).format(l.date)]})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4 whitespace-pre-line",children:l.content}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[jsxRuntimeExports.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-300",children:[jsxRuntimeExports.jsx(BookOpen,{className:"h-3 w-3 mr-1"}),l.subject]}),l.tags.map((c,d)=>jsxRuntimeExports.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300",children:[jsxRuntimeExports.jsx(Tag,{className:"h-3 w-3 mr-1"}),c]},d))]})]},l.id))}),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"科目篩選"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>a("all"),className:`w-full text-left px-3 py-2 rounded-md text-sm ${s==="all"?"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:"全部科目"}),["國語","數學","英語","自然科學","社會"].map(l=>jsxRuntimeExports.jsx("button",{onClick:()=>a(l),className:`w-full text-left px-3 py-2 rounded-md text-sm ${s===l?"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:l},l))]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"寫作提示"}),jsxRuntimeExports.jsxs("div",{className:"space-y-4 text-sm text-gray-600 dark:text-gray-300",children:[jsxRuntimeExports.jsx("p",{children:"• 記錄今天學到的重要概念"}),jsxRuntimeExports.jsx("p",{children:"• 描述你遇到的困難和解決方法"}),jsxRuntimeExports.jsx("p",{children:"• 分享學習過程中的心得感受"}),jsxRuntimeExports.jsx("p",{children:"• 寫下還想深入了解的問題"}),jsxRuntimeExports.jsx("p",{children:"• 連結不同科目之間的關係"})]})]})]})]})]})})},progressData=[{subject:"國語",progress:65,color:"#4F46E5"},{subject:"數學",progress:78,color:"#0EA5E9"},{subject:"英語",progress:42,color:"#F97316"},{subject:"自然",progress:85,color:"#10B981"},{subject:"社會",progress:51,color:"#8B5CF6"}],mockGoals=[{id:"1",title:"完成科學讀物閱讀計畫",description:"閱讀三本科學相關的課外讀物，並完成閱讀心得",deadline:new Date(new Date().setDate(new Date().getDate()+30)),progress:65,subject:"自然",status:"in-progress"},{id:"2",title:"英語口說能力提升",description:"每週進行兩次英語口說練習，提升口語表達能力",deadline:new Date(new Date().setDate(new Date().getDate()+60)),progress:42,subject:"英語",status:"in-progress"},{id:"3",title:"數學解題技巧培養",description:"完成高階數學題目練習，培養邏輯思維能力",deadline:new Date(new Date().setDate(new Date().getDate()+15)),progress:78,subject:"數學",status:"in-progress"},{id:"4",title:"完成文學作品創作",description:"創作一篇原創短篇小說，字數不少於 3000 字",deadline:new Date(new Date().setDate(new Date().getDate()-5)),progress:100,subject:"國語",status:"completed"}],StudentGoals=()=>jsxRuntimeExports.jsx(PageLayout,{title:"目標與進度",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"學習目標"}),jsxRuntimeExports.jsxs("button",{className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[jsxRuntimeExports.jsx(Target,{className:"h-4 w-4 mr-2"}),"設定新目標"]})]}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:mockGoals.map(t=>jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-1",children:t.title}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:t.description})]}),jsxRuntimeExports.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${t.status==="completed"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":t.status==="overdue"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"}`,children:t.status==="completed"?"已完成":t.status==="overdue"?"已逾期":"進行中"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[jsxRuntimeExports.jsx(Clock,{className:"h-4 w-4 mr-1"}),"截止日期：",new Intl.DateTimeFormat("zh-TW",{year:"numeric",month:"long",day:"numeric"}).format(t.deadline)]}),jsxRuntimeExports.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[t.progress,"%"]})]}),jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:jsxRuntimeExports.jsx("div",{className:`h-2 rounded-full ${t.status==="completed"?"bg-green-600":t.status==="overdue"?"bg-red-600":"bg-indigo-600"}`,style:{width:`${t.progress}%`}})}),jsxRuntimeExports.jsx("div",{className:"mt-4",children:jsxRuntimeExports.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-300",children:t.subject})})]},t.id))})]}),jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsx("div",{className:"flex justify-between items-center mb-4",children:jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"近期里程碑"})}),jsxRuntimeExports.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsx("div",{className:"relative",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"h-8 w-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:jsxRuntimeExports.jsx(CircleCheck,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),jsxRuntimeExports.jsxs("div",{className:"ml-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"完成第一階段英語口說訓練"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"已完成 10 次口說練習，口語表達更加流暢"})]})]})}),jsxRuntimeExports.jsx("div",{className:"relative",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"h-8 w-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:jsxRuntimeExports.jsx(CircleCheck,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),jsxRuntimeExports.jsxs("div",{className:"ml-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"完成科學讀物閱讀"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"閱讀完成第二本科學讀物，並撰寫心得"})]})]})}),jsxRuntimeExports.jsx("div",{className:"relative",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"h-8 w-8 rounded-full bg-indigo-100 dark:bg-indigo-900/30 flex items-center justify-center",children:jsxRuntimeExports.jsx(TrendingUp,{className:"h-5 w-5 text-indigo-600 dark:text-indigo-400"})}),jsxRuntimeExports.jsxs("div",{className:"ml-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"數學解題能力提升"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"最近一次測驗成績提升 15 分"})]})]})})]})})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsx("div",{className:"flex justify-between items-center mb-4",children:jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"整體學習進度"})}),jsxRuntimeExports.jsx(ProgressChart,{data:progressData})]}),jsxRuntimeExports.jsx("section",{children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"學習建議"}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx("div",{className:"h-8 w-8 rounded-full bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center",children:jsxRuntimeExports.jsx(TrendingUp,{className:"h-5 w-5 text-orange-600 dark:text-orange-400"})})}),jsxRuntimeExports.jsx("div",{className:"ml-3",children:jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"英語科目的進度較慢，建議增加口語練習的頻率"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-start",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx("div",{className:"h-8 w-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:jsxRuntimeExports.jsx(CircleCheck,{className:"h-5 w-5 text-green-600 dark:text-green-400"})})}),jsxRuntimeExports.jsx("div",{className:"ml-3",children:jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"自然科學的學習成效良好，可以嘗試更具挑戰性的內容"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-start",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx("div",{className:"h-8 w-8 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:jsxRuntimeExports.jsx(Target,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})})}),jsxRuntimeExports.jsx("div",{className:"ml-3",children:jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"建議設定更多短期目標，幫助追蹤學習進度"})})]})]})]})})]})]})}),MentorTaskManager=()=>jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("h1",{children:"Mentor Task Manager"})}),SubjectPage=({isMentor:t=!1})=>{const{subjectId:e}=useParams(),n={國語:{name:"國語",progress:65,currentUnit:"第六課：春天的雨",nextAssessment:"作文：遊記",recentActivities:[{type:"task",title:"完成遊記初稿",date:"2024/03/15"},{type:"note",title:"課文筆記：春天的意象",date:"2024/03/14"},{type:"assessment",title:"單元測驗：85分",date:"2024/03/12"}]},數學:{name:"數學",progress:78,currentUnit:"單元四：分數除法",nextAssessment:"單元測驗：分數運算",recentActivities:[{type:"task",title:"完成練習題 4-2",date:"2024/03/15"},{type:"note",title:"解題技巧：分數除法",date:"2024/03/14"},{type:"assessment",title:"小考：90分",date:"2024/03/13"}]},英語:{name:"English",progress:42,currentUnit:"Unit 5: Daily Life",nextAssessment:"Oral Test: Daily Conversation",recentActivities:[{type:"task",title:"完成單字練習",date:"2024/03/15"},{type:"note",title:"文法筆記：現在進行式",date:"2024/03/14"},{type:"assessment",title:"單字測驗：75分",date:"2024/03/12"}]},自然:{name:"自然科學",progress:85,currentUnit:"物質的三態變化",nextAssessment:"實驗報告：水的三態",recentActivities:[{type:"task",title:"完成實驗記錄",date:"2024/03/15"},{type:"note",title:"實驗觀察筆記",date:"2024/03/14"},{type:"assessment",title:"實驗操作評量：95分",date:"2024/03/12"}]}}[e];return n?jsxRuntimeExports.jsx(PageLayout,{title:n.name,children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[jsxRuntimeExports.jsx("section",{children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:n.currentUnit}),jsxRuntimeExports.jsxs("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:["目前進度：",n.progress,"%"]})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center",children:jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5 w-32",children:jsxRuntimeExports.jsx("div",{className:"bg-indigo-600 dark:bg-indigo-500 h-2.5 rounded-full",style:{width:`${n.progress}%`}})})})]}),jsxRuntimeExports.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"近期活動"}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:n.recentActivities.map((s,a)=>jsxRuntimeExports.jsxs("div",{className:"flex items-start",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx("div",{className:`h-8 w-8 rounded-full flex items-center justify-center ${s.type==="task"?"bg-blue-100 dark:bg-blue-900/30":s.type==="note"?"bg-green-100 dark:bg-green-900/30":"bg-purple-100 dark:bg-purple-900/30"}`,children:s.type==="task"?jsxRuntimeExports.jsx(CircleCheckBig,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}):s.type==="note"?jsxRuntimeExports.jsx(BookOpen,{className:"h-5 w-5 text-green-600 dark:text-green-400"}):jsxRuntimeExports.jsx(TriangleAlert,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"})})}),jsxRuntimeExports.jsxs("div",{className:"ml-4",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:s.title}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:s.date})]})]},a))})]})]})}),jsxRuntimeExports.jsx("section",{children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"學習資源"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"推薦教材"}),jsxRuntimeExports.jsxs("ul",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-300",children:[jsxRuntimeExports.jsx("li",{children:"• 課本隨堂練習"}),jsxRuntimeExports.jsx("li",{children:"• 補充教材"}),jsxRuntimeExports.jsx("li",{children:"• 線上影片教學"}),jsxRuntimeExports.jsx("li",{children:"• 互動式練習"})]})]}),jsxRuntimeExports.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"延伸學習"}),jsxRuntimeExports.jsxs("ul",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-300",children:[jsxRuntimeExports.jsx("li",{children:"• 相關課外讀物"}),jsxRuntimeExports.jsx("li",{children:"• 實踐活動建議"}),jsxRuntimeExports.jsx("li",{children:"• 進階練習題"}),jsxRuntimeExports.jsx("li",{children:"• 小組討論主題"})]})]})]})]})})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsx("section",{children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"即將到來"}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(Clock,{className:"h-5 w-5 text-gray-400 mr-3"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"下次評量"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:n.nextAssessment})]})]})})]})}),t&&jsxRuntimeExports.jsx("section",{children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"教學建議"}),jsxRuntimeExports.jsxs("div",{className:"space-y-4 text-sm text-gray-600 dark:text-gray-300",children:[jsxRuntimeExports.jsx("p",{children:"• 根據學生最近的表現，建議加強口語練習"}),jsxRuntimeExports.jsx("p",{children:"• 可以考慮增加實作練習的比重"}),jsxRuntimeExports.jsx("p",{children:"• 建議進行小組討論活動"}),jsxRuntimeExports.jsx("p",{children:"• 可以引入更多生活化的例子"})]})]})}),jsxRuntimeExports.jsx("section",{children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"學習提醒"}),jsxRuntimeExports.jsxs("div",{className:"space-y-4 text-sm text-gray-600 dark:text-gray-300",children:[jsxRuntimeExports.jsx("p",{children:"• 記得複習今天學習的重點"}),jsxRuntimeExports.jsx("p",{children:"• 準備下次課程需要的材料"}),jsxRuntimeExports.jsx("p",{children:"• 完成作業後自我檢查"}),jsxRuntimeExports.jsx("p",{children:"• 有問題及時詢問老師"})]})]})})]})]})}):jsxRuntimeExports.jsx(PageLayout,{title:"科目不存在",children:jsxRuntimeExports.jsx("div",{className:"text-center py-12",children:jsxRuntimeExports.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"找不到該科目的資料"})})})},NotFound=()=>{const{currentUser:t}=useUser(),e=(t==null?void 0:t.role)==="student"?"/student":"/mentor";return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950 flex flex-col items-center justify-center p-4",children:jsxRuntimeExports.jsxs("div",{className:"max-w-md w-full text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-24 h-24 bg-indigo-100 dark:bg-indigo-900/30 rounded-full mx-auto flex items-center justify-center mb-6",children:jsxRuntimeExports.jsx(BookOpen,{size:40,className:"text-indigo-600 dark:text-indigo-400"})}),jsxRuntimeExports.jsx("h1",{className:"text-6xl font-bold text-gray-900 dark:text-white mb-2",children:"404"}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-gray-100 mb-4",children:"頁面未找到"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-8",children:"抱歉，您要尋找的頁面不存在或已被移除。"}),jsxRuntimeExports.jsxs(Link,{to:e,className:"inline-flex items-center px-4 py-2 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[jsxRuntimeExports.jsx(House,{size:20,className:"mr-2"}),"返回首頁"]})]})})},mockTemplates=[{id:"1",title:"自然科學基礎課程",description:"適合國小高年級的基礎自然科學課程",subjects:["自然科學"],duration:"一學期",objectives:["理解基本科學概念","培養觀察能力","學習實驗方法"]},{id:"2",title:"數學思維訓練",description:"培養邏輯思維和解題能力",subjects:["數學"],duration:"一學期",objectives:["強化邏輯推理","提升解題技巧","建立數學概念"]}],CurriculumPlanner=({onCreatePlan:t,onImportPlan:e})=>{const[r,n]=reactExports.useState(""),[s,a]=reactExports.useState(!1),o=l=>{var d;const c=(d=l.target.files)==null?void 0:d[0];c&&e&&e(c)};return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>a(!0),className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[jsxRuntimeExports.jsx(Plus,{className:"h-6 w-6 text-indigo-500 mb-2"}),jsxRuntimeExports.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"建立新課程"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"從頭開始規劃新的課程"})]}),jsxRuntimeExports.jsxs("label",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors cursor-pointer",children:[jsxRuntimeExports.jsx("input",{type:"file",className:"hidden",onChange:o,accept:".csv,.xlsx"}),jsxRuntimeExports.jsx(Upload,{className:"h-6 w-6 text-green-500 mb-2"}),jsxRuntimeExports.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"匯入課程"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"從 CSV 或 Excel 匯入"})]}),jsxRuntimeExports.jsxs("button",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[jsxRuntimeExports.jsx(Download,{className:"h-6 w-6 text-blue-500 mb-2"}),jsxRuntimeExports.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"匯出課程"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"下載課程規劃範本"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"課程範本庫"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:mockTemplates.map(l=>jsxRuntimeExports.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors cursor-pointer",onClick:()=>n(l.id),children:[jsxRuntimeExports.jsx("div",{className:"flex items-start justify-between",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h3",{className:"font-medium text-gray-900 dark:text-white flex items-center",children:[jsxRuntimeExports.jsx(BookOpen,{className:"h-4 w-4 mr-2 text-indigo-500"}),l.title]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:l.description})]})}),jsxRuntimeExports.jsxs("div",{className:"mt-4 space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[jsxRuntimeExports.jsx(Target,{className:"h-4 w-4 mr-2"}),jsxRuntimeExports.jsxs("span",{children:["目標：",l.objectives[0]]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[jsxRuntimeExports.jsx(Clock,{className:"h-4 w-4 mr-2"}),jsxRuntimeExports.jsxs("span",{children:["時長：",l.duration]})]})]}),jsxRuntimeExports.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:l.subjects.map((c,d)=>jsxRuntimeExports.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-300",children:c},d))})]},l.id))})]}),s&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:jsxRuntimeExports.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full",children:jsxRuntimeExports.jsxs("div",{className:"p-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"選擇課程範本"}),jsxRuntimeExports.jsxs("div",{className:"mt-4 flex justify-end space-x-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>a(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 dark:text-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 rounded-md",children:"取消"}),jsxRuntimeExports.jsx("button",{onClick:()=>{a(!1)},className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 rounded-md",children:"使用範本"})]})]})})})]})},LayoutGroupContext=reactExports.createContext({});function useConstant(t){const e=reactExports.useRef(null);return e.current===null&&(e.current=t()),e.current}const isBrowser$2=typeof window<"u",useIsomorphicLayoutEffect$2=isBrowser$2?reactExports.useLayoutEffect:reactExports.useEffect,PresenceContext=reactExports.createContext(null);function addUniqueItem(t,e){t.indexOf(e)===-1&&t.push(e)}function removeItem(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}const clamp$1=(t,e,r)=>r>e?e:r<t?t:r;let invariant=()=>{};const MotionGlobalConfig={},isNumericalString=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function isObject(t){return typeof t=="object"&&t!==null}const isZeroValueString=t=>/^0[^.\s]+$/u.test(t);function memo(t){let e;return()=>(e===void 0&&(e=t()),e)}const noop$1=t=>t,combineFunctions=(t,e)=>r=>e(t(r)),pipe=(...t)=>t.reduce(combineFunctions),progress=(t,e,r)=>{const n=e-t;return n===0?1:(r-t)/n};class SubscriptionManager{constructor(){this.subscriptions=[]}add(e){return addUniqueItem(this.subscriptions,e),()=>removeItem(this.subscriptions,e)}notify(e,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,r,n);else for(let a=0;a<s;a++){const o=this.subscriptions[a];o&&o(e,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const secondsToMilliseconds=t=>t*1e3,millisecondsToSeconds=t=>t/1e3;function velocityPerSecond(t,e){return e?t*(1e3/e):0}const calcBezier=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(t,e,r,n,s){let a,o,l=0;do o=e+(r-e)/2,a=calcBezier(o,n,s)-t,a>0?r=o:e=o;while(Math.abs(a)>subdivisionPrecision&&++l<subdivisionMaxIterations);return o}function cubicBezier(t,e,r,n){if(t===e&&r===n)return noop$1;const s=a=>binarySubdivide(a,0,1,t,r);return a=>a===0||a===1?a:calcBezier(s(a),e,n)}const mirrorEasing=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,reverseEasing=t=>e=>1-t(1-e),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=t=>(t*=2)<1?.5*backIn(t):.5*(2-Math.pow(2,-10*(t-1))),circIn=t=>1-Math.sin(Math.acos(t)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=t=>Array.isArray(t)&&typeof t[0]!="number",isBezierDefinition=t=>Array.isArray(t)&&typeof t[0]=="number",easingLookup={linear:noop$1,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},isValidEasing=t=>typeof t=="string",easingDefinitionToFunction=t=>{if(isBezierDefinition(t)){invariant(t.length===4);const[e,r,n,s]=t;return cubicBezier(e,r,n,s)}else if(isValidEasing(t))return easingLookup[t];return t},stepsOrder=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function createRenderStep(t,e){let r=new Set,n=new Set,s=!1,a=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(p){o.has(p)&&(d.schedule(p),t()),p(l)}const d={schedule:(p,g=!1,y=!1)=>{const E=y&&s?r:n;return g&&o.add(p),E.has(p)||E.add(p),p},cancel:p=>{n.delete(p),o.delete(p)},process:p=>{if(l=p,s){a=!0;return}s=!0,[r,n]=[n,r],r.forEach(c),r.clear(),s=!1,a&&(a=!1,d.process(p))}};return d}const maxElapsed=40;function createRenderBatcher(t,e){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>r=!0,o=stepsOrder.reduce((R,j)=>(R[j]=createRenderStep(a),R),{}),{setup:l,read:c,resolveKeyframes:d,preUpdate:p,update:g,preRender:y,render:x,postRender:E}=o,S=()=>{const R=MotionGlobalConfig.useManualTiming?s.timestamp:performance.now();r=!1,MotionGlobalConfig.useManualTiming||(s.delta=n?1e3/60:Math.max(Math.min(R-s.timestamp,maxElapsed),1)),s.timestamp=R,s.isProcessing=!0,l.process(s),c.process(s),d.process(s),p.process(s),g.process(s),y.process(s),x.process(s),E.process(s),s.isProcessing=!1,r&&e&&(n=!1,t(S))},k=()=>{r=!0,n=!0,s.isProcessing||t(S)};return{schedule:stepsOrder.reduce((R,j)=>{const I=o[j];return R[j]=(O,L=!1,B=!1)=>(r||k(),I.schedule(O,L,B)),R},{}),cancel:R=>{for(let j=0;j<stepsOrder.length;j++)o[stepsOrder[j]].cancel(R)},state:s,steps:o}}const{schedule:frame,cancel:cancelFrame,state:frameData,steps:frameSteps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop$1,!0);let now;function clearTime(){now=void 0}const time={now:()=>(now===void 0&&time.set(frameData.isProcessing||MotionGlobalConfig.useManualTiming?frameData.timestamp:performance.now()),now),set:t=>{now=t,queueMicrotask(clearTime)}},checkStringStartsWith=t=>e=>typeof e=="string"&&e.startsWith(t),isCSSVariableName=checkStringStartsWith("--"),startsAsVariableToken=checkStringStartsWith("var(--"),isCSSVariableToken=t=>startsAsVariableToken(t)?singleCssVariableRegex.test(t.split("/*")[0].trim()):!1,singleCssVariableRegex=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,number={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},alpha={...number,transform:t=>clamp$1(0,1,t)},scale={...number,default:1},sanitize=t=>Math.round(t*1e5)/1e5,floatRegex=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function isNullish(t){return t==null}const singleColorRegex=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,isColorString=(t,e)=>r=>!!(typeof r=="string"&&singleColorRegex.test(r)&&r.startsWith(t)||e&&!isNullish(r)&&Object.prototype.hasOwnProperty.call(r,e)),splitColor=(t,e,r)=>n=>{if(typeof n!="string")return n;const[s,a,o,l]=n.match(floatRegex);return{[t]:parseFloat(s),[e]:parseFloat(a),[r]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},clampRgbUnit=t=>clamp$1(0,255,t),rgbUnit={...number,transform:t=>Math.round(clampRgbUnit(t))},rgba={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:n=1})=>"rgba("+rgbUnit.transform(t)+", "+rgbUnit.transform(e)+", "+rgbUnit.transform(r)+", "+sanitize(alpha.transform(n))+")"};function parseHex(t){let e="",r="",n="",s="";return t.length>5?(e=t.substring(1,3),r=t.substring(3,5),n=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),r=t.substring(2,3),n=t.substring(3,4),s=t.substring(4,5),e+=e,r+=r,n+=n,s+=s),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const hex={test:isColorString("#"),parse:parseHex,transform:rgba.transform},createUnitType=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),degrees=createUnitType("deg"),percent=createUnitType("%"),px=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent,parse:t=>percent.parse(t)/100,transform:t=>percent.transform(t*100)},hsla={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:n=1})=>"hsla("+Math.round(t)+", "+percent.transform(sanitize(e))+", "+percent.transform(sanitize(r))+", "+sanitize(alpha.transform(n))+")"},color$1={test:t=>rgba.test(t)||hex.test(t)||hsla.test(t),parse:t=>rgba.test(t)?rgba.parse(t):hsla.test(t)?hsla.parse(t):hex.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?rgba.transform(t):hsla.transform(t)},colorRegex=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function test(t){var e,r;return isNaN(t)&&typeof t=="string"&&(((e=t.match(floatRegex))==null?void 0:e.length)||0)+(((r=t.match(colorRegex))==null?void 0:r.length)||0)>0}const NUMBER_TOKEN="number",COLOR_TOKEN="color",VAR_TOKEN="var",VAR_FUNCTION_TOKEN="var(",SPLIT_TOKEN="${}",complexRegex=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function analyseComplexValue(t){const e=t.toString(),r=[],n={color:[],number:[],var:[]},s=[];let a=0;const l=e.replace(complexRegex,c=>(color$1.test(c)?(n.color.push(a),s.push(COLOR_TOKEN),r.push(color$1.parse(c))):c.startsWith(VAR_FUNCTION_TOKEN)?(n.var.push(a),s.push(VAR_TOKEN),r.push(c)):(n.number.push(a),s.push(NUMBER_TOKEN),r.push(parseFloat(c))),++a,SPLIT_TOKEN)).split(SPLIT_TOKEN);return{values:r,split:l,indexes:n,types:s}}function parseComplexValue(t){return analyseComplexValue(t).values}function createTransformer(t){const{split:e,types:r}=analyseComplexValue(t),n=e.length;return s=>{let a="";for(let o=0;o<n;o++)if(a+=e[o],s[o]!==void 0){const l=r[o];l===NUMBER_TOKEN?a+=sanitize(s[o]):l===COLOR_TOKEN?a+=color$1.transform(s[o]):a+=s[o]}return a}}const convertNumbersToZero=t=>typeof t=="number"?0:t;function getAnimatableNone$1(t){const e=parseComplexValue(t);return createTransformer(t)(e.map(convertNumbersToZero))}const complex={test,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1};function hueToRgb(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function hslaToRgba({hue:t,saturation:e,lightness:r,alpha:n}){t/=360,e/=100,r/=100;let s=0,a=0,o=0;if(!e)s=a=o=r;else{const l=r<.5?r*(1+e):r+e-r*e,c=2*r-l;s=hueToRgb(c,l,t+1/3),a=hueToRgb(c,l,t),o=hueToRgb(c,l,t-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:n}}function mixImmediate(t,e){return r=>r>0?e:t}const mixNumber$1=(t,e,r)=>t+(e-t)*r,mixLinearColor=(t,e,r)=>{const n=t*t,s=r*(e*e-n)+n;return s<0?0:Math.sqrt(s)},colorTypes=[hex,rgba,hsla],getColorType=t=>colorTypes.find(e=>e.test(t));function asRGBA(t){const e=getColorType(t);if(!e)return!1;let r=e.parse(t);return e===hsla&&(r=hslaToRgba(r)),r}const mixColor=(t,e)=>{const r=asRGBA(t),n=asRGBA(e);if(!r||!n)return mixImmediate(t,e);const s={...r};return a=>(s.red=mixLinearColor(r.red,n.red,a),s.green=mixLinearColor(r.green,n.green,a),s.blue=mixLinearColor(r.blue,n.blue,a),s.alpha=mixNumber$1(r.alpha,n.alpha,a),rgba.transform(s))},invisibleValues=new Set(["none","hidden"]);function mixVisibility(t,e){return invisibleValues.has(t)?r=>r<=0?t:e:r=>r>=1?e:t}function mixNumber(t,e){return r=>mixNumber$1(t,e,r)}function getMixer(t){return typeof t=="number"?mixNumber:typeof t=="string"?isCSSVariableToken(t)?mixImmediate:color$1.test(t)?mixColor:mixComplex:Array.isArray(t)?mixArray:typeof t=="object"?color$1.test(t)?mixColor:mixObject:mixImmediate}function mixArray(t,e){const r=[...t],n=r.length,s=t.map((a,o)=>getMixer(a)(a,e[o]));return a=>{for(let o=0;o<n;o++)r[o]=s[o](a);return r}}function mixObject(t,e){const r={...t,...e},n={};for(const s in r)t[s]!==void 0&&e[s]!==void 0&&(n[s]=getMixer(t[s])(t[s],e[s]));return s=>{for(const a in n)r[a]=n[a](s);return r}}function matchOrder(t,e){const r=[],n={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],o=t.indexes[a][n[a]],l=t.values[o]??0;r[s]=l,n[a]++}return r}const mixComplex=(t,e)=>{const r=complex.createTransformer(e),n=analyseComplexValue(t),s=analyseComplexValue(e);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?invisibleValues.has(t)&&!s.values.length||invisibleValues.has(e)&&!n.values.length?mixVisibility(t,e):pipe(mixArray(matchOrder(n,s),s.values),r):mixImmediate(t,e)};function mix(t,e,r){return typeof t=="number"&&typeof e=="number"&&typeof r=="number"?mixNumber$1(t,e,r):getMixer(t)(t,e)}const frameloopDriver=t=>{const e=({timestamp:r})=>t(r);return{start:(r=!0)=>frame.update(e,r),stop:()=>cancelFrame(e),now:()=>frameData.isProcessing?frameData.timestamp:time.now()}},generateLinearEasing=(t,e,r=10)=>{let n="";const s=Math.max(Math.round(e/r),2);for(let a=0;a<s;a++)n+=t(a/(s-1))+", ";return`linear(${n.substring(0,n.length-2)})`},maxGeneratorDuration=2e4;function calcGeneratorDuration(t){let e=0;const r=50;let n=t.next(e);for(;!n.done&&e<maxGeneratorDuration;)e+=r,n=t.next(e);return e>=maxGeneratorDuration?1/0:e}function createGeneratorEasing(t,e=100,r){const n=r({...t,keyframes:[0,e]}),s=Math.min(calcGeneratorDuration(n),maxGeneratorDuration);return{type:"keyframes",ease:a=>n.next(s*a).value/e,duration:millisecondsToSeconds(s)}}const velocitySampleDuration=5;function calcGeneratorVelocity(t,e,r){const n=Math.max(e-velocitySampleDuration,0);return velocityPerSecond(r-t(n),e-n)}const springDefaults={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},safeMin=.001;function findSpring({duration:t=springDefaults.duration,bounce:e=springDefaults.bounce,velocity:r=springDefaults.velocity,mass:n=springDefaults.mass}){let s,a,o=1-e;o=clamp$1(springDefaults.minDamping,springDefaults.maxDamping,o),t=clamp$1(springDefaults.minDuration,springDefaults.maxDuration,millisecondsToSeconds(t)),o<1?(s=d=>{const p=d*o,g=p*t,y=p-r,x=calcAngularFreq(d,o),E=Math.exp(-g);return safeMin-y/x*E},a=d=>{const g=d*o*t,y=g*r+r,x=Math.pow(o,2)*Math.pow(d,2)*t,E=Math.exp(-g),S=calcAngularFreq(Math.pow(d,2),o);return(-s(d)+safeMin>0?-1:1)*((y-x)*E)/S}):(s=d=>{const p=Math.exp(-d*t),g=(d-r)*t+1;return-.001+p*g},a=d=>{const p=Math.exp(-d*t),g=(r-d)*(t*t);return p*g});const l=5/t,c=approximateRoot(s,a,l);if(t=secondsToMilliseconds(t),isNaN(c))return{stiffness:springDefaults.stiffness,damping:springDefaults.damping,duration:t};{const d=Math.pow(c,2)*n;return{stiffness:d,damping:o*2*Math.sqrt(n*d),duration:t}}}const rootIterations=12;function approximateRoot(t,e,r){let n=r;for(let s=1;s<rootIterations;s++)n=n-t(n)/e(n);return n}function calcAngularFreq(t,e){return t*Math.sqrt(1-e*e)}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(t,e){return e.some(r=>t[r]!==void 0)}function getSpringOptions(t){let e={velocity:springDefaults.velocity,stiffness:springDefaults.stiffness,damping:springDefaults.damping,mass:springDefaults.mass,isResolvedFromDuration:!1,...t};if(!isSpringType(t,physicsKeys)&&isSpringType(t,durationKeys))if(t.visualDuration){const r=t.visualDuration,n=2*Math.PI/(r*1.2),s=n*n,a=2*clamp$1(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:springDefaults.mass,stiffness:s,damping:a}}else{const r=findSpring(t);e={...e,...r,mass:springDefaults.mass},e.isResolvedFromDuration=!0}return e}function spring(t=springDefaults.visualDuration,e=springDefaults.bounce){const r=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:n,restDelta:s}=r;const a=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],l={done:!1,value:a},{stiffness:c,damping:d,mass:p,duration:g,velocity:y,isResolvedFromDuration:x}=getSpringOptions({...r,velocity:-millisecondsToSeconds(r.velocity||0)}),E=y||0,S=d/(2*Math.sqrt(c*p)),k=o-a,C=millisecondsToSeconds(Math.sqrt(c/p)),P=Math.abs(k)<5;n||(n=P?springDefaults.restSpeed.granular:springDefaults.restSpeed.default),s||(s=P?springDefaults.restDelta.granular:springDefaults.restDelta.default);let R;if(S<1){const I=calcAngularFreq(C,S);R=O=>{const L=Math.exp(-S*C*O);return o-L*((E+S*C*k)/I*Math.sin(I*O)+k*Math.cos(I*O))}}else if(S===1)R=I=>o-Math.exp(-C*I)*(k+(E+C*k)*I);else{const I=C*Math.sqrt(S*S-1);R=O=>{const L=Math.exp(-S*C*O),B=Math.min(I*O,300);return o-L*((E+S*C*k)*Math.sinh(B)+I*k*Math.cosh(B))/I}}const j={calculatedDuration:x&&g||null,next:I=>{const O=R(I);if(x)l.done=I>=g;else{let L=I===0?E:0;S<1&&(L=I===0?secondsToMilliseconds(E):calcGeneratorVelocity(R,I,O));const B=Math.abs(L)<=n,Z=Math.abs(o-O)<=s;l.done=B&&Z}return l.value=l.done?o:O,l},toString:()=>{const I=Math.min(calcGeneratorDuration(j),maxGeneratorDuration),O=generateLinearEasing(L=>j.next(I*L).value,I,30);return I+"ms "+O},toTransition:()=>{}};return j}spring.applyToOptions=t=>{const e=createGeneratorEasing(t,100,spring);return t.ease=e.ease,t.duration=secondsToMilliseconds(e.duration),t.type="keyframes",t};function inertia({keyframes:t,velocity:e=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:p}){const g=t[0],y={done:!1,value:g},x=B=>l!==void 0&&B<l||c!==void 0&&B>c,E=B=>l===void 0?c:c===void 0||Math.abs(l-B)<Math.abs(c-B)?l:c;let S=r*e;const k=g+S,C=o===void 0?k:o(k);C!==k&&(S=C-g);const P=B=>-S*Math.exp(-B/n),R=B=>C+P(B),j=B=>{const Z=P(B),te=R(B);y.done=Math.abs(Z)<=d,y.value=y.done?C:te};let I,O;const L=B=>{x(y.value)&&(I=B,O=spring({keyframes:[y.value,E(y.value)],velocity:calcGeneratorVelocity(R,B,y.value),damping:s,stiffness:a,restDelta:d,restSpeed:p}))};return L(0),{calculatedDuration:null,next:B=>{let Z=!1;return!O&&I===void 0&&(Z=!0,j(B),L(B)),I!==void 0&&B>=I?O.next(B-I):(!Z&&j(B),y)}}}function createMixers(t,e,r){const n=[],s=r||MotionGlobalConfig.mix||mix,a=t.length-1;for(let o=0;o<a;o++){let l=s(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||noop$1:e;l=pipe(c,l)}n.push(l)}return n}function interpolate(t,e,{clamp:r=!0,ease:n,mixer:s}={}){const a=t.length;if(invariant(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=createMixers(e,n,s),c=l.length,d=p=>{if(o&&p<t[0])return e[0];let g=0;if(c>1)for(;g<t.length-2&&!(p<t[g+1]);g++);const y=progress(t[g],t[g+1],p);return l[g](y)};return r?p=>d(clamp$1(t[0],t[a-1],p)):d}function fillOffset(t,e){const r=t[t.length-1];for(let n=1;n<=e;n++){const s=progress(0,e,n);t.push(mixNumber$1(r,1,s))}}function defaultOffset(t){const e=[0];return fillOffset(e,t.length-1),e}function convertOffsetToTimes(t,e){return t.map(r=>r*e)}function defaultEasing(t,e){return t.map(()=>e||easeInOut).splice(0,t.length-1)}function keyframes({duration:t=300,keyframes:e,times:r,ease:n="easeInOut"}){const s=isEasingArray(n)?n.map(easingDefinitionToFunction):easingDefinitionToFunction(n),a={done:!1,value:e[0]},o=convertOffsetToTimes(r&&r.length===e.length?r:defaultOffset(e),t),l=interpolate(o,e,{ease:Array.isArray(s)?s:defaultEasing(e,s)});return{calculatedDuration:t,next:c=>(a.value=l(c),a.done=c>=t,a)}}const isNotNull$2=t=>t!==null;function getFinalKeyframe$1(t,{repeat:e,repeatType:r="loop"},n,s=1){const a=t.filter(isNotNull$2),l=s<0||e&&r!=="loop"&&e%2===1?0:a.length-1;return!l||n===void 0?a[l]:n}const transitionTypeMap={decay:inertia,inertia,tween:keyframes,keyframes,spring};function replaceTransitionType(t){typeof t.type=="string"&&(t.type=transitionTypeMap[t.type])}class WithPromise{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,r){return this.finished.then(e,r)}}const percentToProgress=t=>t/100;class JSAnimation extends WithPromise{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=(r=!0)=>{var n,s;if(r){const{motionValue:a}=this.options;a&&a.updatedAt!==time.now()&&this.tick(time.now())}this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(n=this.options).onStop)==null||s.call(n))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;replaceTransitionType(e);const{type:r=keyframes,repeat:n=0,repeatDelay:s=0,repeatType:a,velocity:o=0}=e;let{keyframes:l}=e;const c=r||keyframes;c!==keyframes&&typeof l[0]!="number"&&(this.mixKeyframes=pipe(percentToProgress,mix(l[0],l[1])),l=[0,100]);const d=c({...e,keyframes:l});a==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...l].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=calcGeneratorDuration(d));const{calculatedDuration:p}=d;this.calculatedDuration=p,this.resolvedDuration=p+s,this.totalDuration=this.resolvedDuration*(n+1)-s,this.generator=d}updateTime(e){const r=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(e,r=!1){const{generator:n,totalDuration:s,mixKeyframes:a,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return n.next(0);const{delay:d=0,keyframes:p,repeat:g,repeatType:y,repeatDelay:x,type:E,onUpdate:S,finalKeyframe:k}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),r?this.currentTime=e:this.updateTime(e);const C=this.currentTime-d*(this.playbackSpeed>=0?1:-1),P=this.playbackSpeed>=0?C<0:C>s;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let R=this.currentTime,j=n;if(g){const B=Math.min(this.currentTime,s)/l;let Z=Math.floor(B),te=B%1;!te&&B>=1&&(te=1),te===1&&Z--,Z=Math.min(Z,g+1),!!(Z%2)&&(y==="reverse"?(te=1-te,x&&(te-=x/l)):y==="mirror"&&(j=o)),R=clamp$1(0,1,te)*l}const I=P?{done:!1,value:p[0]}:j.next(R);a&&(I.value=a(I.value));let{done:O}=I;!P&&c!==null&&(O=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const L=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return L&&E!==inertia&&(I.value=getFinalKeyframe$1(p,this.options,k,this.speed)),S&&S(I.value),L&&this.finish(),I}then(e,r){return this.finished.then(e,r)}get duration(){return millisecondsToSeconds(this.calculatedDuration)}get time(){return millisecondsToSeconds(this.currentTime)}set time(e){var r;e=secondsToMilliseconds(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(r=this.driver)==null||r.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(time.now());const r=this.playbackSpeed!==e;this.playbackSpeed=e,r&&(this.time=millisecondsToSeconds(this.currentTime))}play(){var s,a;if(this.isStopped)return;const{driver:e=frameloopDriver,startTime:r}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(a=(s=this.options).onPlay)==null||a.call(s);const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=r??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(time.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,r;this.notifyFinished(),this.teardown(),this.state="finished",(r=(e=this.options).onComplete)==null||r.call(e)}cancel(){var e,r;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(r=(e=this.options).onCancel)==null||r.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var r;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(r=this.driver)==null||r.stop(),e.observe(this)}}function fillWildcards(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const radToDeg=t=>t*180/Math.PI,rotate=t=>{const e=radToDeg(Math.atan2(t[1],t[0]));return rebaseAngle(e)},matrix2dParsers={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate,rotateZ:rotate,skewX:t=>radToDeg(Math.atan(t[1])),skewY:t=>radToDeg(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},rebaseAngle=t=>(t=t%360,t<0&&(t+=360),t),rotateZ=rotate,scaleX=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),scaleY=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),matrix3dParsers={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX,scaleY,scale:t=>(scaleX(t)+scaleY(t))/2,rotateX:t=>rebaseAngle(radToDeg(Math.atan2(t[6],t[5]))),rotateY:t=>rebaseAngle(radToDeg(Math.atan2(-t[2],t[0]))),rotateZ,rotate:rotateZ,skewX:t=>radToDeg(Math.atan(t[4])),skewY:t=>radToDeg(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function defaultTransformValue(t){return t.includes("scale")?1:0}function parseValueFromTransform(t,e){if(!t||t==="none")return defaultTransformValue(e);const r=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,s;if(r)n=matrix3dParsers,s=r;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=matrix2dParsers,s=l}if(!s)return defaultTransformValue(e);const a=n[e],o=s[1].split(",").map(convertTransformToNumber);return typeof a=="function"?a(o):o[a]}const readTransformValue=(t,e)=>{const{transform:r="none"}=getComputedStyle(t);return parseValueFromTransform(r,e)};function convertTransformToNumber(t){return parseFloat(t.trim())}const transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder),isNumOrPxType=t=>t===number||t===px,transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(t=>!transformKeys.has(t));function removeNonTranslationalTransform(t){const e=[];return nonTranslationalTransformKeys.forEach(r=>{const n=t.getValue(r);n!==void 0&&(e.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),e}const positionalValues={width:({x:t},{paddingLeft:e="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),height:({y:t},{paddingTop:e="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>parseValueFromTransform(e,"x"),y:(t,{transform:e})=>parseValueFromTransform(e,"y")};positionalValues.translateX=positionalValues.x;positionalValues.translateY=positionalValues.y;const toResolve=new Set;let isScheduled=!1,anyNeedsMeasurement=!1,isForced=!1;function measureAllKeyframes(){if(anyNeedsMeasurement){const t=Array.from(toResolve).filter(n=>n.needsMeasurement),e=new Set(t.map(n=>n.element)),r=new Map;e.forEach(n=>{const s=removeNonTranslationalTransform(n);s.length&&(r.set(n,s),n.render())}),t.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const s=r.get(n);s&&s.forEach(([a,o])=>{var l;(l=n.getValue(a))==null||l.set(o)})}),t.forEach(n=>n.measureEndState()),t.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}anyNeedsMeasurement=!1,isScheduled=!1,toResolve.forEach(t=>t.complete(isForced)),toResolve.clear()}function readAllKeyframes(){toResolve.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(anyNeedsMeasurement=!0)})}function flushKeyframeResolvers(){isForced=!0,readAllKeyframes(),measureAllKeyframes(),isForced=!1}class KeyframeResolver{constructor(e,r,n,s,a,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=r,this.name=n,this.motionValue=s,this.element=a,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(toResolve.add(this),isScheduled||(isScheduled=!0,frame.read(readAllKeyframes),frame.resolveKeyframes(measureAllKeyframes))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:r,element:n,motionValue:s}=this;if(e[0]===null){const a=s==null?void 0:s.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(n&&r){const l=n.readValue(r,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),s&&a===void 0&&s.set(e[0])}fillWildcards(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),toResolve.delete(this)}cancel(){this.state==="scheduled"&&(toResolve.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const isCSSVar=t=>t.startsWith("--");function setStyle(t,e,r){isCSSVar(e)?t.style.setProperty(e,r):t.style[e]=r}const supportsScrollTimeline=memo(()=>window.ScrollTimeline!==void 0),supportsFlags={};function memoSupports(t,e){const r=memo(t);return()=>supportsFlags[e]??r()}const supportsLinearEasing=memoSupports(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),cubicBezierAsString=([t,e,r,n])=>`cubic-bezier(${t}, ${e}, ${r}, ${n})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(t,e){if(t)return typeof t=="function"?supportsLinearEasing()?generateLinearEasing(t,e):"ease-out":isBezierDefinition(t)?cubicBezierAsString(t):Array.isArray(t)?t.map(r=>mapEasingToNativeEasing(r,e)||supportedWaapiEasing.easeOut):supportedWaapiEasing[t]}function startWaapiAnimation(t,e,r,{delay:n=0,duration:s=300,repeat:a=0,repeatType:o="loop",ease:l="easeOut",times:c}={},d=void 0){const p={[e]:r};c&&(p.offset=c);const g=mapEasingToNativeEasing(l,s);Array.isArray(g)&&(p.easing=g);const y={delay:n,duration:s,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"};return d&&(y.pseudoElement=d),t.animate(p,y)}function isGenerator(t){return typeof t=="function"&&"applyToOptions"in t}function applyGeneratorOptions({type:t,...e}){return isGenerator(t)&&supportsLinearEasing()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class NativeAnimation extends WithPromise{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:r,name:n,keyframes:s,pseudoElement:a,allowFlatten:o=!1,finalKeyframe:l,onComplete:c}=e;this.isPseudoElement=!!a,this.allowFlatten=o,this.options=e,invariant(typeof e.type!="string");const d=applyGeneratorOptions(e);this.animation=startWaapiAnimation(r,n,s,d,a),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const p=getFinalKeyframe$1(s,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(p):setStyle(r,n,p),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,r;(r=(e=this.animation).finish)==null||r.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,r;this.isPseudoElement||(r=(e=this.animation).commitStyles)==null||r.call(e)}get duration(){var r,n;const e=((n=(r=this.animation.effect)==null?void 0:r.getComputedTiming)==null?void 0:n.call(r).duration)||0;return millisecondsToSeconds(Number(e))}get time(){return millisecondsToSeconds(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=secondsToMilliseconds(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:r}){var n;return this.allowFlatten&&((n=this.animation.effect)==null||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&supportsScrollTimeline()?(this.animation.timeline=e,noop$1):r(this)}}const unsupportedEasingFunctions={anticipate,backInOut,circInOut};function isUnsupportedEase(t){return t in unsupportedEasingFunctions}function replaceStringEasing(t){typeof t.ease=="string"&&isUnsupportedEase(t.ease)&&(t.ease=unsupportedEasingFunctions[t.ease])}const sampleDelta=10;class NativeAnimationExtended extends NativeAnimation{constructor(e){replaceStringEasing(e),replaceTransitionType(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:r,onUpdate:n,onComplete:s,element:a,...o}=this.options;if(!r)return;if(e!==void 0){r.set(e);return}const l=new JSAnimation({...o,autoplay:!1}),c=secondsToMilliseconds(this.finishedTime??this.time);r.setWithVelocity(l.sample(c-sampleDelta).value,l.sample(c).value,sampleDelta),l.stop()}}const isAnimatable=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(complex.test(t)||t==="0")&&!t.startsWith("url("));function hasKeyframesChanged(t){const e=t[0];if(t.length===1)return!0;for(let r=0;r<t.length;r++)if(t[r]!==e)return!0}function canAnimate(t,e,r,n){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],o=isAnimatable(s,e),l=isAnimatable(a,e);return!o||!l?!1:hasKeyframesChanged(t)||(r==="spring"||isGenerator(r))&&n}function isHTMLElement$2(t){return isObject(t)&&"offsetHeight"in t}const acceleratedValues=new Set(["opacity","clipPath","filter","transform"]),supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function supportsBrowserAnimation(t){var d;const{motionValue:e,name:r,repeatDelay:n,repeatType:s,damping:a,type:o}=t;if(!isHTMLElement$2((d=e==null?void 0:e.owner)==null?void 0:d.current))return!1;const{onUpdate:l,transformTemplate:c}=e.owner.getProps();return supportsWaapi()&&r&&acceleratedValues.has(r)&&(r!=="transform"||!c)&&!l&&!n&&s!=="mirror"&&a!==0&&o!=="inertia"}const MAX_RESOLVE_DELAY=40;class AsyncMotionValueAnimation extends WithPromise{constructor({autoplay:e=!0,delay:r=0,type:n="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:o="loop",keyframes:l,name:c,motionValue:d,element:p,...g}){var E;super(),this.stop=()=>{var S,k;this._animation&&(this._animation.stop(),(S=this.stopTimeline)==null||S.call(this)),(k=this.keyframeResolver)==null||k.cancel()},this.createdAt=time.now();const y={autoplay:e,delay:r,type:n,repeat:s,repeatDelay:a,repeatType:o,name:c,motionValue:d,element:p,...g},x=(p==null?void 0:p.KeyframeResolver)||KeyframeResolver;this.keyframeResolver=new x(l,(S,k,C)=>this.onKeyframesResolved(S,k,y,!C),c,d,p),(E=this.keyframeResolver)==null||E.scheduleResolve()}onKeyframesResolved(e,r,n,s){this.keyframeResolver=void 0;const{name:a,type:o,velocity:l,delay:c,isHandoff:d,onUpdate:p}=n;this.resolvedAt=time.now(),canAnimate(e,a,o,l)||((MotionGlobalConfig.instantAnimations||!c)&&(p==null||p(getFinalKeyframe$1(e,n,r))),e[0]=e[e.length-1],n.duration=0,n.repeat=0);const y={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>MAX_RESOLVE_DELAY?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...n,keyframes:e},x=!d&&supportsBrowserAnimation(y)?new NativeAnimationExtended({...y,element:y.motionValue.owner.current}):new JSAnimation(y);x.finished.then(()=>this.notifyFinished()).catch(noop$1),this.pendingTimeline&&(this.stopTimeline=x.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=x}get finished(){return this._animation?this.animation.finished:this._finished}then(e,r){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),flushKeyframeResolvers()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const splitCSSVariableRegex=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function parseCSSVariable(t){const e=splitCSSVariableRegex.exec(t);if(!e)return[,];const[,r,n,s]=e;return[`--${r??n}`,s]}function getVariableValue(t,e,r=1){const[n,s]=parseCSSVariable(t);if(!n)return;const a=window.getComputedStyle(e).getPropertyValue(n);if(a){const o=a.trim();return isNumericalString(o)?parseFloat(o):o}return isCSSVariableToken(s)?getVariableValue(s,e,r+1):s}function getValueTransition(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const positionalKeys=new Set(["width","height","top","left","right","bottom",...transformPropOrder]),auto$1={test:t=>t==="auto",parse:t=>t},testValueType=t=>e=>e.test(t),dimensionValueTypes=[number,px,percent,degrees,vw,vh,auto$1],findDimensionValueType=t=>dimensionValueTypes.find(testValueType(t));function isNone(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||isZeroValueString(t):!0}const maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(t){const[e,r]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=r.match(floatRegex)||[];if(!n)return t;const s=r.replace(n,"");let a=maxDefaults.has(e)?1:0;return n!==r&&(a*=100),e+"("+a+s+")"}const functionRegex=/\b([a-z-]*)\(.*?\)/gu,filter={...complex,getAnimatableNone:t=>{const e=t.match(functionRegex);return e?e.map(applyDefaultFilter).join(" "):t}},int={...number,transform:Math.round},transformValueTypes={rotate:degrees,rotateX:degrees,rotateY:degrees,rotateZ:degrees,scale,scaleX:scale,scaleY:scale,scaleZ:scale,skew:degrees,skewX:degrees,skewY:degrees,distance:px,translateX:px,translateY:px,translateZ:px,x:px,y:px,z:px,perspective:px,transformPerspective:px,opacity:alpha,originX:progressPercentage,originY:progressPercentage,originZ:px},numberValueTypes={borderWidth:px,borderTopWidth:px,borderRightWidth:px,borderBottomWidth:px,borderLeftWidth:px,borderRadius:px,radius:px,borderTopLeftRadius:px,borderTopRightRadius:px,borderBottomRightRadius:px,borderBottomLeftRadius:px,width:px,maxWidth:px,height:px,maxHeight:px,top:px,right:px,bottom:px,left:px,padding:px,paddingTop:px,paddingRight:px,paddingBottom:px,paddingLeft:px,margin:px,marginTop:px,marginRight:px,marginBottom:px,marginLeft:px,backgroundPositionX:px,backgroundPositionY:px,...transformValueTypes,zIndex:int,fillOpacity:alpha,strokeOpacity:alpha,numOctaves:int},defaultValueTypes={...numberValueTypes,color:color$1,backgroundColor:color$1,outlineColor:color$1,fill:color$1,stroke:color$1,borderColor:color$1,borderTopColor:color$1,borderRightColor:color$1,borderBottomColor:color$1,borderLeftColor:color$1,filter,WebkitFilter:filter},getDefaultValueType=t=>defaultValueTypes[t];function getAnimatableNone(t,e){let r=getDefaultValueType(t);return r!==filter&&(r=complex),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const invalidTemplates=new Set(["auto","none","0"]);function makeNoneKeyframesAnimatable(t,e,r){let n=0,s;for(;n<t.length&&!s;){const a=t[n];typeof a=="string"&&!invalidTemplates.has(a)&&analyseComplexValue(a).values.length&&(s=t[n]),n++}if(s&&r)for(const a of e)t[a]=getAnimatableNone(r,s)}class DOMKeyframesResolver extends KeyframeResolver{constructor(e,r,n,s,a){super(e,r,n,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let d=e[c];if(typeof d=="string"&&(d=d.trim(),isCSSVariableToken(d))){const p=getVariableValue(d,r.current);p!==void 0&&(e[c]=p),c===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!positionalKeys.has(n)||e.length!==2)return;const[s,a]=e,o=findDimensionValueType(s),l=findDimensionValueType(a);if(o!==l)if(isNumOrPxType(o)&&isNumOrPxType(l))for(let c=0;c<e.length;c++){const d=e[c];typeof d=="string"&&(e[c]=parseFloat(d))}else positionalValues[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:r}=this,n=[];for(let s=0;s<e.length;s++)(e[s]===null||isNone(e[s]))&&n.push(s);n.length&&makeNoneKeyframesAnimatable(e,n,r)}measureInitialState(){const{element:e,unresolvedKeyframes:r,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=positionalValues[n](e.measureViewportBox(),window.getComputedStyle(e.current)),r[0]=this.measuredOrigin;const s=r[r.length-1];s!==void 0&&e.getValue(n,s).jump(s,!1)}measureEndState(){var l;const{element:e,name:r,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const s=e.getValue(r);s&&s.jump(this.measuredOrigin,!1);const a=n.length-1,o=n[a];n[a]=positionalValues[r](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,d])=>{e.getValue(c).set(d)}),this.resolveNoneKeyframes()}}function resolveElements(t,e,r){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let n=document;const s=(r==null?void 0:r[t])??n.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}const MAX_VELOCITY_DELTA=30,isFloat=t=>!isNaN(parseFloat(t));class MotionValue{constructor(e,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,s=!0)=>{var o,l;const a=time.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty();s&&((l=this.events.renderRequest)==null||l.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=r.owner}setCurrent(e){this.current=e,this.updatedAt=time.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=isFloat(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new SubscriptionManager);const n=this.events[e].add(r);return e==="change"?()=>{n(),frame.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e,r=!0){!r||!this.passiveEffect?this.updateAndNotify(e,r):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,r=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=time.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>MAX_VELOCITY_DELTA)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,MAX_VELOCITY_DELTA);return velocityPerSecond(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,r;(e=this.dependents)==null||e.clear(),(r=this.events.destroy)==null||r.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(t,e){return new MotionValue(t,e)}const getValueAsType=(t,e)=>e&&typeof t=="number"?e.transform(t):t,{schedule:microtask}=createRenderBatcher(queueMicrotask,!1),isDragging={x:!1,y:!1};function isDragActive(){return isDragging.x||isDragging.y}function setDragLock(t){return t==="x"||t==="y"?isDragging[t]?null:(isDragging[t]=!0,()=>{isDragging[t]=!1}):isDragging.x||isDragging.y?null:(isDragging.x=isDragging.y=!0,()=>{isDragging.x=isDragging.y=!1})}function setupGesture(t,e){const r=resolveElements(t),n=new AbortController,s={passive:!0,...e,signal:n.signal};return[r,s,()=>n.abort()]}function isValidHover(t){return!(t.pointerType==="touch"||isDragActive())}function hover(t,e,r={}){const[n,s,a]=setupGesture(t,r),o=l=>{if(!isValidHover(l))return;const{target:c}=l,d=e(c,l);if(typeof d!="function"||!c)return;const p=g=>{isValidHover(g)&&(d(g),c.removeEventListener("pointerleave",p))};c.addEventListener("pointerleave",p,s)};return n.forEach(l=>{l.addEventListener("pointerenter",o,s)}),a}const isNodeOrChild=(t,e)=>e?t===e?!0:isNodeOrChild(t,e.parentElement):!1,isPrimaryPointer=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,focusableElements=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function isElementKeyboardAccessible(t){return focusableElements.has(t.tagName)||t.tabIndex!==-1}const isPressing=new WeakSet;function filterEvents(t){return e=>{e.key==="Enter"&&t(e)}}function firePointerEvent(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const enableKeyboardPress=(t,e)=>{const r=t.currentTarget;if(!r)return;const n=filterEvents(()=>{if(isPressing.has(r))return;firePointerEvent(r,"down");const s=filterEvents(()=>{firePointerEvent(r,"up")}),a=()=>firePointerEvent(r,"cancel");r.addEventListener("keyup",s,e),r.addEventListener("blur",a,e)});r.addEventListener("keydown",n,e),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),e)};function isValidPressEvent(t){return isPrimaryPointer(t)&&!isDragActive()}function press(t,e,r={}){const[n,s,a]=setupGesture(t,r),o=l=>{const c=l.currentTarget;if(!isValidPressEvent(l))return;isPressing.add(c);const d=e(c,l),p=(x,E)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",y),isPressing.has(c)&&isPressing.delete(c),isValidPressEvent(x)&&typeof d=="function"&&d(x,{success:E})},g=x=>{p(x,c===window||c===document||r.useGlobalTarget||isNodeOrChild(c,x.target))},y=x=>{p(x,!1)};window.addEventListener("pointerup",g,s),window.addEventListener("pointercancel",y,s)};return n.forEach(l=>{(r.useGlobalTarget?window:l).addEventListener("pointerdown",o,s),isHTMLElement$2(l)&&(l.addEventListener("focus",d=>enableKeyboardPress(d,s)),!isElementKeyboardAccessible(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),a}function isSVGElement$1(t){return isObject(t)&&"ownerSVGElement"in t}function isSVGSVGElement(t){return isSVGElement$1(t)&&t.tagName==="svg"}const isMotionValue=t=>!!(t&&t.getVelocity),valueTypes=[...dimensionValueTypes,color$1,complex],findValueType=t=>valueTypes.find(testValueType(t)),MotionConfigContext=reactExports.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class PopChildMeasure extends reactExports.Component{getSnapshotBeforeUpdate(e){const r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){const n=r.offsetParent,s=isHTMLElement$2(n)&&n.offsetWidth||0,a=this.props.sizeRef.current;a.height=r.offsetHeight||0,a.width=r.offsetWidth||0,a.top=r.offsetTop,a.left=r.offsetLeft,a.right=s-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function PopChild({children:t,isPresent:e,anchorX:r}){const n=reactExports.useId(),s=reactExports.useRef(null),a=reactExports.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=reactExports.useContext(MotionConfigContext);return reactExports.useInsertionEffect(()=>{const{width:l,height:c,top:d,left:p,right:g}=a.current;if(e||!s.current||!l||!c)return;const y=r==="left"?`left: ${p}`:`right: ${g}`;s.current.dataset.motionPopId=n;const x=document.createElement("style");return o&&(x.nonce=o),document.head.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${c}px !important;
            ${y}px !important;
            top: ${d}px !important;
          }
        `),()=>{document.head.contains(x)&&document.head.removeChild(x)}},[e]),jsxRuntimeExports.jsx(PopChildMeasure,{isPresent:e,childRef:s,sizeRef:a,children:reactExports.cloneElement(t,{ref:s})})}const PresenceChild=({children:t,initial:e,isPresent:r,onExitComplete:n,custom:s,presenceAffectsLayout:a,mode:o,anchorX:l})=>{const c=useConstant(newChildrenMap),d=reactExports.useId();let p=!0,g=reactExports.useMemo(()=>(p=!1,{id:d,initial:e,isPresent:r,custom:s,onExitComplete:y=>{c.set(y,!0);for(const x of c.values())if(!x)return;n&&n()},register:y=>(c.set(y,!1),()=>c.delete(y))}),[r,c,n]);return a&&p&&(g={...g}),reactExports.useMemo(()=>{c.forEach((y,x)=>c.set(x,!1))},[r]),reactExports.useEffect(()=>{!r&&!c.size&&n&&n()},[r]),o==="popLayout"&&(t=jsxRuntimeExports.jsx(PopChild,{isPresent:r,anchorX:l,children:t})),jsxRuntimeExports.jsx(PresenceContext.Provider,{value:g,children:t})};function newChildrenMap(){return new Map}function usePresence$1(t=!0){const e=reactExports.useContext(PresenceContext);if(e===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:s}=e,a=reactExports.useId();reactExports.useEffect(()=>{if(t)return s(a)},[t]);const o=reactExports.useCallback(()=>t&&n&&n(a),[a,n,t]);return!r&&n?[!1,o]:[!0]}const getChildKey=t=>t.key||"";function onlyElements(t){const e=[];return reactExports.Children.forEach(t,r=>{reactExports.isValidElement(r)&&e.push(r)}),e}const AnimatePresence=({children:t,custom:e,initial:r=!0,onExitComplete:n,presenceAffectsLayout:s=!0,mode:a="sync",propagate:o=!1,anchorX:l="left"})=>{const[c,d]=usePresence$1(o),p=reactExports.useMemo(()=>onlyElements(t),[t]),g=o&&!c?[]:p.map(getChildKey),y=reactExports.useRef(!0),x=reactExports.useRef(p),E=useConstant(()=>new Map),[S,k]=reactExports.useState(p),[C,P]=reactExports.useState(p);useIsomorphicLayoutEffect$2(()=>{y.current=!1,x.current=p;for(let I=0;I<C.length;I++){const O=getChildKey(C[I]);g.includes(O)?E.delete(O):E.get(O)!==!0&&E.set(O,!1)}},[C,g.length,g.join("-")]);const R=[];if(p!==S){let I=[...p];for(let O=0;O<C.length;O++){const L=C[O],B=getChildKey(L);g.includes(B)||(I.splice(O,0,L),R.push(L))}return a==="wait"&&R.length&&(I=R),P(onlyElements(I)),k(p),null}const{forceRender:j}=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:C.map(I=>{const O=getChildKey(I),L=o&&!c?!1:p===C||g.includes(O),B=()=>{if(E.has(O))E.set(O,!0);else return;let Z=!0;E.forEach(te=>{te||(Z=!1)}),Z&&(j==null||j(),P(x.current),o&&(d==null||d()),n&&n())};return jsxRuntimeExports.jsx(PresenceChild,{isPresent:L,initial:!y.current||r?void 0:!1,custom:e,presenceAffectsLayout:s,mode:a,onExitComplete:L?void 0:B,anchorX:l,children:I},O)})})},LazyContext=reactExports.createContext({strict:!1}),featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},featureDefinitions={};for(const t in featureProps)featureDefinitions[t]={isEnabled:e=>featureProps[t].some(r=>!!e[r])};function loadFeatures(t){for(const e in t)featureDefinitions[e]={...featureDefinitions[e],...t[e]}}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function isValidMotionProp(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||validMotionProps.has(t)}let shouldForward=t=>!isValidMotionProp(t);function loadExternalIsValidProp(t){t&&(shouldForward=e=>e.startsWith("on")?!isValidMotionProp(e):t(e))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps(t,e,r){const n={};for(const s in t)s==="values"&&typeof t.values=="object"||(shouldForward(s)||r===!0&&isValidMotionProp(s)||!e&&!isValidMotionProp(s)||t.draggable&&s.startsWith("onDrag"))&&(n[s]=t[s]);return n}function createDOMMotionComponentProxy(t){if(typeof Proxy>"u")return t;const e=new Map,r=(...n)=>t(...n);return new Proxy(r,{get:(n,s)=>s==="create"?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}const MotionContext=reactExports.createContext({});function isAnimationControls(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function isVariantLabel(t){return typeof t=="string"||Array.isArray(t)}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder];function isControllingVariants(t){return isAnimationControls(t.animate)||variantProps.some(e=>isVariantLabel(t[e]))}function isVariantNode(t){return!!(isControllingVariants(t)||t.variants)}function getCurrentTreeVariants(t,e){if(isControllingVariants(t)){const{initial:r,animate:n}=t;return{initial:r===!1||isVariantLabel(r)?r:void 0,animate:isVariantLabel(n)?n:void 0}}return t.inherit!==!1?e:{}}function useCreateMotionContext(t){const{initial:e,animate:r}=getCurrentTreeVariants(t,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:e,animate:r}),[variantLabelsAsDependency(e),variantLabelsAsDependency(r)])}function variantLabelsAsDependency(t){return Array.isArray(t)?t.join(" "):t}const motionComponentSymbol=Symbol.for("motionComponentSymbol");function isRefObject(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function useMotionRef(t,e,r){return reactExports.useCallback(n=>{n&&t.onMount&&t.onMount(n),e&&(n?e.mount(n):e.unmount()),r&&(typeof r=="function"?r(n):isRefObject(r)&&(r.current=n))},[e])}const camelToDash=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId),SwitchLayoutGroupContext=reactExports.createContext({});function useVisualElement(t,e,r,n,s){var S,k;const{visualElement:a}=reactExports.useContext(MotionContext),o=reactExports.useContext(LazyContext),l=reactExports.useContext(PresenceContext),c=reactExports.useContext(MotionConfigContext).reducedMotion,d=reactExports.useRef(null);n=n||o.renderer,!d.current&&n&&(d.current=n(t,{visualState:e,parent:a,props:r,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const p=d.current,g=reactExports.useContext(SwitchLayoutGroupContext);p&&!p.projection&&s&&(p.type==="html"||p.type==="svg")&&createProjectionNode$1(d.current,r,s,g);const y=reactExports.useRef(!1);reactExports.useInsertionEffect(()=>{p&&y.current&&p.update(r,l)});const x=r[optimizedAppearDataAttribute],E=reactExports.useRef(!!x&&!((S=window.MotionHandoffIsComplete)!=null&&S.call(window,x))&&((k=window.MotionHasOptimisedAnimation)==null?void 0:k.call(window,x)));return useIsomorphicLayoutEffect$2(()=>{p&&(y.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),microtask.render(p.render),E.current&&p.animationState&&p.animationState.animateChanges())}),reactExports.useEffect(()=>{p&&(!E.current&&p.animationState&&p.animationState.animateChanges(),E.current&&(queueMicrotask(()=>{var C;(C=window.MotionHandoffMarkAsComplete)==null||C.call(window,x)}),E.current=!1))}),p}function createProjectionNode$1(t,e,r,n){const{layoutId:s,layout:a,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:d,layoutCrossfade:p}=e;t.projection=new r(t.latestValues,e["data-framer-portal-id"]?void 0:getClosestProjectingNode(t.parent)),t.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!o||l&&isRefObject(l),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:n,crossfade:p,layoutScroll:c,layoutRoot:d})}function getClosestProjectingNode(t){if(t)return t.options.allowProjection!==!1?t.projection:getClosestProjectingNode(t.parent)}function createRendererMotionComponent({preloadedFeatures:t,createVisualElement:e,useRender:r,useVisualState:n,Component:s}){t&&loadFeatures(t);function a(l,c){let d;const p={...reactExports.useContext(MotionConfigContext),...l,layoutId:useLayoutId(l)},{isStatic:g}=p,y=useCreateMotionContext(l),x=n(l,g);if(!g&&isBrowser$2){useStrictMode();const E=getProjectionFunctionality(p);d=E.MeasureLayout,y.visualElement=useVisualElement(s,x,p,e,E.ProjectionNode)}return jsxRuntimeExports.jsxs(MotionContext.Provider,{value:y,children:[d&&y.visualElement?jsxRuntimeExports.jsx(d,{visualElement:y.visualElement,...p}):null,r(s,l,useMotionRef(x,y.visualElement,c),x,g,y.visualElement)]})}a.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const o=reactExports.forwardRef(a);return o[motionComponentSymbol]=s,o}function useLayoutId({layoutId:t}){const e=reactExports.useContext(LayoutGroupContext).id;return e&&t!==void 0?e+"-"+t:t}function useStrictMode(t,e){reactExports.useContext(LazyContext).strict}function getProjectionFunctionality(t){const{drag:e,layout:r}=featureDefinitions;if(!e&&!r)return{};const n={...e,...r};return{MeasureLayout:e!=null&&e.isEnabled(t)||r!=null&&r.isEnabled(t)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const scaleCorrectors={};function addScaleCorrector(t){for(const e in t)scaleCorrectors[e]=t[e],isCSSVariableName(e)&&(scaleCorrectors[e].isCSSVariable=!0)}function isForcedMotionValue(t,{layout:e,layoutId:r}){return transformProps.has(t)||t.startsWith("origin")||(e||r!==void 0)&&(!!scaleCorrectors[t]||t==="opacity")}const translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(t,e,r){let n="",s=!0;for(let a=0;a<numTransforms;a++){const o=transformPropOrder[a],l=t[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||r){const d=getValueAsType(l,numberValueTypes[o]);if(!c){s=!1;const p=translateAlias[o]||o;n+=`${p}(${d}) `}r&&(e[o]=d)}}return n=n.trim(),r?n=r(e,s?"":n):s&&(n="none"),n}function buildHTMLStyles(t,e,r){const{style:n,vars:s,transformOrigin:a}=t;let o=!1,l=!1;for(const c in e){const d=e[c];if(transformProps.has(c)){o=!0;continue}else if(isCSSVariableName(c)){s[c]=d;continue}else{const p=getValueAsType(d,numberValueTypes[c]);c.startsWith("origin")?(l=!0,a[c]=p):n[c]=p}}if(e.transform||(o||r?n.transform=buildTransform(e,t.transform,r):n.transform&&(n.transform="none")),l){const{originX:c="50%",originY:d="50%",originZ:p=0}=a;n.transformOrigin=`${c} ${d} ${p}`}}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function copyRawValuesOnly(t,e,r){for(const n in e)!isMotionValue(e[n])&&!isForcedMotionValue(n,r)&&(t[n]=e[n])}function useInitialMotionValues({transformTemplate:t},e){return reactExports.useMemo(()=>{const r=createHtmlRenderState();return buildHTMLStyles(r,e,t),Object.assign({},r.vars,r.style)},[e])}function useStyle(t,e){const r=t.style||{},n={};return copyRawValuesOnly(n,r,t),Object.assign(n,useInitialMotionValues(t,e)),n}function useHTMLProps(t,e){const r={},n=useStyle(t,e);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=n,r}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(t,e,r=1,n=0,s=!0){t.pathLength=1;const a=s?dashKeys:camelKeys;t[a.offset]=px.transform(-n);const o=px.transform(e),l=px.transform(r);t[a.array]=`${o} ${l}`}function buildSVGAttrs(t,{attrX:e,attrY:r,attrScale:n,pathLength:s,pathSpacing:a=1,pathOffset:o=0,...l},c,d,p){if(buildHTMLStyles(t,l,d),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:g,style:y}=t;g.transform&&(y.transform=g.transform,delete g.transform),(y.transform||g.transformOrigin)&&(y.transformOrigin=g.transformOrigin??"50% 50%",delete g.transformOrigin),y.transform&&(y.transformBox=(p==null?void 0:p.transformBox)??"fill-box",delete g.transformBox),e!==void 0&&(g.x=e),r!==void 0&&(g.y=r),n!==void 0&&(g.scale=n),s!==void 0&&buildSVGPath(g,s,a,o,!1)}const createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}}),isSVGTag=t=>typeof t=="string"&&t.toLowerCase()==="svg";function useSVGProps(t,e,r,n){const s=reactExports.useMemo(()=>{const a=createSvgRenderState();return buildSVGAttrs(a,e,isSVGTag(n),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};copyRawValuesOnly(a,t.style,t),s.style={...a,...s.style}}return s}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(t){return typeof t!="string"||t.includes("-")?!1:!!(lowercaseSVGElements.indexOf(t)>-1||/[A-Z]/u.test(t))}function createUseRender(t=!1){return(r,n,s,{latestValues:a},o)=>{const c=(isSVGComponent(r)?useSVGProps:useHTMLProps)(n,a,o,r),d=filterProps(n,typeof r=="string",t),p=r!==reactExports.Fragment?{...d,...c,ref:s}:{},{children:g}=n,y=reactExports.useMemo(()=>isMotionValue(g)?g.get():g,[g]);return reactExports.createElement(r,{...p,children:y})}}function getValueState(t){const e=[{},{}];return t==null||t.values.forEach((r,n)=>{e[0][n]=r.get(),e[1][n]=r.getVelocity()}),e}function resolveVariantFromProps(t,e,r,n){if(typeof e=="function"){const[s,a]=getValueState(n);e=e(r!==void 0?r:t.custom,s,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,a]=getValueState(n);e=e(r!==void 0?r:t.custom,s,a)}return e}function resolveMotionValue(t){return isMotionValue(t)?t.get():t}function makeState({scrapeMotionValuesFromProps:t,createRenderState:e},r,n,s){return{latestValues:makeLatestValues(r,n,s,t),renderState:e()}}const makeUseVisualState=t=>(e,r)=>{const n=reactExports.useContext(MotionContext),s=reactExports.useContext(PresenceContext),a=()=>makeState(t,e,n,s);return r?a():useConstant(a)};function makeLatestValues(t,e,r,n){const s={},a=n(t,{});for(const y in a)s[y]=resolveMotionValue(a[y]);let{initial:o,animate:l}=t;const c=isControllingVariants(t),d=isVariantNode(t);e&&d&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let p=r?r.initial===!1:!1;p=p||o===!1;const g=p?l:o;if(g&&typeof g!="boolean"&&!isAnimationControls(g)){const y=Array.isArray(g)?g:[g];for(let x=0;x<y.length;x++){const E=resolveVariantFromProps(t,y[x]);if(E){const{transitionEnd:S,transition:k,...C}=E;for(const P in C){let R=C[P];if(Array.isArray(R)){const j=p?R.length-1:0;R=R[j]}R!==null&&(s[P]=R)}for(const P in S)s[P]=S[P]}}}return s}function scrapeMotionValuesFromProps$1(t,e,r){var a;const{style:n}=t,s={};for(const o in n)(isMotionValue(n[o])||e.style&&isMotionValue(e.style[o])||isForcedMotionValue(o,t)||((a=r==null?void 0:r.getValue(o))==null?void 0:a.liveStyle)!==void 0)&&(s[o]=n[o]);return s}const htmlMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState})};function scrapeMotionValuesFromProps(t,e,r){const n=scrapeMotionValuesFromProps$1(t,e,r);for(const s in t)if(isMotionValue(t[s])||isMotionValue(e[s])){const a=transformPropOrder.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[a]=t[s]}return n}const svgMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState})};function createMotionComponentFactory(t,e){return function(n,{forwardMotionProps:s}={forwardMotionProps:!1}){const o={...isSVGComponent(n)?svgMotionConfig:htmlMotionConfig,preloadedFeatures:t,useRender:createUseRender(s),createVisualElement:e,Component:n};return createRendererMotionComponent(o)}}function resolveVariant(t,e,r){const n=t.getProps();return resolveVariantFromProps(n,e,r!==void 0?r:n.custom,t)}const isKeyframesTarget=t=>Array.isArray(t);function setMotionValue(t,e,r){t.hasValue(e)?t.getValue(e).set(r):t.addValue(e,motionValue(r))}function resolveFinalValueInKeyframes(t){return isKeyframesTarget(t)?t[t.length-1]||0:t}function setTarget(t,e){const r=resolveVariant(t,e);let{transitionEnd:n={},transition:s={},...a}=r||{};a={...a,...n};for(const o in a){const l=resolveFinalValueInKeyframes(a[o]);setMotionValue(t,o,l)}}function isWillChangeMotionValue(t){return!!(isMotionValue(t)&&t.add)}function addValueToWillChange(t,e){const r=t.getValue("willChange");if(isWillChangeMotionValue(r))return r.add(e);if(!r&&MotionGlobalConfig.WillChange){const n=new MotionGlobalConfig.WillChange("auto");t.addValue("willChange",n),n.add(e)}}function getOptimisedAppearId(t){return t.props[optimizedAppearDataAttribute]}const isNotNull$1=t=>t!==null;function getFinalKeyframe(t,{repeat:e,repeatType:r="loop"},n){const s=t.filter(isNotNull$1),a=e&&r!=="loop"&&e%2===1?0:s.length-1;return s[a]}const underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(t,{keyframes:e})=>e.length>2?keyframesTransition:transformProps.has(t)?t.startsWith("scale")?criticallyDampedSpring(e[1]):underDampedSpring:ease;function isTransitionDefined({when:t,delay:e,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:a,repeatType:o,repeatDelay:l,from:c,elapsed:d,...p}){return!!Object.keys(p).length}const animateMotionValue=(t,e,r,n={},s,a)=>o=>{const l=getValueTransition(n,t)||{},c=l.delay||n.delay||0;let{elapsed:d=0}=n;d=d-secondsToMilliseconds(c);const p={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-d,onUpdate:y=>{e.set(y),l.onUpdate&&l.onUpdate(y)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:a?void 0:s};isTransitionDefined(l)||Object.assign(p,getDefaultTransition(t,p)),p.duration&&(p.duration=secondsToMilliseconds(p.duration)),p.repeatDelay&&(p.repeatDelay=secondsToMilliseconds(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let g=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(p.duration=0,p.delay===0&&(g=!0)),(MotionGlobalConfig.instantAnimations||MotionGlobalConfig.skipAnimations)&&(g=!0,p.duration=0,p.delay=0),p.allowFlatten=!l.type&&!l.ease,g&&!a&&e.get()!==void 0){const y=getFinalKeyframe(p.keyframes,l);if(y!==void 0){frame.update(()=>{p.onUpdate(y),p.onComplete()});return}}return l.isSync?new JSAnimation(p):new AsyncMotionValueAnimation(p)};function shouldBlockAnimation({protectedKeys:t,needsAnimating:e},r){const n=t.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,n}function animateTarget(t,e,{delay:r=0,transitionOverride:n,type:s}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:o,...l}=e;n&&(a=n);const c=[],d=s&&t.animationState&&t.animationState.getState()[s];for(const p in l){const g=t.getValue(p,t.latestValues[p]??null),y=l[p];if(y===void 0||d&&shouldBlockAnimation(d,p))continue;const x={delay:r,...getValueTransition(a||{},p)},E=g.get();if(E!==void 0&&!g.isAnimating&&!Array.isArray(y)&&y===E&&!x.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const C=getOptimisedAppearId(t);if(C){const P=window.MotionHandoffAnimation(C,p,frame);P!==null&&(x.startTime=P,S=!0)}}addValueToWillChange(t,p),g.start(animateMotionValue(p,g,y,t.shouldReduceMotion&&positionalKeys.has(p)?{type:!1}:x,t,S));const k=g.animation;k&&c.push(k)}return o&&Promise.all(c).then(()=>{frame.update(()=>{o&&setTarget(t,o)})}),c}function animateVariant(t,e,r={}){var c;const n=resolveVariant(t,e,r.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(s=r.transitionOverride);const a=n?()=>Promise.all(animateTarget(t,n,r)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:p=0,staggerChildren:g,staggerDirection:y}=s;return animateChildren(t,e,p+d,g,y,r)}:()=>Promise.resolve(),{when:l}=s;if(l){const[d,p]=l==="beforeChildren"?[a,o]:[o,a];return d().then(()=>p())}else return Promise.all([a(),o(r.delay)])}function animateChildren(t,e,r=0,n=0,s=1,a){const o=[],l=(t.variantChildren.size-1)*n,c=s===1?(d=0)=>d*n:(d=0)=>l-d*n;return Array.from(t.variantChildren).sort(sortByTreeOrder).forEach((d,p)=>{d.notify("AnimationStart",e),o.push(animateVariant(d,e,{...a,delay:r+c(p)}).then(()=>d.notify("AnimationComplete",e)))}),Promise.all(o)}function sortByTreeOrder(t,e){return t.sortNodePosition(e)}function animateVisualElement(t,e,r={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const s=e.map(a=>animateVariant(t,a,r));n=Promise.all(s)}else if(typeof e=="string")n=animateVariant(t,e,r);else{const s=typeof e=="function"?resolveVariant(t,e,r.custom):e;n=Promise.all(animateTarget(t,s,r))}return n.then(()=>{t.notify("AnimationComplete",e)})}function shallowCompare(t,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}const numVariantProps=variantProps.length;function getVariantContext(t){if(!t)return;if(!t.isControllingVariants){const r=t.parent?getVariantContext(t.parent)||{}:{};return t.props.initial!==void 0&&(r.initial=t.props.initial),r}const e={};for(let r=0;r<numVariantProps;r++){const n=variantProps[r],s=t.props[n];(isVariantLabel(s)||s===!1)&&(e[n]=s)}return e}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function animateList(t){return e=>Promise.all(e.map(({animation:r,options:n})=>animateVisualElement(t,r,n)))}function createAnimationState(t){let e=animateList(t),r=createState(),n=!0;const s=c=>(d,p)=>{var y;const g=resolveVariant(t,p,c==="exit"?(y=t.presenceContext)==null?void 0:y.custom:void 0);if(g){const{transition:x,transitionEnd:E,...S}=g;d={...d,...S,...E}}return d};function a(c){e=c(t)}function o(c){const{props:d}=t,p=getVariantContext(t.parent)||{},g=[],y=new Set;let x={},E=1/0;for(let k=0;k<numAnimationTypes;k++){const C=reversePriorityOrder[k],P=r[C],R=d[C]!==void 0?d[C]:p[C],j=isVariantLabel(R),I=C===c?P.isActive:null;I===!1&&(E=k);let O=R===p[C]&&R!==d[C]&&j;if(O&&n&&t.manuallyAnimateOnMount&&(O=!1),P.protectedKeys={...x},!P.isActive&&I===null||!R&&!P.prevProp||isAnimationControls(R)||typeof R=="boolean")continue;const L=checkVariantsDidChange(P.prevProp,R);let B=L||C===c&&P.isActive&&!O&&j||k>E&&j,Z=!1;const te=Array.isArray(R)?R:[R];let ie=te.reduce(s(C),{});I===!1&&(ie={});const{prevResolvedValues:Q={}}=P,fe={...Q,...ie},se=q=>{B=!0,y.has(q)&&(Z=!0,y.delete(q)),P.needsAnimating[q]=!0;const N=t.getValue(q);N&&(N.liveStyle=!1)};for(const q in fe){const N=ie[q],$=Q[q];if(x.hasOwnProperty(q))continue;let V=!1;isKeyframesTarget(N)&&isKeyframesTarget($)?V=!shallowCompare(N,$):V=N!==$,V?N!=null?se(q):y.add(q):N!==void 0&&y.has(q)?se(q):P.protectedKeys[q]=!0}P.prevProp=R,P.prevResolvedValues=ie,P.isActive&&(x={...x,...ie}),n&&t.blockInitialAnimation&&(B=!1),B&&(!(O&&L)||Z)&&g.push(...te.map(q=>({animation:q,options:{type:C}})))}if(y.size){const k={};if(typeof d.initial!="boolean"){const C=resolveVariant(t,Array.isArray(d.initial)?d.initial[0]:d.initial);C&&C.transition&&(k.transition=C.transition)}y.forEach(C=>{const P=t.getBaseTarget(C),R=t.getValue(C);R&&(R.liveStyle=!0),k[C]=P??null}),g.push({animation:k})}let S=!!g.length;return n&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(S=!1),n=!1,S?e(g):Promise.resolve()}function l(c,d){var g;if(r[c].isActive===d)return Promise.resolve();(g=t.variantChildren)==null||g.forEach(y=>{var x;return(x=y.animationState)==null?void 0:x.setActive(c,d)}),r[c].isActive=d;const p=o(c);for(const y in r)r[y].protectedKeys={};return p}return{animateChanges:o,setActive:l,setAnimateFunction:a,getState:()=>r,reset:()=>{r=createState(),n=!0}}}function checkVariantsDidChange(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!shallowCompare(e,t):!1}function createTypeState(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}class Feature{constructor(e){this.isMounted=!1,this.node=e}update(){}}class AnimationFeature extends Feature{constructor(e){super(e),e.animationState||(e.animationState=createAnimationState(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();isAnimationControls(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let id$1=0;class ExitAnimationFeature extends Feature{constructor(){super(...arguments),this.id=id$1++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const s=this.node.animationState.setActive("exit",!e);r&&!e&&s.then(()=>{r(this.id)})}mount(){const{register:e,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}};function addDomEvent(t,e,r,n={passive:!0}){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r)}function extractEventInfo(t){return{point:{x:t.pageX,y:t.pageY}}}const addPointerInfo=t=>e=>isPrimaryPointer(e)&&t(e,extractEventInfo(e));function addPointerEvent(t,e,r,n){return addDomEvent(t,e,addPointerInfo(r),n)}function convertBoundingBoxToBox({top:t,left:e,right:r,bottom:n}){return{x:{min:e,max:r},y:{min:t,max:n}}}function convertBoxToBoundingBox({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function transformBoxPoints(t,e){if(!e)return t;const r=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}const SCALE_PRECISION=1e-4,SCALE_MIN=1-SCALE_PRECISION,SCALE_MAX=1+SCALE_PRECISION,TRANSLATE_PRECISION=.01,TRANSLATE_MIN=0-TRANSLATE_PRECISION,TRANSLATE_MAX=0+TRANSLATE_PRECISION;function calcLength(t){return t.max-t.min}function isNear(t,e,r){return Math.abs(t-e)<=r}function calcAxisDelta(t,e,r,n=.5){t.origin=n,t.originPoint=mixNumber$1(e.min,e.max,t.origin),t.scale=calcLength(r)/calcLength(e),t.translate=mixNumber$1(r.min,r.max,t.origin)-t.originPoint,(t.scale>=SCALE_MIN&&t.scale<=SCALE_MAX||isNaN(t.scale))&&(t.scale=1),(t.translate>=TRANSLATE_MIN&&t.translate<=TRANSLATE_MAX||isNaN(t.translate))&&(t.translate=0)}function calcBoxDelta(t,e,r,n){calcAxisDelta(t.x,e.x,r.x,n?n.originX:void 0),calcAxisDelta(t.y,e.y,r.y,n?n.originY:void 0)}function calcRelativeAxis(t,e,r){t.min=r.min+e.min,t.max=t.min+calcLength(e)}function calcRelativeBox(t,e,r){calcRelativeAxis(t.x,e.x,r.x),calcRelativeAxis(t.y,e.y,r.y)}function calcRelativeAxisPosition(t,e,r){t.min=e.min-r.min,t.max=t.min+calcLength(e)}function calcRelativePosition(t,e,r){calcRelativeAxisPosition(t.x,e.x,r.x),calcRelativeAxisPosition(t.y,e.y,r.y)}const createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()});function eachAxis(t){return[t("x"),t("y")]}function isIdentityScale(t){return t===void 0||t===1}function hasScale({scale:t,scaleX:e,scaleY:r}){return!isIdentityScale(t)||!isIdentityScale(e)||!isIdentityScale(r)}function hasTransform(t){return hasScale(t)||has2DTranslate(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function has2DTranslate(t){return is2DTranslate(t.x)||is2DTranslate(t.y)}function is2DTranslate(t){return t&&t!=="0%"}function scalePoint(t,e,r){const n=t-r,s=e*n;return r+s}function applyPointDelta(t,e,r,n,s){return s!==void 0&&(t=scalePoint(t,s,n)),scalePoint(t,r,n)+e}function applyAxisDelta(t,e=0,r=1,n,s){t.min=applyPointDelta(t.min,e,r,n,s),t.max=applyPointDelta(t.max,e,r,n,s)}function applyBoxDelta(t,{x:e,y:r}){applyAxisDelta(t.x,e.translate,e.scale,e.originPoint),applyAxisDelta(t.y,r.translate,r.scale,r.originPoint)}const TREE_SCALE_SNAP_MIN=.999999999999,TREE_SCALE_SNAP_MAX=1.0000000000001;function applyTreeDeltas(t,e,r,n=!1){const s=r.length;if(!s)return;e.x=e.y=1;let a,o;for(let l=0;l<s;l++){a=r[l],o=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(n&&a.options.layoutScroll&&a.scroll&&a!==a.root&&transformBox(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,applyBoxDelta(t,o)),n&&hasTransform(a.latestValues)&&transformBox(t,a.latestValues))}e.x<TREE_SCALE_SNAP_MAX&&e.x>TREE_SCALE_SNAP_MIN&&(e.x=1),e.y<TREE_SCALE_SNAP_MAX&&e.y>TREE_SCALE_SNAP_MIN&&(e.y=1)}function translateAxis(t,e){t.min=t.min+e,t.max=t.max+e}function transformAxis(t,e,r,n,s=.5){const a=mixNumber$1(t.min,t.max,s);applyAxisDelta(t,e,r,a,n)}function transformBox(t,e){transformAxis(t.x,e.x,e.scaleX,e.scale,e.originX),transformAxis(t.y,e.y,e.scaleY,e.scale,e.originY)}function measureViewportBox(t,e){return convertBoundingBoxToBox(transformBoxPoints(t.getBoundingClientRect(),e))}function measurePageBox(t,e,r){const n=measureViewportBox(t,r),{scroll:s}=e;return s&&(translateAxis(n.x,s.offset.x),translateAxis(n.y,s.offset.y)),n}const getContextWindow=({current:t})=>t?t.ownerDocument.defaultView:null,distance=(t,e)=>Math.abs(t-e);function distance2D(t,e){const r=distance(t.x,e.x),n=distance(t.y,e.y);return Math.sqrt(r**2+n**2)}class PanSession{constructor(e,r,{transformPagePoint:n,contextWindow:s,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=getPanInfo(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,x=distance2D(g.offset,{x:0,y:0})>=3;if(!y&&!x)return;const{point:E}=g,{timestamp:S}=frameData;this.history.push({...E,timestamp:S});const{onStart:k,onMove:C}=this.handlers;y||(k&&k(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),C&&C(this.lastMoveEvent,g)},this.handlePointerMove=(g,y)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=transformPoint(y,this.transformPagePoint),frame.update(this.updatePoint,!0)},this.handlePointerUp=(g,y)=>{this.end();const{onEnd:x,onSessionEnd:E,resumeAnimation:S}=this.handlers;if(this.dragSnapToOrigin&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const k=getPanInfo(g.type==="pointercancel"?this.lastMoveEventInfo:transformPoint(y,this.transformPagePoint),this.history);this.startEvent&&x&&x(g,k),E&&E(g,k)},!isPrimaryPointer(e))return;this.dragSnapToOrigin=a,this.handlers=r,this.transformPagePoint=n,this.contextWindow=s||window;const o=extractEventInfo(e),l=transformPoint(o,this.transformPagePoint),{point:c}=l,{timestamp:d}=frameData;this.history=[{...c,timestamp:d}];const{onSessionStart:p}=r;p&&p(e,getPanInfo(l,this.history)),this.removeListeners=pipe(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),cancelFrame(this.updatePoint)}}function transformPoint(t,e){return e?{point:e(t.point)}:t}function subtractPoint(t,e){return{x:t.x-e.x,y:t.y-e.y}}function getPanInfo({point:t},e){return{point:t,delta:subtractPoint(t,lastDevicePoint(e)),offset:subtractPoint(t,startDevicePoint(e)),velocity:getVelocity(e,.1)}}function startDevicePoint(t){return t[0]}function lastDevicePoint(t){return t[t.length-1]}function getVelocity(t,e){if(t.length<2)return{x:0,y:0};let r=t.length-1,n=null;const s=lastDevicePoint(t);for(;r>=0&&(n=t[r],!(s.timestamp-n.timestamp>secondsToMilliseconds(e)));)r--;if(!n)return{x:0,y:0};const a=millisecondsToSeconds(s.timestamp-n.timestamp);if(a===0)return{x:0,y:0};const o={x:(s.x-n.x)/a,y:(s.y-n.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function applyConstraints(t,{min:e,max:r},n){return e!==void 0&&t<e?t=n?mixNumber$1(e,t,n.min):Math.max(t,e):r!==void 0&&t>r&&(t=n?mixNumber$1(r,t,n.max):Math.min(t,r)),t}function calcRelativeAxisConstraints(t,e,r){return{min:e!==void 0?t.min+e:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function calcRelativeConstraints(t,{top:e,left:r,bottom:n,right:s}){return{x:calcRelativeAxisConstraints(t.x,r,s),y:calcRelativeAxisConstraints(t.y,e,n)}}function calcViewportAxisConstraints(t,e){let r=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([r,n]=[n,r]),{min:r,max:n}}function calcViewportConstraints(t,e){return{x:calcViewportAxisConstraints(t.x,e.x),y:calcViewportAxisConstraints(t.y,e.y)}}function calcOrigin(t,e){let r=.5;const n=calcLength(t),s=calcLength(e);return s>n?r=progress(e.min,e.max-n,t.min):n>s&&(r=progress(t.min,t.max-s,e.min)),clamp$1(0,1,r)}function rebaseAxisConstraints(t,e){const r={};return e.min!==void 0&&(r.min=e.min-t.min),e.max!==void 0&&(r.max=e.max-t.min),r}const defaultElastic=.35;function resolveDragElastic(t=defaultElastic){return t===!1?t=0:t===!0&&(t=defaultElastic),{x:resolveAxisElastic(t,"left","right"),y:resolveAxisElastic(t,"top","bottom")}}function resolveAxisElastic(t,e,r){return{min:resolvePointElastic(t,e),max:resolvePointElastic(t,r)}}function resolvePointElastic(t,e){return typeof t=="number"?t:t[e]||0}const elementDragControls=new WeakMap;class VisualElementDragControls{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.visualElement=e}start(e,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const s=p=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(extractEventInfo(p).point)},a=(p,g)=>{const{drag:y,dragPropagation:x,onDragStart:E}=this.getProps();if(y&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=setDragLock(y),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(k=>{let C=this.getAxisMotionValue(k).get()||0;if(percent.test(C)){const{projection:P}=this.visualElement;if(P&&P.layout){const R=P.layout.layoutBox[k];R&&(C=calcLength(R)*(parseFloat(C)/100))}}this.originPoint[k]=C}),E&&frame.postRender(()=>E(p,g)),addValueToWillChange(this.visualElement,"transform");const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},o=(p,g)=>{const{dragPropagation:y,dragDirectionLock:x,onDirectionLock:E,onDrag:S}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:k}=g;if(x&&this.currentDirection===null){this.currentDirection=getCurrentDirection(k),this.currentDirection!==null&&E&&E(this.currentDirection);return}this.updateAxis("x",g.point,k),this.updateAxis("y",g.point,k),this.visualElement.render(),S&&S(p,g)},l=(p,g)=>this.stop(p,g),c=()=>eachAxis(p=>{var g;return this.getAnimationState(p)==="paused"&&((g=this.getAxisMotionValue(p).animation)==null?void 0:g.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new PanSession(e,{onSessionStart:s,onStart:a,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:getContextWindow(this.visualElement)})}stop(e,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:s}=r;this.startAnimation(s);const{onDragEnd:a}=this.getProps();a&&frame.postRender(()=>a(e,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(e,r,n){const{drag:s}=this.getProps();if(!n||!shouldDrag(e,s,this.currentDirection))return;const a=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=applyConstraints(o,this.constraints[e],this.elastic[e])),a.set(o)}resolveConstraints(){var a;const{dragConstraints:e,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,s=this.constraints;e&&isRefObject(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&n?this.constraints=calcRelativeConstraints(n.layoutBox,e):this.constraints=!1,this.elastic=resolveDragElastic(r),s!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=rebaseAxisConstraints(n.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!isRefObject(e))return!1;const n=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=measurePageBox(n,s.root,this.visualElement.getTransformPagePoint());let o=calcViewportConstraints(s.layout.layoutBox,a);if(r){const l=r(convertBoxToBoundingBox(o));this.hasMutatedConstraints=!!l,l&&(o=convertBoundingBoxToBox(l))}return o}startAnimation(e){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=eachAxis(p=>{if(!shouldDrag(p,r,this.currentDirection))return;let g=c&&c[p]||{};o&&(g={min:0,max:0});const y=s?200:1e6,x=s?40:1e7,E={type:"inertia",velocity:n?e[p]:0,bounceStiffness:y,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...a,...g};return this.startAxisValueAnimation(p,E)});return Promise.all(d).then(l)}startAxisValueAnimation(e,r){const n=this.getAxisMotionValue(e);return addValueToWillChange(this.visualElement,e),n.start(animateMotionValue(e,n,0,r,this.visualElement,!1))}stopAnimation(){eachAxis(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){eachAxis(e=>{var r;return(r=this.getAxisMotionValue(e).animation)==null?void 0:r.pause()})}getAnimationState(e){var r;return(r=this.getAxisMotionValue(e).animation)==null?void 0:r.state}getAxisMotionValue(e){const r=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),s=n[r];return s||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){eachAxis(r=>{const{drag:n}=this.getProps();if(!shouldDrag(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(r);if(s&&s.layout){const{min:o,max:l}=s.layout.layoutBox[r];a.set(e[r]-mixNumber$1(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!isRefObject(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};eachAxis(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();s[o]=calcOrigin({min:c,max:c},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),eachAxis(o=>{if(!shouldDrag(o,e,null))return;const l=this.getAxisMotionValue(o),{min:c,max:d}=this.constraints[o];l.set(mixNumber$1(c,d,s[o]))})}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const e=this.visualElement.current,r=addPointerEvent(e,"pointerdown",c=>{const{drag:d,dragListener:p=!0}=this.getProps();d&&p&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();isRefObject(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),frame.read(n);const o=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(eachAxis(p=>{const g=this.getAxisMotionValue(p);g&&(this.originPoint[p]+=c[p].translate,g.set(g.get()+c[p].translate))}),this.visualElement.render())});return()=>{o(),r(),a(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:o=defaultElastic,dragMomentum:l=!0}=e;return{...e,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:a,dragElastic:o,dragMomentum:l}}}function shouldDrag(t,e,r){return(e===!0||e===t)&&(r===null||r===t)}function getCurrentDirection(t,e=10){let r=null;return Math.abs(t.y)>e?r="y":Math.abs(t.x)>e&&(r="x"),r}class DragGesture extends Feature{constructor(e){super(e),this.removeGroupControls=noop$1,this.removeListeners=noop$1,this.controls=new VisualElementDragControls(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop$1}unmount(){this.removeGroupControls(),this.removeListeners()}}const asyncHandler=t=>(e,r)=>{t&&frame.postRender(()=>t(e,r))};class PanGesture extends Feature{constructor(){super(...arguments),this.removePointerDownListener=noop$1}onPointerDown(e){this.session=new PanSession(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:asyncHandler(e),onStart:asyncHandler(r),onMove:n,onEnd:(a,o)=>{delete this.session,s&&frame.postRender(()=>s(a,o))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pixelsToPercent(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const correctBorderRadius={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(px.test(t))t=parseFloat(t);else return t;const r=pixelsToPercent(t,e.target.x),n=pixelsToPercent(t,e.target.y);return`${r}% ${n}%`}},correctBoxShadow={correct:(t,{treeScale:e,projectionDelta:r})=>{const n=t,s=complex.parse(t);if(s.length>5)return n;const a=complex.createTransformer(t),o=typeof s[0]!="number"?1:0,l=r.x.scale*e.x,c=r.y.scale*e.y;s[0+o]/=l,s[1+o]/=c;const d=mixNumber$1(l,c,.5);return typeof s[2+o]=="number"&&(s[2+o]/=d),typeof s[3+o]=="number"&&(s[3+o]/=d),a(s)}};class MeasureLayoutWithContext extends reactExports.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:a}=e;addScaleCorrector(defaultScaleCorrectors),a&&(r.group&&r.group.add(a),n&&n.register&&s&&n.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:n,drag:s,isPresent:a}=this.props,{projection:o}=n;return o&&(o.isPresent=a,s||e.layoutDependency!==r||r===void 0||e.isPresent!==a?o.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?o.promote():o.relegate()||frame.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),microtask.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function MeasureLayout(t){const[e,r]=usePresence$1(),n=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(MeasureLayoutWithContext,{...t,layoutGroup:n,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent:e,safeToRemove:r})}const defaultScaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow};function animateSingleValue(t,e,r){const n=isMotionValue(t)?t:motionValue(t);return n.start(animateMotionValue("",n,e,r)),n.animation}const compareByDepth=(t,e)=>t.depth-e.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add(e){addUniqueItem(this.children,e),this.isDirty=!0}remove(e){removeItem(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(e)}}function delay(t,e){const r=time.now(),n=({timestamp:s})=>{const a=s-r;a>=e&&(cancelFrame(n),t(a-e))};return frame.setup(n,!0),()=>cancelFrame(n)}const borders=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders.length,asNumber=t=>typeof t=="string"?parseFloat(t):t,isPx=t=>typeof t=="number"||px.test(t);function mixValues(t,e,r,n,s,a){s?(t.opacity=mixNumber$1(0,r.opacity??1,easeCrossfadeIn(n)),t.opacityExit=mixNumber$1(e.opacity??1,0,easeCrossfadeOut(n))):a&&(t.opacity=mixNumber$1(e.opacity??1,r.opacity??1,n));for(let o=0;o<numBorders;o++){const l=`border${borders[o]}Radius`;let c=getRadius(e,l),d=getRadius(r,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||isPx(c)===isPx(d)?(t[l]=Math.max(mixNumber$1(asNumber(c),asNumber(d),n),0),(percent.test(d)||percent.test(c))&&(t[l]+="%")):t[l]=d}(e.rotate||r.rotate)&&(t.rotate=mixNumber$1(e.rotate||0,r.rotate||0,n))}function getRadius(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop$1);function compress(t,e,r){return n=>n<t?0:n>e?1:r(progress(t,e,n))}function copyAxisInto(t,e){t.min=e.min,t.max=e.max}function copyBoxInto(t,e){copyAxisInto(t.x,e.x),copyAxisInto(t.y,e.y)}function copyAxisDeltaInto(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function removePointDelta(t,e,r,n,s){return t-=e,t=scalePoint(t,1/r,n),s!==void 0&&(t=scalePoint(t,1/s,n)),t}function removeAxisDelta(t,e=0,r=1,n=.5,s,a=t,o=t){if(percent.test(e)&&(e=parseFloat(e),e=mixNumber$1(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=mixNumber$1(a.min,a.max,n);t===a&&(l-=e),t.min=removePointDelta(t.min,e,r,l,s),t.max=removePointDelta(t.max,e,r,l,s)}function removeAxisTransforms(t,e,[r,n,s],a,o){removeAxisDelta(t,e[r],e[n],e[s],e.scale,a,o)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(t,e,r,n){removeAxisTransforms(t.x,e,xKeys,r?r.x:void 0,n?n.x:void 0),removeAxisTransforms(t.y,e,yKeys,r?r.y:void 0,n?n.y:void 0)}function isAxisDeltaZero(t){return t.translate===0&&t.scale===1}function isDeltaZero(t){return isAxisDeltaZero(t.x)&&isAxisDeltaZero(t.y)}function axisEquals(t,e){return t.min===e.min&&t.max===e.max}function boxEquals(t,e){return axisEquals(t.x,e.x)&&axisEquals(t.y,e.y)}function axisEqualsRounded(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function boxEqualsRounded(t,e){return axisEqualsRounded(t.x,e.x)&&axisEqualsRounded(t.y,e.y)}function aspectRatio(t){return calcLength(t.x)/calcLength(t.y)}function axisDeltaEquals(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class NodeStack{constructor(){this.members=[]}add(e){addUniqueItem(this.members,e),e.scheduleRender()}remove(e){if(removeItem(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(s=>e===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){n=a;break}}return n?(this.promote(n),!0):!1}promote(e,r){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,r&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:n}=e;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function buildProjectionTransform(t,e,r){let n="";const s=t.x.translate/e.x,a=t.y.translate/e.y,o=(r==null?void 0:r.z)||0;if((s||a||o)&&(n=`translate3d(${s}px, ${a}px, ${o}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),r){const{transformPerspective:d,rotate:p,rotateX:g,rotateY:y,skewX:x,skewY:E}=r;d&&(n=`perspective(${d}px) ${n}`),p&&(n+=`rotate(${p}deg) `),g&&(n+=`rotateX(${g}deg) `),y&&(n+=`rotateY(${y}deg) `),x&&(n+=`skewX(${x}deg) `),E&&(n+=`skewY(${E}deg) `)}const l=t.x.scale*e.x,c=t.y.scale*e.y;return(l!==1||c!==1)&&(n+=`scale(${l}, ${c})`),n||"none"}const transformAxes=["","X","Y","Z"],hiddenVisibility={visibility:"hidden"},animationTarget=1e3;let id=0;function resetDistortingTransform(t,e,r,n){const{latestValues:s}=e;s[t]&&(r[t]=s[t],e.setStaticValue(t,0),n&&(n[t]=0))}function cancelTreeOptimisedTransformAnimations(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const r=getOptimisedAppearId(e);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:s,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(r,"transform",frame,!(s||a))}const{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(n)}function createProjectionNode({attachResizeListener:t,defaultParent:e,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(o={},l=e==null?void 0:e()){this.id=id++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new SubscriptionManager),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=isSVGElement$1(o)&&!isSVGSVGElement(o),this.instance=o;const{layoutId:l,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),t){let p;const g=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,p&&p(),p=delay(g,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||c)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:g,hasRelativeLayoutChanged:y,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const E=this.options.transition||d.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:S,onLayoutAnimationComplete:k}=d.getProps(),C=!this.targetLayout||!boxEqualsRounded(this.targetLayout,x),P=!g&&y;if(this.options.layoutRoot||this.resumeFrom||P||g&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(p,P);const R={...getValueTransition(E,"layout"),onPlay:S,onComplete:k};(d.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R)}else g||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetSkewAndRotation),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const g=this.path[p];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}this.isUpdating||this.nodes.forEach(clearIsLayoutDirty),this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate),this.clearAllSnapshots();const l=time.now();frameData.delta=clamp$1(0,1e3/60,l-frameData.timestamp),frameData.timestamp=l,frameData.isProcessing=!0,frameSteps.update.process(frameData),frameSteps.preRender.process(frameData),frameSteps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,microtask.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!calcLength(this.snapshot.measuredBox.x)&&!calcLength(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const c=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!isDeltaZero(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,p=d!==this.prevTransformTemplateValue;o&&this.instance&&(l||hasTransform(this.latestValues)||p)&&(s(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),roundBox(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var d;const{visualElement:o}=this.options;if(!o)return createBox();const l=o.measureViewportBox();if(!(((d=this.scroll)==null?void 0:d.wasRoot)||this.path.some(checkNodeWasScrollRoot))){const{scroll:p}=this.root;p&&(translateAxis(l.x,p.offset.x),translateAxis(l.y,p.offset.y))}return l}removeElementScroll(o){var c;const l=createBox();if(copyBoxInto(l,o),(c=this.scroll)!=null&&c.wasRoot)return l;for(let d=0;d<this.path.length;d++){const p=this.path[d],{scroll:g,options:y}=p;p!==this.root&&g&&y.layoutScroll&&(g.wasRoot&&copyBoxInto(l,o),translateAxis(l.x,g.offset.x),translateAxis(l.y,g.offset.y))}return l}applyTransform(o,l=!1){const c=createBox();copyBoxInto(c,o);for(let d=0;d<this.path.length;d++){const p=this.path[d];!l&&p.options.layoutScroll&&p.scroll&&p!==p.root&&transformBox(c,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),hasTransform(p.latestValues)&&transformBox(c,p.latestValues)}return hasTransform(this.latestValues)&&transformBox(c,this.latestValues),c}removeTransform(o){const l=createBox();copyBoxInto(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!hasTransform(d.latestValues))continue;hasScale(d.latestValues)&&d.updateSnapshot();const p=createBox(),g=d.measurePageBox();copyBoxInto(p,g),removeBoxTransforms(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,p)}return hasTransform(this.latestValues)&&removeBoxTransforms(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var y;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:g}=this.options;if(!(!this.layout||!(p||g))){if(this.resolvedRelativeTargetAt=frameData.timestamp,!this.targetDelta&&!this.relativeTarget){const x=this.getClosestProjectingParent();x&&x.layout&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.layout.layoutBox,x.layout.layoutBox),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const x=this.getClosestProjectingParent();x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.target,x.target),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var E;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||(E=this.parent)!=null&&E.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(c=!1),c)return;const{layout:d,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||p))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,y=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=createBox());const{target:x}=o;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(copyAxisDeltaInto(this.prevProjectionDelta.x,this.projectionDelta.x),copyAxisDeltaInto(this.prevProjectionDelta.y,this.projectionDelta.y)),calcBoxDelta(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==y||!axisDeltaEquals(this.projectionDelta.x,this.prevProjectionDelta.x)||!axisDeltaEquals(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=createDelta(),this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta()}setAnimationOrigin(o,l=!1){const c=this.snapshot,d=c?c.latestValues:{},p={...this.latestValues},g=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const y=createBox(),x=c?c.source:void 0,E=this.layout?this.layout.source:void 0,S=x!==E,k=this.getStack(),C=!k||k.members.length<=1,P=!!(S&&!C&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let R;this.mixTargetDelta=j=>{const I=j/1e3;mixAxisDelta(g.x,o.x,I),mixAxisDelta(g.y,o.y,I),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,y,I),R&&boxEquals(this.relativeTarget,R)&&(this.isProjectionDirty=!1),R||(R=createBox()),copyBoxInto(R,this.relativeTarget)),S&&(this.animationValues=p,mixValues(p,d,this.latestValues,I,P,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=I},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var l,c,d;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(!1),(d=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||d.stop(!1),this.pendingAnimation&&(cancelFrame(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=motionValue(0)),this.currentAnimation=animateSingleValue(this.motionValue,[0,1e3],{...o,isSync:!0,onUpdate:p=>{this.mixTargetDelta(p),o.onUpdate&&o.onUpdate(p)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop(!1)),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:p}=o;if(!(!l||!c||!d)){if(this!==o&&this.layout&&d&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||createBox();const g=calcLength(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+g;const y=calcLength(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+y}copyBoxInto(l,c),transformBox(l,p),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,l,p)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new NodeStack),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const d={};c.z&&resetDistortingTransform("z",o,d,this.animationValues);for(let p=0;p<transformAxes.length;p++)resetDistortingTransform(`rotate${transformAxes[p]}`,o,d,this.animationValues),resetDistortingTransform(`skew${transformAxes[p]}`,o,d,this.animationValues);o.render();for(const p in d)o.setStaticValue(p,d[p]),this.animationValues&&(this.animationValues[p]=d[p]);o.scheduleRender()}getProjectionStyles(o){if(!this.instance||this.isSVG)return;if(!this.isVisible)return hiddenVisibility;const l={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,l.opacity="",l.pointerEvents=resolveMotionValue(o==null?void 0:o.pointerEvents)||"",l.transform=c?c(this.latestValues,""):"none",l;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=resolveMotionValue(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(x.transform=c?c({},""):"none",this.hasProjected=!1),x}const p=d.animationValues||d.latestValues;this.applyTransformsToTarget(),l.transform=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,p),c&&(l.transform=c(p,l.transform));const{x:g,y}=this.projectionDelta;l.transformOrigin=`${g.origin*100}% ${y.origin*100}% 0`,d.animationValues?l.opacity=d===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:l.opacity=d===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const x in scaleCorrectors){if(p[x]===void 0)continue;const{correct:E,applyTo:S,isCSSVariable:k}=scaleCorrectors[x],C=l.transform==="none"?p[x]:E(p[x],d);if(S){const P=S.length;for(let R=0;R<P;R++)l[S[R]]=C}else k?this.options.visualElement.renderState.vars[x]=C:l[x]=C}return this.options.layoutId&&(l.pointerEvents=d===this?resolveMotionValue(o==null?void 0:o.pointerEvents)||"":"none"),l}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)==null?void 0:l.stop(!1)}),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(t){t.updateLayout()}function notifyLayoutUpdate(t){var r;const e=((r=t.resumeFrom)==null?void 0:r.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=t.layout,{animationType:a}=t.options,o=e.source!==t.layout.source;a==="size"?eachAxis(g=>{const y=o?e.measuredBox[g]:e.layoutBox[g],x=calcLength(y);y.min=n[g].min,y.max=y.min+x}):shouldAnimatePositionOnly(a,e.layoutBox,n)&&eachAxis(g=>{const y=o?e.measuredBox[g]:e.layoutBox[g],x=calcLength(n[g]);y.max=y.min+x,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+x)});const l=createDelta();calcBoxDelta(l,n,e.layoutBox);const c=createDelta();o?calcBoxDelta(c,t.applyTransform(s,!0),e.measuredBox):calcBoxDelta(c,n,e.layoutBox);const d=!isDeltaZero(l);let p=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:y,layout:x}=g;if(y&&x){const E=createBox();calcRelativePosition(E,e.layoutBox,y.layoutBox);const S=createBox();calcRelativePosition(S,n,x.layoutBox),boxEqualsRounded(E,S)||(p=!0),g.options.layoutRoot&&(t.relativeTarget=S,t.relativeTargetOrigin=E,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeLayoutChanged:p})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function propagateDirtyNodes(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function cleanDirtyNodes(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function clearSnapshot(t){t.clearSnapshot()}function clearMeasurements(t){t.clearMeasurements()}function clearIsLayoutDirty(t){t.isLayoutDirty=!1}function resetTransformStyle(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function finishAnimation(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function resolveTargetDelta(t){t.resolveTargetDelta()}function calcProjection(t){t.calcProjection()}function resetSkewAndRotation(t){t.resetSkewAndRotation()}function removeLeadSnapshots(t){t.removeLeadSnapshot()}function mixAxisDelta(t,e,r){t.translate=mixNumber$1(e.translate,0,r),t.scale=mixNumber$1(e.scale,1,r),t.origin=e.origin,t.originPoint=e.originPoint}function mixAxis(t,e,r,n){t.min=mixNumber$1(e.min,r.min,n),t.max=mixNumber$1(e.max,r.max,n)}function mixBox(t,e,r,n){mixAxis(t.x,e.x,r.x,n),mixAxis(t.y,e.y,r.y,n)}function hasOpacityCrossfade(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop$1;function roundAxis(t){t.min=roundPoint(t.min),t.max=roundPoint(t.max)}function roundBox(t){roundAxis(t.x),roundAxis(t.y)}function shouldAnimatePositionOnly(t,e,r){return t==="position"||t==="preserve-aspect"&&!isNear(aspectRatio(e),aspectRatio(r),.2)}function checkNodeWasScrollRoot(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const DocumentProjectionNode=createProjectionNode({attachResizeListener:(t,e)=>addDomEvent(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const t=new DocumentProjectionNode({});t.mount(window),t.setOptions({layoutScroll:!0}),rootProjectionNode.current=t}return rootProjectionNode.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}};function handleHoverEvent(t,e,r){const{props:n}=t;t.animationState&&n.whileHover&&t.animationState.setActive("whileHover",r==="Start");const s="onHover"+r,a=n[s];a&&frame.postRender(()=>a(e,extractEventInfo(e)))}class HoverGesture extends Feature{mount(){const{current:e}=this.node;e&&(this.unmount=hover(e,(r,n)=>(handleHoverEvent(this.node,n,"Start"),s=>handleHoverEvent(this.node,s,"End"))))}unmount(){}}class FocusGesture extends Feature{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function handlePressEvent(t,e,r){const{props:n}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&n.whileTap&&t.animationState.setActive("whileTap",r==="Start");const s="onTap"+(r==="End"?"":r),a=n[s];a&&frame.postRender(()=>a(e,extractEventInfo(e)))}class PressGesture extends Feature{mount(){const{current:e}=this.node;e&&(this.unmount=press(e,(r,n)=>(handlePressEvent(this.node,n,"Start"),(s,{success:a})=>handlePressEvent(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=t=>{const e=observerCallbacks.get(t.target);e&&e(t)},fireAllObserverCallbacks=t=>{t.forEach(fireObserverCallback)};function initIntersectionObserver({root:t,...e}){const r=t||document;observers.has(r)||observers.set(r,{});const n=observers.get(r),s=JSON.stringify(e);return n[s]||(n[s]=new IntersectionObserver(fireAllObserverCallbacks,{root:t,...e})),n[s]}function observeIntersection(t,e,r){const n=initIntersectionObserver(e);return observerCallbacks.set(t,r),n.observe(t),()=>{observerCallbacks.delete(t),n.unobserve(t)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:a}=e,o={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:thresholdNames[s]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,a&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:p,onViewportLeave:g}=this.node.getProps(),y=d?p:g;y&&y(c)};return observeIntersection(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some(hasViewportOptionChanged(e,r))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport:t={}},{viewport:e={}}={}){return r=>t[r]!==e[r]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}},layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},prefersReducedMotion={current:null},hasReducedMotionListener={current:!1};function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser$2)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>prefersReducedMotion.current=t.matches;t.addListener(e),e()}else prefersReducedMotion.current=!1}const visualElementStore=new WeakMap;function updateMotionValuesFromProps(t,e,r){for(const n in e){const s=e[n],a=r[n];if(isMotionValue(s))t.addValue(n,s);else if(isMotionValue(a))t.addValue(n,motionValue(s,{owner:t}));else if(a!==s)if(t.hasValue(n)){const o=t.getValue(n);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=t.getStaticValue(n);t.addValue(n,motionValue(o!==void 0?o:s,{owner:t}))}}for(const n in r)e[n]===void 0&&t.removeValue(n);return e}const propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class VisualElement{scrapeMotionValuesFromProps(e,r,n){return{}}constructor({parent:e,props:r,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:a,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=KeyframeResolver,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=time.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,frame.render(this.render,!1,!0))};const{latestValues:c,renderState:d}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=r.initial?{...c}:{},this.renderState=d,this.parent=e,this.props=r,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=l,this.blockInitialAnimation=!!a,this.isControllingVariants=isControllingVariants(r),this.isVariantNode=isVariantNode(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,...g}=this.scrapeMotionValuesFromProps(r,{},this);for(const y in g){const x=g[y];c[y]!==void 0&&isMotionValue(x)&&x.set(c[y],!1)}}mount(e){this.current=e,visualElementStore.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:prefersReducedMotion.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const r=this.features[e];r&&(r.unmount(),r.isMounted=!1)}this.current=null}bindToMotionValue(e,r){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=transformProps.has(e);n&&this.onBindTransform&&this.onBindTransform();const s=r.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&frame.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),a=r.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,r)),this.valueSubscriptions.set(e,()=>{s(),a(),o&&o(),r.owner&&r.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in featureDefinitions){const r=featureDefinitions[e];if(!r)continue;const{isEnabled:n,Feature:s}=r;if(!this.features[e]&&s&&n(this.props)&&(this.features[e]=new s(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<propEventHandlers.length;n++){const s=propEventHandlers[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,o=e[a];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){const n=this.values.get(e);r!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,r),this.values.set(e,r),this.latestValues[e]=r.get())}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&r!==void 0&&(n=motionValue(r===null?void 0:r,{owner:this}),this.addValue(e,n)),n}readValue(e,r){let n=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return n!=null&&(typeof n=="string"&&(isNumericalString(n)||isZeroValueString(n))?n=parseFloat(n):!findValueType(n)&&complex.test(r)&&(n=getAnimatableNone(e,r)),this.setBaseTarget(e,isMotionValue(n)?n.get():n)),isMotionValue(n)?n.get():n}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){var a;const{initial:r}=this.props;let n;if(typeof r=="string"||typeof r=="object"){const o=resolveVariantFromProps(this.props,r,(a=this.presenceContext)==null?void 0:a.custom);o&&(n=o[e])}if(r&&n!==void 0)return n;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!isMotionValue(s)?s:this.initialValues[e]!==void 0&&n===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new SubscriptionManager),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}}class DOMVisualElement extends VisualElement{constructor(){super(...arguments),this.KeyframeResolver=DOMKeyframesResolver}sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){return e.style?e.style[r]:void 0}removeValueFromRenderState(e,{vars:r,style:n}){delete r[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;isMotionValue(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function renderHTML(t,{style:e,vars:r},n,s){Object.assign(t.style,e,s&&s.getProjectionStyles(n));for(const a in r)t.style.setProperty(a,r[a])}function getComputedStyle$2(t){return window.getComputedStyle(t)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html",this.renderInstance=renderHTML}readValueFromInstance(e,r){var n;if(transformProps.has(r))return(n=this.projection)!=null&&n.isProjecting?defaultTransformValue(r):readTransformValue(e,r);{const s=getComputedStyle$2(e),a=(isCSSVariableName(r)?s.getPropertyValue(r):s[r])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:r}){return measureViewportBox(e,r)}build(e,r,n){buildHTMLStyles(e,r,n.transformTemplate)}scrapeMotionValuesFromProps(e,r,n){return scrapeMotionValuesFromProps$1(e,r,n)}}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function renderSVG(t,e,r,n){renderHTML(t,e,void 0,n);for(const s in e.attrs)t.setAttribute(camelCaseAttributes.has(s)?s:camelToDash(s),e.attrs[s])}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=createBox}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(transformProps.has(r)){const n=getDefaultValueType(r);return n&&n.default||0}return r=camelCaseAttributes.has(r)?r:camelToDash(r),e.getAttribute(r)}scrapeMotionValuesFromProps(e,r,n){return scrapeMotionValuesFromProps(e,r,n)}build(e,r,n){buildSVGAttrs(e,r,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,r,n,s){renderSVG(e,r,n,s)}mount(e){this.isSVGTag=isSVGTag(e.tagName),super.mount(e)}}const createDomVisualElement=(t,e)=>isSVGComponent(t)?new SVGVisualElement(e):new HTMLVisualElement(e,{allowProjection:t!==reactExports.Fragment}),createMotionComponent=createMotionComponentFactory({...animations,...gestureAnimations,...drag,...layout},createDomVisualElement),motion=createDOMMotionComponentProxy(createMotionComponent);function useMotionValueEvent(t,e,r){reactExports.useInsertionEffect(()=>t.on(e,r),[t,e,r])}function useMotionValue(t){const e=useConstant(()=>motionValue(t)),{isStatic:r}=reactExports.useContext(MotionConfigContext);if(r){const[,n]=reactExports.useState(t);reactExports.useEffect(()=>e.on("change",n),[])}return e}class DragControls{constructor(){this.componentControls=new Set}subscribe(e){return this.componentControls.add(e),()=>this.componentControls.delete(e)}start(e,r){this.componentControls.forEach(n=>{n.start(e.nativeEvent||e,r)})}}const createDragControls=()=>new DragControls;function useDragControls(){return useConstant(createDragControls)}var lib$1={exports:{}},lodash$1={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var lodash=lodash$1.exports,hasRequiredLodash;function requireLodash(){return hasRequiredLodash||(hasRequiredLodash=1,function(t,e){(function(){var r,n="4.17.21",s=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",l="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",d=500,p="__lodash_placeholder__",g=1,y=2,x=4,E=1,S=2,k=1,C=2,P=4,R=8,j=16,I=32,O=64,L=128,B=256,Z=512,te=30,ie="...",Q=800,fe=16,se=1,Y=2,G=3,q=1/0,N=9007199254740991,$=17976931348623157e292,V=NaN,z=4294967295,ne=z-1,pe=z>>>1,xe=[["ary",L],["bind",k],["bindKey",C],["curry",R],["curryRight",j],["flip",Z],["partial",I],["partialRight",O],["rearg",B]],Ce="[object Arguments]",ce="[object Array]",Re="[object AsyncFunction]",oe="[object Boolean]",Se="[object Date]",Ne="[object DOMException]",Fe="[object Error]",et="[object Function]",Le="[object GeneratorFunction]",Ee="[object Map]",Pt="[object Number]",Dt="[object Null]",Et="[object Object]",St="[object Promise]",Ct="[object Proxy]",ct="[object RegExp]",Qe="[object Set]",_t="[object String]",ft="[object Symbol]",Bt="[object Undefined]",Wt="[object WeakMap]",Zt="[object WeakSet]",Ft="[object ArrayBuffer]",Mt="[object DataView]",bt="[object Float32Array]",Be="[object Float64Array]",tt="[object Int8Array]",yt="[object Int16Array]",jr="[object Int32Array]",ir="[object Uint8Array]",vr="[object Uint8ClampedArray]",Vt="[object Uint16Array]",Ut="[object Uint32Array]",Ir=/\b__p \+= '';/g,kr=/\b(__p \+=) '' \+/g,me=/(__e\(.*?\)|\b__t\)) \+\n'';/g,je=/&(?:amp|lt|gt|quot|#39);/g,Te=/[&<>"']/g,Ae=RegExp(je.source),be=RegExp(Te.source),We=/<%-([\s\S]+?)%>/g,Ve=/<%([\s\S]+?)%>/g,Ge=/<%=([\s\S]+?)%>/g,qe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,it=/^\w*$/,at=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,xt=/[\\^$.*+?()[\]{}|]/g,ht=RegExp(xt.source),Nt=/^\s+/,qt=/\s/,Qt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Kt=/\{\n\/\* \[wrapped with (.+)\] \*/,Nn=/,? & /,Qs=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Kr=/[()=,{}\[\]\/\s]/,Xr=/\\(\\)?/g,pr=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Or=/\w*$/,Pi=/^[-+]0x[0-9a-f]+$/i,dn=/^0b[01]+$/i,ha=/^\[object .+?Constructor\]$/,pa=/^0o[0-7]+$/i,ma=/^(?:0|[1-9]\d*)$/,ga=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ei=/($^)/,oo=/['\n\r\u2028\u2029\\]/g,Xt="\\ud800-\\udfff",Ol="\\u0300-\\u036f",ti="\\ufe20-\\ufe2f",ki="\\u20d0-\\u20ff",ri=Ol+ti+ki,lo="\\u2700-\\u27bf",ya="a-z\\xdf-\\xf6\\xf8-\\xff",ws="\\xac\\xb1\\xd7\\xf7",Zn="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Pd="\\u2000-\\u206f",On=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",rc="A-Z\\xc0-\\xd6\\xd8-\\xde",nc="\\ufe0e\\ufe0f",sc=ws+Zn+Pd+On,Ti="['’]",uo="["+Xt+"]",Ai="["+sc+"]",ni="["+ri+"]",ic="\\d+",kd="["+lo+"]",co="["+ya+"]",Dl="[^"+Xt+sc+ic+lo+ya+rc+"]",xa="\\ud83c[\\udffb-\\udfff]",va="(?:"+ni+"|"+xa+")",ac="[^"+Xt+"]",ba="(?:\\ud83c[\\udde6-\\uddff]){2}",Ot="[\\ud800-\\udbff][\\udc00-\\udfff]",si="["+rc+"]",Fl="\\u200d",fo="(?:"+co+"|"+Dl+")",oc="(?:"+si+"|"+Dl+")",$l="(?:"+Ti+"(?:d|ll|m|re|s|t|ve))?",Ll="(?:"+Ti+"(?:D|LL|M|RE|S|T|VE))?",ho=va+"?",wa="["+nc+"]?",Es="(?:"+Fl+"(?:"+[ac,ba,Ot].join("|")+")"+wa+ho+")*",Ss="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Cs="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ji=wa+ho+Es,Ea="(?:"+[kd,ba,Ot].join("|")+")"+ji,Rs="(?:"+[ac+ni+"?",ni,ba,Ot,uo].join("|")+")",Td=RegExp(Ti,"g"),lc=RegExp(ni,"g"),ii=RegExp(xa+"(?="+xa+")|"+Rs+ji,"g"),Ad=RegExp([si+"?"+co+"+"+$l+"(?="+[Ai,si,"$"].join("|")+")",oc+"+"+Ll+"(?="+[Ai,si+fo,"$"].join("|")+")",si+"?"+fo+"+"+$l,si+"+"+Ll,Cs,Ss,ic,Ea].join("|"),"g"),uc=RegExp("["+Fl+Xt+ri+nc+"]"),po=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,cc=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],jd=-1,Gt={};Gt[bt]=Gt[Be]=Gt[tt]=Gt[yt]=Gt[jr]=Gt[ir]=Gt[vr]=Gt[Vt]=Gt[Ut]=!0,Gt[Ce]=Gt[ce]=Gt[Ft]=Gt[oe]=Gt[Mt]=Gt[Se]=Gt[Fe]=Gt[et]=Gt[Ee]=Gt[Pt]=Gt[Et]=Gt[ct]=Gt[Qe]=Gt[_t]=Gt[Wt]=!1;var $t={};$t[Ce]=$t[ce]=$t[Ft]=$t[Mt]=$t[oe]=$t[Se]=$t[bt]=$t[Be]=$t[tt]=$t[yt]=$t[jr]=$t[Ee]=$t[Pt]=$t[Et]=$t[ct]=$t[Qe]=$t[_t]=$t[ft]=$t[ir]=$t[vr]=$t[Vt]=$t[Ut]=!0,$t[Fe]=$t[et]=$t[Wt]=!1;var Ii={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},mo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Id={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Md={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Bl=parseFloat,go=parseInt,yo=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,dc=typeof self=="object"&&self&&self.Object===Object&&self,sr=yo||dc||Function("return this")(),Sa=e&&!e.nodeType&&e,Kn=Sa&&!0&&t&&!t.nodeType&&t,Vl=Kn&&Kn.exports===Sa,Mi=Vl&&yo.process,Yr=function(){try{var de=Kn&&Kn.require&&Kn.require("util").types;return de||Mi&&Mi.binding&&Mi.binding("util")}catch{}}(),Gl=Yr&&Yr.isArrayBuffer,sn=Yr&&Yr.isDate,ai=Yr&&Yr.isMap,xo=Yr&&Yr.isRegExp,Ni=Yr&&Yr.isSet,fc=Yr&&Yr.isTypedArray;function Jr(de,we,ve){switch(ve.length){case 0:return de.call(we);case 1:return de.call(we,ve[0]);case 2:return de.call(we,ve[0],ve[1]);case 3:return de.call(we,ve[0],ve[1],ve[2])}return de.apply(we,ve)}function Ul(de,we,ve,ze){for(var dt=-1,At=de==null?0:de.length;++dt<At;){var mr=de[dt];we(ze,mr,ve(mr),de)}return ze}function Dr(de,we){for(var ve=-1,ze=de==null?0:de.length;++ve<ze&&we(de[ve],ve,de)!==!1;);return de}function vo(de,we){for(var ve=de==null?0:de.length;ve--&&we(de[ve],ve,de)!==!1;);return de}function zl(de,we){for(var ve=-1,ze=de==null?0:de.length;++ve<ze;)if(!we(de[ve],ve,de))return!1;return!0}function Ps(de,we){for(var ve=-1,ze=de==null?0:de.length,dt=0,At=[];++ve<ze;){var mr=de[ve];we(mr,ve,de)&&(At[dt++]=mr)}return At}function _o(de,we){var ve=de==null?0:de.length;return!!ve&&Oi(de,we,0)>-1}function Hl(de,we,ve){for(var ze=-1,dt=de==null?0:de.length;++ze<dt;)if(ve(we,de[ze]))return!0;return!1}function Yt(de,we){for(var ve=-1,ze=de==null?0:de.length,dt=Array(ze);++ve<ze;)dt[ve]=we(de[ve],ve,de);return dt}function ks(de,we){for(var ve=-1,ze=we.length,dt=de.length;++ve<ze;)de[dt+ve]=we[ve];return de}function ql(de,we,ve,ze){var dt=-1,At=de==null?0:de.length;for(ze&&At&&(ve=de[++dt]);++dt<At;)ve=we(ve,de[dt],dt,de);return ve}function Nd(de,we,ve,ze){var dt=de==null?0:de.length;for(ze&&dt&&(ve=de[--dt]);dt--;)ve=we(ve,de[dt],dt,de);return ve}function Wl(de,we){for(var ve=-1,ze=de==null?0:de.length;++ve<ze;)if(we(de[ve],ve,de))return!0;return!1}var Od=Kl("length");function hc(de){return de.split("")}function Dd(de){return de.match(Qs)||[]}function pc(de,we,ve){var ze;return ve(de,function(dt,At,mr){if(we(dt,At,mr))return ze=At,!1}),ze}function bo(de,we,ve,ze){for(var dt=de.length,At=ve+(ze?1:-1);ze?At--:++At<dt;)if(we(de[At],At,de))return At;return-1}function Oi(de,we,ve){return we===we?So(de,we,ve):bo(de,mc,ve)}function Zl(de,we,ve,ze){for(var dt=ve-1,At=de.length;++dt<At;)if(ze(de[dt],we))return dt;return-1}function mc(de){return de!==de}function gc(de,we){var ve=de==null?0:de.length;return ve?Xl(de,we)/ve:V}function Kl(de){return function(we){return we==null?r:we[de]}}function wo(de){return function(we){return de==null?r:de[we]}}function yc(de,we,ve,ze,dt){return dt(de,function(At,mr,zt){ve=ze?(ze=!1,At):we(ve,At,mr,zt)}),ve}function Fd(de,we){var ve=de.length;for(de.sort(we);ve--;)de[ve]=de[ve].value;return de}function Xl(de,we){for(var ve,ze=-1,dt=de.length;++ze<dt;){var At=we(de[ze]);At!==r&&(ve=ve===r?At:ve+At)}return ve}function Yl(de,we){for(var ve=-1,ze=Array(de);++ve<de;)ze[ve]=we(ve);return ze}function $d(de,we){return Yt(we,function(ve){return[ve,de[ve]]})}function xc(de){return de&&de.slice(0,Co(de)+1).replace(Nt,"")}function fn(de){return function(we){return de(we)}}function Ca(de,we){return Yt(we,function(ve){return de[ve]})}function ls(de,we){return de.has(we)}function vc(de,we){for(var ve=-1,ze=de.length;++ve<ze&&Oi(we,de[ve],0)>-1;);return ve}function Jl(de,we){for(var ve=de.length;ve--&&Oi(we,de[ve],0)>-1;);return ve}function _c(de,we){for(var ve=de.length,ze=0;ve--;)de[ve]===we&&++ze;return ze}var bc=wo(Ii),wc=wo(mo);function Ec(de){return"\\"+Md[de]}function Di(de,we){return de==null?r:de[we]}function Fi(de){return uc.test(de)}function Ld(de){return po.test(de)}function Bd(de){for(var we,ve=[];!(we=de.next()).done;)ve.push(we.value);return ve}function Eo(de){var we=-1,ve=Array(de.size);return de.forEach(function(ze,dt){ve[++we]=[dt,ze]}),ve}function Ql(de,we){return function(ve){return de(we(ve))}}function wn(de,we){for(var ve=-1,ze=de.length,dt=0,At=[];++ve<ze;){var mr=de[ve];(mr===we||mr===p)&&(de[ve]=p,At[dt++]=ve)}return At}function Ts(de){var we=-1,ve=Array(de.size);return de.forEach(function(ze){ve[++we]=ze}),ve}function Vd(de){var we=-1,ve=Array(de.size);return de.forEach(function(ze){ve[++we]=[ze,ze]}),ve}function So(de,we,ve){for(var ze=ve-1,dt=de.length;++ze<dt;)if(de[ze]===we)return ze;return-1}function Gd(de,we,ve){for(var ze=ve+1;ze--;)if(de[ze]===we)return ze;return ze}function oi(de){return Fi(de)?Cc(de):Od(de)}function hn(de){return Fi(de)?Rc(de):hc(de)}function Co(de){for(var we=de.length;we--&&qt.test(de.charAt(we)););return we}var Sc=wo(Id);function Cc(de){for(var we=ii.lastIndex=0;ii.test(de);)++we;return we}function Rc(de){return de.match(ii)||[]}function Ud(de){return de.match(Ad)||[]}var zd=function de(we){we=we==null?sr:$i.defaults(sr.Object(),we,$i.pick(sr,cc));var ve=we.Array,ze=we.Date,dt=we.Error,At=we.Function,mr=we.Math,zt=we.Object,Ra=we.RegExp,Hd=we.String,En=we.TypeError,us=ve.prototype,eu=At.prototype,Xn=zt.prototype,Li=we["__core-js_shared__"],Pa=eu.toString,jt=Xn.hasOwnProperty,Bi=0,Ro=function(){var m=/[^.]+$/.exec(Li&&Li.keys&&Li.keys.IE_PROTO||"");return m?"Symbol(src)_1."+m:""}(),ka=Xn.toString,Po=Pa.call(zt),Pc=sr._,kc=Ra("^"+Pa.call(jt).replace(xt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ta=Vl?we.Buffer:r,cs=we.Symbol,Aa=we.Uint8Array,tu=Ta?Ta.allocUnsafe:r,Dn=Ql(zt.getPrototypeOf,zt),ko=zt.create,To=Xn.propertyIsEnumerable,Ao=us.splice,Tc=cs?cs.isConcatSpreadable:r,ds=cs?cs.iterator:r,li=cs?cs.toStringTag:r,ja=function(){try{var m=ys(zt,"defineProperty");return m({},"",{}),m}catch{}}(),Ac=we.clearTimeout!==sr.clearTimeout&&we.clearTimeout,er=ze&&ze.now!==sr.Date.now&&ze.now,ru=we.setTimeout!==sr.setTimeout&&we.setTimeout,ui=mr.ceil,As=mr.floor,jo=zt.getOwnPropertySymbols,nu=Ta?Ta.isBuffer:r,Vi=we.isFinite,Io=us.join,Gi=Ql(zt.keys,zt),gr=mr.max,Fr=mr.min,qd=ze.now,jc=we.parseInt,Ia=mr.random,Mo=us.reverse,Ma=ys(we,"DataView"),ci=ys(we,"Map"),Na=ys(we,"Promise"),js=ys(we,"Set"),Oa=ys(we,"WeakMap"),Ui=ys(zt,"create"),No=Oa&&new Oa,zi={},su=Hs(Ma),Is=Hs(ci),Ic=Hs(Na),Hi=Hs(js),Yn=Hs(Oa),Ms=cs?cs.prototype:r,pn=Ms?Ms.valueOf:r,Oo=Ms?Ms.toString:r;function W(m){if(xr(m)&&!gt(m)&&!(m instanceof pt)){if(m instanceof $r)return m;if(jt.call(m,"__wrapped__"))return Fu(m)}return new $r(m)}var qi=function(){function m(){}return function(_){if(!hr(_))return{};if(ko)return ko(_);m.prototype=_;var A=new m;return m.prototype=r,A}}();function Jn(){}function $r(m,_){this.__wrapped__=m,this.__actions__=[],this.__chain__=!!_,this.__index__=0,this.__values__=r}W.templateSettings={escape:We,evaluate:Ve,interpolate:Ge,variable:"",imports:{_:W}},W.prototype=Jn.prototype,W.prototype.constructor=W,$r.prototype=qi(Jn.prototype),$r.prototype.constructor=$r;function pt(m){this.__wrapped__=m,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=z,this.__views__=[]}function Do(){var m=new pt(this.__wrapped__);return m.__actions__=tn(this.__actions__),m.__dir__=this.__dir__,m.__filtered__=this.__filtered__,m.__iteratees__=tn(this.__iteratees__),m.__takeCount__=this.__takeCount__,m.__views__=tn(this.__views__),m}function iu(){if(this.__filtered__){var m=new pt(this);m.__dir__=-1,m.__filtered__=!0}else m=this.clone(),m.__dir__*=-1;return m}function Wi(){var m=this.__wrapped__.value(),_=this.__dir__,A=gt(m),F=_<0,U=A?m.length:0,K=rd(0,U,this.__views__),ee=K.start,le=K.end,he=le-ee,Pe=F?le:ee-1,ke=this.__iteratees__,Oe=ke.length,Ue=0,Je=Fr(he,this.__takeCount__);if(!A||!F&&U==he&&Je==he)return yu(m,this.__actions__);var ot=[];e:for(;he--&&Ue<Je;){Pe+=_;for(var wt=-1,lt=m[Pe];++wt<Oe;){var Rt=ke[wt],Tt=Rt.iteratee,qn=Rt.type,bn=Tt(lt);if(qn==Y)lt=bn;else if(!bn){if(qn==se)continue e;break e}}ot[Ue++]=lt}return ot}pt.prototype=qi(Jn.prototype),pt.prototype.constructor=pt;function an(m){var _=-1,A=m==null?0:m.length;for(this.clear();++_<A;){var F=m[_];this.set(F[0],F[1])}}function tr(){this.__data__=Ui?Ui(null):{},this.size=0}function Jt(m){var _=this.has(m)&&delete this.__data__[m];return this.size-=_?1:0,_}function Ns(m){var _=this.__data__;if(Ui){var A=_[m];return A===c?r:A}return jt.call(_,m)?_[m]:r}function Lr(m){var _=this.__data__;return Ui?_[m]!==r:jt.call(_,m)}function on(m,_){var A=this.__data__;return this.size+=this.has(m)?0:1,A[m]=Ui&&_===r?c:_,this}an.prototype.clear=tr,an.prototype.delete=Jt,an.prototype.get=Ns,an.prototype.has=Lr,an.prototype.set=on;function Qr(m){var _=-1,A=m==null?0:m.length;for(this.clear();++_<A;){var F=m[_];this.set(F[0],F[1])}}function Zi(){this.__data__=[],this.size=0}function ln(m){var _=this.__data__,A=Vr(_,m);if(A<0)return!1;var F=_.length-1;return A==F?_.pop():Ao.call(_,A,1),--this.size,!0}function Fo(m){var _=this.__data__,A=Vr(_,m);return A<0?r:_[A][1]}function Mc(m){return Vr(this.__data__,m)>-1}function Nc(m,_){var A=this.__data__,F=Vr(A,m);return F<0?(++this.size,A.push([m,_])):A[F][1]=_,this}Qr.prototype.clear=Zi,Qr.prototype.delete=ln,Qr.prototype.get=Fo,Qr.prototype.has=Mc,Qr.prototype.set=Nc;function Sn(m){var _=-1,A=m==null?0:m.length;for(this.clear();++_<A;){var F=m[_];this.set(F[0],F[1])}}function Oc(){this.size=0,this.__data__={hash:new an,map:new(ci||Qr),string:new an}}function fs(m){var _=cl(this,m).delete(m);return this.size-=_?1:0,_}function $o(m){return cl(this,m).get(m)}function au(m){return cl(this,m).has(m)}function Dc(m,_){var A=cl(this,m),F=A.size;return A.set(m,_),this.size+=A.size==F?0:1,this}Sn.prototype.clear=Oc,Sn.prototype.delete=fs,Sn.prototype.get=$o,Sn.prototype.has=au,Sn.prototype.set=Dc;function di(m){var _=-1,A=m==null?0:m.length;for(this.__data__=new Sn;++_<A;)this.add(m[_])}function Os(m){return this.__data__.set(m,c),this}function Ki(m){return this.__data__.has(m)}di.prototype.add=di.prototype.push=Os,di.prototype.has=Ki;function Br(m){var _=this.__data__=new Qr(m);this.size=_.size}function Lo(){this.__data__=new Qr,this.size=0}function Bo(m){var _=this.__data__,A=_.delete(m);return this.size=_.size,A}function Cn(m){return this.__data__.get(m)}function Rn(m){return this.__data__.has(m)}function fi(m,_){var A=this.__data__;if(A instanceof Qr){var F=A.__data__;if(!ci||F.length<s-1)return F.push([m,_]),this.size=++A.size,this;A=this.__data__=new Sn(F)}return A.set(m,_),this.size=A.size,this}Br.prototype.clear=Lo,Br.prototype.delete=Bo,Br.prototype.get=Cn,Br.prototype.has=Rn,Br.prototype.set=fi;function Qn(m,_){var A=gt(m),F=!A&&ao(m),U=!A&&!F&&fa(m),K=!A&&!F&&!U&&Ml(m),ee=A||F||U||K,le=ee?Yl(m.length,Hd):[],he=le.length;for(var Pe in m)(_||jt.call(m,Pe))&&!(ee&&(Pe=="length"||U&&(Pe=="offset"||Pe=="parent")||K&&(Pe=="buffer"||Pe=="byteLength"||Pe=="byteOffset")||kn(Pe,he)))&&le.push(Pe);return le}function es(m){var _=m.length;return _?m[Ua(0,_-1)]:r}function hi(m,_){return xn(tn(m),hs(_,0,m.length))}function Fc(m){return xn(tn(m))}function Da(m,_,A){(A!==r&&!_s(m[_],A)||A===r&&!(_ in m))&&ts(m,_,A)}function pi(m,_,A){var F=m[_];(!(jt.call(m,_)&&_s(F,A))||A===r&&!(_ in m))&&ts(m,_,A)}function Vr(m,_){for(var A=m.length;A--;)if(_s(m[A][0],_))return A;return-1}function mn(m,_,A,F){return ns(m,function(U,K,ee){_(F,U,A(U),ee)}),F}function rr(m,_){return m&&Gn(_,Zr(_),m)}function Fn(m,_){return m&&Gn(_,In(_),m)}function ts(m,_,A){_=="__proto__"&&ja?ja(m,_,{configurable:!0,enumerable:!0,value:A,writable:!0}):m[_]=A}function Vo(m,_){for(var A=-1,F=_.length,U=ve(F),K=m==null;++A<F;)U[A]=K?r:gf(m,_[A]);return U}function hs(m,_,A){return m===m&&(A!==r&&(m=m<=A?m:A),_!==r&&(m=m>=_?m:_)),m}function un(m,_,A,F,U,K){var ee,le=_&g,he=_&y,Pe=_&x;if(A&&(ee=U?A(m,F,U,K):A(m)),ee!==r)return ee;if(!hr(m))return m;var ke=gt(m);if(ke){if(ee=nd(m),!le)return tn(m,ee)}else{var Oe=Hr(m),Ue=Oe==et||Oe==Le;if(fa(m))return vu(m,le);if(Oe==Et||Oe==Ce||Ue&&!U){if(ee=he||Ue?{}:aa(m),!le)return he?Zd(m,Fn(ee,m)):Wc(m,rr(ee,m))}else{if(!$t[Oe])return U?m:{};ee=qr(m,Oe,le)}}K||(K=new Br);var Je=K.get(m);if(Je)return Je;K.set(m,ee),kf(m)?m.forEach(function(lt){ee.add(un(lt,_,A,lt,m,K))}):Rf(m)&&m.forEach(function(lt,Rt){ee.set(Rt,un(lt,_,A,Rt,m,K))});var ot=Pe?he?Xa:ul:he?In:Zr,wt=ke?r:ot(m);return Dr(wt||m,function(lt,Rt){wt&&(Rt=lt,lt=m[Rt]),pi(ee,Rt,un(lt,_,A,Rt,m,K))}),ee}function $c(m){var _=Zr(m);return function(A){return Fa(A,m,_)}}function Fa(m,_,A){var F=A.length;if(m==null)return!F;for(m=zt(m);F--;){var U=A[F],K=_[U],ee=m[U];if(ee===r&&!(U in m)||!K(ee))return!1}return!0}function ou(m,_,A){if(typeof m!="function")throw new En(o);return la(function(){m.apply(r,A)},_)}function rs(m,_,A,F){var U=-1,K=_o,ee=!0,le=m.length,he=[],Pe=_.length;if(!le)return he;A&&(_=Yt(_,fn(A))),F?(K=Hl,ee=!1):_.length>=s&&(K=ls,ee=!1,_=new di(_));e:for(;++U<le;){var ke=m[U],Oe=A==null?ke:A(ke);if(ke=F||ke!==0?ke:0,ee&&Oe===Oe){for(var Ue=Pe;Ue--;)if(_[Ue]===Oe)continue e;he.push(ke)}else K(_,Oe,F)||he.push(ke)}return he}var ns=Zc(Pn),Lc=Zc(Ds,!0);function $n(m,_){var A=!0;return ns(m,function(F,U,K){return A=!!_(F,U,K),A}),A}function mi(m,_,A){for(var F=-1,U=m.length;++F<U;){var K=m[F],ee=_(K);if(ee!=null&&(le===r?ee===ee&&!Hn(ee):A(ee,le)))var le=ee,he=K}return he}function Go(m,_,A,F){var U=m.length;for(A=vt(A),A<0&&(A=-A>U?0:U+A),F=F===r||F>U?U:vt(F),F<0&&(F+=U),F=A>F?0:Af(F);A<F;)m[A++]=_;return m}function gi(m,_){var A=[];return ns(m,function(F,U,K){_(F,U,K)&&A.push(F)}),A}function _r(m,_,A,F,U){var K=-1,ee=m.length;for(A||(A=Yd),U||(U=[]);++K<ee;){var le=m[K];_>0&&A(le)?_>1?_r(le,_-1,A,F,U):ks(U,le):F||(U[U.length]=le)}return U}var $a=Su(),Uo=Su(!0);function Pn(m,_){return m&&$a(m,_,Zr)}function Ds(m,_){return m&&Uo(m,_,Zr)}function en(m,_){return Ps(_,function(A){return Si(m[A])})}function gn(m,_){_=ps(_,m);for(var A=0,F=_.length;m!=null&&A<F;)m=m[Un(_[A++])];return A&&A==F?m:r}function zo(m,_,A){var F=_(m);return gt(m)?F:ks(F,A(m))}function Gr(m){return m==null?m===r?Bt:Dt:li&&li in zt(m)?td(m):ld(m)}function Ln(m,_){return m>_}function Fs(m,_){return m!=null&&jt.call(m,_)}function lu(m,_){return m!=null&&_ in zt(m)}function Bc(m,_,A){return m>=Fr(_,A)&&m<gr(_,A)}function Bn(m,_,A){for(var F=A?Hl:_o,U=m[0].length,K=m.length,ee=K,le=ve(K),he=1/0,Pe=[];ee--;){var ke=m[ee];ee&&_&&(ke=Yt(ke,fn(_))),he=Fr(ke.length,he),le[ee]=!A&&(_||U>=120&&ke.length>=120)?new di(ee&&ke):r}ke=m[0];var Oe=-1,Ue=le[0];e:for(;++Oe<U&&Pe.length<he;){var Je=ke[Oe],ot=_?_(Je):Je;if(Je=A||Je!==0?Je:0,!(Ue?ls(Ue,ot):F(Pe,ot,A))){for(ee=K;--ee;){var wt=le[ee];if(!(wt?ls(wt,ot):F(m[ee],ot,A)))continue e}Ue&&Ue.push(ot),Pe.push(Je)}}return Pe}function $s(m,_,A,F){return Pn(m,function(U,K,ee){_(F,A(U),K,ee)}),F}function Ls(m,_,A){_=ps(_,m),m=hl(m,_);var F=m==null?m:m[Un(Cr(_))];return F==null?r:Jr(F,m,A)}function uu(m){return xr(m)&&Gr(m)==Ce}function Ho(m){return xr(m)&&Gr(m)==Ft}function Vc(m){return xr(m)&&Gr(m)==Se}function Xi(m,_,A,F,U){return m===_?!0:m==null||_==null||!xr(m)&&!xr(_)?m!==m&&_!==_:cu(m,_,A,F,Xi,U)}function cu(m,_,A,F,U,K){var ee=gt(m),le=gt(_),he=ee?ce:Hr(m),Pe=le?ce:Hr(_);he=he==Ce?Et:he,Pe=Pe==Ce?Et:Pe;var ke=he==Et,Oe=Pe==Et,Ue=he==Pe;if(Ue&&fa(m)){if(!fa(_))return!1;ee=!0,ke=!1}if(Ue&&!ke)return K||(K=new Br),ee||Ml(m)?ll(m,_,A,F,U,K):ed(m,_,he,A,F,U,K);if(!(A&E)){var Je=ke&&jt.call(m,"__wrapped__"),ot=Oe&&jt.call(_,"__wrapped__");if(Je||ot){var wt=Je?m.value():m,lt=ot?_.value():_;return K||(K=new Br),U(wt,lt,A,F,K)}}return Ue?(K||(K=new Br),Au(m,_,A,F,U,K)):!1}function qo(m){return xr(m)&&Hr(m)==Ee}function Wo(m,_,A,F){var U=A.length,K=U,ee=!F;if(m==null)return!K;for(m=zt(m);U--;){var le=A[U];if(ee&&le[2]?le[1]!==m[le[0]]:!(le[0]in m))return!1}for(;++U<K;){le=A[U];var he=le[0],Pe=m[he],ke=le[1];if(ee&&le[2]){if(Pe===r&&!(he in m))return!1}else{var Oe=new Br;if(F)var Ue=F(Pe,ke,he,m,_,Oe);if(!(Ue===r?Xi(ke,Pe,E|S,F,Oe):Ue))return!1}}return!0}function du(m){if(!hr(m)||Nu(m))return!1;var _=Si(m)?kc:ha;return _.test(Hs(m))}function Gc(m){return xr(m)&&Gr(m)==ct}function fu(m){return xr(m)&&Hr(m)==Qe}function La(m){return xr(m)&&Sd(m.length)&&!!Gt[Gr(m)]}function Ba(m){return typeof m=="function"?m:m==null?Mn:typeof m=="object"?gt(m)?Vn(m[0],m[1]):Yi(m):Vf(m)}function Zo(m){if(!Qa(m))return Gi(m);var _=[];for(var A in zt(m))jt.call(m,A)&&A!="constructor"&&_.push(A);return _}function Uc(m){if(!hr(m))return od(m);var _=Qa(m),A=[];for(var F in m)F=="constructor"&&(_||!jt.call(m,F))||A.push(F);return A}function Bs(m,_){return m<_}function hu(m,_){var A=-1,F=jn(m)?ve(m.length):[];return ns(m,function(U,K,ee){F[++A]=_(U,K,ee)}),F}function Yi(m){var _=dl(m);return _.length==1&&_[0][2]?eo(_[0][0],_[0][1]):function(A){return A===m||Wo(A,m,_)}}function Vn(m,_){return Mu(m)&&oa(_)?eo(Un(m),_):function(A){var F=gf(A,m);return F===r&&F===_?yf(A,m):Xi(_,F,E|S)}}function Vs(m,_,A,F,U){m!==_&&$a(_,function(K,ee){if(U||(U=new Br),hr(K))Va(m,_,ee,A,Vs,F,U);else{var le=F?F(yn(m,ee),K,ee+"",m,_,U):r;le===r&&(le=K),Da(m,ee,le)}},In)}function Va(m,_,A,F,U,K,ee){var le=yn(m,A),he=yn(_,A),Pe=ee.get(he);if(Pe){Da(m,A,Pe);return}var ke=K?K(le,he,A+"",m,_,ee):r,Oe=ke===r;if(Oe){var Ue=gt(he),Je=!Ue&&fa(he),ot=!Ue&&!Je&&Ml(he);ke=he,Ue||Je||ot?gt(le)?ke=le:Rr(le)?ke=tn(le):Je?(Oe=!1,ke=vu(he,!0)):ot?(Oe=!1,ke=bu(he,!0)):ke=[]:tc(he)||ao(he)?(ke=le,ao(le)?ke=jf(le):(!hr(le)||Si(le))&&(ke=aa(he))):Oe=!1}Oe&&(ee.set(he,ke),U(ke,he,F,K,ee),ee.delete(he)),Da(m,A,ke)}function Gs(m,_){var A=m.length;if(A)return _+=_<0?A:0,kn(_,A)?m[_]:r}function Ko(m,_,A){_.length?_=Yt(_,function(K){return gt(K)?function(ee){return gn(ee,K.length===1?K[0]:K)}:K}):_=[Mn];var F=-1;_=Yt(_,fn(rt()));var U=hu(m,function(K,ee,le){var he=Yt(_,function(Pe){return Pe(K)});return{criteria:he,index:++F,value:K}});return Fd(U,function(K,ee){return qc(K,ee,A)})}function Ji(m,_){return pu(m,_,function(A,F){return yf(m,F)})}function pu(m,_,A){for(var F=-1,U=_.length,K={};++F<U;){var ee=_[F],le=gn(m,ee);A(le,ee)&&or(K,ps(ee,m),le)}return K}function mu(m){return function(_){return gn(_,m)}}function nr(m,_,A,F){var U=F?Zl:Oi,K=-1,ee=_.length,le=m;for(m===_&&(_=tn(_)),A&&(le=Yt(m,fn(A)));++K<ee;)for(var he=0,Pe=_[K],ke=A?A(Pe):Pe;(he=U(le,ke,he,F))>-1;)le!==m&&Ao.call(le,he,1),Ao.call(m,he,1);return m}function Ga(m,_){for(var A=m?_.length:0,F=A-1;A--;){var U=_[A];if(A==F||U!==K){var K=U;kn(U)?Ao.call(m,U,1):xi(m,U)}}return m}function Ua(m,_){return m+As(Ia()*(_-m+1))}function gu(m,_,A,F){for(var U=-1,K=gr(ui((_-m)/(A||1)),0),ee=ve(K);K--;)ee[F?K:++U]=m,m+=A;return ee}function Qi(m,_){var A="";if(!m||_<1||_>N)return A;do _%2&&(A+=m),_=As(_/2),_&&(m+=m);while(_);return A}function mt(m,_){return pl(fl(m,_,Mn),m+"")}function yi(m){return es(Nl(m))}function ar(m,_){var A=Nl(m);return xn(A,hs(_,0,A.length))}function or(m,_,A,F){if(!hr(m))return m;_=ps(_,m);for(var U=-1,K=_.length,ee=K-1,le=m;le!=null&&++U<K;){var he=Un(_[U]),Pe=A;if(he==="__proto__"||he==="constructor"||he==="prototype")return m;if(U!=ee){var ke=le[he];Pe=F?F(ke,he,le):r,Pe===r&&(Pe=hr(ke)?ke:kn(_[U+1])?[]:{})}pi(le,he,Pe),le=le[he]}return m}var br=No?function(m,_){return No.set(m,_),m}:Mn,Xo=ja?function(m,_){return ja(m,"toString",{configurable:!0,enumerable:!1,value:vf(_),writable:!0})}:Mn;function za(m){return xn(Nl(m))}function Ur(m,_,A){var F=-1,U=m.length;_<0&&(_=-_>U?0:U+_),A=A>U?U:A,A<0&&(A+=U),U=_>A?0:A-_>>>0,_>>>=0;for(var K=ve(U);++F<U;)K[F]=m[F+_];return K}function Wd(m,_){var A;return ns(m,function(F,U,K){return A=_(F,U,K),!A}),!!A}function wr(m,_,A){var F=0,U=m==null?F:m.length;if(typeof _=="number"&&_===_&&U<=pe){for(;F<U;){var K=F+U>>>1,ee=m[K];ee!==null&&!Hn(ee)&&(A?ee<=_:ee<_)?F=K+1:U=K}return U}return Ha(m,_,Mn,A)}function Ha(m,_,A,F){var U=0,K=m==null?0:m.length;if(K===0)return 0;_=A(_);for(var ee=_!==_,le=_===null,he=Hn(_),Pe=_===r;U<K;){var ke=As((U+K)/2),Oe=A(m[ke]),Ue=Oe!==r,Je=Oe===null,ot=Oe===Oe,wt=Hn(Oe);if(ee)var lt=F||ot;else Pe?lt=ot&&(F||Ue):le?lt=ot&&Ue&&(F||!Je):he?lt=ot&&Ue&&!Je&&(F||!wt):Je||wt?lt=!1:lt=F?Oe<=_:Oe<_;lt?U=ke+1:K=ke}return Fr(K,ne)}function Yo(m,_){for(var A=-1,F=m.length,U=0,K=[];++A<F;){var ee=m[A],le=_?_(ee):ee;if(!A||!_s(le,he)){var he=le;K[U++]=ee===0?0:ee}}return K}function Jo(m){return typeof m=="number"?m:Hn(m)?V:+m}function lr(m){if(typeof m=="string")return m;if(gt(m))return Yt(m,lr)+"";if(Hn(m))return Oo?Oo.call(m):"";var _=m+"";return _=="0"&&1/m==-1/0?"-0":_}function Er(m,_,A){var F=-1,U=_o,K=m.length,ee=!0,le=[],he=le;if(A)ee=!1,U=Hl;else if(K>=s){var Pe=_?null:rn(m);if(Pe)return Ts(Pe);ee=!1,U=ls,he=new di}else he=_?[]:le;e:for(;++F<K;){var ke=m[F],Oe=_?_(ke):ke;if(ke=A||ke!==0?ke:0,ee&&Oe===Oe){for(var Ue=he.length;Ue--;)if(he[Ue]===Oe)continue e;_&&he.push(Oe),le.push(ke)}else U(he,Oe,A)||(he!==le&&he.push(Oe),le.push(ke))}return le}function xi(m,_){return _=ps(_,m),m=hl(m,_),m==null||delete m[Un(Cr(_))]}function Qo(m,_,A,F){return or(m,_,A(gn(m,_)),F)}function ea(m,_,A,F){for(var U=m.length,K=F?U:-1;(F?K--:++K<U)&&_(m[K],K,m););return A?Ur(m,F?0:K,F?K+1:U):Ur(m,F?K+1:0,F?U:K)}function yu(m,_){var A=m;return A instanceof pt&&(A=A.value()),ql(_,function(F,U){return U.func.apply(U.thisArg,ks([F],U.args))},A)}function el(m,_,A){var F=m.length;if(F<2)return F?Er(m[0]):[];for(var U=-1,K=ve(F);++U<F;)for(var ee=m[U],le=-1;++le<F;)le!=U&&(K[U]=rs(K[U]||ee,m[le],_,A));return Er(_r(K,1),_,A)}function xu(m,_,A){for(var F=-1,U=m.length,K=_.length,ee={};++F<U;){var le=F<K?_[F]:r;A(ee,m[F],le)}return ee}function tl(m){return Rr(m)?m:[]}function rl(m){return typeof m=="function"?m:Mn}function ps(m,_){return gt(m)?m:Mu(m,_)?[m]:ud(Ht(m))}var zc=mt;function ms(m,_,A){var F=m.length;return A=A===r?F:A,!_&&A>=F?m:Ur(m,_,A)}var ta=Ac||function(m){return sr.clearTimeout(m)};function vu(m,_){if(_)return m.slice();var A=m.length,F=tu?tu(A):new m.constructor(A);return m.copy(F),F}function ra(m){var _=new m.constructor(m.byteLength);return new Aa(_).set(new Aa(m)),_}function nl(m,_){var A=_?ra(m.buffer):m.buffer;return new m.constructor(A,m.byteOffset,m.byteLength)}function Hc(m){var _=new m.constructor(m.source,Or.exec(m));return _.lastIndex=m.lastIndex,_}function _u(m){return pn?zt(pn.call(m)):{}}function bu(m,_){var A=_?ra(m.buffer):m.buffer;return new m.constructor(A,m.byteOffset,m.length)}function wu(m,_){if(m!==_){var A=m!==r,F=m===null,U=m===m,K=Hn(m),ee=_!==r,le=_===null,he=_===_,Pe=Hn(_);if(!le&&!Pe&&!K&&m>_||K&&ee&&he&&!le&&!Pe||F&&ee&&he||!A&&he||!U)return 1;if(!F&&!K&&!Pe&&m<_||Pe&&A&&U&&!F&&!K||le&&A&&U||!ee&&U||!he)return-1}return 0}function qc(m,_,A){for(var F=-1,U=m.criteria,K=_.criteria,ee=U.length,le=A.length;++F<ee;){var he=wu(U[F],K[F]);if(he){if(F>=le)return he;var Pe=A[F];return he*(Pe=="desc"?-1:1)}}return m.index-_.index}function Eu(m,_,A,F){for(var U=-1,K=m.length,ee=A.length,le=-1,he=_.length,Pe=gr(K-ee,0),ke=ve(he+Pe),Oe=!F;++le<he;)ke[le]=_[le];for(;++U<ee;)(Oe||U<K)&&(ke[A[U]]=m[U]);for(;Pe--;)ke[le++]=m[U++];return ke}function sl(m,_,A,F){for(var U=-1,K=m.length,ee=-1,le=A.length,he=-1,Pe=_.length,ke=gr(K-le,0),Oe=ve(ke+Pe),Ue=!F;++U<ke;)Oe[U]=m[U];for(var Je=U;++he<Pe;)Oe[Je+he]=_[he];for(;++ee<le;)(Ue||U<K)&&(Oe[Je+A[ee]]=m[U++]);return Oe}function tn(m,_){var A=-1,F=m.length;for(_||(_=ve(F));++A<F;)_[A]=m[A];return _}function Gn(m,_,A,F){var U=!A;A||(A={});for(var K=-1,ee=_.length;++K<ee;){var le=_[K],he=F?F(A[le],m[le],le,A,m):r;he===r&&(he=m[le]),U?ts(A,le,he):pi(A,le,he)}return A}function Wc(m,_){return Gn(m,ia(m),_)}function Zd(m,_){return Gn(m,as(m),_)}function qa(m,_){return function(A,F){var U=gt(A)?Ul:mn,K=_?_():{};return U(A,m,rt(F,2),K)}}function na(m){return mt(function(_,A){var F=-1,U=A.length,K=U>1?A[U-1]:r,ee=U>2?A[2]:r;for(K=m.length>3&&typeof K=="function"?(U--,K):r,ee&&Lt(A[0],A[1],ee)&&(K=U<3?r:K,U=1),_=zt(_);++F<U;){var le=A[F];le&&m(_,le,F,K)}return _})}function Zc(m,_){return function(A,F){if(A==null)return A;if(!jn(A))return m(A,F);for(var U=A.length,K=_?U:-1,ee=zt(A);(_?K--:++K<U)&&F(ee[K],K,ee)!==!1;);return A}}function Su(m){return function(_,A,F){for(var U=-1,K=zt(_),ee=F(_),le=ee.length;le--;){var he=ee[m?le:++U];if(A(K[he],he,K)===!1)break}return _}}function Kc(m,_,A){var F=_&k,U=Wa(m);function K(){var ee=this&&this!==sr&&this instanceof K?U:m;return ee.apply(F?A:this,arguments)}return K}function Cu(m){return function(_){_=Ht(_);var A=Fi(_)?hn(_):r,F=A?A[0]:_.charAt(0),U=A?ms(A,1).join(""):_.slice(1);return F[m]()+U}}function gs(m){return function(_){return ql(Lf($f(_).replace(Td,"")),m,"")}}function Wa(m){return function(){var _=arguments;switch(_.length){case 0:return new m;case 1:return new m(_[0]);case 2:return new m(_[0],_[1]);case 3:return new m(_[0],_[1],_[2]);case 4:return new m(_[0],_[1],_[2],_[3]);case 5:return new m(_[0],_[1],_[2],_[3],_[4]);case 6:return new m(_[0],_[1],_[2],_[3],_[4],_[5]);case 7:return new m(_[0],_[1],_[2],_[3],_[4],_[5],_[6])}var A=qi(m.prototype),F=m.apply(A,_);return hr(F)?F:A}}function Kd(m,_,A){var F=Wa(m);function U(){for(var K=arguments.length,ee=ve(K),le=K,he=Us(U);le--;)ee[le]=arguments[le];var Pe=K<3&&ee[0]!==he&&ee[K-1]!==he?[]:wn(ee,he);if(K-=Pe.length,K<A)return Jc(m,_,sa,U.placeholder,r,ee,Pe,r,r,A-K);var ke=this&&this!==sr&&this instanceof U?F:m;return Jr(ke,this,ee)}return U}function Xc(m){return function(_,A,F){var U=zt(_);if(!jn(_)){var K=rt(A,3);_=Zr(_),A=function(le){return K(U[le],le,U)}}var ee=m(_,A,F);return ee>-1?U[K?_[ee]:ee]:r}}function vi(m){return is(function(_){var A=_.length,F=A,U=$r.prototype.thru;for(m&&_.reverse();F--;){var K=_[F];if(typeof K!="function")throw new En(o);if(U&&!ee&&Ja(K)=="wrapper")var ee=new $r([],!0)}for(F=ee?F:A;++F<A;){K=_[F];var le=Ja(K),he=le=="wrapper"?Ya(K):r;he&&zs(he[0])&&he[1]==(L|R|I|B)&&!he[4].length&&he[9]==1?ee=ee[Ja(he[0])].apply(ee,he[3]):ee=K.length==1&&zs(K)?ee[le]():ee.thru(K)}return function(){var Pe=arguments,ke=Pe[0];if(ee&&Pe.length==1&&gt(ke))return ee.plant(ke).value();for(var Oe=0,Ue=A?_[Oe].apply(this,Pe):ke;++Oe<A;)Ue=_[Oe].call(this,Ue);return Ue}})}function sa(m,_,A,F,U,K,ee,le,he,Pe){var ke=_&L,Oe=_&k,Ue=_&C,Je=_&(R|j),ot=_&Z,wt=Ue?r:Wa(m);function lt(){for(var Rt=arguments.length,Tt=ve(Rt),qn=Rt;qn--;)Tt[qn]=arguments[qn];if(Je)var bn=Us(lt),Wn=_c(Tt,bn);if(F&&(Tt=Eu(Tt,F,U,Je)),K&&(Tt=sl(Tt,K,ee,Je)),Rt-=Wn,Je&&Rt<Pe){var Pr=wn(Tt,bn);return Jc(m,_,sa,lt.placeholder,A,Tt,Pr,le,he,Pe-Rt)}var bs=Oe?A:this,Ri=Ue?bs[m]:m;return Rt=Tt.length,le?Tt=Mr(Tt,le):ot&&Rt>1&&Tt.reverse(),ke&&he<Rt&&(Tt.length=he),this&&this!==sr&&this instanceof lt&&(Ri=wt||Wa(Ri)),Ri.apply(bs,Tt)}return lt}function il(m,_){return function(A,F){return $s(A,m,_(F),{})}}function al(m,_){return function(A,F){var U;if(A===r&&F===r)return _;if(A!==r&&(U=A),F!==r){if(U===r)return F;typeof A=="string"||typeof F=="string"?(A=lr(A),F=lr(F)):(A=Jo(A),F=Jo(F)),U=m(A,F)}return U}}function ol(m){return is(function(_){return _=Yt(_,fn(rt())),mt(function(A){var F=this;return m(_,function(U){return Jr(U,F,A)})})})}function Za(m,_){_=_===r?" ":lr(_);var A=_.length;if(A<2)return A?Qi(_,m):_;var F=Qi(_,ui(m/oi(_)));return Fi(_)?ms(hn(F),0,m).join(""):F.slice(0,m)}function Yc(m,_,A,F){var U=_&k,K=Wa(m);function ee(){for(var le=-1,he=arguments.length,Pe=-1,ke=F.length,Oe=ve(ke+he),Ue=this&&this!==sr&&this instanceof ee?K:m;++Pe<ke;)Oe[Pe]=F[Pe];for(;he--;)Oe[Pe++]=arguments[++le];return Jr(Ue,U?A:this,Oe)}return ee}function Ru(m){return function(_,A,F){return F&&typeof F!="number"&&Lt(_,A,F)&&(A=F=r),_=Ci(_),A===r?(A=_,_=0):A=Ci(A),F=F===r?_<A?1:-1:Ci(F),gu(_,A,F,m)}}function Ka(m){return function(_,A){return typeof _=="string"&&typeof A=="string"||(_=os(_),A=os(A)),m(_,A)}}function Jc(m,_,A,F,U,K,ee,le,he,Pe){var ke=_&R,Oe=ke?ee:r,Ue=ke?r:ee,Je=ke?K:r,ot=ke?r:K;_|=ke?I:O,_&=~(ke?O:I),_&P||(_&=-4);var wt=[m,_,U,Je,Oe,ot,Ue,le,he,Pe],lt=A.apply(r,wt);return zs(m)&&xs(lt,wt),lt.placeholder=F,Tn(lt,m,_)}function zr(m){var _=mr[m];return function(A,F){if(A=os(A),F=F==null?0:Fr(vt(F),292),F&&Vi(A)){var U=(Ht(A)+"e").split("e"),K=_(U[0]+"e"+(+U[1]+F));return U=(Ht(K)+"e").split("e"),+(U[0]+"e"+(+U[1]-F))}return _(A)}}var rn=js&&1/Ts(new js([,-0]))[1]==q?function(m){return new js(m)}:wf;function Pu(m){return function(_){var A=Hr(_);return A==Ee?Eo(_):A==Qe?Vd(_):$d(_,m(_))}}function ss(m,_,A,F,U,K,ee,le){var he=_&C;if(!he&&typeof m!="function")throw new En(o);var Pe=F?F.length:0;if(Pe||(_&=-97,F=U=r),ee=ee===r?ee:gr(vt(ee),0),le=le===r?le:vt(le),Pe-=U?U.length:0,_&O){var ke=F,Oe=U;F=U=r}var Ue=he?r:Ya(m),Je=[m,_,A,F,U,ke,Oe,K,ee,le];if(Ue&&ad(Je,Ue),m=Je[0],_=Je[1],A=Je[2],F=Je[3],U=Je[4],le=Je[9]=Je[9]===r?he?0:m.length:gr(Je[9]-Pe,0),!le&&_&(R|j)&&(_&=-25),!_||_==k)var ot=Kc(m,_,A);else _==R||_==j?ot=Kd(m,_,le):(_==I||_==(k|I))&&!U.length?ot=Yc(m,_,A,F):ot=sa.apply(r,Je);var wt=Ue?br:xs;return Tn(wt(ot,Je),m,_)}function ku(m,_,A,F){return m===r||_s(m,Xn[A])&&!jt.call(F,A)?_:m}function Tu(m,_,A,F,U,K){return hr(m)&&hr(_)&&(K.set(_,m),Vs(m,_,r,Tu,K),K.delete(_)),m}function Qc(m){return tc(m)?r:m}function ll(m,_,A,F,U,K){var ee=A&E,le=m.length,he=_.length;if(le!=he&&!(ee&&he>le))return!1;var Pe=K.get(m),ke=K.get(_);if(Pe&&ke)return Pe==_&&ke==m;var Oe=-1,Ue=!0,Je=A&S?new di:r;for(K.set(m,_),K.set(_,m);++Oe<le;){var ot=m[Oe],wt=_[Oe];if(F)var lt=ee?F(wt,ot,Oe,_,m,K):F(ot,wt,Oe,m,_,K);if(lt!==r){if(lt)continue;Ue=!1;break}if(Je){if(!Wl(_,function(Rt,Tt){if(!ls(Je,Tt)&&(ot===Rt||U(ot,Rt,A,F,K)))return Je.push(Tt)})){Ue=!1;break}}else if(!(ot===wt||U(ot,wt,A,F,K))){Ue=!1;break}}return K.delete(m),K.delete(_),Ue}function ed(m,_,A,F,U,K,ee){switch(A){case Mt:if(m.byteLength!=_.byteLength||m.byteOffset!=_.byteOffset)return!1;m=m.buffer,_=_.buffer;case Ft:return!(m.byteLength!=_.byteLength||!K(new Aa(m),new Aa(_)));case oe:case Se:case Pt:return _s(+m,+_);case Fe:return m.name==_.name&&m.message==_.message;case ct:case _t:return m==_+"";case Ee:var le=Eo;case Qe:var he=F&E;if(le||(le=Ts),m.size!=_.size&&!he)return!1;var Pe=ee.get(m);if(Pe)return Pe==_;F|=S,ee.set(m,_);var ke=ll(le(m),le(_),F,U,K,ee);return ee.delete(m),ke;case ft:if(pn)return pn.call(m)==pn.call(_)}return!1}function Au(m,_,A,F,U,K){var ee=A&E,le=ul(m),he=le.length,Pe=ul(_),ke=Pe.length;if(he!=ke&&!ee)return!1;for(var Oe=he;Oe--;){var Ue=le[Oe];if(!(ee?Ue in _:jt.call(_,Ue)))return!1}var Je=K.get(m),ot=K.get(_);if(Je&&ot)return Je==_&&ot==m;var wt=!0;K.set(m,_),K.set(_,m);for(var lt=ee;++Oe<he;){Ue=le[Oe];var Rt=m[Ue],Tt=_[Ue];if(F)var qn=ee?F(Tt,Rt,Ue,_,m,K):F(Rt,Tt,Ue,m,_,K);if(!(qn===r?Rt===Tt||U(Rt,Tt,A,F,K):qn)){wt=!1;break}lt||(lt=Ue=="constructor")}if(wt&&!lt){var bn=m.constructor,Wn=_.constructor;bn!=Wn&&"constructor"in m&&"constructor"in _&&!(typeof bn=="function"&&bn instanceof bn&&typeof Wn=="function"&&Wn instanceof Wn)&&(wt=!1)}return K.delete(m),K.delete(_),wt}function is(m){return pl(fl(m,r,to),m+"")}function ul(m){return zo(m,Zr,ia)}function Xa(m){return zo(m,In,as)}var Ya=No?function(m){return No.get(m)}:wf;function Ja(m){for(var _=m.name+"",A=zi[_],F=jt.call(zi,_)?A.length:0;F--;){var U=A[F],K=U.func;if(K==null||K==m)return U.name}return _}function Us(m){var _=jt.call(W,"placeholder")?W:m;return _.placeholder}function rt(){var m=W.iteratee||_f;return m=m===_f?Ba:m,arguments.length?m(arguments[0],arguments[1]):m}function cl(m,_){var A=m.__data__;return Ze(_)?A[typeof _=="string"?"string":"hash"]:A.map}function dl(m){for(var _=Zr(m),A=_.length;A--;){var F=_[A],U=m[F];_[A]=[F,U,oa(U)]}return _}function ys(m,_){var A=Di(m,_);return du(A)?A:r}function td(m){var _=jt.call(m,li),A=m[li];try{m[li]=r;var F=!0}catch{}var U=ka.call(m);return F&&(_?m[li]=A:delete m[li]),U}var ia=jo?function(m){return m==null?[]:(m=zt(m),Ps(jo(m),function(_){return To.call(m,_)}))}:Ef,as=jo?function(m){for(var _=[];m;)ks(_,ia(m)),m=Dn(m);return _}:Ef,Hr=Gr;(Ma&&Hr(new Ma(new ArrayBuffer(1)))!=Mt||ci&&Hr(new ci)!=Ee||Na&&Hr(Na.resolve())!=St||js&&Hr(new js)!=Qe||Oa&&Hr(new Oa)!=Wt)&&(Hr=function(m){var _=Gr(m),A=_==Et?m.constructor:r,F=A?Hs(A):"";if(F)switch(F){case su:return Mt;case Is:return Ee;case Ic:return St;case Hi:return Qe;case Yn:return Wt}return _});function rd(m,_,A){for(var F=-1,U=A.length;++F<U;){var K=A[F],ee=K.size;switch(K.type){case"drop":m+=ee;break;case"dropRight":_-=ee;break;case"take":_=Fr(_,m+ee);break;case"takeRight":m=gr(m,_-ee);break}}return{start:m,end:_}}function ju(m){var _=m.match(Kt);return _?_[1].split(Nn):[]}function Iu(m,_,A){_=ps(_,m);for(var F=-1,U=_.length,K=!1;++F<U;){var ee=Un(_[F]);if(!(K=m!=null&&A(m,ee)))break;m=m[ee]}return K||++F!=U?K:(U=m==null?0:m.length,!!U&&Sd(U)&&kn(ee,U)&&(gt(m)||ao(m)))}function nd(m){var _=m.length,A=new m.constructor(_);return _&&typeof m[0]=="string"&&jt.call(m,"index")&&(A.index=m.index,A.input=m.input),A}function aa(m){return typeof m.constructor=="function"&&!Qa(m)?qi(Dn(m)):{}}function qr(m,_,A){var F=m.constructor;switch(_){case Ft:return ra(m);case oe:case Se:return new F(+m);case Mt:return nl(m,A);case bt:case Be:case tt:case yt:case jr:case ir:case vr:case Vt:case Ut:return bu(m,A);case Ee:return new F;case Pt:case _t:return new F(m);case ct:return Hc(m);case Qe:return new F;case ft:return _u(m)}}function Xd(m,_){var A=_.length;if(!A)return m;var F=A-1;return _[F]=(A>1?"& ":"")+_[F],_=_.join(A>2?", ":" "),m.replace(Qt,`{
/* [wrapped with `+_+`] */
`)}function Yd(m){return gt(m)||ao(m)||!!(Tc&&m&&m[Tc])}function kn(m,_){var A=typeof m;return _=_??N,!!_&&(A=="number"||A!="symbol"&&ma.test(m))&&m>-1&&m%1==0&&m<_}function Lt(m,_,A){if(!hr(A))return!1;var F=typeof _;return(F=="number"?jn(A)&&kn(_,A.length):F=="string"&&_ in A)?_s(A[_],m):!1}function Mu(m,_){if(gt(m))return!1;var A=typeof m;return A=="number"||A=="symbol"||A=="boolean"||m==null||Hn(m)?!0:it.test(m)||!qe.test(m)||_!=null&&m in zt(_)}function Ze(m){var _=typeof m;return _=="string"||_=="number"||_=="symbol"||_=="boolean"?m!=="__proto__":m===null}function zs(m){var _=Ja(m),A=W[_];if(typeof A!="function"||!(_ in pt.prototype))return!1;if(m===A)return!0;var F=Ya(A);return!!F&&m===F[0]}function Nu(m){return!!Ro&&Ro in m}var sd=Li?Si:Sf;function Qa(m){var _=m&&m.constructor,A=typeof _=="function"&&_.prototype||Xn;return m===A}function oa(m){return m===m&&!hr(m)}function eo(m,_){return function(A){return A==null?!1:A[m]===_&&(_!==r||m in zt(A))}}function Ou(m){var _=ue(m,function(F){return A.size===d&&A.clear(),F}),A=_.cache;return _}function ad(m,_){var A=m[1],F=_[1],U=A|F,K=U<(k|C|L),ee=F==L&&A==R||F==L&&A==B&&m[7].length<=_[8]||F==(L|B)&&_[7].length<=_[8]&&A==R;if(!(K||ee))return m;F&k&&(m[2]=_[2],U|=A&k?0:P);var le=_[3];if(le){var he=m[3];m[3]=he?Eu(he,le,_[4]):le,m[4]=he?wn(m[3],p):_[4]}return le=_[5],le&&(he=m[5],m[5]=he?sl(he,le,_[6]):le,m[6]=he?wn(m[5],p):_[6]),le=_[7],le&&(m[7]=le),F&L&&(m[8]=m[8]==null?_[8]:Fr(m[8],_[8])),m[9]==null&&(m[9]=_[9]),m[0]=_[0],m[1]=U,m}function od(m){var _=[];if(m!=null)for(var A in zt(m))_.push(A);return _}function ld(m){return ka.call(m)}function fl(m,_,A){return _=gr(_===r?m.length-1:_,0),function(){for(var F=arguments,U=-1,K=gr(F.length-_,0),ee=ve(K);++U<K;)ee[U]=F[_+U];U=-1;for(var le=ve(_+1);++U<_;)le[U]=F[U];return le[_]=A(ee),Jr(m,this,le)}}function hl(m,_){return _.length<2?m:gn(m,Ur(_,0,-1))}function Mr(m,_){for(var A=m.length,F=Fr(_.length,A),U=tn(m);F--;){var K=_[F];m[F]=kn(K,A)?U[K]:r}return m}function yn(m,_){if(!(_==="constructor"&&typeof m[_]=="function")&&_!="__proto__")return m[_]}var xs=Du(br),la=ru||function(m,_){return sr.setTimeout(m,_)},pl=Du(Xo);function Tn(m,_,A){var F=_+"";return pl(m,Xd(F,cd(ju(F),A)))}function Du(m){var _=0,A=0;return function(){var F=qd(),U=fe-(F-A);if(A=F,U>0){if(++_>=Q)return arguments[0]}else _=0;return m.apply(r,arguments)}}function xn(m,_){var A=-1,F=m.length,U=F-1;for(_=_===r?F:_;++A<_;){var K=Ua(A,U),ee=m[K];m[K]=m[A],m[A]=ee}return m.length=_,m}var ud=Ou(function(m){var _=[];return m.charCodeAt(0)===46&&_.push(""),m.replace(at,function(A,F,U,K){_.push(U?K.replace(Xr,"$1"):F||A)}),_});function Un(m){if(typeof m=="string"||Hn(m))return m;var _=m+"";return _=="0"&&1/m==-1/0?"-0":_}function Hs(m){if(m!=null){try{return Pa.call(m)}catch{}try{return m+""}catch{}}return""}function cd(m,_){return Dr(xe,function(A){var F="_."+A[0];_&A[1]&&!_o(m,F)&&m.push(F)}),m.sort()}function Fu(m){if(m instanceof pt)return m.clone();var _=new $r(m.__wrapped__,m.__chain__);return _.__actions__=tn(m.__actions__),_.__index__=m.__index__,_.__values__=m.__values__,_}function Jd(m,_,A){(A?Lt(m,_,A):_===r)?_=1:_=gr(vt(_),0);var F=m==null?0:m.length;if(!F||_<1)return[];for(var U=0,K=0,ee=ve(ui(F/_));U<F;)ee[K++]=Ur(m,U,U+=_);return ee}function ml(m){for(var _=-1,A=m==null?0:m.length,F=0,U=[];++_<A;){var K=m[_];K&&(U[F++]=K)}return U}function $u(){var m=arguments.length;if(!m)return[];for(var _=ve(m-1),A=arguments[0],F=m;F--;)_[F-1]=arguments[F];return ks(gt(A)?tn(A):[A],_r(_,1))}var An=mt(function(m,_){return Rr(m)?rs(m,_r(_,1,Rr,!0)):[]}),kt=mt(function(m,_){var A=Cr(_);return Rr(A)&&(A=r),Rr(m)?rs(m,_r(_,1,Rr,!0),rt(A,2)):[]}),Tr=mt(function(m,_){var A=Cr(_);return Rr(A)&&(A=r),Rr(m)?rs(m,_r(_,1,Rr,!0),r,A):[]});function yr(m,_,A){var F=m==null?0:m.length;return F?(_=A||_===r?1:vt(_),Ur(m,_<0?0:_,F)):[]}function Nr(m,_,A){var F=m==null?0:m.length;return F?(_=A||_===r?1:vt(_),_=F-_,Ur(m,0,_<0?0:_)):[]}function vn(m,_){return m&&m.length?ea(m,rt(_,3),!0,!0):[]}function ua(m,_){return m&&m.length?ea(m,rt(_,3),!0):[]}function Sr(m,_,A,F){var U=m==null?0:m.length;return U?(A&&typeof A!="number"&&Lt(m,_,A)&&(A=0,F=U),Go(m,_,A,F)):[]}function ca(m,_,A){var F=m==null?0:m.length;if(!F)return-1;var U=A==null?0:vt(A);return U<0&&(U=gr(F+U,0)),bo(m,rt(_,3),U)}function qs(m,_,A){var F=m==null?0:m.length;if(!F)return-1;var U=F-1;return A!==r&&(U=vt(A),U=A<0?gr(F+U,0):Fr(U,F-1)),bo(m,rt(_,3),U,!0)}function to(m){var _=m==null?0:m.length;return _?_r(m,1):[]}function Lu(m){var _=m==null?0:m.length;return _?_r(m,q):[]}function ro(m,_){var A=m==null?0:m.length;return A?(_=_===r?1:vt(_),_r(m,_)):[]}function cn(m){for(var _=-1,A=m==null?0:m.length,F={};++_<A;){var U=m[_];F[U[0]]=U[1]}return F}function gl(m){return m&&m.length?m[0]:r}function da(m,_,A){var F=m==null?0:m.length;if(!F)return-1;var U=A==null?0:vt(A);return U<0&&(U=gr(F+U,0)),Oi(m,_,U)}function vs(m){var _=m==null?0:m.length;return _?Ur(m,0,-1):[]}var yl=mt(function(m){var _=Yt(m,tl);return _.length&&_[0]===m[0]?Bn(_):[]}),Bu=mt(function(m){var _=Cr(m),A=Yt(m,tl);return _===Cr(A)?_=r:A.pop(),A.length&&A[0]===m[0]?Bn(A,rt(_,2)):[]}),Ws=mt(function(m){var _=Cr(m),A=Yt(m,tl);return _=typeof _=="function"?_:r,_&&A.pop(),A.length&&A[0]===m[0]?Bn(A,r,_):[]});function xl(m,_){return m==null?"":Io.call(m,_)}function Cr(m){var _=m==null?0:m.length;return _?m[_-1]:r}function vl(m,_,A){var F=m==null?0:m.length;if(!F)return-1;var U=F;return A!==r&&(U=vt(A),U=U<0?gr(F+U,0):Fr(U,F-1)),_===_?Gd(m,_,U):bo(m,mc,U,!0)}function no(m,_){return m&&m.length?Gs(m,vt(_)):r}var Vu=mt(so);function so(m,_){return m&&m.length&&_&&_.length?nr(m,_):m}function _l(m,_,A){return m&&m.length&&_&&_.length?nr(m,_,rt(A,2)):m}function nn(m,_,A){return m&&m.length&&_&&_.length?nr(m,_,r,A):m}var Zs=is(function(m,_){var A=m==null?0:m.length,F=Vo(m,_);return Ga(m,Yt(_,function(U){return kn(U,A)?+U:U}).sort(wu)),F});function zn(m,_){var A=[];if(!(m&&m.length))return A;var F=-1,U=[],K=m.length;for(_=rt(_,3);++F<K;){var ee=m[F];_(ee,F,m)&&(A.push(ee),U.push(F))}return Ga(m,U),A}function Wr(m){return m==null?m:Mo.call(m)}function dd(m,_,A){var F=m==null?0:m.length;return F?(A&&typeof A!="number"&&Lt(m,_,A)?(_=0,A=F):(_=_==null?0:vt(_),A=A===r?F:vt(A)),Ur(m,_,A)):[]}function Gu(m,_){return wr(m,_)}function Uu(m,_,A){return Ha(m,_,rt(A,2))}function Qd(m,_){var A=m==null?0:m.length;if(A){var F=wr(m,_);if(F<A&&_s(m[F],_))return F}return-1}function Ks(m,_){return wr(m,_,!0)}function fd(m,_,A){return Ha(m,_,rt(A,2),!0)}function zu(m,_){var A=m==null?0:m.length;if(A){var F=wr(m,_,!0)-1;if(_s(m[F],_))return F}return-1}function _i(m){return m&&m.length?Yo(m):[]}function Hu(m,_){return m&&m.length?Yo(m,rt(_,2)):[]}function bi(m){var _=m==null?0:m.length;return _?Ur(m,1,_):[]}function hd(m,_,A){return m&&m.length?(_=A||_===r?1:vt(_),Ur(m,0,_<0?0:_)):[]}function pd(m,_,A){var F=m==null?0:m.length;return F?(_=A||_===r?1:vt(_),_=F-_,Ur(m,_<0?0:_,F)):[]}function qu(m,_){return m&&m.length?ea(m,rt(_,3),!1,!0):[]}function bl(m,_){return m&&m.length?ea(m,rt(_,3)):[]}var ef=mt(function(m){return Er(_r(m,1,Rr,!0))}),tf=mt(function(m){var _=Cr(m);return Rr(_)&&(_=r),Er(_r(m,1,Rr,!0),rt(_,2))}),md=mt(function(m){var _=Cr(m);return _=typeof _=="function"?_:r,Er(_r(m,1,Rr,!0),r,_)});function gd(m){return m&&m.length?Er(m):[]}function wi(m,_){return m&&m.length?Er(m,rt(_,2)):[]}function rf(m,_){return _=typeof _=="function"?_:r,m&&m.length?Er(m,r,_):[]}function Xs(m){if(!(m&&m.length))return[];var _=0;return m=Ps(m,function(A){if(Rr(A))return _=gr(A.length,_),!0}),Yl(_,function(A){return Yt(m,Kl(A))})}function Wu(m,_){if(!(m&&m.length))return[];var A=Xs(m);return _==null?A:Yt(A,function(F){return Jr(_,r,F)})}var ur=mt(function(m,_){return Rr(m)?rs(m,_):[]}),nf=mt(function(m){return el(Ps(m,Rr))}),yd=mt(function(m){var _=Cr(m);return Rr(_)&&(_=r),el(Ps(m,Rr),rt(_,2))}),sf=mt(function(m){var _=Cr(m);return _=typeof _=="function"?_:r,el(Ps(m,Rr),r,_)}),af=mt(Xs);function xd(m,_){return xu(m||[],_||[],pi)}function vd(m,_){return xu(m||[],_||[],or)}var of=mt(function(m){var _=m.length,A=_>1?m[_-1]:r;return A=typeof A=="function"?(m.pop(),A):r,Wu(m,A)});function _n(m){var _=W(m);return _.__chain__=!0,_}function Zu(m,_){return _(m),m}function wl(m,_){return _(m)}var Ys=is(function(m){var _=m.length,A=_?m[0]:0,F=this.__wrapped__,U=function(K){return Vo(K,m)};return _>1||this.__actions__.length||!(F instanceof pt)||!kn(A)?this.thru(U):(F=F.slice(A,+A+(_?1:0)),F.__actions__.push({func:wl,args:[U],thisArg:r}),new $r(F,this.__chain__).thru(function(K){return _&&!K.length&&K.push(r),K}))});function El(){return _n(this)}function Ei(){return new $r(this.value(),this.__chain__)}function Sl(){this.__values__===r&&(this.__values__=Tf(this.value()));var m=this.__index__>=this.__values__.length,_=m?r:this.__values__[this.__index__++];return{done:m,value:_}}function Ku(){return this}function Xu(m){for(var _,A=this;A instanceof Jn;){var F=Fu(A);F.__index__=0,F.__values__=r,_?U.__wrapped__=F:_=F;var U=F;A=A.__wrapped__}return U.__wrapped__=m,_}function lf(){var m=this.__wrapped__;if(m instanceof pt){var _=m;return this.__actions__.length&&(_=new pt(this)),_=_.reverse(),_.__actions__.push({func:wl,args:[Wr],thisArg:r}),new $r(_,this.__chain__)}return this.thru(Wr)}function Yu(){return yu(this.__wrapped__,this.__actions__)}var uf=qa(function(m,_,A){jt.call(m,A)?++m[A]:ts(m,A,1)});function _d(m,_,A){var F=gt(m)?zl:$n;return A&&Lt(m,_,A)&&(_=r),F(m,rt(_,3))}function bd(m,_){var A=gt(m)?Ps:gi;return A(m,rt(_,3))}var Cl=Xc(ca),Rl=Xc(qs);function wd(m,_){return _r(Al(m,_),1)}function Ju(m,_){return _r(Al(m,_),q)}function cf(m,_,A){return A=A===r?1:vt(A),_r(Al(m,_),A)}function Qu(m,_){var A=gt(m)?Dr:ns;return A(m,rt(_,3))}function Pl(m,_){var A=gt(m)?vo:Lc;return A(m,rt(_,3))}var kl=qa(function(m,_,A){jt.call(m,A)?m[A].push(_):ts(m,A,[_])});function ec(m,_,A,F){m=jn(m)?m:Nl(m),A=A&&!F?vt(A):0;var U=m.length;return A<0&&(A=gr(U+A,0)),Cd(m)?A<=U&&m.indexOf(_,A)>-1:!!U&&Oi(m,_,A)>-1}var Tl=mt(function(m,_,A){var F=-1,U=typeof _=="function",K=jn(m)?ve(m.length):[];return ns(m,function(ee){K[++F]=U?Jr(_,ee,A):Ls(ee,_,A)}),K}),Ed=qa(function(m,_,A){ts(m,A,_)});function Al(m,_){var A=gt(m)?Yt:hu;return A(m,rt(_,3))}function jl(m,_,A,F){return m==null?[]:(gt(_)||(_=_==null?[]:[_]),A=F?r:A,gt(A)||(A=A==null?[]:[A]),Ko(m,_,A))}var df=qa(function(m,_,A){m[A?0:1].push(_)},function(){return[[],[]]});function io(m,_,A){var F=gt(m)?ql:yc,U=arguments.length<3;return F(m,rt(_,4),A,U,ns)}function ff(m,_,A){var F=gt(m)?Nd:yc,U=arguments.length<3;return F(m,rt(_,4),A,U,Lc)}function Il(m,_){var A=gt(m)?Ps:gi;return A(m,ye(rt(_,3)))}function u(m){var _=gt(m)?es:yi;return _(m)}function f(m,_,A){(A?Lt(m,_,A):_===r)?_=1:_=vt(_);var F=gt(m)?hi:ar;return F(m,_)}function b(m){var _=gt(m)?Fc:za;return _(m)}function T(m){if(m==null)return 0;if(jn(m))return Cd(m)?oi(m):m.length;var _=Hr(m);return _==Ee||_==Qe?m.size:Zo(m).length}function M(m,_,A){var F=gt(m)?Wl:Wd;return A&&Lt(m,_,A)&&(_=r),F(m,rt(_,3))}var D=mt(function(m,_){if(m==null)return[];var A=_.length;return A>1&&Lt(m,_[0],_[1])?_=[]:A>2&&Lt(_[0],_[1],_[2])&&(_=[_[0]]),Ko(m,_r(_,1),[])}),H=er||function(){return sr.Date.now()};function J(m,_){if(typeof _!="function")throw new En(o);return m=vt(m),function(){if(--m<1)return _.apply(this,arguments)}}function ae(m,_,A){return _=A?r:_,_=m&&_==null?m.length:_,ss(m,L,r,r,r,r,_)}function _e(m,_){var A;if(typeof _!="function")throw new En(o);return m=vt(m),function(){return--m>0&&(A=_.apply(this,arguments)),m<=1&&(_=r),A}}var Me=mt(function(m,_,A){var F=k;if(A.length){var U=wn(A,Us(Me));F|=I}return ss(m,F,_,A,U)}),De=mt(function(m,_,A){var F=k|C;if(A.length){var U=wn(A,Us(De));F|=I}return ss(_,F,m,A,U)});function Ie(m,_,A){_=A?r:_;var F=ss(m,R,r,r,r,r,r,_);return F.placeholder=Ie.placeholder,F}function He(m,_,A){_=A?r:_;var F=ss(m,j,r,r,r,r,r,_);return F.placeholder=He.placeholder,F}function Ke(m,_,A){var F,U,K,ee,le,he,Pe=0,ke=!1,Oe=!1,Ue=!0;if(typeof m!="function")throw new En(o);_=os(_)||0,hr(A)&&(ke=!!A.leading,Oe="maxWait"in A,K=Oe?gr(os(A.maxWait)||0,_):K,Ue="trailing"in A?!!A.trailing:Ue);function Je(Pr){var bs=F,Ri=U;return F=U=r,Pe=Pr,ee=m.apply(Ri,bs),ee}function ot(Pr){return Pe=Pr,le=la(Rt,_),ke?Je(Pr):ee}function wt(Pr){var bs=Pr-he,Ri=Pr-Pe,Gf=_-bs;return Oe?Fr(Gf,K-Ri):Gf}function lt(Pr){var bs=Pr-he,Ri=Pr-Pe;return he===r||bs>=_||bs<0||Oe&&Ri>=K}function Rt(){var Pr=H();if(lt(Pr))return Tt(Pr);le=la(Rt,wt(Pr))}function Tt(Pr){return le=r,Ue&&F?Je(Pr):(F=U=r,ee)}function qn(){le!==r&&ta(le),Pe=0,F=he=U=le=r}function bn(){return le===r?ee:Tt(H())}function Wn(){var Pr=H(),bs=lt(Pr);if(F=arguments,U=this,he=Pr,bs){if(le===r)return ot(he);if(Oe)return ta(le),le=la(Rt,_),Je(he)}return le===r&&(le=la(Rt,_)),ee}return Wn.cancel=qn,Wn.flush=bn,Wn}var Xe=mt(function(m,_){return ou(m,1,_)}),dr=mt(function(m,_,A){return ou(m,os(_)||0,A)});function ge(m){return ss(m,Z)}function ue(m,_){if(typeof m!="function"||_!=null&&typeof _!="function")throw new En(o);var A=function(){var F=arguments,U=_?_.apply(this,F):F[0],K=A.cache;if(K.has(U))return K.get(U);var ee=m.apply(this,F);return A.cache=K.set(U,ee)||K,ee};return A.cache=new(ue.Cache||Sn),A}ue.Cache=Sn;function ye(m){if(typeof m!="function")throw new En(o);return function(){var _=arguments;switch(_.length){case 0:return!m.call(this);case 1:return!m.call(this,_[0]);case 2:return!m.call(this,_[0],_[1]);case 3:return!m.call(this,_[0],_[1],_[2])}return!m.apply(this,_)}}function $e(m){return _e(2,m)}var Ye=zc(function(m,_){_=_.length==1&&gt(_[0])?Yt(_[0],fn(rt())):Yt(_r(_,1),fn(rt()));var A=_.length;return mt(function(F){for(var U=-1,K=Fr(F.length,A);++U<K;)F[U]=_[U].call(this,F[U]);return Jr(m,this,F)})}),nt=mt(function(m,_){var A=wn(_,Us(nt));return ss(m,I,r,_,A)}),st=mt(function(m,_){var A=wn(_,Us(st));return ss(m,O,r,_,A)}),ut=is(function(m,_){return ss(m,B,r,r,r,_)});function Ar(m,_){if(typeof m!="function")throw new En(o);return _=_===r?_:vt(_),mt(m,_)}function It(m,_){if(typeof m!="function")throw new En(o);return _=_==null?0:gr(vt(_),0),mt(function(A){var F=A[_],U=ms(A,0,_);return F&&ks(U,F),Jr(m,this,U)})}function Js(m,_,A){var F=!0,U=!0;if(typeof m!="function")throw new En(o);return hr(A)&&(F="leading"in A?!!A.leading:F,U="trailing"in A?!!A.trailing:U),Ke(m,_,{leading:F,maxWait:_,trailing:U})}function hf(m){return ae(m,1)}function zf(m,_){return nt(rl(_),m)}function Hf(){if(!arguments.length)return[];var m=arguments[0];return gt(m)?m:[m]}function qf(m){return un(m,x)}function Wf(m,_){return _=typeof _=="function"?_:r,un(m,x,_)}function Zf(m){return un(m,g|x)}function Kf(m,_){return _=typeof _=="function"?_:r,un(m,g|x,_)}function Xf(m,_){return _==null||Fa(m,_,Zr(_))}function _s(m,_){return m===_||m!==m&&_!==_}var Yf=Ka(Ln),Jf=Ka(function(m,_){return m>=_}),ao=uu(function(){return arguments}())?uu:function(m){return xr(m)&&jt.call(m,"callee")&&!To.call(m,"callee")},gt=ve.isArray,Qf=Gl?fn(Gl):Ho;function jn(m){return m!=null&&Sd(m.length)&&!Si(m)}function Rr(m){return xr(m)&&jn(m)}function eh(m){return m===!0||m===!1||xr(m)&&Gr(m)==oe}var fa=nu||Sf,th=sn?fn(sn):Vc;function rh(m){return xr(m)&&m.nodeType===1&&!tc(m)}function nh(m){if(m==null)return!0;if(jn(m)&&(gt(m)||typeof m=="string"||typeof m.splice=="function"||fa(m)||Ml(m)||ao(m)))return!m.length;var _=Hr(m);if(_==Ee||_==Qe)return!m.size;if(Qa(m))return!Zo(m).length;for(var A in m)if(jt.call(m,A))return!1;return!0}function sh(m,_){return Xi(m,_)}function ih(m,_,A){A=typeof A=="function"?A:r;var F=A?A(m,_):r;return F===r?Xi(m,_,r,A):!!F}function pf(m){if(!xr(m))return!1;var _=Gr(m);return _==Fe||_==Ne||typeof m.message=="string"&&typeof m.name=="string"&&!tc(m)}function ah(m){return typeof m=="number"&&Vi(m)}function Si(m){if(!hr(m))return!1;var _=Gr(m);return _==et||_==Le||_==Re||_==Ct}function Cf(m){return typeof m=="number"&&m==vt(m)}function Sd(m){return typeof m=="number"&&m>-1&&m%1==0&&m<=N}function hr(m){var _=typeof m;return m!=null&&(_=="object"||_=="function")}function xr(m){return m!=null&&typeof m=="object"}var Rf=ai?fn(ai):qo;function oh(m,_){return m===_||Wo(m,_,dl(_))}function lh(m,_,A){return A=typeof A=="function"?A:r,Wo(m,_,dl(_),A)}function uh(m){return Pf(m)&&m!=+m}function ch(m){if(sd(m))throw new dt(a);return du(m)}function dh(m){return m===null}function fh(m){return m==null}function Pf(m){return typeof m=="number"||xr(m)&&Gr(m)==Pt}function tc(m){if(!xr(m)||Gr(m)!=Et)return!1;var _=Dn(m);if(_===null)return!0;var A=jt.call(_,"constructor")&&_.constructor;return typeof A=="function"&&A instanceof A&&Pa.call(A)==Po}var mf=xo?fn(xo):Gc;function hh(m){return Cf(m)&&m>=-9007199254740991&&m<=N}var kf=Ni?fn(Ni):fu;function Cd(m){return typeof m=="string"||!gt(m)&&xr(m)&&Gr(m)==_t}function Hn(m){return typeof m=="symbol"||xr(m)&&Gr(m)==ft}var Ml=fc?fn(fc):La;function ph(m){return m===r}function mh(m){return xr(m)&&Hr(m)==Wt}function gh(m){return xr(m)&&Gr(m)==Zt}var yh=Ka(Bs),xh=Ka(function(m,_){return m<=_});function Tf(m){if(!m)return[];if(jn(m))return Cd(m)?hn(m):tn(m);if(ds&&m[ds])return Bd(m[ds]());var _=Hr(m),A=_==Ee?Eo:_==Qe?Ts:Nl;return A(m)}function Ci(m){if(!m)return m===0?m:0;if(m=os(m),m===q||m===-1/0){var _=m<0?-1:1;return _*$}return m===m?m:0}function vt(m){var _=Ci(m),A=_%1;return _===_?A?_-A:_:0}function Af(m){return m?hs(vt(m),0,z):0}function os(m){if(typeof m=="number")return m;if(Hn(m))return V;if(hr(m)){var _=typeof m.valueOf=="function"?m.valueOf():m;m=hr(_)?_+"":_}if(typeof m!="string")return m===0?m:+m;m=xc(m);var A=dn.test(m);return A||pa.test(m)?go(m.slice(2),A?2:8):Pi.test(m)?V:+m}function jf(m){return Gn(m,In(m))}function _h(m){return m?hs(vt(m),-9007199254740991,N):m===0?m:0}function Ht(m){return m==null?"":lr(m)}var bh=na(function(m,_){if(Qa(_)||jn(_)){Gn(_,Zr(_),m);return}for(var A in _)jt.call(_,A)&&pi(m,A,_[A])}),If=na(function(m,_){Gn(_,In(_),m)}),Rd=na(function(m,_,A,F){Gn(_,In(_),m,F)}),wh=na(function(m,_,A,F){Gn(_,Zr(_),m,F)}),Eh=is(Vo);function Sh(m,_){var A=qi(m);return _==null?A:rr(A,_)}var Ch=mt(function(m,_){m=zt(m);var A=-1,F=_.length,U=F>2?_[2]:r;for(U&&Lt(_[0],_[1],U)&&(F=1);++A<F;)for(var K=_[A],ee=In(K),le=-1,he=ee.length;++le<he;){var Pe=ee[le],ke=m[Pe];(ke===r||_s(ke,Xn[Pe])&&!jt.call(m,Pe))&&(m[Pe]=K[Pe])}return m}),Rh=mt(function(m){return m.push(r,Tu),Jr(Mf,r,m)});function Ph(m,_){return pc(m,rt(_,3),Pn)}function kh(m,_){return pc(m,rt(_,3),Ds)}function Th(m,_){return m==null?m:$a(m,rt(_,3),In)}function Ah(m,_){return m==null?m:Uo(m,rt(_,3),In)}function jh(m,_){return m&&Pn(m,rt(_,3))}function Ih(m,_){return m&&Ds(m,rt(_,3))}function Mh(m){return m==null?[]:en(m,Zr(m))}function Nh(m){return m==null?[]:en(m,In(m))}function gf(m,_,A){var F=m==null?r:gn(m,_);return F===r?A:F}function Oh(m,_){return m!=null&&Iu(m,_,Fs)}function yf(m,_){return m!=null&&Iu(m,_,lu)}var Dh=il(function(m,_,A){_!=null&&typeof _.toString!="function"&&(_=ka.call(_)),m[_]=A},vf(Mn)),Fh=il(function(m,_,A){_!=null&&typeof _.toString!="function"&&(_=ka.call(_)),jt.call(m,_)?m[_].push(A):m[_]=[A]},rt),$h=mt(Ls);function Zr(m){return jn(m)?Qn(m):Zo(m)}function In(m){return jn(m)?Qn(m,!0):Uc(m)}function Lh(m,_){var A={};return _=rt(_,3),Pn(m,function(F,U,K){ts(A,_(F,U,K),F)}),A}function Bh(m,_){var A={};return _=rt(_,3),Pn(m,function(F,U,K){ts(A,U,_(F,U,K))}),A}var Vh=na(function(m,_,A){Vs(m,_,A)}),Mf=na(function(m,_,A,F){Vs(m,_,A,F)}),Gh=is(function(m,_){var A={};if(m==null)return A;var F=!1;_=Yt(_,function(K){return K=ps(K,m),F||(F=K.length>1),K}),Gn(m,Xa(m),A),F&&(A=un(A,g|y|x,Qc));for(var U=_.length;U--;)xi(A,_[U]);return A});function Uh(m,_){return Nf(m,ye(rt(_)))}var zh=is(function(m,_){return m==null?{}:Ji(m,_)});function Nf(m,_){if(m==null)return{};var A=Yt(Xa(m),function(F){return[F]});return _=rt(_),pu(m,A,function(F,U){return _(F,U[0])})}function Hh(m,_,A){_=ps(_,m);var F=-1,U=_.length;for(U||(U=1,m=r);++F<U;){var K=m==null?r:m[Un(_[F])];K===r&&(F=U,K=A),m=Si(K)?K.call(m):K}return m}function qh(m,_,A){return m==null?m:or(m,_,A)}function Wh(m,_,A,F){return F=typeof F=="function"?F:r,m==null?m:or(m,_,A,F)}var Of=Pu(Zr),Df=Pu(In);function Zh(m,_,A){var F=gt(m),U=F||fa(m)||Ml(m);if(_=rt(_,4),A==null){var K=m&&m.constructor;U?A=F?new K:[]:hr(m)?A=Si(K)?qi(Dn(m)):{}:A={}}return(U?Dr:Pn)(m,function(ee,le,he){return _(A,ee,le,he)}),A}function Kh(m,_){return m==null?!0:xi(m,_)}function Xh(m,_,A){return m==null?m:Qo(m,_,rl(A))}function Yh(m,_,A,F){return F=typeof F=="function"?F:r,m==null?m:Qo(m,_,rl(A),F)}function Nl(m){return m==null?[]:Ca(m,Zr(m))}function Jh(m){return m==null?[]:Ca(m,In(m))}function Qh(m,_,A){return A===r&&(A=_,_=r),A!==r&&(A=os(A),A=A===A?A:0),_!==r&&(_=os(_),_=_===_?_:0),hs(os(m),_,A)}function ep(m,_,A){return _=Ci(_),A===r?(A=_,_=0):A=Ci(A),m=os(m),Bc(m,_,A)}function tp(m,_,A){if(A&&typeof A!="boolean"&&Lt(m,_,A)&&(_=A=r),A===r&&(typeof _=="boolean"?(A=_,_=r):typeof m=="boolean"&&(A=m,m=r)),m===r&&_===r?(m=0,_=1):(m=Ci(m),_===r?(_=m,m=0):_=Ci(_)),m>_){var F=m;m=_,_=F}if(A||m%1||_%1){var U=Ia();return Fr(m+U*(_-m+Bl("1e-"+((U+"").length-1))),_)}return Ua(m,_)}var rp=gs(function(m,_,A){return _=_.toLowerCase(),m+(A?Ff(_):_)});function Ff(m){return xf(Ht(m).toLowerCase())}function $f(m){return m=Ht(m),m&&m.replace(ga,bc).replace(lc,"")}function np(m,_,A){m=Ht(m),_=lr(_);var F=m.length;A=A===r?F:hs(vt(A),0,F);var U=A;return A-=_.length,A>=0&&m.slice(A,U)==_}function sp(m){return m=Ht(m),m&&be.test(m)?m.replace(Te,wc):m}function ap(m){return m=Ht(m),m&&ht.test(m)?m.replace(xt,"\\$&"):m}var lp=gs(function(m,_,A){return m+(A?"-":"")+_.toLowerCase()}),up=gs(function(m,_,A){return m+(A?" ":"")+_.toLowerCase()}),cp=Cu("toLowerCase");function dp(m,_,A){m=Ht(m),_=vt(_);var F=_?oi(m):0;if(!_||F>=_)return m;var U=(_-F)/2;return Za(As(U),A)+m+Za(ui(U),A)}function fp(m,_,A){m=Ht(m),_=vt(_);var F=_?oi(m):0;return _&&F<_?m+Za(_-F,A):m}function hp(m,_,A){m=Ht(m),_=vt(_);var F=_?oi(m):0;return _&&F<_?Za(_-F,A)+m:m}function pp(m,_,A){return A||_==null?_=0:_&&(_=+_),jc(Ht(m).replace(Nt,""),_||0)}function mp(m,_,A){return(A?Lt(m,_,A):_===r)?_=1:_=vt(_),Qi(Ht(m),_)}function gp(){var m=arguments,_=Ht(m[0]);return m.length<3?_:_.replace(m[1],m[2])}var yp=gs(function(m,_,A){return m+(A?"_":"")+_.toLowerCase()});function xp(m,_,A){return A&&typeof A!="number"&&Lt(m,_,A)&&(_=A=r),A=A===r?z:A>>>0,A?(m=Ht(m),m&&(typeof _=="string"||_!=null&&!mf(_))&&(_=lr(_),!_&&Fi(m))?ms(hn(m),0,A):m.split(_,A)):[]}var vp=gs(function(m,_,A){return m+(A?" ":"")+xf(_)});function _p(m,_,A){return m=Ht(m),A=A==null?0:hs(vt(A),0,m.length),_=lr(_),m.slice(A,A+_.length)==_}function bp(m,_,A){var F=W.templateSettings;A&&Lt(m,_,A)&&(_=r),m=Ht(m),_=Rd({},_,F,ku);var U=Rd({},_.imports,F.imports,ku),K=Zr(U),ee=Ca(U,K),le,he,Pe=0,ke=_.interpolate||ei,Oe="__p += '",Ue=Ra((_.escape||ei).source+"|"+ke.source+"|"+(ke===Ge?pr:ei).source+"|"+(_.evaluate||ei).source+"|$","g"),Je="//# sourceURL="+(jt.call(_,"sourceURL")?(_.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++jd+"]")+`
`;m.replace(Ue,function(lt,Rt,Tt,qn,bn,Wn){return Tt||(Tt=qn),Oe+=m.slice(Pe,Wn).replace(oo,Ec),Rt&&(le=!0,Oe+=`' +
__e(`+Rt+`) +
'`),bn&&(he=!0,Oe+=`';
`+bn+`;
__p += '`),Tt&&(Oe+=`' +
((__t = (`+Tt+`)) == null ? '' : __t) +
'`),Pe=Wn+lt.length,lt}),Oe+=`';
`;var ot=jt.call(_,"variable")&&_.variable;if(!ot)Oe=`with (obj) {
`+Oe+`
}
`;else if(Kr.test(ot))throw new dt(l);Oe=(he?Oe.replace(Ir,""):Oe).replace(kr,"$1").replace(me,"$1;"),Oe="function("+(ot||"obj")+`) {
`+(ot?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(le?", __e = _.escape":"")+(he?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Oe+`return __p
}`;var wt=Bf(function(){return At(K,Je+"return "+Oe).apply(r,ee)});if(wt.source=Oe,pf(wt))throw wt;return wt}function wp(m){return Ht(m).toLowerCase()}function Ep(m){return Ht(m).toUpperCase()}function Sp(m,_,A){if(m=Ht(m),m&&(A||_===r))return xc(m);if(!m||!(_=lr(_)))return m;var F=hn(m),U=hn(_),K=vc(F,U),ee=Jl(F,U)+1;return ms(F,K,ee).join("")}function Cp(m,_,A){if(m=Ht(m),m&&(A||_===r))return m.slice(0,Co(m)+1);if(!m||!(_=lr(_)))return m;var F=hn(m),U=Jl(F,hn(_))+1;return ms(F,0,U).join("")}function Rp(m,_,A){if(m=Ht(m),m&&(A||_===r))return m.replace(Nt,"");if(!m||!(_=lr(_)))return m;var F=hn(m),U=vc(F,hn(_));return ms(F,U).join("")}function Pp(m,_){var A=te,F=ie;if(hr(_)){var U="separator"in _?_.separator:U;A="length"in _?vt(_.length):A,F="omission"in _?lr(_.omission):F}m=Ht(m);var K=m.length;if(Fi(m)){var ee=hn(m);K=ee.length}if(A>=K)return m;var le=A-oi(F);if(le<1)return F;var he=ee?ms(ee,0,le).join(""):m.slice(0,le);if(U===r)return he+F;if(ee&&(le+=he.length-le),mf(U)){if(m.slice(le).search(U)){var Pe,ke=he;for(U.global||(U=Ra(U.source,Ht(Or.exec(U))+"g")),U.lastIndex=0;Pe=U.exec(ke);)var Oe=Pe.index;he=he.slice(0,Oe===r?le:Oe)}}else if(m.indexOf(lr(U),le)!=le){var Ue=he.lastIndexOf(U);Ue>-1&&(he=he.slice(0,Ue))}return he+F}function kp(m){return m=Ht(m),m&&Ae.test(m)?m.replace(je,Sc):m}var Tp=gs(function(m,_,A){return m+(A?" ":"")+_.toUpperCase()}),xf=Cu("toUpperCase");function Lf(m,_,A){return m=Ht(m),_=A?r:_,_===r?Ld(m)?Ud(m):Dd(m):m.match(_)||[]}var Bf=mt(function(m,_){try{return Jr(m,r,_)}catch(A){return pf(A)?A:new dt(A)}}),Ap=is(function(m,_){return Dr(_,function(A){A=Un(A),ts(m,A,Me(m[A],m))}),m});function jp(m){var _=m==null?0:m.length,A=rt();return m=_?Yt(m,function(F){if(typeof F[1]!="function")throw new En(o);return[A(F[0]),F[1]]}):[],mt(function(F){for(var U=-1;++U<_;){var K=m[U];if(Jr(K[0],this,F))return Jr(K[1],this,F)}})}function Ip(m){return $c(un(m,g))}function vf(m){return function(){return m}}function Mp(m,_){return m==null||m!==m?_:m}var Np=vi(),Op=vi(!0);function Mn(m){return m}function _f(m){return Ba(typeof m=="function"?m:un(m,g))}function Dp(m){return Yi(un(m,g))}function Fp(m,_){return Vn(m,un(_,g))}var $p=mt(function(m,_){return function(A){return Ls(A,m,_)}}),Lp=mt(function(m,_){return function(A){return Ls(m,A,_)}});function bf(m,_,A){var F=Zr(_),U=en(_,F);A==null&&!(hr(_)&&(U.length||!F.length))&&(A=_,_=m,m=this,U=en(_,Zr(_)));var K=!(hr(A)&&"chain"in A)||!!A.chain,ee=Si(m);return Dr(U,function(le){var he=_[le];m[le]=he,ee&&(m.prototype[le]=function(){var Pe=this.__chain__;if(K||Pe){var ke=m(this.__wrapped__),Oe=ke.__actions__=tn(this.__actions__);return Oe.push({func:he,args:arguments,thisArg:m}),ke.__chain__=Pe,ke}return he.apply(m,ks([this.value()],arguments))})}),m}function Bp(){return sr._===this&&(sr._=Pc),this}function wf(){}function Vp(m){return m=vt(m),mt(function(_){return Gs(_,m)})}var Gp=ol(Yt),Up=ol(zl),zp=ol(Wl);function Vf(m){return Mu(m)?Kl(Un(m)):mu(m)}function Hp(m){return function(_){return m==null?r:gn(m,_)}}var qp=Ru(),Wp=Ru(!0);function Ef(){return[]}function Sf(){return!1}function Zp(){return{}}function Kp(){return""}function Xp(){return!0}function Yp(m,_){if(m=vt(m),m<1||m>N)return[];var A=z,F=Fr(m,z);_=rt(_),m-=z;for(var U=Yl(F,_);++A<m;)_(A);return U}function Jp(m){return gt(m)?Yt(m,Un):Hn(m)?[m]:tn(ud(Ht(m)))}function Qp(m){var _=++Bi;return Ht(m)+_}var em=al(function(m,_){return m+_},0),tm=zr("ceil"),rm=al(function(m,_){return m/_},1),sm=zr("floor");function im(m){return m&&m.length?mi(m,Mn,Ln):r}function am(m,_){return m&&m.length?mi(m,rt(_,2),Ln):r}function om(m){return gc(m,Mn)}function lm(m,_){return gc(m,rt(_,2))}function um(m){return m&&m.length?mi(m,Mn,Bs):r}function cm(m,_){return m&&m.length?mi(m,rt(_,2),Bs):r}var dm=al(function(m,_){return m*_},1),fm=zr("round"),hm=al(function(m,_){return m-_},0);function pm(m){return m&&m.length?Xl(m,Mn):0}function mm(m,_){return m&&m.length?Xl(m,rt(_,2)):0}return W.after=J,W.ary=ae,W.assign=bh,W.assignIn=If,W.assignInWith=Rd,W.assignWith=wh,W.at=Eh,W.before=_e,W.bind=Me,W.bindAll=Ap,W.bindKey=De,W.castArray=Hf,W.chain=_n,W.chunk=Jd,W.compact=ml,W.concat=$u,W.cond=jp,W.conforms=Ip,W.constant=vf,W.countBy=uf,W.create=Sh,W.curry=Ie,W.curryRight=He,W.debounce=Ke,W.defaults=Ch,W.defaultsDeep=Rh,W.defer=Xe,W.delay=dr,W.difference=An,W.differenceBy=kt,W.differenceWith=Tr,W.drop=yr,W.dropRight=Nr,W.dropRightWhile=vn,W.dropWhile=ua,W.fill=Sr,W.filter=bd,W.flatMap=wd,W.flatMapDeep=Ju,W.flatMapDepth=cf,W.flatten=to,W.flattenDeep=Lu,W.flattenDepth=ro,W.flip=ge,W.flow=Np,W.flowRight=Op,W.fromPairs=cn,W.functions=Mh,W.functionsIn=Nh,W.groupBy=kl,W.initial=vs,W.intersection=yl,W.intersectionBy=Bu,W.intersectionWith=Ws,W.invert=Dh,W.invertBy=Fh,W.invokeMap=Tl,W.iteratee=_f,W.keyBy=Ed,W.keys=Zr,W.keysIn=In,W.map=Al,W.mapKeys=Lh,W.mapValues=Bh,W.matches=Dp,W.matchesProperty=Fp,W.memoize=ue,W.merge=Vh,W.mergeWith=Mf,W.method=$p,W.methodOf=Lp,W.mixin=bf,W.negate=ye,W.nthArg=Vp,W.omit=Gh,W.omitBy=Uh,W.once=$e,W.orderBy=jl,W.over=Gp,W.overArgs=Ye,W.overEvery=Up,W.overSome=zp,W.partial=nt,W.partialRight=st,W.partition=df,W.pick=zh,W.pickBy=Nf,W.property=Vf,W.propertyOf=Hp,W.pull=Vu,W.pullAll=so,W.pullAllBy=_l,W.pullAllWith=nn,W.pullAt=Zs,W.range=qp,W.rangeRight=Wp,W.rearg=ut,W.reject=Il,W.remove=zn,W.rest=Ar,W.reverse=Wr,W.sampleSize=f,W.set=qh,W.setWith=Wh,W.shuffle=b,W.slice=dd,W.sortBy=D,W.sortedUniq=_i,W.sortedUniqBy=Hu,W.split=xp,W.spread=It,W.tail=bi,W.take=hd,W.takeRight=pd,W.takeRightWhile=qu,W.takeWhile=bl,W.tap=Zu,W.throttle=Js,W.thru=wl,W.toArray=Tf,W.toPairs=Of,W.toPairsIn=Df,W.toPath=Jp,W.toPlainObject=jf,W.transform=Zh,W.unary=hf,W.union=ef,W.unionBy=tf,W.unionWith=md,W.uniq=gd,W.uniqBy=wi,W.uniqWith=rf,W.unset=Kh,W.unzip=Xs,W.unzipWith=Wu,W.update=Xh,W.updateWith=Yh,W.values=Nl,W.valuesIn=Jh,W.without=ur,W.words=Lf,W.wrap=zf,W.xor=nf,W.xorBy=yd,W.xorWith=sf,W.zip=af,W.zipObject=xd,W.zipObjectDeep=vd,W.zipWith=of,W.entries=Of,W.entriesIn=Df,W.extend=If,W.extendWith=Rd,bf(W,W),W.add=em,W.attempt=Bf,W.camelCase=rp,W.capitalize=Ff,W.ceil=tm,W.clamp=Qh,W.clone=qf,W.cloneDeep=Zf,W.cloneDeepWith=Kf,W.cloneWith=Wf,W.conformsTo=Xf,W.deburr=$f,W.defaultTo=Mp,W.divide=rm,W.endsWith=np,W.eq=_s,W.escape=sp,W.escapeRegExp=ap,W.every=_d,W.find=Cl,W.findIndex=ca,W.findKey=Ph,W.findLast=Rl,W.findLastIndex=qs,W.findLastKey=kh,W.floor=sm,W.forEach=Qu,W.forEachRight=Pl,W.forIn=Th,W.forInRight=Ah,W.forOwn=jh,W.forOwnRight=Ih,W.get=gf,W.gt=Yf,W.gte=Jf,W.has=Oh,W.hasIn=yf,W.head=gl,W.identity=Mn,W.includes=ec,W.indexOf=da,W.inRange=ep,W.invoke=$h,W.isArguments=ao,W.isArray=gt,W.isArrayBuffer=Qf,W.isArrayLike=jn,W.isArrayLikeObject=Rr,W.isBoolean=eh,W.isBuffer=fa,W.isDate=th,W.isElement=rh,W.isEmpty=nh,W.isEqual=sh,W.isEqualWith=ih,W.isError=pf,W.isFinite=ah,W.isFunction=Si,W.isInteger=Cf,W.isLength=Sd,W.isMap=Rf,W.isMatch=oh,W.isMatchWith=lh,W.isNaN=uh,W.isNative=ch,W.isNil=fh,W.isNull=dh,W.isNumber=Pf,W.isObject=hr,W.isObjectLike=xr,W.isPlainObject=tc,W.isRegExp=mf,W.isSafeInteger=hh,W.isSet=kf,W.isString=Cd,W.isSymbol=Hn,W.isTypedArray=Ml,W.isUndefined=ph,W.isWeakMap=mh,W.isWeakSet=gh,W.join=xl,W.kebabCase=lp,W.last=Cr,W.lastIndexOf=vl,W.lowerCase=up,W.lowerFirst=cp,W.lt=yh,W.lte=xh,W.max=im,W.maxBy=am,W.mean=om,W.meanBy=lm,W.min=um,W.minBy=cm,W.stubArray=Ef,W.stubFalse=Sf,W.stubObject=Zp,W.stubString=Kp,W.stubTrue=Xp,W.multiply=dm,W.nth=no,W.noConflict=Bp,W.noop=wf,W.now=H,W.pad=dp,W.padEnd=fp,W.padStart=hp,W.parseInt=pp,W.random=tp,W.reduce=io,W.reduceRight=ff,W.repeat=mp,W.replace=gp,W.result=Hh,W.round=fm,W.runInContext=de,W.sample=u,W.size=T,W.snakeCase=yp,W.some=M,W.sortedIndex=Gu,W.sortedIndexBy=Uu,W.sortedIndexOf=Qd,W.sortedLastIndex=Ks,W.sortedLastIndexBy=fd,W.sortedLastIndexOf=zu,W.startCase=vp,W.startsWith=_p,W.subtract=hm,W.sum=pm,W.sumBy=mm,W.template=bp,W.times=Yp,W.toFinite=Ci,W.toInteger=vt,W.toLength=Af,W.toLower=wp,W.toNumber=os,W.toSafeInteger=_h,W.toString=Ht,W.toUpper=Ep,W.trim=Sp,W.trimEnd=Cp,W.trimStart=Rp,W.truncate=Pp,W.unescape=kp,W.uniqueId=Qp,W.upperCase=Tp,W.upperFirst=xf,W.each=Qu,W.eachRight=Pl,W.first=gl,bf(W,function(){var m={};return Pn(W,function(_,A){jt.call(W.prototype,A)||(m[A]=_)}),m}(),{chain:!1}),W.VERSION=n,Dr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(m){W[m].placeholder=W}),Dr(["drop","take"],function(m,_){pt.prototype[m]=function(A){A=A===r?1:gr(vt(A),0);var F=this.__filtered__&&!_?new pt(this):this.clone();return F.__filtered__?F.__takeCount__=Fr(A,F.__takeCount__):F.__views__.push({size:Fr(A,z),type:m+(F.__dir__<0?"Right":"")}),F},pt.prototype[m+"Right"]=function(A){return this.reverse()[m](A).reverse()}}),Dr(["filter","map","takeWhile"],function(m,_){var A=_+1,F=A==se||A==G;pt.prototype[m]=function(U){var K=this.clone();return K.__iteratees__.push({iteratee:rt(U,3),type:A}),K.__filtered__=K.__filtered__||F,K}}),Dr(["head","last"],function(m,_){var A="take"+(_?"Right":"");pt.prototype[m]=function(){return this[A](1).value()[0]}}),Dr(["initial","tail"],function(m,_){var A="drop"+(_?"":"Right");pt.prototype[m]=function(){return this.__filtered__?new pt(this):this[A](1)}}),pt.prototype.compact=function(){return this.filter(Mn)},pt.prototype.find=function(m){return this.filter(m).head()},pt.prototype.findLast=function(m){return this.reverse().find(m)},pt.prototype.invokeMap=mt(function(m,_){return typeof m=="function"?new pt(this):this.map(function(A){return Ls(A,m,_)})}),pt.prototype.reject=function(m){return this.filter(ye(rt(m)))},pt.prototype.slice=function(m,_){m=vt(m);var A=this;return A.__filtered__&&(m>0||_<0)?new pt(A):(m<0?A=A.takeRight(-m):m&&(A=A.drop(m)),_!==r&&(_=vt(_),A=_<0?A.dropRight(-_):A.take(_-m)),A)},pt.prototype.takeRightWhile=function(m){return this.reverse().takeWhile(m).reverse()},pt.prototype.toArray=function(){return this.take(z)},Pn(pt.prototype,function(m,_){var A=/^(?:filter|find|map|reject)|While$/.test(_),F=/^(?:head|last)$/.test(_),U=W[F?"take"+(_=="last"?"Right":""):_],K=F||/^find/.test(_);U&&(W.prototype[_]=function(){var ee=this.__wrapped__,le=F?[1]:arguments,he=ee instanceof pt,Pe=le[0],ke=he||gt(ee),Oe=function(Rt){var Tt=U.apply(W,ks([Rt],le));return F&&Ue?Tt[0]:Tt};ke&&A&&typeof Pe=="function"&&Pe.length!=1&&(he=ke=!1);var Ue=this.__chain__,Je=!!this.__actions__.length,ot=K&&!Ue,wt=he&&!Je;if(!K&&ke){ee=wt?ee:new pt(this);var lt=m.apply(ee,le);return lt.__actions__.push({func:wl,args:[Oe],thisArg:r}),new $r(lt,Ue)}return ot&&wt?m.apply(this,le):(lt=this.thru(Oe),ot?F?lt.value()[0]:lt.value():lt)})}),Dr(["pop","push","shift","sort","splice","unshift"],function(m){var _=us[m],A=/^(?:push|sort|unshift)$/.test(m)?"tap":"thru",F=/^(?:pop|shift)$/.test(m);W.prototype[m]=function(){var U=arguments;if(F&&!this.__chain__){var K=this.value();return _.apply(gt(K)?K:[],U)}return this[A](function(ee){return _.apply(gt(ee)?ee:[],U)})}}),Pn(pt.prototype,function(m,_){var A=W[_];if(A){var F=A.name+"";jt.call(zi,F)||(zi[F]=[]),zi[F].push({name:_,func:A})}}),zi[sa(r,C).name]=[{name:"wrapper",func:r}],pt.prototype.clone=Do,pt.prototype.reverse=iu,pt.prototype.value=Wi,W.prototype.at=Ys,W.prototype.chain=El,W.prototype.commit=Ei,W.prototype.next=Sl,W.prototype.plant=Xu,W.prototype.reverse=lf,W.prototype.toJSON=W.prototype.valueOf=W.prototype.value=Yu,W.prototype.first=W.prototype.head,ds&&(W.prototype[ds]=Ku),W},$i=zd();Kn?((Kn.exports=$i)._=$i,Sa._=$i):sr._=$i}).call(lodash)}(lodash$1,lodash$1.exports)),lodash$1.exports}var propTypes={exports:{}},ReactPropTypesSecret_1,hasRequiredReactPropTypesSecret;function requireReactPropTypesSecret(){if(hasRequiredReactPropTypesSecret)return ReactPropTypesSecret_1;hasRequiredReactPropTypesSecret=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ReactPropTypesSecret_1=t,ReactPropTypesSecret_1}var factoryWithThrowingShims,hasRequiredFactoryWithThrowingShims;function requireFactoryWithThrowingShims(){if(hasRequiredFactoryWithThrowingShims)return factoryWithThrowingShims;hasRequiredFactoryWithThrowingShims=1;var t=requireReactPropTypesSecret();function e(){}function r(){}return r.resetWarningCache=e,factoryWithThrowingShims=function(){function n(o,l,c,d,p,g){if(g!==t){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}n.isRequired=n;function s(){return n}var a={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:s,element:n,elementType:n,instanceOf:s,node:n,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:r,resetWarningCache:e};return a.PropTypes=a,a},factoryWithThrowingShims}var hasRequiredPropTypes;function requirePropTypes(){return hasRequiredPropTypes||(hasRequiredPropTypes=1,propTypes.exports=requireFactoryWithThrowingShims()()),propTypes.exports}var lib=lib$1.exports,hasRequiredLib;function requireLib(){return hasRequiredLib||(hasRequiredLib=1,function(t,e){(function(n,s){t.exports=s(requireReact(),requireLodash(),requirePropTypes())})(lib,function(r,n,s){return function(){var a={"./src/Xarrow/utils/buzzier.js":function(d,p,g){g.r(p),g.d(p,{bzFunction:function(){return y},buzzierMinSols:function(){return x}});var y=function(S,k,C,P){return function(R){return Math.pow(1-R,3)*S+3*Math.pow(1-R,2)*R*k+3*(1-R)*Math.pow(R,2)*C+Math.pow(R,3)*P}},x=function(S,k,C,P){var R=y(S,k,C,P),j=-6*S+12*k-6*C,I=Math.pow(-6*S+12*k-6*C,2)-4*(3*k-3*S)*(-3*S+9*k-9*C+3*P),O=2*(-3*S+9*k-9*C+3*P),L=R((j+Math.sqrt(I))/O),B=R((j-Math.sqrt(I))/O);return[L,B]}},"./src/Xarrow/Xarrow.tsx":function(d,p,g){var y=this&&this.__assign||function(){return y=Object.assign||function(B){for(var Z,te=1,ie=arguments.length;te<ie;te++){Z=arguments[te];for(var Q in Z)Object.prototype.hasOwnProperty.call(Z,Q)&&(B[Q]=Z[Q])}return B},y.apply(this,arguments)},x=this&&this.__createBinding||(Object.create?function(B,Z,te,ie){ie===void 0&&(ie=te),Object.defineProperty(B,ie,{enumerable:!0,get:function(){return Z[te]}})}:function(B,Z,te,ie){ie===void 0&&(ie=te),B[ie]=Z[te]}),E=this&&this.__setModuleDefault||(Object.create?function(B,Z){Object.defineProperty(B,"default",{enumerable:!0,value:Z})}:function(B,Z){B.default=Z}),S=this&&this.__importStar||function(B){if(B&&B.__esModule)return B;var Z={};if(B!=null)for(var te in B)te!=="default"&&Object.prototype.hasOwnProperty.call(B,te)&&x(Z,B,te);return E(Z,B),Z},k=this&&this.__spreadArray||function(B,Z){for(var te=0,ie=Z.length,Q=B.length;te<ie;te++,Q++)B[Q]=Z[te];return B},C=this&&this.__importDefault||function(B){return B&&B.__esModule?B:{default:B}};Object.defineProperty(p,"__esModule",{value:!0});var P=S(g("react")),R=C(g("./src/Xarrow/useXarrowProps.ts")),j=g("./src/Xwrapper.tsx"),I=C(g("./src/Xarrow/propTypes.ts")),O=g("./src/Xarrow/utils/GetPosition.tsx"),L=function(B){var Z,te=P.useRef({svgRef:P.useRef(null),lineRef:P.useRef(null),headRef:P.useRef(null),tailRef:P.useRef(null),lineDrawAnimRef:P.useRef(null),lineDashAnimRef:P.useRef(null),headOpacityAnimRef:P.useRef(null)}),ie=te.current,Q=ie.svgRef,fe=ie.lineRef,se=ie.headRef;ie.tailRef;var Y=ie.lineDrawAnimRef,G=ie.lineDashAnimRef,q=ie.headOpacityAnimRef;P.useContext(j.XarrowContext);var N=R.default(B,te.current),$=N[0],V=$.labels,z=$.lineColor,ne=$.headColor,pe=$.tailColor,xe=$.strokeWidth,Ce=$.showHead,ce=$.showTail,Re=$.dashness,oe=$.headShape,Se=$.tailShape,Ne=$.showXarrow,Fe=$.animateDrawing,et=$.zIndex,Le=$.passProps,Ee=$.arrowBodyProps,Pt=$.arrowHeadProps,Dt=$.arrowTailProps,Et=$.SVGcanvasProps,St=$.divContainerProps,Ct=$.divContainerStyle,ct=$.SVGcanvasStyle,Qe=$._debug,_t=$.shouldUpdatePosition;Fe=B.animateDrawing;var ft=P.useState(!Fe),Bt=ft[0],Wt=ft[1],Zt=P.useState({}),Ft=Zt[1],Mt=function(){return Ft({})},bt=P.useState({cx0:0,cy0:0,cw:0,ch:0,x1:0,y1:0,x2:0,y2:0,dx:0,dy:0,absDx:0,absDy:0,cpx1:0,cpy1:0,cpx2:0,cpy2:0,headOrient:0,tailOrient:0,arrowHeadOffset:{x:0,y:0},arrowTailOffset:{x:0,y:0},headOffset:0,excRight:0,excLeft:0,excUp:0,excDown:0,startPoints:[],endPoints:[],mainDivPos:{x:0,y:0},xSign:1,ySign:1,lineLength:0,fHeadSize:1,fTailSize:1,arrowPath:"",labelStartPos:{x:0,y:0},labelMiddlePos:{x:0,y:0},labelEndPos:{x:0,y:0}}),Be=bt[0],tt=bt[1];P.useLayoutEffect(function(){if(_t.current){var Ae=O.getPosition(N,te);tt(Ae),_t.current=!1}});var yt=Be.x2-Be.arrowHeadOffset.x,jr=Be.y2-Be.arrowHeadOffset.y,ir=Be.x1-Be.arrowTailOffset.x,vr=Be.y1-Be.arrowTailOffset.y,Vt=Re.strokeLen+Re.nonStrokeLen,Ut=1;Re.animation<0&&(Re.animation*=-1,Ut=-1);var Ir,kr,me,je,Te=0;return Fe&&Bt==!1?(typeof Fe=="boolean"&&(Fe=1),kr=Fe+"s",Ir=Be.lineLength,je=Be.lineLength,me=1,Fe<0&&(Z=[Te,je],je=Z[0],Te=Z[1],kr=Fe*-1+"s")):(Ir=Re.strokeLen+" "+Re.nonStrokeLen,kr=1/Re.animation+"s",je=Vt*Ut,me="indefinite",Te=0),P.useLayoutEffect(function(){fe.current&&tt(function(Ae){var be,We;return y(y({},Ae),{lineLength:(We=(be=fe.current)===null||be===void 0?void 0:be.getTotalLength())!==null&&We!==void 0?We:0})})},[fe.current]),P.useEffect(function(){var Ae=function(){window.addEventListener("resize",Mt);var We=function(){var Ge,qe;Wt(!0),(Ge=q.current)===null||Ge===void 0||Ge.beginElement(),(qe=G.current)===null||qe===void 0||qe.beginElement()},Ve=function(){return se.current.style.opacity="0"};return Y.current&&se.current&&(Y.current.addEventListener("endEvent",We),Y.current.addEventListener("beginEvent",Ve)),function(){window.removeEventListener("resize",Mt),Y.current&&(Y.current.removeEventListener("endEvent",We),se.current&&Y.current.removeEventListener("beginEvent",Ve))}},be=Ae();return function(){Wt(!1),be()}},[Ne]),P.default.createElement("div",y({},St,{style:y({position:"absolute",zIndex:et},Ct)}),Ne?P.default.createElement(P.default.Fragment,null,P.default.createElement("svg",y({ref:Q,width:Be.cw,height:Be.ch,style:y({position:"absolute",left:Be.cx0,top:Be.cy0,pointerEvents:"none",border:Qe?"1px dashed yellow":null},ct),overflow:"auto"},Et),P.default.createElement("path",y({ref:fe,d:Be.arrowPath,stroke:z,strokeDasharray:Ir,strokeWidth:xe,fill:"transparent",pointerEvents:"visibleStroke"},Le,Ee),P.default.createElement(P.default.Fragment,null,Bt?P.default.createElement(P.default.Fragment,null,Re.animation?P.default.createElement("animate",{ref:G,attributeName:"stroke-dashoffset",values:Vt*Ut+";0",dur:1/Re.animation+"s",repeatCount:"indefinite"}):null):P.default.createElement(P.default.Fragment,null,Fe?P.default.createElement("animate",{ref:Y,id:"svgEndAnimate",attributeName:"stroke-dashoffset",values:je+";"+Te,dur:kr,repeatCount:me}):null))),ce?P.default.createElement("g",y({fill:pe,pointerEvents:"auto",transform:"translate("+ir+","+vr+") rotate("+Be.tailOrient+") scale("+Be.fTailSize+")"},Le,Dt),Se.svgElem):null,Ce?P.default.createElement("g",y({ref:se,fill:ne,pointerEvents:"auto",transform:"translate("+yt+","+jr+") rotate("+Be.headOrient+") scale("+Be.fHeadSize+")",opacity:Fe&&!Bt?0:1},Le,Pt),P.default.createElement("animate",{ref:q,dur:"0.4",attributeName:"opacity",from:"0",to:"1",begin:"indefinite",repeatCount:"0",fill:"freeze"}),oe.svgElem):null,Qe?P.default.createElement(P.default.Fragment,null,P.default.createElement("circle",{r:"5",cx:Be.cpx1,cy:Be.cpy1,fill:"green"}),P.default.createElement("circle",{r:"5",cx:Be.cpx2,cy:Be.cpy2,fill:"blue"}),P.default.createElement("rect",{x:Be.excLeft,y:Be.excUp,width:Be.absDx,height:Be.absDy,fill:"none",stroke:"pink",strokeWidth:"2px"})):null),V.start?P.default.createElement("div",{style:{transform:Be.dx<0?"translate(-100% , -50%)":"translate(-0% , -50%)",width:"max-content",position:"absolute",left:Be.cx0+Be.labelStartPos.x,top:Be.cy0+Be.labelStartPos.y-xe-5}},V.start):null,V.middle?P.default.createElement("div",{style:{display:"table",width:"max-content",transform:"translate(-50% , -50%)",position:"absolute",left:Be.cx0+Be.labelMiddlePos.x,top:Be.cy0+Be.labelMiddlePos.y}},V.middle):null,V.end?P.default.createElement("div",{style:{transform:Be.dx>0?"translate(-100% , -50%)":"translate(-0% , -50%)",width:"max-content",position:"absolute",left:Be.cx0+Be.labelEndPos.x,top:Be.cy0+Be.labelEndPos.y+xe+5}},V.end):null,Qe?P.default.createElement(P.default.Fragment,null,k(k([],Be.startPoints),Be.endPoints).map(function(Ae,be){return P.default.createElement("div",{key:be,style:{background:"gray",opacity:.5,borderRadius:"50%",transform:"translate(-50%, -50%)",height:5,width:5,position:"absolute",left:Ae.x-Be.mainDivPos.x,top:Ae.y-Be.mainDivPos.y}})})):null):null)};L.propTypes=I.default,p.default=L},"./src/Xarrow/anchors.ts":function(d,p,g){d=g.nmd(d),Object.defineProperty(p,"__esModule",{value:!0}),p.calcAnchors=void 0;var y=function(E,S){return{middle:{x:E*.5,y:S*.5},left:{x:0,y:S*.5},right:{x:E,y:S*.5},top:{x:E*.5,y:0},bottom:{x:E*.5,y:S}}},x=function(E,S){return E.map(function(k){var C=y(S.right-S.x,S.bottom-S.y),P=C[k.position],R=P.x,j=P.y;return{x:S.x+R+k.offset.x,y:S.y+j+k.offset.y,anchor:k}})};p.calcAnchors=x,g.c[g.s]},"./src/Xarrow/propTypes.ts":function(d,p,g){var y=this&&this.__importDefault||function(te){return te&&te.__esModule?te:{default:te}};Object.defineProperty(p,"__esModule",{value:!0});var x=y(g("prop-types")),E=g("./src/constants.tsx"),S=x.default.oneOf(E.cAnchorEdge),k=x.default.exact({position:S.isRequired,offset:x.default.exact({x:x.default.number,y:x.default.number}).isRequired}),C=x.default.oneOfType([S,k]),P=x.default.oneOfType([C,x.default.arrayOf(C)]),R=x.default.oneOfType([x.default.string,x.default.exact({current:x.default.any})]),j=x.default.oneOfType([x.default.element,x.default.string]),I=x.default.exact({start:j,middle:j,end:j}),O=x.default.oneOf(Object.keys(E.arrowShapes)),L=x.default.any,B=x.default.oneOfType([O,x.default.exact({svgElem:L,offsetForward:x.default.number}).isRequired]),Z={start:R.isRequired,end:R.isRequired,startAnchor:P,endAnchor:P,labels:x.default.oneOfType([j,I]),color:x.default.string,lineColor:x.default.string,showHead:x.default.bool,headColor:x.default.string,headSize:x.default.number,tailSize:x.default.number,tailColor:x.default.string,strokeWidth:x.default.number,showTail:x.default.bool,path:x.default.oneOf(E.cPaths),showXarrow:x.default.bool,curveness:x.default.number,gridBreak:x.default.string,dashness:x.default.oneOfType([x.default.bool,x.default.object]),headShape:B,tailShape:B,animateDrawing:x.default.oneOfType([x.default.bool,x.default.number]),zIndex:x.default.number,passProps:x.default.object,arrowBodyProps:x.default.object,arrowHeadProps:x.default.object,arrowTailProps:x.default.object,SVGcanvasProps:x.default.object,divContainerProps:x.default.object,_extendSVGcanvas:x.default.number,_debug:x.default.bool,_cpx1Offset:x.default.number,_cpy1Offset:x.default.number,_cpx2Offset:x.default.number,_cpy2Offset:x.default.number};p.default=Z},"./src/Xarrow/useXarrowProps.ts":function(d,p,g){var y=this&&this.__assign||function(){return y=Object.assign||function(oe){for(var Se,Ne=1,Fe=arguments.length;Ne<Fe;Ne++){Se=arguments[Ne];for(var et in Se)Object.prototype.hasOwnProperty.call(Se,et)&&(oe[et]=Se[et])}return oe},y.apply(this,arguments)},x=this&&this.__createBinding||(Object.create?function(oe,Se,Ne,Fe){Fe===void 0&&(Fe=Ne),Object.defineProperty(oe,Fe,{enumerable:!0,get:function(){return Se[Ne]}})}:function(oe,Se,Ne,Fe){Fe===void 0&&(Fe=Ne),oe[Fe]=Se[Ne]}),E=this&&this.__setModuleDefault||(Object.create?function(oe,Se){Object.defineProperty(oe,"default",{enumerable:!0,value:Se})}:function(oe,Se){oe.default=Se}),S=this&&this.__importStar||function(oe){if(oe&&oe.__esModule)return oe;var Se={};if(oe!=null)for(var Ne in oe)Ne!=="default"&&Object.prototype.hasOwnProperty.call(oe,Ne)&&x(Se,oe,Ne);return E(Se,oe),Se},k=this&&this.__importDefault||function(oe){return oe&&oe.__esModule?oe:{default:oe}};Object.defineProperty(p,"__esModule",{value:!0});var C=S(g("react")),P=g("./src/Xarrow/utils/index.ts"),R=k(g("lodash")),j=g("./src/constants.tsx"),I=function(oe){var Se={start:null,middle:null,end:null};if(oe)if(typeof oe=="string"||C.default.isValidElement(oe))Se.middle=oe;else for(var Ne in oe)Se[Ne]=oe[Ne];return Se},O=function(oe){var Se=Array.isArray(oe)?oe:[oe],Ne=Se.map(function(Le){return typeof Le=="string"?{position:Le}:Le});Ne=Ne.filter(function(Le){return j.cAnchorEdge.includes(Le.position)}),Ne.length==0&&(Ne=[{position:"auto"}]);var Fe=Ne.filter(function(Le){return Le.position==="auto"});Fe.length>0&&(Ne=Ne.filter(function(Le){return Le.position!=="auto"}),Ne.push.apply(Ne,Fe.flatMap(function(Le){return["left","right","top","bottom"].map(function(Ee){return y(y({},Le),{position:Ee})})})));var et=Ne.map(function(Le){if(typeof Le=="object"){var Ee=Le;return Ee.position||(Ee.position="auto"),Ee.offset||(Ee.offset={x:0,y:0}),Ee.offset.y||(Ee.offset.y=0),Ee.offset.x||(Ee.offset.x=0),Ee=Ee,Ee}else return Le});return et},L=function(oe,Se){var Ne=0,Fe=0,et,Le=1;return typeof oe=="object"?(Ne=oe.strokeLen||Se.strokeWidth*2,Fe=oe.strokeLen?oe.nonStrokeLen:Se.strokeWidth,et=oe.animation?oe.animation:null):typeof oe=="boolean"&&oe&&(Ne=Se.strokeWidth*2,Fe=Se.strokeWidth,et=null),{strokeLen:Ne,nonStrokeLen:Fe,animation:et,animDirection:Le}},B=function(oe){return typeof oe=="string"&&(oe in j.arrowShapes?oe=j.arrowShapes[oe]:(console.warn("'"+oe+"' is not supported arrow shape. the supported arrow shapes is one of "+j.cArrowShapes+`.
           reverting to default shape.`),oe=j.arrowShapes.arrow1)),oe=oe,(oe==null?void 0:oe.offsetForward)===void 0&&(oe.offsetForward=.25),(oe==null?void 0:oe.svgElem)===void 0&&(oe.svgElem="path"),oe},Z=function(oe){var Se=P.xStr2absRelative(oe);return Se||(Se={relative:.5,abs:0}),Se},te=function(oe,Se){return Se&&(Se.current=!0),oe},ie=function(oe){return oe},Q=function(oe,Se,Ne){return te(oe,Ne)},fe=function(oe,Se,Ne){return te(Number(oe),Ne)},se=function(oe){return Number(oe)},Y={start:function(oe){return P.getElementByPropGiven(oe)},end:function(oe){return P.getElementByPropGiven(oe)},startAnchor:function(oe,Se,Ne){return te(O(oe),Ne)},endAnchor:function(oe,Se,Ne){return te(O(oe),Ne)},labels:function(oe){return I(oe)},color:ie,lineColor:function(oe,Se){return oe||Se.color},headColor:function(oe,Se){return oe||Se.color},tailColor:function(oe,Se){return oe||Se.color},strokeWidth:fe,showHead:Q,headSize:fe,showTail:Q,tailSize:fe,path:Q,curveness:fe,gridBreak:function(oe,Se,Ne){return te(Z(oe),Ne)},dashness:function(oe,Se){return L(oe,Se)},headShape:function(oe){return B(oe)},tailShape:function(oe){return B(oe)},showXarrow:ie,animateDrawing:ie,zIndex:se,passProps:ie,arrowBodyProps:Q,arrowHeadProps:Q,arrowTailProps:Q,SVGcanvasProps:Q,divContainerProps:Q,divContainerStyle:Q,SVGcanvasStyle:Q,_extendSVGcanvas:Q,_debug:Q,_cpx1Offset:Q,_cpy1Offset:Q,_cpx2Offset:Q,_cpy2Offset:Q},G={};for(var q in Y)G[q]=[q];for(var N=0,$=["lineColor","headColor","tailColor"];N<$.length;N++){var q=$[N];G[q].push("color")}var V=function(oe,Se){for(var Ne,Fe=0,et=Object.entries(oe);Fe<et.length;Fe++){var Le=et[Fe],Ee=Le[0],Pt=Le[1];Se[Ee]=(Ne=Y==null?void 0:Y[Ee])===null||Ne===void 0?void 0:Ne.call(Y,Pt,Se)}return Se},z={start:null,end:null,startAnchor:"auto",endAnchor:"auto",labels:null,color:"CornflowerBlue",lineColor:null,headColor:null,tailColor:null,strokeWidth:4,showHead:!0,headSize:6,showTail:!1,tailSize:6,path:"smooth",curveness:.8,gridBreak:"50%",dashness:!1,headShape:"arrow1",tailShape:"arrow1",showXarrow:!0,animateDrawing:!1,zIndex:0,passProps:{},arrowBodyProps:{},arrowHeadProps:{},arrowTailProps:{},SVGcanvasProps:{},divContainerProps:{},divContainerStyle:{},SVGcanvasStyle:{},_extendSVGcanvas:0,_debug:!1,_cpx1Offset:0,_cpy1Offset:0,_cpx2Offset:0,_cpy2Offset:0},ne={};ne=V(z,ne);var pe={startPos:{x:0,y:0,right:0,bottom:0},endPos:{x:0,y:0,right:0,bottom:0}};function xe(oe,Se){return R.default.isEqual(oe,Se)}function Ce(oe){var Se=C.useRef();return xe(oe,Se.current)||(Se.current=oe),Se.current}function ce(oe,Se){C.useLayoutEffect(oe,Se.map(Ce))}var Re=function(oe,Se){var Ne=C.useState(ne),Fe=Ne[0],et=Ne[1],Le=C.useRef(!1);Fe.shouldUpdatePosition=Le;var Ee=y(y({},z),oe),Pt=function(_t){C.useLayoutEffect(function(){var ft;Fe[_t]=(ft=Y==null?void 0:Y[_t])===null||ft===void 0?void 0:ft.call(Y,Ee[_t],Fe,Le),et(y({},Fe))},G[_t].map(function(ft){return oe[ft]}))};for(var Dt in z)Pt(Dt);var Et=C.useState(pe),St=Et[0],Ct=Et[1],ct=P.getElemPos(Fe.start);ce(function(){St.startPos=ct,Le.current=!0,Ct(y({},St))},[ct]);var Qe=P.getElemPos(Fe.end);return ce(function(){St.endPos=Qe,Le.current=!0,Ct(y({},St))},[Qe]),C.useLayoutEffect(function(){Le.current=!0,Ct(y({},St))},[Fe.headShape.svgElem,Fe.tailShape.svgElem]),[Fe,St]};p.default=Re},"./src/Xarrow/utils/GetPosition.tsx":function(d,p,g){var y=this&&this.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(p,"__esModule",{value:!0}),p.getPosition=void 0;var x=g("./src/Xarrow/anchors.ts"),E=g("./src/Xarrow/utils/index.ts"),S=y(g("lodash")),k=g("./src/constants.tsx"),C=g("./src/Xarrow/utils/buzzier.js"),P=function(R,j){var I,O,L,B,Z=R[0],te=R[1],ie=Z.startAnchor,Q=Z.endAnchor,fe=Z.strokeWidth,se=Z.showHead,Y=Z.headSize,G=Z.showTail,q=Z.tailSize,N=Z.path,$=Z.curveness,V=Z.gridBreak,z=Z.headShape,ne=Z.tailShape,pe=Z._extendSVGcanvas,xe=Z._cpx1Offset,Ce=Z._cpy1Offset,ce=Z._cpx2Offset,Re=Z._cpy2Offset,oe=te.startPos,Se=te.endPos,Ne=j.current,Fe=Ne.svgRef,et=Ne.lineRef,Le=0,Ee=0,Pt=x.calcAnchors(ie,oe),Dt=x.calcAnchors(Q,Se),Et=E.getShortestLine(Pt,Dt),St=Et.chosenStart,Ct=Et.chosenEnd,ct=St.anchor.position,Qe=Ct.anchor.position,_t=S.default.pick(St,["x","y"]),ft=S.default.pick(Ct,["x","y"]),Bt=E.getSvgPos(Fe),Wt=Math.min(_t.x,ft.x)-Bt.x,Zt=Math.min(_t.y,ft.y)-Bt.y,Ft=ft.x-_t.x,Mt=ft.y-_t.y,bt=Math.abs(ft.x-_t.x),Be=Math.abs(ft.y-_t.y),tt=Ft>0?1:-1,yt=Mt>0?1:-1,jr=[z.offsetForward,ne.offsetForward],ir=jr[0],vr=jr[1],Vt=Y*fe,Ut=q*fe,Ir=0,kr=0,me=0,je=0,Te=Vt*ir,Ae=Ut*vr,be=Number($);k.cPaths.includes(N)||(N="smooth"),N==="straight"&&(be=0,N="smooth");var We=Y>q?Y:q,Ve=fe+fe*We/2,Ge=Ve,qe=Ve,it=Ve,at=Ve;qe+=Number(pe),Ge+=Number(pe),it+=Number(pe),at+=Number(pe);var xt=0,ht=bt,Nt=0,qt=Be;if(Ft<0&&(I=[ht,xt],xt=I[0],ht=I[1]),Mt<0&&(O=[qt,Nt],Nt=O[0],qt=O[1]),be===0){var Qt=Math.atan(Be/bt);se&&(ht-=Vt*(1-ir)*tt*Math.cos(Qt),qt-=Vt*(1-ir)*yt*Math.sin(Qt),Qt*=yt,tt<0&&(Qt=(Math.PI-Qt*tt)*tt),Ir=Math.cos(Qt)*Te-Math.sin(Qt)*Vt/2,kr=Math.cos(Qt)*Vt/2+Math.sin(Qt)*Te,Le=Qt*180/Math.PI);var Kt=Math.atan(Be/bt);G&&(xt+=Ut*(1-vr)*tt*Math.cos(Kt),Nt+=Ut*(1-vr)*yt*Math.sin(Kt),Kt*=-yt,tt>0&&(Kt=(Math.PI-Kt*tt)*tt),me=Math.cos(Kt)*Ae-Math.sin(Kt)*Ut/2,je=Math.cos(Kt)*Ut/2+Math.sin(Kt)*Ae,Ee=Kt*180/Math.PI)}else Qe==="middle"&&(bt>Be?Qe=tt?"left":"right":Qe=yt?"top":"bottom"),se&&(["left","right"].includes(Qe)?(Ir+=Te*tt,ht-=Vt*(1-ir)*tt,kr+=Vt*tt/2,Qe==="left"?(Le=0,tt<0&&(Le+=180)):(Le=180,tt>0&&(Le+=180))):["top","bottom"].includes(Qe)&&(Ir+=Vt*-yt/2,kr+=Te*yt,qt-=Vt*yt-kr,Qe==="top"?(Le=270,yt>0&&(Le+=180)):(Le=90,yt<0&&(Le+=180))));G&&be!==0&&(["left","right"].includes(ct)?(me+=Ae*-tt,xt+=Ut*tt+me,je+=-(Ut*tt)/2,ct==="left"?(Ee=180,tt<0&&(Ee+=180)):(Ee=0,tt>0&&(Ee+=180))):["top","bottom"].includes(ct)&&(je+=Ae*-yt,Nt+=Ut*yt+je,me+=Ut*yt/2,ct==="top"?(Ee=90,yt>0&&(Ee+=180)):(Ee=270,yt<0&&(Ee+=180))));var Nn={x:Ir,y:kr},Qs={x:me,y:je},Kr=xt,Xr=Nt,pr=ht,Or=qt,Pi={};N==="smooth"?Pi={hh:function(){Kr+=bt*be*tt,pr-=bt*be*tt},vv:function(){Xr+=Be*be*yt,Or-=Be*be*yt},hv:function(){Kr+=bt*be*tt,Or-=Be*be*yt},vh:function(){Xr+=Be*be*yt,pr-=bt*be*tt}}:N==="grid"&&(Pi={hh:function(){Kr+=(bt*V.relative+V.abs)*tt,pr-=(bt*(1-V.relative)-V.abs)*tt,se&&(Kr-=Vt*(1-ir)/2*tt,pr+=Vt*(1-ir)/2*tt),G&&(Kr-=Ut*(1-vr)/2*tt,pr+=Ut*(1-vr)/2*tt)},vv:function(){Xr+=(Be*V.relative+V.abs)*yt,Or-=(Be*(1-V.relative)-V.abs)*yt,se&&(Xr-=Vt*(1-ir)/2*yt,Or+=Vt*(1-ir)/2*yt),G&&(Xr-=Ut*(1-vr)/2*yt,Or+=Ut*(1-vr)/2*yt)},hv:function(){Kr=ht},vh:function(){Xr=qt}});var dn="";["left","right"].includes(ct)?dn+="h":["bottom","top"].includes(ct)?dn+="v":ct==="middle"&&(dn+="m"),["left","right"].includes(Qe)?dn+="h":["bottom","top"].includes(Qe)?dn+="v":Qe==="middle"&&(dn+="m"),bt>Be?dn=dn.replace(/m/g,"h"):dn=dn.replace(/m/g,"v"),Pi[dn](),Kr+=xe,Xr+=Ce,pr+=ce,Or+=Re;var ha=C.buzzierMinSols(xt,Kr,pr,ht),pa=ha[0],ma=ha[1],ga=C.buzzierMinSols(Nt,Xr,Or,qt),ei=ga[0],oo=ga[1];pa<0&&(qe+=-pa),ma>bt&&(Ge+=ma-bt),ei<0&&(it+=-ei),oo>Be&&(at+=oo-Be),N==="grid"&&(qe+=Ve,Ge+=Ve,it+=Ve,at+=Ve),xt+=qe,ht+=qe,Nt+=it,qt+=it,Kr+=qe,pr+=qe,Xr+=it,Or+=it;var Xt=bt+qe+Ge,Ol=Be+it+at;Wt-=qe,Zt-=it;var ti=C.bzFunction(xt,Kr,pr,ht),ki=C.bzFunction(Nt,Xr,Or,qt),ri={x:ti(.01),y:ki(.01)},lo={x:ti(.5),y:ki(.5)},ya={x:ti(.99),y:ki(.99)},ws;return N==="grid"?ws="M "+xt+" "+Nt+" L  "+Kr+" "+Xr+" L "+pr+" "+Or+" "+ht+" "+qt:N==="smooth"&&(ws="M "+xt+" "+Nt+" C "+Kr+" "+Xr+", "+pr+" "+Or+", "+ht+" "+qt),{cx0:Wt,cy0:Zt,x1:xt,x2:ht,y1:Nt,y2:qt,cw:Xt,ch:Ol,cpx1:Kr,cpy1:Xr,cpx2:pr,cpy2:Or,dx:Ft,dy:Mt,absDx:bt,absDy:Be,headOrient:Le,tailOrient:Ee,labelStartPos:ri,labelMiddlePos:lo,labelEndPos:ya,excLeft:qe,excRight:Ge,excUp:it,excDown:at,headOffset:Te,arrowHeadOffset:Nn,arrowTailOffset:Qs,startPoints:Pt,endPoints:Dt,mainDivPos:Bt,xSign:tt,ySign:yt,lineLength:(B=(L=et.current)===null||L===void 0?void 0:L.getTotalLength())!==null&&B!==void 0?B:0,fHeadSize:Vt,fTailSize:Ut,arrowPath:ws}};p.getPosition=P},"./src/Xarrow/utils/index.ts":function(d,p){Object.defineProperty(p,"__esModule",{value:!0}),p.getSvgPos=p.getElemPos=p.getShortestLine=p.xStr2absRelative=p.factorDpathStr=p.getElementByPropGiven=void 0;var g=function(P){var R;return typeof P=="string"?R=document.getElementById(P):R=P==null?void 0:P.current,R};p.getElementByPropGiven=g;var y=function(P,R){var j=P.split(/(\d+(?:\.\d+)?)/);return j=j.map(function(I){return Number(I)?(Number(I)*R).toString():I}),j.join("")};p.factorDpathStr=y;var x=function(P){if(typeof P!="string")return{abs:0,relative:.5};var R=P.split("%"),j=0,I=0;if(R.length==1){var O=parseFloat(R[0]);if(!isNaN(O))return j=O,{abs:j,relative:0}}else if(R.length==2){var L=[parseFloat(R[0]),parseFloat(R[1])],B=L[0],Z=L[1];if(isNaN(B)||(I=B/100),isNaN(Z)||(j=Z),!isNaN(B)||!isNaN(Z))return{abs:j,relative:I}}};p.xStr2absRelative=x;var E=function(P,R){return Math.sqrt(Math.pow(P.x-R.x,2)+Math.pow(P.y-R.y,2))},S=function(P,R){var j=1/0,I=1/0,O;return P.forEach(function(L){R.forEach(function(B){I=E(L,B),I<j&&(j=I,O={chosenStart:L,chosenEnd:B})})}),O};p.getShortestLine=S;var k=function(P){if(!P)return{x:0,y:0,right:0,bottom:0};var R=P.getBoundingClientRect();return{x:R.left,y:R.top,right:R.right,bottom:R.bottom}};p.getElemPos=k;var C=function(P){if(!P.current)return{x:0,y:0};var R=P.current.getBoundingClientRect(),j=R.left,I=R.top,O=getComputedStyle(P.current),L=Number(O.left.slice(0,-2)),B=Number(O.top.slice(0,-2));return{x:j-L,y:I-B}};p.getSvgPos=C},"./src/Xwrapper.tsx":function(d,p,g){var y=this&&this.__createBinding||(Object.create?function(I,O,L,B){B===void 0&&(B=L),Object.defineProperty(I,B,{enumerable:!0,get:function(){return O[L]}})}:function(I,O,L,B){B===void 0&&(B=L),I[B]=O[L]}),x=this&&this.__setModuleDefault||(Object.create?function(I,O){Object.defineProperty(I,"default",{enumerable:!0,value:O})}:function(I,O){I.default=O}),E=this&&this.__importStar||function(I){if(I&&I.__esModule)return I;var O={};if(I!=null)for(var L in I)L!=="default"&&Object.prototype.hasOwnProperty.call(I,L)&&y(O,I,L);return x(O,I),O};Object.defineProperty(p,"__esModule",{value:!0}),p.XarrowContext=p.XelemContext=void 0;var S=E(g("react"));p.XelemContext=S.default.createContext(null),p.XarrowContext=S.default.createContext(null);var k={},C=0,P=function(I){var O=I.children,L=I.instanceCount,B=S.useState({}),Z=B[1],te=function(){return Z({})};return S.useEffect(function(){L.current=C,k[L.current]=te},[]),S.default.createElement(p.XarrowContext.Provider,{value:te},O)},R=function(I){var O=I.children,L=I.instanceCount;return S.default.createElement(p.XelemContext.Provider,{value:k[L.current]},O)},j=function(I){var O=I.children,L=S.useRef(C),B=S.useState({}),Z=B[1];return S.useEffect(function(){return C++,Z({}),function(){delete k[L.current]}},[]),S.default.createElement(R,{instanceCount:L},S.default.createElement(P,{instanceCount:L},O))};p.default=j},"./src/constants.tsx":function(d,p,g){var y=this&&this.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(p,"__esModule",{value:!0}),p.cArrowShapes=p.arrowShapes=p.cSvgElems=p.cPaths=p.cAnchorEdge=void 0;var x=y(g("react"));p.cAnchorEdge=["middle","left","right","top","bottom","auto"],p.cPaths=["smooth","grid","straight"],p.cSvgElems=["circle","ellipse","line","path","polygon","polyline","rect"],p.arrowShapes={arrow1:{svgElem:x.default.createElement("path",{d:"M 0 0 L 1 0.5 L 0 1 L 0.25 0.5 z"}),offsetForward:.25},heart:{svgElem:x.default.createElement("path",{d:"M 0,0.25 A 0.125,0.125 0,0,1 0.5,0.25 A 0.125,0.125 0,0,1 1,0.25 Q 1,0.625 0.5,1 Q 0,0.625 0,0.25 z"}),offsetForward:.1},circle:{svgElem:x.default.createElement("circle",{r:.5,cx:.5,cy:.5}),offsetForward:0}},p.cArrowShapes=Object.keys(p.arrowShapes)},"./src/index.tsx":function(d,p,g){var y=this&&this.__createBinding||(Object.create?function(P,R,j,I){I===void 0&&(I=j),Object.defineProperty(P,I,{enumerable:!0,get:function(){return R[j]}})}:function(P,R,j,I){I===void 0&&(I=j),P[I]=R[j]}),x=this&&this.__exportStar||function(P,R){for(var j in P)j!=="default"&&!Object.prototype.hasOwnProperty.call(R,j)&&y(R,P,j)},E=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(p,"__esModule",{value:!0}),p.useXarrow=p.Xwrapper=p.default=void 0;var S=g("./src/Xarrow/Xarrow.tsx");Object.defineProperty(p,"default",{enumerable:!0,get:function(){return E(S).default}}),x(g("./src/types.ts"),p),x(g("./src/constants.tsx"),p);var k=g("./src/Xwrapper.tsx");Object.defineProperty(p,"Xwrapper",{enumerable:!0,get:function(){return E(k).default}});var C=g("./src/useXarrow.tsx");Object.defineProperty(p,"useXarrow",{enumerable:!0,get:function(){return E(C).default}})},"./src/types.ts":function(d,p){Object.defineProperty(p,"__esModule",{value:!0})},"./src/useXarrow.tsx":function(d,p,g){Object.defineProperty(p,"__esModule",{value:!0});var y=g("react"),x=g("./src/Xwrapper.tsx"),E=function(){var S=y.useState({}),k=S[1],C=function(){return k({})},P=y.useContext(x.XelemContext);return P||(P=function(){}),y.useLayoutEffect(function(){P()}),C};p.default=E},lodash:function(d){d.exports=n},"prop-types":function(d){d.exports=s},react:function(d){d.exports=r}},o={};function l(d){var p=o[d];if(p!==void 0)return p.exports;var g=o[d]={id:d,loaded:!1,exports:{}};return a[d].call(g.exports,g,g.exports,l),g.loaded=!0,g.exports}l.c=o,function(){l.d=function(d,p){for(var g in p)l.o(p,g)&&!l.o(d,g)&&Object.defineProperty(d,g,{enumerable:!0,get:p[g]})}}(),function(){l.o=function(d,p){return Object.prototype.hasOwnProperty.call(d,p)}}(),function(){l.r=function(d){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(d,"__esModule",{value:!0})}}(),function(){l.nmd=function(d){return d.paths=[],d.children||(d.children=[]),d}}();var c=l(l.s="./src/index.tsx");return c}()})}(lib$1)),lib$1.exports}var libExports=requireLib();const Xarrow=getDefaultExportFromCjs(libExports),canUseDOM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function isWindow(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function isNode$3(t){return"nodeType"in t}function getWindow$1(t){var e,r;return t?isWindow(t)?t:isNode$3(t)&&(e=(r=t.ownerDocument)==null?void 0:r.defaultView)!=null?e:window:window}function isDocument(t){const{Document:e}=getWindow$1(t);return t instanceof e}function isHTMLElement$1(t){return isWindow(t)?!1:t instanceof getWindow$1(t).HTMLElement}function isSVGElement(t){return t instanceof getWindow$1(t).SVGElement}function getOwnerDocument(t){return t?isWindow(t)?t.document:isNode$3(t)?isDocument(t)?t:isHTMLElement$1(t)||isSVGElement(t)?t.ownerDocument:document:document:document}const useIsomorphicLayoutEffect$1=canUseDOM?reactExports.useLayoutEffect:reactExports.useEffect;function useEvent(t){const e=reactExports.useRef(t);return useIsomorphicLayoutEffect$1(()=>{e.current=t}),reactExports.useCallback(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return e.current==null?void 0:e.current(...n)},[])}function useInterval(){const t=reactExports.useRef(null),e=reactExports.useCallback((n,s)=>{t.current=setInterval(n,s)},[]),r=reactExports.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,r]}function useLatestValue(t,e){e===void 0&&(e=[t]);const r=reactExports.useRef(t);return useIsomorphicLayoutEffect$1(()=>{r.current!==t&&(r.current=t)},e),r}function useLazyMemo(t,e){const r=reactExports.useRef();return reactExports.useMemo(()=>{const n=t(r.current);return r.current=n,n},[...e])}function useNodeRef(t){const e=useEvent(t),r=reactExports.useRef(null),n=reactExports.useCallback(s=>{s!==r.current&&(e==null||e(s,r.current)),r.current=s},[]);return[r,n]}function usePrevious(t){const e=reactExports.useRef();return reactExports.useEffect(()=>{e.current=t},[t]),e.current}let ids={};function useUniqueId(t,e){return reactExports.useMemo(()=>{if(e)return e;const r=ids[t]==null?0:ids[t]+1;return ids[t]=r,t+"-"+r},[t,e])}function createAdjustmentFn(t){return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return n.reduce((a,o)=>{const l=Object.entries(o);for(const[c,d]of l){const p=a[c];p!=null&&(a[c]=p+t*d)}return a},{...e})}}const add=createAdjustmentFn(1),subtract=createAdjustmentFn(-1);function hasViewportRelativeCoordinates(t){return"clientX"in t&&"clientY"in t}function isKeyboardEvent(t){if(!t)return!1;const{KeyboardEvent:e}=getWindow$1(t.target);return e&&t instanceof e}function isTouchEvent(t){if(!t)return!1;const{TouchEvent:e}=getWindow$1(t.target);return e&&t instanceof e}function getEventCoordinates(t){if(isTouchEvent(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:r}=t.touches[0];return{x:e,y:r}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:r}=t.changedTouches[0];return{x:e,y:r}}}return hasViewportRelativeCoordinates(t)?{x:t.clientX,y:t.clientY}:null}const SELECTOR="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function findFirstFocusableNode(t){return t.matches(SELECTOR)?t:t.querySelector(SELECTOR)}const hiddenStyles={display:"none"};function HiddenText(t){let{id:e,value:r}=t;return React.createElement("div",{id:e,style:hiddenStyles},r)}function LiveRegion(t){let{id:e,announcement:r,ariaLiveType:n="assertive"}=t;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return React.createElement("div",{id:e,style:s,role:"status","aria-live":n,"aria-atomic":!0},r)}function useAnnouncement(){const[t,e]=reactExports.useState("");return{announce:reactExports.useCallback(n=>{n!=null&&e(n)},[]),announcement:t}}const DndMonitorContext=reactExports.createContext(null);function useDndMonitor(t){const e=reactExports.useContext(DndMonitorContext);reactExports.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function useDndMonitorProvider(){const[t]=reactExports.useState(()=>new Set),e=reactExports.useCallback(n=>(t.add(n),()=>t.delete(n)),[t]);return[reactExports.useCallback(n=>{let{type:s,event:a}=n;t.forEach(o=>{var l;return(l=o[s])==null?void 0:l.call(o,a)})},[t]),e]}const defaultScreenReaderInstructions={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},defaultAnnouncements={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was moved over droppable area "+r.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was dropped over droppable area "+r.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function Accessibility(t){let{announcements:e=defaultAnnouncements,container:r,hiddenTextDescribedById:n,screenReaderInstructions:s=defaultScreenReaderInstructions}=t;const{announce:a,announcement:o}=useAnnouncement(),l=useUniqueId("DndLiveRegion"),[c,d]=reactExports.useState(!1);if(reactExports.useEffect(()=>{d(!0)},[]),useDndMonitor(reactExports.useMemo(()=>({onDragStart(g){let{active:y}=g;a(e.onDragStart({active:y}))},onDragMove(g){let{active:y,over:x}=g;e.onDragMove&&a(e.onDragMove({active:y,over:x}))},onDragOver(g){let{active:y,over:x}=g;a(e.onDragOver({active:y,over:x}))},onDragEnd(g){let{active:y,over:x}=g;a(e.onDragEnd({active:y,over:x}))},onDragCancel(g){let{active:y,over:x}=g;a(e.onDragCancel({active:y,over:x}))}}),[a,e])),!c)return null;const p=React.createElement(React.Fragment,null,React.createElement(HiddenText,{id:n,value:s.draggable}),React.createElement(LiveRegion,{id:l,announcement:o}));return r?reactDomExports.createPortal(p,r):p}var Action;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Action||(Action={}));function noop(){}const defaultCoordinates=Object.freeze({x:0,y:0});function sortCollisionsDesc(t,e){let{data:{value:r}}=t,{data:{value:n}}=e;return n-r}function getFirstCollision(t,e){if(!t||t.length===0)return null;const[r]=t;return r[e]}function getIntersectionRatio(t,e){const r=Math.max(e.top,t.top),n=Math.max(e.left,t.left),s=Math.min(e.left+e.width,t.left+t.width),a=Math.min(e.top+e.height,t.top+t.height),o=s-n,l=a-r;if(n<s&&r<a){const c=e.width*e.height,d=t.width*t.height,p=o*l,g=p/(c+d-p);return Number(g.toFixed(4))}return 0}const rectIntersection=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:n}=t;const s=[];for(const a of n){const{id:o}=a,l=r.get(o);if(l){const c=getIntersectionRatio(l,e);c>0&&s.push({id:o,data:{droppableContainer:a,value:c}})}}return s.sort(sortCollisionsDesc)};function adjustScale(t,e,r){return{...t,scaleX:e&&r?e.width/r.width:1,scaleY:e&&r?e.height/r.height:1}}function getRectDelta(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:defaultCoordinates}function createRectAdjustmentFn(t){return function(r){for(var n=arguments.length,s=new Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];return s.reduce((o,l)=>({...o,top:o.top+t*l.y,bottom:o.bottom+t*l.y,left:o.left+t*l.x,right:o.right+t*l.x}),{...r})}}const getAdjustedRect=createRectAdjustmentFn(1);function parseTransform(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function inverseTransform(t,e,r){const n=parseTransform(e);if(!n)return t;const{scaleX:s,scaleY:a,x:o,y:l}=n,c=t.left-o-(1-s)*parseFloat(r),d=t.top-l-(1-a)*parseFloat(r.slice(r.indexOf(" ")+1)),p=s?t.width/s:t.width,g=a?t.height/a:t.height;return{width:p,height:g,top:d,right:c+p,bottom:d+g,left:c}}const defaultOptions$3={ignoreTransform:!1};function getClientRect(t,e){e===void 0&&(e=defaultOptions$3);let r=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:d,transformOrigin:p}=getWindow$1(t).getComputedStyle(t);d&&(r=inverseTransform(r,d,p))}const{top:n,left:s,width:a,height:o,bottom:l,right:c}=r;return{top:n,left:s,width:a,height:o,bottom:l,right:c}}function getTransformAgnosticClientRect(t){return getClientRect(t,{ignoreTransform:!0})}function getWindowClientRect(t){const e=t.innerWidth,r=t.innerHeight;return{top:0,left:0,right:e,bottom:r,width:e,height:r}}function isFixed(t,e){return e===void 0&&(e=getWindow$1(t).getComputedStyle(t)),e.position==="fixed"}function isScrollable(t,e){e===void 0&&(e=getWindow$1(t).getComputedStyle(t));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const a=e[s];return typeof a=="string"?r.test(a):!1})}function getScrollableAncestors(t,e){const r=[];function n(s){if(e!=null&&r.length>=e||!s)return r;if(isDocument(s)&&s.scrollingElement!=null&&!r.includes(s.scrollingElement))return r.push(s.scrollingElement),r;if(!isHTMLElement$1(s)||isSVGElement(s)||r.includes(s))return r;const a=getWindow$1(t).getComputedStyle(s);return s!==t&&isScrollable(s,a)&&r.push(s),isFixed(s,a)?r:n(s.parentNode)}return t?n(t):r}function getFirstScrollableAncestor(t){const[e]=getScrollableAncestors(t,1);return e??null}function getScrollableElement(t){return!canUseDOM||!t?null:isWindow(t)?t:isNode$3(t)?isDocument(t)||t===getOwnerDocument(t).scrollingElement?window:isHTMLElement$1(t)?t:null:null}function getScrollXCoordinate(t){return isWindow(t)?t.scrollX:t.scrollLeft}function getScrollYCoordinate(t){return isWindow(t)?t.scrollY:t.scrollTop}function getScrollCoordinates(t){return{x:getScrollXCoordinate(t),y:getScrollYCoordinate(t)}}var Direction;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Direction||(Direction={}));function isDocumentScrollingElement(t){return!canUseDOM||!t?!1:t===document.scrollingElement}function getScrollPosition(t){const e={x:0,y:0},r=isDocumentScrollingElement(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},n={x:t.scrollWidth-r.width,y:t.scrollHeight-r.height},s=t.scrollTop<=e.y,a=t.scrollLeft<=e.x,o=t.scrollTop>=n.y,l=t.scrollLeft>=n.x;return{isTop:s,isLeft:a,isBottom:o,isRight:l,maxScroll:n,minScroll:e}}const defaultThreshold={x:.2,y:.2};function getScrollDirectionAndSpeed(t,e,r,n,s){let{top:a,left:o,right:l,bottom:c}=r;n===void 0&&(n=10),s===void 0&&(s=defaultThreshold);const{isTop:d,isBottom:p,isLeft:g,isRight:y}=getScrollPosition(t),x={x:0,y:0},E={x:0,y:0},S={height:e.height*s.y,width:e.width*s.x};return!d&&a<=e.top+S.height?(x.y=Direction.Backward,E.y=n*Math.abs((e.top+S.height-a)/S.height)):!p&&c>=e.bottom-S.height&&(x.y=Direction.Forward,E.y=n*Math.abs((e.bottom-S.height-c)/S.height)),!y&&l>=e.right-S.width?(x.x=Direction.Forward,E.x=n*Math.abs((e.right-S.width-l)/S.width)):!g&&o<=e.left+S.width&&(x.x=Direction.Backward,E.x=n*Math.abs((e.left+S.width-o)/S.width)),{direction:x,speed:E}}function getScrollElementRect(t){if(t===document.scrollingElement){const{innerWidth:a,innerHeight:o}=window;return{top:0,left:0,right:a,bottom:o,width:a,height:o}}const{top:e,left:r,right:n,bottom:s}=t.getBoundingClientRect();return{top:e,left:r,right:n,bottom:s,width:t.clientWidth,height:t.clientHeight}}function getScrollOffsets(t){return t.reduce((e,r)=>add(e,getScrollCoordinates(r)),defaultCoordinates)}function getScrollXOffset(t){return t.reduce((e,r)=>e+getScrollXCoordinate(r),0)}function getScrollYOffset(t){return t.reduce((e,r)=>e+getScrollYCoordinate(r),0)}function scrollIntoViewIfNeeded(t,e){if(e===void 0&&(e=getClientRect),!t)return;const{top:r,left:n,bottom:s,right:a}=e(t);getFirstScrollableAncestor(t)&&(s<=0||a<=0||r>=window.innerHeight||n>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const properties=[["x",["left","right"],getScrollXOffset],["y",["top","bottom"],getScrollYOffset]];class Rect{constructor(e,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=getScrollableAncestors(r),s=getScrollOffsets(n);this.rect={...e},this.width=e.width,this.height=e.height;for(const[a,o,l]of properties)for(const c of o)Object.defineProperty(this,c,{get:()=>{const d=l(n),p=s[a]-d;return this.rect[c]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Listeners{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...r)})},this.target=e}add(e,r,n){var s;(s=this.target)==null||s.addEventListener(e,r,n),this.listeners.push([e,r,n])}}function getEventListenerTarget(t){const{EventTarget:e}=getWindow$1(t);return t instanceof e?t:getOwnerDocument(t)}function hasExceededDistance(t,e){const r=Math.abs(t.x),n=Math.abs(t.y);return typeof e=="number"?Math.sqrt(r**2+n**2)>e:"x"in e&&"y"in e?r>e.x&&n>e.y:"x"in e?r>e.x:"y"in e?n>e.y:!1}var EventName;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(EventName||(EventName={}));function preventDefault(t){t.preventDefault()}function stopPropagation(t){t.stopPropagation()}var KeyboardCode;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(KeyboardCode||(KeyboardCode={}));const defaultKeyboardCodes={start:[KeyboardCode.Space,KeyboardCode.Enter],cancel:[KeyboardCode.Esc],end:[KeyboardCode.Space,KeyboardCode.Enter,KeyboardCode.Tab]},defaultKeyboardCoordinateGetter=(t,e)=>{let{currentCoordinates:r}=e;switch(t.code){case KeyboardCode.Right:return{...r,x:r.x+25};case KeyboardCode.Left:return{...r,x:r.x-25};case KeyboardCode.Down:return{...r,y:r.y+25};case KeyboardCode.Up:return{...r,y:r.y-25}}};class KeyboardSensor{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:r}}=e;this.props=e,this.listeners=new Listeners(getOwnerDocument(r)),this.windowListeners=new Listeners(getWindow$1(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(EventName.Resize,this.handleCancel),this.windowListeners.add(EventName.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(EventName.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:r}=this.props,n=e.node.current;n&&scrollIntoViewIfNeeded(n),r(defaultCoordinates)}handleKeyDown(e){if(isKeyboardEvent(e)){const{active:r,context:n,options:s}=this.props,{keyboardCodes:a=defaultKeyboardCodes,coordinateGetter:o=defaultKeyboardCoordinateGetter,scrollBehavior:l="smooth"}=s,{code:c}=e;if(a.end.includes(c)){this.handleEnd(e);return}if(a.cancel.includes(c)){this.handleCancel(e);return}const{collisionRect:d}=n.current,p=d?{x:d.left,y:d.top}:defaultCoordinates;this.referenceCoordinates||(this.referenceCoordinates=p);const g=o(e,{active:r,context:n.current,currentCoordinates:p});if(g){const y=subtract(g,p),x={x:0,y:0},{scrollableAncestors:E}=n.current;for(const S of E){const k=e.code,{isTop:C,isRight:P,isLeft:R,isBottom:j,maxScroll:I,minScroll:O}=getScrollPosition(S),L=getScrollElementRect(S),B={x:Math.min(k===KeyboardCode.Right?L.right-L.width/2:L.right,Math.max(k===KeyboardCode.Right?L.left:L.left+L.width/2,g.x)),y:Math.min(k===KeyboardCode.Down?L.bottom-L.height/2:L.bottom,Math.max(k===KeyboardCode.Down?L.top:L.top+L.height/2,g.y))},Z=k===KeyboardCode.Right&&!P||k===KeyboardCode.Left&&!R,te=k===KeyboardCode.Down&&!j||k===KeyboardCode.Up&&!C;if(Z&&B.x!==g.x){const ie=S.scrollLeft+y.x,Q=k===KeyboardCode.Right&&ie<=I.x||k===KeyboardCode.Left&&ie>=O.x;if(Q&&!y.y){S.scrollTo({left:ie,behavior:l});return}Q?x.x=S.scrollLeft-ie:x.x=k===KeyboardCode.Right?S.scrollLeft-I.x:S.scrollLeft-O.x,x.x&&S.scrollBy({left:-x.x,behavior:l});break}else if(te&&B.y!==g.y){const ie=S.scrollTop+y.y,Q=k===KeyboardCode.Down&&ie<=I.y||k===KeyboardCode.Up&&ie>=O.y;if(Q&&!y.x){S.scrollTo({top:ie,behavior:l});return}Q?x.y=S.scrollTop-ie:x.y=k===KeyboardCode.Down?S.scrollTop-I.y:S.scrollTop-O.y,x.y&&S.scrollBy({top:-x.y,behavior:l});break}}this.handleMove(e,add(subtract(g,this.referenceCoordinates),x))}}}handleMove(e,r){const{onMove:n}=this.props;e.preventDefault(),n(r)}handleEnd(e){const{onEnd:r}=this.props;e.preventDefault(),this.detach(),r()}handleCancel(e){const{onCancel:r}=this.props;e.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}KeyboardSensor.activators=[{eventName:"onKeyDown",handler:(t,e,r)=>{let{keyboardCodes:n=defaultKeyboardCodes,onActivation:s}=e,{active:a}=r;const{code:o}=t.nativeEvent;if(n.start.includes(o)){const l=a.activatorNode.current;return l&&t.target!==l?!1:(t.preventDefault(),s==null||s({event:t.nativeEvent}),!0)}return!1}}];function isDistanceConstraint(t){return!!(t&&"distance"in t)}function isDelayConstraint(t){return!!(t&&"delay"in t)}class AbstractPointerSensor{constructor(e,r,n){var s;n===void 0&&(n=getEventListenerTarget(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=r;const{event:a}=e,{target:o}=a;this.props=e,this.events=r,this.document=getOwnerDocument(o),this.documentListeners=new Listeners(this.document),this.listeners=new Listeners(n),this.windowListeners=new Listeners(getWindow$1(o)),this.initialCoordinates=(s=getEventCoordinates(a))!=null?s:defaultCoordinates,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:r,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(EventName.Resize,this.handleCancel),this.windowListeners.add(EventName.DragStart,preventDefault),this.windowListeners.add(EventName.VisibilityChange,this.handleCancel),this.windowListeners.add(EventName.ContextMenu,preventDefault),this.documentListeners.add(EventName.Keydown,this.handleKeydown),r){if(n!=null&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(isDelayConstraint(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(isDistanceConstraint(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,r){const{active:n,onPending:s}=this.props;s(n,e,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:e}=this,{onStart:r}=this.props;e&&(this.activated=!0,this.documentListeners.add(EventName.Click,stopPropagation,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(EventName.SelectionChange,this.removeTextSelection),r(e))}handleMove(e){var r;const{activated:n,initialCoordinates:s,props:a}=this,{onMove:o,options:{activationConstraint:l}}=a;if(!s)return;const c=(r=getEventCoordinates(e))!=null?r:defaultCoordinates,d=subtract(s,c);if(!n&&l){if(isDistanceConstraint(l)){if(l.tolerance!=null&&hasExceededDistance(d,l.tolerance))return this.handleCancel();if(hasExceededDistance(d,l.distance))return this.handleStart()}if(isDelayConstraint(l)&&hasExceededDistance(d,l.tolerance))return this.handleCancel();this.handlePending(l,d);return}e.cancelable&&e.preventDefault(),o(c)}handleEnd(){const{onAbort:e,onEnd:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleCancel(){const{onAbort:e,onCancel:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleKeydown(e){e.code===KeyboardCode.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const events={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class PointerSensor extends AbstractPointerSensor{constructor(e){const{event:r}=e,n=getOwnerDocument(r.target);super(e,events,n)}}PointerSensor.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;return!r.isPrimary||r.button!==0?!1:(n==null||n({event:r}),!0)}}];const events$1={move:{name:"mousemove"},end:{name:"mouseup"}};var MouseButton;(function(t){t[t.RightClick=2]="RightClick"})(MouseButton||(MouseButton={}));class MouseSensor extends AbstractPointerSensor{constructor(e){super(e,events$1,getOwnerDocument(e.event.target))}}MouseSensor.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;return r.button===MouseButton.RightClick?!1:(n==null||n({event:r}),!0)}}];const events$2={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class TouchSensor extends AbstractPointerSensor{constructor(e){super(e,events$2)}static setup(){return window.addEventListener(events$2.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(events$2.move.name,e)};function e(){}}}TouchSensor.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;const{touches:s}=r;return s.length>1?!1:(n==null||n({event:r}),!0)}}];var AutoScrollActivator;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(AutoScrollActivator||(AutoScrollActivator={}));var TraversalOrder;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(TraversalOrder||(TraversalOrder={}));function useAutoScroller(t){let{acceleration:e,activator:r=AutoScrollActivator.Pointer,canScroll:n,draggingRect:s,enabled:a,interval:o=5,order:l=TraversalOrder.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:p,delta:g,threshold:y}=t;const x=useScrollIntent({delta:g,disabled:!a}),[E,S]=useInterval(),k=reactExports.useRef({x:0,y:0}),C=reactExports.useRef({x:0,y:0}),P=reactExports.useMemo(()=>{switch(r){case AutoScrollActivator.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case AutoScrollActivator.DraggableRect:return s}},[r,s,c]),R=reactExports.useRef(null),j=reactExports.useCallback(()=>{const O=R.current;if(!O)return;const L=k.current.x*C.current.x,B=k.current.y*C.current.y;O.scrollBy(L,B)},[]),I=reactExports.useMemo(()=>l===TraversalOrder.TreeOrder?[...d].reverse():d,[l,d]);reactExports.useEffect(()=>{if(!a||!d.length||!P){S();return}for(const O of I){if((n==null?void 0:n(O))===!1)continue;const L=d.indexOf(O),B=p[L];if(!B)continue;const{direction:Z,speed:te}=getScrollDirectionAndSpeed(O,B,P,e,y);for(const ie of["x","y"])x[ie][Z[ie]]||(te[ie]=0,Z[ie]=0);if(te.x>0||te.y>0){S(),R.current=O,E(j,o),k.current=te,C.current=Z;return}}k.current={x:0,y:0},C.current={x:0,y:0},S()},[e,j,n,S,a,o,JSON.stringify(P),JSON.stringify(x),E,d,I,p,JSON.stringify(y)])}const defaultScrollIntent={x:{[Direction.Backward]:!1,[Direction.Forward]:!1},y:{[Direction.Backward]:!1,[Direction.Forward]:!1}};function useScrollIntent(t){let{delta:e,disabled:r}=t;const n=usePrevious(e);return useLazyMemo(s=>{if(r||!n||!s)return defaultScrollIntent;const a={x:Math.sign(e.x-n.x),y:Math.sign(e.y-n.y)};return{x:{[Direction.Backward]:s.x[Direction.Backward]||a.x===-1,[Direction.Forward]:s.x[Direction.Forward]||a.x===1},y:{[Direction.Backward]:s.y[Direction.Backward]||a.y===-1,[Direction.Forward]:s.y[Direction.Forward]||a.y===1}}},[r,e,n])}function useCachedNode(t,e){const r=e!=null?t.get(e):void 0,n=r?r.node.current:null;return useLazyMemo(s=>{var a;return e==null?null:(a=n??s)!=null?a:null},[n,e])}function useCombineActivators(t,e){return reactExports.useMemo(()=>t.reduce((r,n)=>{const{sensor:s}=n,a=s.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,n)}));return[...r,...a]},[]),[t,e])}var MeasuringStrategy;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(MeasuringStrategy||(MeasuringStrategy={}));var MeasuringFrequency;(function(t){t.Optimized="optimized"})(MeasuringFrequency||(MeasuringFrequency={}));const defaultValue=new Map;function useDroppableMeasuring(t,e){let{dragging:r,dependencies:n,config:s}=e;const[a,o]=reactExports.useState(null),{frequency:l,measure:c,strategy:d}=s,p=reactExports.useRef(t),g=k(),y=useLatestValue(g),x=reactExports.useCallback(function(C){C===void 0&&(C=[]),!y.current&&o(P=>P===null?C:P.concat(C.filter(R=>!P.includes(R))))},[y]),E=reactExports.useRef(null),S=useLazyMemo(C=>{if(g&&!r)return defaultValue;if(!C||C===defaultValue||p.current!==t||a!=null){const P=new Map;for(let R of t){if(!R)continue;if(a&&a.length>0&&!a.includes(R.id)&&R.rect.current){P.set(R.id,R.rect.current);continue}const j=R.node.current,I=j?new Rect(c(j),j):null;R.rect.current=I,I&&P.set(R.id,I)}return P}return C},[t,a,r,g,c]);return reactExports.useEffect(()=>{p.current=t},[t]),reactExports.useEffect(()=>{g||x()},[r,g]),reactExports.useEffect(()=>{a&&a.length>0&&o(null)},[JSON.stringify(a)]),reactExports.useEffect(()=>{g||typeof l!="number"||E.current!==null||(E.current=setTimeout(()=>{x(),E.current=null},l))},[l,g,x,...n]),{droppableRects:S,measureDroppableContainers:x,measuringScheduled:a!=null};function k(){switch(d){case MeasuringStrategy.Always:return!1;case MeasuringStrategy.BeforeDragging:return r;default:return!r}}}function useInitialValue(t,e){return useLazyMemo(r=>t?r||(typeof e=="function"?e(t):t):null,[e,t])}function useInitialRect(t,e){return useInitialValue(t,e)}function useMutationObserver(t){let{callback:e,disabled:r}=t;const n=useEvent(e),s=reactExports.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(n)},[n,r]);return reactExports.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function useResizeObserver(t){let{callback:e,disabled:r}=t;const n=useEvent(e),s=reactExports.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(n)},[r]);return reactExports.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function defaultMeasure(t){return new Rect(getClientRect(t),t)}function useRect(t,e,r){e===void 0&&(e=defaultMeasure);const[n,s]=reactExports.useState(null);function a(){s(c=>{if(!t)return null;if(t.isConnected===!1){var d;return(d=c??r)!=null?d:null}const p=e(t);return JSON.stringify(c)===JSON.stringify(p)?c:p})}const o=useMutationObserver({callback(c){if(t)for(const d of c){const{type:p,target:g}=d;if(p==="childList"&&g instanceof HTMLElement&&g.contains(t)){a();break}}}}),l=useResizeObserver({callback:a});return useIsomorphicLayoutEffect$1(()=>{a(),t?(l==null||l.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),o==null||o.disconnect())},[t]),n}function useRectDelta(t){const e=useInitialValue(t);return getRectDelta(t,e)}const defaultValue$1=[];function useScrollableAncestors(t){const e=reactExports.useRef(t),r=useLazyMemo(n=>t?n&&n!==defaultValue$1&&t&&e.current&&t.parentNode===e.current.parentNode?n:getScrollableAncestors(t):defaultValue$1,[t]);return reactExports.useEffect(()=>{e.current=t},[t]),r}function useScrollOffsets(t){const[e,r]=reactExports.useState(null),n=reactExports.useRef(t),s=reactExports.useCallback(a=>{const o=getScrollableElement(a.target);o&&r(l=>l?(l.set(o,getScrollCoordinates(o)),new Map(l)):null)},[]);return reactExports.useEffect(()=>{const a=n.current;if(t!==a){o(a);const l=t.map(c=>{const d=getScrollableElement(c);return d?(d.addEventListener("scroll",s,{passive:!0}),[d,getScrollCoordinates(d)]):null}).filter(c=>c!=null);r(l.length?new Map(l):null),n.current=t}return()=>{o(t),o(a)};function o(l){l.forEach(c=>{const d=getScrollableElement(c);d==null||d.removeEventListener("scroll",s)})}},[s,t]),reactExports.useMemo(()=>t.length?e?Array.from(e.values()).reduce((a,o)=>add(a,o),defaultCoordinates):getScrollOffsets(t):defaultCoordinates,[t,e])}function useScrollOffsetsDelta(t,e){e===void 0&&(e=[]);const r=reactExports.useRef(null);return reactExports.useEffect(()=>{r.current=null},e),reactExports.useEffect(()=>{const n=t!==defaultCoordinates;n&&!r.current&&(r.current=t),!n&&r.current&&(r.current=null)},[t]),r.current?subtract(t,r.current):defaultCoordinates}function useSensorSetup(t){reactExports.useEffect(()=>{if(!canUseDOM)return;const e=t.map(r=>{let{sensor:n}=r;return n.setup==null?void 0:n.setup()});return()=>{for(const r of e)r==null||r()}},t.map(e=>{let{sensor:r}=e;return r}))}function useSyntheticListeners(t,e){return reactExports.useMemo(()=>t.reduce((r,n)=>{let{eventName:s,handler:a}=n;return r[s]=o=>{a(o,e)},r},{}),[t,e])}function useWindowRect(t){return reactExports.useMemo(()=>t?getWindowClientRect(t):null,[t])}const defaultValue$2=[];function useRects(t,e){e===void 0&&(e=getClientRect);const[r]=t,n=useWindowRect(r?getWindow$1(r):null),[s,a]=reactExports.useState(defaultValue$2);function o(){a(()=>t.length?t.map(c=>isDocumentScrollingElement(c)?n:new Rect(e(c),c)):defaultValue$2)}const l=useResizeObserver({callback:o});return useIsomorphicLayoutEffect$1(()=>{l==null||l.disconnect(),o(),t.forEach(c=>l==null?void 0:l.observe(c))},[t]),s}function getMeasurableNode(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return isHTMLElement$1(e)?e:t}function useDragOverlayMeasuring(t){let{measure:e}=t;const[r,n]=reactExports.useState(null),s=reactExports.useCallback(d=>{for(const{target:p}of d)if(isHTMLElement$1(p)){n(g=>{const y=e(p);return g?{...g,width:y.width,height:y.height}:y});break}},[e]),a=useResizeObserver({callback:s}),o=reactExports.useCallback(d=>{const p=getMeasurableNode(d);a==null||a.disconnect(),p&&(a==null||a.observe(p)),n(p?e(p):null)},[e,a]),[l,c]=useNodeRef(o);return reactExports.useMemo(()=>({nodeRef:l,rect:r,setRef:c}),[r,l,c])}const defaultSensors=[{sensor:PointerSensor,options:{}},{sensor:KeyboardSensor,options:{}}],defaultData={current:{}},defaultMeasuringConfiguration={draggable:{measure:getTransformAgnosticClientRect},droppable:{measure:getTransformAgnosticClientRect,strategy:MeasuringStrategy.WhileDragging,frequency:MeasuringFrequency.Optimized},dragOverlay:{measure:getClientRect}};class DroppableContainersMap extends Map{get(e){var r;return e!=null&&(r=super.get(e))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:r}=e;return!r})}getNodeFor(e){var r,n;return(r=(n=this.get(e))==null?void 0:n.node.current)!=null?r:void 0}}const defaultPublicContext={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new DroppableContainersMap,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:noop},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:defaultMeasuringConfiguration,measureDroppableContainers:noop,windowRect:null,measuringScheduled:!1},defaultInternalContext={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:noop,draggableNodes:new Map,over:null,measureDroppableContainers:noop},InternalContext=reactExports.createContext(defaultInternalContext),PublicContext=reactExports.createContext(defaultPublicContext);function getInitialState(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new DroppableContainersMap}}}function reducer(t,e){switch(e.type){case Action.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Action.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Action.DragEnd:case Action.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Action.RegisterDroppable:{const{element:r}=e,{id:n}=r,s=new DroppableContainersMap(t.droppable.containers);return s.set(n,r),{...t,droppable:{...t.droppable,containers:s}}}case Action.SetDroppableDisabled:{const{id:r,key:n,disabled:s}=e,a=t.droppable.containers.get(r);if(!a||n!==a.key)return t;const o=new DroppableContainersMap(t.droppable.containers);return o.set(r,{...a,disabled:s}),{...t,droppable:{...t.droppable,containers:o}}}case Action.UnregisterDroppable:{const{id:r,key:n}=e,s=t.droppable.containers.get(r);if(!s||n!==s.key)return t;const a=new DroppableContainersMap(t.droppable.containers);return a.delete(r),{...t,droppable:{...t.droppable,containers:a}}}default:return t}}function RestoreFocus(t){let{disabled:e}=t;const{active:r,activatorEvent:n,draggableNodes:s}=reactExports.useContext(InternalContext),a=usePrevious(n),o=usePrevious(r==null?void 0:r.id);return reactExports.useEffect(()=>{if(!e&&!n&&a&&o!=null){if(!isKeyboardEvent(a)||document.activeElement===a.target)return;const l=s.get(o);if(!l)return;const{activatorNode:c,node:d}=l;if(!c.current&&!d.current)return;requestAnimationFrame(()=>{for(const p of[c.current,d.current]){if(!p)continue;const g=findFirstFocusableNode(p);if(g){g.focus();break}}})}},[n,e,s,o,a]),null}function applyModifiers(t,e){let{transform:r,...n}=e;return t!=null&&t.length?t.reduce((s,a)=>a({transform:s,...n}),r):r}function useMeasuringConfiguration(t){return reactExports.useMemo(()=>({draggable:{...defaultMeasuringConfiguration.draggable,...t==null?void 0:t.draggable},droppable:{...defaultMeasuringConfiguration.droppable,...t==null?void 0:t.droppable},dragOverlay:{...defaultMeasuringConfiguration.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function useLayoutShiftScrollCompensation(t){let{activeNode:e,measure:r,initialRect:n,config:s=!0}=t;const a=reactExports.useRef(!1),{x:o,y:l}=typeof s=="boolean"?{x:s,y:s}:s;useIsomorphicLayoutEffect$1(()=>{if(!o&&!l||!e){a.current=!1;return}if(a.current||!n)return;const d=e==null?void 0:e.node.current;if(!d||d.isConnected===!1)return;const p=r(d),g=getRectDelta(p,n);if(o||(g.x=0),l||(g.y=0),a.current=!0,Math.abs(g.x)>0||Math.abs(g.y)>0){const y=getFirstScrollableAncestor(d);y&&y.scrollBy({top:g.y,left:g.x})}},[e,o,l,n,r])}const ActiveDraggableContext=reactExports.createContext({...defaultCoordinates,scaleX:1,scaleY:1});var Status;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Status||(Status={}));const DndContext=reactExports.memo(function(e){var r,n,s,a;let{id:o,accessibility:l,autoScroll:c=!0,children:d,sensors:p=defaultSensors,collisionDetection:g=rectIntersection,measuring:y,modifiers:x,...E}=e;const S=reactExports.useReducer(reducer,void 0,getInitialState),[k,C]=S,[P,R]=useDndMonitorProvider(),[j,I]=reactExports.useState(Status.Uninitialized),O=j===Status.Initialized,{draggable:{active:L,nodes:B,translate:Z},droppable:{containers:te}}=k,ie=L!=null?B.get(L):null,Q=reactExports.useRef({initial:null,translated:null}),fe=reactExports.useMemo(()=>{var Te;return L!=null?{id:L,data:(Te=ie==null?void 0:ie.data)!=null?Te:defaultData,rect:Q}:null},[L,ie]),se=reactExports.useRef(null),[Y,G]=reactExports.useState(null),[q,N]=reactExports.useState(null),$=useLatestValue(E,Object.values(E)),V=useUniqueId("DndDescribedBy",o),z=reactExports.useMemo(()=>te.getEnabled(),[te]),ne=useMeasuringConfiguration(y),{droppableRects:pe,measureDroppableContainers:xe,measuringScheduled:Ce}=useDroppableMeasuring(z,{dragging:O,dependencies:[Z.x,Z.y],config:ne.droppable}),ce=useCachedNode(B,L),Re=reactExports.useMemo(()=>q?getEventCoordinates(q):null,[q]),oe=je(),Se=useInitialRect(ce,ne.draggable.measure);useLayoutShiftScrollCompensation({activeNode:L!=null?B.get(L):null,config:oe.layoutShiftCompensation,initialRect:Se,measure:ne.draggable.measure});const Ne=useRect(ce,ne.draggable.measure,Se),Fe=useRect(ce?ce.parentElement:null),et=reactExports.useRef({activatorEvent:null,active:null,activeNode:ce,collisionRect:null,collisions:null,droppableRects:pe,draggableNodes:B,draggingNode:null,draggingNodeRect:null,droppableContainers:te,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Le=te.getNodeFor((r=et.current.over)==null?void 0:r.id),Ee=useDragOverlayMeasuring({measure:ne.dragOverlay.measure}),Pt=(n=Ee.nodeRef.current)!=null?n:ce,Dt=O?(s=Ee.rect)!=null?s:Ne:null,Et=!!(Ee.nodeRef.current&&Ee.rect),St=useRectDelta(Et?null:Ne),Ct=useWindowRect(Pt?getWindow$1(Pt):null),ct=useScrollableAncestors(O?Le??ce:null),Qe=useRects(ct),_t=applyModifiers(x,{transform:{x:Z.x-St.x,y:Z.y-St.y,scaleX:1,scaleY:1},activatorEvent:q,active:fe,activeNodeRect:Ne,containerNodeRect:Fe,draggingNodeRect:Dt,over:et.current.over,overlayNodeRect:Ee.rect,scrollableAncestors:ct,scrollableAncestorRects:Qe,windowRect:Ct}),ft=Re?add(Re,Z):null,Bt=useScrollOffsets(ct),Wt=useScrollOffsetsDelta(Bt),Zt=useScrollOffsetsDelta(Bt,[Ne]),Ft=add(_t,Wt),Mt=Dt?getAdjustedRect(Dt,_t):null,bt=fe&&Mt?g({active:fe,collisionRect:Mt,droppableRects:pe,droppableContainers:z,pointerCoordinates:ft}):null,Be=getFirstCollision(bt,"id"),[tt,yt]=reactExports.useState(null),jr=Et?_t:add(_t,Zt),ir=adjustScale(jr,(a=tt==null?void 0:tt.rect)!=null?a:null,Ne),vr=reactExports.useRef(null),Vt=reactExports.useCallback((Te,Ae)=>{let{sensor:be,options:We}=Ae;if(se.current==null)return;const Ve=B.get(se.current);if(!Ve)return;const Ge=Te.nativeEvent,qe=new be({active:se.current,activeNode:Ve,event:Ge,options:We,context:et,onAbort(at){if(!B.get(at))return;const{onDragAbort:ht}=$.current,Nt={id:at};ht==null||ht(Nt),P({type:"onDragAbort",event:Nt})},onPending(at,xt,ht,Nt){if(!B.get(at))return;const{onDragPending:Qt}=$.current,Kt={id:at,constraint:xt,initialCoordinates:ht,offset:Nt};Qt==null||Qt(Kt),P({type:"onDragPending",event:Kt})},onStart(at){const xt=se.current;if(xt==null)return;const ht=B.get(xt);if(!ht)return;const{onDragStart:Nt}=$.current,qt={activatorEvent:Ge,active:{id:xt,data:ht.data,rect:Q}};reactDomExports.unstable_batchedUpdates(()=>{Nt==null||Nt(qt),I(Status.Initializing),C({type:Action.DragStart,initialCoordinates:at,active:xt}),P({type:"onDragStart",event:qt}),G(vr.current),N(Ge)})},onMove(at){C({type:Action.DragMove,coordinates:at})},onEnd:it(Action.DragEnd),onCancel:it(Action.DragCancel)});vr.current=qe;function it(at){return async function(){const{active:ht,collisions:Nt,over:qt,scrollAdjustedTranslate:Qt}=et.current;let Kt=null;if(ht&&Qt){const{cancelDrop:Nn}=$.current;Kt={activatorEvent:Ge,active:ht,collisions:Nt,delta:Qt,over:qt},at===Action.DragEnd&&typeof Nn=="function"&&await Promise.resolve(Nn(Kt))&&(at=Action.DragCancel)}se.current=null,reactDomExports.unstable_batchedUpdates(()=>{C({type:at}),I(Status.Uninitialized),yt(null),G(null),N(null),vr.current=null;const Nn=at===Action.DragEnd?"onDragEnd":"onDragCancel";if(Kt){const Qs=$.current[Nn];Qs==null||Qs(Kt),P({type:Nn,event:Kt})}})}}},[B]),Ut=reactExports.useCallback((Te,Ae)=>(be,We)=>{const Ve=be.nativeEvent,Ge=B.get(We);if(se.current!==null||!Ge||Ve.dndKit||Ve.defaultPrevented)return;const qe={active:Ge};Te(be,Ae.options,qe)===!0&&(Ve.dndKit={capturedBy:Ae.sensor},se.current=We,Vt(be,Ae))},[B,Vt]),Ir=useCombineActivators(p,Ut);useSensorSetup(p),useIsomorphicLayoutEffect$1(()=>{Ne&&j===Status.Initializing&&I(Status.Initialized)},[Ne,j]),reactExports.useEffect(()=>{const{onDragMove:Te}=$.current,{active:Ae,activatorEvent:be,collisions:We,over:Ve}=et.current;if(!Ae||!be)return;const Ge={active:Ae,activatorEvent:be,collisions:We,delta:{x:Ft.x,y:Ft.y},over:Ve};reactDomExports.unstable_batchedUpdates(()=>{Te==null||Te(Ge),P({type:"onDragMove",event:Ge})})},[Ft.x,Ft.y]),reactExports.useEffect(()=>{const{active:Te,activatorEvent:Ae,collisions:be,droppableContainers:We,scrollAdjustedTranslate:Ve}=et.current;if(!Te||se.current==null||!Ae||!Ve)return;const{onDragOver:Ge}=$.current,qe=We.get(Be),it=qe&&qe.rect.current?{id:qe.id,rect:qe.rect.current,data:qe.data,disabled:qe.disabled}:null,at={active:Te,activatorEvent:Ae,collisions:be,delta:{x:Ve.x,y:Ve.y},over:it};reactDomExports.unstable_batchedUpdates(()=>{yt(it),Ge==null||Ge(at),P({type:"onDragOver",event:at})})},[Be]),useIsomorphicLayoutEffect$1(()=>{et.current={activatorEvent:q,active:fe,activeNode:ce,collisionRect:Mt,collisions:bt,droppableRects:pe,draggableNodes:B,draggingNode:Pt,draggingNodeRect:Dt,droppableContainers:te,over:tt,scrollableAncestors:ct,scrollAdjustedTranslate:Ft},Q.current={initial:Dt,translated:Mt}},[fe,ce,bt,Mt,B,Pt,Dt,pe,te,tt,ct,Ft]),useAutoScroller({...oe,delta:Z,draggingRect:Mt,pointerCoordinates:ft,scrollableAncestors:ct,scrollableAncestorRects:Qe});const kr=reactExports.useMemo(()=>({active:fe,activeNode:ce,activeNodeRect:Ne,activatorEvent:q,collisions:bt,containerNodeRect:Fe,dragOverlay:Ee,draggableNodes:B,droppableContainers:te,droppableRects:pe,over:tt,measureDroppableContainers:xe,scrollableAncestors:ct,scrollableAncestorRects:Qe,measuringConfiguration:ne,measuringScheduled:Ce,windowRect:Ct}),[fe,ce,Ne,q,bt,Fe,Ee,B,te,pe,tt,xe,ct,Qe,ne,Ce,Ct]),me=reactExports.useMemo(()=>({activatorEvent:q,activators:Ir,active:fe,activeNodeRect:Ne,ariaDescribedById:{draggable:V},dispatch:C,draggableNodes:B,over:tt,measureDroppableContainers:xe}),[q,Ir,fe,Ne,C,V,B,tt,xe]);return React.createElement(DndMonitorContext.Provider,{value:R},React.createElement(InternalContext.Provider,{value:me},React.createElement(PublicContext.Provider,{value:kr},React.createElement(ActiveDraggableContext.Provider,{value:ir},d)),React.createElement(RestoreFocus,{disabled:(l==null?void 0:l.restoreFocus)===!1})),React.createElement(Accessibility,{...l,hiddenTextDescribedById:V}));function je(){const Te=(Y==null?void 0:Y.autoScrollEnabled)===!1,Ae=typeof c=="object"?c.enabled===!1:c===!1,be=O&&!Te&&!Ae;return typeof c=="object"?{...c,enabled:be}:{enabled:be}}}),NullContext=reactExports.createContext(null),defaultRole="button",ID_PREFIX="Draggable";function useDraggable(t){let{id:e,data:r,disabled:n=!1,attributes:s}=t;const a=useUniqueId(ID_PREFIX),{activators:o,activatorEvent:l,active:c,activeNodeRect:d,ariaDescribedById:p,draggableNodes:g,over:y}=reactExports.useContext(InternalContext),{role:x=defaultRole,roleDescription:E="draggable",tabIndex:S=0}=s??{},k=(c==null?void 0:c.id)===e,C=reactExports.useContext(k?ActiveDraggableContext:NullContext),[P,R]=useNodeRef(),[j,I]=useNodeRef(),O=useSyntheticListeners(o,e),L=useLatestValue(r);useIsomorphicLayoutEffect$1(()=>(g.set(e,{id:e,key:a,node:P,activatorNode:j,data:L}),()=>{const Z=g.get(e);Z&&Z.key===a&&g.delete(e)}),[g,e]);const B=reactExports.useMemo(()=>({role:x,tabIndex:S,"aria-disabled":n,"aria-pressed":k&&x===defaultRole?!0:void 0,"aria-roledescription":E,"aria-describedby":p.draggable}),[n,x,S,k,E,p.draggable]);return{active:c,activatorEvent:l,activeNodeRect:d,attributes:B,isDragging:k,listeners:n?void 0:O,node:P,over:y,setNodeRef:R,setActivatorNodeRef:I,transform:C}}const Node$1=React.memo(({node:t,onNodeComplete:e,onAddBranch:r,onEditNode:n,onNodesChange:s,nodes:a,showRewardAnimation:o,isStudent:l,isEditable:c,isDragging:d,dragStartPosition:p,allowDragOut:g})=>{var te,ie,Q,fe,se;const[y,x]=reactExports.useState(!1),[E,S]=reactExports.useState(!1),k=reactExports.useRef(null),{attributes:C,listeners:P,setNodeRef:R}=useDraggable({id:t.id,disabled:!c||l}),j=p?{transform:`translate3d(${p.x}px, ${p.y}px, 0)`}:void 0,I={locked:"bg-gray-200 dark:bg-gray-700",unlocked:"bg-indigo-500 dark:bg-indigo-600",completed:"bg-green-500 dark:bg-green-600"},O=["from-blue-500 to-purple-500","from-purple-500 to-pink-500","from-pink-500 to-red-500","from-red-500 to-orange-500","from-orange-500 to-yellow-500"],L=Y=>{if(Y.stopPropagation(),r){const G={x:t.position.x+300,y:t.position.y+100};r(t.id,G)}},B=()=>{S(!0)},Z=Y=>{Y.preventDefault();const G=new FormData(Y.currentTarget),q={title:G.get("title"),description:G.get("description"),level:parseInt(G.get("level")),rewards:[{type:G.get("rewardType"),value:parseInt(G.get("rewardValue")),icon:"star"}]};n==null||n(t.id,q),S(!1)};return reactExports.useEffect(()=>{if(!g)return;const Y=k.current;if(!Y)return;const G=N=>{N.stopPropagation(),N.dataTransfer&&(N.dataTransfer.setData("text/plain",t.id),N.dataTransfer.effectAllowed="move")},q=N=>{if(p&&a){const $=a.map(V=>V.id===t.id?{...V,position:p}:V);s==null||s($)}};return Y.addEventListener("dragstart",G),Y.addEventListener("dragend",q),()=>{Y.removeEventListener("dragstart",G),Y.removeEventListener("dragend",q)}},[t.id,g,p,a]),E&&c?jsxRuntimeExports.jsx("div",{style:{position:"absolute",left:t.position.x,top:t.position.y,width:"320px"},className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl p-4 z-50",children:jsxRuntimeExports.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"標題"}),jsxRuntimeExports.jsx("input",{name:"title",defaultValue:t.title,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"描述"}),jsxRuntimeExports.jsx("textarea",{name:"description",defaultValue:t.description,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"等級"}),jsxRuntimeExports.jsx("input",{name:"level",type:"number",defaultValue:t.level,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"獎勵類型"}),jsxRuntimeExports.jsxs("select",{name:"rewardType",defaultValue:(ie=(te=t.rewards)==null?void 0:te[0])==null?void 0:ie.type,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md",children:[jsxRuntimeExports.jsx("option",{value:"points",children:"點數"}),jsxRuntimeExports.jsx("option",{value:"badge",children:"徽章"}),jsxRuntimeExports.jsx("option",{value:"experience",children:"經驗值"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"獎勵值"}),jsxRuntimeExports.jsx("input",{name:"rewardValue",type:"number",defaultValue:(fe=(Q=t.rewards)==null?void 0:Q[0])==null?void 0:fe.value,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end space-x-2",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>S(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"取消"}),jsxRuntimeExports.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700",children:"儲存"})]})]})}):jsxRuntimeExports.jsxs(motion.div,{id:t.id,ref:Y=>{k.current=Y,R(Y)},...C,...P,style:{position:"absolute",left:t.position.x,top:t.position.y,touchAction:"none",cursor:c&&!l?"grab":"default",...j},draggable:g,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},whileHover:{scale:1.05},onHoverStart:()=>x(!0),onHoverEnd:()=>x(!1),className:"relative",children:[jsxRuntimeExports.jsx("div",{className:`
        absolute -inset-2 rounded-xl bg-gradient-to-r ${O[t.level%O.length]}
        opacity-75 blur-lg transition-opacity duration-300
        ${y?"opacity-100":"opacity-50"}
      `}),jsxRuntimeExports.jsxs("div",{className:`
          w-64 p-4 rounded-xl relative bg-white dark:bg-gray-800
          border-2 ${t.status==="locked"?"border-gray-300 dark:border-gray-700":t.status==="completed"?"border-green-500 dark:border-green-600":"border-indigo-500 dark:border-indigo-600"}
          shadow-xl backdrop-blur-sm bg-opacity-90 dark:bg-opacity-90
        `,children:[c&&!l&&jsxRuntimeExports.jsx("button",{onClick:B,className:"absolute -left-4 top-1/2 transform -translate-y-1/2 w-8 h-8 rounded-full bg-indigo-600 text-white flex items-center justify-center hover:bg-indigo-700 transition-colors z-10",children:jsxRuntimeExports.jsx(Pen,{size:16})}),c&&!l&&jsxRuntimeExports.jsx("button",{onClick:L,className:"absolute -right-4 top-1/2 transform -translate-y-1/2 w-8 h-8 rounded-full bg-indigo-600 text-white flex items-center justify-center hover:bg-indigo-700 transition-colors z-10",children:jsxRuntimeExports.jsx(Plus,{size:16})}),jsxRuntimeExports.jsx("div",{className:`
          absolute -top-3 -right-3 w-8 h-8 rounded-full 
          flex items-center justify-center ${I[t.status]}
          shadow-lg transition-colors duration-300
        `,children:t.status==="locked"?jsxRuntimeExports.jsx(Lock,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"}):t.status==="completed"?jsxRuntimeExports.jsx(motion.div,{initial:{rotate:0},animate:{rotate:360},transition:{duration:.5},children:jsxRuntimeExports.jsx(Trophy,{className:"w-4 h-4 text-white"})}):jsxRuntimeExports.jsx(Map$1,{className:"w-4 h-4 text-white"})}),t.rewards.find(Y=>Y.type==="badge")&&jsxRuntimeExports.jsxs("div",{className:"absolute -top-3 right-12 px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded-full text-xs font-medium flex items-center",children:[jsxRuntimeExports.jsx(Tag,{size:12,className:"mr-1"}),(se=t.rewards.find(Y=>Y.type==="badge"))==null?void 0:se.icon]}),jsxRuntimeExports.jsxs("div",{className:"absolute -top-3 -left-3 bg-gradient-to-r from-indigo-500 to-purple-500 text-white text-xs font-bold px-2 py-1 rounded-full shadow-lg",children:["Level ",t.level]}),jsxRuntimeExports.jsxs("div",{className:"mb-3",children:[jsxRuntimeExports.jsx("h3",{className:`
            text-lg font-semibold
            ${t.status==="locked"?"text-gray-500 dark:text-gray-400":"text-gray-900 dark:text-white"}
          `,children:t.title}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:t.description})]}),t.requirements&&t.requirements.length>0&&jsxRuntimeExports.jsx("div",{className:"mb-3",children:jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["需要完成：",t.requirements.join(", ")]})}),t.rewards&&jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:t.rewards.map((Y,G)=>jsxRuntimeExports.jsxs(motion.div,{className:`
                  inline-flex items-center px-2 py-1 rounded-full text-xs font-medium
                  ${Y.type==="badge"?"bg-gradient-to-r from-purple-500 to-pink-500 text-white":Y.type==="experience"?"bg-gradient-to-r from-green-500 to-emerald-500 text-white":"bg-gradient-to-r from-yellow-500 to-orange-500 text-white"}
                `,whileHover:{scale:1.1},animate:o?{scale:[1,1.2,1],rotate:[0,10,-10,0]}:void 0,children:[Y.type==="badge"?jsxRuntimeExports.jsx(Award,{className:"w-3 h-3 mr-1"}):Y.type==="experience"?jsxRuntimeExports.jsx(Flag,{className:"w-3 h-3 mr-1"}):jsxRuntimeExports.jsx(Star,{className:"w-3 h-3 mr-1"}),Y.value," ",Y.type==="badge"?"徽章":Y.type==="experience"?"EXP":"點數"]},G))}),l&&t.status==="unlocked"&&jsxRuntimeExports.jsx(motion.button,{onClick:()=>e==null?void 0:e(t.id),className:"mt-3 w-full px-3 py-2 text-sm font-medium rounded-lg text-white bg-gradient-to-r from-indigo-500 to-purple-500 hover:from-indigo-600 hover:to-purple-600 transition-all duration-300",whileHover:{scale:1.02},whileTap:{scale:.98},children:"開始任務"})]})]})},(t,e)=>t.node.id===e.node.id&&t.node.position.x===e.node.position.x&&t.node.position.y===e.node.position.y&&t.isDragging===e.isDragging&&t.showRewardAnimation===e.showRewardAnimation&&t.isEditable===e.isEditable&&t.isStudent===e.isStudent&&t.dragStartPosition===e.dragStartPosition),LearningMap=({nodes:t=[],onNodesChange:e,isStudent:r,isEditable:n=!r,allowDragOut:s=!1})=>{const[a,o]=reactExports.useState(!1),[l,c]=reactExports.useState(null),[d,p]=reactExports.useState(null),g=P=>{o(!0),setTimeout(()=>o(!1),1e3);const R=t.map(j=>{var I;return j.id===P?{...j,status:"completed"}:(I=j.requirements)!=null&&I.includes(P)?{...j,status:"unlocked"}:j});e==null||e(R)},y=(P,R)=>{var L;const j=`node-${Date.now()}`,I={id:j,title:"新任務",description:"點擊編輯任務內容",status:"locked",position:R,connections:[],requirements:[],level:((L=t.find(B=>B.id===P))==null?void 0:L.level)??2,rewards:[{type:"points",value:100,icon:"star"}]},O=t.map(B=>B.id===P?{...B,connections:[...B.connections,j]}:B);e==null||e([...O,I])},x=(P,R)=>{const j=t.map(I=>I.id===P?{...I,...R}:I);e==null||e(j)},E=P=>{const R=P.active.id,j=t.find(I=>I.id===R);j&&(p(j.position),c(R))},S=reactExports.useCallback(P=>{const{active:R,delta:j}=P;if(!R||!l||!d)return;const I=R.id,O=t.map(L=>L.id===I?{...L,position:{x:d.x+j.x,y:d.y+j.y}}:L);e(O)},[t,l,d,e]),k=P=>{const{active:R,delta:j}=P;if(!R||!d)return;const I=R.id;c(null),p(null);const O=t.map(L=>L.id===I?{...L,position:{x:d.x+j.x,y:d.y+j.y}}:L);e(O)},C=reactExports.useMemo(()=>t.flatMap(P=>P.connections.map(R=>jsxRuntimeExports.jsx(Xarrow,{start:P.id,end:R,path:"smooth",startAnchor:"right",endAnchor:"left",showHead:!0,strokeWidth:2,color:P.status==="completed"?"#22c55e":"#6366f1",dashness:P.status==="locked",curveness:.3},`${P.id}-${R}`))),[t]);return jsxRuntimeExports.jsxs("div",{className:"relative w-full bg-gradient-to-br from-gray-50 to-indigo-50 dark:from-gray-900 dark:to-indigo-900/30 rounded-xl shadow-inner",children:[jsxRuntimeExports.jsxs("div",{className:"absolute top-4 left-4 z-10 flex items-center space-x-2 text-gray-600 dark:text-gray-300",children:[jsxRuntimeExports.jsx(Compass,{className:"w-5 h-5"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:"學習地圖"})]}),jsxRuntimeExports.jsx("div",{className:"min-h-[600px] relative p-8",style:{minWidth:"1200px",touchAction:"none",overflow:s?"visible":"hidden"},children:jsxRuntimeExports.jsxs(libExports.Xwrapper,{children:[C,jsxRuntimeExports.jsx(DndContext,{onDragStart:E,onDragMove:S,onDragEnd:k,children:t.map(P=>jsxRuntimeExports.jsx(Node$1,{node:P,nodes:t,onNodeComplete:g,onAddBranch:y,onEditNode:x,showRewardAnimation:a,isStudent:r,isEditable:n,isDragging:P.id===l,dragStartPosition:d,allowDragOut:s},P.id))})]})})]})},initialNodes=[{id:"science-basics",title:"基本科學概念",description:"理解基本科學概念和原理",status:"unlocked",requirements:[],position:{x:100,y:100},connections:["observation-skills"],level:1,rewards:[{type:"points",value:100,icon:"star"}]},{id:"observation-skills",title:"觀察能力培養",description:"培養科學觀察能力和方法",status:"locked",requirements:["science-basics"],position:{x:400,y:100},connections:["experiment-methods"],level:2,rewards:[{type:"points",value:150,icon:"star"}]},{id:"experiment-methods",title:"實驗方法學習",description:"學習基礎實驗方法和步驟",status:"locked",requirements:["observation-skills"],position:{x:700,y:100},connections:[],level:3,rewards:[{type:"points",value:200,icon:"star"}]}],CurriculumContext=reactExports.createContext(null),CurriculumProvider=({children:t})=>{const[e,r]=reactExports.useState(initialNodes),n=(s,a)=>{r(o=>o.map(l=>l.id===s?{...l,status:a}:l))};return jsxRuntimeExports.jsx(CurriculumContext.Provider,{value:{nodes:e,setNodes:r,updateNodeStatus:n},children:t})},useCurriculum=()=>{const t=reactExports.useContext(CurriculumContext);if(!t)throw new Error("useCurriculum must be used within a CurriculumProvider");return t},MentorCurriculum=()=>{const{nodes:t,setNodes:e}=useCurriculum();return jsxRuntimeExports.jsx(PageLayout,{title:"教學規劃與任務管理",children:jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsx(CurriculumPlanner,{}),jsxRuntimeExports.jsx(LearningMap,{nodes:t,onNodesChange:e,isEditable:!0,allowDragOut:!1})]})})},WeeklyTaskColumns=({weeks:t,onAssignTask:e,onRemoveTask:r})=>{const{nodes:n}=useCurriculum(),s=a=>t.some(o=>o.tasks.some(l=>l.id===a));return jsxRuntimeExports.jsx("div",{className:"grid grid-cols-4 gap-4 h-full",children:t.map(a=>jsxRuntimeExports.jsxs("div",{className:"week-task-column bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg flex flex-col",onDragOver:o=>{o.preventDefault();const l=o.dataTransfer.getData("text/plain");s(l)||o.currentTarget.classList.add("bg-gray-100","dark:bg-gray-700")},onDragLeave:o=>{o.currentTarget.contains(o.relatedTarget)||o.currentTarget.classList.remove("bg-gray-100","dark:bg-gray-700")},onDrop:o=>{o.preventDefault(),o.currentTarget.classList.remove("bg-gray-100","dark:bg-gray-700");const l=o.dataTransfer.getData("text/plain");s(l)||e(l,a.id)},children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-2",children:[jsxRuntimeExports.jsxs("h3",{className:"font-medium text-gray-900 dark:text-white text-sm",children:["第 ",a.id," 週"]}),jsxRuntimeExports.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[a.tasks.length," 個任務"]})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 space-y-2 overflow-y-auto",children:a.tasks.map(o=>jsxRuntimeExports.jsx("div",{className:"bg-white dark:bg-gray-800 p-2 rounded shadow-sm",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:o.title}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:o.description}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[jsxRuntimeExports.jsx("span",{className:"text-xs px-1.5 py-0.5 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-800 dark:text-indigo-300 rounded",children:o.subject}),o.progress>0&&jsxRuntimeExports.jsxs("span",{className:"text-xs text-gray-500",children:[o.progress,"%"]}),o.endDate&&jsxRuntimeExports.jsxs("span",{className:"text-xs text-gray-500",children:["截止: ",new Date(o.endDate).toLocaleDateString()]})]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>r(o.id,a.id),className:"ml-2 p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:jsxRuntimeExports.jsx(Trash2,{size:14})})]})},o.id))})]},a.id))})},PlannerContext=reactExports.createContext(void 0),PlannerProvider=({children:t})=>{const[e,r]=reactExports.useState([]),[n,s]=reactExports.useState([]),[a,o]=reactExports.useState([]),{nodes:l}=useCurriculum(),c=(x,E)=>{r(S=>S.map(k=>{if(k.id===E){const C=n.find(P=>P.id===x);return C?{...k,tasks:[...k.tasks,{...C,weekId:E}]}:k}return k}))},d=(x,E)=>{r(S=>S.map(k=>k.id===E?{...k,tasks:k.tasks.filter(C=>C.id!==x)}:k))},p=(x,E)=>{s(S=>S.map(k=>k.id===x?{...k,status:E}:k)),r(S=>S.map(k=>({...k,tasks:k.tasks.map(C=>C.id===x?{...C,status:E}:C)})))},g=async({weekId:x,taskIds:E,studentIds:S})=>{const k=S.flatMap(C=>E.map(P=>({id:`${P}-${C}-${x}`,taskId:P,studentId:C,weekId:x,status:"pending",assignedAt:new Date().toISOString(),assignedBy:"current-teacher-id"})));o(C=>[...C,...k]),E.forEach(C=>{p(C,"in_progress")})};React.useEffect(()=>{if(e.length===0){const x=Array.from({length:8},(E,S)=>({id:S+1,tasks:[],nodeIds:[],subjectId:"",creatorId:"current-teacher-id",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}));r(x)}},[]);const y={weeks:e,tasks:n,assignments:a,assignTaskToWeek:c,removeTaskFromWeek:d,updateTaskStatus:p,assignTasksToStudents:g};return jsxRuntimeExports.jsx(PlannerContext.Provider,{value:y,children:t})},usePlanner=()=>{const t=reactExports.useContext(PlannerContext);if(t===void 0)throw new Error("usePlanner must be used within a PlannerProvider");return t},TaskPlannerContent=()=>{const{weeks:t,assignments:e}=usePlanner(),{nodes:r,setNodes:n,updateNodeStatus:s}=useCurriculum();return reactExports.useEffect(()=>{e.forEach(a=>{if(a.status==="accepted"){const o=t.find(c=>c.id===a.weekId),l=o==null?void 0:o.tasks.find(c=>c.id===a.taskId);l!=null&&l.courseId&&s(l.courseId,"completed")}})},[e,t,s]),jsxRuntimeExports.jsx(PageLayout,{title:"任務規劃",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col h-[calc(100vh-64px-60px)] overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"flex-1 min-h-[300px] p-4 overflow-y-auto",children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm h-full p-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"週任務規劃"}),jsxRuntimeExports.jsx(WeeklyTaskColumns,{weeks:t,onAssignTask:(a,o)=>{},onRemoveTask:(a,o)=>{}})]})}),jsxRuntimeExports.jsx("div",{className:"h-1/2 min-h-[300px] p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm h-full p-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"學習地圖"}),jsxRuntimeExports.jsx(LearningMap,{nodes:r,onNodesChange:n,isEditable:!0,allowDragOut:!0})]})})]})})},MentorTaskPlanner=()=>jsxRuntimeExports.jsx(PlannerProvider,{children:jsxRuntimeExports.jsx(CurriculumProvider,{children:jsxRuntimeExports.jsx(TaskPlannerContent,{})})}),GOAL_CATEGORIES={LEARNING:"learning",PERSONAL:"personal",PROJECT:"project"},GOAL_STATUSES={ARCHIVED:"archived"},goalTemplates=[{icon:React.createElement(Brain,{className:"h-5 w-5 text-purple-500"}),title:"學習目標",description:"設定特定科目或技能的學習目標",category:GOAL_CATEGORIES.LEARNING,tagColor:"purple"},{icon:React.createElement(Target,{className:"h-5 w-5 text-blue-500"}),title:"個人成長",description:"培養習慣、發展興趣或自我提升",category:GOAL_CATEGORIES.PERSONAL,tagColor:"blue"},{icon:React.createElement(Sparkles,{className:"h-5 w-5 text-green-500"}),title:"專案計畫",description:"規劃並執行一個完整的學習專案",category:GOAL_CATEGORIES.PROJECT,tagColor:"green"},{icon:React.createElement(PartyPopper,{className:"h-5 w-5 text-orange-500"}),title:"活動規劃",description:"規劃各種有趣的活動，從比賽參與到節日慶祝，培養規劃和組織能力",category:GOAL_CATEGORIES.PROJECT,tagColor:"orange",suggestedActions:["確定活動類型和目的","選擇時間和地點","列出所需準備項目","安排活動流程","準備預算計畫","邀請參與人員"]}],createStoreImpl=t=>{let e;const r=new Set,n=(d,p)=>{const g=typeof d=="function"?d(e):d;if(!Object.is(g,e)){const y=e;e=p??(typeof g!="object"||g===null)?g:Object.assign({},e,g),r.forEach(x=>x(e,y))}},s=()=>e,l={setState:n,getState:s,getInitialState:()=>c,subscribe:d=>(r.add(d),()=>r.delete(d))},c=e=t(n,s,l);return l},createStore=t=>t?createStoreImpl(t):createStoreImpl,identity=t=>t;function useStore(t,e=identity){const r=React.useSyncExternalStore(t.subscribe,()=>e(t.getState()),()=>e(t.getInitialState()));return React.useDebugValue(r),r}const createImpl=t=>{const e=createStore(t),r=n=>useStore(e,n);return Object.assign(r,e),r},create=t=>t?createImpl(t):createImpl,STORAGE_KEY="self_learning_goals",isDefaultGoal=t=>initialGoals.some(e=>e.id===t),initialGoals=[{id:"1",title:"探索唐詩之美",description:"透過詩歌感受唐代文人的情感與智慧",status:"in-progress",steps:[{id:"1-1",title:"認識詩的韻律",tasks:[{id:"1-1-1",title:"找出詩中的押韻字",status:"done",completedAt:new Date("2024-03-15").toISOString()},{id:"1-1-2",title:"用節奏朗讀詩句",status:"in_progress"}]},{id:"1-2",title:"感受詩的意境",tasks:[{id:"1-2-1",title:"畫出詩中的畫面",status:"in_progress"},{id:"1-2-2",title:"分享詩中的情感",status:"todo"}]},{id:"1-3",title:"探索詩的典故",tasks:[{id:"1-3-1",title:"找出詩中的歷史故事",status:"todo"},{id:"1-3-2",title:"創作自己的典故",status:"todo"}]},{id:"1-4",title:"創作詩的想像",tasks:[{id:"1-4-1",title:"用現代語言改寫古詩",status:"todo"},{id:"1-4-2",title:"創作自己的詩句",status:"todo"}]}]},{id:"2",title:"探索分數的奧秘",description:"透過生活情境理解分數的概念",status:"active",steps:[{id:"2-1",title:"生活中的分數",tasks:[{id:"2-1-1",title:"找出生活中的分數例子",status:"done",completedAt:new Date("2024-03-10").toISOString()},{id:"2-1-2",title:"用圖片表示分數",status:"in_progress"},{id:"2-1-3",title:"分享生活中的分數應用",status:"done",completedAt:new Date("2024-03-12").toISOString()}]},{id:"2-2",title:"分數的比較",tasks:[{id:"2-2-1",title:"比較不同分數的大小",status:"done",completedAt:new Date("2024-03-15").toISOString()},{id:"2-2-2",title:"用圖形解釋比較結果",status:"in_progress"}]},{id:"2-3",title:"分數的運算",tasks:[{id:"2-3-1",title:"學習分數加法",status:"in_progress"},{id:"2-3-2",title:"學習分數減法",status:"todo"},{id:"2-3-3",title:"學習分數乘法",status:"in_progress"},{id:"2-3-4",title:"學習分數除法",status:"todo"}]},{id:"2-4",title:"分數的應用",tasks:[{id:"2-4-1",title:"設計分數遊戲",status:"todo"},{id:"2-4-2",title:"用分數解決生活問題",status:"todo"}]}]},{id:"3",title:"探索英語故事創作",description:"透過故事學習英語表達",status:"active",steps:[{id:"3-1",title:"故事元素探索",tasks:[{id:"3-1-1",title:"認識故事中的角色",status:"done",completedAt:new Date("2024-03-18").toISOString()},{id:"3-1-2",title:"找出故事中的場景",status:"in_progress"}]},{id:"3-2",title:"故事結構理解",tasks:[{id:"3-2-1",title:"分析故事開始、中間、結尾",status:"in_progress"},{id:"3-2-2",title:"找出故事中的轉折點",status:"todo"}]},{id:"3-3",title:"故事詞彙收集",tasks:[{id:"3-3-1",title:"收集故事中的動作詞",status:"todo"},{id:"3-3-2",title:"學習描述性詞彙",status:"todo"}]},{id:"3-4",title:"故事創作實踐",tasks:[{id:"3-4-1",title:"創作簡單的故事大綱",status:"todo"},{id:"3-4-2",title:"用英語寫出故事",status:"todo"}]}]},{id:"4",title:"探索植物生長",description:"透過觀察了解植物的生命週期",status:"active",steps:[{id:"4-1",title:"種子探索",tasks:[{id:"4-1-1",title:"觀察不同種子的形狀",status:"done",completedAt:new Date("2024-03-05").toISOString()},{id:"4-1-2",title:"記錄種子的特徵",status:"in_progress"}]},{id:"4-2",title:"發芽過程",tasks:[{id:"4-2-1",title:"觀察種子發芽的變化",status:"in_progress"},{id:"4-2-2",title:"測量幼苗的生長",status:"todo"}]},{id:"4-3",title:"葉子研究",tasks:[{id:"4-3-1",title:"觀察葉子的形狀和顏色",status:"todo"},{id:"4-3-2",title:"研究葉子的功能",status:"todo"}]},{id:"4-4",title:"開花結果",tasks:[{id:"4-4-1",title:"觀察花朵的結構",status:"todo"},{id:"4-4-2",title:"記錄果實的形成",status:"todo"}]}]},{id:"5",title:"探索色彩藝術",description:"透過色彩認識藝術表現",status:"active",steps:[{id:"5-1",title:"色彩探索",tasks:[{id:"5-1-1",title:"認識基本色彩",status:"done",completedAt:new Date("2024-03-15").toISOString()},{id:"5-1-2",title:"混合不同顏色",status:"in_progress"}]},{id:"5-2",title:"色彩情感",tasks:[{id:"5-2-1",title:"用顏色表達心情",status:"in_progress"},{id:"5-2-2",title:"創作情緒色彩畫",status:"todo"}]},{id:"5-3",title:"色彩構圖",tasks:[{id:"5-3-1",title:"學習色彩搭配",status:"todo"},{id:"5-3-2",title:"創作色彩構圖",status:"todo"}]},{id:"5-4",title:"色彩故事",tasks:[{id:"5-4-1",title:"用色彩講述故事",status:"todo"},{id:"5-4-2",title:"創作色彩連環畫",status:"todo"}]}]},{id:"6",title:"探索身體運動",description:"透過運動了解身體機能",status:"active",steps:[{id:"6-1",title:"身體探索",tasks:[{id:"6-1-1",title:"認識身體部位",status:"done",completedAt:new Date("2024-03-20").toISOString()},{id:"6-1-2",title:"了解身體機能",status:"in_progress"}]},{id:"6-2",title:"基礎運動",tasks:[{id:"6-2-1",title:"學習基本動作",status:"in_progress"},{id:"6-2-2",title:"練習協調性",status:"todo"}]},{id:"6-3",title:"運動技能",tasks:[{id:"6-3-1",title:"學習運動技巧",status:"todo"},{id:"6-3-2",title:"練習運動組合",status:"todo"}]},{id:"6-4",title:"運動應用",tasks:[{id:"6-4-1",title:"設計運動遊戲",status:"todo"},{id:"6-4-2",title:"參與運動競賽",status:"todo"}]}]}],getInitialGoals=()=>{if(typeof window>"u")return initialGoals;try{const t=localStorage.getItem(STORAGE_KEY);return t?JSON.parse(t).map(r=>({...r,steps:r.steps.map(n=>({...n,tasks:n.tasks.map(s=>({...s,completedAt:s.completedAt?new Date(s.completedAt).toISOString():void 0}))}))})):initialGoals}catch(t){return console.error("Failed to load goals from localStorage:",t),initialGoals}},saveGoals=t=>{if(!(typeof window>"u"))try{localStorage.setItem(STORAGE_KEY,JSON.stringify(t))}catch(e){console.error("Failed to save goals to localStorage:",e)}},useGoalStore=create((t,e)=>({goals:getInitialGoals(),selectedGoalId:null,setSelectedGoalId:r=>t({selectedGoalId:r}),addGoal:r=>t(n=>{const s={...r,id:r.id||crypto.randomUUID()},a={goals:[...n.goals,s]};return saveGoals(a.goals),a}),updateGoal:r=>t(n=>{const s={goals:n.goals.map(a=>a.id===r.id?r:a)};return saveGoals(s.goals),s}),addStep:(r,n)=>{let s=null;return t(a=>{if(!a.goals.find(c=>c.id===r))return a;s={...n,id:crypto.randomUUID(),tasks:n.tasks||[]};const l={goals:a.goals.map(c=>c.id===r?{...c,steps:[...c.steps,s]}:c)};return saveGoals(l.goals),l}),s},updateStep:(r,n)=>{let s=null;return t(a=>{const o=a.goals.find(d=>d.id===r);if(!o||!o.steps.find(d=>d.id===n.id))return a;s=n;const c={goals:a.goals.map(d=>d.id===r?{...d,steps:d.steps.map(p=>p.id===n.id?s:p)}:d)};return saveGoals(c.goals),c}),s},addTask:(r,n,s)=>{let a=null;return t(o=>{const l=o.goals.find(p=>p.id===r);if(!l)throw new Error(`Goal ${r} not found`);if(!l.steps.find(p=>p.id===n))throw new Error(`Step ${n} not found in goal ${r}`);a={...s,id:crypto.randomUUID()};const d={goals:o.goals.map(p=>p.id===r?{...p,steps:p.steps.map(g=>g.id===n?{...g,tasks:[...g.tasks,a]}:g)}:p)};return saveGoals(d.goals),d}),a},updateTask:(r,n,s)=>{let a=null;return console.log("🔍 goalStore.updateTask 開始",{goalId:r,stepId:n,task:s}),t(o=>{const l=o.goals.find(g=>g.id===r);if(!l)return console.log("❌ goalStore.updateTask 失敗：找不到目標",{goalId:r}),o;const c=l.steps.find(g=>g.id===n);if(!c)return console.log("❌ goalStore.updateTask 失敗：找不到步驟",{stepId:n}),o;if(!c.tasks.find(g=>g.id===s.id))return console.log("❌ goalStore.updateTask 失敗：找不到任務",{taskId:s.id}),o;a=s,console.log("✅ goalStore.updateTask 更新任務",{updatedTask:a});const p={goals:o.goals.map(g=>g.id===r?{...g,steps:g.steps.map(y=>y.id===n?{...y,tasks:y.tasks.map(x=>x.id===s.id?a:x)}:y)}:g)};return saveGoals(p.goals),p}),console.log("🔄 goalStore.updateTask 結果",{updatedTask:a}),a},setFocusElement:(r,n)=>t(s=>{const a={goals:s.goals.map(o=>o.id===r?{...o,focusElement:n}:o)};return saveGoals(a.goals),a}),dump:r=>{const n=e();r&&n.goals.find(a=>a.id===r)}})),SUBJECTS={CHINESE:"國語",ENGLISH:"英語",MATH:"數學",SCIENCE:"自然",SOCIAL:"社會",ARTS:"藝術",PE:"體育",CUSTOM:"自訂"},TaskItem=({task:t,onStatusChange:e,onEdit:r})=>{const n=a=>{switch(a){case"high":return"text-error-500";case"medium":return"text-warning-500";case"low":return"text-success-500";default:return"text-gray-500"}},s=a=>{switch(a){case"explore":return"bg-primary-100 text-primary-700";case"work":return"bg-secondary-100 text-secondary-700";case"present":return"bg-accent-100 text-accent-700";default:return"bg-gray-100 text-gray-700"}};return jsxRuntimeExports.jsxs("div",{className:"flex items-center p-2 hover:bg-gray-50 rounded-md",children:[jsxRuntimeExports.jsx("div",{onClick:e,className:"mr-3 flex-shrink-0 cursor-pointer",role:"button",tabIndex:0,onKeyPress:a=>{(a.key==="Enter"||a.key===" ")&&e()},children:t.status==="done"?jsxRuntimeExports.jsx(CircleCheck,{className:"h-5 w-5 text-success-500"}):jsxRuntimeExports.jsx(Circle,{className:"h-5 w-5 text-gray-300"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("p",{className:`text-sm ${t.status==="done"?"text-gray-500 line-through":"text-gray-900"}`,children:t.title}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[t.dueDate&&jsxRuntimeExports.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[jsxRuntimeExports.jsx(Clock,{className:"h-3 w-3 mr-1"}),format(new Date(t.dueDate),"MM/dd")]}),t.priority&&jsxRuntimeExports.jsxs("div",{className:`flex items-center text-xs ${n(t.priority)}`,children:[jsxRuntimeExports.jsx(Flag,{className:"h-3 w-3 mr-1"}),t.priority]}),t.role&&jsxRuntimeExports.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${s(t.role)}`,children:[jsxRuntimeExports.jsx(User,{className:"h-3 w-3 mr-1"}),t.role]})]})]}),jsxRuntimeExports.jsx("div",{onClick:r,className:"ml-2 p-1 text-gray-400 hover:text-gray-600 cursor-pointer",role:"button",tabIndex:0,onKeyPress:a=>{(a.key==="Enter"||a.key===" ")&&r()},children:jsxRuntimeExports.jsx(Pen,{className:"h-4 w-4"})})]})},StepItem=({step:t,isExpanded:e,onToggle:r,onTaskStatusChange:n,onTaskEdit:s,onAddTask:a})=>jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[jsxRuntimeExports.jsxs("button",{className:"w-full px-4 py-3 flex items-center justify-between text-left",onClick:r,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[e?jsxRuntimeExports.jsx(ChevronDown,{className:"h-5 w-5 text-gray-400 mr-2"}):jsxRuntimeExports.jsx(ChevronRight,{className:"h-5 w-5 text-gray-400 mr-2"}),jsxRuntimeExports.jsx("span",{className:"font-medium text-gray-900",children:t.title})]}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-500",children:[t.tasks.filter(o=>o.status==="done").length," /"," ",t.tasks.length," 個任務"]})]}),jsxRuntimeExports.jsx(AnimatePresence,{children:e&&jsxRuntimeExports.jsx(motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:jsxRuntimeExports.jsxs("div",{className:"px-4 pb-3 space-y-2",children:[t.tasks.map(o=>jsxRuntimeExports.jsx(TaskItem,{task:o,onStatusChange:()=>n(o),onEdit:()=>s(o)},o.id)),jsxRuntimeExports.jsxs("button",{onClick:a,className:"w-full mt-2 py-2 flex items-center justify-center text-sm text-gray-500 hover:text-gray-700",children:[jsxRuntimeExports.jsx(Plus,{className:"h-4 w-4 mr-1"}),"新增任務"]})]})})})]});var lottie$2={exports:{}},lottie$1=lottie$2.exports,hasRequiredLottie;function requireLottie(){return hasRequiredLottie||(hasRequiredLottie=1,function(module,exports){typeof document<"u"&&typeof navigator<"u"&&function(t,e){module.exports=e()}(lottie$1,function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(e){_useWebWorker=!!e},getWebWorker=function(){return _useWebWorker},setLocationHref=function(e){locationHref=e},getLocationHref=function(){return locationHref};function createTag(t){return document.createElement(t)}function extendPrototype(t,e){var r,n=t.length,s;for(r=0;r<n;r+=1){s=t[r].prototype;for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e.prototype[a]=s[a])}}function getDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)}function createProxyFunction(t){function e(){}return e.prototype=t,e}var audioControllerFactory=function(){function t(e){this.audios=[],this.audioFactory=e,this._volume=1,this._isMuted=!1}return t.prototype={addAudio:function(r){this.audios.push(r)},pause:function(){var r,n=this.audios.length;for(r=0;r<n;r+=1)this.audios[r].pause()},resume:function(){var r,n=this.audios.length;for(r=0;r<n;r+=1)this.audios[r].resume()},setRate:function(r){var n,s=this.audios.length;for(n=0;n<s;n+=1)this.audios[n].setRate(r)},createAudio:function(r){return this.audioFactory?this.audioFactory(r):window.Howl?new window.Howl({src:[r]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(r){this.audioFactory=r},setVolume:function(r){this._volume=r,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var r,n=this.audios.length;for(r=0;r<n;r+=1)this.audios[r].volume(this._volume*(this._isMuted?0:1))}},function(){return new t}}(),createTypedArray=function(){function t(r,n){var s=0,a=[],o;switch(r){case"int16":case"uint8c":o=1;break;default:o=1.1;break}for(s=0;s<n;s+=1)a.push(o);return a}function e(r,n){return r==="float32"?new Float32Array(n):r==="int16"?new Int16Array(n):r==="uint8c"?new Uint8ClampedArray(n):t(r,n)}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?e:t}();function createSizedArray(t){return Array.apply(null,{length:t})}function _typeof$6(t){"@babel/helpers - typeof";return _typeof$6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$6(t)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var t=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],e,r=t.length;for(e=0;e<r;e+=1)BMMath[t[e]]=Math[t[e]]})(),BMMath.random=Math.random,BMMath.abs=function(t){var e=_typeof$6(t);if(e==="object"&&t.length){var r=createSizedArray(t.length),n,s=t.length;for(n=0;n<s;n+=1)r[n]=Math.abs(t[n]);return r}return Math.abs(t)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(t){t.style.position="absolute",t.style.top=0,t.style.left=0,t.style.display="block",t.style.transformOrigin="0 0",t.style.webkitTransformOrigin="0 0",t.style.backfaceVisibility="visible",t.style.webkitBackfaceVisibility="visible",t.style.transformStyle="preserve-3d",t.style.webkitTransformStyle="preserve-3d",t.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(t,e,r,n){this.type=t,this.currentTime=e,this.totalTime=r,this.direction=n<0?-1:1}function BMCompleteEvent(t,e){this.type=t,this.direction=e<0?-1:1}function BMCompleteLoopEvent(t,e,r,n){this.type=t,this.currentLoop=r,this.totalLoops=e,this.direction=n<0?-1:1}function BMSegmentStartEvent(t,e,r){this.type=t,this.firstFrame=e,this.totalFrames=r}function BMDestroyEvent(t,e){this.type=t,this.target=e}function BMRenderFrameErrorEvent(t,e){this.type="renderFrameError",this.nativeError=t,this.currentTime=e}function BMConfigErrorEvent(t){this.type="configError",this.nativeError=t}var createElementID=function(){var t=0;return function(){return t+=1,idPrefix$1+"__lottie_element_"+t}}();function HSVtoRGB(t,e,r){var n,s,a,o,l,c,d,p;switch(o=Math.floor(t*6),l=t*6-o,c=r*(1-e),d=r*(1-l*e),p=r*(1-(1-l)*e),o%6){case 0:n=r,s=p,a=c;break;case 1:n=d,s=r,a=c;break;case 2:n=c,s=r,a=p;break;case 3:n=c,s=d,a=r;break;case 4:n=p,s=c,a=r;break;case 5:n=r,s=c,a=d;break}return[n,s,a]}function RGBtoHSV(t,e,r){var n=Math.max(t,e,r),s=Math.min(t,e,r),a=n-s,o,l=n===0?0:a/n,c=n/255;switch(n){case s:o=0;break;case t:o=e-r+a*(e<r?6:0),o/=6*a;break;case e:o=r-t+a*2,o/=6*a;break;case r:o=t-e+a*4,o/=6*a;break}return[o,l,c]}function addSaturationToRGB(t,e){var r=RGBtoHSV(t[0]*255,t[1]*255,t[2]*255);return r[1]+=e,r[1]>1?r[1]=1:r[1]<=0&&(r[1]=0),HSVtoRGB(r[0],r[1],r[2])}function addBrightnessToRGB(t,e){var r=RGBtoHSV(t[0]*255,t[1]*255,t[2]*255);return r[2]+=e,r[2]>1?r[2]=1:r[2]<0&&(r[2]=0),HSVtoRGB(r[0],r[1],r[2])}function addHueToRGB(t,e){var r=RGBtoHSV(t[0]*255,t[1]*255,t[2]*255);return r[0]+=e/360,r[0]>1?r[0]-=1:r[0]<0&&(r[0]+=1),HSVtoRGB(r[0],r[1],r[2])}var rgbToHex=function(){var t=[],e,r;for(e=0;e<256;e+=1)r=e.toString(16),t[e]=r.length===1?"0"+r:r;return function(n,s,a){return n<0&&(n=0),s<0&&(s=0),a<0&&(a=0),"#"+t[n]+t[s]+t[a]}}(),setSubframeEnabled=function(e){subframeEnabled=!!e},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(e){expressionsPlugin=e},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(e){expressionsInterfaces=e},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(e){defaultCurveSegments=e},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(e){idPrefix$1=e};function createNS(t){return document.createElementNS(svgNS,t)}function _typeof$5(t){"@babel/helpers - typeof";return _typeof$5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$5(t)}var dataManager=function(){var t=1,e=[],r,n,s={onmessage:function(){},postMessage:function(x){r({data:x})}},a={postMessage:function(x){s.onmessage({data:x})}};function o(y){if(window.Worker&&window.Blob&&getWebWorker()){var x=new Blob(["var _workerSelf = self; self.onmessage = ",y.toString()],{type:"text/javascript"}),E=URL.createObjectURL(x);return new Worker(E)}return r=y,s}function l(){n||(n=o(function(x){function E(){function k(Y,G){var q,N,$=Y.length,V,z,ne,pe;for(N=0;N<$;N+=1)if(q=Y[N],"ks"in q&&!q.completed){if(q.completed=!0,q.hasMask){var xe=q.masksProperties;for(z=xe.length,V=0;V<z;V+=1)if(xe[V].pt.k.i)I(xe[V].pt.k);else for(pe=xe[V].pt.k.length,ne=0;ne<pe;ne+=1)xe[V].pt.k[ne].s&&I(xe[V].pt.k[ne].s[0]),xe[V].pt.k[ne].e&&I(xe[V].pt.k[ne].e[0])}q.ty===0?(q.layers=R(q.refId,G),k(q.layers,G)):q.ty===4?j(q.shapes):q.ty===5&&fe(q)}}function C(Y,G){if(Y){var q=0,N=Y.length;for(q=0;q<N;q+=1)Y[q].t===1&&(Y[q].data.layers=R(Y[q].data.refId,G),k(Y[q].data.layers,G))}}function P(Y,G){for(var q=0,N=G.length;q<N;){if(G[q].id===Y)return G[q];q+=1}return null}function R(Y,G){var q=P(Y,G);return q?q.layers.__used?JSON.parse(JSON.stringify(q.layers)):(q.layers.__used=!0,q.layers):null}function j(Y){var G,q=Y.length,N,$;for(G=q-1;G>=0;G-=1)if(Y[G].ty==="sh")if(Y[G].ks.k.i)I(Y[G].ks.k);else for($=Y[G].ks.k.length,N=0;N<$;N+=1)Y[G].ks.k[N].s&&I(Y[G].ks.k[N].s[0]),Y[G].ks.k[N].e&&I(Y[G].ks.k[N].e[0]);else Y[G].ty==="gr"&&j(Y[G].it)}function I(Y){var G,q=Y.i.length;for(G=0;G<q;G+=1)Y.i[G][0]+=Y.v[G][0],Y.i[G][1]+=Y.v[G][1],Y.o[G][0]+=Y.v[G][0],Y.o[G][1]+=Y.v[G][1]}function O(Y,G){var q=G?G.split("."):[100,100,100];return Y[0]>q[0]?!0:q[0]>Y[0]?!1:Y[1]>q[1]?!0:q[1]>Y[1]?!1:Y[2]>q[2]?!0:q[2]>Y[2]?!1:null}var L=function(){var Y=[4,4,14];function G(N){var $=N.t.d;N.t.d={k:[{s:$,t:0}]}}function q(N){var $,V=N.length;for($=0;$<V;$+=1)N[$].ty===5&&G(N[$])}return function(N){if(O(Y,N.v)&&(q(N.layers),N.assets)){var $,V=N.assets.length;for($=0;$<V;$+=1)N.assets[$].layers&&q(N.assets[$].layers)}}}(),B=function(){var Y=[4,7,99];return function(G){if(G.chars&&!O(Y,G.v)){var q,N=G.chars.length;for(q=0;q<N;q+=1){var $=G.chars[q];$.data&&$.data.shapes&&(j($.data.shapes),$.data.ip=0,$.data.op=99999,$.data.st=0,$.data.sr=1,$.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},G.chars[q].t||($.data.shapes.push({ty:"no"}),$.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}}(),Z=function(){var Y=[5,7,15];function G(N){var $=N.t.p;typeof $.a=="number"&&($.a={a:0,k:$.a}),typeof $.p=="number"&&($.p={a:0,k:$.p}),typeof $.r=="number"&&($.r={a:0,k:$.r})}function q(N){var $,V=N.length;for($=0;$<V;$+=1)N[$].ty===5&&G(N[$])}return function(N){if(O(Y,N.v)&&(q(N.layers),N.assets)){var $,V=N.assets.length;for($=0;$<V;$+=1)N.assets[$].layers&&q(N.assets[$].layers)}}}(),te=function(){var Y=[4,1,9];function G(N){var $,V=N.length,z,ne;for($=0;$<V;$+=1)if(N[$].ty==="gr")G(N[$].it);else if(N[$].ty==="fl"||N[$].ty==="st")if(N[$].c.k&&N[$].c.k[0].i)for(ne=N[$].c.k.length,z=0;z<ne;z+=1)N[$].c.k[z].s&&(N[$].c.k[z].s[0]/=255,N[$].c.k[z].s[1]/=255,N[$].c.k[z].s[2]/=255,N[$].c.k[z].s[3]/=255),N[$].c.k[z].e&&(N[$].c.k[z].e[0]/=255,N[$].c.k[z].e[1]/=255,N[$].c.k[z].e[2]/=255,N[$].c.k[z].e[3]/=255);else N[$].c.k[0]/=255,N[$].c.k[1]/=255,N[$].c.k[2]/=255,N[$].c.k[3]/=255}function q(N){var $,V=N.length;for($=0;$<V;$+=1)N[$].ty===4&&G(N[$].shapes)}return function(N){if(O(Y,N.v)&&(q(N.layers),N.assets)){var $,V=N.assets.length;for($=0;$<V;$+=1)N.assets[$].layers&&q(N.assets[$].layers)}}}(),ie=function(){var Y=[4,4,18];function G(N){var $,V=N.length,z,ne;for($=V-1;$>=0;$-=1)if(N[$].ty==="sh")if(N[$].ks.k.i)N[$].ks.k.c=N[$].closed;else for(ne=N[$].ks.k.length,z=0;z<ne;z+=1)N[$].ks.k[z].s&&(N[$].ks.k[z].s[0].c=N[$].closed),N[$].ks.k[z].e&&(N[$].ks.k[z].e[0].c=N[$].closed);else N[$].ty==="gr"&&G(N[$].it)}function q(N){var $,V,z=N.length,ne,pe,xe,Ce;for(V=0;V<z;V+=1){if($=N[V],$.hasMask){var ce=$.masksProperties;for(pe=ce.length,ne=0;ne<pe;ne+=1)if(ce[ne].pt.k.i)ce[ne].pt.k.c=ce[ne].cl;else for(Ce=ce[ne].pt.k.length,xe=0;xe<Ce;xe+=1)ce[ne].pt.k[xe].s&&(ce[ne].pt.k[xe].s[0].c=ce[ne].cl),ce[ne].pt.k[xe].e&&(ce[ne].pt.k[xe].e[0].c=ce[ne].cl)}$.ty===4&&G($.shapes)}}return function(N){if(O(Y,N.v)&&(q(N.layers),N.assets)){var $,V=N.assets.length;for($=0;$<V;$+=1)N.assets[$].layers&&q(N.assets[$].layers)}}}();function Q(Y){Y.__complete||(te(Y),L(Y),B(Y),Z(Y),ie(Y),k(Y.layers,Y.assets),C(Y.chars,Y.assets),Y.__complete=!0)}function fe(Y){Y.t.a.length===0&&"m"in Y.t.p}var se={};return se.completeData=Q,se.checkColors=te,se.checkChars=B,se.checkPathProperties=Z,se.checkShapes=ie,se.completeLayers=k,se}if(a.dataManager||(a.dataManager=E()),a.assetLoader||(a.assetLoader=function(){function k(P){var R=P.getResponseHeader("content-type");return R&&P.responseType==="json"&&R.indexOf("json")!==-1||P.response&&_typeof$5(P.response)==="object"?P.response:P.response&&typeof P.response=="string"?JSON.parse(P.response):P.responseText?JSON.parse(P.responseText):null}function C(P,R,j,I){var O,L=new XMLHttpRequest;try{L.responseType="json"}catch{}L.onreadystatechange=function(){if(L.readyState===4)if(L.status===200)O=k(L),j(O);else try{O=k(L),j(O)}catch(B){I&&I(B)}};try{L.open(["G","E","T"].join(""),P,!0)}catch{L.open(["G","E","T"].join(""),R+"/"+P,!0)}L.send()}return{load:C}}()),x.data.type==="loadAnimation")a.assetLoader.load(x.data.path,x.data.fullPath,function(k){a.dataManager.completeData(k),a.postMessage({id:x.data.id,payload:k,status:"success"})},function(){a.postMessage({id:x.data.id,status:"error"})});else if(x.data.type==="complete"){var S=x.data.animation;a.dataManager.completeData(S),a.postMessage({id:x.data.id,payload:S,status:"success"})}else x.data.type==="loadData"&&a.assetLoader.load(x.data.path,x.data.fullPath,function(k){a.postMessage({id:x.data.id,payload:k,status:"success"})},function(){a.postMessage({id:x.data.id,status:"error"})})}),n.onmessage=function(y){var x=y.data,E=x.id,S=e[E];e[E]=null,x.status==="success"?S.onComplete(x.payload):S.onError&&S.onError()})}function c(y,x){t+=1;var E="processId_"+t;return e[E]={onComplete:y,onError:x},E}function d(y,x,E){l();var S=c(x,E);n.postMessage({type:"loadAnimation",path:y,fullPath:window.location.origin+window.location.pathname,id:S})}function p(y,x,E){l();var S=c(x,E);n.postMessage({type:"loadData",path:y,fullPath:window.location.origin+window.location.pathname,id:S})}function g(y,x,E){l();var S=c(x,E);n.postMessage({type:"complete",animation:y,id:S})}return{loadAnimation:d,loadData:p,completeAnimation:g}}(),ImagePreloader=function(){var t=function(){var C=createTag("canvas");C.width=1,C.height=1;var P=C.getContext("2d");return P.fillStyle="rgba(0,0,0,0)",P.fillRect(0,0,1,1),C}();function e(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function r(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function n(C,P,R){var j="";if(C.e)j=C.p;else if(P){var I=C.p;I.indexOf("images/")!==-1&&(I=I.split("/")[1]),j=P+I}else j=R,j+=C.u?C.u:"",j+=C.p;return j}function s(C){var P=0,R=setInterval((function(){var j=C.getBBox();(j.width||P>500)&&(this._imageLoaded(),clearInterval(R)),P+=1}).bind(this),50)}function a(C){var P=n(C,this.assetsPath,this.path),R=createNS("image");isSafari?this.testImageLoaded(R):R.addEventListener("load",this._imageLoaded,!1),R.addEventListener("error",(function(){j.img=t,this._imageLoaded()}).bind(this),!1),R.setAttributeNS("http://www.w3.org/1999/xlink","href",P),this._elementHelper.append?this._elementHelper.append(R):this._elementHelper.appendChild(R);var j={img:R,assetData:C};return j}function o(C){var P=n(C,this.assetsPath,this.path),R=createTag("img");R.crossOrigin="anonymous",R.addEventListener("load",this._imageLoaded,!1),R.addEventListener("error",(function(){j.img=t,this._imageLoaded()}).bind(this),!1),R.src=P;var j={img:R,assetData:C};return j}function l(C){var P={assetData:C},R=n(C,this.assetsPath,this.path);return dataManager.loadData(R,(function(j){P.img=j,this._footageLoaded()}).bind(this),(function(){P.img={},this._footageLoaded()}).bind(this)),P}function c(C,P){this.imagesLoadedCb=P;var R,j=C.length;for(R=0;R<j;R+=1)C[R].layers||(!C[R].t||C[R].t==="seq"?(this.totalImages+=1,this.images.push(this._createImageData(C[R]))):C[R].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(C[R]))))}function d(C){this.path=C||""}function p(C){this.assetsPath=C||""}function g(C){for(var P=0,R=this.images.length;P<R;){if(this.images[P].assetData===C)return this.images[P].img;P+=1}return null}function y(){this.imagesLoadedCb=null,this.images.length=0}function x(){return this.totalImages===this.loadedAssets}function E(){return this.totalFootages===this.loadedFootagesCount}function S(C,P){C==="svg"?(this._elementHelper=P,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}function k(){this._imageLoaded=e.bind(this),this._footageLoaded=r.bind(this),this.testImageLoaded=s.bind(this),this.createFootageData=l.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return k.prototype={loadAssets:c,setAssetsPath:p,setPath:d,loadedImages:x,loadedFootages:E,destroy:y,getAsset:g,createImgData:o,createImageData:a,imageLoaded:e,footageLoaded:r,setCacheType:S},k}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(e,r){if(this._cbs[e])for(var n=this._cbs[e],s=0;s<n.length;s+=1)n[s](r)},addEventListener:function(e,r){return this._cbs[e]||(this._cbs[e]=[]),this._cbs[e].push(r),(function(){this.removeEventListener(e,r)}).bind(this)},removeEventListener:function(e,r){if(!r)this._cbs[e]=null;else if(this._cbs[e]){for(var n=0,s=this._cbs[e].length;n<s;)this._cbs[e][n]===r&&(this._cbs[e].splice(n,1),n-=1,s-=1),n+=1;this._cbs[e].length||(this._cbs[e]=null)}}};var markerParser=function(){function t(e){for(var r=e.split(`\r
`),n={},s,a=0,o=0;o<r.length;o+=1)s=r[o].split(":"),s.length===2&&(n[s[0]]=s[1].trim(),a+=1);if(a===0)throw new Error;return n}return function(e){for(var r=[],n=0;n<e.length;n+=1){var s=e[n],a={time:s.tm,duration:s.dr};try{a.payload=JSON.parse(e[n].cm)}catch{try{a.payload=t(e[n].cm)}catch{a.payload={name:e[n].cm}}}r.push(a)}return r}}(),ProjectInterface=function(){function t(e){this.compositions.push(e)}return function(){function e(r){for(var n=0,s=this.compositions.length;n<s;){if(this.compositions[n].data&&this.compositions[n].data.nm===r)return this.compositions[n].prepareFrame&&this.compositions[n].data.xt&&this.compositions[n].prepareFrame(this.currentFrame),this.compositions[n].compInterface;n+=1}return null}return e.compositions=[],e.currentFrame=0,e.registerComposition=t,e}}(),renderers={},registerRenderer=function(e,r){renderers[e]=r};function getRenderer(t){return renderers[t]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var t in renderers)if(renderers[t])return t;return""}function _typeof$4(t){"@babel/helpers - typeof";return _typeof$4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$4(t)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(t){(t.wrapper||t.container)&&(this.wrapper=t.wrapper||t.container);var e="svg";t.animType?e=t.animType:t.renderer&&(e=t.renderer);var r=getRenderer(e);this.renderer=new r(this,t.rendererSettings),this.imagePreloader.setCacheType(e,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=e,t.loop===""||t.loop===null||t.loop===void 0||t.loop===!0?this.loop=!0:t.loop===!1?this.loop=!1:this.loop=parseInt(t.loop,10),this.autoplay="autoplay"in t?t.autoplay:!0,this.name=t.name?t.name:"",this.autoloadSegments=Object.prototype.hasOwnProperty.call(t,"autoloadSegments")?t.autoloadSegments:!0,this.assetsPath=t.assetsPath,this.initialSegment=t.initialSegment,t.audioFactory&&this.audioController.setAudioFactory(t.audioFactory),t.animationData?this.setupAnimation(t.animationData):t.path&&(t.path.lastIndexOf("\\")!==-1?this.path=t.path.substr(0,t.path.lastIndexOf("\\")+1):this.path=t.path.substr(0,t.path.lastIndexOf("/")+1),this.fileName=t.path.substr(t.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(t.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(t){dataManager.completeAnimation(t,this.configAnimation)},AnimationItem.prototype.setData=function(t,e){e&&_typeof$4(e)!=="object"&&(e=JSON.parse(e));var r={wrapper:t,animationData:e},n=t.attributes;r.path=n.getNamedItem("data-animation-path")?n.getNamedItem("data-animation-path").value:n.getNamedItem("data-bm-path")?n.getNamedItem("data-bm-path").value:n.getNamedItem("bm-path")?n.getNamedItem("bm-path").value:"",r.animType=n.getNamedItem("data-anim-type")?n.getNamedItem("data-anim-type").value:n.getNamedItem("data-bm-type")?n.getNamedItem("data-bm-type").value:n.getNamedItem("bm-type")?n.getNamedItem("bm-type").value:n.getNamedItem("data-bm-renderer")?n.getNamedItem("data-bm-renderer").value:n.getNamedItem("bm-renderer")?n.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var s=n.getNamedItem("data-anim-loop")?n.getNamedItem("data-anim-loop").value:n.getNamedItem("data-bm-loop")?n.getNamedItem("data-bm-loop").value:n.getNamedItem("bm-loop")?n.getNamedItem("bm-loop").value:"";s==="false"?r.loop=!1:s==="true"?r.loop=!0:s!==""&&(r.loop=parseInt(s,10));var a=n.getNamedItem("data-anim-autoplay")?n.getNamedItem("data-anim-autoplay").value:n.getNamedItem("data-bm-autoplay")?n.getNamedItem("data-bm-autoplay").value:n.getNamedItem("bm-autoplay")?n.getNamedItem("bm-autoplay").value:!0;r.autoplay=a!=="false",r.name=n.getNamedItem("data-name")?n.getNamedItem("data-name").value:n.getNamedItem("data-bm-name")?n.getNamedItem("data-bm-name").value:n.getNamedItem("bm-name")?n.getNamedItem("bm-name").value:"";var o=n.getNamedItem("data-anim-prerender")?n.getNamedItem("data-anim-prerender").value:n.getNamedItem("data-bm-prerender")?n.getNamedItem("data-bm-prerender").value:n.getNamedItem("bm-prerender")?n.getNamedItem("bm-prerender").value:"";o==="false"&&(r.prerender=!1),r.path?this.setParams(r):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(t){t.op>this.animationData.op&&(this.animationData.op=t.op,this.totalFrames=Math.floor(t.op-this.animationData.ip));var e=this.animationData.layers,r,n=e.length,s=t.layers,a,o=s.length;for(a=0;a<o;a+=1)for(r=0;r<n;){if(e[r].id===s[a].id){e[r]=s[a];break}r+=1}if((t.chars||t.fonts)&&(this.renderer.globalData.fontManager.addChars(t.chars),this.renderer.globalData.fontManager.addFonts(t.fonts,this.renderer.globalData.defs)),t.assets)for(n=t.assets.length,r=0;r<n;r+=1)this.animationData.assets.push(t.assets[r]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(t){this.animationData=t;var e=getExpressionsPlugin();e&&e.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var t=this.animationData.segments;if(!t||t.length===0||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}var e=t.shift();this.timeCompleted=e.time*this.frameRate;var r=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(r,this.includeLayers.bind(this),(function(){this.trigger("data_failed")}).bind(this))},AnimationItem.prototype.loadSegments=function(){var t=this.animationData.segments;t||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(t){if(this.renderer)try{this.animationData=t,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(t),t.assets||(t.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(t.assets),this.markers=markerParser(t.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(e){this.triggerConfigError(e)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var t=getExpressionsPlugin();t&&t.initExpressions(this),this.renderer.initItems(),setTimeout((function(){this.trigger("DOMLoaded")}).bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(t,e){var r=typeof t=="number"?t:void 0,n=typeof e=="number"?e:void 0;this.renderer.updateContainerSize(r,n)},AnimationItem.prototype.setSubframe=function(t){this.isSubframeEnabled=!!t},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!(this.isLoaded===!1||!this.renderer))try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(t){this.triggerRenderFrameError(t)}},AnimationItem.prototype.play=function(t){t&&this.name!==t||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(t){t&&this.name!==t||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(t){t&&this.name!==t||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(t){t&&this.name!==t||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(t){for(var e,r=0;r<this.markers.length;r+=1)if(e=this.markers[r],e.payload&&e.payload.name===t)return e;return null},AnimationItem.prototype.goToAndStop=function(t,e,r){if(!(r&&this.name!==r)){var n=Number(t);if(isNaN(n)){var s=this.getMarkerData(t);s&&this.goToAndStop(s.time,!0)}else e?this.setCurrentRawFrameValue(t):this.setCurrentRawFrameValue(t*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(t,e,r){if(!(r&&this.name!==r)){var n=Number(t);if(isNaN(n)){var s=this.getMarkerData(t);s&&(s.duration?this.playSegments([s.time,s.time+s.duration],!0):this.goToAndStop(s.time,!0))}else this.goToAndStop(n,e,r);this.play()}},AnimationItem.prototype.advanceTime=function(t){if(!(this.isPaused===!0||this.isLoaded===!1)){var e=this.currentRawFrame+t*this.frameModifier,r=!1;e>=this.totalFrames-1&&this.frameModifier>0?!this.loop||this.playCount===this.loop?this.checkSegments(e>this.totalFrames?e%this.totalFrames:0)||(r=!0,e=this.totalFrames-1):e>=this.totalFrames?(this.playCount+=1,this.checkSegments(e%this.totalFrames)||(this.setCurrentRawFrameValue(e%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(e):e<0?this.checkSegments(e%this.totalFrames)||(this.loop&&!(this.playCount--<=0&&this.loop!==!0)?(this.setCurrentRawFrameValue(this.totalFrames+e%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0):(r=!0,e=0)):this.setCurrentRawFrameValue(e),r&&(this.setCurrentRawFrameValue(e),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(t,e){this.playCount=0,t[1]<t[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=t[0]-t[1],this.timeCompleted=this.totalFrames,this.firstFrame=t[1],this.setCurrentRawFrameValue(this.totalFrames-.001-e)):t[1]>t[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=t[1]-t[0],this.timeCompleted=this.totalFrames,this.firstFrame=t[0],this.setCurrentRawFrameValue(.001+e)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(t,e){var r=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<t?r=t:this.currentRawFrame+this.firstFrame>e&&(r=e-t)),this.firstFrame=t,this.totalFrames=e-t,this.timeCompleted=this.totalFrames,r!==-1&&this.goToAndStop(r,!0)},AnimationItem.prototype.playSegments=function(t,e){if(e&&(this.segments.length=0),_typeof$4(t[0])==="object"){var r,n=t.length;for(r=0;r<n;r+=1)this.segments.push(t[r])}else this.segments.push(t);this.segments.length&&e&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(t){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),t&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(t){return this.segments.length?(this.adjustSegment(this.segments.shift(),t),!0):!1},AnimationItem.prototype.destroy=function(t){t&&this.name!==t||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(t){this.currentRawFrame=t,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(t){this.playSpeed=t,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(t){this.playDirection=t<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(t){this.loop=t},AnimationItem.prototype.setVolume=function(t,e){e&&this.name!==e||this.audioController.setVolume(t)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(t){t&&this.name!==t||this.audioController.mute()},AnimationItem.prototype.unmute=function(t){t&&this.name!==t||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(t){var e="";if(t.e)e=t.p;else if(this.assetsPath){var r=t.p;r.indexOf("images/")!==-1&&(r=r.split("/")[1]),e=this.assetsPath+r}else e=this.path,e+=t.u?t.u:"",e+=t.p;return e},AnimationItem.prototype.getAssetData=function(t){for(var e=0,r=this.assets.length;e<r;){if(t===this.assets[e].id)return this.assets[e];e+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(t){return t?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(t,e,r){try{var n=this.renderer.getElementByPath(t);n.updateDocumentData(e,r)}catch{}},AnimationItem.prototype.trigger=function(t){if(this._cbs&&this._cbs[t])switch(t){case"enterFrame":this.triggerEvent(t,new BMEnterFrameEvent(t,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(t,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(t,new BMCompleteLoopEvent(t,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(t,new BMCompleteEvent(t,this.frameMult));break;case"segmentStart":this.triggerEvent(t,new BMSegmentStartEvent(t,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(t,new BMDestroyEvent(t,this));break;default:this.triggerEvent(t)}t==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(t,this.currentFrame,this.totalFrames,this.frameMult)),t==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(t,this.loop,this.playCount,this.frameMult)),t==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(t,this.frameMult)),t==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(t,this.firstFrame,this.totalFrames)),t==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(t,this))},AnimationItem.prototype.triggerRenderFrameError=function(t){var e=new BMRenderFrameErrorEvent(t,this.currentFrame);this.triggerEvent("error",e),this.onError&&this.onError.call(this,e)},AnimationItem.prototype.triggerConfigError=function(t){var e=new BMConfigErrorEvent(t,this.currentFrame);this.triggerEvent("error",e),this.onError&&this.onError.call(this,e)};var animationManager=function(){var t={},e=[],r=0,n=0,s=0,a=!0,o=!1;function l(G){for(var q=0,N=G.target;q<n;)e[q].animation===N&&(e.splice(q,1),q-=1,n-=1,N.isPaused||g()),q+=1}function c(G,q){if(!G)return null;for(var N=0;N<n;){if(e[N].elem===G&&e[N].elem!==null)return e[N].animation;N+=1}var $=new AnimationItem;return y($,G),$.setData(G,q),$}function d(){var G,q=e.length,N=[];for(G=0;G<q;G+=1)N.push(e[G].animation);return N}function p(){s+=1,te()}function g(){s-=1}function y(G,q){G.addEventListener("destroy",l),G.addEventListener("_active",p),G.addEventListener("_idle",g),e.push({elem:q,animation:G}),n+=1}function x(G){var q=new AnimationItem;return y(q,null),q.setParams(G),q}function E(G,q){var N;for(N=0;N<n;N+=1)e[N].animation.setSpeed(G,q)}function S(G,q){var N;for(N=0;N<n;N+=1)e[N].animation.setDirection(G,q)}function k(G){var q;for(q=0;q<n;q+=1)e[q].animation.play(G)}function C(G){var q=G-r,N;for(N=0;N<n;N+=1)e[N].animation.advanceTime(q);r=G,s&&!o?window.requestAnimationFrame(C):a=!0}function P(G){r=G,window.requestAnimationFrame(C)}function R(G){var q;for(q=0;q<n;q+=1)e[q].animation.pause(G)}function j(G,q,N){var $;for($=0;$<n;$+=1)e[$].animation.goToAndStop(G,q,N)}function I(G){var q;for(q=0;q<n;q+=1)e[q].animation.stop(G)}function O(G){var q;for(q=0;q<n;q+=1)e[q].animation.togglePause(G)}function L(G){var q;for(q=n-1;q>=0;q-=1)e[q].animation.destroy(G)}function B(G,q,N){var $=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),V,z=$.length;for(V=0;V<z;V+=1)N&&$[V].setAttribute("data-bm-type",N),c($[V],G);if(q&&z===0){N||(N="svg");var ne=document.getElementsByTagName("body")[0];ne.innerText="";var pe=createTag("div");pe.style.width="100%",pe.style.height="100%",pe.setAttribute("data-bm-type",N),ne.appendChild(pe),c(pe,G)}}function Z(){var G;for(G=0;G<n;G+=1)e[G].animation.resize()}function te(){!o&&s&&a&&(window.requestAnimationFrame(P),a=!1)}function ie(){o=!0}function Q(){o=!1,te()}function fe(G,q){var N;for(N=0;N<n;N+=1)e[N].animation.setVolume(G,q)}function se(G){var q;for(q=0;q<n;q+=1)e[q].animation.mute(G)}function Y(G){var q;for(q=0;q<n;q+=1)e[q].animation.unmute(G)}return t.registerAnimation=c,t.loadAnimation=x,t.setSpeed=E,t.setDirection=S,t.play=k,t.pause=R,t.stop=I,t.togglePause=O,t.searchAnimations=B,t.resize=Z,t.goToAndStop=j,t.destroy=L,t.freeze=ie,t.unfreeze=Q,t.setVolume=fe,t.mute=se,t.unmute=Y,t.getRegisteredAnimations=d,t}(),BezierFactory=function(){var t={};t.getBezierEasing=r;var e={};function r(P,R,j,I,O){var L=O||("bez_"+P+"_"+R+"_"+j+"_"+I).replace(/\./g,"p");if(e[L])return e[L];var B=new C([P,R,j,I]);return e[L]=B,B}var n=4,s=.001,a=1e-7,o=10,l=11,c=1/(l-1),d=typeof Float32Array=="function";function p(P,R){return 1-3*R+3*P}function g(P,R){return 3*R-6*P}function y(P){return 3*P}function x(P,R,j){return((p(R,j)*P+g(R,j))*P+y(R))*P}function E(P,R,j){return 3*p(R,j)*P*P+2*g(R,j)*P+y(R)}function S(P,R,j,I,O){var L,B,Z=0;do B=R+(j-R)/2,L=x(B,I,O)-P,L>0?j=B:R=B;while(Math.abs(L)>a&&++Z<o);return B}function k(P,R,j,I){for(var O=0;O<n;++O){var L=E(R,j,I);if(L===0)return R;var B=x(R,j,I)-P;R-=B/L}return R}function C(P){this._p=P,this._mSampleValues=d?new Float32Array(l):new Array(l),this._precomputed=!1,this.get=this.get.bind(this)}return C.prototype={get:function(R){var j=this._p[0],I=this._p[1],O=this._p[2],L=this._p[3];return this._precomputed||this._precompute(),j===I&&O===L?R:R===0?0:R===1?1:x(this._getTForX(R),I,L)},_precompute:function(){var R=this._p[0],j=this._p[1],I=this._p[2],O=this._p[3];this._precomputed=!0,(R!==j||I!==O)&&this._calcSampleValues()},_calcSampleValues:function(){for(var R=this._p[0],j=this._p[2],I=0;I<l;++I)this._mSampleValues[I]=x(I*c,R,j)},_getTForX:function(R){for(var j=this._p[0],I=this._p[2],O=this._mSampleValues,L=0,B=1,Z=l-1;B!==Z&&O[B]<=R;++B)L+=c;--B;var te=(R-O[B])/(O[B+1]-O[B]),ie=L+te*c,Q=E(ie,j,I);return Q>=s?k(R,ie,j,I):Q===0?ie:S(R,L,L+c,j,I)}},t}(),pooling=function(){function t(e){return e.concat(createSizedArray(e.length))}return{double:t}}(),poolFactory=function(){return function(t,e,r){var n=0,s=t,a=createSizedArray(s),o={newElement:l,release:c};function l(){var d;return n?(n-=1,d=a[n]):d=e(),d}function c(d){n===s&&(a=pooling.double(a),s*=2),r&&r(d),a[n]=d,n+=1}return o}}(),bezierLengthPool=function(){function t(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}return poolFactory(8,t)}(),segmentsLengthPool=function(){function t(){return{lengths:[],totalLength:0}}function e(r){var n,s=r.lengths.length;for(n=0;n<s;n+=1)bezierLengthPool.release(r.lengths[n]);r.lengths.length=0}return poolFactory(8,t,e)}();function bezFunction(){var t=Math;function e(y,x,E,S,k,C){var P=y*S+x*k+E*C-k*S-C*y-E*x;return P>-.001&&P<.001}function r(y,x,E,S,k,C,P,R,j){if(E===0&&C===0&&j===0)return e(y,x,S,k,P,R);var I=t.sqrt(t.pow(S-y,2)+t.pow(k-x,2)+t.pow(C-E,2)),O=t.sqrt(t.pow(P-y,2)+t.pow(R-x,2)+t.pow(j-E,2)),L=t.sqrt(t.pow(P-S,2)+t.pow(R-k,2)+t.pow(j-C,2)),B;return I>O?I>L?B=I-O-L:B=L-O-I:L>O?B=L-O-I:B=O-I-L,B>-1e-4&&B<1e-4}var n=function(){return function(y,x,E,S){var k=getDefaultCurveSegments(),C,P,R,j,I,O=0,L,B=[],Z=[],te=bezierLengthPool.newElement();for(R=E.length,C=0;C<k;C+=1){for(I=C/(k-1),L=0,P=0;P<R;P+=1)j=bmPow(1-I,3)*y[P]+3*bmPow(1-I,2)*I*E[P]+3*(1-I)*bmPow(I,2)*S[P]+bmPow(I,3)*x[P],B[P]=j,Z[P]!==null&&(L+=bmPow(B[P]-Z[P],2)),Z[P]=B[P];L&&(L=bmSqrt(L),O+=L),te.percents[C]=I,te.lengths[C]=O}return te.addedLength=O,te}}();function s(y){var x=segmentsLengthPool.newElement(),E=y.c,S=y.v,k=y.o,C=y.i,P,R=y._length,j=x.lengths,I=0;for(P=0;P<R-1;P+=1)j[P]=n(S[P],S[P+1],k[P],C[P+1]),I+=j[P].addedLength;return E&&R&&(j[P]=n(S[P],S[0],k[P],C[0]),I+=j[P].addedLength),x.totalLength=I,x}function a(y){this.segmentLength=0,this.points=new Array(y)}function o(y,x){this.partialLength=y,this.point=x}var l=function(){var y={};return function(x,E,S,k){var C=(x[0]+"_"+x[1]+"_"+E[0]+"_"+E[1]+"_"+S[0]+"_"+S[1]+"_"+k[0]+"_"+k[1]).replace(/\./g,"p");if(!y[C]){var P=getDefaultCurveSegments(),R,j,I,O,L,B=0,Z,te,ie=null;x.length===2&&(x[0]!==E[0]||x[1]!==E[1])&&e(x[0],x[1],E[0],E[1],x[0]+S[0],x[1]+S[1])&&e(x[0],x[1],E[0],E[1],E[0]+k[0],E[1]+k[1])&&(P=2);var Q=new a(P);for(I=S.length,R=0;R<P;R+=1){for(te=createSizedArray(I),L=R/(P-1),Z=0,j=0;j<I;j+=1)O=bmPow(1-L,3)*x[j]+3*bmPow(1-L,2)*L*(x[j]+S[j])+3*(1-L)*bmPow(L,2)*(E[j]+k[j])+bmPow(L,3)*E[j],te[j]=O,ie!==null&&(Z+=bmPow(te[j]-ie[j],2));Z=bmSqrt(Z),B+=Z,Q.points[R]=new o(Z,te),ie=te}Q.segmentLength=B,y[C]=Q}return y[C]}}();function c(y,x){var E=x.percents,S=x.lengths,k=E.length,C=bmFloor((k-1)*y),P=y*x.addedLength,R=0;if(C===k-1||C===0||P===S[C])return E[C];for(var j=S[C]>P?-1:1,I=!0;I;)if(S[C]<=P&&S[C+1]>P?(R=(P-S[C])/(S[C+1]-S[C]),I=!1):C+=j,C<0||C>=k-1){if(C===k-1)return E[C];I=!1}return E[C]+(E[C+1]-E[C])*R}function d(y,x,E,S,k,C){var P=c(k,C),R=1-P,j=t.round((R*R*R*y[0]+(P*R*R+R*P*R+R*R*P)*E[0]+(P*P*R+R*P*P+P*R*P)*S[0]+P*P*P*x[0])*1e3)/1e3,I=t.round((R*R*R*y[1]+(P*R*R+R*P*R+R*R*P)*E[1]+(P*P*R+R*P*P+P*R*P)*S[1]+P*P*P*x[1])*1e3)/1e3;return[j,I]}var p=createTypedArray("float32",8);function g(y,x,E,S,k,C,P){k<0?k=0:k>1&&(k=1);var R=c(k,P);C=C>1?1:C;var j=c(C,P),I,O=y.length,L=1-R,B=1-j,Z=L*L*L,te=R*L*L*3,ie=R*R*L*3,Q=R*R*R,fe=L*L*B,se=R*L*B+L*R*B+L*L*j,Y=R*R*B+L*R*j+R*L*j,G=R*R*j,q=L*B*B,N=R*B*B+L*j*B+L*B*j,$=R*j*B+L*j*j+R*B*j,V=R*j*j,z=B*B*B,ne=j*B*B+B*j*B+B*B*j,pe=j*j*B+B*j*j+j*B*j,xe=j*j*j;for(I=0;I<O;I+=1)p[I*4]=t.round((Z*y[I]+te*E[I]+ie*S[I]+Q*x[I])*1e3)/1e3,p[I*4+1]=t.round((fe*y[I]+se*E[I]+Y*S[I]+G*x[I])*1e3)/1e3,p[I*4+2]=t.round((q*y[I]+N*E[I]+$*S[I]+V*x[I])*1e3)/1e3,p[I*4+3]=t.round((z*y[I]+ne*E[I]+pe*S[I]+xe*x[I])*1e3)/1e3;return p}return{getSegmentsLength:s,getNewSegment:g,getPointInSegment:d,buildBezierData:l,pointOnLine2D:e,pointOnLine3D:r}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(t,e){var r=this.offsetTime,n;this.propType==="multidimensional"&&(n=createTypedArray("float32",this.pv.length));for(var s=e.lastIndex,a=s,o=this.keyframes.length-1,l=!0,c,d,p;l;){if(c=this.keyframes[a],d=this.keyframes[a+1],a===o-1&&t>=d.t-r){c.h&&(c=d),s=0;break}if(d.t-r>t){s=a;break}a<o-1?a+=1:(s=0,l=!1)}p=this.keyframesMetadata[a]||{};var g,y,x,E,S,k,C=d.t-r,P=c.t-r,R;if(c.to){p.bezierData||(p.bezierData=bez.buildBezierData(c.s,d.s||c.e,c.to,c.ti));var j=p.bezierData;if(t>=C||t<P){var I=t>=C?j.points.length-1:0;for(y=j.points[I].point.length,g=0;g<y;g+=1)n[g]=j.points[I].point[g]}else{p.__fnct?k=p.__fnct:(k=BezierFactory.getBezierEasing(c.o.x,c.o.y,c.i.x,c.i.y,c.n).get,p.__fnct=k),x=k((t-P)/(C-P));var O=j.segmentLength*x,L,B=e.lastFrame<t&&e._lastKeyframeIndex===a?e._lastAddedLength:0;for(S=e.lastFrame<t&&e._lastKeyframeIndex===a?e._lastPoint:0,l=!0,E=j.points.length;l;){if(B+=j.points[S].partialLength,O===0||x===0||S===j.points.length-1){for(y=j.points[S].point.length,g=0;g<y;g+=1)n[g]=j.points[S].point[g];break}else if(O>=B&&O<B+j.points[S+1].partialLength){for(L=(O-B)/j.points[S+1].partialLength,y=j.points[S].point.length,g=0;g<y;g+=1)n[g]=j.points[S].point[g]+(j.points[S+1].point[g]-j.points[S].point[g])*L;break}S<E-1?S+=1:l=!1}e._lastPoint=S,e._lastAddedLength=B-j.points[S].partialLength,e._lastKeyframeIndex=a}}else{var Z,te,ie,Q,fe;if(o=c.s.length,R=d.s||c.e,this.sh&&c.h!==1)if(t>=C)n[0]=R[0],n[1]=R[1],n[2]=R[2];else if(t<=P)n[0]=c.s[0],n[1]=c.s[1],n[2]=c.s[2];else{var se=createQuaternion(c.s),Y=createQuaternion(R),G=(t-P)/(C-P);quaternionToEuler(n,slerp(se,Y,G))}else for(a=0;a<o;a+=1)c.h!==1&&(t>=C?x=1:t<P?x=0:(c.o.x.constructor===Array?(p.__fnct||(p.__fnct=[]),p.__fnct[a]?k=p.__fnct[a]:(Z=c.o.x[a]===void 0?c.o.x[0]:c.o.x[a],te=c.o.y[a]===void 0?c.o.y[0]:c.o.y[a],ie=c.i.x[a]===void 0?c.i.x[0]:c.i.x[a],Q=c.i.y[a]===void 0?c.i.y[0]:c.i.y[a],k=BezierFactory.getBezierEasing(Z,te,ie,Q).get,p.__fnct[a]=k)):p.__fnct?k=p.__fnct:(Z=c.o.x,te=c.o.y,ie=c.i.x,Q=c.i.y,k=BezierFactory.getBezierEasing(Z,te,ie,Q).get,c.keyframeMetadata=k),x=k((t-P)/(C-P)))),R=d.s||c.e,fe=c.h===1?c.s[a]:c.s[a]+(R[a]-c.s[a])*x,this.propType==="multidimensional"?n[a]=fe:n=fe}return e.lastIndex=s,n}function slerp(t,e,r){var n=[],s=t[0],a=t[1],o=t[2],l=t[3],c=e[0],d=e[1],p=e[2],g=e[3],y,x,E,S,k;return x=s*c+a*d+o*p+l*g,x<0&&(x=-x,c=-c,d=-d,p=-p,g=-g),1-x>1e-6?(y=Math.acos(x),E=Math.sin(y),S=Math.sin((1-r)*y)/E,k=Math.sin(r*y)/E):(S=1-r,k=r),n[0]=S*s+k*c,n[1]=S*a+k*d,n[2]=S*o+k*p,n[3]=S*l+k*g,n}function quaternionToEuler(t,e){var r=e[0],n=e[1],s=e[2],a=e[3],o=Math.atan2(2*n*a-2*r*s,1-2*n*n-2*s*s),l=Math.asin(2*r*n+2*s*a),c=Math.atan2(2*r*a-2*n*s,1-2*r*r-2*s*s);t[0]=o/degToRads,t[1]=l/degToRads,t[2]=c/degToRads}function createQuaternion(t){var e=t[0]*degToRads,r=t[1]*degToRads,n=t[2]*degToRads,s=Math.cos(e/2),a=Math.cos(r/2),o=Math.cos(n/2),l=Math.sin(e/2),c=Math.sin(r/2),d=Math.sin(n/2),p=s*a*o-l*c*d,g=l*c*o+s*a*d,y=l*a*o+s*c*d,x=s*c*o-l*a*d;return[g,y,x,p]}function getValueAtCurrentTime(){var t=this.comp.renderedFrame-this.offsetTime,e=this.keyframes[0].t-this.offsetTime,r=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(t===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=r&&t>=r||this._caching.lastFrame<e&&t<e))){this._caching.lastFrame>=t&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var n=this.interpolateValue(t,this._caching);this.pv=n}return this._caching.lastFrame=t,this.pv}function setVValue(t){var e;if(this.propType==="unidimensional")e=t*this.mult,mathAbs(this.v-e)>1e-5&&(this.v=e,this._mdf=!0);else for(var r=0,n=this.v.length;r<n;)e=t[r]*this.mult,mathAbs(this.v[r]-e)>1e-5&&(this.v[r]=e,this._mdf=!0),r+=1}function processEffectsSequence(){if(!(this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)){if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=this._isFirstFrame;var t,e=this.effectsSequence.length,r=this.kf?this.pv:this.data.k;for(t=0;t<e;t+=1)r=this.effectsSequence[t](r);this.setVValue(r),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(t){this.effectsSequence.push(t),this.container.addDynamicProperty(this)}function ValueProperty(t,e,r,n){this.propType="unidimensional",this.mult=r||1,this.data=e,this.v=r?e.k*r:e.k,this.pv=e.k,this._mdf=!1,this.elem=t,this.container=n,this.comp=t.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(t,e,r,n){this.propType="multidimensional",this.mult=r||1,this.data=e,this._mdf=!1,this.elem=t,this.container=n,this.comp=t.comp,this.k=!1,this.kf=!1,this.frameId=-1;var s,a=e.k.length;for(this.v=createTypedArray("float32",a),this.pv=createTypedArray("float32",a),this.vel=createTypedArray("float32",a),s=0;s<a;s+=1)this.v[s]=e.k[s]*this.mult,this.pv[s]=e.k[s];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(t,e,r,n){this.propType="unidimensional",this.keyframes=e.k,this.keyframesMetadata=[],this.offsetTime=t.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=e,this.mult=r||1,this.elem=t,this.container=n,this.comp=t.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(t,e,r,n){this.propType="multidimensional";var s,a=e.k.length,o,l,c,d;for(s=0;s<a-1;s+=1)e.k[s].to&&e.k[s].s&&e.k[s+1]&&e.k[s+1].s&&(o=e.k[s].s,l=e.k[s+1].s,c=e.k[s].to,d=e.k[s].ti,(o.length===2&&!(o[0]===l[0]&&o[1]===l[1])&&bez.pointOnLine2D(o[0],o[1],l[0],l[1],o[0]+c[0],o[1]+c[1])&&bez.pointOnLine2D(o[0],o[1],l[0],l[1],l[0]+d[0],l[1]+d[1])||o.length===3&&!(o[0]===l[0]&&o[1]===l[1]&&o[2]===l[2])&&bez.pointOnLine3D(o[0],o[1],o[2],l[0],l[1],l[2],o[0]+c[0],o[1]+c[1],o[2]+c[2])&&bez.pointOnLine3D(o[0],o[1],o[2],l[0],l[1],l[2],l[0]+d[0],l[1]+d[1],l[2]+d[2]))&&(e.k[s].to=null,e.k[s].ti=null),o[0]===l[0]&&o[1]===l[1]&&c[0]===0&&c[1]===0&&d[0]===0&&d[1]===0&&(o.length===2||o[2]===l[2]&&c[2]===0&&d[2]===0)&&(e.k[s].to=null,e.k[s].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=e,this.keyframes=e.k,this.keyframesMetadata=[],this.offsetTime=t.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=r||1,this.elem=t,this.container=n,this.comp=t.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var p=e.k[0].s.length;for(this.v=createTypedArray("float32",p),this.pv=createTypedArray("float32",p),s=0;s<p;s+=1)this.v[s]=initFrame,this.pv[s]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",p)},this.addEffect=addEffect}var PropertyFactory=function(){function t(r,n,s,a,o){n.sid&&(n=r.globalData.slotManager.getProp(n));var l;if(!n.k.length)l=new ValueProperty(r,n,a,o);else if(typeof n.k[0]=="number")l=new MultiDimensionalProperty(r,n,a,o);else switch(s){case 0:l=new KeyframedValueProperty(r,n,a,o);break;case 1:l=new KeyframedMultidimensionalProperty(r,n,a,o);break}return l.effectsSequence.length&&o.addDynamicProperty(l),l}var e={getProp:t};return e}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(e){this.dynamicProperties.indexOf(e)===-1&&(this.dynamicProperties.push(e),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var e,r=this.dynamicProperties.length;for(e=0;e<r;e+=1)this.dynamicProperties[e].getValue(),this.dynamicProperties[e]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(e){this.container=e,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=function(){function t(){return createTypedArray("float32",2)}return poolFactory(8,t)}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(t,e){this.c=t,this.setLength(e);for(var r=0;r<e;)this.v[r]=pointPool.newElement(),this.o[r]=pointPool.newElement(),this.i[r]=pointPool.newElement(),r+=1},ShapePath.prototype.setLength=function(t){for(;this._maxLength<t;)this.doubleArrayLength();this._length=t},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(t,e,r,n,s){var a;switch(this._length=Math.max(this._length,n+1),this._length>=this._maxLength&&this.doubleArrayLength(),r){case"v":a=this.v;break;case"i":a=this.i;break;case"o":a=this.o;break;default:a=[];break}(!a[n]||a[n]&&!s)&&(a[n]=pointPool.newElement()),a[n][0]=t,a[n][1]=e},ShapePath.prototype.setTripleAt=function(t,e,r,n,s,a,o,l){this.setXYAt(t,e,"v",o,l),this.setXYAt(r,n,"o",o,l),this.setXYAt(s,a,"i",o,l)},ShapePath.prototype.reverse=function(){var t=new ShapePath;t.setPathData(this.c,this._length);var e=this.v,r=this.o,n=this.i,s=0;this.c&&(t.setTripleAt(e[0][0],e[0][1],n[0][0],n[0][1],r[0][0],r[0][1],0,!1),s=1);var a=this._length-1,o=this._length,l;for(l=s;l<o;l+=1)t.setTripleAt(e[a][0],e[a][1],n[a][0],n[a][1],r[a][0],r[a][1],l,!1),a-=1;return t},ShapePath.prototype.length=function(){return this._length};var shapePool=function(){function t(){return new ShapePath}function e(s){var a=s._length,o;for(o=0;o<a;o+=1)pointPool.release(s.v[o]),pointPool.release(s.i[o]),pointPool.release(s.o[o]),s.v[o]=null,s.i[o]=null,s.o[o]=null;s._length=0,s.c=!1}function r(s){var a=n.newElement(),o,l=s._length===void 0?s.v.length:s._length;for(a.setLength(l),a.c=s.c,o=0;o<l;o+=1)a.setTripleAt(s.v[o][0],s.v[o][1],s.o[o][0],s.o[o][1],s.i[o][0],s.i[o][1],o);return a}var n=poolFactory(4,t,e);return n.clone=r,n}();function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(t){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=t,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var t;for(t=0;t<this._length;t+=1)shapePool.release(this.shapes[t]);this._length=0};var shapeCollectionPool=function(){var t={newShapeCollection:s,release:a},e=0,r=4,n=createSizedArray(r);function s(){var o;return e?(e-=1,o=n[e]):o=new ShapeCollection,o}function a(o){var l,c=o._length;for(l=0;l<c;l+=1)shapePool.release(o.shapes[l]);o._length=0,e===r&&(n=pooling.double(n),r*=2),n[e]=o,e+=1}return t}(),ShapePropertyFactory=function(){var t=-999999;function e(C,P,R){var j=R.lastIndex,I,O,L,B,Z,te,ie,Q,fe,se=this.keyframes;if(C<se[0].t-this.offsetTime)I=se[0].s[0],L=!0,j=0;else if(C>=se[se.length-1].t-this.offsetTime)I=se[se.length-1].s?se[se.length-1].s[0]:se[se.length-2].e[0],L=!0;else{for(var Y=j,G=se.length-1,q=!0,N,$,V;q&&(N=se[Y],$=se[Y+1],!($.t-this.offsetTime>C));)Y<G-1?Y+=1:q=!1;if(V=this.keyframesMetadata[Y]||{},L=N.h===1,j=Y,!L){if(C>=$.t-this.offsetTime)Q=1;else if(C<N.t-this.offsetTime)Q=0;else{var z;V.__fnct?z=V.__fnct:(z=BezierFactory.getBezierEasing(N.o.x,N.o.y,N.i.x,N.i.y).get,V.__fnct=z),Q=z((C-(N.t-this.offsetTime))/($.t-this.offsetTime-(N.t-this.offsetTime)))}O=$.s?$.s[0]:N.e[0]}I=N.s[0]}for(te=P._length,ie=I.i[0].length,R.lastIndex=j,B=0;B<te;B+=1)for(Z=0;Z<ie;Z+=1)fe=L?I.i[B][Z]:I.i[B][Z]+(O.i[B][Z]-I.i[B][Z])*Q,P.i[B][Z]=fe,fe=L?I.o[B][Z]:I.o[B][Z]+(O.o[B][Z]-I.o[B][Z])*Q,P.o[B][Z]=fe,fe=L?I.v[B][Z]:I.v[B][Z]+(O.v[B][Z]-I.v[B][Z])*Q,P.v[B][Z]=fe}function r(){var C=this.comp.renderedFrame-this.offsetTime,P=this.keyframes[0].t-this.offsetTime,R=this.keyframes[this.keyframes.length-1].t-this.offsetTime,j=this._caching.lastFrame;return j!==t&&(j<P&&C<P||j>R&&C>R)||(this._caching.lastIndex=j<C?this._caching.lastIndex:0,this.interpolateShape(C,this.pv,this._caching)),this._caching.lastFrame=C,this.pv}function n(){this.paths=this.localShapeCollection}function s(C,P){if(C._length!==P._length||C.c!==P.c)return!1;var R,j=C._length;for(R=0;R<j;R+=1)if(C.v[R][0]!==P.v[R][0]||C.v[R][1]!==P.v[R][1]||C.o[R][0]!==P.o[R][0]||C.o[R][1]!==P.o[R][1]||C.i[R][0]!==P.i[R][0]||C.i[R][1]!==P.i[R][1])return!1;return!0}function a(C){s(this.v,C)||(this.v=shapePool.clone(C),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function o(){if(this.elem.globalData.frameId!==this.frameId){if(!this.effectsSequence.length){this._mdf=!1;return}if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!1;var C;this.kf?C=this.pv:this.data.ks?C=this.data.ks.k:C=this.data.pt.k;var P,R=this.effectsSequence.length;for(P=0;P<R;P+=1)C=this.effectsSequence[P](C);this.setVValue(C),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function l(C,P,R){this.propType="shape",this.comp=C.comp,this.container=C,this.elem=C,this.data=P,this.k=!1,this.kf=!1,this._mdf=!1;var j=R===3?P.pt.k:P.ks.k;this.v=shapePool.clone(j),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=n,this.effectsSequence=[]}function c(C){this.effectsSequence.push(C),this.container.addDynamicProperty(this)}l.prototype.interpolateShape=e,l.prototype.getValue=o,l.prototype.setVValue=a,l.prototype.addEffect=c;function d(C,P,R){this.propType="shape",this.comp=C.comp,this.elem=C,this.container=C,this.offsetTime=C.data.st,this.keyframes=R===3?P.pt.k:P.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var j=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,j),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=t,this.reset=n,this._caching={lastFrame:t,lastIndex:0},this.effectsSequence=[r.bind(this)]}d.prototype.getValue=o,d.prototype.interpolateShape=e,d.prototype.setVValue=a,d.prototype.addEffect=c;var p=function(){var C=roundCorner;function P(R,j){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=j.d,this.elem=R,this.comp=R.comp,this.frameId=-1,this.initDynamicPropertyContainer(R),this.p=PropertyFactory.getProp(R,j.p,1,0,this),this.s=PropertyFactory.getProp(R,j.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return P.prototype={reset:n,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var j=this.p.v[0],I=this.p.v[1],O=this.s.v[0]/2,L=this.s.v[1]/2,B=this.d!==3,Z=this.v;Z.v[0][0]=j,Z.v[0][1]=I-L,Z.v[1][0]=B?j+O:j-O,Z.v[1][1]=I,Z.v[2][0]=j,Z.v[2][1]=I+L,Z.v[3][0]=B?j-O:j+O,Z.v[3][1]=I,Z.i[0][0]=B?j-O*C:j+O*C,Z.i[0][1]=I-L,Z.i[1][0]=B?j+O:j-O,Z.i[1][1]=I-L*C,Z.i[2][0]=B?j+O*C:j-O*C,Z.i[2][1]=I+L,Z.i[3][0]=B?j-O:j+O,Z.i[3][1]=I+L*C,Z.o[0][0]=B?j+O*C:j-O*C,Z.o[0][1]=I-L,Z.o[1][0]=B?j+O:j-O,Z.o[1][1]=I+L*C,Z.o[2][0]=B?j-O*C:j+O*C,Z.o[2][1]=I+L,Z.o[3][0]=B?j-O:j+O,Z.o[3][1]=I-L*C}},extendPrototype([DynamicPropertyContainer],P),P}(),g=function(){function C(P,R){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=P,this.comp=P.comp,this.data=R,this.frameId=-1,this.d=R.d,this.initDynamicPropertyContainer(P),R.sy===1?(this.ir=PropertyFactory.getProp(P,R.ir,0,0,this),this.is=PropertyFactory.getProp(P,R.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(P,R.pt,0,0,this),this.p=PropertyFactory.getProp(P,R.p,1,0,this),this.r=PropertyFactory.getProp(P,R.r,0,degToRads,this),this.or=PropertyFactory.getProp(P,R.or,0,0,this),this.os=PropertyFactory.getProp(P,R.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return C.prototype={reset:n,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var R=Math.floor(this.pt.v)*2,j=Math.PI*2/R,I=!0,O=this.or.v,L=this.ir.v,B=this.os.v,Z=this.is.v,te=2*Math.PI*O/(R*2),ie=2*Math.PI*L/(R*2),Q,fe,se,Y,G=-Math.PI/2;G+=this.r.v;var q=this.data.d===3?-1:1;for(this.v._length=0,Q=0;Q<R;Q+=1){fe=I?O:L,se=I?B:Z,Y=I?te:ie;var N=fe*Math.cos(G),$=fe*Math.sin(G),V=N===0&&$===0?0:$/Math.sqrt(N*N+$*$),z=N===0&&$===0?0:-N/Math.sqrt(N*N+$*$);N+=+this.p.v[0],$+=+this.p.v[1],this.v.setTripleAt(N,$,N-V*Y*se*q,$-z*Y*se*q,N+V*Y*se*q,$+z*Y*se*q,Q,!0),I=!I,G+=j*q}},convertPolygonToPath:function(){var R=Math.floor(this.pt.v),j=Math.PI*2/R,I=this.or.v,O=this.os.v,L=2*Math.PI*I/(R*4),B,Z=-Math.PI*.5,te=this.data.d===3?-1:1;for(Z+=this.r.v,this.v._length=0,B=0;B<R;B+=1){var ie=I*Math.cos(Z),Q=I*Math.sin(Z),fe=ie===0&&Q===0?0:Q/Math.sqrt(ie*ie+Q*Q),se=ie===0&&Q===0?0:-ie/Math.sqrt(ie*ie+Q*Q);ie+=+this.p.v[0],Q+=+this.p.v[1],this.v.setTripleAt(ie,Q,ie-fe*L*O*te,Q-se*L*O*te,ie+fe*L*O*te,Q+se*L*O*te,B,!0),Z+=j*te}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],C),C}(),y=function(){function C(P,R){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=P,this.comp=P.comp,this.frameId=-1,this.d=R.d,this.initDynamicPropertyContainer(P),this.p=PropertyFactory.getProp(P,R.p,1,0,this),this.s=PropertyFactory.getProp(P,R.s,1,0,this),this.r=PropertyFactory.getProp(P,R.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return C.prototype={convertRectToPath:function(){var R=this.p.v[0],j=this.p.v[1],I=this.s.v[0]/2,O=this.s.v[1]/2,L=bmMin(I,O,this.r.v),B=L*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(R+I,j-O+L,R+I,j-O+L,R+I,j-O+B,0,!0),this.v.setTripleAt(R+I,j+O-L,R+I,j+O-B,R+I,j+O-L,1,!0),L!==0?(this.v.setTripleAt(R+I-L,j+O,R+I-L,j+O,R+I-B,j+O,2,!0),this.v.setTripleAt(R-I+L,j+O,R-I+B,j+O,R-I+L,j+O,3,!0),this.v.setTripleAt(R-I,j+O-L,R-I,j+O-L,R-I,j+O-B,4,!0),this.v.setTripleAt(R-I,j-O+L,R-I,j-O+B,R-I,j-O+L,5,!0),this.v.setTripleAt(R-I+L,j-O,R-I+L,j-O,R-I+B,j-O,6,!0),this.v.setTripleAt(R+I-L,j-O,R+I-B,j-O,R+I-L,j-O,7,!0)):(this.v.setTripleAt(R-I,j+O,R-I+B,j+O,R-I,j+O,2),this.v.setTripleAt(R-I,j-O,R-I,j-O+B,R-I,j-O,3))):(this.v.setTripleAt(R+I,j-O+L,R+I,j-O+B,R+I,j-O+L,0,!0),L!==0?(this.v.setTripleAt(R+I-L,j-O,R+I-L,j-O,R+I-B,j-O,1,!0),this.v.setTripleAt(R-I+L,j-O,R-I+B,j-O,R-I+L,j-O,2,!0),this.v.setTripleAt(R-I,j-O+L,R-I,j-O+L,R-I,j-O+B,3,!0),this.v.setTripleAt(R-I,j+O-L,R-I,j+O-B,R-I,j+O-L,4,!0),this.v.setTripleAt(R-I+L,j+O,R-I+L,j+O,R-I+B,j+O,5,!0),this.v.setTripleAt(R+I-L,j+O,R+I-B,j+O,R+I-L,j+O,6,!0),this.v.setTripleAt(R+I,j+O-L,R+I,j+O-L,R+I,j+O-B,7,!0)):(this.v.setTripleAt(R-I,j-O,R-I+B,j-O,R-I,j-O,1,!0),this.v.setTripleAt(R-I,j+O,R-I,j+O-B,R-I,j+O,2,!0),this.v.setTripleAt(R+I,j+O,R+I-B,j+O,R+I,j+O,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:n},extendPrototype([DynamicPropertyContainer],C),C}();function x(C,P,R){var j;if(R===3||R===4){var I=R===3?P.pt:P.ks,O=I.k;O.length?j=new d(C,P,R):j=new l(C,P,R)}else R===5?j=new y(C,P):R===6?j=new p(C,P):R===7&&(j=new g(C,P));return j.k&&C.addDynamicProperty(j),j}function E(){return l}function S(){return d}var k={};return k.getShapeProp=x,k.getConstructorFunction=E,k.getKeyframedConstructorFunction=S,k}();/*!
 Transformation Matrix v2.0
 (c) Epistemex 2014-2015
 www.epistemex.com
 By Ken Fyrstenberg
 Contributions by leeoniya.
 License: MIT, header required.
 */var Matrix=function(){var t=Math.cos,e=Math.sin,r=Math.tan,n=Math.round;function s(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function a(N){if(N===0)return this;var $=t(N),V=e(N);return this._t($,-V,0,0,V,$,0,0,0,0,1,0,0,0,0,1)}function o(N){if(N===0)return this;var $=t(N),V=e(N);return this._t(1,0,0,0,0,$,-V,0,0,V,$,0,0,0,0,1)}function l(N){if(N===0)return this;var $=t(N),V=e(N);return this._t($,0,V,0,0,1,0,0,-V,0,$,0,0,0,0,1)}function c(N){if(N===0)return this;var $=t(N),V=e(N);return this._t($,-V,0,0,V,$,0,0,0,0,1,0,0,0,0,1)}function d(N,$){return this._t(1,$,N,1,0,0)}function p(N,$){return this.shear(r(N),r($))}function g(N,$){var V=t($),z=e($);return this._t(V,z,0,0,-z,V,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,r(N),1,0,0,0,0,1,0,0,0,0,1)._t(V,-z,0,0,z,V,0,0,0,0,1,0,0,0,0,1)}function y(N,$,V){return!V&&V!==0&&(V=1),N===1&&$===1&&V===1?this:this._t(N,0,0,0,0,$,0,0,0,0,V,0,0,0,0,1)}function x(N,$,V,z,ne,pe,xe,Ce,ce,Re,oe,Se,Ne,Fe,et,Le){return this.props[0]=N,this.props[1]=$,this.props[2]=V,this.props[3]=z,this.props[4]=ne,this.props[5]=pe,this.props[6]=xe,this.props[7]=Ce,this.props[8]=ce,this.props[9]=Re,this.props[10]=oe,this.props[11]=Se,this.props[12]=Ne,this.props[13]=Fe,this.props[14]=et,this.props[15]=Le,this}function E(N,$,V){return V=V||0,N!==0||$!==0||V!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,N,$,V,1):this}function S(N,$,V,z,ne,pe,xe,Ce,ce,Re,oe,Se,Ne,Fe,et,Le){var Ee=this.props;if(N===1&&$===0&&V===0&&z===0&&ne===0&&pe===1&&xe===0&&Ce===0&&ce===0&&Re===0&&oe===1&&Se===0)return Ee[12]=Ee[12]*N+Ee[15]*Ne,Ee[13]=Ee[13]*pe+Ee[15]*Fe,Ee[14]=Ee[14]*oe+Ee[15]*et,Ee[15]*=Le,this._identityCalculated=!1,this;var Pt=Ee[0],Dt=Ee[1],Et=Ee[2],St=Ee[3],Ct=Ee[4],ct=Ee[5],Qe=Ee[6],_t=Ee[7],ft=Ee[8],Bt=Ee[9],Wt=Ee[10],Zt=Ee[11],Ft=Ee[12],Mt=Ee[13],bt=Ee[14],Be=Ee[15];return Ee[0]=Pt*N+Dt*ne+Et*ce+St*Ne,Ee[1]=Pt*$+Dt*pe+Et*Re+St*Fe,Ee[2]=Pt*V+Dt*xe+Et*oe+St*et,Ee[3]=Pt*z+Dt*Ce+Et*Se+St*Le,Ee[4]=Ct*N+ct*ne+Qe*ce+_t*Ne,Ee[5]=Ct*$+ct*pe+Qe*Re+_t*Fe,Ee[6]=Ct*V+ct*xe+Qe*oe+_t*et,Ee[7]=Ct*z+ct*Ce+Qe*Se+_t*Le,Ee[8]=ft*N+Bt*ne+Wt*ce+Zt*Ne,Ee[9]=ft*$+Bt*pe+Wt*Re+Zt*Fe,Ee[10]=ft*V+Bt*xe+Wt*oe+Zt*et,Ee[11]=ft*z+Bt*Ce+Wt*Se+Zt*Le,Ee[12]=Ft*N+Mt*ne+bt*ce+Be*Ne,Ee[13]=Ft*$+Mt*pe+bt*Re+Be*Fe,Ee[14]=Ft*V+Mt*xe+bt*oe+Be*et,Ee[15]=Ft*z+Mt*Ce+bt*Se+Be*Le,this._identityCalculated=!1,this}function k(N){var $=N.props;return this.transform($[0],$[1],$[2],$[3],$[4],$[5],$[6],$[7],$[8],$[9],$[10],$[11],$[12],$[13],$[14],$[15])}function C(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function P(N){for(var $=0;$<16;){if(N.props[$]!==this.props[$])return!1;$+=1}return!0}function R(N){var $;for($=0;$<16;$+=1)N.props[$]=this.props[$];return N}function j(N){var $;for($=0;$<16;$+=1)this.props[$]=N[$]}function I(N,$,V){return{x:N*this.props[0]+$*this.props[4]+V*this.props[8]+this.props[12],y:N*this.props[1]+$*this.props[5]+V*this.props[9]+this.props[13],z:N*this.props[2]+$*this.props[6]+V*this.props[10]+this.props[14]}}function O(N,$,V){return N*this.props[0]+$*this.props[4]+V*this.props[8]+this.props[12]}function L(N,$,V){return N*this.props[1]+$*this.props[5]+V*this.props[9]+this.props[13]}function B(N,$,V){return N*this.props[2]+$*this.props[6]+V*this.props[10]+this.props[14]}function Z(){var N=this.props[0]*this.props[5]-this.props[1]*this.props[4],$=this.props[5]/N,V=-this.props[1]/N,z=-this.props[4]/N,ne=this.props[0]/N,pe=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/N,xe=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/N,Ce=new Matrix;return Ce.props[0]=$,Ce.props[1]=V,Ce.props[4]=z,Ce.props[5]=ne,Ce.props[12]=pe,Ce.props[13]=xe,Ce}function te(N){var $=this.getInverseMatrix();return $.applyToPointArray(N[0],N[1],N[2]||0)}function ie(N){var $,V=N.length,z=[];for($=0;$<V;$+=1)z[$]=te(N[$]);return z}function Q(N,$,V){var z=createTypedArray("float32",6);if(this.isIdentity())z[0]=N[0],z[1]=N[1],z[2]=$[0],z[3]=$[1],z[4]=V[0],z[5]=V[1];else{var ne=this.props[0],pe=this.props[1],xe=this.props[4],Ce=this.props[5],ce=this.props[12],Re=this.props[13];z[0]=N[0]*ne+N[1]*xe+ce,z[1]=N[0]*pe+N[1]*Ce+Re,z[2]=$[0]*ne+$[1]*xe+ce,z[3]=$[0]*pe+$[1]*Ce+Re,z[4]=V[0]*ne+V[1]*xe+ce,z[5]=V[0]*pe+V[1]*Ce+Re}return z}function fe(N,$,V){var z;return this.isIdentity()?z=[N,$,V]:z=[N*this.props[0]+$*this.props[4]+V*this.props[8]+this.props[12],N*this.props[1]+$*this.props[5]+V*this.props[9]+this.props[13],N*this.props[2]+$*this.props[6]+V*this.props[10]+this.props[14]],z}function se(N,$){if(this.isIdentity())return N+","+$;var V=this.props;return Math.round((N*V[0]+$*V[4]+V[12])*100)/100+","+Math.round((N*V[1]+$*V[5]+V[13])*100)/100}function Y(){for(var N=0,$=this.props,V="matrix3d(",z=1e4;N<16;)V+=n($[N]*z)/z,V+=N===15?")":",",N+=1;return V}function G(N){var $=1e4;return N<1e-6&&N>0||N>-1e-6&&N<0?n(N*$)/$:N}function q(){var N=this.props,$=G(N[0]),V=G(N[1]),z=G(N[4]),ne=G(N[5]),pe=G(N[12]),xe=G(N[13]);return"matrix("+$+","+V+","+z+","+ne+","+pe+","+xe+")"}return function(){this.reset=s,this.rotate=a,this.rotateX=o,this.rotateY=l,this.rotateZ=c,this.skew=p,this.skewFromAxis=g,this.shear=d,this.scale=y,this.setTransform=x,this.translate=E,this.transform=S,this.multiply=k,this.applyToPoint=I,this.applyToX=O,this.applyToY=L,this.applyToZ=B,this.applyToPointArray=fe,this.applyToTriplePoints=Q,this.applyToPointStringified=se,this.toCSS=Y,this.to2dCSS=q,this.clone=R,this.cloneFromProps=j,this.equals=P,this.inversePoints=ie,this.inversePoint=te,this.getInverseMatrix=Z,this._t=this.transform,this.isIdentity=C,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(t){"@babel/helpers - typeof";return _typeof$3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$3(t)}var lottie={};function setLocation(t){setLocationHref(t)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(t){setSubframeEnabled(t)}function setPrefix(t){setIdPrefix(t)}function loadAnimation(t){return animationManager.loadAnimation(t)}function setQuality(t){if(typeof t=="string")switch(t){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10);break}else!isNaN(t)&&t>1&&setDefaultCurveSegments(t)}function inBrowser(){return typeof navigator<"u"}function installPlugin(t,e){t==="expressions"&&setExpressionsPlugin(e)}function getFactory(t){switch(t){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.13.0";function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(t){for(var e=queryString.split("&"),r=0;r<e.length;r+=1){var n=e[r].split("=");if(decodeURIComponent(n[0])==t)return decodeURIComponent(n[1])}return null}var queryString="";{var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports)!=="object"&&(window.bodymovin=lottie)}catch(t){}var ShapeModifiers=function(){var t={},e={};t.registerModifier=r,t.getModifier=n;function r(s,a){e[s]||(e[s]=a)}function n(s,a,o){return new e[s](a,o)}return t}();function ShapeModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(t){if(!this.closed){t.sh.container.addDynamicProperty(t.sh);var e={shape:t.sh,data:t,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(e),this.addShapeToModifier(e),this._isAnimated&&t.setAsAnimated()}},ShapeModifier.prototype.init=function(t,e){this.shapes=[],this.elem=t,this.initDynamicPropertyContainer(t),this.initModifierProperties(t,e),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier);function TrimModifier(){}extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(t,e){this.s=PropertyFactory.getProp(t,e.s,0,.01,this),this.e=PropertyFactory.getProp(t,e.e,0,.01,this),this.o=PropertyFactory.getProp(t,e.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=e.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(t){t.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(t,e,r,n,s){var a=[];e<=1?a.push({s:t,e}):t>=1?a.push({s:t-1,e:e-1}):(a.push({s:t,e:1}),a.push({s:0,e:e-1}));var o=[],l,c=a.length,d;for(l=0;l<c;l+=1)if(d=a[l],!(d.e*s<n||d.s*s>n+r)){var p,g;d.s*s<=n?p=0:p=(d.s*s-n)/r,d.e*s>=n+r?g=1:g=(d.e*s-n)/r,o.push([p,g])}return o.length||o.push([0,0]),o},TrimModifier.prototype.releasePathsData=function(t){var e,r=t.length;for(e=0;e<r;e+=1)segmentsLengthPool.release(t[e]);return t.length=0,t},TrimModifier.prototype.processShapes=function(t){var e,r;if(this._mdf||t){var n=this.o.v%360/360;if(n<0&&(n+=1),this.s.v>1?e=1+n:this.s.v<0?e=0+n:e=this.s.v+n,this.e.v>1?r=1+n:this.e.v<0?r=0+n:r=this.e.v+n,e>r){var s=e;e=r,r=s}e=Math.round(e*1e4)*1e-4,r=Math.round(r*1e4)*1e-4,this.sValue=e,this.eValue=r}else e=this.sValue,r=this.eValue;var a,o,l=this.shapes.length,c,d,p,g,y,x=0;if(r===e)for(o=0;o<l;o+=1)this.shapes[o].localShapeCollection.releaseShapes(),this.shapes[o].shape._mdf=!0,this.shapes[o].shape.paths=this.shapes[o].localShapeCollection,this._mdf&&(this.shapes[o].pathsData.length=0);else if(r===1&&e===0||r===0&&e===1){if(this._mdf)for(o=0;o<l;o+=1)this.shapes[o].pathsData.length=0,this.shapes[o].shape._mdf=!0}else{var E=[],S,k;for(o=0;o<l;o+=1)if(S=this.shapes[o],!S.shape._mdf&&!this._mdf&&!t&&this.m!==2)S.shape.paths=S.localShapeCollection;else{if(a=S.shape.paths,d=a._length,y=0,!S.shape._mdf&&S.pathsData.length)y=S.totalShapeLength;else{for(p=this.releasePathsData(S.pathsData),c=0;c<d;c+=1)g=bez.getSegmentsLength(a.shapes[c]),p.push(g),y+=g.totalLength;S.totalShapeLength=y,S.pathsData=p}x+=y,S.shape._mdf=!0}var C=e,P=r,R=0,j;for(o=l-1;o>=0;o-=1)if(S=this.shapes[o],S.shape._mdf){for(k=S.localShapeCollection,k.releaseShapes(),this.m===2&&l>1?(j=this.calculateShapeEdges(e,r,S.totalShapeLength,R,x),R+=S.totalShapeLength):j=[[C,P]],d=j.length,c=0;c<d;c+=1){C=j[c][0],P=j[c][1],E.length=0,P<=1?E.push({s:S.totalShapeLength*C,e:S.totalShapeLength*P}):C>=1?E.push({s:S.totalShapeLength*(C-1),e:S.totalShapeLength*(P-1)}):(E.push({s:S.totalShapeLength*C,e:S.totalShapeLength}),E.push({s:0,e:S.totalShapeLength*(P-1)}));var I=this.addShapes(S,E[0]);if(E[0].s!==E[0].e){if(E.length>1){var O=S.shape.paths.shapes[S.shape.paths._length-1];if(O.c){var L=I.pop();this.addPaths(I,k),I=this.addShapes(S,E[1],L)}else this.addPaths(I,k),I=this.addShapes(S,E[1])}this.addPaths(I,k)}}S.shape.paths=k}}},TrimModifier.prototype.addPaths=function(t,e){var r,n=t.length;for(r=0;r<n;r+=1)e.addShape(t[r])},TrimModifier.prototype.addSegment=function(t,e,r,n,s,a,o){s.setXYAt(e[0],e[1],"o",a),s.setXYAt(r[0],r[1],"i",a+1),o&&s.setXYAt(t[0],t[1],"v",a),s.setXYAt(n[0],n[1],"v",a+1)},TrimModifier.prototype.addSegmentFromArray=function(t,e,r,n){e.setXYAt(t[1],t[5],"o",r),e.setXYAt(t[2],t[6],"i",r+1),n&&e.setXYAt(t[0],t[4],"v",r),e.setXYAt(t[3],t[7],"v",r+1)},TrimModifier.prototype.addShapes=function(t,e,r){var n=t.pathsData,s=t.shape.paths.shapes,a,o=t.shape.paths._length,l,c,d=0,p,g,y,x,E=[],S,k=!0;for(r?(g=r._length,S=r._length):(r=shapePool.newElement(),g=0,S=0),E.push(r),a=0;a<o;a+=1){for(y=n[a].lengths,r.c=s[a].c,c=s[a].c?y.length:y.length+1,l=1;l<c;l+=1)if(p=y[l-1],d+p.addedLength<e.s)d+=p.addedLength,r.c=!1;else if(d>e.e){r.c=!1;break}else e.s<=d&&e.e>=d+p.addedLength?(this.addSegment(s[a].v[l-1],s[a].o[l-1],s[a].i[l],s[a].v[l],r,g,k),k=!1):(x=bez.getNewSegment(s[a].v[l-1],s[a].v[l],s[a].o[l-1],s[a].i[l],(e.s-d)/p.addedLength,(e.e-d)/p.addedLength,y[l-1]),this.addSegmentFromArray(x,r,g,k),k=!1,r.c=!1),d+=p.addedLength,g+=1;if(s[a].c&&y.length){if(p=y[l-1],d<=e.e){var C=y[l-1].addedLength;e.s<=d&&e.e>=d+C?(this.addSegment(s[a].v[l-1],s[a].o[l-1],s[a].i[0],s[a].v[0],r,g,k),k=!1):(x=bez.getNewSegment(s[a].v[l-1],s[a].v[0],s[a].o[l-1],s[a].i[0],(e.s-d)/C,(e.e-d)/C,y[l-1]),this.addSegmentFromArray(x,r,g,k),k=!1,r.c=!1)}else r.c=!1;d+=p.addedLength,g+=1}if(r._length&&(r.setXYAt(r.v[S][0],r.v[S][1],"i",S),r.setXYAt(r.v[r._length-1][0],r.v[r._length-1][1],"o",r._length-1)),d>e.e)break;a<o-1&&(r=shapePool.newElement(),k=!0,E.push(r),g=0)}return E};function PuckerAndBloatModifier(){}extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(t,e.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(t,e){var r=e/100,n=[0,0],s=t._length,a=0;for(a=0;a<s;a+=1)n[0]+=t.v[a][0],n[1]+=t.v[a][1];n[0]/=s,n[1]/=s;var o=shapePool.newElement();o.c=t.c;var l,c,d,p,g,y;for(a=0;a<s;a+=1)l=t.v[a][0]+(n[0]-t.v[a][0])*r,c=t.v[a][1]+(n[1]-t.v[a][1])*r,d=t.o[a][0]+(n[0]-t.o[a][0])*-r,p=t.o[a][1]+(n[1]-t.o[a][1])*-r,g=t.i[a][0]+(n[0]-t.i[a][0])*-r,y=t.i[a][1]+(n[1]-t.i[a][1])*-r,o.setTripleAt(l,c,d,p,g,y,a);return o},PuckerAndBloatModifier.prototype.processShapes=function(t){var e,r,n=this.shapes.length,s,a,o=this.amount.v;if(o!==0){var l,c;for(r=0;r<n;r+=1){if(l=this.shapes[r],c=l.localShapeCollection,!(!l.shape._mdf&&!this._mdf&&!t))for(c.releaseShapes(),l.shape._mdf=!0,e=l.shape.paths.shapes,a=l.shape.paths._length,s=0;s<a;s+=1)c.addShape(this.processPath(e[s],o));l.shape.paths=l.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var t=[0,0];function e(c){var d=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||d,this.a&&c.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&c.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&c.skewFromAxis(-this.sk.v,this.sa.v),this.r?c.rotate(-this.r.v):c.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?c.translate(this.px.v,this.py.v,-this.pz.v):c.translate(this.px.v,this.py.v,0):c.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function r(c){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||c){var d;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var p,g;if(d=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(p=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/d,0),g=this.p.getValueAtTime(this.p.keyframes[0].t/d,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(p=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/d,0),g=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/d,0)):(p=this.p.pv,g=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/d,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){p=[],g=[];var y=this.px,x=this.py;y._caching.lastFrame+y.offsetTime<=y.keyframes[0].t?(p[0]=y.getValueAtTime((y.keyframes[0].t+.01)/d,0),p[1]=x.getValueAtTime((x.keyframes[0].t+.01)/d,0),g[0]=y.getValueAtTime(y.keyframes[0].t/d,0),g[1]=x.getValueAtTime(x.keyframes[0].t/d,0)):y._caching.lastFrame+y.offsetTime>=y.keyframes[y.keyframes.length-1].t?(p[0]=y.getValueAtTime(y.keyframes[y.keyframes.length-1].t/d,0),p[1]=x.getValueAtTime(x.keyframes[x.keyframes.length-1].t/d,0),g[0]=y.getValueAtTime((y.keyframes[y.keyframes.length-1].t-.01)/d,0),g[1]=x.getValueAtTime((x.keyframes[x.keyframes.length-1].t-.01)/d,0)):(p=[y.pv,x.pv],g[0]=y.getValueAtTime((y._caching.lastFrame+y.offsetTime-.01)/d,y.offsetTime),g[1]=x.getValueAtTime((x._caching.lastFrame+x.offsetTime-.01)/d,x.offsetTime))}else g=t,p=g;this.v.rotate(-Math.atan2(p[1]-g[1],p[0]-g[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function n(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length)this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1;else return;if(!this.s.effectsSequence.length)this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2;else return;if(this.sk)if(!this.sk.effectsSequence.length&&!this.sa.effectsSequence.length)this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3;else return;this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):!this.rz.effectsSequence.length&&!this.ry.effectsSequence.length&&!this.rx.effectsSequence.length&&!this.or.effectsSequence.length&&(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}function s(){}function a(c){this._addDynamicProperty(c),this.elem.addDynamicProperty(c),this._isDirty=!0}function o(c,d,p){if(this.elem=c,this.frameId=-1,this.propType="transform",this.data=d,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(p||c),d.p&&d.p.s?(this.px=PropertyFactory.getProp(c,d.p.x,0,0,this),this.py=PropertyFactory.getProp(c,d.p.y,0,0,this),d.p.z&&(this.pz=PropertyFactory.getProp(c,d.p.z,0,0,this))):this.p=PropertyFactory.getProp(c,d.p||{k:[0,0,0]},1,0,this),d.rx){if(this.rx=PropertyFactory.getProp(c,d.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(c,d.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(c,d.rz,0,degToRads,this),d.or.k[0].ti){var g,y=d.or.k.length;for(g=0;g<y;g+=1)d.or.k[g].to=null,d.or.k[g].ti=null}this.or=PropertyFactory.getProp(c,d.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(c,d.r||{k:0},0,degToRads,this);d.sk&&(this.sk=PropertyFactory.getProp(c,d.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(c,d.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(c,d.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(c,d.s||{k:[100,100,100]},1,.01,this),d.o?this.o=PropertyFactory.getProp(c,d.o,0,.01,c):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}o.prototype={applyToMatrix:e,getValue:r,precalculateMatrix:n,autoOrient:s},extendPrototype([DynamicPropertyContainer],o),o.prototype.addDynamicProperty=a,o.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty;function l(c,d,p){return new o(c,d,p)}return{getTransformProperty:l}}();function RepeaterModifier(){}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(t,e.c,0,null,this),this.o=PropertyFactory.getProp(t,e.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(t,e.tr,this),this.so=PropertyFactory.getProp(t,e.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(t,e.tr.eo,0,.01,this),this.data=e,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(t,e,r,n,s,a){var o=a?-1:1,l=n.s.v[0]+(1-n.s.v[0])*(1-s),c=n.s.v[1]+(1-n.s.v[1])*(1-s);t.translate(n.p.v[0]*o*s,n.p.v[1]*o*s,n.p.v[2]),e.translate(-n.a.v[0],-n.a.v[1],n.a.v[2]),e.rotate(-n.r.v*o*s),e.translate(n.a.v[0],n.a.v[1],n.a.v[2]),r.translate(-n.a.v[0],-n.a.v[1],n.a.v[2]),r.scale(a?1/l:l,a?1/c:c),r.translate(n.a.v[0],n.a.v[1],n.a.v[2])},RepeaterModifier.prototype.init=function(t,e,r,n){for(this.elem=t,this.arr=e,this.pos=r,this.elemsData=n,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(t),this.initModifierProperties(t,e[r]);r>0;)r-=1,this._elements.unshift(e[r]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(t){var e,r=t.length;for(e=0;e<r;e+=1)t[e]._processed=!1,t[e].ty==="gr"&&this.resetElements(t[e].it)},RepeaterModifier.prototype.cloneElements=function(t){var e=JSON.parse(JSON.stringify(t));return this.resetElements(e),e},RepeaterModifier.prototype.changeGroupRender=function(t,e){var r,n=t.length;for(r=0;r<n;r+=1)t[r]._render=e,t[r].ty==="gr"&&this.changeGroupRender(t[r].it,e)},RepeaterModifier.prototype.processShapes=function(t){var e,r,n,s,a,o=!1;if(this._mdf||t){var l=Math.ceil(this.c.v);if(this._groups.length<l){for(;this._groups.length<l;){var c={it:this.cloneElements(this._elements),ty:"gr"};c.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,c),this._groups.splice(0,0,c),this._currentCopies+=1}this.elem.reloadShapes(),o=!0}a=0;var d;for(n=0;n<=this._groups.length-1;n+=1){if(d=a<l,this._groups[n]._render=d,this.changeGroupRender(this._groups[n].it,d),!d){var p=this.elemsData[n].it,g=p[p.length-1];g.transform.op.v!==0?(g.transform.op._mdf=!0,g.transform.op.v=0):g.transform.op._mdf=!1}a+=1}this._currentCopies=l;var y=this.o.v,x=y%1,E=y>0?Math.floor(y):Math.ceil(y),S=this.pMatrix.props,k=this.rMatrix.props,C=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var P=0;if(y>0){for(;P<E;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),P+=1;x&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,x,!1),P+=x)}else if(y<0){for(;P>E;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),P-=1;x&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-x,!0),P-=x)}n=this.data.m===1?0:this._currentCopies-1,s=this.data.m===1?1:-1,a=this._currentCopies;for(var R,j;a;){if(e=this.elemsData[n].it,r=e[e.length-1].transform.mProps.v.props,j=r.length,e[e.length-1].transform.mProps._mdf=!0,e[e.length-1].transform.op._mdf=!0,e[e.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(n/(this._currentCopies-1)),P!==0){for((n!==0&&s===1||n!==this._currentCopies-1&&s===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(k[0],k[1],k[2],k[3],k[4],k[5],k[6],k[7],k[8],k[9],k[10],k[11],k[12],k[13],k[14],k[15]),this.matrix.transform(C[0],C[1],C[2],C[3],C[4],C[5],C[6],C[7],C[8],C[9],C[10],C[11],C[12],C[13],C[14],C[15]),this.matrix.transform(S[0],S[1],S[2],S[3],S[4],S[5],S[6],S[7],S[8],S[9],S[10],S[11],S[12],S[13],S[14],S[15]),R=0;R<j;R+=1)r[R]=this.matrix.props[R];this.matrix.reset()}else for(this.matrix.reset(),R=0;R<j;R+=1)r[R]=this.matrix.props[R];P+=1,a-=1,n+=s}}else for(a=this._currentCopies,n=0,s=1;a;)e=this.elemsData[n].it,r=e[e.length-1].transform.mProps.v.props,e[e.length-1].transform.mProps._mdf=!1,e[e.length-1].transform.op._mdf=!1,a-=1,n+=s;return o},RepeaterModifier.prototype.addShape=function(){};function RoundCornersModifier(){}extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(t,e.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(t,e){var r=shapePool.newElement();r.c=t.c;var n,s=t._length,a,o,l,c,d,p,g=0,y,x,E,S,k,C;for(n=0;n<s;n+=1)a=t.v[n],l=t.o[n],o=t.i[n],a[0]===l[0]&&a[1]===l[1]&&a[0]===o[0]&&a[1]===o[1]?(n===0||n===s-1)&&!t.c?(r.setTripleAt(a[0],a[1],l[0],l[1],o[0],o[1],g),g+=1):(n===0?c=t.v[s-1]:c=t.v[n-1],d=Math.sqrt(Math.pow(a[0]-c[0],2)+Math.pow(a[1]-c[1],2)),p=d?Math.min(d/2,e)/d:0,k=a[0]+(c[0]-a[0])*p,y=k,C=a[1]-(a[1]-c[1])*p,x=C,E=y-(y-a[0])*roundCorner,S=x-(x-a[1])*roundCorner,r.setTripleAt(y,x,E,S,k,C,g),g+=1,n===s-1?c=t.v[0]:c=t.v[n+1],d=Math.sqrt(Math.pow(a[0]-c[0],2)+Math.pow(a[1]-c[1],2)),p=d?Math.min(d/2,e)/d:0,E=a[0]+(c[0]-a[0])*p,y=E,S=a[1]+(c[1]-a[1])*p,x=S,k=y-(y-a[0])*roundCorner,C=x-(x-a[1])*roundCorner,r.setTripleAt(y,x,E,S,k,C,g),g+=1):(r.setTripleAt(t.v[n][0],t.v[n][1],t.o[n][0],t.o[n][1],t.i[n][0],t.i[n][1],g),g+=1);return r},RoundCornersModifier.prototype.processShapes=function(t){var e,r,n=this.shapes.length,s,a,o=this.rd.v;if(o!==0){var l,c;for(r=0;r<n;r+=1){if(l=this.shapes[r],c=l.localShapeCollection,!(!l.shape._mdf&&!this._mdf&&!t))for(c.releaseShapes(),l.shape._mdf=!0,e=l.shape.paths.shapes,a=l.shape.paths._length,s=0;s<a;s+=1)c.addShape(this.processPath(e[s],o));l.shape.paths=l.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function floatEqual(t,e){return Math.abs(t-e)*1e5<=Math.min(Math.abs(t),Math.abs(e))}function floatZero(t){return Math.abs(t)<=1e-5}function lerp(t,e,r){return t*(1-r)+e*r}function lerpPoint(t,e,r){return[lerp(t[0],e[0],r),lerp(t[1],e[1],r)]}function quadRoots(t,e,r){if(t===0)return[];var n=e*e-4*t*r;if(n<0)return[];var s=-e/(2*t);if(n===0)return[s];var a=Math.sqrt(n)/(2*t);return[s-a,s+a]}function polynomialCoefficients(t,e,r,n){return[-t+3*e-3*r+n,3*t-6*e+3*r,-3*t+3*e,t]}function singlePoint(t){return new PolynomialBezier(t,t,t,t,!1)}function PolynomialBezier(t,e,r,n,s){s&&pointEqual(t,e)&&(e=lerpPoint(t,n,1/3)),s&&pointEqual(r,n)&&(r=lerpPoint(t,n,2/3));var a=polynomialCoefficients(t[0],e[0],r[0],n[0]),o=polynomialCoefficients(t[1],e[1],r[1],n[1]);this.a=[a[0],o[0]],this.b=[a[1],o[1]],this.c=[a[2],o[2]],this.d=[a[3],o[3]],this.points=[t,e,r,n]}PolynomialBezier.prototype.point=function(t){return[((this.a[0]*t+this.b[0])*t+this.c[0])*t+this.d[0],((this.a[1]*t+this.b[1])*t+this.c[1])*t+this.d[1]]},PolynomialBezier.prototype.derivative=function(t){return[(3*t*this.a[0]+2*this.b[0])*t+this.c[0],(3*t*this.a[1]+2*this.b[1])*t+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(t){var e=this.derivative(t);return Math.atan2(e[1],e[0])},PolynomialBezier.prototype.normalAngle=function(t){var e=this.derivative(t);return Math.atan2(e[0],e[1])},PolynomialBezier.prototype.inflectionPoints=function(){var t=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(t))return[];var e=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/t,r=e*e-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/t;if(r<0)return[];var n=Math.sqrt(r);return floatZero(n)?n>0&&n<1?[e]:[]:[e-n,e+n].filter(function(s){return s>0&&s<1})},PolynomialBezier.prototype.split=function(t){if(t<=0)return[singlePoint(this.points[0]),this];if(t>=1)return[this,singlePoint(this.points[this.points.length-1])];var e=lerpPoint(this.points[0],this.points[1],t),r=lerpPoint(this.points[1],this.points[2],t),n=lerpPoint(this.points[2],this.points[3],t),s=lerpPoint(e,r,t),a=lerpPoint(r,n,t),o=lerpPoint(s,a,t);return[new PolynomialBezier(this.points[0],e,s,o,!0),new PolynomialBezier(o,a,n,this.points[3],!0)]};function extrema(t,e){var r=t.points[0][e],n=t.points[t.points.length-1][e];if(r>n){var s=n;n=r,r=s}for(var a=quadRoots(3*t.a[e],2*t.b[e],t.c[e]),o=0;o<a.length;o+=1)if(a[o]>0&&a[o]<1){var l=t.point(a[o])[e];l<r?r=l:l>n&&(n=l)}return{min:r,max:n}}PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var t=this.bounds();return{left:t.x.min,right:t.x.max,top:t.y.min,bottom:t.y.max,width:t.x.max-t.x.min,height:t.y.max-t.y.min,cx:(t.x.max+t.x.min)/2,cy:(t.y.max+t.y.min)/2}};function intersectData(t,e,r){var n=t.boundingBox();return{cx:n.cx,cy:n.cy,width:n.width,height:n.height,bez:t,t:(e+r)/2,t1:e,t2:r}}function splitData(t){var e=t.bez.split(.5);return[intersectData(e[0],t.t1,t.t),intersectData(e[1],t.t,t.t2)]}function boxIntersect(t,e){return Math.abs(t.cx-e.cx)*2<t.width+e.width&&Math.abs(t.cy-e.cy)*2<t.height+e.height}function intersectsImpl(t,e,r,n,s,a){if(boxIntersect(t,e)){if(r>=a||t.width<=n&&t.height<=n&&e.width<=n&&e.height<=n){s.push([t.t,e.t]);return}var o=splitData(t),l=splitData(e);intersectsImpl(o[0],l[0],r+1,n,s,a),intersectsImpl(o[0],l[1],r+1,n,s,a),intersectsImpl(o[1],l[0],r+1,n,s,a),intersectsImpl(o[1],l[1],r+1,n,s,a)}}PolynomialBezier.prototype.intersections=function(t,e,r){e===void 0&&(e=2),r===void 0&&(r=7);var n=[];return intersectsImpl(intersectData(this,0,1),intersectData(t,0,1),0,e,n,r),n},PolynomialBezier.shapeSegment=function(t,e){var r=(e+1)%t.length();return new PolynomialBezier(t.v[e],t.o[e],t.i[r],t.v[r],!0)},PolynomialBezier.shapeSegmentInverted=function(t,e){var r=(e+1)%t.length();return new PolynomialBezier(t.v[r],t.i[r],t.o[e],t.v[e],!0)};function crossProduct(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function lineIntersection(t,e,r,n){var s=[t[0],t[1],1],a=[e[0],e[1],1],o=[r[0],r[1],1],l=[n[0],n[1],1],c=crossProduct(crossProduct(s,a),crossProduct(o,l));return floatZero(c[2])?null:[c[0]/c[2],c[1]/c[2]]}function polarOffset(t,e,r){return[t[0]+Math.cos(e)*r,t[1]-Math.sin(e)*r]}function pointDistance(t,e){return Math.hypot(t[0]-e[0],t[1]-e[1])}function pointEqual(t,e){return floatEqual(t[0],e[0])&&floatEqual(t[1],e[1])}function ZigZagModifier(){}extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(t,e.s,0,null,this),this.frequency=PropertyFactory.getProp(t,e.r,0,null,this),this.pointsType=PropertyFactory.getProp(t,e.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0};function setPoint(t,e,r,n,s,a,o){var l=r-Math.PI/2,c=r+Math.PI/2,d=e[0]+Math.cos(r)*n*s,p=e[1]-Math.sin(r)*n*s;t.setTripleAt(d,p,d+Math.cos(l)*a,p-Math.sin(l)*a,d+Math.cos(c)*o,p-Math.sin(c)*o,t.length())}function getPerpendicularVector(t,e){var r=[e[0]-t[0],e[1]-t[1]],n=-Math.PI*.5,s=[Math.cos(n)*r[0]-Math.sin(n)*r[1],Math.sin(n)*r[0]+Math.cos(n)*r[1]];return s}function getProjectingAngle(t,e){var r=e===0?t.length()-1:e-1,n=(e+1)%t.length(),s=t.v[r],a=t.v[n],o=getPerpendicularVector(s,a);return Math.atan2(0,1)-Math.atan2(o[1],o[0])}function zigZagCorner(t,e,r,n,s,a,o){var l=getProjectingAngle(e,r),c=e.v[r%e._length],d=e.v[r===0?e._length-1:r-1],p=e.v[(r+1)%e._length],g=a===2?Math.sqrt(Math.pow(c[0]-d[0],2)+Math.pow(c[1]-d[1],2)):0,y=a===2?Math.sqrt(Math.pow(c[0]-p[0],2)+Math.pow(c[1]-p[1],2)):0;setPoint(t,e.v[r%e._length],l,o,n,y/((s+1)*2),g/((s+1)*2))}function zigZagSegment(t,e,r,n,s,a){for(var o=0;o<n;o+=1){var l=(o+1)/(n+1),c=s===2?Math.sqrt(Math.pow(e.points[3][0]-e.points[0][0],2)+Math.pow(e.points[3][1]-e.points[0][1],2)):0,d=e.normalAngle(l),p=e.point(l);setPoint(t,p,d,a,r,c/((n+1)*2),c/((n+1)*2)),a=-a}return a}ZigZagModifier.prototype.processPath=function(t,e,r,n){var s=t._length,a=shapePool.newElement();if(a.c=t.c,t.c||(s-=1),s===0)return a;var o=-1,l=PolynomialBezier.shapeSegment(t,0);zigZagCorner(a,t,0,e,r,n,o);for(var c=0;c<s;c+=1)o=zigZagSegment(a,l,e,r,n,-o),c===s-1&&!t.c?l=null:l=PolynomialBezier.shapeSegment(t,(c+1)%s),zigZagCorner(a,t,c+1,e,r,n,o);return a},ZigZagModifier.prototype.processShapes=function(t){var e,r,n=this.shapes.length,s,a,o=this.amplitude.v,l=Math.max(0,Math.round(this.frequency.v)),c=this.pointsType.v;if(o!==0){var d,p;for(r=0;r<n;r+=1){if(d=this.shapes[r],p=d.localShapeCollection,!(!d.shape._mdf&&!this._mdf&&!t))for(p.releaseShapes(),d.shape._mdf=!0,e=d.shape.paths.shapes,a=d.shape.paths._length,s=0;s<a;s+=1)p.addShape(this.processPath(e[s],o,l,c));d.shape.paths=d.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function linearOffset(t,e,r){var n=Math.atan2(e[0]-t[0],e[1]-t[1]);return[polarOffset(t,n,r),polarOffset(e,n,r)]}function offsetSegment(t,e){var r,n,s,a,o,l,c;c=linearOffset(t.points[0],t.points[1],e),r=c[0],n=c[1],c=linearOffset(t.points[1],t.points[2],e),s=c[0],a=c[1],c=linearOffset(t.points[2],t.points[3],e),o=c[0],l=c[1];var d=lineIntersection(r,n,s,a);d===null&&(d=n);var p=lineIntersection(o,l,s,a);return p===null&&(p=o),new PolynomialBezier(r,d,p,l)}function joinLines(t,e,r,n,s){var a=e.points[3],o=r.points[0];if(n===3||pointEqual(a,o))return a;if(n===2){var l=-e.tangentAngle(1),c=-r.tangentAngle(0)+Math.PI,d=lineIntersection(a,polarOffset(a,l+Math.PI/2,100),o,polarOffset(o,l+Math.PI/2,100)),p=d?pointDistance(d,a):pointDistance(a,o)/2,g=polarOffset(a,l,2*p*roundCorner);return t.setXYAt(g[0],g[1],"o",t.length()-1),g=polarOffset(o,c,2*p*roundCorner),t.setTripleAt(o[0],o[1],o[0],o[1],g[0],g[1],t.length()),o}var y=pointEqual(a,e.points[2])?e.points[0]:e.points[2],x=pointEqual(o,r.points[1])?r.points[3]:r.points[1],E=lineIntersection(y,a,o,x);return E&&pointDistance(E,a)<s?(t.setTripleAt(E[0],E[1],E[0],E[1],E[0],E[1],t.length()),E):a}function getIntersection(t,e){var r=t.intersections(e);return r.length&&floatEqual(r[0][0],1)&&r.shift(),r.length?r[0]:null}function pruneSegmentIntersection(t,e){var r=t.slice(),n=e.slice(),s=getIntersection(t[t.length-1],e[0]);return s&&(r[t.length-1]=t[t.length-1].split(s[0])[0],n[0]=e[0].split(s[1])[1]),t.length>1&&e.length>1&&(s=getIntersection(t[0],e[e.length-1]),s)?[[t[0].split(s[0])[0]],[e[e.length-1].split(s[1])[1]]]:[r,n]}function pruneIntersections(t){for(var e,r=1;r<t.length;r+=1)e=pruneSegmentIntersection(t[r-1],t[r]),t[r-1]=e[0],t[r]=e[1];return t.length>1&&(e=pruneSegmentIntersection(t[t.length-1],t[0]),t[t.length-1]=e[0],t[0]=e[1]),t}function offsetSegmentSplit(t,e){var r=t.inflectionPoints(),n,s,a,o;if(r.length===0)return[offsetSegment(t,e)];if(r.length===1||floatEqual(r[1],1))return a=t.split(r[0]),n=a[0],s=a[1],[offsetSegment(n,e),offsetSegment(s,e)];a=t.split(r[0]),n=a[0];var l=(r[1]-r[0])/(1-r[0]);return a=a[1].split(l),o=a[0],s=a[1],[offsetSegment(n,e),offsetSegment(o,e),offsetSegment(s,e)]}function OffsetPathModifier(){}extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(t,e.a,0,null,this),this.miterLimit=PropertyFactory.getProp(t,e.ml,0,null,this),this.lineJoin=e.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function(t,e,r,n){var s=shapePool.newElement();s.c=t.c;var a=t.length();t.c||(a-=1);var o,l,c,d=[];for(o=0;o<a;o+=1)c=PolynomialBezier.shapeSegment(t,o),d.push(offsetSegmentSplit(c,e));if(!t.c)for(o=a-1;o>=0;o-=1)c=PolynomialBezier.shapeSegmentInverted(t,o),d.push(offsetSegmentSplit(c,e));d=pruneIntersections(d);var p=null,g=null;for(o=0;o<d.length;o+=1){var y=d[o];for(g&&(p=joinLines(s,g,y[0],r,n)),g=y[y.length-1],l=0;l<y.length;l+=1)c=y[l],p&&pointEqual(c.points[0],p)?s.setXYAt(c.points[1][0],c.points[1][1],"o",s.length()-1):s.setTripleAt(c.points[0][0],c.points[0][1],c.points[1][0],c.points[1][1],c.points[0][0],c.points[0][1],s.length()),s.setTripleAt(c.points[3][0],c.points[3][1],c.points[3][0],c.points[3][1],c.points[2][0],c.points[2][1],s.length()),p=c.points[3]}return d.length&&joinLines(s,g,d[0][0],r,n),s},OffsetPathModifier.prototype.processShapes=function(t){var e,r,n=this.shapes.length,s,a,o=this.amount.v,l=this.miterLimit.v,c=this.lineJoin;if(o!==0){var d,p;for(r=0;r<n;r+=1){if(d=this.shapes[r],p=d.localShapeCollection,!(!d.shape._mdf&&!this._mdf&&!t))for(p.releaseShapes(),d.shape._mdf=!0,e=d.shape.paths.shapes,a=d.shape.paths._length,s=0;s<a;s+=1)p.addShape(this.processPath(e[s],o,c,l));d.shape.paths=d.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function getFontProperties(t){for(var e=t.fStyle?t.fStyle.split(" "):[],r="normal",n="normal",s=e.length,a,o=0;o<s;o+=1)switch(a=e[o].toLowerCase(),a){case"italic":n="italic";break;case"bold":r="700";break;case"black":r="900";break;case"medium":r="500";break;case"regular":case"normal":r="400";break;case"light":case"thin":r="200";break}return{style:n,weight:t.fWeight||r}}var FontManager=function(){var t=5e3,e={w:0,size:0,shapes:[],data:{shapes:[]}},r=[];r=r.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var n=127988,s=917631,a=917601,o=917626,l=65039,c=8205,d=127462,p=127487,g=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function y(G){var q=G.split(","),N,$=q.length,V=[];for(N=0;N<$;N+=1)q[N]!=="sans-serif"&&q[N]!=="monospace"&&V.push(q[N]);return V.join(",")}function x(G,q){var N=createTag("span");N.setAttribute("aria-hidden",!0),N.style.fontFamily=q;var $=createTag("span");$.innerText="giItT1WQy@!-/#",N.style.position="absolute",N.style.left="-10000px",N.style.top="-10000px",N.style.fontSize="300px",N.style.fontVariant="normal",N.style.fontStyle="normal",N.style.fontWeight="normal",N.style.letterSpacing="0",N.appendChild($),document.body.appendChild(N);var V=$.offsetWidth;return $.style.fontFamily=y(G)+", "+q,{node:$,w:V,parent:N}}function E(){var G,q=this.fonts.length,N,$,V=q;for(G=0;G<q;G+=1)this.fonts[G].loaded?V-=1:this.fonts[G].fOrigin==="n"||this.fonts[G].origin===0?this.fonts[G].loaded=!0:(N=this.fonts[G].monoCase.node,$=this.fonts[G].monoCase.w,N.offsetWidth!==$?(V-=1,this.fonts[G].loaded=!0):(N=this.fonts[G].sansCase.node,$=this.fonts[G].sansCase.w,N.offsetWidth!==$&&(V-=1,this.fonts[G].loaded=!0)),this.fonts[G].loaded&&(this.fonts[G].sansCase.parent.parentNode.removeChild(this.fonts[G].sansCase.parent),this.fonts[G].monoCase.parent.parentNode.removeChild(this.fonts[G].monoCase.parent)));V!==0&&Date.now()-this.initTime<t?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)}function S(G,q){var N=document.body&&q?"svg":"canvas",$,V=getFontProperties(G);if(N==="svg"){var z=createNS("text");z.style.fontSize="100px",z.setAttribute("font-family",G.fFamily),z.setAttribute("font-style",V.style),z.setAttribute("font-weight",V.weight),z.textContent="1",G.fClass?(z.style.fontFamily="inherit",z.setAttribute("class",G.fClass)):z.style.fontFamily=G.fFamily,q.appendChild(z),$=z}else{var ne=new OffscreenCanvas(500,500).getContext("2d");ne.font=V.style+" "+V.weight+" 100px "+G.fFamily,$=ne}function pe(xe){return N==="svg"?($.textContent=xe,$.getComputedTextLength()):$.measureText(xe).width}return{measureText:pe}}function k(G,q){if(!G){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=G.list;return}if(!document.body){this.isLoaded=!0,G.list.forEach(function(oe){oe.helper=S(oe),oe.cache={}}),this.fonts=G.list;return}var N=G.list,$,V=N.length,z=V;for($=0;$<V;$+=1){var ne=!0,pe,xe;if(N[$].loaded=!1,N[$].monoCase=x(N[$].fFamily,"monospace"),N[$].sansCase=x(N[$].fFamily,"sans-serif"),!N[$].fPath)N[$].loaded=!0,z-=1;else if(N[$].fOrigin==="p"||N[$].origin===3){if(pe=document.querySelectorAll('style[f-forigin="p"][f-family="'+N[$].fFamily+'"], style[f-origin="3"][f-family="'+N[$].fFamily+'"]'),pe.length>0&&(ne=!1),ne){var Ce=createTag("style");Ce.setAttribute("f-forigin",N[$].fOrigin),Ce.setAttribute("f-origin",N[$].origin),Ce.setAttribute("f-family",N[$].fFamily),Ce.type="text/css",Ce.innerText="@font-face {font-family: "+N[$].fFamily+"; font-style: normal; src: url('"+N[$].fPath+"');}",q.appendChild(Ce)}}else if(N[$].fOrigin==="g"||N[$].origin===1){for(pe=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),xe=0;xe<pe.length;xe+=1)pe[xe].href.indexOf(N[$].fPath)!==-1&&(ne=!1);if(ne){var ce=createTag("link");ce.setAttribute("f-forigin",N[$].fOrigin),ce.setAttribute("f-origin",N[$].origin),ce.type="text/css",ce.rel="stylesheet",ce.href=N[$].fPath,document.body.appendChild(ce)}}else if(N[$].fOrigin==="t"||N[$].origin===2){for(pe=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),xe=0;xe<pe.length;xe+=1)N[$].fPath===pe[xe].src&&(ne=!1);if(ne){var Re=createTag("link");Re.setAttribute("f-forigin",N[$].fOrigin),Re.setAttribute("f-origin",N[$].origin),Re.setAttribute("rel","stylesheet"),Re.setAttribute("href",N[$].fPath),q.appendChild(Re)}}N[$].helper=S(N[$],q),N[$].cache={},this.fonts.push(N[$])}z===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}function C(G){if(G){this.chars||(this.chars=[]);var q,N=G.length,$,V=this.chars.length,z;for(q=0;q<N;q+=1){for($=0,z=!1;$<V;)this.chars[$].style===G[q].style&&this.chars[$].fFamily===G[q].fFamily&&this.chars[$].ch===G[q].ch&&(z=!0),$+=1;z||(this.chars.push(G[q]),V+=1)}}}function P(G,q,N){for(var $=0,V=this.chars.length;$<V;){if(this.chars[$].ch===G&&this.chars[$].style===q&&this.chars[$].fFamily===N)return this.chars[$];$+=1}return(typeof G=="string"&&G.charCodeAt(0)!==13||!G)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",G,q,N)),e}function R(G,q,N){var $=this.getFontByName(q),V=G;if(!$.cache[V]){var z=$.helper;if(G===" "){var ne=z.measureText("|"+G+"|"),pe=z.measureText("||");$.cache[V]=(ne-pe)/100}else $.cache[V]=z.measureText(G)/100}return $.cache[V]*N}function j(G){for(var q=0,N=this.fonts.length;q<N;){if(this.fonts[q].fName===G)return this.fonts[q];q+=1}return this.fonts[0]}function I(G){var q=0,N=G.charCodeAt(0);if(N>=55296&&N<=56319){var $=G.charCodeAt(1);$>=56320&&$<=57343&&(q=(N-55296)*1024+$-56320+65536)}return q}function O(G,q){var N=G.toString(16)+q.toString(16);return g.indexOf(N)!==-1}function L(G){return G===c}function B(G){return G===l}function Z(G){var q=I(G);return q>=d&&q<=p}function te(G){return Z(G.substr(0,2))&&Z(G.substr(2,2))}function ie(G){return r.indexOf(G)!==-1}function Q(G,q){var N=I(G.substr(q,2));if(N!==n)return!1;var $=0;for(q+=2;$<5;){if(N=I(G.substr(q,2)),N<a||N>o)return!1;$+=1,q+=2}return I(G.substr(q,2))===s}function fe(){this.isLoaded=!0}var se=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};se.isModifier=O,se.isZeroWidthJoiner=L,se.isFlagEmoji=te,se.isRegionalCode=Z,se.isCombinedCharacter=ie,se.isRegionalFlag=Q,se.isVariationSelector=B,se.BLACK_FLAG_CODE_POINT=n;var Y={addChars:C,addFonts:k,getCharData:P,getFontByName:j,measureText:R,checkLoadedFonts:E,setIsLoaded:fe};return se.prototype=Y,se}();function SlotManager(t){this.animationData=t}SlotManager.prototype.getProp=function(t){return this.animationData.slots&&this.animationData.slots[t.sid]?Object.assign(t,this.animationData.slots[t.sid].p):t};function slotFactory(t){return new SlotManager(t)}function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(e){this.renderableComponents.indexOf(e)===-1&&this.renderableComponents.push(e)},removeRenderableComponent:function(e){this.renderableComponents.indexOf(e)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(e),1)},prepareRenderableFrame:function(e){this.checkLayerLimits(e)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(e){this.data.ip-this.data.st<=e&&this.data.op-this.data.st>e?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var e,r=this.renderableComponents.length;for(e=0;e<r;e+=1)this.renderableComponents[e].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=function(){var t={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(e){return t[e]||""}}();function SliderEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,0,0,r)}function AngleEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,0,0,r)}function ColorEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,1,0,r)}function PointEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,1,0,r)}function LayerIndexEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,0,0,r)}function MaskIndexEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,0,0,r)}function CheckboxEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,0,0,r)}function NoValueEffect(){this.p={}}function EffectsManager(t,e){var r=t.ef||[];this.effectElements=[];var n,s=r.length,a;for(n=0;n<s;n+=1)a=new GroupEffect(r[n],e),this.effectElements.push(a)}function GroupEffect(t,e){this.init(t,e)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(t,e){this.data=t,this.effectElements=[],this.initDynamicPropertyContainer(e);var r,n=this.data.ef.length,s,a=this.data.ef;for(r=0;r<n;r+=1){switch(s=null,a[r].ty){case 0:s=new SliderEffect(a[r],e,this);break;case 1:s=new AngleEffect(a[r],e,this);break;case 2:s=new ColorEffect(a[r],e,this);break;case 3:s=new PointEffect(a[r],e,this);break;case 4:case 7:s=new CheckboxEffect(a[r],e,this);break;case 10:s=new LayerIndexEffect(a[r],e,this);break;case 11:s=new MaskIndexEffect(a[r],e,this);break;case 5:s=new EffectsManager(a[r],e);break;default:s=new NoValueEffect(a[r]);break}s&&this.effectElements.push(s)}};function BaseElement(){}BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var e=0,r=this.data.masksProperties.length;e<r;){if(this.data.masksProperties[e].mode!=="n"&&this.data.masksProperties[e].cl!==!1)return!0;e+=1}return!1},initExpressions:function(){var e=getExpressionInterfaces();if(e){var r=e("layer"),n=e("effects"),s=e("shape"),a=e("text"),o=e("comp");this.layerInterface=r(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var l=n.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(l),this.data.ty===0||this.data.xt?this.compInterface=o(this):this.data.ty===4?(this.layerInterface.shapeInterface=s(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=a(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var e=getBlendMode(this.data.bm),r=this.baseElement||this.layerElement;r.style["mix-blend-mode"]=e},initBaseData:function(e,r,n){this.globalData=r,this.comp=n,this.data=e,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}};function FrameElement(){}FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(e,r){var n,s=this.dynamicProperties.length;for(n=0;n<s;n+=1)(r||this._isParent&&this.dynamicProperties[n].propType==="transform")&&(this.dynamicProperties[n].getValue(),this.dynamicProperties[n]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(e){this.dynamicProperties.indexOf(e)===-1&&this.dynamicProperties.push(e)}};function FootageElement(t,e,r){this.initFrame(),this.initRenderable(),this.assetData=e.getAssetData(t.refId),this.footageData=e.imageLoader.getAsset(this.assetData),this.initBaseData(t,e,r)}FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var t=getExpressionInterfaces();if(t){var e=t("footage");this.layerInterface=e(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData};function AudioElement(t,e,r){this.initFrame(),this.initRenderable(),this.assetData=e.getAssetData(t.refId),this.initBaseData(t,e,r),this._isPlaying=!1,this._canPlay=!1;var n=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(n),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,t.au&&t.au.lv?t.au.lv:{k:[100]},1,.01,this)}AudioElement.prototype.prepareFrame=function(t){if(this.prepareRenderableFrame(t,!0),this.prepareProperties(t,!0),this.tm._placeholder)this._currentTime=t/this.data.sr;else{var e=this.tm.v;this._currentTime=e}this._volume=this.lv.v[0];var r=this._volume*this._volumeMultiplier;this._previousVolume!==r&&(this._previousVolume=r,this.audio.volume(r))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(t){this.audio.rate(t)},AudioElement.prototype.volume=function(t){this._volumeMultiplier=t,this._previousVolume=t*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){};function BaseRenderer(){}BaseRenderer.prototype.checkLayers=function(t){var e,r=this.layers.length,n;for(this.completeLayers=!0,e=r-1;e>=0;e-=1)this.elements[e]||(n=this.layers[e],n.ip-n.st<=t-this.layers[e].st&&n.op-n.st>t-this.layers[e].st&&this.buildItem(e)),this.completeLayers=this.elements[e]?this.completeLayers:!1;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(t){switch(t.ty){case 2:return this.createImage(t);case 0:return this.createComp(t);case 1:return this.createSolid(t);case 3:return this.createNull(t);case 4:return this.createShape(t);case 5:return this.createText(t);case 6:return this.createAudio(t);case 13:return this.createCamera(t);case 15:return this.createFootage(t);default:return this.createNull(t)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(t){return new AudioElement(t,this.globalData,this)},BaseRenderer.prototype.createFootage=function(t){return new FootageElement(t,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)this.buildItem(t);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(t){this.completeLayers=!1;var e,r=t.length,n,s=this.layers.length;for(e=0;e<r;e+=1)for(n=0;n<s;){if(this.layers[n].id===t[e].id){this.layers[n]=t[e];break}n+=1}},BaseRenderer.prototype.setProjectInterface=function(t){this.globalData.projectInterface=t},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(t,e,r){for(var n=this.elements,s=this.layers,a=0,o=s.length;a<o;)s[a].ind==e&&(!n[a]||n[a]===!0?(this.buildItem(a),this.addPendingElement(t)):(r.push(n[a]),n[a].setAsParent(),s[a].parent!==void 0?this.buildElementParenting(t,s[a].parent,r):t.setHierarchy(r))),a+=1},BaseRenderer.prototype.addPendingElement=function(t){this.pendingElements.push(t)},BaseRenderer.prototype.searchExtraCompositions=function(t){var e,r=t.length;for(e=0;e<r;e+=1)if(t[e].xt){var n=this.createComp(t[e]);n.initExpressions(),this.globalData.projectInterface.registerComposition(n)}},BaseRenderer.prototype.getElementById=function(t){var e,r=this.elements.length;for(e=0;e<r;e+=1)if(this.elements[e].data.ind===t)return this.elements[e];return null},BaseRenderer.prototype.getElementByPath=function(t){var e=t.shift(),r;if(typeof e=="number")r=this.elements[e];else{var n,s=this.elements.length;for(n=0;n<s;n+=1)if(this.elements[n].data.nm===e){r=this.elements[n];break}}return t.length===0?r:r.getElementByPath(t)},BaseRenderer.prototype.setupGlobalData=function(t,e){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(t),this.globalData.fontManager.addChars(t.chars),this.globalData.fontManager.addFonts(t.fonts,e),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=t.fr,this.globalData.nm=t.nm,this.globalData.compSize={w:t.w,h:t.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}TransformElement.prototype={initTransform:function(){var e=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:e,localMat:e,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var e,r=this.finalTransform.mat,n=0,s=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;n<s;){if(this.hierarchy[n].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}n+=1}if(this.finalTransform._matMdf)for(e=this.finalTransform.mProp.v.props,r.cloneFromProps(e),n=0;n<s;n+=1)r.multiply(this.hierarchy[n].finalTransform.mProp.v)}(!this.localTransforms||this.finalTransform._matMdf)&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var e=0,r=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;e<r;)this.localTransforms[e]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[e]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),e+=1;if(this.finalTransform._localMatMdf){var n=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(n),e=1;e<r;e+=1){var s=this.localTransforms[e].matrix;n.multiply(s)}n.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var a=this.finalTransform.localOpacity;for(e=0;e<r;e+=1)a*=this.localTransforms[e].opacity*.01;this.finalTransform.localOpacity=a}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var e=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(e.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var r=0,n=e.length;for(r=0;r<n;r+=1)this.localTransforms.push(e[r])}}},globalToLocal:function(e){var r=[];r.push(this.finalTransform);for(var n=!0,s=this.comp;n;)s.finalTransform?(s.data.hasMask&&r.splice(0,0,s.finalTransform),s=s.comp):n=!1;var a,o=r.length,l;for(a=0;a<o;a+=1)l=r[a].mat.applyToPointArray(0,0,0),e=[e[0]-l[0],e[1]-l[1],0];return e},mHelper:new Matrix};function MaskElement(t,e,r){this.data=t,this.element=e,this.globalData=r,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var n=this.globalData.defs,s,a=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(a),this.solidPath="";var o,l=this.masksProperties,c=0,d=[],p,g,y=createElementID(),x,E,S,k,C="clipPath",P="clip-path";for(s=0;s<a;s+=1)if((l[s].mode!=="a"&&l[s].mode!=="n"||l[s].inv||l[s].o.k!==100||l[s].o.x)&&(C="mask",P="mask"),(l[s].mode==="s"||l[s].mode==="i")&&c===0?(x=createNS("rect"),x.setAttribute("fill","#ffffff"),x.setAttribute("width",this.element.comp.data.w||0),x.setAttribute("height",this.element.comp.data.h||0),d.push(x)):x=null,o=createNS("path"),l[s].mode==="n")this.viewData[s]={op:PropertyFactory.getProp(this.element,l[s].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,l[s],3),elem:o,lastPath:""},n.appendChild(o);else{c+=1,o.setAttribute("fill",l[s].mode==="s"?"#000000":"#ffffff"),o.setAttribute("clip-rule","nonzero");var R;if(l[s].x.k!==0?(C="mask",P="mask",k=PropertyFactory.getProp(this.element,l[s].x,0,null,this.element),R=createElementID(),E=createNS("filter"),E.setAttribute("id",R),S=createNS("feMorphology"),S.setAttribute("operator","erode"),S.setAttribute("in","SourceGraphic"),S.setAttribute("radius","0"),E.appendChild(S),n.appendChild(E),o.setAttribute("stroke",l[s].mode==="s"?"#000000":"#ffffff")):(S=null,k=null),this.storedData[s]={elem:o,x:k,expan:S,lastPath:"",lastOperator:"",filterId:R,lastRadius:0},l[s].mode==="i"){g=d.length;var j=createNS("g");for(p=0;p<g;p+=1)j.appendChild(d[p]);var I=createNS("mask");I.setAttribute("mask-type","alpha"),I.setAttribute("id",y+"_"+c),I.appendChild(o),n.appendChild(I),j.setAttribute("mask","url("+getLocationHref()+"#"+y+"_"+c+")"),d.length=0,d.push(j)}else d.push(o);l[s].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[s]={elem:o,lastPath:"",op:PropertyFactory.getProp(this.element,l[s].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,l[s],3),invRect:x},this.viewData[s].prop.k||this.drawPath(l[s],this.viewData[s].prop.v,this.viewData[s])}for(this.maskElement=createNS(C),a=d.length,s=0;s<a;s+=1)this.maskElement.appendChild(d[s]);c>0&&(this.maskElement.setAttribute("id",y),this.element.maskedElement.setAttribute(P,"url("+getLocationHref()+"#"+y+")"),n.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}MaskElement.prototype.getMaskProperty=function(t){return this.viewData[t].prop},MaskElement.prototype.renderFrame=function(t){var e=this.element.finalTransform.mat,r,n=this.masksProperties.length;for(r=0;r<n;r+=1)if((this.viewData[r].prop._mdf||t)&&this.drawPath(this.masksProperties[r],this.viewData[r].prop.v,this.viewData[r]),(this.viewData[r].op._mdf||t)&&this.viewData[r].elem.setAttribute("fill-opacity",this.viewData[r].op.v),this.masksProperties[r].mode!=="n"&&(this.viewData[r].invRect&&(this.element.finalTransform.mProp._mdf||t)&&this.viewData[r].invRect.setAttribute("transform",e.getInverseMatrix().to2dCSS()),this.storedData[r].x&&(this.storedData[r].x._mdf||t))){var s=this.storedData[r].expan;this.storedData[r].x.v<0?(this.storedData[r].lastOperator!=="erode"&&(this.storedData[r].lastOperator="erode",this.storedData[r].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[r].filterId+")")),s.setAttribute("radius",-this.storedData[r].x.v)):(this.storedData[r].lastOperator!=="dilate"&&(this.storedData[r].lastOperator="dilate",this.storedData[r].elem.setAttribute("filter",null)),this.storedData[r].elem.setAttribute("stroke-width",this.storedData[r].x.v*2))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var t="M0,0 ";return t+=" h"+this.globalData.compSize.w,t+=" v"+this.globalData.compSize.h,t+=" h-"+this.globalData.compSize.w,t+=" v-"+this.globalData.compSize.h+" ",t},MaskElement.prototype.drawPath=function(t,e,r){var n=" M"+e.v[0][0]+","+e.v[0][1],s,a;for(a=e._length,s=1;s<a;s+=1)n+=" C"+e.o[s-1][0]+","+e.o[s-1][1]+" "+e.i[s][0]+","+e.i[s][1]+" "+e.v[s][0]+","+e.v[s][1];if(e.c&&a>1&&(n+=" C"+e.o[s-1][0]+","+e.o[s-1][1]+" "+e.i[0][0]+","+e.i[0][1]+" "+e.v[0][0]+","+e.v[0][1]),r.lastPath!==n){var o="";r.elem&&(e.c&&(o=t.inv?this.solidPath+n:n),r.elem.setAttribute("d",o)),r.lastPath=n}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var t={};t.createFilter=e,t.createAlphaToLuminanceFilter=r;function e(n,s){var a=createNS("filter");return a.setAttribute("id",n),s!==!0&&(a.setAttribute("filterUnits","objectBoundingBox"),a.setAttribute("x","0%"),a.setAttribute("y","0%"),a.setAttribute("width","100%"),a.setAttribute("height","100%")),a}function r(){var n=createNS("feColorMatrix");return n.setAttribute("type","matrix"),n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),n}return t}(),featureSupport=function(){var t={maskType:!0,svgLumaHidden:!0,offscreenCanvas:typeof OffscreenCanvas<"u"};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(t.maskType=!1),/firefox/i.test(navigator.userAgent)&&(t.svgLumaHidden=!1),t}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(t){var e,r="SourceGraphic",n=t.data.ef?t.data.ef.length:0,s=createElementID(),a=filtersFactory.createFilter(s,!0),o=0;this.filters=[];var l;for(e=0;e<n;e+=1){l=null;var c=t.data.ef[e].ty;if(registeredEffects$1[c]){var d=registeredEffects$1[c].effect;l=new d(a,t.effectsManager.effectElements[e],t,idPrefix+o,r),r=idPrefix+o,registeredEffects$1[c].countsAsEffect&&(o+=1)}l&&this.filters.push(l)}o&&(t.globalData.defs.appendChild(a),t.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+s+")")),this.filters.length&&t.addRenderableComponent(this)}SVGEffects.prototype.renderFrame=function(t){var e,r=this.filters.length;for(e=0;e<r;e+=1)this.filters[e].renderFrame(t)},SVGEffects.prototype.getEffects=function(t){var e,r=this.filters.length,n=[];for(e=0;e<r;e+=1)this.filters[e].type===t&&n.push(this.filters[e]);return n};function registerEffect$1(t,e,r){registeredEffects$1[t]={effect:e,countsAsEffect:r}}function SVGBaseElement(){}SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var e=null;if(this.data.td){this.matteMasks={};var r=createNS("g");r.setAttribute("id",this.layerId),r.appendChild(this.layerElement),e=r,this.globalData.defs.appendChild(r)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),e=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var n=createNS("clipPath"),s=createNS("path");s.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var a=createElementID();if(n.setAttribute("id",a),n.appendChild(s),this.globalData.defs.appendChild(n),this.checkMasks()){var o=createNS("g");o.setAttribute("clip-path","url("+getLocationHref()+"#"+a+")"),o.appendChild(this.layerElement),this.transformedElement=o,e?e.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+a+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(e){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[e]){var r=this.layerId+"_"+e,n,s,a,o;if(e===1||e===3){var l=createNS("mask");l.setAttribute("id",r),l.setAttribute("mask-type",e===3?"luminance":"alpha"),a=createNS("use"),a.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),l.appendChild(a),this.globalData.defs.appendChild(l),!featureSupport.maskType&&e===1&&(l.setAttribute("mask-type","luminance"),n=createElementID(),s=filtersFactory.createFilter(n),this.globalData.defs.appendChild(s),s.appendChild(filtersFactory.createAlphaToLuminanceFilter()),o=createNS("g"),o.appendChild(a),l.appendChild(o),o.setAttribute("filter","url("+getLocationHref()+"#"+n+")"))}else if(e===2){var c=createNS("mask");c.setAttribute("id",r),c.setAttribute("mask-type","alpha");var d=createNS("g");c.appendChild(d),n=createElementID(),s=filtersFactory.createFilter(n);var p=createNS("feComponentTransfer");p.setAttribute("in","SourceGraphic"),s.appendChild(p);var g=createNS("feFuncA");g.setAttribute("type","table"),g.setAttribute("tableValues","1.0 0.0"),p.appendChild(g),this.globalData.defs.appendChild(s);var y=createNS("rect");y.setAttribute("width",this.comp.data.w),y.setAttribute("height",this.comp.data.h),y.setAttribute("x","0"),y.setAttribute("y","0"),y.setAttribute("fill","#ffffff"),y.setAttribute("opacity","0"),d.setAttribute("filter","url("+getLocationHref()+"#"+n+")"),d.appendChild(y),a=createNS("use"),a.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),d.appendChild(a),featureSupport.maskType||(c.setAttribute("mask-type","luminance"),s.appendChild(filtersFactory.createAlphaToLuminanceFilter()),o=createNS("g"),d.appendChild(y),o.appendChild(this.layerElement),d.appendChild(o)),this.globalData.defs.appendChild(c)}this.matteMasks[e]=r}return this.matteMasks[e]},setMatte:function(e){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+e+")")}};function HierarchyElement(){}HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(e){this.hierarchy=e},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}};function RenderableDOMElement(){}(function(){var t={initElement:function(r,n,s){this.initFrame(),this.initBaseData(r,n,s),this.initTransform(r,n,s),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){var r=this.baseElement||this.layerElement;r.style.display="none",this.hidden=!0}},show:function(){if(this.isInRange&&!this.isTransparent){if(!this.data.hd){var r=this.baseElement||this.layerElement;r.style.display="block"}this.hidden=!1,this._isFirstFrame=!0}},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(r){this._mdf=!1,this.prepareRenderableFrame(r),this.prepareProperties(r,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}};extendPrototype([RenderableElement,createProxyFunction(t)],RenderableDOMElement)})();function IImageElement(t,e,r){this.assetData=e.getAssetData(t.refId),this.assetData&&this.assetData.sid&&(this.assetData=e.slotManager.getProp(this.assetData)),this.initElement(t,e,r),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var t=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",t),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect};function ProcessedElement(t,e){this.elem=t,this.pos=e}function IShapeElement(){}IShapeElement.prototype={addShapeToModifiers:function(e){var r,n=this.shapeModifiers.length;for(r=0;r<n;r+=1)this.shapeModifiers[r].addShape(e)},isShapeInAnimatedModifiers:function(e){for(var r=0,n=this.shapeModifiers.length;r<n;)if(this.shapeModifiers[r].isAnimatedWithShape(e))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var e,r=this.shapes.length;for(e=0;e<r;e+=1)this.shapes[e].sh.reset();r=this.shapeModifiers.length;var n;for(e=r-1;e>=0&&(n=this.shapeModifiers[e].processShapes(this._isFirstFrame),!n);e-=1);}},searchProcessedElement:function(e){for(var r=this.processedElements,n=0,s=r.length;n<s;){if(r[n].elem===e)return r[n].pos;n+=1}return 0},addProcessedElement:function(e,r){for(var n=this.processedElements,s=n.length;s;)if(s-=1,n[s].elem===e){n[s].pos=r;return}n.push(new ProcessedElement(e,r))},prepareFrame:function(e){this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(t,e,r){this.caches=[],this.styles=[],this.transformers=t,this.lStr="",this.sh=r,this.lvl=e,this._isAnimated=!!r.k;for(var n=0,s=t.length;n<s;){if(t[n].mProps.dynamicProperties.length){this._isAnimated=!0;break}n+=1}}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0};function SVGStyleData(t,e){this.data=t,this.type=t.ty,this.d="",this.lvl=e,this._mdf=!1,this.closed=t.hd===!0,this.pElem=createNS("path"),this.msElem=null}SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1};function DashProperty(t,e,r,n){this.elem=t,this.frameId=-1,this.dataProps=createSizedArray(e.length),this.renderer=r,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",e.length?e.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(n);var s,a=e.length||0,o;for(s=0;s<a;s+=1)o=PropertyFactory.getProp(t,e[s].v,0,0,this),this.k=o.k||this.k,this.dataProps[s]={n:e[s].n,p:o};this.k||this.getValue(!0),this._isAnimated=this.k}DashProperty.prototype.getValue=function(t){if(!(this.elem.globalData.frameId===this.frameId&&!t)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||t,this._mdf)){var e=0,r=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),e=0;e<r;e+=1)this.dataProps[e].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[e].p.v:this.dashArray[e]=this.dataProps[e].p.v:this.dashoffset[0]=this.dataProps[e].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty);function SVGStrokeStyleData(t,e,r){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.w=PropertyFactory.getProp(t,e.w,0,null,this),this.d=new DashProperty(t,e.d||{},"svg",this),this.c=PropertyFactory.getProp(t,e.c,1,255,this),this.style=r,this._isAnimated=!!this._isAnimated}extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData);function SVGFillStyleData(t,e,r){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.c=PropertyFactory.getProp(t,e.c,1,255,this),this.style=r}extendPrototype([DynamicPropertyContainer],SVGFillStyleData);function SVGNoStyleData(t,e,r){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.style=r}extendPrototype([DynamicPropertyContainer],SVGNoStyleData);function GradientProperty(t,e,r){this.data=e,this.c=createTypedArray("uint8c",e.p*4);var n=e.k.k[0].s?e.k.k[0].s.length-e.p*4:e.k.k.length-e.p*4;this.o=createTypedArray("float32",n),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=n,this.initDynamicPropertyContainer(r),this.prop=PropertyFactory.getProp(t,e.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}GradientProperty.prototype.comparePoints=function(t,e){for(var r=0,n=this.o.length/2,s;r<n;){if(s=Math.abs(t[r*4]-t[e*4+r*2]),s>.01)return!1;r+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4)return!1;if(this.data.k.k[0].s)for(var t=0,e=this.data.k.k.length;t<e;){if(!this.comparePoints(this.data.k.k[t].s,this.data.p))return!1;t+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(t){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||t){var e,r=this.data.p*4,n,s;for(e=0;e<r;e+=1)n=e%4===0?100:255,s=Math.round(this.prop.v[e]*n),this.c[e]!==s&&(this.c[e]=s,this._cmdf=!t);if(this.o.length)for(r=this.prop.v.length,e=this.data.p*4;e<r;e+=1)n=e%2===0?100:1,s=e%2===0?Math.round(this.prop.v[e]*100):this.prop.v[e],this.o[e-this.data.p*4]!==s&&(this.o[e-this.data.p*4]=s,this._omdf=!t);this._mdf=!t}},extendPrototype([DynamicPropertyContainer],GradientProperty);function SVGGradientFillStyleData(t,e,r){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.initGradientData(t,e,r)}SVGGradientFillStyleData.prototype.initGradientData=function(t,e,r){this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.s=PropertyFactory.getProp(t,e.s,1,null,this),this.e=PropertyFactory.getProp(t,e.e,1,null,this),this.h=PropertyFactory.getProp(t,e.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(t,e.a||{k:0},0,degToRads,this),this.g=new GradientProperty(t,e.g,this),this.style=r,this.stops=[],this.setGradientData(r.pElem,e),this.setGradientOpacity(e,r),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(t,e){var r=createElementID(),n=createNS(e.t===1?"linearGradient":"radialGradient");n.setAttribute("id",r),n.setAttribute("spreadMethod","pad"),n.setAttribute("gradientUnits","userSpaceOnUse");var s=[],a,o,l;for(l=e.g.p*4,o=0;o<l;o+=4)a=createNS("stop"),n.appendChild(a),s.push(a);t.setAttribute(e.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+r+")"),this.gf=n,this.cst=s},SVGGradientFillStyleData.prototype.setGradientOpacity=function(t,e){if(this.g._hasOpacity&&!this.g._collapsable){var r,n,s,a=createNS("mask"),o=createNS("path");a.appendChild(o);var l=createElementID(),c=createElementID();a.setAttribute("id",c);var d=createNS(t.t===1?"linearGradient":"radialGradient");d.setAttribute("id",l),d.setAttribute("spreadMethod","pad"),d.setAttribute("gradientUnits","userSpaceOnUse"),s=t.g.k.k[0].s?t.g.k.k[0].s.length:t.g.k.k.length;var p=this.stops;for(n=t.g.p*4;n<s;n+=2)r=createNS("stop"),r.setAttribute("stop-color","rgb(255,255,255)"),d.appendChild(r),p.push(r);o.setAttribute(t.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+l+")"),t.ty==="gs"&&(o.setAttribute("stroke-linecap",lineCapEnum[t.lc||2]),o.setAttribute("stroke-linejoin",lineJoinEnum[t.lj||2]),t.lj===1&&o.setAttribute("stroke-miterlimit",t.ml)),this.of=d,this.ms=a,this.ost=p,this.maskId=c,e.msElem=o}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData);function SVGGradientStrokeStyleData(t,e,r){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(t,e.w,0,null,this),this.d=new DashProperty(t,e.d||{},"svg",this),this.initGradientData(t,e,r),this._isAnimated=!!this._isAnimated}extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(t,e,r){this.transform={mProps:t,op:e,container:r},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}var buildShapeString=function(e,r,n,s){if(r===0)return"";var a=e.o,o=e.i,l=e.v,c,d=" M"+s.applyToPointStringified(l[0][0],l[0][1]);for(c=1;c<r;c+=1)d+=" C"+s.applyToPointStringified(a[c-1][0],a[c-1][1])+" "+s.applyToPointStringified(o[c][0],o[c][1])+" "+s.applyToPointStringified(l[c][0],l[c][1]);return n&&r&&(d+=" C"+s.applyToPointStringified(a[c-1][0],a[c-1][1])+" "+s.applyToPointStringified(o[0][0],o[0][1])+" "+s.applyToPointStringified(l[0][0],l[0][1]),d+="z"),d},SVGElementsRenderer=function(){var t=new Matrix,e=new Matrix,r={createRenderFunction:n};function n(g){switch(g.ty){case"fl":return l;case"gf":return d;case"gs":return c;case"st":return p;case"sh":case"el":case"rc":case"sr":return o;case"tr":return s;case"no":return a;default:return null}}function s(g,y,x){(x||y.transform.op._mdf)&&y.transform.container.setAttribute("opacity",y.transform.op.v),(x||y.transform.mProps._mdf)&&y.transform.container.setAttribute("transform",y.transform.mProps.v.to2dCSS())}function a(){}function o(g,y,x){var E,S,k,C,P,R,j=y.styles.length,I=y.lvl,O,L,B,Z;for(R=0;R<j;R+=1){if(C=y.sh._mdf||x,y.styles[R].lvl<I){for(L=e.reset(),B=I-y.styles[R].lvl,Z=y.transformers.length-1;!C&&B>0;)C=y.transformers[Z].mProps._mdf||C,B-=1,Z-=1;if(C)for(B=I-y.styles[R].lvl,Z=y.transformers.length-1;B>0;)L.multiply(y.transformers[Z].mProps.v),B-=1,Z-=1}else L=t;if(O=y.sh.paths,S=O._length,C){for(k="",E=0;E<S;E+=1)P=O.shapes[E],P&&P._length&&(k+=buildShapeString(P,P._length,P.c,L));y.caches[R]=k}else k=y.caches[R];y.styles[R].d+=g.hd===!0?"":k,y.styles[R]._mdf=C||y.styles[R]._mdf}}function l(g,y,x){var E=y.style;(y.c._mdf||x)&&E.pElem.setAttribute("fill","rgb("+bmFloor(y.c.v[0])+","+bmFloor(y.c.v[1])+","+bmFloor(y.c.v[2])+")"),(y.o._mdf||x)&&E.pElem.setAttribute("fill-opacity",y.o.v)}function c(g,y,x){d(g,y,x),p(g,y,x)}function d(g,y,x){var E=y.gf,S=y.g._hasOpacity,k=y.s.v,C=y.e.v;if(y.o._mdf||x){var P=g.ty==="gf"?"fill-opacity":"stroke-opacity";y.style.pElem.setAttribute(P,y.o.v)}if(y.s._mdf||x){var R=g.t===1?"x1":"cx",j=R==="x1"?"y1":"cy";E.setAttribute(R,k[0]),E.setAttribute(j,k[1]),S&&!y.g._collapsable&&(y.of.setAttribute(R,k[0]),y.of.setAttribute(j,k[1]))}var I,O,L,B;if(y.g._cmdf||x){I=y.cst;var Z=y.g.c;for(L=I.length,O=0;O<L;O+=1)B=I[O],B.setAttribute("offset",Z[O*4]+"%"),B.setAttribute("stop-color","rgb("+Z[O*4+1]+","+Z[O*4+2]+","+Z[O*4+3]+")")}if(S&&(y.g._omdf||x)){var te=y.g.o;for(y.g._collapsable?I=y.cst:I=y.ost,L=I.length,O=0;O<L;O+=1)B=I[O],y.g._collapsable||B.setAttribute("offset",te[O*2]+"%"),B.setAttribute("stop-opacity",te[O*2+1])}if(g.t===1)(y.e._mdf||x)&&(E.setAttribute("x2",C[0]),E.setAttribute("y2",C[1]),S&&!y.g._collapsable&&(y.of.setAttribute("x2",C[0]),y.of.setAttribute("y2",C[1])));else{var ie;if((y.s._mdf||y.e._mdf||x)&&(ie=Math.sqrt(Math.pow(k[0]-C[0],2)+Math.pow(k[1]-C[1],2)),E.setAttribute("r",ie),S&&!y.g._collapsable&&y.of.setAttribute("r",ie)),y.s._mdf||y.e._mdf||y.h._mdf||y.a._mdf||x){ie||(ie=Math.sqrt(Math.pow(k[0]-C[0],2)+Math.pow(k[1]-C[1],2)));var Q=Math.atan2(C[1]-k[1],C[0]-k[0]),fe=y.h.v;fe>=1?fe=.99:fe<=-1&&(fe=-.99);var se=ie*fe,Y=Math.cos(Q+y.a.v)*se+k[0],G=Math.sin(Q+y.a.v)*se+k[1];E.setAttribute("fx",Y),E.setAttribute("fy",G),S&&!y.g._collapsable&&(y.of.setAttribute("fx",Y),y.of.setAttribute("fy",G))}}}function p(g,y,x){var E=y.style,S=y.d;S&&(S._mdf||x)&&S.dashStr&&(E.pElem.setAttribute("stroke-dasharray",S.dashStr),E.pElem.setAttribute("stroke-dashoffset",S.dashoffset[0])),y.c&&(y.c._mdf||x)&&E.pElem.setAttribute("stroke","rgb("+bmFloor(y.c.v[0])+","+bmFloor(y.c.v[1])+","+bmFloor(y.c.v[2])+")"),(y.o._mdf||x)&&E.pElem.setAttribute("stroke-opacity",y.o.v),(y.w._mdf||x)&&(E.pElem.setAttribute("stroke-width",y.w.v),E.msElem&&E.msElem.setAttribute("stroke-width",y.w.v))}return r}();function SVGShapeElement(t,e,r){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(t,e,r),this.prevViewData=[]}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var t,e=this.shapes.length,r,n,s=this.stylesList.length,a,o=[],l=!1;for(n=0;n<s;n+=1){for(a=this.stylesList[n],l=!1,o.length=0,t=0;t<e;t+=1)r=this.shapes[t],r.styles.indexOf(a)!==-1&&(o.push(r),l=r._isAnimated||l);o.length>1&&l&&this.setShapesAsAnimated(o)}},SVGShapeElement.prototype.setShapesAsAnimated=function(t){var e,r=t.length;for(e=0;e<r;e+=1)t[e].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(t,e){var r,n=new SVGStyleData(t,e),s=n.pElem;if(t.ty==="st")r=new SVGStrokeStyleData(this,t,n);else if(t.ty==="fl")r=new SVGFillStyleData(this,t,n);else if(t.ty==="gf"||t.ty==="gs"){var a=t.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData;r=new a(this,t,n),this.globalData.defs.appendChild(r.gf),r.maskId&&(this.globalData.defs.appendChild(r.ms),this.globalData.defs.appendChild(r.of),s.setAttribute("mask","url("+getLocationHref()+"#"+r.maskId+")"))}else t.ty==="no"&&(r=new SVGNoStyleData(this,t,n));return(t.ty==="st"||t.ty==="gs")&&(s.setAttribute("stroke-linecap",lineCapEnum[t.lc||2]),s.setAttribute("stroke-linejoin",lineJoinEnum[t.lj||2]),s.setAttribute("fill-opacity","0"),t.lj===1&&s.setAttribute("stroke-miterlimit",t.ml)),t.r===2&&s.setAttribute("fill-rule","evenodd"),t.ln&&s.setAttribute("id",t.ln),t.cl&&s.setAttribute("class",t.cl),t.bm&&(s.style["mix-blend-mode"]=getBlendMode(t.bm)),this.stylesList.push(n),this.addToAnimatedContents(t,r),r},SVGShapeElement.prototype.createGroupElement=function(t){var e=new ShapeGroupData;return t.ln&&e.gr.setAttribute("id",t.ln),t.cl&&e.gr.setAttribute("class",t.cl),t.bm&&(e.gr.style["mix-blend-mode"]=getBlendMode(t.bm)),e},SVGShapeElement.prototype.createTransformElement=function(t,e){var r=TransformPropertyFactory.getTransformProperty(this,t,this),n=new SVGTransformData(r,r.o,e);return this.addToAnimatedContents(t,n),n},SVGShapeElement.prototype.createShapeElement=function(t,e,r){var n=4;t.ty==="rc"?n=5:t.ty==="el"?n=6:t.ty==="sr"&&(n=7);var s=ShapePropertyFactory.getShapeProp(this,t,n,this),a=new SVGShapeData(e,r,s);return this.shapes.push(a),this.addShapeToModifiers(a),this.addToAnimatedContents(t,a),a},SVGShapeElement.prototype.addToAnimatedContents=function(t,e){for(var r=0,n=this.animatedContents.length;r<n;){if(this.animatedContents[r].element===e)return;r+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(t),element:e,data:t})},SVGShapeElement.prototype.setElementStyles=function(t){var e=t.styles,r,n=this.stylesList.length;for(r=0;r<n;r+=1)e.indexOf(this.stylesList[r])===-1&&!this.stylesList[r].closed&&e.push(this.stylesList[r])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var t,e=this.itemsData.length;for(t=0;t<e;t+=1)this.prevViewData[t]=this.itemsData[t];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),e=this.dynamicProperties.length,t=0;t<e;t+=1)this.dynamicProperties[t].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(t,e,r,n,s,a,o){var l=[].concat(a),c,d=t.length-1,p,g,y=[],x=[],E,S,k;for(c=d;c>=0;c-=1){if(k=this.searchProcessedElement(t[c]),k?e[c]=r[k-1]:t[c]._render=o,t[c].ty==="fl"||t[c].ty==="st"||t[c].ty==="gf"||t[c].ty==="gs"||t[c].ty==="no")k?e[c].style.closed=t[c].hd:e[c]=this.createStyleElement(t[c],s),t[c]._render&&e[c].style.pElem.parentNode!==n&&n.appendChild(e[c].style.pElem),y.push(e[c].style);else if(t[c].ty==="gr"){if(!k)e[c]=this.createGroupElement(t[c]);else for(g=e[c].it.length,p=0;p<g;p+=1)e[c].prevViewData[p]=e[c].it[p];this.searchShapes(t[c].it,e[c].it,e[c].prevViewData,e[c].gr,s+1,l,o),t[c]._render&&e[c].gr.parentNode!==n&&n.appendChild(e[c].gr)}else t[c].ty==="tr"?(k||(e[c]=this.createTransformElement(t[c],n)),E=e[c].transform,l.push(E)):t[c].ty==="sh"||t[c].ty==="rc"||t[c].ty==="el"||t[c].ty==="sr"?(k||(e[c]=this.createShapeElement(t[c],l,s)),this.setElementStyles(e[c])):t[c].ty==="tm"||t[c].ty==="rd"||t[c].ty==="ms"||t[c].ty==="pb"||t[c].ty==="zz"||t[c].ty==="op"?(k?(S=e[c],S.closed=!1):(S=ShapeModifiers.getModifier(t[c].ty),S.init(this,t[c]),e[c]=S,this.shapeModifiers.push(S)),x.push(S)):t[c].ty==="rp"&&(k?(S=e[c],S.closed=!0):(S=ShapeModifiers.getModifier(t[c].ty),e[c]=S,S.init(this,t,c,e),this.shapeModifiers.push(S),o=!1),x.push(S));this.addProcessedElement(t[c],c+1)}for(d=y.length,c=0;c<d;c+=1)y[c].closed=!0;for(d=x.length,c=0;c<d;c+=1)x[c].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var t,e=this.stylesList.length;for(t=0;t<e;t+=1)this.stylesList[t].reset();for(this.renderShape(),t=0;t<e;t+=1)(this.stylesList[t]._mdf||this._isFirstFrame)&&(this.stylesList[t].msElem&&(this.stylesList[t].msElem.setAttribute("d",this.stylesList[t].d),this.stylesList[t].d="M0 0"+this.stylesList[t].d),this.stylesList[t].pElem.setAttribute("d",this.stylesList[t].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var t,e=this.animatedContents.length,r;for(t=0;t<e;t+=1)r=this.animatedContents[t],(this._isFirstFrame||r.element._isAnimated)&&r.data!==!0&&r.fn(r.data,r.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null};function LetterProps(t,e,r,n,s,a){this.o=t,this.sw=e,this.sc=r,this.fc=n,this.m=s,this.p=a,this._mdf={o:!0,sw:!!e,sc:!!r,fc:!!n,m:!0,p:!0}}LetterProps.prototype.update=function(t,e,r,n,s,a){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var o=!1;return this.o!==t&&(this.o=t,this._mdf.o=!0,o=!0),this.sw!==e&&(this.sw=e,this._mdf.sw=!0,o=!0),this.sc!==r&&(this.sc=r,this._mdf.sc=!0,o=!0),this.fc!==n&&(this.fc=n,this._mdf.fc=!0,o=!0),this.m!==s&&(this.m=s,this._mdf.m=!0,o=!0),a.length&&(this.p[0]!==a[0]||this.p[1]!==a[1]||this.p[4]!==a[4]||this.p[5]!==a[5]||this.p[12]!==a[12]||this.p[13]!==a[13])&&(this.p=a,this._mdf.p=!0,o=!0),o};function TextProperty(t,e){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,e.d&&e.d.sid&&(e.d=t.globalData.slotManager.getProp(e.d)),this.data=e,this.elem=t,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},TextProperty.prototype.setCurrentData=function(t){t.__complete||this.completeTextData(t),this.currentData=t,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(t){this.effectsSequence.push(t),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(t){if(!((this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)&&!t)){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var e=this.currentData,r=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=!0,this._mdf=!1;var n,s=this.effectsSequence.length,a=t||this.data.d.k[this.keysIndex].s;for(n=0;n<s;n+=1)r!==this.keysIndex?a=this.effectsSequence[n](a,a.t):a=this.effectsSequence[n](this.currentData,a.t);e!==a&&this.setCurrentData(a),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var t=this.data.d.k,e=this.elem.comp.renderedFrame,r=0,n=t.length;r<=n-1&&!(r===n-1||t[r+1].t>e);)r+=1;return this.keysIndex!==r&&(this.keysIndex=r),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(t){for(var e=[],r=0,n=t.length,s,a,o=!1,l=!1,c="";r<n;)o=l,l=!1,s=t.charCodeAt(r),c=t.charAt(r),FontManager.isCombinedCharacter(s)?o=!0:s>=55296&&s<=56319?FontManager.isRegionalFlag(t,r)?c=t.substr(r,14):(a=t.charCodeAt(r+1),a>=56320&&a<=57343&&(FontManager.isModifier(s,a)?(c=t.substr(r,2),o=!0):FontManager.isFlagEmoji(t.substr(r,4))?c=t.substr(r,4):c=t.substr(r,2))):s>56319?(a=t.charCodeAt(r+1),FontManager.isVariationSelector(s)&&(o=!0)):FontManager.isZeroWidthJoiner(s)&&(o=!0,l=!0),o?(e[e.length-1]+=c,o=!1):e.push(c),r+=c.length;return e},TextProperty.prototype.completeTextData=function(t){t.__complete=!0;var e=this.elem.globalData.fontManager,r=this.data,n=[],s,a,o,l=0,c,d=r.m.g,p=0,g=0,y=0,x=[],E=0,S=0,k,C,P=e.getFontByName(t.f),R,j=0,I=getFontProperties(P);t.fWeight=I.weight,t.fStyle=I.style,t.finalSize=t.s,t.finalText=this.buildFinalText(t.t),a=t.finalText.length,t.finalLineHeight=t.lh;var O=t.tr/1e3*t.finalSize,L;if(t.sz)for(var B=!0,Z=t.sz[0],te=t.sz[1],ie,Q;B;){Q=this.buildFinalText(t.t),ie=0,E=0,a=Q.length,O=t.tr/1e3*t.finalSize;var fe=-1;for(s=0;s<a;s+=1)L=Q[s].charCodeAt(0),o=!1,Q[s]===" "?fe=s:(L===13||L===3)&&(E=0,o=!0,ie+=t.finalLineHeight||t.finalSize*1.2),e.chars?(R=e.getCharData(Q[s],P.fStyle,P.fFamily),j=o?0:R.w*t.finalSize/100):j=e.measureText(Q[s],t.f,t.finalSize),E+j>Z&&Q[s]!==" "?(fe===-1?a+=1:s=fe,ie+=t.finalLineHeight||t.finalSize*1.2,Q.splice(s,fe===s?1:0,"\r"),fe=-1,E=0):(E+=j,E+=O);ie+=P.ascent*t.finalSize/100,this.canResize&&t.finalSize>this.minimumFontSize&&te<ie?(t.finalSize-=1,t.finalLineHeight=t.finalSize*t.lh/t.s):(t.finalText=Q,a=t.finalText.length,B=!1)}E=-O,j=0;var se=0,Y;for(s=0;s<a;s+=1)if(o=!1,Y=t.finalText[s],L=Y.charCodeAt(0),L===13||L===3?(se=0,x.push(E),S=E>S?E:S,E=-2*O,c="",o=!0,y+=1):c=Y,e.chars?(R=e.getCharData(Y,P.fStyle,e.getFontByName(t.f).fFamily),j=o?0:R.w*t.finalSize/100):j=e.measureText(c,t.f,t.finalSize),Y===" "?se+=j+O:(E+=j+O+se,se=0),n.push({l:j,an:j,add:p,n:o,anIndexes:[],val:c,line:y,animatorJustifyOffset:0}),d==2){if(p+=j,c===""||c===" "||s===a-1){for((c===""||c===" ")&&(p-=j);g<=s;)n[g].an=p,n[g].ind=l,n[g].extra=j,g+=1;l+=1,p=0}}else if(d==3){if(p+=j,c===""||s===a-1){for(c===""&&(p-=j);g<=s;)n[g].an=p,n[g].ind=l,n[g].extra=j,g+=1;p=0,l+=1}}else n[l].ind=l,n[l].extra=0,l+=1;if(t.l=n,S=E>S?E:S,x.push(E),t.sz)t.boxWidth=t.sz[0],t.justifyOffset=0;else switch(t.boxWidth=S,t.j){case 1:t.justifyOffset=-t.boxWidth;break;case 2:t.justifyOffset=-t.boxWidth/2;break;default:t.justifyOffset=0}t.lineWidths=x;var G=r.a,q,N;C=G.length;var $,V,z=[];for(k=0;k<C;k+=1){for(q=G[k],q.a.sc&&(t.strokeColorAnim=!0),q.a.sw&&(t.strokeWidthAnim=!0),(q.a.fc||q.a.fh||q.a.fs||q.a.fb)&&(t.fillColorAnim=!0),V=0,$=q.s.b,s=0;s<a;s+=1)N=n[s],N.anIndexes[k]=V,($==1&&N.val!==""||$==2&&N.val!==""&&N.val!==" "||$==3&&(N.n||N.val==" "||s==a-1)||$==4&&(N.n||s==a-1))&&(q.s.rn===1&&z.push(V),V+=1);r.a[k].s.totalChars=V;var ne=-1,pe;if(q.s.rn===1)for(s=0;s<a;s+=1)N=n[s],ne!=N.anIndexes[k]&&(ne=N.anIndexes[k],pe=z.splice(Math.floor(Math.random()*z.length),1)[0]),N.anIndexes[k]=pe}t.yOffset=t.finalLineHeight||t.finalSize*1.2,t.ls=t.ls||0,t.ascent=P.ascent*t.finalSize/100},TextProperty.prototype.updateDocumentData=function(t,e){e=e===void 0?this.keysIndex:e;var r=this.copyData({},this.data.d.k[e].s);r=this.copyData(r,t),this.data.d.k[e].s=r,this.recalculate(e),this.setCurrentData(r),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(t){var e=this.data.d.k[t].s;e.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(e)},TextProperty.prototype.canResizeFont=function(t){this.canResize=t,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(t){this.minimumFontSize=Math.floor(t)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var t=Math.max,e=Math.min,r=Math.floor;function n(a,o){this._currentTextLength=-1,this.k=!1,this.data=o,this.elem=a,this.comp=a.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(a),this.s=PropertyFactory.getProp(a,o.s||{k:0},0,0,this),"e"in o?this.e=PropertyFactory.getProp(a,o.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(a,o.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(a,o.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(a,o.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(a,o.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(a,o.a,0,.01,this),this.dynamicProperties.length||this.getValue()}n.prototype={getMult:function(o){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var l=0,c=0,d=1,p=1;this.ne.v>0?l=this.ne.v/100:c=-this.ne.v/100,this.xe.v>0?d=1-this.xe.v/100:p=1+this.xe.v/100;var g=BezierFactory.getBezierEasing(l,c,d,p).get,y=0,x=this.finalS,E=this.finalE,S=this.data.sh;if(S===2)E===x?y=o>=E?1:0:y=t(0,e(.5/(E-x)+(o-x)/(E-x),1)),y=g(y);else if(S===3)E===x?y=o>=E?0:1:y=1-t(0,e(.5/(E-x)+(o-x)/(E-x),1)),y=g(y);else if(S===4)E===x?y=0:(y=t(0,e(.5/(E-x)+(o-x)/(E-x),1)),y<.5?y*=2:y=1-2*(y-.5)),y=g(y);else if(S===5){if(E===x)y=0;else{var k=E-x;o=e(t(0,o+.5-x),E-x);var C=-k/2+o,P=k/2;y=Math.sqrt(1-C*C/(P*P))}y=g(y)}else S===6?(E===x?y=0:(o=e(t(0,o+.5-x),E-x),y=(1+Math.cos(Math.PI+Math.PI*2*o/(E-x)))/2),y=g(y)):(o>=r(x)&&(o-x<0?y=t(0,e(e(E,1)-(x-o),1)):y=t(0,e(E-o,1))),y=g(y));if(this.sm.v!==100){var R=this.sm.v*.01;R===0&&(R=1e-8);var j=.5-R*.5;y<j?y=0:(y=(y-j)/R,y>1&&(y=1))}return y*this.a.v},getValue:function(o){this.iterateDynamicProperties(),this._mdf=o||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,o&&this.data.r===2&&(this.e.v=this._currentTextLength);var l=this.data.r===2?1:100/this.data.totalChars,c=this.o.v/l,d=this.s.v/l+c,p=this.e.v/l+c;if(d>p){var g=d;d=p,p=g}this.finalS=d,this.finalE=p}},extendPrototype([DynamicPropertyContainer],n);function s(a,o,l){return new n(a,o)}return{getTextSelectorProp:s}}();function TextAnimatorDataProperty(t,e,r){var n={propType:!1},s=PropertyFactory.getProp,a=e.a;this.a={r:a.r?s(t,a.r,0,degToRads,r):n,rx:a.rx?s(t,a.rx,0,degToRads,r):n,ry:a.ry?s(t,a.ry,0,degToRads,r):n,sk:a.sk?s(t,a.sk,0,degToRads,r):n,sa:a.sa?s(t,a.sa,0,degToRads,r):n,s:a.s?s(t,a.s,1,.01,r):n,a:a.a?s(t,a.a,1,0,r):n,o:a.o?s(t,a.o,0,.01,r):n,p:a.p?s(t,a.p,1,0,r):n,sw:a.sw?s(t,a.sw,0,0,r):n,sc:a.sc?s(t,a.sc,1,0,r):n,fc:a.fc?s(t,a.fc,1,0,r):n,fh:a.fh?s(t,a.fh,0,0,r):n,fs:a.fs?s(t,a.fs,0,.01,r):n,fb:a.fb?s(t,a.fb,0,.01,r):n,t:a.t?s(t,a.t,0,0,r):n},this.s=TextSelectorProp.getTextSelectorProp(t,e.s,r),this.s.t=e.s.t}function TextAnimatorProperty(t,e,r){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=t,this._renderType=e,this._elem=r,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(r)}TextAnimatorProperty.prototype.searchProperties=function(){var t,e=this._textData.a.length,r,n=PropertyFactory.getProp;for(t=0;t<e;t+=1)r=this._textData.a[t],this._animatorsData[t]=new TextAnimatorDataProperty(this._elem,r,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:n(this._elem,this._textData.p.a,0,0,this),f:n(this._elem,this._textData.p.f,0,0,this),l:n(this._elem,this._textData.p.l,0,0,this),r:n(this._elem,this._textData.p.r,0,0,this),p:n(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=n(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(t,e){if(this.lettersChangedFlag=e,!(!this._mdf&&!this._isFirstFrame&&!e&&(!this._hasMaskedPath||!this._pathData.m._mdf))){this._isFirstFrame=!1;var r=this._moreOptions.alignment.v,n=this._animatorsData,s=this._textData,a=this.mHelper,o=this._renderType,l=this.renderedLetters.length,c,d,p,g,y=t.l,x,E,S,k,C,P,R,j,I,O,L,B,Z,te,ie;if(this._hasMaskedPath){if(ie=this._pathData.m,!this._pathData.n||this._pathData._mdf){var Q=ie.v;this._pathData.r.v&&(Q=Q.reverse()),x={tLength:0,segments:[]},g=Q._length-1;var fe;for(B=0,p=0;p<g;p+=1)fe=bez.buildBezierData(Q.v[p],Q.v[p+1],[Q.o[p][0]-Q.v[p][0],Q.o[p][1]-Q.v[p][1]],[Q.i[p+1][0]-Q.v[p+1][0],Q.i[p+1][1]-Q.v[p+1][1]]),x.tLength+=fe.segmentLength,x.segments.push(fe),B+=fe.segmentLength;p=g,ie.v.c&&(fe=bez.buildBezierData(Q.v[p],Q.v[0],[Q.o[p][0]-Q.v[p][0],Q.o[p][1]-Q.v[p][1]],[Q.i[0][0]-Q.v[0][0],Q.i[0][1]-Q.v[0][1]]),x.tLength+=fe.segmentLength,x.segments.push(fe),B+=fe.segmentLength),this._pathData.pi=x}if(x=this._pathData.pi,E=this._pathData.f.v,R=0,P=1,k=0,C=!0,O=x.segments,E<0&&ie.v.c)for(x.tLength<Math.abs(E)&&(E=-Math.abs(E)%x.tLength),R=O.length-1,I=O[R].points,P=I.length-1;E<0;)E+=I[P].partialLength,P-=1,P<0&&(R-=1,I=O[R].points,P=I.length-1);I=O[R].points,j=I[P-1],S=I[P],L=S.partialLength}g=y.length,c=0,d=0;var se=t.finalSize*1.2*.714,Y=!0,G,q,N,$,V;$=n.length;var z,ne=-1,pe,xe,Ce,ce=E,Re=R,oe=P,Se=-1,Ne,Fe,et,Le,Ee,Pt,Dt,Et,St="",Ct=this.defaultPropsArray,ct;if(t.j===2||t.j===1){var Qe=0,_t=0,ft=t.j===2?-.5:-1,Bt=0,Wt=!0;for(p=0;p<g;p+=1)if(y[p].n){for(Qe&&(Qe+=_t);Bt<p;)y[Bt].animatorJustifyOffset=Qe,Bt+=1;Qe=0,Wt=!0}else{for(N=0;N<$;N+=1)G=n[N].a,G.t.propType&&(Wt&&t.j===2&&(_t+=G.t.v*ft),q=n[N].s,z=q.getMult(y[p].anIndexes[N],s.a[N].s.totalChars),z.length?Qe+=G.t.v*z[0]*ft:Qe+=G.t.v*z*ft);Wt=!1}for(Qe&&(Qe+=_t);Bt<p;)y[Bt].animatorJustifyOffset=Qe,Bt+=1}for(p=0;p<g;p+=1){if(a.reset(),Ne=1,y[p].n)c=0,d+=t.yOffset,d+=Y?1:0,E=ce,Y=!1,this._hasMaskedPath&&(R=Re,P=oe,I=O[R].points,j=I[P-1],S=I[P],L=S.partialLength,k=0),St="",Et="",Pt="",ct="",Ct=this.defaultPropsArray;else{if(this._hasMaskedPath){if(Se!==y[p].line){switch(t.j){case 1:E+=B-t.lineWidths[y[p].line];break;case 2:E+=(B-t.lineWidths[y[p].line])/2;break}Se=y[p].line}ne!==y[p].ind&&(y[ne]&&(E+=y[ne].extra),E+=y[p].an/2,ne=y[p].ind),E+=r[0]*y[p].an*.005;var Zt=0;for(N=0;N<$;N+=1)G=n[N].a,G.p.propType&&(q=n[N].s,z=q.getMult(y[p].anIndexes[N],s.a[N].s.totalChars),z.length?Zt+=G.p.v[0]*z[0]:Zt+=G.p.v[0]*z),G.a.propType&&(q=n[N].s,z=q.getMult(y[p].anIndexes[N],s.a[N].s.totalChars),z.length?Zt+=G.a.v[0]*z[0]:Zt+=G.a.v[0]*z);for(C=!0,this._pathData.a.v&&(E=y[0].an*.5+(B-this._pathData.f.v-y[0].an*.5-y[y.length-1].an*.5)*ne/(g-1),E+=this._pathData.f.v);C;)k+L>=E+Zt||!I?(Z=(E+Zt-k)/S.partialLength,xe=j.point[0]+(S.point[0]-j.point[0])*Z,Ce=j.point[1]+(S.point[1]-j.point[1])*Z,a.translate(-r[0]*y[p].an*.005,-(r[1]*se)*.01),C=!1):I&&(k+=S.partialLength,P+=1,P>=I.length&&(P=0,R+=1,O[R]?I=O[R].points:ie.v.c?(P=0,R=0,I=O[R].points):(k-=S.partialLength,I=null)),I&&(j=S,S=I[P],L=S.partialLength));pe=y[p].an/2-y[p].add,a.translate(-pe,0,0)}else pe=y[p].an/2-y[p].add,a.translate(-pe,0,0),a.translate(-r[0]*y[p].an*.005,-r[1]*se*.01,0);for(N=0;N<$;N+=1)G=n[N].a,G.t.propType&&(q=n[N].s,z=q.getMult(y[p].anIndexes[N],s.a[N].s.totalChars),(c!==0||t.j!==0)&&(this._hasMaskedPath?z.length?E+=G.t.v*z[0]:E+=G.t.v*z:z.length?c+=G.t.v*z[0]:c+=G.t.v*z));for(t.strokeWidthAnim&&(et=t.sw||0),t.strokeColorAnim&&(t.sc?Fe=[t.sc[0],t.sc[1],t.sc[2]]:Fe=[0,0,0]),t.fillColorAnim&&t.fc&&(Le=[t.fc[0],t.fc[1],t.fc[2]]),N=0;N<$;N+=1)G=n[N].a,G.a.propType&&(q=n[N].s,z=q.getMult(y[p].anIndexes[N],s.a[N].s.totalChars),z.length?a.translate(-G.a.v[0]*z[0],-G.a.v[1]*z[1],G.a.v[2]*z[2]):a.translate(-G.a.v[0]*z,-G.a.v[1]*z,G.a.v[2]*z));for(N=0;N<$;N+=1)G=n[N].a,G.s.propType&&(q=n[N].s,z=q.getMult(y[p].anIndexes[N],s.a[N].s.totalChars),z.length?a.scale(1+(G.s.v[0]-1)*z[0],1+(G.s.v[1]-1)*z[1],1):a.scale(1+(G.s.v[0]-1)*z,1+(G.s.v[1]-1)*z,1));for(N=0;N<$;N+=1){if(G=n[N].a,q=n[N].s,z=q.getMult(y[p].anIndexes[N],s.a[N].s.totalChars),G.sk.propType&&(z.length?a.skewFromAxis(-G.sk.v*z[0],G.sa.v*z[1]):a.skewFromAxis(-G.sk.v*z,G.sa.v*z)),G.r.propType&&(z.length?a.rotateZ(-G.r.v*z[2]):a.rotateZ(-G.r.v*z)),G.ry.propType&&(z.length?a.rotateY(G.ry.v*z[1]):a.rotateY(G.ry.v*z)),G.rx.propType&&(z.length?a.rotateX(G.rx.v*z[0]):a.rotateX(G.rx.v*z)),G.o.propType&&(z.length?Ne+=(G.o.v*z[0]-Ne)*z[0]:Ne+=(G.o.v*z-Ne)*z),t.strokeWidthAnim&&G.sw.propType&&(z.length?et+=G.sw.v*z[0]:et+=G.sw.v*z),t.strokeColorAnim&&G.sc.propType)for(Ee=0;Ee<3;Ee+=1)z.length?Fe[Ee]+=(G.sc.v[Ee]-Fe[Ee])*z[0]:Fe[Ee]+=(G.sc.v[Ee]-Fe[Ee])*z;if(t.fillColorAnim&&t.fc){if(G.fc.propType)for(Ee=0;Ee<3;Ee+=1)z.length?Le[Ee]+=(G.fc.v[Ee]-Le[Ee])*z[0]:Le[Ee]+=(G.fc.v[Ee]-Le[Ee])*z;G.fh.propType&&(z.length?Le=addHueToRGB(Le,G.fh.v*z[0]):Le=addHueToRGB(Le,G.fh.v*z)),G.fs.propType&&(z.length?Le=addSaturationToRGB(Le,G.fs.v*z[0]):Le=addSaturationToRGB(Le,G.fs.v*z)),G.fb.propType&&(z.length?Le=addBrightnessToRGB(Le,G.fb.v*z[0]):Le=addBrightnessToRGB(Le,G.fb.v*z))}}for(N=0;N<$;N+=1)G=n[N].a,G.p.propType&&(q=n[N].s,z=q.getMult(y[p].anIndexes[N],s.a[N].s.totalChars),this._hasMaskedPath?z.length?a.translate(0,G.p.v[1]*z[0],-G.p.v[2]*z[1]):a.translate(0,G.p.v[1]*z,-G.p.v[2]*z):z.length?a.translate(G.p.v[0]*z[0],G.p.v[1]*z[1],-G.p.v[2]*z[2]):a.translate(G.p.v[0]*z,G.p.v[1]*z,-G.p.v[2]*z));if(t.strokeWidthAnim&&(Pt=et<0?0:et),t.strokeColorAnim&&(Dt="rgb("+Math.round(Fe[0]*255)+","+Math.round(Fe[1]*255)+","+Math.round(Fe[2]*255)+")"),t.fillColorAnim&&t.fc&&(Et="rgb("+Math.round(Le[0]*255)+","+Math.round(Le[1]*255)+","+Math.round(Le[2]*255)+")"),this._hasMaskedPath){if(a.translate(0,-t.ls),a.translate(0,r[1]*se*.01+d,0),this._pathData.p.v){te=(S.point[1]-j.point[1])/(S.point[0]-j.point[0]);var Ft=Math.atan(te)*180/Math.PI;S.point[0]<j.point[0]&&(Ft+=180),a.rotate(-Ft*Math.PI/180)}a.translate(xe,Ce,0),E-=r[0]*y[p].an*.005,y[p+1]&&ne!==y[p+1].ind&&(E+=y[p].an/2,E+=t.tr*.001*t.finalSize)}else{switch(a.translate(c,d,0),t.ps&&a.translate(t.ps[0],t.ps[1]+t.ascent,0),t.j){case 1:a.translate(y[p].animatorJustifyOffset+t.justifyOffset+(t.boxWidth-t.lineWidths[y[p].line]),0,0);break;case 2:a.translate(y[p].animatorJustifyOffset+t.justifyOffset+(t.boxWidth-t.lineWidths[y[p].line])/2,0,0);break}a.translate(0,-t.ls),a.translate(pe,0,0),a.translate(r[0]*y[p].an*.005,r[1]*se*.01,0),c+=y[p].l+t.tr*.001*t.finalSize}o==="html"?St=a.toCSS():o==="svg"?St=a.to2dCSS():Ct=[a.props[0],a.props[1],a.props[2],a.props[3],a.props[4],a.props[5],a.props[6],a.props[7],a.props[8],a.props[9],a.props[10],a.props[11],a.props[12],a.props[13],a.props[14],a.props[15]],ct=Ne}l<=p?(V=new LetterProps(ct,Pt,Dt,Et,St,Ct),this.renderedLetters.push(V),l+=1,this.lettersChangedFlag=!0):(V=this.renderedLetters[p],this.lettersChangedFlag=V.update(ct,Pt,Dt,Et,St,Ct)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty);function ITextElement(){}ITextElement.prototype.initElement=function(t,e,r){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(t,e,r),this.textProperty=new TextProperty(this,t.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(t.t,this.renderType,this),this.initTransform(t,e,r),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(t){this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange)},ITextElement.prototype.createPathShape=function(t,e){var r,n=e.length,s,a="";for(r=0;r<n;r+=1)e[r].ty==="sh"&&(s=e[r].ks.k,a+=buildShapeString(s,s.i.length,!0,t));return a},ITextElement.prototype.updateDocumentData=function(t,e){this.textProperty.updateDocumentData(t,e)},ITextElement.prototype.canResizeFont=function(t){this.textProperty.canResizeFont(t)},ITextElement.prototype.setMinimumFontSize=function(t){this.textProperty.setMinimumFontSize(t)},ITextElement.prototype.applyTextPropertiesToMatrix=function(t,e,r,n,s){switch(t.ps&&e.translate(t.ps[0],t.ps[1]+t.ascent,0),e.translate(0,-t.ls,0),t.j){case 1:e.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[r]),0,0);break;case 2:e.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[r])/2,0,0);break}e.translate(n,s,0)},ITextElement.prototype.buildColor=function(t){return"rgb("+Math.round(t[0]*255)+","+Math.round(t[1]*255)+","+Math.round(t[2]*255)+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(t,e,r){this.textSpans=[],this.renderType="svg",this.initElement(t,e,r)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(t){for(var e=0,r=t.length,n=[],s="";e<r;)t[e]==="\r"||t[e]===""?(n.push(s),s=""):s+=t[e],e+=1;return n.push(s),n},SVGTextLottieElement.prototype.buildShapeData=function(t,e){if(t.shapes&&t.shapes.length){var r=t.shapes[0];if(r.it){var n=r.it[r.it.length-1];n.s&&(n.s.k[0]=e,n.s.k[1]=e)}}return t},SVGTextLottieElement.prototype.buildNewText=function(){this.addDynamicProperty(this);var t,e,r=this.textProperty.currentData;this.renderedLetters=createSizedArray(r?r.l.length:0),r.fc?this.layerElement.setAttribute("fill",this.buildColor(r.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),r.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(r.sc)),this.layerElement.setAttribute("stroke-width",r.sw)),this.layerElement.setAttribute("font-size",r.finalSize);var n=this.globalData.fontManager.getFontByName(r.f);if(n.fClass)this.layerElement.setAttribute("class",n.fClass);else{this.layerElement.setAttribute("font-family",n.fFamily);var s=r.fWeight,a=r.fStyle;this.layerElement.setAttribute("font-style",a),this.layerElement.setAttribute("font-weight",s)}this.layerElement.setAttribute("aria-label",r.t);var o=r.l||[],l=!!this.globalData.fontManager.chars;e=o.length;var c,d=this.mHelper,p="",g=this.data.singleShape,y=0,x=0,E=!0,S=r.tr*.001*r.finalSize;if(g&&!l&&!r.sz){var k=this.textContainer,C="start";switch(r.j){case 1:C="end";break;case 2:C="middle";break;default:C="start";break}k.setAttribute("text-anchor",C),k.setAttribute("letter-spacing",S);var P=this.buildTextContents(r.finalText);for(e=P.length,x=r.ps?r.ps[1]+r.ascent:0,t=0;t<e;t+=1)c=this.textSpans[t].span||createNS("tspan"),c.textContent=P[t],c.setAttribute("x",0),c.setAttribute("y",x),c.style.display="inherit",k.appendChild(c),this.textSpans[t]||(this.textSpans[t]={span:null,glyph:null}),this.textSpans[t].span=c,x+=r.finalLineHeight;this.layerElement.appendChild(k)}else{var R=this.textSpans.length,j;for(t=0;t<e;t+=1){if(this.textSpans[t]||(this.textSpans[t]={span:null,childSpan:null,glyph:null}),!l||!g||t===0){if(c=R>t?this.textSpans[t].span:createNS(l?"g":"text"),R<=t){if(c.setAttribute("stroke-linecap","butt"),c.setAttribute("stroke-linejoin","round"),c.setAttribute("stroke-miterlimit","4"),this.textSpans[t].span=c,l){var I=createNS("g");c.appendChild(I),this.textSpans[t].childSpan=I}this.textSpans[t].span=c,this.layerElement.appendChild(c)}c.style.display="inherit"}if(d.reset(),g&&(o[t].n&&(y=-S,x+=r.yOffset,x+=E?1:0,E=!1),this.applyTextPropertiesToMatrix(r,d,o[t].line,y,x),y+=o[t].l||0,y+=S),l){j=this.globalData.fontManager.getCharData(r.finalText[t],n.fStyle,this.globalData.fontManager.getFontByName(r.f).fFamily);var O;if(j.t===1)O=new SVGCompElement(j.data,this.globalData,this);else{var L=emptyShapeData;j.data&&j.data.shapes&&(L=this.buildShapeData(j.data,r.finalSize)),O=new SVGShapeElement(L,this.globalData,this)}if(this.textSpans[t].glyph){var B=this.textSpans[t].glyph;this.textSpans[t].childSpan.removeChild(B.layerElement),B.destroy()}this.textSpans[t].glyph=O,O._debug=!0,O.prepareFrame(0),O.renderFrame(),this.textSpans[t].childSpan.appendChild(O.layerElement),j.t===1&&this.textSpans[t].childSpan.setAttribute("transform","scale("+r.finalSize/100+","+r.finalSize/100+")")}else g&&c.setAttribute("transform","translate("+d.props[12]+","+d.props[13]+")"),c.textContent=o[t].val,c.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}g&&c&&c.setAttribute("d",p)}for(;t<this.textSpans.length;)this.textSpans[t].span.style.display="none",t+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var t=this.layerElement.getBBox();this.bbox={top:t.y,left:t.x,width:t.width,height:t.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var t,e=this.textSpans.length,r;for(this.renderedFrame=this.comp.renderedFrame,t=0;t<e;t+=1)r=this.textSpans[t].glyph,r&&(r.prepareFrame(this.comp.renderedFrame-this.data.st),r._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var t,e,r=this.textAnimator.renderedLetters,n=this.textProperty.currentData.l;e=n.length;var s,a,o;for(t=0;t<e;t+=1)n[t].n||(s=r[t],a=this.textSpans[t].span,o=this.textSpans[t].glyph,o&&o.renderFrame(),s._mdf.m&&a.setAttribute("transform",s.m),s._mdf.o&&a.setAttribute("opacity",s.o),s._mdf.sw&&a.setAttribute("stroke-width",s.sw),s._mdf.sc&&a.setAttribute("stroke",s.sc),s._mdf.fc&&a.setAttribute("fill",s.fc))}};function ISolidElement(t,e,r){this.initElement(t,e,r)}extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var t=createNS("rect");t.setAttribute("width",this.data.sw),t.setAttribute("height",this.data.sh),t.setAttribute("fill",this.data.sc),this.layerElement.appendChild(t)};function NullElement(t,e,r){this.initFrame(),this.initBaseData(t,e,r),this.initFrame(),this.initTransform(t,e,r),this.initHierarchy()}NullElement.prototype.prepareFrame=function(t){this.prepareProperties(t,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement);function SVGRendererBase(){}extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(t){return new NullElement(t,this.globalData,this)},SVGRendererBase.prototype.createShape=function(t){return new SVGShapeElement(t,this.globalData,this)},SVGRendererBase.prototype.createText=function(t){return new SVGTextLottieElement(t,this.globalData,this)},SVGRendererBase.prototype.createImage=function(t){return new IImageElement(t,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(t){return new ISolidElement(t,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(t){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+t.w+" "+t.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",t.w),this.svgElement.setAttribute("height",t.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var e=this.globalData.defs;this.setupGlobalData(t,e),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=t;var r=createNS("clipPath"),n=createNS("rect");n.setAttribute("width",t.w),n.setAttribute("height",t.h),n.setAttribute("x",0),n.setAttribute("y",0);var s=createElementID();r.setAttribute("id",s),r.appendChild(n),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+s+")"),e.appendChild(r),this.layers=t.layers,this.elements=createSizedArray(t.layers.length)},SVGRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var t,e=this.layers?this.layers.length:0;for(t=0;t<e;t+=1)this.elements[t]&&this.elements[t].destroy&&this.elements[t].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(t){var e=0,r=this.layers.length;for(e=0;e<r;e+=1)if(this.layers[e].ind===t)return e;return-1},SVGRendererBase.prototype.buildItem=function(t){var e=this.elements;if(!(e[t]||this.layers[t].ty===99)){e[t]=!0;var r=this.createItem(this.layers[t]);if(e[t]=r,getExpressionsPlugin()&&(this.layers[t].ty===0&&this.globalData.projectInterface.registerComposition(r),r.initExpressions()),this.appendElementInPos(r,t),this.layers[t].tt){var n="tp"in this.layers[t]?this.findIndexByInd(this.layers[t].tp):t-1;if(n===-1)return;if(!this.elements[n]||this.elements[n]===!0)this.buildItem(n),this.addPendingElement(r);else{var s=e[n],a=s.getMatte(this.layers[t].tt);r.setMatte(a)}}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var t=this.pendingElements.pop();if(t.checkParenting(),t.data.tt)for(var e=0,r=this.elements.length;e<r;){if(this.elements[e]===t){var n="tp"in t.data?this.findIndexByInd(t.data.tp):e-1,s=this.elements[n],a=s.getMatte(this.layers[e].tt);t.setMatte(a);break}e+=1}}},SVGRendererBase.prototype.renderFrame=function(t){if(!(this.renderedFrame===t||this.destroyed)){t===null?t=this.renderedFrame:this.renderedFrame=t,this.globalData.frameNum=t,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=t,this.globalData._mdf=!1;var e,r=this.layers.length;for(this.completeLayers||this.checkLayers(t),e=r-1;e>=0;e-=1)(this.completeLayers||this.elements[e])&&this.elements[e].prepareFrame(t-this.layers[e].st);if(this.globalData._mdf)for(e=0;e<r;e+=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(t,e){var r=t.getBaseElement();if(r){for(var n=0,s;n<e;)this.elements[n]&&this.elements[n]!==!0&&this.elements[n].getBaseElement()&&(s=this.elements[n].getBaseElement()),n+=1;s?this.layerElement.insertBefore(r,s):this.layerElement.appendChild(r)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"};function ICompElement(){}extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(t,e,r){this.initFrame(),this.initBaseData(t,e,r),this.initTransform(t,e,r),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),(this.data.xt||!e.progressiveLoad)&&this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(t){if(this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange),!(!this.isInRange&&!this.data.xt)){if(this.tm._placeholder)this.renderedFrame=t/this.data.sr;else{var e=this.tm.v;e===this.data.op&&(e=this.data.op-1),this.renderedFrame=e}var r,n=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),r=n-1;r>=0;r-=1)(this.completeLayers||this.elements[r])&&(this.elements[r].prepareFrame(this.renderedFrame-this.layers[r].st),this.elements[r]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()},ICompElement.prototype.setElements=function(t){this.elements=t},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)this.elements[t]&&this.elements[t].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()};function SVGCompElement(t,e,r){this.layers=t.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(t,e,r),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(t){return new SVGCompElement(t,this.globalData,this)};function SVGRenderer(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var r="";if(e&&e.title){var n=createNS("title"),s=createElementID();n.setAttribute("id",s),n.textContent=e.title,this.svgElement.appendChild(n),r+=s}if(e&&e.description){var a=createNS("desc"),o=createElementID();a.setAttribute("id",o),a.textContent=e.description,this.svgElement.appendChild(a),r+=" "+o}r&&this.svgElement.setAttribute("aria-labelledby",r);var l=createNS("defs");this.svgElement.appendChild(l);var c=createNS("g");this.svgElement.appendChild(c),this.layerElement=c,this.renderConfig={preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:e&&e.contentVisibility||"visible",progressiveLoad:e&&e.progressiveLoad||!1,hideOnTransparent:!(e&&e.hideOnTransparent===!1),viewBoxOnly:e&&e.viewBoxOnly||!1,viewBoxSize:e&&e.viewBoxSize||!1,className:e&&e.className||"",id:e&&e.id||"",focusable:e&&e.focusable,filterSize:{width:e&&e.filterSize&&e.filterSize.width||"100%",height:e&&e.filterSize&&e.filterSize.height||"100%",x:e&&e.filterSize&&e.filterSize.x||"0%",y:e&&e.filterSize&&e.filterSize.y||"0%"},width:e&&e.width,height:e&&e.height,runExpressions:!e||e.runExpressions===void 0||e.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:l,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(t){return new SVGCompElement(t,this.globalData,this)};function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}ShapeTransformManager.prototype={addTransformSequence:function(e){var r,n=e.length,s="_";for(r=0;r<n;r+=1)s+=e[r].transform.key+"_";var a=this.sequences[s];return a||(a={transforms:[].concat(e),finalTransform:new Matrix,_mdf:!1},this.sequences[s]=a,this.sequenceList.push(a)),a},processSequence:function(e,r){for(var n=0,s=e.transforms.length,a=r;n<s&&!r;){if(e.transforms[n].transform.mProps._mdf){a=!0;break}n+=1}if(a)for(e.finalTransform.reset(),n=s-1;n>=0;n-=1)e.finalTransform.multiply(e.transforms[n].transform.mProps.v);e._mdf=a},processSequences:function(e){var r,n=this.sequenceList.length;for(r=0;r<n;r+=1)this.processSequence(this.sequenceList[r],e)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var e="__lottie_element_luma_buffer",r=null,n=null,s=null;function a(){var c=createNS("svg"),d=createNS("filter"),p=createNS("feColorMatrix");return d.setAttribute("id",e),p.setAttribute("type","matrix"),p.setAttribute("color-interpolation-filters","sRGB"),p.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),d.appendChild(p),c.appendChild(d),c.setAttribute("id",e+"_svg"),featureSupport.svgLumaHidden&&(c.style.display="none"),c}function o(){r||(s=a(),document.body.appendChild(s),r=createTag("canvas"),n=r.getContext("2d"),n.filter="url(#"+e+")",n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1))}function l(c){return r||o(),r.width=c.width,r.height=c.height,n.filter="url(#"+e+")",r}return{load:o,get:l}};function createCanvas(t,e){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(t,e);var r=createTag("canvas");return r.width=t,r.height=e,r}var assetLoader=function(){return{loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas}}(),registeredEffects={};function CVEffects(t){var e,r=t.data.ef?t.data.ef.length:0;this.filters=[];var n;for(e=0;e<r;e+=1){n=null;var s=t.data.ef[e].ty;if(registeredEffects[s]){var a=registeredEffects[s].effect;n=new a(t.effectsManager.effectElements[e],t)}n&&this.filters.push(n)}this.filters.length&&t.addRenderableComponent(this)}CVEffects.prototype.renderFrame=function(t){var e,r=this.filters.length;for(e=0;e<r;e+=1)this.filters[e].renderFrame(t)},CVEffects.prototype.getEffects=function(t){var e,r=this.filters.length,n=[];for(e=0;e<r;e+=1)this.filters[e].type===t&&n.push(this.filters[e]);return n};function registerEffect(t,e){registeredEffects[t]={effect:e}}function CVMaskElement(t,e){this.data=t,this.element=e,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var r,n=this.masksProperties.length,s=!1;for(r=0;r<n;r+=1)this.masksProperties[r].mode!=="n"&&(s=!0),this.viewData[r]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[r],3);this.hasMasks=s,s&&this.element.addRenderableComponent(this)}CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var t=this.element.finalTransform.mat,e=this.element.canvasContext,r,n=this.masksProperties.length,s,a,o;for(e.beginPath(),r=0;r<n;r+=1)if(this.masksProperties[r].mode!=="n"){this.masksProperties[r].inv&&(e.moveTo(0,0),e.lineTo(this.element.globalData.compSize.w,0),e.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),e.lineTo(0,this.element.globalData.compSize.h),e.lineTo(0,0)),o=this.viewData[r].v,s=t.applyToPointArray(o.v[0][0],o.v[0][1],0),e.moveTo(s[0],s[1]);var l,c=o._length;for(l=1;l<c;l+=1)a=t.applyToTriplePoints(o.o[l-1],o.i[l],o.v[l]),e.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5]);a=t.applyToTriplePoints(o.o[l-1],o.i[0],o.v[0]),e.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])}this.element.globalData.renderer.save(!0),e.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};function CVBaseElement(){}var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var e=this.globalData.canvasContext,r=assetLoader.createCanvas(e.canvas.width,e.canvas.height);this.buffers.push(r);var n=assetLoader.createCanvas(e.canvas.width,e.canvas.height);this.buffers.push(n),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var e=this.globalData;if(e.blendMode!==this.data.bm){e.blendMode=this.data.bm;var r=getBlendMode(this.data.bm);e.canvasContext.globalCompositeOperation=r}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){!this.hidden&&(!this.isInRange||this.isTransparent)&&(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(e){e.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var e=this.buffers[0],r=e.getContext("2d");this.clearCanvas(r),r.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var e=this.buffers[1],r=e.getContext("2d");this.clearCanvas(r),r.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform);var n=this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1);if(n.renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var s=assetLoader.getLumaCanvas(this.canvasContext.canvas),a=s.getContext("2d");a.drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(s,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(e,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(e){if(!(this.hidden||this.data.hd)&&!(this.data.td===1&&!e)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var r=this.data.ty===0;this.prepareLayer(),this.globalData.renderer.save(r),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(r),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement;function CVShapeData(t,e,r,n){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var s=4;e.ty==="rc"?s=5:e.ty==="el"?s=6:e.ty==="sr"&&(s=7),this.sh=ShapePropertyFactory.getShapeProp(t,e,s,t);var a,o=r.length,l;for(a=0;a<o;a+=1)r[a].closed||(l={transforms:n.addTransformSequence(r[a].transforms),trNodes:[]},this.styledShapes.push(l),r[a].elements.push(l))}CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated;function CVShapeElement(t,e,r){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(t,e,r)}extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(t,e){var r={data:t,type:t.ty,preTransforms:this.transformsManager.addTransformSequence(e),transforms:[],elements:[],closed:t.hd===!0},n={};if(t.ty==="fl"||t.ty==="st"?(n.c=PropertyFactory.getProp(this,t.c,1,255,this),n.c.k||(r.co="rgb("+bmFloor(n.c.v[0])+","+bmFloor(n.c.v[1])+","+bmFloor(n.c.v[2])+")")):(t.ty==="gf"||t.ty==="gs")&&(n.s=PropertyFactory.getProp(this,t.s,1,null,this),n.e=PropertyFactory.getProp(this,t.e,1,null,this),n.h=PropertyFactory.getProp(this,t.h||{k:0},0,.01,this),n.a=PropertyFactory.getProp(this,t.a||{k:0},0,degToRads,this),n.g=new GradientProperty(this,t.g,this)),n.o=PropertyFactory.getProp(this,t.o,0,.01,this),t.ty==="st"||t.ty==="gs"){if(r.lc=lineCapEnum[t.lc||2],r.lj=lineJoinEnum[t.lj||2],t.lj==1&&(r.ml=t.ml),n.w=PropertyFactory.getProp(this,t.w,0,null,this),n.w.k||(r.wi=n.w.v),t.d){var s=new DashProperty(this,t.d,"canvas",this);n.d=s,n.d.k||(r.da=n.d.dashArray,r.do=n.d.dashoffset[0])}}else r.r=t.r===2?"evenodd":"nonzero";return this.stylesList.push(r),n.style=r,n},CVShapeElement.prototype.createGroupElement=function(){var t={it:[],prevViewData:[]};return t},CVShapeElement.prototype.createTransformElement=function(t){var e={transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,t.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,t,this)}};return e},CVShapeElement.prototype.createShapeElement=function(t){var e=new CVShapeData(this,t,this.stylesList,this.transformsManager);return this.shapes.push(e),this.addShapeToModifiers(e),e},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var t,e=this.itemsData.length;for(t=0;t<e;t+=1)this.prevViewData[t]=this.itemsData[t];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),e=this.dynamicProperties.length,t=0;t<e;t+=1)this.dynamicProperties[t].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(t){var e,r=this.stylesList.length;for(e=0;e<r;e+=1)this.stylesList[e].closed||this.stylesList[e].transforms.push(t)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var t,e=this.stylesList.length;for(t=0;t<e;t+=1)this.stylesList[t].closed||this.stylesList[t].transforms.pop()},CVShapeElement.prototype.closeStyles=function(t){var e,r=t.length;for(e=0;e<r;e+=1)t[e].closed=!0},CVShapeElement.prototype.searchShapes=function(t,e,r,n,s){var a,o=t.length-1,l,c,d=[],p=[],g,y,x,E=[].concat(s);for(a=o;a>=0;a-=1){if(g=this.searchProcessedElement(t[a]),g?e[a]=r[g-1]:t[a]._shouldRender=n,t[a].ty==="fl"||t[a].ty==="st"||t[a].ty==="gf"||t[a].ty==="gs")g?e[a].style.closed=!1:e[a]=this.createStyleElement(t[a],E),d.push(e[a].style);else if(t[a].ty==="gr"){if(!g)e[a]=this.createGroupElement(t[a]);else for(c=e[a].it.length,l=0;l<c;l+=1)e[a].prevViewData[l]=e[a].it[l];this.searchShapes(t[a].it,e[a].it,e[a].prevViewData,n,E)}else t[a].ty==="tr"?(g||(x=this.createTransformElement(t[a]),e[a]=x),E.push(e[a]),this.addTransformToStyleList(e[a])):t[a].ty==="sh"||t[a].ty==="rc"||t[a].ty==="el"||t[a].ty==="sr"?g||(e[a]=this.createShapeElement(t[a])):t[a].ty==="tm"||t[a].ty==="rd"||t[a].ty==="pb"||t[a].ty==="zz"||t[a].ty==="op"?(g?(y=e[a],y.closed=!1):(y=ShapeModifiers.getModifier(t[a].ty),y.init(this,t[a]),e[a]=y,this.shapeModifiers.push(y)),p.push(y)):t[a].ty==="rp"&&(g?(y=e[a],y.closed=!0):(y=ShapeModifiers.getModifier(t[a].ty),e[a]=y,y.init(this,t,a,e),this.shapeModifiers.push(y),n=!1),p.push(y));this.addProcessedElement(t[a],a+1)}for(this.removeTransformFromStyleList(),this.closeStyles(d),o=p.length,a=0;a<o;a+=1)p[a].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(t,e){(t._opMdf||e.op._mdf||this._isFirstFrame)&&(e.opacity=t.opacity,e.opacity*=e.op.v,e._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var t,e=this.stylesList.length,r,n,s,a,o,l,c=this.globalData.renderer,d=this.globalData.canvasContext,p,g;for(t=0;t<e;t+=1)if(g=this.stylesList[t],p=g.type,!((p==="st"||p==="gs")&&g.wi===0||!g.data._shouldRender||g.coOp===0||this.globalData.currentGlobalAlpha===0)){for(c.save(),o=g.elements,p==="st"||p==="gs"?(c.ctxStrokeStyle(p==="st"?g.co:g.grd),c.ctxLineWidth(g.wi),c.ctxLineCap(g.lc),c.ctxLineJoin(g.lj),c.ctxMiterLimit(g.ml||0)):c.ctxFillStyle(p==="fl"?g.co:g.grd),c.ctxOpacity(g.coOp),p!=="st"&&p!=="gs"&&d.beginPath(),c.ctxTransform(g.preTransforms.finalTransform.props),n=o.length,r=0;r<n;r+=1){for((p==="st"||p==="gs")&&(d.beginPath(),g.da&&(d.setLineDash(g.da),d.lineDashOffset=g.do)),l=o[r].trNodes,a=l.length,s=0;s<a;s+=1)l[s].t==="m"?d.moveTo(l[s].p[0],l[s].p[1]):l[s].t==="c"?d.bezierCurveTo(l[s].pts[0],l[s].pts[1],l[s].pts[2],l[s].pts[3],l[s].pts[4],l[s].pts[5]):d.closePath();(p==="st"||p==="gs")&&(c.ctxStroke(),g.da&&d.setLineDash(this.dashResetter))}p!=="st"&&p!=="gs"&&this.globalData.renderer.ctxFill(g.r),c.restore()}},CVShapeElement.prototype.renderShape=function(t,e,r,n){var s,a=e.length-1,o;for(o=t,s=a;s>=0;s-=1)e[s].ty==="tr"?(o=r[s].transform,this.renderShapeTransform(t,o)):e[s].ty==="sh"||e[s].ty==="el"||e[s].ty==="rc"||e[s].ty==="sr"?this.renderPath(e[s],r[s]):e[s].ty==="fl"?this.renderFill(e[s],r[s],o):e[s].ty==="st"?this.renderStroke(e[s],r[s],o):e[s].ty==="gf"||e[s].ty==="gs"?this.renderGradientFill(e[s],r[s],o):e[s].ty==="gr"?this.renderShape(o,e[s].it,r[s].it):e[s].ty;n&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(t,e){if(this._isFirstFrame||e._mdf||t.transforms._mdf){var r=t.trNodes,n=e.paths,s,a,o,l=n._length;r.length=0;var c=t.transforms.finalTransform;for(o=0;o<l;o+=1){var d=n.shapes[o];if(d&&d.v){for(a=d._length,s=1;s<a;s+=1)s===1&&r.push({t:"m",p:c.applyToPointArray(d.v[0][0],d.v[0][1],0)}),r.push({t:"c",pts:c.applyToTriplePoints(d.o[s-1],d.i[s],d.v[s])});a===1&&r.push({t:"m",p:c.applyToPointArray(d.v[0][0],d.v[0][1],0)}),d.c&&a&&(r.push({t:"c",pts:c.applyToTriplePoints(d.o[s-1],d.i[0],d.v[0])}),r.push({t:"z"}))}}t.trNodes=r}},CVShapeElement.prototype.renderPath=function(t,e){if(t.hd!==!0&&t._shouldRender){var r,n=e.styledShapes.length;for(r=0;r<n;r+=1)this.renderStyledShape(e.styledShapes[r],e.sh)}},CVShapeElement.prototype.renderFill=function(t,e,r){var n=e.style;(e.c._mdf||this._isFirstFrame)&&(n.co="rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||r._opMdf||this._isFirstFrame)&&(n.coOp=e.o.v*r.opacity)},CVShapeElement.prototype.renderGradientFill=function(t,e,r){var n=e.style,s;if(!n.grd||e.g._mdf||e.s._mdf||e.e._mdf||t.t!==1&&(e.h._mdf||e.a._mdf)){var a=this.globalData.canvasContext,o=e.s.v,l=e.e.v;if(t.t===1)s=a.createLinearGradient(o[0],o[1],l[0],l[1]);else{var c=Math.sqrt(Math.pow(o[0]-l[0],2)+Math.pow(o[1]-l[1],2)),d=Math.atan2(l[1]-o[1],l[0]-o[0]),p=e.h.v;p>=1?p=.99:p<=-1&&(p=-.99);var g=c*p,y=Math.cos(d+e.a.v)*g+o[0],x=Math.sin(d+e.a.v)*g+o[1];s=a.createRadialGradient(y,x,0,o[0],o[1],c)}var E,S=t.g.p,k=e.g.c,C=1;for(E=0;E<S;E+=1)e.g._hasOpacity&&e.g._collapsable&&(C=e.g.o[E*2+1]),s.addColorStop(k[E*4]/100,"rgba("+k[E*4+1]+","+k[E*4+2]+","+k[E*4+3]+","+C+")");n.grd=s}n.coOp=e.o.v*r.opacity},CVShapeElement.prototype.renderStroke=function(t,e,r){var n=e.style,s=e.d;s&&(s._mdf||this._isFirstFrame)&&(n.da=s.dashArray,n.do=s.dashoffset[0]),(e.c._mdf||this._isFirstFrame)&&(n.co="rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||r._opMdf||this._isFirstFrame)&&(n.coOp=e.o.v*r.opacity),(e.w._mdf||this._isFirstFrame)&&(n.wi=e.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0};function CVTextElement(t,e,r){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(t,e,r)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var t=this.textProperty.currentData;this.renderedLetters=createSizedArray(t.l?t.l.length:0);var e=!1;t.fc?(e=!0,this.values.fill=this.buildColor(t.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=e;var r=!1;t.sc&&(r=!0,this.values.stroke=this.buildColor(t.sc),this.values.sWidth=t.sw);var n=this.globalData.fontManager.getFontByName(t.f),s,a,o=t.l,l=this.mHelper;this.stroke=r,this.values.fValue=t.finalSize+"px "+this.globalData.fontManager.getFontByName(t.f).fFamily,a=t.finalText.length;var c,d,p,g,y,x,E,S,k,C,P=this.data.singleShape,R=t.tr*.001*t.finalSize,j=0,I=0,O=!0,L=0;for(s=0;s<a;s+=1){c=this.globalData.fontManager.getCharData(t.finalText[s],n.fStyle,this.globalData.fontManager.getFontByName(t.f).fFamily),d=c&&c.data||{},l.reset(),P&&o[s].n&&(j=-R,I+=t.yOffset,I+=O?1:0,O=!1),y=d.shapes?d.shapes[0].it:[],E=y.length,l.scale(t.finalSize/100,t.finalSize/100),P&&this.applyTextPropertiesToMatrix(t,l,o[s].line,j,I),k=createSizedArray(E-1);var B=0;for(x=0;x<E;x+=1)if(y[x].ty==="sh"){for(g=y[x].ks.k.i.length,S=y[x].ks.k,C=[],p=1;p<g;p+=1)p===1&&C.push(l.applyToX(S.v[0][0],S.v[0][1],0),l.applyToY(S.v[0][0],S.v[0][1],0)),C.push(l.applyToX(S.o[p-1][0],S.o[p-1][1],0),l.applyToY(S.o[p-1][0],S.o[p-1][1],0),l.applyToX(S.i[p][0],S.i[p][1],0),l.applyToY(S.i[p][0],S.i[p][1],0),l.applyToX(S.v[p][0],S.v[p][1],0),l.applyToY(S.v[p][0],S.v[p][1],0));C.push(l.applyToX(S.o[p-1][0],S.o[p-1][1],0),l.applyToY(S.o[p-1][0],S.o[p-1][1],0),l.applyToX(S.i[0][0],S.i[0][1],0),l.applyToY(S.i[0][0],S.i[0][1],0),l.applyToX(S.v[0][0],S.v[0][1],0),l.applyToY(S.v[0][0],S.v[0][1],0)),k[B]=C,B+=1}P&&(j+=o[s].l,j+=R),this.textSpans[L]?this.textSpans[L].elem=k:this.textSpans[L]={elem:k},L+=1}},CVTextElement.prototype.renderInnerContent=function(){this.validateText();var t=this.canvasContext;t.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var e,r,n,s,a,o,l=this.textAnimator.renderedLetters,c=this.textProperty.currentData.l;r=c.length;var d,p=null,g=null,y=null,x,E,S=this.globalData.renderer;for(e=0;e<r;e+=1)if(!c[e].n){if(d=l[e],d&&(S.save(),S.ctxTransform(d.p),S.ctxOpacity(d.o)),this.fill){for(d&&d.fc?p!==d.fc&&(S.ctxFillStyle(d.fc),p=d.fc):p!==this.values.fill&&(p=this.values.fill,S.ctxFillStyle(this.values.fill)),x=this.textSpans[e].elem,s=x.length,this.globalData.canvasContext.beginPath(),n=0;n<s;n+=1)for(E=x[n],o=E.length,this.globalData.canvasContext.moveTo(E[0],E[1]),a=2;a<o;a+=6)this.globalData.canvasContext.bezierCurveTo(E[a],E[a+1],E[a+2],E[a+3],E[a+4],E[a+5]);this.globalData.canvasContext.closePath(),S.ctxFill()}if(this.stroke){for(d&&d.sw?y!==d.sw&&(y=d.sw,S.ctxLineWidth(d.sw)):y!==this.values.sWidth&&(y=this.values.sWidth,S.ctxLineWidth(this.values.sWidth)),d&&d.sc?g!==d.sc&&(g=d.sc,S.ctxStrokeStyle(d.sc)):g!==this.values.stroke&&(g=this.values.stroke,S.ctxStrokeStyle(this.values.stroke)),x=this.textSpans[e].elem,s=x.length,this.globalData.canvasContext.beginPath(),n=0;n<s;n+=1)for(E=x[n],o=E.length,this.globalData.canvasContext.moveTo(E[0],E[1]),a=2;a<o;a+=6)this.globalData.canvasContext.bezierCurveTo(E[a],E[a+1],E[a+2],E[a+3],E[a+4],E[a+5]);this.globalData.canvasContext.closePath(),S.ctxStroke()}d&&this.globalData.renderer.restore()}};function CVImageElement(t,e,r){this.assetData=e.getAssetData(t.refId),this.img=e.imageLoader.getAsset(this.assetData),this.initElement(t,e,r)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var t=createTag("canvas");t.width=this.assetData.w,t.height=this.assetData.h;var e=t.getContext("2d"),r=this.img.width,n=this.img.height,s=r/n,a=this.assetData.w/this.assetData.h,o,l,c=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;s>a&&c==="xMidYMid slice"||s<a&&c!=="xMidYMid slice"?(l=n,o=l*a):(o=r,l=o/a),e.drawImage(this.img,(r-o)/2,(n-l)/2,o,l,0,0,this.assetData.w,this.assetData.h),this.img=t}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null};function CVSolidElement(t,e,r){this.initElement(t,e,r)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)};function CanvasRendererBase(){}extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(t){return new CVShapeElement(t,this.globalData,this)},CanvasRendererBase.prototype.createText=function(t){return new CVTextElement(t,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(t){return new CVImageElement(t,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(t){return new CVSolidElement(t,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(t){t[0]===1&&t[1]===0&&t[4]===0&&t[5]===1&&t[12]===0&&t[13]===0||this.canvasContext.transform(t[0],t[1],t[4],t[5],t[12],t[13])},CanvasRendererBase.prototype.ctxOpacity=function(t){this.canvasContext.globalAlpha*=t<0?0:t},CanvasRendererBase.prototype.ctxFillStyle=function(t){this.canvasContext.fillStyle=t},CanvasRendererBase.prototype.ctxStrokeStyle=function(t){this.canvasContext.strokeStyle=t},CanvasRendererBase.prototype.ctxLineWidth=function(t){this.canvasContext.lineWidth=t},CanvasRendererBase.prototype.ctxLineCap=function(t){this.canvasContext.lineCap=t},CanvasRendererBase.prototype.ctxLineJoin=function(t){this.canvasContext.lineJoin=t},CanvasRendererBase.prototype.ctxMiterLimit=function(t){this.canvasContext.miterLimit=t},CanvasRendererBase.prototype.ctxFill=function(t){this.canvasContext.fill(t)},CanvasRendererBase.prototype.ctxFillRect=function(t,e,r,n){this.canvasContext.fillRect(t,e,r,n)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.reset()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(t){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}t&&(this.globalData.blendMode="source-over"),this.contextData.restore(t)},CanvasRendererBase.prototype.configAnimation=function(t){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var e=this.animationItem.container.style;e.width="100%",e.height="100%";var r="0px 0px 0px";e.transformOrigin=r,e.mozTransformOrigin=r,e.webkitTransformOrigin=r,e["-webkit-transform"]=r,e.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=t,this.layers=t.layers,this.transformCanvas={w:t.w,h:t.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(t,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(t.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(t,e){this.reset();var r,n;t?(r=t,n=e,this.canvasContext.canvas.width=r,this.canvasContext.canvas.height=n):(this.animationItem.wrapper&&this.animationItem.container?(r=this.animationItem.wrapper.offsetWidth,n=this.animationItem.wrapper.offsetHeight):(r=this.canvasContext.canvas.width,n=this.canvasContext.canvas.height),this.canvasContext.canvas.width=r*this.renderConfig.dpr,this.canvasContext.canvas.height=n*this.renderConfig.dpr);var s,a;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var o=this.renderConfig.preserveAspectRatio.split(" "),l=o[1]||"meet",c=o[0]||"xMidYMid",d=c.substr(0,4),p=c.substr(4);s=r/n,a=this.transformCanvas.w/this.transformCanvas.h,a>s&&l==="meet"||a<s&&l==="slice"?(this.transformCanvas.sx=r/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=r/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=n/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=n/(this.transformCanvas.h/this.renderConfig.dpr)),d==="xMid"&&(a<s&&l==="meet"||a>s&&l==="slice")?this.transformCanvas.tx=(r-this.transformCanvas.w*(n/this.transformCanvas.h))/2*this.renderConfig.dpr:d==="xMax"&&(a<s&&l==="meet"||a>s&&l==="slice")?this.transformCanvas.tx=(r-this.transformCanvas.w*(n/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,p==="YMid"&&(a>s&&l==="meet"||a<s&&l==="slice")?this.transformCanvas.ty=(n-this.transformCanvas.h*(r/this.transformCanvas.w))/2*this.renderConfig.dpr:p==="YMax"&&(a>s&&l==="meet"||a<s&&l==="slice")?this.transformCanvas.ty=(n-this.transformCanvas.h*(r/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=r/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=n/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText="");var t,e=this.layers?this.layers.length:0;for(t=e-1;t>=0;t-=1)this.elements[t]&&this.elements[t].destroy&&this.elements[t].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(t,e){if(!(this.renderedFrame===t&&this.renderConfig.clearCanvas===!0&&!e||this.destroyed||t===-1)){this.renderedFrame=t,this.globalData.frameNum=t-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||e,this.globalData.projectInterface.currentFrame=t;var r,n=this.layers.length;for(this.completeLayers||this.checkLayers(t),r=n-1;r>=0;r-=1)(this.completeLayers||this.elements[r])&&this.elements[r].prepareFrame(t-this.layers[r].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),r=n-1;r>=0;r-=1)(this.completeLayers||this.elements[r])&&this.elements[r].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(t){var e=this.elements;if(!(e[t]||this.layers[t].ty===99)){var r=this.createItem(this.layers[t],this,this.globalData);e[t]=r,r.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var t=this.pendingElements.pop();t.checkParenting()}},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"};function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){this.stack=[],this.cArrPos=0,this.cTr=new Matrix;var t,e=15;for(t=0;t<e;t+=1){var r=new CanvasContext;this.stack[t]=r}this._length=e,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}CVContextData.prototype.duplicate=function(){var t=this._length*2,e=0;for(e=this._length;e<t;e+=1)this.stack[e]=new CanvasContext;this._length=t},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(t){this.cArrPos-=1;var e=this.stack[this.cArrPos],r=e.transform,n,s=this.cTr.props;for(n=0;n<16;n+=1)s[n]=r[n];if(t){this.nativeContext.restore();var a=this.stack[this.cArrPos+1];this.appliedFillStyle=a.fillStyle,this.appliedStrokeStyle=a.strokeStyle,this.appliedLineWidth=a.lineWidth,this.appliedLineCap=a.lineCap,this.appliedLineJoin=a.lineJoin,this.appliedMiterLimit=a.miterLimit}this.nativeContext.setTransform(r[0],r[1],r[4],r[5],r[12],r[13]),(t||e.opacity!==-1&&this.currentOpacity!==e.opacity)&&(this.nativeContext.globalAlpha=e.opacity,this.currentOpacity=e.opacity),this.currentFillStyle=e.fillStyle,this.currentStrokeStyle=e.strokeStyle,this.currentLineWidth=e.lineWidth,this.currentLineCap=e.lineCap,this.currentLineJoin=e.lineJoin,this.currentMiterLimit=e.miterLimit},CVContextData.prototype.save=function(t){t&&this.nativeContext.save();var e=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var r=this.stack[this.cArrPos],n;for(n=0;n<16;n+=1)r.transform[n]=e[n];this.cArrPos+=1;var s=this.stack[this.cArrPos];s.opacity=r.opacity,s.fillStyle=r.fillStyle,s.strokeStyle=r.strokeStyle,s.lineWidth=r.lineWidth,s.lineCap=r.lineCap,s.lineJoin=r.lineJoin,s.miterLimit=r.miterLimit},CVContextData.prototype.setOpacity=function(t){this.stack[this.cArrPos].opacity=t},CVContextData.prototype.setContext=function(t){this.nativeContext=t},CVContextData.prototype.fillStyle=function(t){this.stack[this.cArrPos].fillStyle!==t&&(this.currentFillStyle=t,this.stack[this.cArrPos].fillStyle=t)},CVContextData.prototype.strokeStyle=function(t){this.stack[this.cArrPos].strokeStyle!==t&&(this.currentStrokeStyle=t,this.stack[this.cArrPos].strokeStyle=t)},CVContextData.prototype.lineWidth=function(t){this.stack[this.cArrPos].lineWidth!==t&&(this.currentLineWidth=t,this.stack[this.cArrPos].lineWidth=t)},CVContextData.prototype.lineCap=function(t){this.stack[this.cArrPos].lineCap!==t&&(this.currentLineCap=t,this.stack[this.cArrPos].lineCap=t)},CVContextData.prototype.lineJoin=function(t){this.stack[this.cArrPos].lineJoin!==t&&(this.currentLineJoin=t,this.stack[this.cArrPos].lineJoin=t)},CVContextData.prototype.miterLimit=function(t){this.stack[this.cArrPos].miterLimit!==t&&(this.currentMiterLimit=t,this.stack[this.cArrPos].miterLimit=t)},CVContextData.prototype.transform=function(t){this.transformMat.cloneFromProps(t);var e=this.cTr;this.transformMat.multiply(e),e.cloneFromProps(this.transformMat.props);var r=e.props;this.nativeContext.setTransform(r[0],r[1],r[4],r[5],r[12],r[13])},CVContextData.prototype.opacity=function(t){var e=this.stack[this.cArrPos].opacity;e*=t<0?0:t,this.stack[this.cArrPos].opacity!==e&&(this.currentOpacity!==t&&(this.nativeContext.globalAlpha=t,this.currentOpacity=t),this.stack[this.cArrPos].opacity=e)},CVContextData.prototype.fill=function(t){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(t)},CVContextData.prototype.fillRect=function(t,e,r,n){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(t,e,r,n)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()};function CVCompElement(t,e,r){this.completeLayers=!1,this.layers=t.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(t,e,r),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var t=this.canvasContext;t.beginPath(),t.moveTo(0,0),t.lineTo(this.data.w,0),t.lineTo(this.data.w,this.data.h),t.lineTo(0,this.data.h),t.lineTo(0,0),t.clip();var e,r=this.layers.length;for(e=r-1;e>=0;e-=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()},CVCompElement.prototype.destroy=function(){var t,e=this.layers.length;for(t=e-1;t>=0;t-=1)this.elements[t]&&this.elements[t].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(t){return new CVCompElement(t,this.globalData,this)};function CanvasRenderer(t,e){this.animationItem=t,this.renderConfig={clearCanvas:e&&e.clearCanvas!==void 0?e.clearCanvas:!0,context:e&&e.context||null,progressiveLoad:e&&e.progressiveLoad||!1,preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:e&&e.contentVisibility||"visible",className:e&&e.className||"",id:e&&e.id||"",runExpressions:!e||e.runExpressions===void 0||e.runExpressions},this.renderConfig.dpr=e&&e.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=e&&e.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(t){return new CVCompElement(t,this.globalData,this)};function HBaseElement(){}HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var e=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var r=this.finalTransform.mat.toCSS();e.transform=r,e.webkitTransform=r}this.finalTransform._opMdf&&(e.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting;function HSolidElement(t,e,r){this.initElement(t,e,r)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var t;this.data.hasMask?(t=createNS("rect"),t.setAttribute("width",this.data.sw),t.setAttribute("height",this.data.sh),t.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):(t=createTag("div"),t.style.width=this.data.sw+"px",t.style.height=this.data.sh+"px",t.style.backgroundColor=this.data.sc),this.layerElement.appendChild(t)};function HShapeElement(t,e,r){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(t,e,r),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var t;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),t=this.svgElement;else{t=createNS("svg");var e=this.comp.data?this.comp.data:this.globalData.compSize;t.setAttribute("width",e.w),t.setAttribute("height",e.h),t.appendChild(this.shapesContainer),this.layerElement.appendChild(t)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=t},HShapeElement.prototype.getTransformedPoint=function(t,e){var r,n=t.length;for(r=0;r<n;r+=1)e=t[r].mProps.v.applyToPointArray(e[0],e[1],0);return e},HShapeElement.prototype.calculateShapeBoundingBox=function(t,e){var r=t.sh.v,n=t.transformers,s,a=r._length,o,l,c,d;if(!(a<=1)){for(s=0;s<a-1;s+=1)o=this.getTransformedPoint(n,r.v[s]),l=this.getTransformedPoint(n,r.o[s]),c=this.getTransformedPoint(n,r.i[s+1]),d=this.getTransformedPoint(n,r.v[s+1]),this.checkBounds(o,l,c,d,e);r.c&&(o=this.getTransformedPoint(n,r.v[s]),l=this.getTransformedPoint(n,r.o[s]),c=this.getTransformedPoint(n,r.i[0]),d=this.getTransformedPoint(n,r.v[0]),this.checkBounds(o,l,c,d,e))}},HShapeElement.prototype.checkBounds=function(t,e,r,n,s){this.getBoundsOfCurve(t,e,r,n);var a=this.shapeBoundingBox;s.x=bmMin(a.left,s.x),s.xMax=bmMax(a.right,s.xMax),s.y=bmMin(a.top,s.y),s.yMax=bmMax(a.bottom,s.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(t,e,r,n){for(var s=[[t[0],n[0]],[t[1],n[1]]],a,o,l,c,d,p,g,y=0;y<2;++y)o=6*t[y]-12*e[y]+6*r[y],a=-3*t[y]+9*e[y]-9*r[y]+3*n[y],l=3*e[y]-3*t[y],o|=0,a|=0,l|=0,a===0&&o===0||(a===0?(c=-l/o,c>0&&c<1&&s[y].push(this.calculateF(c,t,e,r,n,y))):(d=o*o-4*l*a,d>=0&&(p=(-o+bmSqrt(d))/(2*a),p>0&&p<1&&s[y].push(this.calculateF(p,t,e,r,n,y)),g=(-o-bmSqrt(d))/(2*a),g>0&&g<1&&s[y].push(this.calculateF(g,t,e,r,n,y)))));this.shapeBoundingBox.left=bmMin.apply(null,s[0]),this.shapeBoundingBox.top=bmMin.apply(null,s[1]),this.shapeBoundingBox.right=bmMax.apply(null,s[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,s[1])},HShapeElement.prototype.calculateF=function(t,e,r,n,s,a){return bmPow(1-t,3)*e[a]+3*bmPow(1-t,2)*t*r[a]+3*(1-t)*bmPow(t,2)*n[a]+bmPow(t,3)*s[a]},HShapeElement.prototype.calculateBoundingBox=function(t,e){var r,n=t.length;for(r=0;r<n;r+=1)t[r]&&t[r].sh?this.calculateShapeBoundingBox(t[r],e):t[r]&&t[r].it?this.calculateBoundingBox(t[r].it,e):t[r]&&t[r].style&&t[r].w&&this.expandStrokeBoundingBox(t[r].w,e)},HShapeElement.prototype.expandStrokeBoundingBox=function(t,e){var r=0;if(t.keyframes){for(var n=0;n<t.keyframes.length;n+=1){var s=t.keyframes[n].s;s>r&&(r=s)}r*=t.mult}else r=t.v*t.mult;e.x-=r,e.xMax+=r,e.y-=r,e.yMax+=r},HShapeElement.prototype.currentBoxContains=function(t){return this.currentBBox.x<=t.x&&this.currentBBox.y<=t.y&&this.currentBBox.width+this.currentBBox.x>=t.x+t.width&&this.currentBBox.height+this.currentBBox.y>=t.y+t.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var t=this.tempBoundingBox,e=999999;if(t.x=e,t.xMax=-e,t.y=e,t.yMax=-e,this.calculateBoundingBox(this.itemsData,t),t.width=t.xMax<t.x?0:t.xMax-t.x,t.height=t.yMax<t.y?0:t.yMax-t.y,this.currentBoxContains(t))return;var r=!1;if(this.currentBBox.w!==t.width&&(this.currentBBox.w=t.width,this.shapeCont.setAttribute("width",t.width),r=!0),this.currentBBox.h!==t.height&&(this.currentBBox.h=t.height,this.shapeCont.setAttribute("height",t.height),r=!0),r||this.currentBBox.x!==t.x||this.currentBBox.y!==t.y){this.currentBBox.w=t.width,this.currentBBox.h=t.height,this.currentBBox.x=t.x,this.currentBBox.y=t.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var n=this.shapeCont.style,s="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";n.transform=s,n.webkitTransform=s}}};function HTextElement(t,e,r){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(t,e,r)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var t=createNS("g");this.maskedElement.appendChild(t),this.innerElem=t}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var t=this.textProperty.currentData;this.renderedLetters=createSizedArray(t.l?t.l.length:0);var e=this.innerElem.style,r=t.fc?this.buildColor(t.fc):"rgba(0,0,0,0)";e.fill=r,e.color=r,t.sc&&(e.stroke=this.buildColor(t.sc),e.strokeWidth=t.sw+"px");var n=this.globalData.fontManager.getFontByName(t.f);if(!this.globalData.fontManager.chars)if(e.fontSize=t.finalSize+"px",e.lineHeight=t.finalSize+"px",n.fClass)this.innerElem.className=n.fClass;else{e.fontFamily=n.fFamily;var s=t.fWeight,a=t.fStyle;e.fontStyle=a,e.fontWeight=s}var o,l,c=t.l;l=c.length;var d,p,g,y=this.mHelper,x,E="",S=0;for(o=0;o<l;o+=1){if(this.globalData.fontManager.chars?(this.textPaths[S]?d=this.textPaths[S]:(d=createNS("path"),d.setAttribute("stroke-linecap",lineCapEnum[1]),d.setAttribute("stroke-linejoin",lineJoinEnum[2]),d.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[S]?(p=this.textSpans[S],g=p.children[0]):(p=createTag("div"),p.style.lineHeight=0,g=createNS("svg"),g.appendChild(d),styleDiv(p)))):this.isMasked?d=this.textPaths[S]?this.textPaths[S]:createNS("text"):this.textSpans[S]?(p=this.textSpans[S],d=this.textPaths[S]):(p=createTag("span"),styleDiv(p),d=createTag("span"),styleDiv(d),p.appendChild(d)),this.globalData.fontManager.chars){var k=this.globalData.fontManager.getCharData(t.finalText[o],n.fStyle,this.globalData.fontManager.getFontByName(t.f).fFamily),C;if(k?C=k.data:C=null,y.reset(),C&&C.shapes&&C.shapes.length&&(x=C.shapes[0].it,y.scale(t.finalSize/100,t.finalSize/100),E=this.createPathShape(y,x),d.setAttribute("d",E)),this.isMasked)this.innerElem.appendChild(d);else{if(this.innerElem.appendChild(p),C&&C.shapes){document.body.appendChild(g);var P=g.getBBox();g.setAttribute("width",P.width+2),g.setAttribute("height",P.height+2),g.setAttribute("viewBox",P.x-1+" "+(P.y-1)+" "+(P.width+2)+" "+(P.height+2));var R=g.style,j="translate("+(P.x-1)+"px,"+(P.y-1)+"px)";R.transform=j,R.webkitTransform=j,c[o].yOffset=P.y-1}else g.setAttribute("width",1),g.setAttribute("height",1);p.appendChild(g)}}else if(d.textContent=c[o].val,d.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(d);else{this.innerElem.appendChild(p);var I=d.style,O="translate3d(0,"+-t.finalSize/1.2+"px,0)";I.transform=O,I.webkitTransform=O}this.isMasked?this.textSpans[S]=d:this.textSpans[S]=p,this.textSpans[S].style.display="block",this.textPaths[S]=d,S+=1}for(;S<this.textSpans.length;)this.textSpans[S].style.display="none",S+=1},HTextElement.prototype.renderInnerContent=function(){this.validateText();var t;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),t=this.svgElement.style;var e="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";t.transform=e,t.webkitTransform=e}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),!(!this.lettersChangedFlag&&!this.textAnimator.lettersChangedFlag)){var r,n,s=0,a=this.textAnimator.renderedLetters,o=this.textProperty.currentData.l;n=o.length;var l,c,d;for(r=0;r<n;r+=1)o[r].n?s+=1:(c=this.textSpans[r],d=this.textPaths[r],l=a[s],s+=1,l._mdf.m&&(this.isMasked?c.setAttribute("transform",l.m):(c.style.webkitTransform=l.m,c.style.transform=l.m)),c.style.opacity=l.o,l.sw&&l._mdf.sw&&d.setAttribute("stroke-width",l.sw),l.sc&&l._mdf.sc&&d.setAttribute("stroke",l.sc),l.fc&&l._mdf.fc&&(d.setAttribute("fill",l.fc),d.style.color=l.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var p=this.innerElem.getBBox();this.currentBBox.w!==p.width&&(this.currentBBox.w=p.width,this.svgElement.setAttribute("width",p.width)),this.currentBBox.h!==p.height&&(this.currentBBox.h=p.height,this.svgElement.setAttribute("height",p.height));var g=1;if(this.currentBBox.w!==p.width+g*2||this.currentBBox.h!==p.height+g*2||this.currentBBox.x!==p.x-g||this.currentBBox.y!==p.y-g){this.currentBBox.w=p.width+g*2,this.currentBBox.h=p.height+g*2,this.currentBBox.x=p.x-g,this.currentBBox.y=p.y-g,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),t=this.svgElement.style;var y="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";t.transform=y,t.webkitTransform=y}}}};function HCameraElement(t,e,r){this.initFrame(),this.initBaseData(t,e,r),this.initHierarchy();var n=PropertyFactory.getProp;if(this.pe=n(this,t.pe,0,0,this),t.ks.p.s?(this.px=n(this,t.ks.p.x,1,0,this),this.py=n(this,t.ks.p.y,1,0,this),this.pz=n(this,t.ks.p.z,1,0,this)):this.p=n(this,t.ks.p,1,0,this),t.ks.a&&(this.a=n(this,t.ks.a,1,0,this)),t.ks.or.k.length&&t.ks.or.k[0].to){var s,a=t.ks.or.k.length;for(s=0;s<a;s+=1)t.ks.or.k[s].to=null,t.ks.or.k[s].ti=null}this.or=n(this,t.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=n(this,t.ks.rx,0,degToRads,this),this.ry=n(this,t.ks.ry,0,degToRads,this),this.rz=n(this,t.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var t,e=this.comp.threeDElements.length,r,n,s;for(t=0;t<e;t+=1)if(r=this.comp.threeDElements[t],r.type==="3d"){n=r.perspectiveElem.style,s=r.container.style;var a=this.pe.v+"px",o="0px 0px 0px",l="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";n.perspective=a,n.webkitPerspective=a,s.transformOrigin=o,s.mozTransformOrigin=o,s.webkitTransformOrigin=o,n.transform=l,n.webkitTransform=l}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var t=this._isFirstFrame,e,r;if(this.hierarchy)for(r=this.hierarchy.length,e=0;e<r;e+=1)t=this.hierarchy[e].finalTransform.mProp._mdf||t;if(t||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(r=this.hierarchy.length-1,e=r;e>=0;e-=1){var n=this.hierarchy[e].finalTransform.mProp;this.mat.translate(-n.p.v[0],-n.p.v[1],n.p.v[2]),this.mat.rotateX(-n.or.v[0]).rotateY(-n.or.v[1]).rotateZ(n.or.v[2]),this.mat.rotateX(-n.rx.v).rotateY(-n.ry.v).rotateZ(n.rz.v),this.mat.scale(1/n.s.v[0],1/n.s.v[1],1/n.s.v[2]),this.mat.translate(n.a.v[0],n.a.v[1],n.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var s;this.p?s=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:s=[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var a=Math.sqrt(Math.pow(s[0],2)+Math.pow(s[1],2)+Math.pow(s[2],2)),o=[s[0]/a,s[1]/a,s[2]/a],l=Math.sqrt(o[2]*o[2]+o[0]*o[0]),c=Math.atan2(o[1],l),d=Math.atan2(o[0],-o[2]);this.mat.rotateY(d).rotateX(-c)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var p=!this._prevMat.equals(this.mat);if((p||this.pe._mdf)&&this.comp.threeDElements){r=this.comp.threeDElements.length;var g,y,x;for(e=0;e<r;e+=1)if(g=this.comp.threeDElements[e],g.type==="3d"){if(p){var E=this.mat.toCSS();x=g.container.style,x.transform=E,x.webkitTransform=E}this.pe._mdf&&(y=g.perspectiveElem.style,y.perspective=this.pe.v+"px",y.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(t){this.prepareProperties(t,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null};function HImageElement(t,e,r){this.assetData=e.getAssetData(t.refId),this.initElement(t,e,r)}extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var t=this.globalData.getAssetsPath(this.assetData),e=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",t),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(e),e.crossOrigin="anonymous",e.src=t,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)};function HybridRendererBase(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:e&&e.className||"",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(e&&e.hideOnTransparent===!1),filterSize:{width:e&&e.filterSize&&e.filterSize.width||"400%",height:e&&e.filterSize&&e.filterSize.height||"400%",x:e&&e.filterSize&&e.filterSize.x||"-100%",y:e&&e.filterSize&&e.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var t=this.pendingElements.pop();t.checkParenting()}},HybridRendererBase.prototype.appendElementInPos=function(t,e){var r=t.getBaseElement();if(r){var n=this.layers[e];if(!n.ddd||!this.supports3d)if(this.threeDElements)this.addTo3dContainer(r,e);else{for(var s=0,a,o,l;s<e;)this.elements[s]&&this.elements[s]!==!0&&this.elements[s].getBaseElement&&(o=this.elements[s],l=this.layers[s].ddd?this.getThreeDContainerByPos(s):o.getBaseElement(),a=l||a),s+=1;a?(!n.ddd||!this.supports3d)&&this.layerElement.insertBefore(r,a):(!n.ddd||!this.supports3d)&&this.layerElement.appendChild(r)}else this.addTo3dContainer(r,e)}},HybridRendererBase.prototype.createShape=function(t){return this.supports3d?new HShapeElement(t,this.globalData,this):new SVGShapeElement(t,this.globalData,this)},HybridRendererBase.prototype.createText=function(t){return this.supports3d?new HTextElement(t,this.globalData,this):new SVGTextLottieElement(t,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(t){return this.camera=new HCameraElement(t,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(t){return this.supports3d?new HImageElement(t,this.globalData,this):new IImageElement(t,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(t){return this.supports3d?new HSolidElement(t,this.globalData,this):new ISolidElement(t,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(t){for(var e=0,r=this.threeDElements.length;e<r;){if(this.threeDElements[e].startPos<=t&&this.threeDElements[e].endPos>=t)return this.threeDElements[e].perspectiveElem;e+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(t,e){var r=createTag("div"),n,s;styleDiv(r);var a=createTag("div");if(styleDiv(a),e==="3d"){n=r.style,n.width=this.globalData.compSize.w+"px",n.height=this.globalData.compSize.h+"px";var o="50% 50%";n.webkitTransformOrigin=o,n.mozTransformOrigin=o,n.transformOrigin=o,s=a.style;var l="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";s.transform=l,s.webkitTransform=l}r.appendChild(a);var c={container:a,perspectiveElem:r,startPos:t,endPos:t,type:e};return this.threeDElements.push(c),c},HybridRendererBase.prototype.build3dContainers=function(){var t,e=this.layers.length,r,n="";for(t=0;t<e;t+=1)this.layers[t].ddd&&this.layers[t].ty!==3?(n!=="3d"&&(n="3d",r=this.createThreeDContainer(t,"3d")),r.endPos=Math.max(r.endPos,t)):(n!=="2d"&&(n="2d",r=this.createThreeDContainer(t,"2d")),r.endPos=Math.max(r.endPos,t));for(e=this.threeDElements.length,t=e-1;t>=0;t-=1)this.resizerElem.appendChild(this.threeDElements[t].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(t,e){for(var r=0,n=this.threeDElements.length;r<n;){if(e<=this.threeDElements[r].endPos){for(var s=this.threeDElements[r].startPos,a;s<e;)this.elements[s]&&this.elements[s].getBaseElement&&(a=this.elements[s].getBaseElement()),s+=1;a?this.threeDElements[r].container.insertBefore(t,a):this.threeDElements[r].container.appendChild(t);break}r+=1}},HybridRendererBase.prototype.configAnimation=function(t){var e=createTag("div"),r=this.animationItem.wrapper,n=e.style;n.width=t.w+"px",n.height=t.h+"px",this.resizerElem=e,styleDiv(e),n.transformStyle="flat",n.mozTransformStyle="flat",n.webkitTransformStyle="flat",this.renderConfig.className&&e.setAttribute("class",this.renderConfig.className),r.appendChild(e),n.overflow="hidden";var s=createNS("svg");s.setAttribute("width","1"),s.setAttribute("height","1"),styleDiv(s),this.resizerElem.appendChild(s);var a=createNS("defs");s.appendChild(a),this.data=t,this.setupGlobalData(t,s),this.globalData.defs=a,this.layers=t.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var t,e=this.layers?this.layers.length:0;for(t=0;t<e;t+=1)this.elements[t]&&this.elements[t].destroy&&this.elements[t].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var t=this.animationItem.wrapper.offsetWidth,e=this.animationItem.wrapper.offsetHeight,r=t/e,n=this.globalData.compSize.w/this.globalData.compSize.h,s,a,o,l;n>r?(s=t/this.globalData.compSize.w,a=t/this.globalData.compSize.w,o=0,l=(e-this.globalData.compSize.h*(t/this.globalData.compSize.w))/2):(s=e/this.globalData.compSize.h,a=e/this.globalData.compSize.h,o=(t-this.globalData.compSize.w*(e/this.globalData.compSize.h))/2,l=0);var c=this.resizerElem.style;c.webkitTransform="matrix3d("+s+",0,0,0,0,"+a+",0,0,0,0,1,0,"+o+","+l+",0,1)",c.transform=c.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var t=this.globalData.compSize.w,e=this.globalData.compSize.h,r,n=this.threeDElements.length;for(r=0;r<n;r+=1){var s=this.threeDElements[r].perspectiveElem.style;s.webkitPerspective=Math.sqrt(Math.pow(t,2)+Math.pow(e,2))+"px",s.perspective=s.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(t){var e,r=t.length,n=createTag("div");for(e=0;e<r;e+=1)if(t[e].xt){var s=this.createComp(t[e],n,this.globalData.comp,null);s.initExpressions(),this.globalData.projectInterface.registerComposition(s)}};function HCompElement(t,e,r){this.layers=t.layers,this.supports3d=!t.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(t,e,r),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(t,e){for(var r=0,n;r<e;)this.elements[r]&&this.elements[r].getBaseElement&&(n=this.elements[r].getBaseElement()),r+=1;n?this.layerElement.insertBefore(t,n):this.layerElement.appendChild(t)},HCompElement.prototype.createComp=function(t){return this.supports3d?new HCompElement(t,this.globalData,this):new SVGCompElement(t,this.globalData,this)};function HybridRenderer(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:e&&e.className||"",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(e&&e.hideOnTransparent===!1),filterSize:{width:e&&e.filterSize&&e.filterSize.width||"400%",height:e&&e.filterSize&&e.filterSize.height||"400%",x:e&&e.filterSize&&e.filterSize.x||"-100%",y:e&&e.filterSize&&e.filterSize.y||"-100%"},runExpressions:!e||e.runExpressions===void 0||e.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(t){return this.supports3d?new HCompElement(t,this.globalData,this):new SVGCompElement(t,this.globalData,this)};var CompExpressionInterface=function(){return function(t){function e(r){for(var n=0,s=t.layers.length;n<s;){if(t.layers[n].nm===r||t.layers[n].ind===r)return t.elements[n].layerInterface;n+=1}return null}return Object.defineProperty(e,"_name",{value:t.data.nm}),e.layer=e,e.pixelAspect=1,e.height=t.data.h||t.globalData.compSize.h,e.width=t.data.w||t.globalData.compSize.w,e.pixelAspect=1,e.frameDuration=1/t.globalData.frameRate,e.displayStartTime=0,e.numLayers=t.layers.length,e}}();function _typeof$2(t){"@babel/helpers - typeof";return _typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$2(t)}function seedRandom(t,e){var r=this,n=256,s=6,a=52,o="random",l=e.pow(n,s),c=e.pow(2,a),d=c*2,p=n-1,g;function y(R,j,I){var O=[];j=j===!0?{entropy:!0}:j||{};var L=k(S(j.entropy?[R,P(t)]:R===null?C():R,3),O),B=new x(O),Z=function(){for(var ie=B.g(s),Q=l,fe=0;ie<c;)ie=(ie+fe)*n,Q*=n,fe=B.g(1);for(;ie>=d;)ie/=2,Q/=2,fe>>>=1;return(ie+fe)/Q};return Z.int32=function(){return B.g(4)|0},Z.quick=function(){return B.g(4)/4294967296},Z.double=Z,k(P(B.S),t),(j.pass||I||function(te,ie,Q,fe){return fe&&(fe.S&&E(fe,B),te.state=function(){return E(B,{})}),Q?(e[o]=te,ie):te})(Z,L,"global"in j?j.global:this==e,j.state)}e["seed"+o]=y;function x(R){var j,I=R.length,O=this,L=0,B=O.i=O.j=0,Z=O.S=[];for(I||(R=[I++]);L<n;)Z[L]=L++;for(L=0;L<n;L++)Z[L]=Z[B=p&B+R[L%I]+(j=Z[L])],Z[B]=j;O.g=function(te){for(var ie,Q=0,fe=O.i,se=O.j,Y=O.S;te--;)ie=Y[fe=p&fe+1],Q=Q*n+Y[p&(Y[fe]=Y[se=p&se+ie])+(Y[se]=ie)];return O.i=fe,O.j=se,Q}}function E(R,j){return j.i=R.i,j.j=R.j,j.S=R.S.slice(),j}function S(R,j){var I=[],O=_typeof$2(R),L;if(j&&O=="object")for(L in R)try{I.push(S(R[L],j-1))}catch{}return I.length?I:O=="string"?R:R+"\0"}function k(R,j){for(var I=R+"",O,L=0;L<I.length;)j[p&L]=p&(O^=j[p&L]*19)+I.charCodeAt(L++);return P(j)}function C(){try{var R=new Uint8Array(n);return(r.crypto||r.msCrypto).getRandomValues(R),P(R)}catch{var j=r.navigator,I=j&&j.plugins;return[+new Date,r,I,r.screen,P(t)]}}function P(R){return String.fromCharCode.apply(0,R)}k(e.random(),t)}function initialize$2(t){seedRandom([],t)}var propTypes={SHAPE:"shape"};function _typeof$1(t){"@babel/helpers - typeof";return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$1(t)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};initialize$2(BMMath);function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(t){return t.constructor===Array||t.constructor===Float32Array}function isNumerable(t,e){return t==="number"||e instanceof Number||t==="boolean"||t==="string"}function $bm_neg(t){var e=_typeof$1(t);if(e==="number"||t instanceof Number||e==="boolean")return-t;if($bm_isInstanceOfArray(t)){var r,n=t.length,s=[];for(r=0;r<n;r+=1)s[r]=-t[r];return s}return t.propType?t.v:-t}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(t,e){var r=_typeof$1(t),n=_typeof$1(e);if(isNumerable(r,t)&&isNumerable(n,e)||r==="string"||n==="string")return t+e;if($bm_isInstanceOfArray(t)&&isNumerable(n,e))return t=t.slice(0),t[0]+=e,t;if(isNumerable(r,t)&&$bm_isInstanceOfArray(e))return e=e.slice(0),e[0]=t+e[0],e;if($bm_isInstanceOfArray(t)&&$bm_isInstanceOfArray(e)){for(var s=0,a=t.length,o=e.length,l=[];s<a||s<o;)(typeof t[s]=="number"||t[s]instanceof Number)&&(typeof e[s]=="number"||e[s]instanceof Number)?l[s]=t[s]+e[s]:l[s]=e[s]===void 0?t[s]:t[s]||e[s],s+=1;return l}return 0}var add=sum;function sub(t,e){var r=_typeof$1(t),n=_typeof$1(e);if(isNumerable(r,t)&&isNumerable(n,e))return r==="string"&&(t=parseInt(t,10)),n==="string"&&(e=parseInt(e,10)),t-e;if($bm_isInstanceOfArray(t)&&isNumerable(n,e))return t=t.slice(0),t[0]-=e,t;if(isNumerable(r,t)&&$bm_isInstanceOfArray(e))return e=e.slice(0),e[0]=t-e[0],e;if($bm_isInstanceOfArray(t)&&$bm_isInstanceOfArray(e)){for(var s=0,a=t.length,o=e.length,l=[];s<a||s<o;)(typeof t[s]=="number"||t[s]instanceof Number)&&(typeof e[s]=="number"||e[s]instanceof Number)?l[s]=t[s]-e[s]:l[s]=e[s]===void 0?t[s]:t[s]||e[s],s+=1;return l}return 0}function mul(t,e){var r=_typeof$1(t),n=_typeof$1(e),s;if(isNumerable(r,t)&&isNumerable(n,e))return t*e;var a,o;if($bm_isInstanceOfArray(t)&&isNumerable(n,e)){for(o=t.length,s=createTypedArray("float32",o),a=0;a<o;a+=1)s[a]=t[a]*e;return s}if(isNumerable(r,t)&&$bm_isInstanceOfArray(e)){for(o=e.length,s=createTypedArray("float32",o),a=0;a<o;a+=1)s[a]=t*e[a];return s}return 0}function div(t,e){var r=_typeof$1(t),n=_typeof$1(e),s;if(isNumerable(r,t)&&isNumerable(n,e))return t/e;var a,o;if($bm_isInstanceOfArray(t)&&isNumerable(n,e)){for(o=t.length,s=createTypedArray("float32",o),a=0;a<o;a+=1)s[a]=t[a]/e;return s}if(isNumerable(r,t)&&$bm_isInstanceOfArray(e)){for(o=e.length,s=createTypedArray("float32",o),a=0;a<o;a+=1)s[a]=t/e[a];return s}return 0}function mod(t,e){return typeof t=="string"&&(t=parseInt(t,10)),typeof e=="string"&&(e=parseInt(e,10)),t%e}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(t,e,r){if(e>r){var n=r;r=e,e=n}return Math.min(Math.max(t,e),r)}function radiansToDegrees(t){return t/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(t){return t*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(t,e){if(typeof t=="number"||t instanceof Number)return e=e||0,Math.abs(t-e);e||(e=helperLengthArray);var r,n=Math.min(t.length,e.length),s=0;for(r=0;r<n;r+=1)s+=Math.pow(e[r]-t[r],2);return Math.sqrt(s)}function normalize(t){return div(t,length(t))}function rgbToHsl(t){var e=t[0],r=t[1],n=t[2],s=Math.max(e,r,n),a=Math.min(e,r,n),o,l,c=(s+a)/2;if(s===a)o=0,l=0;else{var d=s-a;switch(l=c>.5?d/(2-s-a):d/(s+a),s){case e:o=(r-n)/d+(r<n?6:0);break;case r:o=(n-e)/d+2;break;case n:o=(e-r)/d+4;break}o/=6}return[o,l,c,t[3]]}function hue2rgb(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function hslToRgb(t){var e=t[0],r=t[1],n=t[2],s,a,o;if(r===0)s=n,o=n,a=n;else{var l=n<.5?n*(1+r):n+r-n*r,c=2*n-l;s=hue2rgb(c,l,e+1/3),a=hue2rgb(c,l,e),o=hue2rgb(c,l,e-1/3)}return[s,a,o,t[3]]}function linear(t,e,r,n,s){if((n===void 0||s===void 0)&&(n=e,s=r,e=0,r=1),r<e){var a=r;r=e,e=a}if(t<=e)return n;if(t>=r)return s;var o=r===e?0:(t-e)/(r-e);if(!n.length)return n+(s-n)*o;var l,c=n.length,d=createTypedArray("float32",c);for(l=0;l<c;l+=1)d[l]=n[l]+(s[l]-n[l])*o;return d}function random(t,e){if(e===void 0&&(t===void 0?(t=0,e=1):(e=t,t=void 0)),e.length){var r,n=e.length;t||(t=createTypedArray("float32",n));var s=createTypedArray("float32",n),a=BMMath.random();for(r=0;r<n;r+=1)s[r]=t[r]+a*(e[r]-t[r]);return s}t===void 0&&(t=0);var o=BMMath.random();return t+o*(e-t)}function createPath(t,e,r,n){var s,a=t.length,o=shapePool.newElement();o.setPathData(!!n,a);var l=[0,0],c,d;for(s=0;s<a;s+=1)c=e&&e[s]?e[s]:l,d=r&&r[s]?r[s]:l,o.setTripleAt(t[s][0],t[s][1],d[0]+t[s][0],d[1]+t[s][1],c[0]+t[s][0],c[1]+t[s][1],s,!0);return o}function initiateExpression(elem,data,property){function noOp(t){return t}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty._name=elem.data.nm,thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=(function t(e,r){var n,s,a=this.pv.length?this.pv.length:1,o=createTypedArray("float32",a);e=5;var l=Math.floor(time*e);for(n=0,s=0;n<l;){for(s=0;s<a;s+=1)o[s]+=-r+r*2*BMMath.random();n+=1}var c=time*e,d=c-Math.floor(c),p=createTypedArray("float32",a);if(a>1){for(s=0;s<a;s+=1)p[s]=this.pv[s]+o[s]+(-r+r*2*BMMath.random())*d;return p}return this.pv+o[0]+(-r+r*2*BMMath.random())*d}).bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty));function loopInDuration(t,e){return loopIn(t,e,!0)}function loopOutDuration(t,e){return loopOut(t,e,!0)}this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(t,e){var r=[e[0]-t[0],e[1]-t[1],e[2]-t[2]],n=Math.atan2(r[0],Math.sqrt(r[1]*r[1]+r[2]*r[2]))/degToRads,s=-Math.atan2(r[1],r[2])/degToRads;return[s,n,0]}function easeOut(t,e,r,n,s){return applyEase(easeOutBez,t,e,r,n,s)}function easeIn(t,e,r,n,s){return applyEase(easeInBez,t,e,r,n,s)}function ease(t,e,r,n,s){return applyEase(easeInOutBez,t,e,r,n,s)}function applyEase(t,e,r,n,s,a){s===void 0?(s=r,a=n):e=(e-r)/(n-r),e>1?e=1:e<0&&(e=0);var o=t(e);if($bm_isInstanceOfArray(s)){var l,c=s.length,d=createTypedArray("float32",c);for(l=0;l<c;l+=1)d[l]=(a[l]-s[l])*o+s[l];return d}return(a-s)*o+s}function nearestKey(t){var e,r=data.k.length,n,s;if(!data.k.length||typeof data.k[0]=="number")n=0,s=0;else if(n=-1,t*=elem.comp.globalData.frameRate,t<data.k[0].t)n=1,s=data.k[0].t;else{for(e=0;e<r-1;e+=1)if(t===data.k[e].t){n=e+1,s=data.k[e].t;break}else if(t>data.k[e].t&&t<data.k[e+1].t){t-data.k[e].t>data.k[e+1].t-t?(n=e+2,s=data.k[e+1].t):(n=e+1,s=data.k[e].t);break}n===-1&&(n=e+1,s=data.k[e].t)}var a={};return a.index=n,a.time=s/elem.comp.globalData.frameRate,a}function key(t){var e,r,n;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+t);t-=1,e={time:data.k[t].t/elem.comp.globalData.frameRate,value:[]};var s=Object.prototype.hasOwnProperty.call(data.k[t],"s")?data.k[t].s:data.k[t-1].e;for(n=s.length,r=0;r<n;r+=1)e[r]=s[r],e.value[r]=s[r];return e}function framesToTime(t,e){return e||(e=elem.comp.globalData.frameRate),t/e}function timeToFrames(t,e){return!t&&t!==0&&(t=time),e||(e=elem.comp.globalData.frameRate),t*e}function seedRandom(t){BMMath.seedrandom(randSeed+t)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(t,e){return typeof value=="string"?e===void 0?value.substring(t):value.substring(t,e):""}function substr(t,e){return typeof value=="string"?e===void 0?value.substr(t):value.substr(t,e):""}function posterizeTime(t){time=t===0?0:Math.floor(time*t)/t,value=valueAtTime(time)}var time,velocity,value,text,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!!(elem.hierarchy&&elem.hierarchy.length),parent,randSeed=Math.floor(Math.random()*1e6),globalData=elem.globalData;function executeExpression(t){return value=t,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType===4&&!content&&(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!!(elem.hierarchy&&elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt,scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var t={};t.initExpressions=e,t.resetFrame=ExpressionManager.resetFrame;function e(r){var n=0,s=[];function a(){n+=1}function o(){n-=1,n===0&&c()}function l(d){s.indexOf(d)===-1&&s.push(d)}function c(){var d,p=s.length;for(d=0;d<p;d+=1)s[d].release();s.length=0}r.renderer.compInterface=CompExpressionInterface(r.renderer),r.renderer.globalData.projectInterface.registerComposition(r.renderer),r.renderer.globalData.pushExpression=a,r.renderer.globalData.popExpression=o,r.renderer.globalData.registerExpressionProperty=l}return t}(),MaskManagerInterface=function(){function t(r,n){this._mask=r,this._data=n}Object.defineProperty(t.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(t.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),this._mask.op.v*100}});var e=function(n){var s=createSizedArray(n.viewData.length),a,o=n.viewData.length;for(a=0;a<o;a+=1)s[a]=new t(n.viewData[a],n.masksProperties[a]);var l=function(d){for(a=0;a<o;){if(n.masksProperties[a].nm===d)return s[a];a+=1}return null};return l};return e}(),ExpressionPropertyInterface=function(){var t={pv:0,v:0,mult:1},e={pv:[0,0,0],v:[0,0,0],mult:1};function r(o,l,c){Object.defineProperty(o,"velocity",{get:function(){return l.getVelocityAtTime(l.comp.currentFrame)}}),o.numKeys=l.keyframes?l.keyframes.length:0,o.key=function(d){if(!o.numKeys)return 0;var p="";"s"in l.keyframes[d-1]?p=l.keyframes[d-1].s:"e"in l.keyframes[d-2]?p=l.keyframes[d-2].e:p=l.keyframes[d-2].s;var g=c==="unidimensional"?new Number(p):Object.assign({},p);return g.time=l.keyframes[d-1].t/l.elem.comp.globalData.frameRate,g.value=c==="unidimensional"?p[0]:p,g},o.valueAtTime=l.getValueAtTime,o.speedAtTime=l.getSpeedAtTime,o.velocityAtTime=l.getVelocityAtTime,o.propertyGroup=l.propertyGroup}function n(o){(!o||!("pv"in o))&&(o=t);var l=1/o.mult,c=o.pv*l,d=new Number(c);return d.value=c,r(d,o,"unidimensional"),function(){return o.k&&o.getValue(),c=o.v*l,d.value!==c&&(d=new Number(c),d.value=c,d[0]=c,r(d,o,"unidimensional")),d}}function s(o){(!o||!("pv"in o))&&(o=e);var l=1/o.mult,c=o.data&&o.data.l||o.pv.length,d=createTypedArray("float32",c),p=createTypedArray("float32",c);return d.value=p,r(d,o,"multidimensional"),function(){o.k&&o.getValue();for(var g=0;g<c;g+=1)p[g]=o.v[g]*l,d[g]=p[g];return d}}function a(){return t}return function(o){return o?o.propType==="unidimensional"?n(o):s(o):a}}(),TransformExpressionInterface=function(){return function(t){function e(o){switch(o){case"scale":case"Scale":case"ADBE Scale":case 6:return e.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return e.rotation;case"ADBE Rotate X":return e.xRotation;case"ADBE Rotate Y":return e.yRotation;case"position":case"Position":case"ADBE Position":case 2:return e.position;case"ADBE Position_0":return e.xPosition;case"ADBE Position_1":return e.yPosition;case"ADBE Position_2":return e.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return e.anchorPoint;case"opacity":case"Opacity":case 11:return e.opacity;default:return null}}Object.defineProperty(e,"rotation",{get:ExpressionPropertyInterface(t.r||t.rz)}),Object.defineProperty(e,"zRotation",{get:ExpressionPropertyInterface(t.rz||t.r)}),Object.defineProperty(e,"xRotation",{get:ExpressionPropertyInterface(t.rx)}),Object.defineProperty(e,"yRotation",{get:ExpressionPropertyInterface(t.ry)}),Object.defineProperty(e,"scale",{get:ExpressionPropertyInterface(t.s)});var r,n,s,a;return t.p?a=ExpressionPropertyInterface(t.p):(r=ExpressionPropertyInterface(t.px),n=ExpressionPropertyInterface(t.py),t.pz&&(s=ExpressionPropertyInterface(t.pz))),Object.defineProperty(e,"position",{get:function(){return t.p?a():[r(),n(),s?s():0]}}),Object.defineProperty(e,"xPosition",{get:ExpressionPropertyInterface(t.px)}),Object.defineProperty(e,"yPosition",{get:ExpressionPropertyInterface(t.py)}),Object.defineProperty(e,"zPosition",{get:ExpressionPropertyInterface(t.pz)}),Object.defineProperty(e,"anchorPoint",{get:ExpressionPropertyInterface(t.a)}),Object.defineProperty(e,"opacity",{get:ExpressionPropertyInterface(t.o)}),Object.defineProperty(e,"skew",{get:ExpressionPropertyInterface(t.sk)}),Object.defineProperty(e,"skewAxis",{get:ExpressionPropertyInterface(t.sa)}),Object.defineProperty(e,"orientation",{get:ExpressionPropertyInterface(t.or)}),e}}(),LayerExpressionInterface=function(){function t(d){var p=new Matrix;if(d!==void 0){var g=this._elem.finalTransform.mProp.getValueAtTime(d);g.clone(p)}else{var y=this._elem.finalTransform.mProp;y.applyToMatrix(p)}return p}function e(d,p){var g=this.getMatrix(p);return g.props[12]=0,g.props[13]=0,g.props[14]=0,this.applyPoint(g,d)}function r(d,p){var g=this.getMatrix(p);return this.applyPoint(g,d)}function n(d,p){var g=this.getMatrix(p);return g.props[12]=0,g.props[13]=0,g.props[14]=0,this.invertPoint(g,d)}function s(d,p){var g=this.getMatrix(p);return this.invertPoint(g,d)}function a(d,p){if(this._elem.hierarchy&&this._elem.hierarchy.length){var g,y=this._elem.hierarchy.length;for(g=0;g<y;g+=1)this._elem.hierarchy[g].finalTransform.mProp.applyToMatrix(d)}return d.applyToPointArray(p[0],p[1],p[2]||0)}function o(d,p){if(this._elem.hierarchy&&this._elem.hierarchy.length){var g,y=this._elem.hierarchy.length;for(g=0;g<y;g+=1)this._elem.hierarchy[g].finalTransform.mProp.applyToMatrix(d)}return d.inversePoint(p)}function l(d){var p=new Matrix;if(p.reset(),this._elem.finalTransform.mProp.applyToMatrix(p),this._elem.hierarchy&&this._elem.hierarchy.length){var g,y=this._elem.hierarchy.length;for(g=0;g<y;g+=1)this._elem.hierarchy[g].finalTransform.mProp.applyToMatrix(p);return p.inversePoint(d)}return p.inversePoint(d)}function c(){return[1,1,1,1]}return function(d){var p;function g(S){x.mask=new MaskManagerInterface(S,d)}function y(S){x.effect=S}function x(S){switch(S){case"ADBE Root Vectors Group":case"Contents":case 2:return x.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return p;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return x.effect;case"ADBE Text Properties":return x.textInterface;default:return null}}x.getMatrix=t,x.invertPoint=o,x.applyPoint=a,x.toWorld=r,x.toWorldVec=e,x.fromWorld=s,x.fromWorldVec=n,x.toComp=r,x.fromComp=l,x.sampleImage=c,x.sourceRectAtTime=d.sourceRectAtTime.bind(d),x._elem=d,p=TransformExpressionInterface(d.finalTransform.mProp);var E=getDescriptor(p,"anchorPoint");return Object.defineProperties(x,{hasParent:{get:function(){return d.hierarchy.length}},parent:{get:function(){return d.hierarchy[0].layerInterface}},rotation:getDescriptor(p,"rotation"),scale:getDescriptor(p,"scale"),position:getDescriptor(p,"position"),opacity:getDescriptor(p,"opacity"),anchorPoint:E,anchor_point:E,transform:{get:function(){return p}},active:{get:function(){return d.isInRange}}}),x.startTime=d.data.st,x.index=d.data.ind,x.source=d.data.refId,x.height=d.data.ty===0?d.data.h:100,x.width=d.data.ty===0?d.data.w:100,x.inPoint=d.data.ip/d.comp.globalData.frameRate,x.outPoint=d.data.op/d.comp.globalData.frameRate,x._name=d.data.nm,x.registerMaskInterface=g,x.registerEffectsInterface=y,x}}(),propertyGroupFactory=function(){return function(t,e){return function(r){return r=r===void 0?1:r,r<=0?t:e(r-1)}}}(),PropertyInterface=function(){return function(t,e){var r={_name:t};function n(s){return s=s===void 0?1:s,s<=0?r:e(s-1)}return n}}(),EffectsExpressionInterface=function(){var t={createEffectsInterface:e};function e(s,a){if(s.effectsManager){var o=[],l=s.data.ef,c,d=s.effectsManager.effectElements.length;for(c=0;c<d;c+=1)o.push(r(l[c],s.effectsManager.effectElements[c],a,s));var p=s.data.ef||[],g=function(x){for(c=0,d=p.length;c<d;){if(x===p[c].nm||x===p[c].mn||x===p[c].ix)return o[c];c+=1}return null};return Object.defineProperty(g,"numProperties",{get:function(){return p.length}}),g}return null}function r(s,a,o,l){function c(x){for(var E=s.ef,S=0,k=E.length;S<k;){if(x===E[S].nm||x===E[S].mn||x===E[S].ix)return E[S].ty===5?p[S]:p[S]();S+=1}throw new Error}var d=propertyGroupFactory(c,o),p=[],g,y=s.ef.length;for(g=0;g<y;g+=1)s.ef[g].ty===5?p.push(r(s.ef[g],a.effectElements[g],a.effectElements[g].propertyGroup,l)):p.push(n(a.effectElements[g],s.ef[g].ty,l,d));return s.mn==="ADBE Color Control"&&Object.defineProperty(c,"color",{get:function(){return p[0]()}}),Object.defineProperties(c,{numProperties:{get:function(){return s.np}},_name:{value:s.nm},propertyGroup:{value:d}}),c.enabled=s.en!==0,c.active=c.enabled,c}function n(s,a,o,l){var c=ExpressionPropertyInterface(s.p);function d(){return a===10?o.comp.compInterface(s.p.v):c()}return s.p.setGroupProperty&&s.p.setGroupProperty(PropertyInterface("",l)),d}return t}(),ShapePathInterface=function(){return function(e,r,n){var s=r.sh;function a(l){return l==="Shape"||l==="shape"||l==="Path"||l==="path"||l==="ADBE Vector Shape"||l===2?a.path:null}var o=propertyGroupFactory(a,n);return s.setGroupProperty(PropertyInterface("Path",o)),Object.defineProperties(a,{path:{get:function(){return s.k&&s.getValue(),s}},shape:{get:function(){return s.k&&s.getValue(),s}},_name:{value:e.nm},ix:{value:e.ix},propertyIndex:{value:e.ix},mn:{value:e.mn},propertyGroup:{value:n}}),a}}(),ShapeExpressionInterface=function(){function t(E,S,k){var C=[],P,R=E?E.length:0;for(P=0;P<R;P+=1)E[P].ty==="gr"?C.push(r(E[P],S[P],k)):E[P].ty==="fl"?C.push(n(E[P],S[P],k)):E[P].ty==="st"?C.push(o(E[P],S[P],k)):E[P].ty==="tm"?C.push(l(E[P],S[P],k)):E[P].ty==="tr"||(E[P].ty==="el"?C.push(d(E[P],S[P],k)):E[P].ty==="sr"?C.push(p(E[P],S[P],k)):E[P].ty==="sh"?C.push(ShapePathInterface(E[P],S[P],k)):E[P].ty==="rc"?C.push(g(E[P],S[P],k)):E[P].ty==="rd"?C.push(y(E[P],S[P],k)):E[P].ty==="rp"?C.push(x(E[P],S[P],k)):E[P].ty==="gf"?C.push(s(E[P],S[P],k)):C.push(a(E[P],S[P])));return C}function e(E,S,k){var C,P=function(I){for(var O=0,L=C.length;O<L;){if(C[O]._name===I||C[O].mn===I||C[O].propertyIndex===I||C[O].ix===I||C[O].ind===I)return C[O];O+=1}return typeof I=="number"?C[I-1]:null};P.propertyGroup=propertyGroupFactory(P,k),C=t(E.it,S.it,P.propertyGroup),P.numProperties=C.length;var R=c(E.it[E.it.length-1],S.it[S.it.length-1],P.propertyGroup);return P.transform=R,P.propertyIndex=E.cix,P._name=E.nm,P}function r(E,S,k){var C=function(I){switch(I){case"ADBE Vectors Group":case"Contents":case 2:return C.content;default:return C.transform}};C.propertyGroup=propertyGroupFactory(C,k);var P=e(E,S,C.propertyGroup),R=c(E.it[E.it.length-1],S.it[S.it.length-1],C.propertyGroup);return C.content=P,C.transform=R,Object.defineProperty(C,"_name",{get:function(){return E.nm}}),C.numProperties=E.np,C.propertyIndex=E.ix,C.nm=E.nm,C.mn=E.mn,C}function n(E,S,k){function C(P){return P==="Color"||P==="color"?C.color:P==="Opacity"||P==="opacity"?C.opacity:null}return Object.defineProperties(C,{color:{get:ExpressionPropertyInterface(S.c)},opacity:{get:ExpressionPropertyInterface(S.o)},_name:{value:E.nm},mn:{value:E.mn}}),S.c.setGroupProperty(PropertyInterface("Color",k)),S.o.setGroupProperty(PropertyInterface("Opacity",k)),C}function s(E,S,k){function C(P){return P==="Start Point"||P==="start point"?C.startPoint:P==="End Point"||P==="end point"?C.endPoint:P==="Opacity"||P==="opacity"?C.opacity:null}return Object.defineProperties(C,{startPoint:{get:ExpressionPropertyInterface(S.s)},endPoint:{get:ExpressionPropertyInterface(S.e)},opacity:{get:ExpressionPropertyInterface(S.o)},type:{get:function(){return"a"}},_name:{value:E.nm},mn:{value:E.mn}}),S.s.setGroupProperty(PropertyInterface("Start Point",k)),S.e.setGroupProperty(PropertyInterface("End Point",k)),S.o.setGroupProperty(PropertyInterface("Opacity",k)),C}function a(){function E(){return null}return E}function o(E,S,k){var C=propertyGroupFactory(L,k),P=propertyGroupFactory(O,C);function R(B){Object.defineProperty(O,E.d[B].nm,{get:ExpressionPropertyInterface(S.d.dataProps[B].p)})}var j,I=E.d?E.d.length:0,O={};for(j=0;j<I;j+=1)R(j),S.d.dataProps[j].p.setGroupProperty(P);function L(B){return B==="Color"||B==="color"?L.color:B==="Opacity"||B==="opacity"?L.opacity:B==="Stroke Width"||B==="stroke width"?L.strokeWidth:null}return Object.defineProperties(L,{color:{get:ExpressionPropertyInterface(S.c)},opacity:{get:ExpressionPropertyInterface(S.o)},strokeWidth:{get:ExpressionPropertyInterface(S.w)},dash:{get:function(){return O}},_name:{value:E.nm},mn:{value:E.mn}}),S.c.setGroupProperty(PropertyInterface("Color",C)),S.o.setGroupProperty(PropertyInterface("Opacity",C)),S.w.setGroupProperty(PropertyInterface("Stroke Width",C)),L}function l(E,S,k){function C(R){return R===E.e.ix||R==="End"||R==="end"?C.end:R===E.s.ix?C.start:R===E.o.ix?C.offset:null}var P=propertyGroupFactory(C,k);return C.propertyIndex=E.ix,S.s.setGroupProperty(PropertyInterface("Start",P)),S.e.setGroupProperty(PropertyInterface("End",P)),S.o.setGroupProperty(PropertyInterface("Offset",P)),C.propertyIndex=E.ix,C.propertyGroup=k,Object.defineProperties(C,{start:{get:ExpressionPropertyInterface(S.s)},end:{get:ExpressionPropertyInterface(S.e)},offset:{get:ExpressionPropertyInterface(S.o)},_name:{value:E.nm}}),C.mn=E.mn,C}function c(E,S,k){function C(R){return E.a.ix===R||R==="Anchor Point"?C.anchorPoint:E.o.ix===R||R==="Opacity"?C.opacity:E.p.ix===R||R==="Position"?C.position:E.r.ix===R||R==="Rotation"||R==="ADBE Vector Rotation"?C.rotation:E.s.ix===R||R==="Scale"?C.scale:E.sk&&E.sk.ix===R||R==="Skew"?C.skew:E.sa&&E.sa.ix===R||R==="Skew Axis"?C.skewAxis:null}var P=propertyGroupFactory(C,k);return S.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",P)),S.transform.mProps.p.setGroupProperty(PropertyInterface("Position",P)),S.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",P)),S.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",P)),S.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",P)),S.transform.mProps.sk&&(S.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",P)),S.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",P))),S.transform.op.setGroupProperty(PropertyInterface("Opacity",P)),Object.defineProperties(C,{opacity:{get:ExpressionPropertyInterface(S.transform.mProps.o)},position:{get:ExpressionPropertyInterface(S.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(S.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(S.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(S.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(S.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(S.transform.mProps.sa)},_name:{value:E.nm}}),C.ty="tr",C.mn=E.mn,C.propertyGroup=k,C}function d(E,S,k){function C(j){return E.p.ix===j?C.position:E.s.ix===j?C.size:null}var P=propertyGroupFactory(C,k);C.propertyIndex=E.ix;var R=S.sh.ty==="tm"?S.sh.prop:S.sh;return R.s.setGroupProperty(PropertyInterface("Size",P)),R.p.setGroupProperty(PropertyInterface("Position",P)),Object.defineProperties(C,{size:{get:ExpressionPropertyInterface(R.s)},position:{get:ExpressionPropertyInterface(R.p)},_name:{value:E.nm}}),C.mn=E.mn,C}function p(E,S,k){function C(j){return E.p.ix===j?C.position:E.r.ix===j?C.rotation:E.pt.ix===j?C.points:E.or.ix===j||j==="ADBE Vector Star Outer Radius"?C.outerRadius:E.os.ix===j?C.outerRoundness:E.ir&&(E.ir.ix===j||j==="ADBE Vector Star Inner Radius")?C.innerRadius:E.is&&E.is.ix===j?C.innerRoundness:null}var P=propertyGroupFactory(C,k),R=S.sh.ty==="tm"?S.sh.prop:S.sh;return C.propertyIndex=E.ix,R.or.setGroupProperty(PropertyInterface("Outer Radius",P)),R.os.setGroupProperty(PropertyInterface("Outer Roundness",P)),R.pt.setGroupProperty(PropertyInterface("Points",P)),R.p.setGroupProperty(PropertyInterface("Position",P)),R.r.setGroupProperty(PropertyInterface("Rotation",P)),E.ir&&(R.ir.setGroupProperty(PropertyInterface("Inner Radius",P)),R.is.setGroupProperty(PropertyInterface("Inner Roundness",P))),Object.defineProperties(C,{position:{get:ExpressionPropertyInterface(R.p)},rotation:{get:ExpressionPropertyInterface(R.r)},points:{get:ExpressionPropertyInterface(R.pt)},outerRadius:{get:ExpressionPropertyInterface(R.or)},outerRoundness:{get:ExpressionPropertyInterface(R.os)},innerRadius:{get:ExpressionPropertyInterface(R.ir)},innerRoundness:{get:ExpressionPropertyInterface(R.is)},_name:{value:E.nm}}),C.mn=E.mn,C}function g(E,S,k){function C(j){return E.p.ix===j?C.position:E.r.ix===j?C.roundness:E.s.ix===j||j==="Size"||j==="ADBE Vector Rect Size"?C.size:null}var P=propertyGroupFactory(C,k),R=S.sh.ty==="tm"?S.sh.prop:S.sh;return C.propertyIndex=E.ix,R.p.setGroupProperty(PropertyInterface("Position",P)),R.s.setGroupProperty(PropertyInterface("Size",P)),R.r.setGroupProperty(PropertyInterface("Rotation",P)),Object.defineProperties(C,{position:{get:ExpressionPropertyInterface(R.p)},roundness:{get:ExpressionPropertyInterface(R.r)},size:{get:ExpressionPropertyInterface(R.s)},_name:{value:E.nm}}),C.mn=E.mn,C}function y(E,S,k){function C(j){return E.r.ix===j||j==="Round Corners 1"?C.radius:null}var P=propertyGroupFactory(C,k),R=S;return C.propertyIndex=E.ix,R.rd.setGroupProperty(PropertyInterface("Radius",P)),Object.defineProperties(C,{radius:{get:ExpressionPropertyInterface(R.rd)},_name:{value:E.nm}}),C.mn=E.mn,C}function x(E,S,k){function C(j){return E.c.ix===j||j==="Copies"?C.copies:E.o.ix===j||j==="Offset"?C.offset:null}var P=propertyGroupFactory(C,k),R=S;return C.propertyIndex=E.ix,R.c.setGroupProperty(PropertyInterface("Copies",P)),R.o.setGroupProperty(PropertyInterface("Offset",P)),Object.defineProperties(C,{copies:{get:ExpressionPropertyInterface(R.c)},offset:{get:ExpressionPropertyInterface(R.o)},_name:{value:E.nm}}),C.mn=E.mn,C}return function(E,S,k){var C;function P(j){if(typeof j=="number")return j=j===void 0?1:j,j===0?k:C[j-1];for(var I=0,O=C.length;I<O;){if(C[I]._name===j)return C[I];I+=1}return null}function R(){return k}return P.propertyGroup=propertyGroupFactory(P,R),C=t(E,S,P.propertyGroup),P.numProperties=C.length,P._name="Contents",P}}(),TextExpressionInterface=function(){return function(t){var e;function r(n){switch(n){case"ADBE Text Document":return r.sourceText;default:return null}}return Object.defineProperty(r,"sourceText",{get:function(){t.textProperty.getValue();var s=t.textProperty.currentData.t;return(!e||s!==e.value)&&(e=new String(s),e.value=s||new String(s),Object.defineProperty(e,"style",{get:function(){return{fillColor:t.textProperty.currentData.fc}}})),e}}),r}}();function _typeof(t){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(t)}var FootageInterface=function(){var t=function(n){var s="",a=n.getFootageData();function o(){return s="",a=n.getFootageData(),l}function l(c){if(a[c])return s=c,a=a[c],_typeof(a)==="object"?l:a;var d=c.indexOf(s);if(d!==-1){var p=parseInt(c.substr(d+s.length),10);return a=a[p],_typeof(a)==="object"?l:a}return""}return o},e=function(n){function s(a){return a==="Outline"?s.outlineInterface():null}return s._name="Outline",s.outlineInterface=t(n),s};return function(r){function n(s){return s==="Data"?n.dataInterface:null}return n._name="Data",n.dataInterface=e(r),n}}(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(t){return interfaces[t]||null}var expressionHelpers=function(){function t(o,l,c){l.x&&(c.k=!0,c.x=!0,c.initiateExpression=ExpressionManager.initiateExpression,c.effectsSequence.push(c.initiateExpression(o,l,c).bind(c)))}function e(o){return o*=this.elem.globalData.frameRate,o-=this.offsetTime,o!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<o?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(o,this._cachingAtTime),this._cachingAtTime.lastFrame=o),this._cachingAtTime.value}function r(o){var l=-.01,c=this.getValueAtTime(o),d=this.getValueAtTime(o+l),p=0;if(c.length){var g;for(g=0;g<c.length;g+=1)p+=Math.pow(d[g]-c[g],2);p=Math.sqrt(p)*100}else p=0;return p}function n(o){if(this.vel!==void 0)return this.vel;var l=-.001,c=this.getValueAtTime(o),d=this.getValueAtTime(o+l),p;if(c.length){p=createTypedArray("float32",c.length);var g;for(g=0;g<c.length;g+=1)p[g]=(d[g]-c[g])/l}else p=(d-c)/l;return p}function s(){return this.pv}function a(o){this.propertyGroup=o}return{searchExpressions:t,getSpeedAtTime:r,getVelocityAtTime:n,getValueAtTime:e,getStaticValueAtTime:s,setGroupProperty:a}}();function addPropertyDecorator(){function t(y,x,E){if(!this.k||!this.keyframes)return this.pv;y=y?y.toLowerCase():"";var S=this.comp.renderedFrame,k=this.keyframes,C=k[k.length-1].t;if(S<=C)return this.pv;var P,R;E?(x?P=Math.abs(C-this.elem.comp.globalData.frameRate*x):P=Math.max(0,C-this.elem.data.ip),R=C-P):((!x||x>k.length-1)&&(x=k.length-1),R=k[k.length-1-x].t,P=C-R);var j,I,O;if(y==="pingpong"){var L=Math.floor((S-R)/P);if(L%2!==0)return this.getValueAtTime((P-(S-R)%P+R)/this.comp.globalData.frameRate,0)}else if(y==="offset"){var B=this.getValueAtTime(R/this.comp.globalData.frameRate,0),Z=this.getValueAtTime(C/this.comp.globalData.frameRate,0),te=this.getValueAtTime(((S-R)%P+R)/this.comp.globalData.frameRate,0),ie=Math.floor((S-R)/P);if(this.pv.length){for(O=new Array(B.length),I=O.length,j=0;j<I;j+=1)O[j]=(Z[j]-B[j])*ie+te[j];return O}return(Z-B)*ie+te}else if(y==="continue"){var Q=this.getValueAtTime(C/this.comp.globalData.frameRate,0),fe=this.getValueAtTime((C-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(O=new Array(Q.length),I=O.length,j=0;j<I;j+=1)O[j]=Q[j]+(Q[j]-fe[j])*((S-C)/this.comp.globalData.frameRate)/5e-4;return O}return Q+(Q-fe)*((S-C)/.001)}return this.getValueAtTime(((S-R)%P+R)/this.comp.globalData.frameRate,0)}function e(y,x,E){if(!this.k)return this.pv;y=y?y.toLowerCase():"";var S=this.comp.renderedFrame,k=this.keyframes,C=k[0].t;if(S>=C)return this.pv;var P,R;E?(x?P=Math.abs(this.elem.comp.globalData.frameRate*x):P=Math.max(0,this.elem.data.op-C),R=C+P):((!x||x>k.length-1)&&(x=k.length-1),R=k[x].t,P=R-C);var j,I,O;if(y==="pingpong"){var L=Math.floor((C-S)/P);if(L%2===0)return this.getValueAtTime(((C-S)%P+C)/this.comp.globalData.frameRate,0)}else if(y==="offset"){var B=this.getValueAtTime(C/this.comp.globalData.frameRate,0),Z=this.getValueAtTime(R/this.comp.globalData.frameRate,0),te=this.getValueAtTime((P-(C-S)%P+C)/this.comp.globalData.frameRate,0),ie=Math.floor((C-S)/P)+1;if(this.pv.length){for(O=new Array(B.length),I=O.length,j=0;j<I;j+=1)O[j]=te[j]-(Z[j]-B[j])*ie;return O}return te-(Z-B)*ie}else if(y==="continue"){var Q=this.getValueAtTime(C/this.comp.globalData.frameRate,0),fe=this.getValueAtTime((C+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(O=new Array(Q.length),I=O.length,j=0;j<I;j+=1)O[j]=Q[j]+(Q[j]-fe[j])*(C-S)/.001;return O}return Q+(Q-fe)*(C-S)/.001}return this.getValueAtTime((P-((C-S)%P+C))/this.comp.globalData.frameRate,0)}function r(y,x){if(!this.k)return this.pv;if(y=(y||.4)*.5,x=Math.floor(x||5),x<=1)return this.pv;var E=this.comp.renderedFrame/this.comp.globalData.frameRate,S=E-y,k=E+y,C=x>1?(k-S)/(x-1):1,P=0,R=0,j;this.pv.length?j=createTypedArray("float32",this.pv.length):j=0;for(var I;P<x;){if(I=this.getValueAtTime(S+P*C),this.pv.length)for(R=0;R<this.pv.length;R+=1)j[R]+=I[R];else j+=I;P+=1}if(this.pv.length)for(R=0;R<this.pv.length;R+=1)j[R]/=x;else j/=x;return j}function n(y){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var x=this._transformCachingAtTime.v;if(x.cloneFromProps(this.pre.props),this.appliedTransformations<1){var E=this.a.getValueAtTime(y);x.translate(-E[0]*this.a.mult,-E[1]*this.a.mult,E[2]*this.a.mult)}if(this.appliedTransformations<2){var S=this.s.getValueAtTime(y);x.scale(S[0]*this.s.mult,S[1]*this.s.mult,S[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var k=this.sk.getValueAtTime(y),C=this.sa.getValueAtTime(y);x.skewFromAxis(-k*this.sk.mult,C*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var P=this.r.getValueAtTime(y);x.rotate(-P*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var R=this.rz.getValueAtTime(y),j=this.ry.getValueAtTime(y),I=this.rx.getValueAtTime(y),O=this.or.getValueAtTime(y);x.rotateZ(-R*this.rz.mult).rotateY(j*this.ry.mult).rotateX(I*this.rx.mult).rotateZ(-O[2]*this.or.mult).rotateY(O[1]*this.or.mult).rotateX(O[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var L=this.px.getValueAtTime(y),B=this.py.getValueAtTime(y);if(this.data.p.z){var Z=this.pz.getValueAtTime(y);x.translate(L*this.px.mult,B*this.py.mult,-Z*this.pz.mult)}else x.translate(L*this.px.mult,B*this.py.mult,0)}else{var te=this.p.getValueAtTime(y);x.translate(te[0]*this.p.mult,te[1]*this.p.mult,-te[2]*this.p.mult)}return x}function s(){return this.v.clone(new Matrix)}var a=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(y,x,E){var S=a(y,x,E);return S.dynamicProperties.length?S.getValueAtTime=n.bind(S):S.getValueAtTime=s.bind(S),S.setGroupProperty=expressionHelpers.setGroupProperty,S};var o=PropertyFactory.getProp;PropertyFactory.getProp=function(y,x,E,S,k){var C=o(y,x,E,S,k);C.kf?C.getValueAtTime=expressionHelpers.getValueAtTime.bind(C):C.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(C),C.setGroupProperty=expressionHelpers.setGroupProperty,C.loopOut=t,C.loopIn=e,C.smooth=r,C.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(C),C.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(C),C.numKeys=x.a===1?x.k.length:0,C.propertyIndex=x.ix;var P=0;return E!==0&&(P=createTypedArray("float32",x.a===1?x.k[0].s.length:x.k.length)),C._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:P},expressionHelpers.searchExpressions(y,x,C),C.k&&k.addDynamicProperty(C),C};function l(y){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),y*=this.elem.globalData.frameRate,y-=this.offsetTime,y!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<y?this._caching.lastIndex:0,this._cachingAtTime.lastTime=y,this.interpolateShape(y,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue}var c=ShapePropertyFactory.getConstructorFunction(),d=ShapePropertyFactory.getKeyframedConstructorFunction();function p(){}p.prototype={vertices:function(x,E){this.k&&this.getValue();var S=this.v;E!==void 0&&(S=this.getValueAtTime(E,0));var k,C=S._length,P=S[x],R=S.v,j=createSizedArray(C);for(k=0;k<C;k+=1)x==="i"||x==="o"?j[k]=[P[k][0]-R[k][0],P[k][1]-R[k][1]]:j[k]=[P[k][0],P[k][1]];return j},points:function(x){return this.vertices("v",x)},inTangents:function(x){return this.vertices("i",x)},outTangents:function(x){return this.vertices("o",x)},isClosed:function(){return this.v.c},pointOnPath:function(x,E){var S=this.v;E!==void 0&&(S=this.getValueAtTime(E,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(S));for(var k=this._segmentsLength,C=k.lengths,P=k.totalLength*x,R=0,j=C.length,I=0,O;R<j;){if(I+C[R].addedLength>P){var L=R,B=S.c&&R===j-1?0:R+1,Z=(P-I)/C[R].addedLength;O=bez.getPointInSegment(S.v[L],S.v[B],S.o[L],S.i[B],Z,C[R]);break}else I+=C[R].addedLength;R+=1}return O||(O=S.c?[S.v[0][0],S.v[0][1]]:[S.v[S._length-1][0],S.v[S._length-1][1]]),O},vectorOnPath:function(x,E,S){x==1?x=this.v.c:x==0&&(x=.999);var k=this.pointOnPath(x,E),C=this.pointOnPath(x+.001,E),P=C[0]-k[0],R=C[1]-k[1],j=Math.sqrt(Math.pow(P,2)+Math.pow(R,2));if(j===0)return[0,0];var I=S==="tangent"?[P/j,R/j]:[-R/j,P/j];return I},tangentOnPath:function(x,E){return this.vectorOnPath(x,E,"tangent")},normalOnPath:function(x,E){return this.vectorOnPath(x,E,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([p],c),extendPrototype([p],d),d.prototype.getValueAtTime=l,d.prototype.initiateExpression=ExpressionManager.initiateExpression;var g=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(y,x,E,S,k){var C=g(y,x,E,S,k);return C.propertyIndex=x.ix,C.lock=!1,E===3?expressionHelpers.searchExpressions(y,x.pt,C):E===4&&expressionHelpers.searchExpressions(y,x.ks,C),C.k&&y.addDynamicProperty(C),C}}function initialize$1(){addPropertyDecorator()}function addDecorator(){function t(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}TextProperty.prototype.getExpressionValue=function(e,r){var n=this.calculateExpression(r);if(e.t!==n){var s={};return this.copyData(s,e),s.t=n.toString(),s.__complete=!1,s}return e},TextProperty.prototype.searchProperty=function(){var e=this.searchKeyframes(),r=this.searchExpressions();return this.kf=e||r,this.kf},TextProperty.prototype.searchExpressions=t}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function t(e,r){var n=createNS("feMerge");n.setAttribute("result",e);var s,a;for(a=0;a<r.length;a+=1)s=createNS("feMergeNode"),s.setAttribute("in",r[a]),n.appendChild(s),n.appendChild(s);return n}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(t,e,r,n,s){this.filterManager=e;var a=createNS("feColorMatrix");a.setAttribute("type","matrix"),a.setAttribute("color-interpolation-filters","linearRGB"),a.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=a,a.setAttribute("result",n+"_tint_1"),t.appendChild(a),a=createNS("feColorMatrix"),a.setAttribute("type","matrix"),a.setAttribute("color-interpolation-filters","sRGB"),a.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),a.setAttribute("result",n+"_tint_2"),t.appendChild(a),this.matrixFilter=a;var o=this.createMergeNode(n,[s,n+"_tint_1",n+"_tint_2"]);t.appendChild(o)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[0].p.v,r=this.filterManager.effectElements[1].p.v,n=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+n+" 0"),this.matrixFilter.setAttribute("values",r[0]-e[0]+" 0 0 0 "+e[0]+" "+(r[1]-e[1])+" 0 0 0 "+e[1]+" "+(r[2]-e[2])+" 0 0 0 "+e[2]+" 0 0 0 1 0")}};function SVGFillFilter(t,e,r,n){this.filterManager=e;var s=createNS("feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),s.setAttribute("result",n),t.appendChild(s),this.matrixFilter=s}SVGFillFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[2].p.v,r=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+e[0]+" 0 0 0 0 "+e[1]+" 0 0 0 0 "+e[2]+" 0 0 0 "+r+" 0")}};function SVGStrokeEffect(t,e,r){this.initialized=!1,this.filterManager=e,this.elem=r,this.paths=[]}SVGStrokeEffect.prototype.initialize=function(){var t=this.elem.layerElement.children||this.elem.layerElement.childNodes,e,r,n,s;for(this.filterManager.effectElements[1].p.v===1?(s=this.elem.maskManager.masksProperties.length,n=0):(n=this.filterManager.effectElements[0].p.v-1,s=n+1),r=createNS("g"),r.setAttribute("fill","none"),r.setAttribute("stroke-linecap","round"),r.setAttribute("stroke-dashoffset",1),n;n<s;n+=1)e=createNS("path"),r.appendChild(e),this.paths.push({p:e,m:n});if(this.filterManager.effectElements[10].p.v===3){var a=createNS("mask"),o=createElementID();a.setAttribute("id",o),a.setAttribute("mask-type","alpha"),a.appendChild(r),this.elem.globalData.defs.appendChild(a);var l=createNS("g");for(l.setAttribute("mask","url("+getLocationHref()+"#"+o+")");t[0];)l.appendChild(t[0]);this.elem.layerElement.appendChild(l),this.masker=a,r.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(t=this.elem.layerElement.children||this.elem.layerElement.childNodes;t.length;)this.elem.layerElement.removeChild(t[0]);this.elem.layerElement.appendChild(r),this.elem.layerElement.removeAttribute("mask"),r.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=r},SVGStrokeEffect.prototype.renderFrame=function(t){this.initialized||this.initialize();var e,r=this.paths.length,n,s;for(e=0;e<r;e+=1)if(this.paths[e].m!==-1&&(n=this.elem.maskManager.viewData[this.paths[e].m],s=this.paths[e].p,(t||this.filterManager._mdf||n.prop._mdf)&&s.setAttribute("d",n.lastPath),t||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||n.prop._mdf)){var a;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var o=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,l=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,c=s.getTotalLength();a="0 0 0 "+c*o+" ";var d=c*(l-o),p=1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01,g=Math.floor(d/p),y;for(y=0;y<g;y+=1)a+="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01+" ";a+="0 "+c*10+" 0 0"}else a="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01;s.setAttribute("stroke-dasharray",a)}if((t||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",this.filterManager.effectElements[4].p.v*2),(t||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(t||this.filterManager.effectElements[3].p._mdf)){var x=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(x[0]*255)+","+bmFloor(x[1]*255)+","+bmFloor(x[2]*255)+")")}};function SVGTritoneFilter(t,e,r,n){this.filterManager=e;var s=createNS("feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("color-interpolation-filters","linearRGB"),s.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),t.appendChild(s);var a=createNS("feComponentTransfer");a.setAttribute("color-interpolation-filters","sRGB"),a.setAttribute("result",n),this.matrixFilter=a;var o=createNS("feFuncR");o.setAttribute("type","table"),a.appendChild(o),this.feFuncR=o;var l=createNS("feFuncG");l.setAttribute("type","table"),a.appendChild(l),this.feFuncG=l;var c=createNS("feFuncB");c.setAttribute("type","table"),a.appendChild(c),this.feFuncB=c,t.appendChild(a)}SVGTritoneFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[0].p.v,r=this.filterManager.effectElements[1].p.v,n=this.filterManager.effectElements[2].p.v,s=n[0]+" "+r[0]+" "+e[0],a=n[1]+" "+r[1]+" "+e[1],o=n[2]+" "+r[2]+" "+e[2];this.feFuncR.setAttribute("tableValues",s),this.feFuncG.setAttribute("tableValues",a),this.feFuncB.setAttribute("tableValues",o)}};function SVGProLevelsFilter(t,e,r,n){this.filterManager=e;var s=this.filterManager.effectElements,a=createNS("feComponentTransfer");(s[10].p.k||s[10].p.v!==0||s[11].p.k||s[11].p.v!==1||s[12].p.k||s[12].p.v!==1||s[13].p.k||s[13].p.v!==0||s[14].p.k||s[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",a)),(s[17].p.k||s[17].p.v!==0||s[18].p.k||s[18].p.v!==1||s[19].p.k||s[19].p.v!==1||s[20].p.k||s[20].p.v!==0||s[21].p.k||s[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",a)),(s[24].p.k||s[24].p.v!==0||s[25].p.k||s[25].p.v!==1||s[26].p.k||s[26].p.v!==1||s[27].p.k||s[27].p.v!==0||s[28].p.k||s[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",a)),(s[31].p.k||s[31].p.v!==0||s[32].p.k||s[32].p.v!==1||s[33].p.k||s[33].p.v!==1||s[34].p.k||s[34].p.v!==0||s[35].p.k||s[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",a)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(a.setAttribute("color-interpolation-filters","sRGB"),t.appendChild(a)),(s[3].p.k||s[3].p.v!==0||s[4].p.k||s[4].p.v!==1||s[5].p.k||s[5].p.v!==1||s[6].p.k||s[6].p.v!==0||s[7].p.k||s[7].p.v!==1)&&(a=createNS("feComponentTransfer"),a.setAttribute("color-interpolation-filters","sRGB"),a.setAttribute("result",n),t.appendChild(a),this.feFuncRComposed=this.createFeFunc("feFuncR",a),this.feFuncGComposed=this.createFeFunc("feFuncG",a),this.feFuncBComposed=this.createFeFunc("feFuncB",a))}SVGProLevelsFilter.prototype.createFeFunc=function(t,e){var r=createNS(t);return r.setAttribute("type","table"),e.appendChild(r),r},SVGProLevelsFilter.prototype.getTableValue=function(t,e,r,n,s){for(var a=0,o=256,l,c=Math.min(t,e),d=Math.max(t,e),p=Array.call(null,{length:o}),g,y=0,x=s-n,E=e-t;a<=256;)l=a/256,l<=c?g=E<0?s:n:l>=d?g=E<0?n:s:g=n+x*Math.pow((l-t)/E,1/r),p[y]=g,y+=1,a+=256/(o-1);return p.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e,r=this.filterManager.effectElements;this.feFuncRComposed&&(t||r[3].p._mdf||r[4].p._mdf||r[5].p._mdf||r[6].p._mdf||r[7].p._mdf)&&(e=this.getTableValue(r[3].p.v,r[4].p.v,r[5].p.v,r[6].p.v,r[7].p.v),this.feFuncRComposed.setAttribute("tableValues",e),this.feFuncGComposed.setAttribute("tableValues",e),this.feFuncBComposed.setAttribute("tableValues",e)),this.feFuncR&&(t||r[10].p._mdf||r[11].p._mdf||r[12].p._mdf||r[13].p._mdf||r[14].p._mdf)&&(e=this.getTableValue(r[10].p.v,r[11].p.v,r[12].p.v,r[13].p.v,r[14].p.v),this.feFuncR.setAttribute("tableValues",e)),this.feFuncG&&(t||r[17].p._mdf||r[18].p._mdf||r[19].p._mdf||r[20].p._mdf||r[21].p._mdf)&&(e=this.getTableValue(r[17].p.v,r[18].p.v,r[19].p.v,r[20].p.v,r[21].p.v),this.feFuncG.setAttribute("tableValues",e)),this.feFuncB&&(t||r[24].p._mdf||r[25].p._mdf||r[26].p._mdf||r[27].p._mdf||r[28].p._mdf)&&(e=this.getTableValue(r[24].p.v,r[25].p.v,r[26].p.v,r[27].p.v,r[28].p.v),this.feFuncB.setAttribute("tableValues",e)),this.feFuncA&&(t||r[31].p._mdf||r[32].p._mdf||r[33].p._mdf||r[34].p._mdf||r[35].p._mdf)&&(e=this.getTableValue(r[31].p.v,r[32].p.v,r[33].p.v,r[34].p.v,r[35].p.v),this.feFuncA.setAttribute("tableValues",e))}};function SVGDropShadowEffect(t,e,r,n,s){var a=e.container.globalData.renderConfig.filterSize,o=e.data.fs||a;t.setAttribute("x",o.x||a.x),t.setAttribute("y",o.y||a.y),t.setAttribute("width",o.width||a.width),t.setAttribute("height",o.height||a.height),this.filterManager=e;var l=createNS("feGaussianBlur");l.setAttribute("in","SourceAlpha"),l.setAttribute("result",n+"_drop_shadow_1"),l.setAttribute("stdDeviation","0"),this.feGaussianBlur=l,t.appendChild(l);var c=createNS("feOffset");c.setAttribute("dx","25"),c.setAttribute("dy","0"),c.setAttribute("in",n+"_drop_shadow_1"),c.setAttribute("result",n+"_drop_shadow_2"),this.feOffset=c,t.appendChild(c);var d=createNS("feFlood");d.setAttribute("flood-color","#00ff00"),d.setAttribute("flood-opacity","1"),d.setAttribute("result",n+"_drop_shadow_3"),this.feFlood=d,t.appendChild(d);var p=createNS("feComposite");p.setAttribute("in",n+"_drop_shadow_3"),p.setAttribute("in2",n+"_drop_shadow_2"),p.setAttribute("operator","in"),p.setAttribute("result",n+"_drop_shadow_4"),t.appendChild(p);var g=this.createMergeNode(n,[n+"_drop_shadow_4",s]);t.appendChild(g)}extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){if((t||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),t||this.filterManager.effectElements[0].p._mdf){var e=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(e[0]*255),Math.round(e[1]*255),Math.round(e[2]*255)))}if((t||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),t||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var r=this.filterManager.effectElements[3].p.v,n=(this.filterManager.effectElements[2].p.v-90)*degToRads,s=r*Math.cos(n),a=r*Math.sin(n);this.feOffset.setAttribute("dx",s),this.feOffset.setAttribute("dy",a)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(t,e,r){this.initialized=!1,this.filterManager=e,this.filterElem=t,this.elem=r,r.matteElement=createNS("g"),r.matteElement.appendChild(r.layerElement),r.matteElement.appendChild(r.transformedElement),r.baseElement=r.matteElement}SVGMatte3Effect.prototype.findSymbol=function(t){for(var e=0,r=_svgMatteSymbols.length;e<r;){if(_svgMatteSymbols[e]===t)return _svgMatteSymbols[e];e+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(t,e){var r=t.layerElement.parentNode;if(r){for(var n=r.children,s=0,a=n.length;s<a&&n[s]!==t.layerElement;)s+=1;var o;s<=a-2&&(o=n[s+1]);var l=createNS("use");l.setAttribute("href","#"+e),o?r.insertBefore(l,o):r.appendChild(l)}},SVGMatte3Effect.prototype.setElementAsMask=function(t,e){if(!this.findSymbol(e)){var r=createElementID(),n=createNS("mask");n.setAttribute("id",e.layerId),n.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(e);var s=t.globalData.defs;s.appendChild(n);var a=createNS("symbol");a.setAttribute("id",r),this.replaceInParent(e,r),a.appendChild(e.layerElement),s.appendChild(a);var o=createNS("use");o.setAttribute("href","#"+r),n.appendChild(o),e.data.hd=!1,e.show()}t.setMatte(e.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var t=this.filterManager.effectElements[0].p.v,e=this.elem.comp.elements,r=0,n=e.length;r<n;)e[r]&&e[r].data.ind===t&&this.setElementAsMask(this.elem,e[r]),r+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()};function SVGGaussianBlurEffect(t,e,r,n){t.setAttribute("x","-100%"),t.setAttribute("y","-100%"),t.setAttribute("width","300%"),t.setAttribute("height","300%"),this.filterManager=e;var s=createNS("feGaussianBlur");s.setAttribute("result",n),t.appendChild(s),this.feGaussianBlur=s}SVGGaussianBlurEffect.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=.3,r=this.filterManager.effectElements[0].p.v*e,n=this.filterManager.effectElements[1].p.v,s=n==3?0:r,a=n==2?0:r;this.feGaussianBlur.setAttribute("stdDeviation",s+" "+a);var o=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",o)}};function TransformEffect(){}TransformEffect.prototype.init=function(t){this.effectsManager=t,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(t){if(this._opMdf=!1,this._mdf=!1,t||this.effectsManager._mdf){var e=this.effectsManager.effectElements,r=e[0].p.v,n=e[1].p.v,s=e[2].p.v===1,a=e[3].p.v,o=s?a:e[4].p.v,l=e[5].p.v,c=e[6].p.v,d=e[7].p.v;this.matrix.reset(),this.matrix.translate(-r[0],-r[1],r[2]),this.matrix.scale(o*.01,a*.01,1),this.matrix.rotate(-d*degToRads),this.matrix.skewFromAxis(-l*degToRads,(c+90)*degToRads),this.matrix.translate(n[0],n[1],0),this._mdf=!0,this.opacity!==e[8].p.v&&(this.opacity=e[8].p.v,this._opMdf=!0)}};function SVGTransformEffect(t,e){this.init(e)}extendPrototype([TransformEffect],SVGTransformEffect);function CVTransformEffect(t){this.init(t)}return extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie})}(lottie$2,lottie$2.exports)),lottie$2.exports}var lottieExports=requireLottie();const lottie=getDefaultExportFromCjs(lottieExports);function _arrayLikeToArray(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _defineProperty(t,e,r){return(e=_toPropertyKey(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _iterableToArrayLimit(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,a,o,l=[],c=!0,d=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(p){d=!0,s=p}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ownKeys(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function _objectSpread2(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ownKeys(Object(r),!0).forEach(function(n){_defineProperty(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function _objectWithoutProperties(t,e){if(t==null)return{};var r,n,s=_objectWithoutPropertiesLoose(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.includes(r)||{}.propertyIsEnumerable.call(t,r)&&(s[r]=t[r])}return s}function _objectWithoutPropertiesLoose(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.includes(n))continue;r[n]=t[n]}return r}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _toPrimitive(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return typeof e=="symbol"?e:e+""}function _unsupportedIterableToArray(t,e){if(t){if(typeof t=="string")return _arrayLikeToArray(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}var _excluded$1=["animationData","loop","autoplay","initialSegment","onComplete","onLoopComplete","onEnterFrame","onSegmentStart","onConfigReady","onDataReady","onDataFailed","onLoadedImages","onDOMLoaded","onDestroy","lottieRef","renderer","name","assetsPath","rendererSettings"],useLottie=function t(e,r){var n=e.animationData,s=e.loop,a=e.autoplay,o=e.initialSegment,l=e.onComplete,c=e.onLoopComplete,d=e.onEnterFrame,p=e.onSegmentStart,g=e.onConfigReady,y=e.onDataReady,x=e.onDataFailed,E=e.onLoadedImages,S=e.onDOMLoaded,k=e.onDestroy;e.lottieRef,e.renderer,e.name,e.assetsPath,e.rendererSettings;var C=_objectWithoutProperties(e,_excluded$1),P=reactExports.useState(!1),R=_slicedToArray(P,2),j=R[0],I=R[1],O=reactExports.useRef(),L=reactExports.useRef(null),B=function(){var ne;(ne=O.current)===null||ne===void 0||ne.play()},Z=function(){var ne;(ne=O.current)===null||ne===void 0||ne.stop()},te=function(){var ne;(ne=O.current)===null||ne===void 0||ne.pause()},ie=function(ne){var pe;(pe=O.current)===null||pe===void 0||pe.setSpeed(ne)},Q=function(ne,pe){var xe;(xe=O.current)===null||xe===void 0||xe.goToAndPlay(ne,pe)},fe=function(ne,pe){var xe;(xe=O.current)===null||xe===void 0||xe.goToAndStop(ne,pe)},se=function(ne){var pe;(pe=O.current)===null||pe===void 0||pe.setDirection(ne)},Y=function(ne,pe){var xe;(xe=O.current)===null||xe===void 0||xe.playSegments(ne,pe)},G=function(ne){var pe;(pe=O.current)===null||pe===void 0||pe.setSubframe(ne)},q=function(ne){var pe;return(pe=O.current)===null||pe===void 0?void 0:pe.getDuration(ne)},N=function(){var ne;(ne=O.current)===null||ne===void 0||ne.destroy(),O.current=void 0},$=function(){var ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},pe;if(L.current){(pe=O.current)===null||pe===void 0||pe.destroy();var xe=_objectSpread2(_objectSpread2(_objectSpread2({},e),ne),{},{container:L.current});return O.current=lottie.loadAnimation(xe),I(!!O.current),function(){var Ce;(Ce=O.current)===null||Ce===void 0||Ce.destroy(),O.current=void 0}}};reactExports.useEffect(function(){var z=$();return function(){return z==null?void 0:z()}},[n,s]),reactExports.useEffect(function(){O.current&&(O.current.autoplay=!!a)},[a]),reactExports.useEffect(function(){if(O.current){if(!o){O.current.resetSegments(!0);return}!Array.isArray(o)||!o.length||((O.current.currentRawFrame<o[0]||O.current.currentRawFrame>o[1])&&(O.current.currentRawFrame=o[0]),O.current.setSegment(o[0],o[1]))}},[o]),reactExports.useEffect(function(){var z=[{name:"complete",handler:l},{name:"loopComplete",handler:c},{name:"enterFrame",handler:d},{name:"segmentStart",handler:p},{name:"config_ready",handler:g},{name:"data_ready",handler:y},{name:"data_failed",handler:x},{name:"loaded_images",handler:E},{name:"DOMLoaded",handler:S},{name:"destroy",handler:k}],ne=z.filter(function(xe){return xe.handler!=null});if(ne.length){var pe=ne.map(function(xe){var Ce;return(Ce=O.current)===null||Ce===void 0||Ce.addEventListener(xe.name,xe.handler),function(){var ce;(ce=O.current)===null||ce===void 0||ce.removeEventListener(xe.name,xe.handler)}});return function(){pe.forEach(function(xe){return xe()})}}},[l,c,d,p,g,y,x,E,S,k]);var V=React.createElement("div",_objectSpread2({style:r,ref:L},C));return{View:V,play:B,stop:Z,pause:te,setSpeed:ie,goToAndStop:fe,goToAndPlay:Q,setDirection:se,playSegments:Y,setSubframe:G,getDuration:q,destroy:N,animationContainerRef:L,animationLoaded:j,animationItem:O.current}};function getContainerVisibility(t){var e=t.getBoundingClientRect(),r=e.top,n=e.height,s=window.innerHeight-r,a=window.innerHeight+n;return s/a}function getContainerCursorPosition(t,e,r){var n=t.getBoundingClientRect(),s=n.top,a=n.left,o=n.width,l=n.height,c=(e-a)/o,d=(r-s)/l;return{x:c,y:d}}var useInitInteractivity=function t(e){var r=e.wrapperRef,n=e.animationItem,s=e.mode,a=e.actions;reactExports.useEffect(function(){var o=r.current;if(!(!o||!n||!a.length)){n.stop();var l=function(){var p=null,g=function(){var x=getContainerVisibility(o),E=a.find(function(k){var C=k.visibility;return C&&x>=C[0]&&x<=C[1]});if(E){if(E.type==="seek"&&E.visibility&&E.frames.length===2){var S=E.frames[0]+Math.ceil((x-E.visibility[0])/(E.visibility[1]-E.visibility[0])*E.frames[1]);//! goToAndStop must be relative to the start of the current segment
n.goToAndStop(S-n.firstFrame-1,!0)}E.type==="loop"&&(p===null||p!==E.frames||n.isPaused)&&(n.playSegments(E.frames,!0),p=E.frames),E.type==="play"&&n.isPaused&&(n.resetSegments(!0),n.play()),E.type==="stop"&&n.goToAndStop(E.frames[0]-n.firstFrame-1,!0)}};return document.addEventListener("scroll",g),function(){document.removeEventListener("scroll",g)}},c=function(){var p=function(E,S){var k=E,C=S;if(k!==-1&&C!==-1){var P=getContainerCursorPosition(o,k,C);k=P.x,C=P.y}var R=a.find(function(O){var L=O.position;return L&&Array.isArray(L.x)&&Array.isArray(L.y)?k>=L.x[0]&&k<=L.x[1]&&C>=L.y[0]&&C<=L.y[1]:L&&!Number.isNaN(L.x)&&!Number.isNaN(L.y)?k===L.x&&C===L.y:!1});if(R){if(R.type==="seek"&&R.position&&Array.isArray(R.position.x)&&Array.isArray(R.position.y)&&R.frames.length===2){var j=(k-R.position.x[0])/(R.position.x[1]-R.position.x[0]),I=(C-R.position.y[0])/(R.position.y[1]-R.position.y[0]);n.playSegments(R.frames,!0),n.goToAndStop(Math.ceil((j+I)/2*(R.frames[1]-R.frames[0])),!0)}R.type==="loop"&&n.playSegments(R.frames,!0),R.type==="play"&&(n.isPaused&&n.resetSegments(!1),n.playSegments(R.frames)),R.type==="stop"&&n.goToAndStop(R.frames[0],!0)}},g=function(E){p(E.clientX,E.clientY)},y=function(){p(-1,-1)};return o.addEventListener("mousemove",g),o.addEventListener("mouseout",y),function(){o.removeEventListener("mousemove",g),o.removeEventListener("mouseout",y)}};switch(s){case"scroll":return l();case"cursor":return c()}}},[s,n])},useLottieInteractivity=function t(e){var r=e.actions,n=e.mode,s=e.lottieObj,a=s.animationItem,o=s.View,l=s.animationContainerRef;return useInitInteractivity({actions:r,animationItem:a,mode:n,wrapperRef:l}),o},_excluded=["style","interactivity"],Lottie=function t(e){var r,n,s,a=e.style,o=e.interactivity,l=_objectWithoutProperties(e,_excluded),c=useLottie(l,a),d=c.View,p=c.play,g=c.stop,y=c.pause,x=c.setSpeed,E=c.goToAndStop,S=c.goToAndPlay,k=c.setDirection,C=c.playSegments,P=c.setSubframe,R=c.getDuration,j=c.destroy,I=c.animationContainerRef,O=c.animationLoaded,L=c.animationItem;return reactExports.useEffect(function(){e.lottieRef&&(e.lottieRef.current={play:p,stop:g,pause:y,setSpeed:x,goToAndPlay:S,goToAndStop:E,setDirection:k,playSegments:C,setSubframe:P,getDuration:R,destroy:j,animationContainerRef:I,animationLoaded:O,animationItem:L})},[(r=e.lottieRef)===null||r===void 0?void 0:r.current]),useLottieInteractivity({lottieObj:{View:d,play:p,stop:g,pause:y,setSpeed:x,goToAndStop:E,goToAndPlay:S,setDirection:k,playSegments:C,setSubframe:P,getDuration:R,destroy:j,animationContainerRef:I,animationLoaded:O,animationItem:L},actions:(n=o==null?void 0:o.actions)!==null&&n!==void 0?n:[],mode:(s=o==null?void 0:o.mode)!==null&&s!==void 0?s:"scroll"})};const v$1="4.8.0",meta={g:"LottieFiles AE 1.0.0",a:"",k:"",d:"",tc:"#FFFFFF"},fr$1=30,ip$1=0,op$1=150,w$1=500,h$1=500,nm$1="Sloth Full",ddd$1=0,assets$1=JSON.parse('[{"id":"comp_0","layers":[{"ddd":0,"ind":1,"ty":3,"nm":"Full sloth controller ","sr":1,"ks":{"o":{"a":0,"k":0,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":30,"s":[2000,2388,0],"to":[0,-85.5,0],"ti":[0,64.667,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":60.5,"s":[2000,1875,0],"to":[0,-64.667,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.167,"y":0},"t":91,"s":[2000,2000,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":120,"s":[2000,1875,0],"to":[0,0,0],"ti":[0,-20.833,0]},{"t":149,"s":[2000,2000,0]}],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"ip":0,"op":150,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"R Eye 2","parent":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":30,"s":[-324,-500,0],"to":[0,-2.667,0],"ti":[0,2.667,0]},{"t":31,"s":[-324,-516,0]}],"ix":2},"a":{"a":0,"k":[352,-482,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":0,"s":[100,100,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":4,"s":[100,10,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":8,"s":[100,100,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":12,"s":[100,100,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":16,"s":[100,10,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":20,"s":[100,100,100]},{"i":{"x":[0.833,0.833,0.833],"y":[1,1,1]},"o":{"x":[0.167,0.167,0.167],"y":[0,0,0]},"t":27,"s":[100,100,100]},{"t":34,"s":[0,0,100]}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[200,200],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"st","c":{"a":0,"k":[0.709803981407,0.780391977348,0.776471007104,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":0,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"fl","c":{"a":0,"k":[0.450980422076,0.141176470588,0.341176470588,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[352,-482],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":150,"st":0,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"L Eye","parent":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":30,"s":[346,-484,0],"to":[0,-5,0],"ti":[0,5,0]},{"t":31,"s":[346,-514,0]}],"ix":2},"a":{"a":0,"k":[352,-484,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":0,"s":[100,100,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":4,"s":[100,10,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":8,"s":[100,100,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":12,"s":[100,100,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":16,"s":[100,10,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":20,"s":[100,100,100]},{"i":{"x":[0.833,0.833,0.833],"y":[1,1,1]},"o":{"x":[0.167,0.167,0.167],"y":[0,0,0]},"t":27,"s":[100,100,100]},{"t":34,"s":[0,0,100]}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[200,200],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"st","c":{"a":0,"k":[0.709803981407,0.780391977348,0.776471007104,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":0,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"fl","c":{"a":0,"k":[0.450980422076,0.141176470588,0.341176470588,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[352,-482],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":150,"st":0,"bm":0},{"ddd":0,"ind":4,"ty":4,"nm":"Close eye R","parent":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[367.129,-495.252,0],"ix":2},"a":{"a":0,"k":[121.72,44.569,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":27,"s":[0,100,100]},{"t":34,"s":[100,100,100]}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[1.908,0.73],[0,0],[4.027,1.45],[7.948,2.467],[15.803,2.06],[7.931,0.202],[8.044,-0.525],[17.494,-3.524],[0,0],[1.907,9.467],[-4.733,3.981],[-20.728,5.501],[-10.779,0.684],[-10.654,-1.417],[-18.536,-9.695],[-8.195,-6.38],[-3.756,-3.653],[-1.823,-1.935],[-2.161,-2.607],[7.203,-5.967],[5.121,1.371]],"o":[[-1.427,-0.393],[0,0],[-3.982,-1.602],[-7.95,-3.071],[-15.853,-5.055],[-7.915,-0.91],[-7.928,-0.163],[-16.072,1.323],[0,0],[-9.466,1.906],[-1.307,-6.491],[15.904,-13.318],[10.391,-2.681],[10.777,-0.484],[21.283,2.965],[9.251,4.9],[4.059,3.25],[1.884,1.81],[1.862,2.039],[5.969,7.202],[-4.392,3.642],[0,0]],"v":[[93.245,41.621],[87.761,39.385],[81.879,36.864],[69.99,32.056],[46.179,23.633],[-1.318,12.948],[-25.058,11.261],[-48.967,11.959],[-98.764,19.826],[-99.57,19.988],[-120.163,6.3],[-114.248,-10.559],[-58.192,-38.856],[-26.318,-43.835],[5.934,-42.507],[66.25,-23.209],[92.499,-6.336],[104.345,3.817],[109.92,9.394],[115.501,15.782],[113.267,39.629],[98.067,42.948]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.450238485897,0.141227752087,0.342166885675,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[121.72,44.569],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":4,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":150,"st":0,"bm":0},{"ddd":0,"ind":5,"ty":4,"nm":"Close eye L","parent":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[-345.053,-492.572,0],"ix":2},"a":{"a":0,"k":[121.663,45.434,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":27,"s":[0,100,100]},{"t":34,"s":[100,100,100]}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-3.333,4.124],[-1.851,2.047],[-1.876,1.819],[-4.042,3.271],[-9.224,4.949],[-21.265,3.078],[-10.78,-0.426],[-10.405,-2.626],[-15.976,-13.233],[6.159,-7.437],[6.07,1.175],[0,0],[16.079,1.238],[7.929,-0.206],[7.91,-0.95],[15.825,-5.139],[7.933,-3.113],[3.975,-1.623],[0,0],[1.426,-0.399],[0,0],[2.528,9.007]],"o":[[2.147,-2.619],[1.814,-1.946],[3.735,-3.674],[8.161,-6.425],[18.484,-9.793],[10.646,-1.475],[10.782,0.627],[20.757,5.392],[7.436,6.16],[-4.224,5.098],[0,0],[-17.513,-3.43],[-8.046,-0.484],[-7.927,0.244],[-15.792,2.145],[-7.934,2.509],[-4.02,1.472],[0,0],[-1.904,0.739],[0,0],[-9.005,2.528],[-1.542,-5.492]],"v":[[-116.663,15.611],[-111.117,9.194],[-105.57,3.588],[-93.779,-6.628],[-67.62,-23.641],[-7.408,-43.259],[24.837,-44.758],[56.737,-39.949],[112.943,-11.95],[115.254,12.67],[98.451,18.682],[97.62,18.516],[47.781,10.915],[23.868,10.344],[0.138,12.155],[-47.3,23.094],[-71.067,31.643],[-82.931,36.514],[-88.798,39.067],[-94.271,41.331],[-98.988,42.656],[-119.871,30.926]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.450238485897,0.141227752087,0.342166885675,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[121.663,45.434],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":4,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":150,"st":0,"bm":0},{"ddd":0,"ind":6,"ty":4,"nm":"Head","parent":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[15.223,-691.616,0],"ix":2},"a":{"a":0,"k":[896.508,805.093,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[4.114,-3.847],[4.194,-3.093],[4.317,-2.687],[9.615,-3.632],[21.619,0.286],[18.847,8.248],[8.441,5.608],[3.928,3.237],[4.109,4.162],[-6.341,6.26],[-5.484,-1.672],[0,0],[-3.971,-1.347],[-4.071,-1.262],[-7.973,-2.022],[-14.984,-0.216],[-7.909,1],[-8.095,1.602],[-8.205,2.216],[-4.131,1.173],[-3.525,0.854],[0,0],[-2.099,-8.664]],"o":[[-4.32,4.02],[-4.103,3.01],[-8.711,5.197],[-19.18,7.307],[-21.989,-0.404],[-9.421,-4.178],[-4.17,-2.903],[-4.041,-3.244],[-6.26,-6.34],[4.366,-4.311],[0,0],[3.497,1.075],[4.063,1.395],[8.092,2.629],[15.938,4.115],[7.646,-0.003],[7.927,-0.752],[8.095,-1.602],[4.142,-1.022],[4.014,-1.132],[0,0],[8.664,-2.101],[1.421,5.865]],"v":[[113.477,-4.755],[101.271,5.308],[88.568,13.692],[61.021,26.896],[-0.735,38.087],[-62.517,24.218],[-89.381,9.609],[-101.641,0.626],[-113.327,-9.934],[-113.182,-32.749],[-97.128,-36.701],[-94.695,-35.951],[-82.91,-31.808],[-70.77,-27.679],[-46.668,-20.648],[-0.077,-13.903],[23.321,-15.182],[47.343,-18.965],[71.805,-24.754],[84.156,-28.19],[96.125,-31.642],[98.678,-32.26],[118.167,-20.374]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.450238485897,0.141227752087,0.342166885675,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[880.725,1215.598],"ix":2},"a":{"a":0,"k":[-3,14],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667],"y":[1,1]},"o":{"x":[0.333,0.333],"y":[0,0]},"t":30,"s":[50,50]},{"t":36,"s":[100,100]}],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":4,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-0.614,0.38],[-8.569,4.464],[-8.589,4.065],[-8.735,3.436],[-9.304,1.983],[0,0],[-1.751,-8.212],[5.485,-3.228],[9.275,-2.934],[9.599,-1.785],[9.756,-0.963],[9.985,0.351],[-0.043,1.235]],"o":[[8.506,-5.171],[8.598,-4.359],[8.594,-4.058],[8.734,-3.46],[0,0],[8.211,-1.751],[1.4,6.567],[-8.49,4.981],[-9.271,2.953],[-9.603,1.78],[-9.784,0.858],[-1.235,-0.042],[0.026,-0.775]],"v":[[-61.266,22.167],[-35.579,8.05],[-9.816,-4.618],[16.021,-16.278],[42.86,-24.898],[42.946,-24.917],[60.985,-13.219],[53.809,3.064],[26.936,14.474],[-1.537,21.156],[-30.599,25.229],[-60.183,26.318],[-62.342,24.003]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.450238485897,0.141227752087,0.342166885675,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[1308.078,1542.832],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 2","np":4,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0.605,227.643],[298.836,138.877],[0,0],[-1.6,49.847],[24.198,-21.818],[55.371,-8.523]],"o":[[212.144,-84.84],[-0.723,-272.119],[0,0],[18.547,-40.13],[1.045,-32.565],[-44.158,39.815],[0,0]],"v":[[-34.796,691.083],[315.402,224.601],[-120.929,-487.887],[-119.511,-490.865],[-93.138,-640.864],[-154.86,-669.264],[-316.007,-574.659]],"c":false},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.450238485897,0.141227752087,0.342166885675,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":32,"ix":5},"lc":2,"lj":2,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[1397.01,838.537],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 3","np":2,"cix":2,"bm":0,"ix":3,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[17.964,53.379],[14.871,-25.664],[0,0]],"o":[[46.096,-49.586],[-9.461,-28.113],[-81.575,140.775],[0,0]],"v":[[121.82,103.108],[139.719,-71.359],[77.537,-77.444],[-167.915,96.733]],"c":false},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.450238485897,0.141227752087,0.342166885675,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":32,"ix":5},"lc":2,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[942.815,183.108],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 4","np":2,"cix":2,"bm":0,"ix":4,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-0.065,-24.521],[97.382,-89.666],[75.117,29.939],[17.044,116.44],[-120.088,14.807],[-72.632,-72.209],[0,0]],"o":[[0.285,107.498],[-34.777,-39.42],[-122.62,-48.91],[-12.232,-83.565],[158.969,-19.598],[0,0],[4.4,23.27]],"v":[[268.532,-51.096],[139.165,261.865],[-23.064,148.328],[-256.585,-44.161],[-82.015,-242.268],[261.756,-122.938],[261.756,-122.899]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.468252383961,0.472034349629,0.44265313242,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[1282.638,1064.761],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 5","np":4,"cix":2,"bm":0,"ix":5,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[11.787,-83.628],[122.359,-49.561],[34.486,-40.341],[0.289,108.66],[-3.47,21.083],[-164.185,-19.32]],"o":[[-16.425,116.53],[-76.774,31.079],[-100.338,-89.568],[-0.058,-22.081],[71.969,-75.188],[120.165,14.169]],"v":[[259.518,-47.271],[27.021,146.457],[-137.033,263.767],[-271.247,-51.4],[-266.073,-116.262],[83.896,-244.447]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.468252383961,0.472034349629,0.44265313242,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[486.343,1068.616],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 6","np":4,"cix":2,"bm":0,"ix":6,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0.692,-0.029],[9.053,0.852],[8.859,1.743],[8.51,2.88],[7.7,4.859],[-4.49,7.115],[-6.082,-1.322],[0,0],[-7.971,-3.378],[-7.805,-4.003],[-7.792,-4.328],[-7.67,-5.164],[0.693,-1.034]],"o":[[-9.278,0.323],[-9.021,-0.958],[-8.853,-1.748],[-8.513,-2.86],[-7.116,-4.49],[3.514,-5.568],[0,0],[8.582,1.883],[7.975,3.357],[7.802,4.008],[7.76,4.432],[1.034,0.694],[-0.417,0.619]],"v":[[55.892,25.777],[28.476,24.655],[1.633,20.641],[-24.585,14.118],[-49.137,2.996],[-53.889,-18.019],[-37.767,-24.779],[-37.642,-24.746],[-13.037,-16.402],[10.467,-4.948],[33.84,7.59],[57.07,21.652],[57.686,24.781]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.450238485897,0.141227752087,0.342166885675,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[463.196,1537.386],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 7","np":4,"cix":2,"bm":0,"ix":7,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0.586,220.809],[-481.454,56.559]],"o":[[-201.905,-85.253],[-0.908,-341.797],[0,0]],"v":[[-12.79,622.253],[-346.54,165.367],[347.448,-622.253]],"c":false},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.450238485897,0.141227752087,0.342166885675,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":32,"ix":5},"lc":2,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[427.448,902.105],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 8","np":2,"cix":2,"bm":0,"ix":8,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-0.021,-7.833],[22.405,-0.06],[0.021,7.833],[-22.404,0.06]],"o":[[0.021,7.832],[-22.404,0.06],[-0.02,-7.832],[22.404,-0.059]],"v":[[40.563,-3.173],[0.042,14.18],[-40.57,-2.958],[-0.033,-14.184]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.996211152918,0.981041882085,0.984832883349,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[885.96,1024.214],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 9","np":4,"cix":2,"bm":0,"ix":9,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-0.089,-33.494],[55.027,-0.146],[0.089,33.493],[-55.026,0.146]],"o":[[0.089,33.494],[-55.025,0.146],[-0.088,-33.494],[55.026,-0.147]],"v":[[99.633,-13.366],[0.195,60.646],[-99.634,-12.836],[-0.127,-60.646]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.450238485897,0.141227752087,0.342166885675,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[883.198,1052.745],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 10","np":4,"cix":2,"bm":0,"ix":10,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-0.065,-24.521],[97.382,-89.666],[270.353,-0.719],[0,0],[100.377,89.606],[0.288,108.66],[-3.469,21.083],[-195.2,0.518],[-71.035,-68.881],[-106.762,0.284],[-34.228,-182.947],[0,0]],"o":[[0.285,107.498],[-99.508,91.726],[0,0],[-267.524,0.711],[-100.338,-89.568],[-0.059,-22.081],[30.418,-186.566],[106.763,-0.284],[70.708,-69.258],[192.799,-0.512],[0,0],[4.4,23.27]],"v":[[667.924,-38.815],[538.556,274.146],[1.169,431.07],[1.13,431.07],[-533.937,279.902],[-668.15,-35.265],[-662.977,-100.126],[-275.696,-429.811],[-0.863,-318.937],[273.377,-431.27],[661.147,-110.656],[661.147,-110.618]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.996211152918,0.981041882085,0.984832883349,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[883.246,1052.48],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 11","np":4,"cix":2,"bm":0,"ix":11,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-0.04,-13.64],[450.559,-1.2],[1,368.88],[-0.8,15.08],[-436.841,1.16],[-22.8,343.68]],"o":[[0.96,368.92],[-450.521,1.199],[-0.04,-14.92],[22.16,346.2],[435.239,-1.16],[0.761,13.76]],"v":[[815.763,-252.264],[1.443,293.336],[-815.758,-247.904],[-814.638,-292.904],[1.443,215.296],[814.601,-293.344]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.749019622803,0.525490224361,0.47058826685,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[896.665,1315.395],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 13","np":4,"cix":2,"bm":0,"ix":12,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-0.721,-271.316],[450.528,-1.198],[0.98,368.902],[-517.311,34.275],[-47.484,81.976],[-9.482,-28.15],[24.93,-63.549],[-22.593,20.389],[1.029,-32.547],[13.002,-55.984]],"o":[[0.98,368.901],[-450.528,1.197],[-0.939,-353.566],[62.461,-32.086],[14.866,-25.629],[12.582,37.414],[69.144,-33.797],[24.194,-21.82],[-1.031,31.477],[297.009,139.372]],"v":[[815.731,218.161],[1.446,763.762],[-815.772,222.496],[-70.93,-569.763],[123.66,-739.33],[185.866,-733.209],[185.061,-583.104],[345.483,-675.723],[407.213,-647.311],[381.99,-493.084]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.928911635455,0.76966827991,0.580090092678,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[896.68,844.977],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 14","np":4,"cix":2,"bm":0,"ix":13,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":150,"st":0,"bm":0},{"ddd":0,"ind":7,"ty":4,"nm":"R Nail ","parent":10,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":30,"s":[-20]},{"t":36,"s":[0]}],"ix":10},"p":{"a":0,"k":[592.669,461.719,0],"ix":2},"a":{"a":0,"k":[130.703,166.769,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-7.733,-8.045],[-8.447,7.902],[-61.338,1.04],[75.047,-6.223],[20.811,-18.38],[-12.379,-7.272],[-13.168,-10.259]],"o":[[8.016,8.34],[21.745,-20.339],[47.495,-0.805],[-52.358,4.342],[-10.759,9.504],[9.248,5.432],[6.983,5.439]],"v":[[-66.556,61.963],[-36.825,62.867],[91.209,8.048],[-18.225,-64.546],[-127.944,-17.886],[-124.457,16.099],[-90.506,39.35]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.450238485897,0.141227752087,0.342166885675,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":32,"ix":5},"lc":2,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[218.703,150.769],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-13.88,-8.4],[-11.881,-9.24],[-7.4,-7.64],[-9.439,8.64],[-59.76,1],[28.279,20.04],[21.64,-19.76],[8.92,9.24],[6.52,5.08],[7.2,4.64],[0.4,-0.32]],"o":[[8.72,5.28],[6.52,5.08],[8.919,9.2],[22.361,-20.48],[25.639,-0.44],[-56.801,2.92],[-9.44,8.68],[-7.4,-7.6],[-8.961,-6.96],[-0.4,0.28],[-12.361,10.48]],"v":[[-107.665,1.681],[-76.545,23.241],[-54.145,44.281],[-21.186,45.201],[105.135,-8.039],[90.455,-51.439],[-30.025,1.601],[-62.985,0.681],[-85.385,-20.319],[-109.705,-37.639],[-110.905,-36.679]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.796078503132,0.68235296011,0.756862819195,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[204.762,166.867],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 2","np":4,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-7.395,-7.631],[-9.459,8.655],[-59.768,1.012],[75.047,-6.224],[21.252,-17.951],[-13.882,-8.393],[-11.854,-9.234]],"o":[[8.923,9.207],[22.341,-20.443],[47.495,-0.805],[-49.837,4.133],[-12.392,10.466],[8.73,5.277],[6.524,5.082]],"v":[[-68.841,60.782],[-35.851,61.697],[90.467,8.466],[-18.966,-64.128],[-125.57,-20.159],[-122.362,18.207],[-91.247,39.766]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[219.445,150.352],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 3","np":4,"cix":2,"bm":0,"ix":3,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":150,"st":0,"bm":0},{"ddd":0,"ind":8,"ty":4,"nm":"R Nail ","parent":10,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":30,"s":[-18]},{"t":36,"s":[0]}],"ix":10},"p":{"a":0,"k":[624.826,645.493,0],"ix":2},"a":{"a":0,"k":[104.768,149.414,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-43.066,-43.484],[-51.45,9.36],[25.369,27.036],[44.554,-1.788],[18.389,0]],"o":[[14.408,14.548],[105.191,-19.136],[-17.122,-18.247],[-78.761,3.16],[-40.766,0]],"v":[[-113.702,52.023],[-27.014,64.054],[131.399,-55.167],[34.362,-56.503],[-83.598,-67.977]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.450238485897,0.141227752087,0.342166885675,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":32,"ix":5},"lc":2,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[236.768,153.414],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-30.36,-30.64],[-51.48,9.36],[19.84,28.519],[61.559,-11.2],[14.4,14.56],[-0.96,19.08]],"o":[[14.399,14.56],[102.639,-18.64],[-27.84,28.08],[-51.441,9.36],[-15.48,-15.64],[-21.16,25.12]],"v":[[-114.715,44.376],[-28.035,56.416],[132.005,-60.704],[-9.835,8.256],[-96.515,-3.784],[-116.795,-58.424]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.796078503132,0.68235296011,0.756862819195,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[237.8,161.043],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 2","np":4,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-43.066,-43.484],[-51.45,9.36],[25.369,27.036],[44.554,-1.788],[18.389,0]],"o":[[14.408,14.548],[105.191,-19.136],[-17.122,-18.247],[-78.761,3.16],[-40.766,0]],"v":[[-113.702,52.023],[-27.014,64.054],[131.399,-55.167],[34.362,-56.503],[-83.598,-67.977]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[236.768,153.414],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 3","np":4,"cix":2,"bm":0,"ix":3,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":150,"st":0,"bm":0},{"ddd":0,"ind":9,"ty":4,"nm":"R Nail M","parent":10,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":30,"s":[47]},{"t":36,"s":[0]}],"ix":10},"p":{"a":0,"k":[719.413,625.498,0],"ix":2},"a":{"a":0,"k":[141.379,302.47,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-37.936,-30.454],[-26.316,85.37],[19.277,-6.331],[63.167,-56.084]],"o":[[0,0],[36.131,-117.213],[-19.277,6.331],[-23.333,20.717]],"v":[[-41.172,110.058],[57.248,45.099],[-14.338,-124.138],[-70.046,4.771]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.450238485897,0.141227752087,0.342166885675,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":32,"ix":5},"lc":2,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[173.379,210.47],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-37.921,-30.44],[-26.319,85.399],[7.04,24.88],[1.281,-4.2],[0,0],[6.52,10.561],[1.2,-1.08]],"o":[[0,0],[11.241,-36.44],[-0.96,4.04],[-26.319,85.4],[-10.28,-8.24],[-1.16,1.081],[-23.359,20.719]],"v":[[-33.42,77.451],[65.019,12.491],[68.38,-79.589],[65.019,-67.269],[-33.42,-2.309],[-58.74,-31.07],[-62.261,-27.829]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.796078503132,0.68235296011,0.756862819195,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[165.609,243.058],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 2","np":4,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-37.936,-30.454],[-26.316,85.37],[19.277,-6.331],[63.167,-56.084]],"o":[[0,0],[36.131,-117.213],[-19.277,6.331],[-23.333,20.717]],"v":[[-41.172,110.058],[57.248,45.099],[-14.338,-124.138],[-70.046,4.771]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[173.379,210.47],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 3","np":4,"cix":2,"bm":0,"ix":3,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":150,"st":0,"bm":0},{"ddd":0,"ind":10,"ty":4,"nm":"R hand","parent":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":23,"s":[-5]},{"t":36,"s":[0]}],"ix":10},"p":{"a":0,"k":[317.205,29.034,0],"ix":2},"a":{"a":0,"k":[-4.052,57.79,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-2.13,-0.22],[-36.075,-17.821],[-30.692,-26.078],[-25.941,-30.296],[-22.897,-31.633],[-11.933,-14.873],[-13.612,-12.03],[-16.054,-5.822],[-18.675,-4.243],[-77.108,-10.58],[0,0],[0,0],[-1.967,-5.741],[-1.613,-5.711],[-2.06,-11.737],[2.792,-24.42],[13.121,-21.785],[21.205,-12.852],[23.197,-5.6],[0,0],[5.858,-0.796],[11.707,-0.767],[2.914,-0.024],[0,0],[0,0],[5.785,0.33],[0,0],[0,0],[0,0],[0,0],[5.88,1.021],[0,0],[38.816,26.708],[16.894,16.195],[14.622,18.088],[23.164,39.979],[8.048,21.669],[2.643,11.323],[0.379,12.099],[-3.052,0.096],[-1.036,-1.471],[0,0],[-5.558,-9.766],[-5.181,-9.868],[0,0],[-27.865,-34.119],[-15.897,-15.04],[-17.935,-12.224],[-19.752,-8.589],[-20.99,-4.458],[0,0],[-5.47,-0.671],[0,0],[0,0],[0,0],[0,0],[-5.494,0.116],[0,0],[0,0],[-2.733,0.131],[-10.67,1.735],[-5.323,0.853],[0,0],[-17.465,10.752],[-10.317,17.11],[-2.28,20.627],[3.552,21.127],[2.993,10.367],[1.729,5.082],[1.825,4.286],[0,0],[77.565,16.397],[20.003,6.965],[15.654,13.857],[12.589,15.626],[11.527,15.867],[24.775,29.355],[13.707,13.272],[6.898,6.57],[7.548,5.773],[33.137,18.685],[34.886,18.672],[0,0],[-1.416,2.645]],"o":[[39.972,4.184],[36.2,17.673],[30.896,25.902],[25.732,30.492],[11.473,15.799],[11.937,14.837],[13.591,12.026],[16.966,5.937],[75.637,16.004],[0,0],[0,0],[2.608,6.14],[1.917,5.64],[3.286,11.402],[3.943,23.484],[-2.669,24.314],[-13.108,21.798],[-21.287,13.03],[0,0],[-5.853,0.946],[-11.731,1.862],[-2.924,0.137],[0,0],[0,0],[-5.841,0.11],[0,0],[0,0],[0,0],[0,0],[-5.767,-0.708],[0,0],[-46.738,-9.177],[-19.478,-13.275],[-17,-16.079],[-29.666,-35.92],[-11.48,-20.073],[-4.052,-10.817],[-2.647,-11.345],[-0.096,-3.054],[1.931,-0.06],[0,0],[6.564,9.464],[5.712,9.731],[0,0],[19.882,39.704],[13.853,17.152],[15.803,15.167],[17.82,12.445],[19.67,8.913],[0,0],[5.276,0.941],[0,0],[0,0],[0,0],[0,0],[5.523,0.319],[0,0],[0,0],[2.747,-0.022],[10.889,-0.729],[5.361,-0.731],[0,0],[20.686,-4.993],[17.455,-10.641],[10.284,-17.126],[2.404,-20.647],[-1.858,-10.565],[-1.465,-5.185],[-1.687,-4.976],[0,0],[-77.969,-10.711],[-19.457,-4.454],[-20.824,-7.534],[-15.722,-13.915],[-12.562,-15.659],[-22.99,-31.77],[-12.496,-14.545],[-6.658,-6.845],[-7.297,-6.103],[-29.74,-23.666],[-33.296,-18.502],[0,0],[-2.643,-1.416],[1.072,-2.004]],"v":[[-402.702,-378.733],[-288.004,-344.065],[-187.288,-277.63],[-102.735,-192.207],[-30.77,-97.983],[4.092,-51.713],[42.085,-10.714],[86.549,16.896],[141.238,31.427],[371.537,69.579],[380.632,70.828],[384.111,79.024],[390.568,96.198],[395.845,113.219],[403.739,147.973],[406.68,220.085],[383.774,290.811],[330.335,343.318],[262.529,369.565],[245.012,373.229],[227.436,375.603],[192.305,378.49],[183.533,378.926],[174.799,378.901],[157.325,378.843],[139.931,378.182],[122.582,377.168],[113.908,376.652],[105.305,375.729],[88.097,373.88],[70.82,371.823],[53.218,368.828],[-76.841,313.45],[-131.625,269.229],[-179.243,217.99],[-256.711,102.75],[-286.123,40.051],[-296.201,6.812],[-301.277,-28.074],[-295.923,-33.776],[-291.225,-31.429],[-291.089,-31.233],[-273.138,-2.194],[-257.112,27.302],[-226.925,86.704],[-154.496,197.702],[-109.676,245.943],[-58.846,286.989],[-2.134,318.293],[59.367,337.424],[75.262,340.13],[91.713,342.083],[108.29,343.869],[116.576,344.763],[124.863,345.25],[141.433,346.216],[157.98,346.849],[174.485,346.903],[182.738,346.937],[190.93,346.52],[223.491,343.845],[239.584,341.694],[255.321,338.386],[313.761,315.944],[356.418,274.205],[374.867,216.62],[372.204,153.405],[365.053,121.925],[360.271,106.499],[354.801,91.865],[367.375,101.308],[134.407,62.688],[75.712,47.005],[20.917,13.286],[-20.853,-31.668],[-56.653,-79.163],[-127.174,-171.548],[-166.085,-213.716],[-186.814,-233.402],[-208.654,-251.75],[-303.173,-315.054],[-405.8,-368.525],[-405.832,-368.542],[-408.056,-375.893]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.450238485897,0.141227752087,0.342166885675,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[409.722,379.203],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":4,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[12.92,32.6],[-113.84,-94.36],[-0.84,-0.68],[-2.121,-1.64],[-64.441,-8.4],[0,0],[75.08,12.88],[0,-54.302],[45.751,-9.747],[64.248,50.125],[0.429,0.338]],"o":[[17.479,48.32],[0.84,0.72],[2.08,1.72],[46.6,36.641],[437.04,56.88],[0,0],[-32.6,63.88],[0,53.402],[-79.7,16.98],[-0.432,-0.337],[-119.16,-93.559]],"v":[[-341.405,-188.474],[-149.605,102.286],[-147.086,104.366],[-140.805,109.406],[25.435,181.846],[318.795,-89.194],[71.115,-131.234],[137.579,12.237],[67.115,94.582],[-160.313,41.619],[-161.605,40.606]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.749019622803,0.525490224361,0.47058826685,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[460.388,553.852],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 2","np":4,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[50.92,15.44],[0,0],[0,0],[0,0],[-143.88,-113],[-64.44,-8.4],[0,0],[72.04,24.601],[143.88,116.48],[20.399,12.72],[4.399,2.6]],"o":[[0,0],[0,0],[0,0],[0,0],[46.601,36.64],[437.04,56.88],[0,0],[-97.84,-33.439],[-17.279,-13.961],[-4.281,-2.681],[-38,-22.24]],"v":[[-458.7,-393.5],[-440.7,-336.22],[-406.42,-227.101],[-350.62,-49.54],[-144.58,264.18],[21.66,336.62],[315.021,65.58],[28.62,12.859],[-256.66,-288.18],[-313.059,-328.34],[-326.099,-336.22]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.928911635455,0.76966827991,0.580090092678,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[464.162,399.078],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 3","np":4,"cix":2,"bm":0,"ix":3,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":150,"st":0,"bm":0},{"ddd":0,"ind":11,"ty":4,"nm":"L Nail","parent":14,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":33,"s":[18]},{"t":39,"s":[0]}],"ix":10},"p":{"a":0,"k":[298.287,655.584,0],"ix":2},"a":{"a":0,"k":[368.768,159.414,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[43.066,-43.484],[51.45,9.36],[-25.369,27.036],[-44.555,-1.788],[-18.389,0]],"o":[[-14.408,14.548],[-105.191,-19.136],[17.121,-18.247],[78.76,3.16],[40.767,0]],"v":[[113.702,52.023],[27.013,64.054],[-131.399,-55.167],[-34.362,-56.503],[83.597,-67.977]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.450238485897,0.141227752087,0.342166885675,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":32,"ix":5},"lc":2,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[236.768,153.414],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[30.36,-30.64],[51.48,9.36],[-19.84,28.519],[-61.559,-11.2],[-14.4,14.56],[0.96,19.08]],"o":[[-14.399,14.56],[-102.639,-18.64],[27.84,28.08],[51.441,9.36],[15.48,-15.64],[21.16,25.12]],"v":[[114.716,44.376],[28.036,56.416],[-132.004,-60.704],[9.836,8.256],[96.516,-3.784],[116.796,-58.424]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.796078503132,0.68235296011,0.756862819195,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[235.734,161.043],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 2","np":4,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[43.066,-43.484],[51.45,9.36],[-25.369,27.036],[-44.555,-1.788],[-18.389,0]],"o":[[-14.408,14.548],[-105.191,-19.136],[17.121,-18.247],[78.76,3.16],[40.767,0]],"v":[[113.702,52.023],[27.013,64.054],[-131.399,-55.167],[-34.362,-56.503],[83.597,-67.977]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[236.768,153.414],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 3","np":4,"cix":2,"bm":0,"ix":3,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":150,"st":0,"bm":0},{"ddd":0,"ind":12,"ty":4,"nm":"L Nail M","parent":14,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":33,"s":[-47]},{"t":39,"s":[0]}],"ix":10},"p":{"a":0,"k":[207.699,637.59,0],"ix":2},"a":{"a":0,"k":[209.379,314.469,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[37.936,-30.454],[26.316,85.37],[-19.278,-6.331],[-63.167,-56.084]],"o":[[0,0],[-36.131,-117.213],[19.277,6.331],[23.333,20.717]],"v":[[41.172,110.058],[-57.248,45.099],[14.339,-124.138],[70.046,4.771]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.450238485897,0.141227752087,0.342166885675,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":32,"ix":5},"lc":2,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[173.379,210.47],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[37.921,-30.44],[26.319,85.399],[-7.04,24.88],[-1.281,-4.2],[0,0],[-6.521,10.561],[-1.2,-1.08]],"o":[[0,0],[-11.241,-36.44],[0.96,4.04],[26.319,85.4],[10.28,-8.24],[1.16,1.081],[23.359,20.719]],"v":[[33.419,77.451],[-65.02,12.491],[-68.381,-79.589],[-65.02,-67.269],[33.419,-2.309],[58.739,-31.07],[62.26,-27.829]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.796078503132,0.68235296011,0.756862819195,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[181.15,243.058],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 2","np":4,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[37.936,-30.454],[26.316,85.37],[-19.278,-6.331],[-63.167,-56.084]],"o":[[0,0],[-36.131,-117.213],[19.277,6.331],[23.333,20.717]],"v":[[41.172,110.058],[-57.248,45.099],[14.339,-124.138],[70.046,4.771]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[173.379,210.47],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 3","np":4,"cix":2,"bm":0,"ix":3,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":150,"st":0,"bm":0},{"ddd":0,"ind":13,"ty":4,"nm":"L Nail","parent":14,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":33,"s":[20]},{"t":39,"s":[0]}],"ix":10},"p":{"a":0,"k":[332.443,481.81,0],"ix":2},"a":{"a":0,"k":[308.703,186.769,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[7.733,-8.045],[8.447,7.902],[61.339,1.04],[-75.046,-6.223],[-20.811,-18.38],[12.379,-7.272],[13.169,-10.259]],"o":[[-8.016,8.34],[-21.744,-20.339],[-47.494,-0.805],[52.359,4.342],[10.76,9.504],[-9.248,5.432],[-6.982,5.439]],"v":[[66.557,61.963],[36.824,62.867],[-91.21,8.048],[18.224,-64.546],[127.943,-17.886],[124.458,16.099],[90.505,39.35]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.450238485897,0.141227752087,0.342166885675,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":32,"ix":5},"lc":2,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[218.703,150.769],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[13.88,-8.4],[11.881,-9.24],[7.4,-7.64],[9.439,8.64],[59.76,1],[-28.279,20.04],[-21.64,-19.76],[-8.92,9.24],[-6.52,5.08],[-7.2,4.64],[-0.4,-0.32]],"o":[[-8.72,5.28],[-6.52,5.08],[-8.919,9.2],[-22.361,-20.48],[-25.64,-0.44],[56.801,2.92],[9.44,8.68],[7.4,-7.6],[8.961,-6.96],[0.4,0.28],[12.361,10.48]],"v":[[107.667,1.681],[76.547,23.241],[54.147,44.281],[21.188,45.201],[-105.133,-8.039],[-90.453,-51.439],[30.027,1.601],[62.987,0.681],[85.387,-20.319],[109.707,-37.639],[110.907,-36.679]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.796078503132,0.68235296011,0.756862819195,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[232.643,166.867],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 2","np":4,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[7.394,-7.631],[9.459,8.655],[59.768,1.012],[-75.047,-6.224],[-21.251,-17.951],[13.883,-8.393],[11.854,-9.234]],"o":[[-8.923,9.207],[-22.341,-20.443],[-47.495,-0.805],[49.837,4.133],[12.393,10.466],[-8.729,5.277],[-6.524,5.082]],"v":[[68.841,60.782],[35.851,61.697],[-90.467,8.466],[18.966,-64.128],[125.569,-20.159],[122.362,18.207],[91.247,39.766]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[217.961,150.352],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 3","np":4,"cix":2,"bm":0,"ix":3,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":150,"st":0,"bm":0},{"ddd":0,"ind":14,"ty":4,"nm":"L Hand","parent":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":26,"s":[5]},{"t":39,"s":[0]}],"ix":10},"p":{"a":0,"k":[-319.096,47.612,0],"ix":2},"a":{"a":0,"k":[925.273,76.46,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[33.296,-18.502],[29.741,-23.666],[7.298,-6.104],[6.658,-6.845],[12.495,-14.545],[22.99,-31.771],[12.561,-15.659],[15.721,-13.915],[20.824,-7.534],[19.458,-4.454],[77.969,-10.71],[0,0],[1.686,-4.977],[1.465,-5.186],[1.859,-10.564],[-2.403,-20.646],[-10.283,-17.126],[-17.455,-10.64],[-20.686,-4.994],[0,0],[-5.36,-0.732],[-10.89,-0.728],[-2.747,-0.021],[0,0],[0,0],[-5.523,0.318],[0,0],[0,0],[0,0],[0,0],[-5.276,0.94],[0,0],[-19.668,8.913],[-17.819,12.445],[-15.803,15.167],[-13.853,17.152],[-19.882,39.704],[0,0],[-5.712,9.73],[-6.564,9.464],[0,0],[-2.51,-1.741],[0.043,-1.798],[2.648,-11.344],[4.052,-10.818],[11.481,-20.073],[29.666,-35.92],[17.001,-16.079],[19.479,-13.274],[46.739,-9.177],[0,0],[5.768,-0.708],[0,0],[0,0],[0,0],[0,0],[5.841,0.109],[0,0],[0,0],[2.924,0.138],[11.731,1.863],[5.852,0.947],[0,0],[21.287,13.031],[13.108,21.798],[2.668,24.313],[-3.942,23.484],[-3.285,11.402],[-1.918,5.641],[-2.608,6.14],[0,0],[0,0],[-75.637,16.004],[-16.966,5.938],[-13.59,12.026],[-11.937,14.838],[-11.474,15.799],[-25.733,30.491],[-30.895,25.902],[-36.201,17.673],[-39.971,4.184],[-0.313,-2.983],[1.885,-1.012]],"o":[[-34.886,18.672],[-33.136,18.686],[-7.547,5.772],[-6.897,6.57],[-13.708,13.273],[-24.775,29.356],[-11.528,15.866],[-12.59,15.626],[-15.654,13.857],[-20.003,6.965],[-77.564,16.398],[0,0],[-1.824,4.286],[-1.729,5.082],[-2.993,10.367],[-3.552,21.127],[2.281,20.628],[10.318,17.109],[17.466,10.752],[0,0],[5.322,0.854],[10.67,1.735],[2.732,0.131],[0,0],[0,0],[5.494,0.116],[0,0],[0,0],[0,0],[0,0],[5.47,-0.672],[0,0],[20.99,-4.458],[19.753,-8.589],[17.935,-12.223],[15.897,-15.04],[27.864,-34.118],[0,0],[5.181,-9.869],[5.559,-9.766],[0,0],[1.741,-2.509],[1.588,1.101],[-0.379,12.098],[-2.642,11.324],[-8.047,21.669],[-23.164,39.978],[-14.621,18.088],[-16.893,16.196],[-38.816,26.708],[0,0],[-5.88,1.022],[0,0],[0,0],[0,0],[0,0],[-5.785,0.33],[0,0],[0,0],[-2.914,-0.025],[-11.706,-0.766],[-5.859,-0.795],[0,0],[-23.197,-5.599],[-21.205,-12.851],[-13.121,-21.785],[-2.792,-24.42],[2.06,-11.738],[1.613,-5.711],[1.966,-5.74],[0,0],[0,0],[77.108,-10.58],[18.676,-4.244],[16.054,-5.822],[13.612,-12.029],[11.933,-14.872],[22.896,-31.632],[25.94,-30.296],[30.692,-26.077],[36.075,-17.82],[2.985,-0.311],[0.235,2.26],[0,0]],"v":[[406.082,-368.479],[303.455,-315.009],[208.936,-251.703],[187.097,-233.356],[166.369,-213.671],[127.457,-171.502],[56.936,-79.117],[21.136,-31.622],[-20.635,13.332],[-75.429,47.051],[-134.125,62.734],[-367.092,101.354],[-354.518,91.911],[-359.987,106.545],[-364.77,121.971],[-371.921,153.45],[-374.585,216.666],[-356.136,274.252],[-313.478,315.99],[-255.038,338.433],[-239.3,341.74],[-223.208,343.892],[-190.647,346.565],[-182.455,346.982],[-174.203,346.949],[-157.697,346.896],[-141.149,346.263],[-124.58,345.296],[-116.294,344.81],[-108.007,343.914],[-91.431,342.13],[-74.979,340.177],[-59.085,337.471],[2.415,318.34],[59.129,287.034],[109.958,245.989],[154.779,197.747],[227.207,86.75],[257.395,27.348],[273.421,-2.148],[291.371,-31.187],[291.487,-31.354],[299.183,-32.747],[301.56,-28.028],[296.484,6.857],[286.405,40.097],[256.994,102.797],[179.526,218.035],[131.908,269.275],[77.123,313.496],[-52.935,368.874],[-70.537,371.868],[-87.815,373.926],[-105.022,375.775],[-113.626,376.698],[-122.299,377.215],[-139.649,378.228],[-157.043,378.889],[-174.515,378.947],[-183.251,378.972],[-192.023,378.536],[-227.152,375.648],[-244.728,373.275],[-262.246,369.611],[-330.053,343.364],[-383.491,290.856],[-406.397,220.132],[-403.456,148.019],[-395.563,113.266],[-390.284,96.243],[-383.828,79.069],[-380.348,70.874],[-371.253,69.626],[-140.955,31.473],[-86.266,16.941],[-41.802,-10.668],[-3.809,-51.667],[31.054,-97.937],[103.018,-192.16],[187.57,-277.585],[288.287,-344.02],[402.985,-378.687],[408.954,-373.85],[406.119,-368.497]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.450238485897,0.141227752087,0.342166885675,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[513.107,379.248],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":4,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-12.92,32.6],[113.84,-94.36],[0.84,-0.68],[2.121,-1.64],[64.441,-8.4],[0,0],[-75.08,12.88],[0,-54.302],[-45.752,-9.747],[-64.247,50.125],[-0.43,0.338]],"o":[[-17.479,48.32],[-0.84,0.72],[-2.08,1.72],[-46.6,36.641],[-437.04,56.88],[0,0],[32.6,63.88],[0,53.402],[79.699,16.98],[0.432,-0.337],[119.16,-93.559]],"v":[[341.405,-188.474],[149.605,102.286],[147.086,104.366],[140.805,109.406],[-25.435,181.846],[-318.795,-89.194],[-71.115,-131.234],[-137.58,12.237],[-67.115,94.582],[160.312,41.619],[161.605,40.606]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.749019622803,0.525490224361,0.47058826685,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[462.724,553.944],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 2","np":4,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-50.92,15.44],[0,0],[0,0],[0,0],[143.88,-113],[64.44,-8.4],[0,0],[-72.04,24.601],[-143.88,116.48],[-20.399,12.72],[-4.399,2.6]],"o":[[0,0],[0,0],[0,0],[0,0],[-46.601,36.64],[-437.04,56.88],[0,0],[97.84,-33.439],[17.279,-13.961],[4.281,-2.681],[38,-22.24]],"v":[[458.7,-393.5],[440.7,-336.22],[406.42,-227.101],[350.62,-49.54],[144.58,264.18],[-21.66,336.62],[-315.021,65.58],[-28.62,12.859],[256.66,-288.18],[313.059,-328.34],[326.099,-336.22]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.928911635455,0.76966827991,0.580090092678,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[458.95,399.17],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 3","np":4,"cix":2,"bm":0,"ix":3,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":150,"st":0,"bm":0},{"ddd":0,"ind":15,"ty":4,"nm":"R Leg","parent":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[745.182,732.342,0],"ix":2},"a":{"a":0,"k":[986.124,187.528,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-78.184,-50.863],[-138.784,138.529],[171.587,-17.056],[389.591,-120.829]],"o":[[134.838,87.72],[231.584,-231.162],[-166.418,16.541],[-172.934,53.634]],"v":[[-353.355,210.284],[260.62,145.417],[153.917,-280.948],[-319.27,-116.536]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.450238485897,0.141227752087,0.342166885675,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":32,"ix":5},"lc":2,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[680.467,378.004],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[105.279,-105.079],[134.841,87.72],[-26.28,85.24],[-29.641,-19.28],[-138.801,138.519],[-13.801,52.88]],"o":[[-138.801,138.561],[-51.76,-33.681],[12.8,50],[134.841,87.72],[58.919,-58.84],[22.359,77.521]],"v":[[288.843,81.934],[-325.119,146.815],[-394.678,-80.826],[-325.119,32.374],[288.843,-32.505],[394.722,-201.826]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.749019622803,0.525490224361,0.470588237047,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[652.242,441.473],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 2","np":4,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-78.184,-50.863],[-138.784,138.529],[171.587,-17.056],[389.591,-120.829]],"o":[[134.838,87.72],[231.584,-231.162],[-166.418,16.541],[-172.934,53.634]],"v":[[-353.355,210.284],[260.62,145.417],[153.917,-280.948],[-319.27,-116.536]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.928911635455,0.76966827991,0.580090092678,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[680.467,378.004],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 3","np":4,"cix":2,"bm":0,"ix":3,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[30.561,20.532],[38.765,-9.458],[6.138,-10.369],[-104.556,38.528]],"o":[[-20.743,-13.937],[-69.587,16.978],[-17.383,29.366],[82.478,-30.392]],"v":[[60.681,-72.803],[-19.165,-61.314],[-164.718,-22.827],[99.623,48.212]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.450238485897,0.141227752087,0.342166885675,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":32,"ix":5},"lc":2,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[283.418,361.16],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 4","np":2,"cix":2,"bm":0,"ix":4,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[30.561,20.532],[38.765,-9.458],[6.138,-10.369],[-104.556,38.528]],"o":[[-20.743,-13.937],[-69.587,16.978],[-17.383,29.366],[82.478,-30.392]],"v":[[60.681,-72.803],[-19.165,-61.314],[-164.718,-22.827],[99.623,48.212]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[283.418,361.16],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 5","np":4,"cix":2,"bm":0,"ix":5,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[31.02,19.831],[38.54,-10.338],[5.9,-10.505],[-103.653,40.897]],"o":[[-21.055,-13.46],[-69.182,18.557],[-16.711,29.754],[81.764,-32.262]],"v":[[58.732,-73.768],[-20.833,-60.463],[-165.471,-18.674],[100.418,46.331]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.450238485897,0.141227752087,0.342166885675,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":32,"ix":5},"lc":2,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[262.182,461.593],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 6","np":2,"cix":2,"bm":0,"ix":6,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[5.9,-10.505],[-103.652,40.897]],"o":[[-69.182,18.558],[-16.711,29.754],[0,0]],"v":[[20.05,-73.846],[-124.589,-32.057],[141.3,32.948]],"c":false},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[221.3,474.974],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 7","np":4,"cix":2,"bm":0,"ix":7,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[31.134,19.653],[38.478,-10.559],[5.84,-10.538],[-103.416,41.492]],"o":[[-21.131,-13.339],[-69.076,18.954],[-16.54,29.85],[81.579,-32.729]],"v":[[58.235,-74.005],[-21.25,-60.245],[-165.648,-17.628],[100.609,45.852]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.450238485897,0.141227752087,0.342166885675,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":32,"ix":5},"lc":2,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[305.363,559.044],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 8","np":2,"cix":2,"bm":0,"ix":8,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[5.839,-10.538],[-103.416,41.491]],"o":[[-69.075,18.954],[-16.54,29.85],[0,0]],"v":[[19.539,-73.794],[-124.858,-31.177],[141.398,32.303]],"c":false},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[264.574,572.594],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 9","np":4,"cix":2,"bm":0,"ix":9,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-78.184,-50.863],[-138.784,138.529],[171.587,-17.056],[389.591,-120.829]],"o":[[134.838,87.72],[231.584,-231.162],[-166.418,16.541],[-172.934,53.634]],"v":[[-353.355,210.284],[260.62,145.417],[153.917,-280.948],[-319.27,-116.536]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.836017922794,0.65023354923,0.524163579006,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 2","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"fl","c":{"a":0,"k":[0.836017922794,0.65023354923,0.524163579006,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[680.467,378.004],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 10","np":5,"cix":2,"bm":0,"ix":10,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":150,"st":0,"bm":0},{"ddd":0,"ind":16,"ty":4,"nm":"L Leg","parent":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[-752.42,795.834,0],"ix":2},"a":{"a":0,"k":[245.383,251.02,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[78.183,-50.863],[138.783,138.529],[-171.587,-17.056],[-389.591,-120.829]],"o":[[-134.838,87.72],[-231.584,-231.162],[166.417,16.541],[172.933,53.634]],"v":[[353.356,210.284],[-260.619,145.417],[-153.917,-280.948],[319.271,-116.536]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.450238485897,0.141227752087,0.342166885675,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":32,"ix":5},"lc":2,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[572.203,378.004],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[51.52,-33.521],[138.8,138.561],[-21.8,77.36],[-59.4,-59.279],[-134.84,87.721],[-12.64,50.6]],"o":[[-134.84,87.72],[-104.72,-104.519],[13.56,53.28],[138.8,138.521],[29.92,-19.439],[25.52,85.081]],"v":[[325.107,146.195],[-288.853,81.314],[-395.053,-201.205],[-288.853,-30.566],[325.107,34.274],[395.027,-80.326]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.749019622803,0.525490224361,0.47058826685,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[600.438,442.093],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 2","np":4,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[78.201,-50.881],[138.8,138.561],[-87,73.601],[-55,-5.481],[-199,-73.519],[-70.24,-21.8]],"o":[[-134.84,87.72],[-157.36,-157.079],[41.04,-34.72],[136.4,13.559],[43.76,16.201],[172.96,53.601]],"v":[[316.22,204.5],[-297.74,139.62],[-341.58,-239.38],[-191.02,-286.739],[113.3,-179.02],[282.14,-122.3]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.928911635455,0.76966827991,0.580090092678,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[609.324,383.787],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 3","np":4,"cix":2,"bm":0,"ix":3,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[78.183,-50.863],[138.783,138.529],[-171.587,-17.056],[-389.591,-120.829]],"o":[[-134.838,87.72],[-231.584,-231.162],[166.417,16.541],[172.933,53.634]],"v":[[353.356,210.284],[-260.619,145.417],[-153.917,-280.948],[319.271,-116.536]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.836017922794,0.65023354923,0.524163579006,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 2","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"fl","c":{"a":0,"k":[0.836017922794,0.65023354923,0.524163579006,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[572.203,378.004],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 4","np":5,"cix":2,"bm":0,"ix":4,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-30.561,20.532],[-38.764,-9.458],[-6.137,-10.369],[104.557,38.528]],"o":[[20.742,-13.937],[69.587,16.978],[17.383,29.366],[-82.477,-30.392]],"v":[[-60.68,-72.803],[19.164,-61.314],[164.717,-22.827],[-99.624,48.212]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.450238485897,0.141227752087,0.342166885675,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":32,"ix":5},"lc":2,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[969.253,361.16],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 5","np":2,"cix":2,"bm":0,"ix":5,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-30.561,20.532],[-38.764,-9.458],[-6.137,-10.369],[104.557,38.528]],"o":[[20.742,-13.937],[69.587,16.978],[17.383,29.366],[-82.477,-30.392]],"v":[[-60.68,-72.803],[19.164,-61.314],[164.717,-22.827],[-99.624,48.212]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[969.253,361.16],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 6","np":4,"cix":2,"bm":0,"ix":6,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-31.021,19.831],[-38.539,-10.338],[-5.9,-10.505],[103.653,40.897]],"o":[[21.054,-13.46],[69.182,18.557],[16.711,29.754],[-81.765,-32.262]],"v":[[-58.73,-73.768],[20.833,-60.463],[165.471,-18.674],[-100.417,46.331]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.450238485897,0.141227752087,0.342166885675,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":32,"ix":5},"lc":2,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[990.488,461.593],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 7","np":2,"cix":2,"bm":0,"ix":7,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[-5.901,-10.505],[103.652,40.897]],"o":[[69.182,18.558],[16.711,29.754],[0,0]],"v":[[-20.05,-73.846],[124.589,-32.057],[-141.3,32.948]],"c":false},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[1031.371,474.974],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 8","np":4,"cix":2,"bm":0,"ix":8,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-31.134,19.653],[-38.479,-10.559],[-5.839,-10.538],[103.417,41.492]],"o":[[21.131,-13.339],[69.075,18.954],[16.54,29.85],[-81.578,-32.729]],"v":[[-58.234,-74.005],[21.251,-60.245],[165.647,-17.628],[-100.609,45.852]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.450238485897,0.141227752087,0.342166885675,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":32,"ix":5},"lc":2,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[947.307,559.044],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 9","np":2,"cix":2,"bm":0,"ix":9,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[-5.839,-10.538],[103.417,41.491]],"o":[[69.075,18.954],[16.54,29.85],[0,0]],"v":[[-19.538,-73.794],[124.859,-31.177],[-141.398,32.303]],"c":false},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[988.096,572.594],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 10","np":4,"cix":2,"bm":0,"ix":10,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":150,"st":0,"bm":0},{"ddd":0,"ind":17,"ty":4,"nm":"Body","parent":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[-13.626,989.579,0],"ix":2},"a":{"a":0,"k":[743.795,1035.478,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-0.08,0.199],[0,0]],"o":[[0,0],[0.16,-0.48]],"v":[[0.16,-0.519],[-0.16,0.521]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.450238485897,0.141227752087,0.342166885675,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[322.381,367.44],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":4,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[2.56,-6.56],[-0.72,2.199],[0,0]],"o":[[2.56,-7.119],[0,0],[0,0]],"v":[[-2.44,7.1],[2.44,-7.099],[1.24,-3.059]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.450238485897,0.141227752087,0.342166885675,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[319.781,375.061],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 2","np":4,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[180.965,-80.688],[0,0],[255.244,115.333],[0,0],[-44.518,192.121],[-29.813,77.729],[0,0],[0,0],[-44.881,-120.907],[-22.895,-98.322]],"o":[[0,0],[-255.814,114.064],[0,0],[-179.717,-81.206],[25.429,-109.746],[41.217,-107.387],[0,0],[0,0],[27.241,73.32],[44.936,192.976]],"v":[[403.586,406.761],[397.637,409.415],[-405.792,407.417],[-405.792,407.417],[-639.277,-62.635],[-550.961,-348.948],[-474.787,-523.479],[474.772,-523.479],[559.721,-325.665],[638.859,-64.526]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.450238485897,0.141227752087,0.342166885675,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":32,"ix":5},"lc":2,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[763.795,603.479],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 3","np":2,"cix":2,"bm":0,"ix":3,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-1.561,-0.601],[14.64,-40.239],[105.84,-47.161],[0,0],[128.44,-3.04],[7.28,16.04],[9.519,-12.12],[119.72,54.16],[36.721,103.64],[1.08,43.88],[-2.56,0.759],[0,2.56],[-7.201,31.04],[-29.841,77.72],[-12.88,28.799],[-0.96,2.16],[-4.519,9.04],[0,0],[0,0],[0,0],[0,0],[99.92,-153.24],[1.44,-2.081],[-352.16,-109.24],[-17.439,-28.72],[-42.721,13.24],[-125.44,17.16],[1.08,1.64],[0,0],[0,0],[0,0],[0,0],[-2.56,-5.16],[-10.48,-23.08],[-1.041,-2.28],[-17.161,-44.68],[-25.44,-109.761],[0,-30.76],[0.08,-3.36],[0.039,-0.4]],"o":[[-1.521,43.56],[-37.44,102.841],[0,0],[-119.961,53.52],[-9.521,-12.16],[-7.279,16],[-128.481,-3.64],[-106,-47.88],[-14.439,-40.6],[2.521,-0.84],[-0.04,-2.56],[0,-30.76],[25.439,-109.761],[17.159,-44.68],[1.04,-2.28],[10.48,-23.08],[2.561,-5.16],[0,0],[0,0],[0,0],[0,0],[-1.359,2.12],[113.16,17.52],[42.72,13.24],[17.4,-28.72],[362.16,-112.32],[-1.121,-1.6],[-99.92,-153.24],[0,0],[0,0],[0,0],[0,0],[4.52,9.04],[0.959,2.16],[12.879,28.799],[29.839,77.72],[7.2,31.04],[0,3.359],[0,0.4],[1.56,0.56]],"v":[[649.56,57.86],[624.96,184.259],[403.8,421.42],[397.88,424.06],[21.52,508.82],[-3.96,466.06],[-29.399,508.7],[-405.56,422.06],[-625.96,182.42],[-649.56,54.98],[-641.92,52.58],[-642,44.94],[-631.359,-47.98],[-543.039,-334.3],[-496.92,-445.54],[-493.92,-452.18],[-470.84,-500.94],[-466.88,-508.82],[-429.96,-508.82],[-429.88,-505.26],[-425.64,-319.22],[-519.88,44.1],[-524.08,50.42],[-92.6,209.74],[-3.96,275.22],[84.64,209.74],[526.16,48.98],[522.919,44.1],[428.68,-319.22],[432.919,-505.26],[432.999,-508.82],[469.919,-508.82],[473.88,-500.94],[496.96,-452.18],[499.96,-445.54],[546.08,-334.3],[634.4,-47.98],[645.039,44.94],[644.919,54.98],[644.88,56.14]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.749019622803,0.525490224361,0.47058826685,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[755.901,588.821],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 4","np":4,"cix":2,"bm":0,"ix":4,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[1.28,-35.521],[1.361,-11.28],[10.8,-29.639],[105.84,-47.161],[0,0],[128.44,-3.04],[17,0.48],[119.72,54.16],[36.72,103.64],[2.72,10.36],[2.319,20.4],[0.281,12.279],[0,3.359],[-7.2,31.04],[-29.841,77.72],[-12.88,28.799],[-0.96,2.16],[-4.519,9.04],[0,0],[0,0],[-2.88,-5.84],[-11.279,-25.121],[-1.04,-2.28],[-19.28,-51.96],[-22.88,-98.32]],"o":[[-0.4,11.479],[-3.76,31.64],[-37.44,102.841],[0,0],[-119.96,53.52],[-16.96,0.4],[-128.48,-3.64],[-106,-47.88],[-3.601,-10.081],[-5.36,-19.64],[-1.4,-12.12],[-0.08,-3.36],[0,-30.76],[25.439,-109.761],[17.159,-44.68],[1.04,-2.28],[10.481,-23.08],[2.561,-5.16],[0,0],[0,0],[4.96,10],[0.96,2.16],[14.721,33.12],[27.241,73.319],[8.399,36]],"v":[[648.98,57.66],[646.34,91.82],[624.38,184.059],[403.22,421.22],[397.3,423.86],[20.94,508.62],[-29.979,508.5],[-406.14,421.86],[-626.539,182.22],[-636.06,151.5],[-647.579,91.38],[-650.14,54.78],[-650.26,44.74],[-639.619,-48.18],[-551.299,-334.5],[-505.18,-445.74],[-502.18,-452.38],[-479.1,-501.14],[-475.14,-509.02],[474.42,-509.02],[478.9,-500.14],[503.98,-446.78],[506.98,-440.14],[559.38,-311.22],[638.501,-50.06]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.928911635455,0.76966827991,0.580090092678,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[764.161,589.021],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 5","np":4,"cix":2,"bm":0,"ix":5,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":150,"st":0,"bm":0},{"ddd":0,"ind":18,"ty":4,"nm":"Outer shadow","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[2000,3536.535,0],"ix":2},"a":{"a":0,"k":[850.85,75.075,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":30,"s":[20,20,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":61,"s":[90,90,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":91,"s":[100,100,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":120,"s":[90,90,100]},{"t":149,"s":[100,100,100]}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-41.463],[469.912,0],[0,41.463],[-469.911,0]],"o":[[0,41.463],[-469.911,0],[0,-41.463],[469.912,0]],"v":[[850.85,0],[0,75.075],[-850.85,0],[0,-75.075]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.705882370472,0.696993052959,0.694809734821,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[850.85,75.075],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":4,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":150,"st":0,"bm":0}]}]'),layers$1=[{ddd:0,ind:1,ty:0,nm:"Cute sloth yoga",refId:"comp_0",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[247.778,224.847,0],ix:2},a:{a:0,k:[2e3,2e3,0],ix:1},s:{a:0,k:[12,12,100],ix:6}},ao:0,w:4e3,h:4e3,ip:0,op:150,st:0,bm:0}],markers=[],slothAnimation={v:v$1,meta,fr:fr$1,ip:ip$1,op:op$1,w:w$1,h:h$1,nm:nm$1,ddd:ddd$1,assets:assets$1,layers:layers$1,markers},actions={suggest_topics:{description:"建議主題",params:{suggestions:{type:"array",items:{type:"string"},required:!0,description:"建議的主題列表"}}},suggest_steps:{description:"建議步驟",params:{suggestions:{type:"array",items:{type:"string"},required:!0,description:"建議的步驟列表"}}},suggest_tasks:{description:"建議任務",params:{suggestions:{type:"array",items:{type:"object",properties:{task_name:{type:"string",description:"任務名稱"},step_id:{type:"string",description:"步驟的唯一識別碼"}},required:["task_name","step_id"]},required:!0,description:"建議的任務列表，每個任務必須指定所屬步驟的 ID"}}},use_template_steps:{description:"建立觀察/行動/紀錄/分享",params:{}},chat:{description:"與孩子聊天",params:{}}},actions$1={actions};function parseJsonMarkdown(t,e=parsePartialJson){t=t.trim();const r=t.indexOf("```");if(r===-1)return e(t);let n=t.substring(r+3);n.startsWith(`json
`)?n=n.substring(5):n.startsWith("json")?n=n.substring(4):n.startsWith(`
`)&&(n=n.substring(1));const s=n.indexOf("```");let a=n;return s!==-1&&(a=n.substring(0,s)),e(a.trim())}function parsePartialJson(t){if(typeof t>"u")return null;try{return JSON.parse(t)}catch{}let e="";const r=[];let n=!1,s=!1;for(let a of t){if(n)a==='"'&&!s?n=!1:a===`
`&&!s?a="\\n":a==="\\"?s=!s:s=!1;else if(a==='"')n=!0,s=!1;else if(a==="{")r.push("}");else if(a==="[")r.push("]");else if(a==="}"||a==="]")if(r&&r[r.length-1]===a)r.pop();else return null;e+=a}n&&(e+='"');for(let a=r.length-1;a>=0;a-=1)e+=r[a];try{return JSON.parse(e)}catch{return null}}var decamelize,hasRequiredDecamelize;function requireDecamelize(){return hasRequiredDecamelize||(hasRequiredDecamelize=1,decamelize=function(t,e){if(typeof t!="string")throw new TypeError("Expected a string");return e=typeof e>"u"?"_":e,t.replace(/([a-z\d])([A-Z])/g,"$1"+e+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+e+"$2").toLowerCase()}),decamelize}var decamelizeExports=requireDecamelize();const snakeCase=getDefaultExportFromCjs(decamelizeExports);var camelcase={exports:{}},hasRequiredCamelcase;function requireCamelcase(){if(hasRequiredCamelcase)return camelcase.exports;hasRequiredCamelcase=1;const t=/[\p{Lu}]/u,e=/[\p{Ll}]/u,r=/^[\p{Lu}](?![\p{Lu}])/gu,n=/([\p{Alpha}\p{N}_]|$)/u,s=/[_.\- ]+/,a=new RegExp("^"+s.source),o=new RegExp(s.source+n.source,"gu"),l=new RegExp("\\d+"+n.source,"gu"),c=(y,x,E)=>{let S=!1,k=!1,C=!1;for(let P=0;P<y.length;P++){const R=y[P];S&&t.test(R)?(y=y.slice(0,P)+"-"+y.slice(P),S=!1,C=k,k=!0,P++):k&&C&&e.test(R)?(y=y.slice(0,P-1)+"-"+y.slice(P-1),C=k,k=!1,S=!0):(S=x(R)===R&&E(R)!==R,C=k,k=E(R)===R&&x(R)!==R)}return y},d=(y,x)=>(r.lastIndex=0,y.replace(r,E=>x(E))),p=(y,x)=>(o.lastIndex=0,l.lastIndex=0,y.replace(o,(E,S)=>x(S)).replace(l,E=>x(E))),g=(y,x)=>{if(!(typeof y=="string"||Array.isArray(y)))throw new TypeError("Expected the input to be `string | string[]`");if(x={pascalCase:!1,preserveConsecutiveUppercase:!1,...x},Array.isArray(y)?y=y.map(C=>C.trim()).filter(C=>C.length).join("-"):y=y.trim(),y.length===0)return"";const E=x.locale===!1?C=>C.toLowerCase():C=>C.toLocaleLowerCase(x.locale),S=x.locale===!1?C=>C.toUpperCase():C=>C.toLocaleUpperCase(x.locale);return y.length===1?x.pascalCase?S(y):E(y):(y!==E(y)&&(y=c(y,E,S)),y=y.replace(a,""),x.preserveConsecutiveUppercase?y=d(y,E):y=E(y),x.pascalCase&&(y=S(y.charAt(0))+y.slice(1)),p(y,S))};return camelcase.exports=g,camelcase.exports.default=g,camelcase.exports}requireCamelcase();function keyToJson(t,e){return(e==null?void 0:e[t])||snakeCase(t)}function mapKeys(t,e,r){const n={};for(const s in t)Object.hasOwn(t,s)&&(n[e(s,r)]=t[s]);return n}function shallowCopy(t){return Array.isArray(t)?[...t]:{...t}}function replaceSecrets(t,e){const r=shallowCopy(t);for(const[n,s]of Object.entries(e)){const[a,...o]=n.split(".").reverse();let l=r;for(const c of o.reverse()){if(l[c]===void 0)break;l[c]=shallowCopy(l[c]),l=l[c]}l[a]!==void 0&&(l[a]={lc:1,type:"secret",id:[s]})}return r}function get_lc_unique_name(t){const e=Object.getPrototypeOf(t);return typeof t.lc_name=="function"&&(typeof e.lc_name!="function"||t.lc_name()!==e.lc_name())?t.lc_name():t.name}class Serializable{static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,get_lc_unique_name(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}constructor(e,...r){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_serializable_keys!==void 0?this.lc_kwargs=Object.fromEntries(Object.entries(e||{}).filter(([n])=>{var s;return(s=this.lc_serializable_keys)==null?void 0:s.includes(n)})):this.lc_kwargs=e??{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof Serializable||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();const e={},r={},n=Object.keys(this.lc_kwargs).reduce((s,a)=>(s[a]=a in this?this[a]:this.lc_kwargs[a],s),{});for(let s=Object.getPrototypeOf(this);s;s=Object.getPrototypeOf(s))Object.assign(e,Reflect.get(s,"lc_aliases",this)),Object.assign(r,Reflect.get(s,"lc_secrets",this)),Object.assign(n,Reflect.get(s,"lc_attributes",this));return Object.keys(r).forEach(s=>{let a=this,o=n;const[l,...c]=s.split(".").reverse();for(const d of c.reverse()){if(!(d in a)||a[d]===void 0)return;(!(d in o)||o[d]===void 0)&&(typeof a[d]=="object"&&a[d]!=null?o[d]={}:Array.isArray(a[d])&&(o[d]=[])),a=a[d],o=o[d]}l in a&&a[l]!==void 0&&(o[l]=o[l]||a[l])}),{lc:1,type:"constructor",id:this.lc_id,kwargs:mapKeys(Object.keys(r).length?replaceSecrets(n,r):n,keyToJson,e)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}}function isDataContentBlock(t){return typeof t=="object"&&t!==null&&"type"in t&&typeof t.type=="string"&&"source_type"in t&&(t.source_type==="url"||t.source_type==="base64"||t.source_type==="text"||t.source_type==="id")}function isURLContentBlock(t){return isDataContentBlock(t)&&t.source_type==="url"&&"url"in t&&typeof t.url=="string"}function isBase64ContentBlock(t){return isDataContentBlock(t)&&t.source_type==="base64"&&"data"in t&&typeof t.data=="string"}function convertToOpenAIImageBlock(t){if(isDataContentBlock(t)){if(t.source_type==="url")return{type:"image_url",image_url:{url:t.url}};if(t.source_type==="base64"){if(!t.mime_type)throw new Error("mime_type key is required for base64 data.");return{type:"image_url",image_url:{url:`data:${t.mime_type};base64,${t.data}`}}}}throw new Error("Unsupported source type. Only 'url' and 'base64' are supported.")}function parseMimeType(t){const e=t.split(";")[0].split("/");if(e.length!==2)throw new Error(`Invalid mime type: "${t}" - does not match type/subtype format.`);const r=e[0].trim(),n=e[1].trim();if(r===""||n==="")throw new Error(`Invalid mime type: "${t}" - type or subtype is empty.`);const s={};for(const a of t.split(";").slice(1)){const o=a.split("=");if(o.length!==2)throw new Error(`Invalid parameter syntax in mime type: "${t}".`);const l=o[0].trim(),c=o[1].trim();if(l==="")throw new Error(`Invalid parameter syntax in mime type: "${t}".`);s[l]=c}return{type:r,subtype:n,parameters:s}}function parseBase64DataUrl({dataUrl:t,asTypedArray:e=!1}){const r=t.match(/^data:(\w+\/\w+);base64,([A-Za-z0-9+/]+=*)$/);let n;if(r){n=r[1].toLowerCase();const s=e?Uint8Array.from(atob(r[2]),a=>a.charCodeAt(0)):r[2];return{mime_type:n,data:s}}}function convertToProviderContentBlock(t,e){if(t.type==="text"){if(!e.fromStandardTextBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardTextBlock\` method.`);return e.fromStandardTextBlock(t)}if(t.type==="image"){if(!e.fromStandardImageBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardImageBlock\` method.`);return e.fromStandardImageBlock(t)}if(t.type==="audio"){if(!e.fromStandardAudioBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardAudioBlock\` method.`);return e.fromStandardAudioBlock(t)}if(t.type==="file"){if(!e.fromStandardFileBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardFileBlock\` method.`);return e.fromStandardFileBlock(t)}throw new Error(`Unable to convert content block type '${t.type}' to provider-specific format: not recognized.`)}function mergeContent(t,e){return typeof t=="string"?t===""?e:typeof e=="string"?t+e:Array.isArray(e)&&e.some(r=>isDataContentBlock(r))?[{type:"text",source_type:"text",text:t},...e]:[{type:"text",text:t},...e]:Array.isArray(e)?_mergeLists(t,e)??[...t,...e]:e===""?t:Array.isArray(t)&&t.some(r=>isDataContentBlock(r))?[...t,{type:"file",source_type:"text",text:e}]:[...t,{type:"text",text:e}]}function _mergeStatus(t,e){return t==="error"||e==="error"?"error":"success"}function stringifyWithDepthLimit(t,e){function r(n,s){if(typeof n!="object"||n===null||n===void 0)return n;if(s>=e)return Array.isArray(n)?"[Array]":"[Object]";if(Array.isArray(n))return n.map(o=>r(o,s+1));const a={};for(const o of Object.keys(n))a[o]=r(n[o],s+1);return a}return JSON.stringify(r(t,0),null,2)}class BaseMessage extends Serializable{get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}get text(){return typeof this.content=="string"?this.content:Array.isArray(this.content)?this.content.map(e=>typeof e=="string"?e:e.type==="text"?e.text:"").join(""):""}getType(){return this._getType()}constructor(e,r){typeof e=="string"&&(e={content:e,additional_kwargs:r,response_metadata:{}}),e.additional_kwargs||(e.additional_kwargs={}),e.response_metadata||(e.response_metadata={}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","messages"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.content=e.content,this.additional_kwargs=e.additional_kwargs,this.response_metadata=e.response_metadata,this.id=e.id}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}static lc_name(){return"BaseMessage"}get _printableFields(){return{id:this.id,content:this.content,name:this.name,additional_kwargs:this.additional_kwargs,response_metadata:this.response_metadata}}_updateId(e){this.id=e,this.lc_kwargs.id=e}get[Symbol.toStringTag](){return this.constructor.lc_name()}[Symbol.for("nodejs.util.inspect.custom")](e){if(e===null)return this;const r=stringifyWithDepthLimit(this._printableFields,Math.max(4,e));return`${this.constructor.lc_name()} ${r}`}}function _mergeDicts(t,e){const r={...t};for(const[n,s]of Object.entries(e))if(r[n]==null)r[n]=s;else{if(s==null)continue;if(typeof r[n]!=typeof s||Array.isArray(r[n])!==Array.isArray(s))throw new Error(`field[${n}] already exists in the message chunk, but with a different type.`);if(typeof r[n]=="string"){if(n==="type")continue;r[n]+=s}else if(typeof r[n]=="object"&&!Array.isArray(r[n]))r[n]=_mergeDicts(r[n],s);else if(Array.isArray(r[n]))r[n]=_mergeLists(r[n],s);else{if(r[n]===s)continue;console.warn(`field[${n}] already exists in this message chunk and value has unsupported type.`)}}return r}function _mergeLists(t,e){if(!(t===void 0&&e===void 0)){if(t===void 0||e===void 0)return t||e;{const r=[...t];for(const n of e)if(typeof n=="object"&&"index"in n&&typeof n.index=="number"){const s=r.findIndex(a=>a.index===n.index);s!==-1?r[s]=_mergeDicts(r[s],n):r.push(n)}else{if(typeof n=="object"&&"text"in n&&n.text==="")continue;r.push(n)}return r}}}function _mergeObj(t,e){if(!t&&!e)throw new Error("Cannot merge two undefined objects.");if(!t||!e)return t||e;if(typeof t!=typeof e)throw new Error(`Cannot merge objects of different types.
Left ${typeof t}
Right ${typeof e}`);if(typeof t=="string"&&typeof e=="string")return t+e;if(Array.isArray(t)&&Array.isArray(e))return _mergeLists(t,e);if(typeof t=="object"&&typeof e=="object")return _mergeDicts(t,e);if(t===e)return t;throw new Error(`Can not merge objects of different types.
Left ${t}
Right ${e}`)}class BaseMessageChunk extends BaseMessage{}function _isMessageFieldWithRole(t){return typeof t.role=="string"}function isBaseMessage(t){return typeof(t==null?void 0:t._getType)=="function"}function isBaseMessageChunk(t){return isBaseMessage(t)&&typeof t.concat=="function"}class ToolMessage extends BaseMessage{static lc_name(){return"ToolMessage"}get lc_aliases(){return{tool_call_id:"tool_call_id"}}constructor(e,r,n){typeof e=="string"&&(e={content:e,name:n,tool_call_id:r}),super(e),Object.defineProperty(this,"lc_direct_tool_output",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"artifact",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}_getType(){return"tool"}static isInstance(e){return e._getType()==="tool"}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}}class ToolMessageChunk extends BaseMessageChunk{constructor(e){super(e),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"artifact",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}static lc_name(){return"ToolMessageChunk"}_getType(){return"tool"}concat(e){return new ToolMessageChunk({content:mergeContent(this.content,e.content),additional_kwargs:_mergeDicts(this.additional_kwargs,e.additional_kwargs),response_metadata:_mergeDicts(this.response_metadata,e.response_metadata),artifact:_mergeObj(this.artifact,e.artifact),tool_call_id:this.tool_call_id,id:this.id??e.id,status:_mergeStatus(this.status,e.status)})}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}}function defaultToolCallParser(t){const e=[],r=[];for(const n of t)if(n.function){const s=n.function.name;try{const a=JSON.parse(n.function.arguments),o={name:s||"",args:a||{},id:n.id};e.push(o)}catch{r.push({name:s,args:n.function.arguments,id:n.id,error:"Malformed args."})}}else continue;return[e,r]}class AIMessage extends BaseMessage{get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls"}}constructor(e,r){var s;let n;if(typeof e=="string")n={content:e,tool_calls:[],invalid_tool_calls:[],additional_kwargs:r??{}};else{n=e;const a=(s=n.additional_kwargs)==null?void 0:s.tool_calls,o=n.tool_calls;a!=null&&a.length>0&&(o===void 0||o.length===0)&&console.warn(["New LangChain packages are available that more efficiently handle",`tool calling.

Please upgrade your packages to versions that set`,"message tool calls. e.g., `yarn add @langchain/anthropic`,","yarn add @langchain/openai`, etc."].join(" "));try{if(a!=null&&o===void 0){const[l,c]=defaultToolCallParser(a);n.tool_calls=l??[],n.invalid_tool_calls=c??[]}else n.tool_calls=n.tool_calls??[],n.invalid_tool_calls=n.invalid_tool_calls??[]}catch{n.tool_calls=[],n.invalid_tool_calls=[]}}super(n),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof n!="string"&&(this.tool_calls=n.tool_calls??this.tool_calls,this.invalid_tool_calls=n.invalid_tool_calls??this.invalid_tool_calls),this.usage_metadata=n.usage_metadata}static lc_name(){return"AIMessage"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}}function isAIMessage(t){return t._getType()==="ai"}function isAIMessageChunk(t){return t._getType()==="ai"}class AIMessageChunk extends BaseMessageChunk{constructor(e){let r;if(typeof e=="string")r={content:e,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]};else if(e.tool_call_chunks===void 0)r={...e,tool_calls:e.tool_calls??[],invalid_tool_calls:[],tool_call_chunks:[],usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0};else{const n=[],s=[];for(const a of e.tool_call_chunks){let o={};try{if(o=parsePartialJson(a.args||"{}"),o===null||typeof o!="object"||Array.isArray(o))throw new Error("Malformed tool call chunk args.");n.push({name:a.name??"",args:o,id:a.id,type:"tool_call"})}catch{s.push({name:a.name,args:a.args,id:a.id,error:"Malformed args.",type:"invalid_tool_call"})}}r={...e,tool_calls:n,invalid_tool_calls:s,usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0}}super(r),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tool_call_chunks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_chunks=r.tool_call_chunks??this.tool_call_chunks,this.tool_calls=r.tool_calls??this.tool_calls,this.invalid_tool_calls=r.invalid_tool_calls??this.invalid_tool_calls,this.usage_metadata=r.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls",tool_call_chunks:"tool_call_chunks"}}static lc_name(){return"AIMessageChunk"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,tool_call_chunks:this.tool_call_chunks,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}concat(e){var n,s,a,o,l,c,d,p,g,y,x,E,S,k,C,P,R,j,I,O,L,B,Z,te,ie,Q,fe,se,Y,G,q,N,$,V,z,ne,pe,xe,Ce,ce;const r={content:mergeContent(this.content,e.content),additional_kwargs:_mergeDicts(this.additional_kwargs,e.additional_kwargs),response_metadata:_mergeDicts(this.response_metadata,e.response_metadata),tool_call_chunks:[],id:this.id??e.id};if(this.tool_call_chunks!==void 0||e.tool_call_chunks!==void 0){const Re=_mergeLists(this.tool_call_chunks,e.tool_call_chunks);Re!==void 0&&Re.length>0&&(r.tool_call_chunks=Re)}if(this.usage_metadata!==void 0||e.usage_metadata!==void 0){const Re={...(((s=(n=this.usage_metadata)==null?void 0:n.input_token_details)==null?void 0:s.audio)!==void 0||((o=(a=e.usage_metadata)==null?void 0:a.input_token_details)==null?void 0:o.audio)!==void 0)&&{audio:(((c=(l=this.usage_metadata)==null?void 0:l.input_token_details)==null?void 0:c.audio)??0)+(((p=(d=e.usage_metadata)==null?void 0:d.input_token_details)==null?void 0:p.audio)??0)},...(((y=(g=this.usage_metadata)==null?void 0:g.input_token_details)==null?void 0:y.cache_read)!==void 0||((E=(x=e.usage_metadata)==null?void 0:x.input_token_details)==null?void 0:E.cache_read)!==void 0)&&{cache_read:(((k=(S=this.usage_metadata)==null?void 0:S.input_token_details)==null?void 0:k.cache_read)??0)+(((P=(C=e.usage_metadata)==null?void 0:C.input_token_details)==null?void 0:P.cache_read)??0)},...(((j=(R=this.usage_metadata)==null?void 0:R.input_token_details)==null?void 0:j.cache_creation)!==void 0||((O=(I=e.usage_metadata)==null?void 0:I.input_token_details)==null?void 0:O.cache_creation)!==void 0)&&{cache_creation:(((B=(L=this.usage_metadata)==null?void 0:L.input_token_details)==null?void 0:B.cache_creation)??0)+(((te=(Z=e.usage_metadata)==null?void 0:Z.input_token_details)==null?void 0:te.cache_creation)??0)}},oe={...(((Q=(ie=this.usage_metadata)==null?void 0:ie.output_token_details)==null?void 0:Q.audio)!==void 0||((se=(fe=e.usage_metadata)==null?void 0:fe.output_token_details)==null?void 0:se.audio)!==void 0)&&{audio:(((G=(Y=this.usage_metadata)==null?void 0:Y.output_token_details)==null?void 0:G.audio)??0)+(((N=(q=e.usage_metadata)==null?void 0:q.output_token_details)==null?void 0:N.audio)??0)},...(((V=($=this.usage_metadata)==null?void 0:$.output_token_details)==null?void 0:V.reasoning)!==void 0||((ne=(z=e.usage_metadata)==null?void 0:z.output_token_details)==null?void 0:ne.reasoning)!==void 0)&&{reasoning:(((xe=(pe=this.usage_metadata)==null?void 0:pe.output_token_details)==null?void 0:xe.reasoning)??0)+(((ce=(Ce=e.usage_metadata)==null?void 0:Ce.output_token_details)==null?void 0:ce.reasoning)??0)}},Se=this.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},Ne=e.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},Fe={input_tokens:Se.input_tokens+Ne.input_tokens,output_tokens:Se.output_tokens+Ne.output_tokens,total_tokens:Se.total_tokens+Ne.total_tokens,...Object.keys(Re).length>0&&{input_token_details:Re},...Object.keys(oe).length>0&&{output_token_details:oe}};r.usage_metadata=Fe}return new AIMessageChunk(r)}}class ChatMessage extends BaseMessage{static lc_name(){return"ChatMessage"}static _chatMessageClass(){return ChatMessage}constructor(e,r){typeof e=="string"&&(e={content:e,role:r}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}static isInstance(e){return e._getType()==="generic"}get _printableFields(){return{...super._printableFields,role:this.role}}}class ChatMessageChunk extends BaseMessageChunk{static lc_name(){return"ChatMessageChunk"}constructor(e,r){typeof e=="string"&&(e={content:e,role:r}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}concat(e){return new ChatMessageChunk({content:mergeContent(this.content,e.content),additional_kwargs:_mergeDicts(this.additional_kwargs,e.additional_kwargs),response_metadata:_mergeDicts(this.response_metadata,e.response_metadata),role:this.role,id:this.id??e.id})}get _printableFields(){return{...super._printableFields,role:this.role}}}class FunctionMessageChunk extends BaseMessageChunk{static lc_name(){return"FunctionMessageChunk"}_getType(){return"function"}concat(e){return new FunctionMessageChunk({content:mergeContent(this.content,e.content),additional_kwargs:_mergeDicts(this.additional_kwargs,e.additional_kwargs),response_metadata:_mergeDicts(this.response_metadata,e.response_metadata),name:this.name??"",id:this.id??e.id})}}class HumanMessage extends BaseMessage{static lc_name(){return"HumanMessage"}_getType(){return"human"}constructor(e,r){super(e,r)}}class HumanMessageChunk extends BaseMessageChunk{static lc_name(){return"HumanMessageChunk"}_getType(){return"human"}constructor(e,r){super(e,r)}concat(e){return new HumanMessageChunk({content:mergeContent(this.content,e.content),additional_kwargs:_mergeDicts(this.additional_kwargs,e.additional_kwargs),response_metadata:_mergeDicts(this.response_metadata,e.response_metadata),id:this.id??e.id})}}class SystemMessage extends BaseMessage{static lc_name(){return"SystemMessage"}_getType(){return"system"}constructor(e,r){super(e,r)}}class SystemMessageChunk extends BaseMessageChunk{static lc_name(){return"SystemMessageChunk"}_getType(){return"system"}constructor(e,r){super(e,r)}concat(e){return new SystemMessageChunk({content:mergeContent(this.content,e.content),additional_kwargs:_mergeDicts(this.additional_kwargs,e.additional_kwargs),response_metadata:_mergeDicts(this.response_metadata,e.response_metadata),id:this.id??e.id})}}function addLangChainErrorFields$1(t,e){return t.lc_error_code=e,t.message=`${t.message}

Troubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${e}/
`,t}function _isToolCall(t){return!!(t&&typeof t=="object"&&"type"in t&&t.type==="tool_call")}class ToolInputParsingException extends Error{constructor(e,r){super(e),Object.defineProperty(this,"output",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.output=r}}function _coerceToolCall(t){return _isToolCall(t)?t:typeof t.id=="string"&&t.type==="function"&&typeof t.function=="object"&&t.function!==null&&"arguments"in t.function&&typeof t.function.arguments=="string"&&"name"in t.function&&typeof t.function.name=="string"?{id:t.id,args:JSON.parse(t.function.arguments),name:t.function.name,type:"tool_call"}:t}function isSerializedConstructor(t){return typeof t=="object"&&t!=null&&t.lc===1&&Array.isArray(t.id)&&t.kwargs!=null&&typeof t.kwargs=="object"}function _constructMessageFromParams(t){let e,r;if(isSerializedConstructor(t)){const n=t.id.at(-1);n==="HumanMessage"||n==="HumanMessageChunk"?e="user":n==="AIMessage"||n==="AIMessageChunk"?e="assistant":n==="SystemMessage"||n==="SystemMessageChunk"?e="system":n==="FunctionMessage"||n==="FunctionMessageChunk"?e="function":n==="ToolMessage"||n==="ToolMessageChunk"?e="tool":e="unknown",r=t.kwargs}else{const{type:n,...s}=t;e=n,r=s}if(e==="human"||e==="user")return new HumanMessage(r);if(e==="ai"||e==="assistant"){const{tool_calls:n,...s}=r;if(!Array.isArray(n))return new AIMessage(r);const a=n.map(_coerceToolCall);return new AIMessage({...s,tool_calls:a})}else{if(e==="system")return new SystemMessage(r);if(e==="developer")return new SystemMessage({...r,additional_kwargs:{...r.additional_kwargs,__openai_role__:"developer"}});if(e==="tool"&&"tool_call_id"in r)return new ToolMessage({...r,content:r.content,tool_call_id:r.tool_call_id,name:r.name});throw addLangChainErrorFields$1(new Error(`Unable to coerce message from array: only human, AI, system, developer, or tool message coercion is currently supported.

Received: ${JSON.stringify(t,null,2)}`),"MESSAGE_COERCION_FAILURE")}}function coerceMessageLikeToMessage(t){if(typeof t=="string")return new HumanMessage(t);if(isBaseMessage(t))return t;if(Array.isArray(t)){const[e,r]=t;return _constructMessageFromParams({type:e,content:r})}else if(_isMessageFieldWithRole(t)){const{role:e,...r}=t;return _constructMessageFromParams({...r,type:e})}else return _constructMessageFromParams(t)}function getBufferString(t,e="Human",r="AI"){const n=[];for(const s of t){let a;if(s._getType()==="human")a=e;else if(s._getType()==="ai")a=r;else if(s._getType()==="system")a="System";else if(s._getType()==="function")a="Function";else if(s._getType()==="tool")a="Tool";else if(s._getType()==="generic")a=s.role;else throw new Error(`Got unsupported message type: ${s._getType()}`);const o=s.name?`${s.name}, `:"",l=typeof s.content=="string"?s.content:JSON.stringify(s.content,null,2);n.push(`${a}: ${o}${l}`)}return n.join(`
`)}function convertToChunk(t){var r;const e=t._getType();if(e==="human")return new HumanMessageChunk({...t});if(e==="ai"){let n={...t};return"tool_calls"in n&&(n={...n,tool_call_chunks:(r=n.tool_calls)==null?void 0:r.map(s=>({...s,type:"tool_call_chunk",index:void 0,args:JSON.stringify(s.args)}))}),new AIMessageChunk({...n})}else{if(e==="system")return new SystemMessageChunk({...t});if(e==="function")return new FunctionMessageChunk({...t});if(ChatMessage.isInstance(t))return new ChatMessageChunk({...t});throw new Error("Unknown message type.")}}var util;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function r(s){throw new Error}t.assertNever=r,t.arrayToEnum=s=>{const a={};for(const o of s)a[o]=o;return a},t.getValidEnumValues=s=>{const a=t.objectKeys(s).filter(l=>typeof s[s[l]]!="number"),o={};for(const l of a)o[l]=s[l];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(a){return s[a]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const a=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&a.push(o);return a},t.find=(s,a)=>{for(const o of s)if(a(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function n(s,a=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}t.joinValues=n,t.jsonStringifyReplacer=(s,a)=>typeof a=="bigint"?a.toString():a})(util||(util={}));var objectUtil;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(objectUtil||(objectUtil={}));const ZodParsedType=util.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),getParsedType=t=>{switch(typeof t){case"undefined":return ZodParsedType.undefined;case"string":return ZodParsedType.string;case"number":return Number.isNaN(t)?ZodParsedType.nan:ZodParsedType.number;case"boolean":return ZodParsedType.boolean;case"function":return ZodParsedType.function;case"bigint":return ZodParsedType.bigint;case"symbol":return ZodParsedType.symbol;case"object":return Array.isArray(t)?ZodParsedType.array:t===null?ZodParsedType.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ZodParsedType.promise:typeof Map<"u"&&t instanceof Map?ZodParsedType.map:typeof Set<"u"&&t instanceof Set?ZodParsedType.set:typeof Date<"u"&&t instanceof Date?ZodParsedType.date:ZodParsedType.object;default:return ZodParsedType.unknown}},ZodIssueCode=util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ZodError extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){const r=e||function(a){return a.message},n={_errors:[]},s=a=>{for(const o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let l=n,c=0;for(;c<o.path.length;){const d=o.path[c];c===o.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(r(o))):l[d]=l[d]||{_errors:[]},l=l[d],c++}}};return s(this),n}static assert(e){if(!(e instanceof ZodError))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,util.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},n=[];for(const s of this.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(e(s))):n.push(e(s));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}ZodError.create=t=>new ZodError(t);const errorMap=(t,e)=>{let r;switch(t.code){case ZodIssueCode.invalid_type:t.received===ZodParsedType.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case ZodIssueCode.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,util.jsonStringifyReplacer)}`;break;case ZodIssueCode.unrecognized_keys:r=`Unrecognized key(s) in object: ${util.joinValues(t.keys,", ")}`;break;case ZodIssueCode.invalid_union:r="Invalid input";break;case ZodIssueCode.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${util.joinValues(t.options)}`;break;case ZodIssueCode.invalid_enum_value:r=`Invalid enum value. Expected ${util.joinValues(t.options)}, received '${t.received}'`;break;case ZodIssueCode.invalid_arguments:r="Invalid function arguments";break;case ZodIssueCode.invalid_return_type:r="Invalid function return type";break;case ZodIssueCode.invalid_date:r="Invalid date";break;case ZodIssueCode.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:util.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case ZodIssueCode.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case ZodIssueCode.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case ZodIssueCode.custom:r="Invalid input";break;case ZodIssueCode.invalid_intersection_types:r="Intersection results could not be merged";break;case ZodIssueCode.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case ZodIssueCode.not_finite:r="Number must be finite";break;default:r=e.defaultError,util.assertNever(t)}return{message:r}};let overrideErrorMap=errorMap;function getErrorMap(){return overrideErrorMap}const makeIssue=t=>{const{data:e,path:r,errorMaps:n,issueData:s}=t,a=[...r,...s.path||[]],o={...s,path:a};if(s.message!==void 0)return{...s,path:a,message:s.message};let l="";const c=n.filter(d=>!!d).slice().reverse();for(const d of c)l=d(o,{data:e,defaultError:l}).message;return{...s,path:a,message:l}};function addIssueToContext(t,e){const r=getErrorMap(),n=makeIssue({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===errorMap?void 0:errorMap].filter(s=>!!s)});t.common.issues.push(n)}class ParseStatus{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const s of r){if(s.status==="aborted")return INVALID;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){const n=[];for(const s of r){const a=await s.key,o=await s.value;n.push({key:a,value:o})}return ParseStatus.mergeObjectSync(e,n)}static mergeObjectSync(e,r){const n={};for(const s of r){const{key:a,value:o}=s;if(a.status==="aborted"||o.status==="aborted")return INVALID;a.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(n[a.value]=o.value)}return{status:e.value,value:n}}}const INVALID=Object.freeze({status:"aborted"}),DIRTY=t=>({status:"dirty",value:t}),OK=t=>({status:"valid",value:t}),isAborted=t=>t.status==="aborted",isDirty=t=>t.status==="dirty",isValid=t=>t.status==="valid",isAsync=t=>typeof Promise<"u"&&t instanceof Promise;var errorUtil;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(errorUtil||(errorUtil={}));var __classPrivateFieldGet$7=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},__classPrivateFieldSet$6=function(t,e,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r},_ZodEnum_cache,_ZodNativeEnum_cache;class ParseInputLazyPath{constructor(e,r,n,s){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const handleResult=(t,e)=>{if(isValid(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new ZodError(t.common.issues);return this._error=r,this._error}}};function processCreateParams(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:n,description:s}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,l)=>{const{message:c}=t;return o.code==="invalid_enum_value"?{message:c??l.defaultError}:typeof l.data>"u"?{message:c??n??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:c??r??l.defaultError}},description:s}}class ZodType{get description(){return this._def.description}_getType(e){return getParsedType(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:getParsedType(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ParseStatus,ctx:{common:e.parent.common,data:e.data,parsedType:getParsedType(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(isAsync(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){const n={common:{issues:[],async:(r==null?void 0:r.async)??!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:getParsedType(e)},s=this._parseSync({data:e,path:n.path,parent:n});return handleResult(n,s)}"~validate"(e){var n,s;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:getParsedType(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:r});return isValid(a)?{value:a.value}:{issues:r.common.issues}}catch(a){(s=(n=a==null?void 0:a.message)==null?void 0:n.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(a=>isValid(a)?{value:a.value}:{issues:r.common.issues})}async parseAsync(e,r){const n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:getParsedType(e)},s=this._parse({data:e,path:n.path,parent:n}),a=await(isAsync(s)?s:Promise.resolve(s));return handleResult(n,a)}refine(e,r){const n=s=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(s):r;return this._refinement((s,a)=>{const o=e(s),l=()=>a.addIssue({code:ZodIssueCode.custom,...n(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(e,r){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof r=="function"?r(n,s):r),!1))}_refinement(e){return new ZodEffects({schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return ZodOptional.create(this,this._def)}nullable(){return ZodNullable.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ZodArray.create(this)}promise(){return ZodPromise.create(this,this._def)}or(e){return ZodUnion.create([this,e],this._def)}and(e){return ZodIntersection.create(this,e,this._def)}transform(e){return new ZodEffects({...processCreateParams(this._def),schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new ZodDefault({...processCreateParams(this._def),innerType:this,defaultValue:r,typeName:ZodFirstPartyTypeKind.ZodDefault})}brand(){return new ZodBranded({typeName:ZodFirstPartyTypeKind.ZodBranded,type:this,...processCreateParams(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new ZodCatch({...processCreateParams(this._def),innerType:this,catchValue:r,typeName:ZodFirstPartyTypeKind.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return ZodPipeline.create(this,e)}readonly(){return ZodReadonly.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const cuidRegex=/^c[^\s-]{8,}$/i,cuid2Regex=/^[0-9a-z]+$/,ulidRegex=/^[0-9A-HJKMNP-TV-Z]{26}$/i,uuidRegex=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,nanoidRegex=/^[a-z0-9_-]{21}$/i,jwtRegex=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,durationRegex=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,emailRegex=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,_emojiRegex="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let emojiRegex$2;const ipv4Regex=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4CidrRegex=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6Regex=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,ipv6CidrRegex=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64Regex=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64urlRegex=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,dateRegexSource="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",dateRegex=new RegExp(`^${dateRegexSource}$`);function timeRegexSource(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const r=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${r}`}function timeRegex(t){return new RegExp(`^${timeRegexSource(t)}$`)}function datetimeRegex(t){let e=`${dateRegexSource}T${timeRegexSource(t)}`;const r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function isValidIP(t,e){return!!((e==="v4"||!e)&&ipv4Regex.test(t)||(e==="v6"||!e)&&ipv6Regex.test(t))}function isValidJWT(t,e){if(!jwtRegex.test(t))return!1;try{const[r]=t.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),s=JSON.parse(atob(n));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function isValidCidr(t,e){return!!((e==="v4"||!e)&&ipv4CidrRegex.test(t)||(e==="v6"||!e)&&ipv6CidrRegex.test(t))}class ZodString extends ZodType{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ZodParsedType.string){const a=this._getOrReturnCtx(e);return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.string,received:a.parsedType}),INVALID}const n=new ParseStatus;let s;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{code:ZodIssueCode.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="max")e.data.length>a.value&&(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{code:ZodIssueCode.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="length"){const o=e.data.length>a.value,l=e.data.length<a.value;(o||l)&&(s=this._getOrReturnCtx(e,s),o?addIssueToContext(s,{code:ZodIssueCode.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):l&&addIssueToContext(s,{code:ZodIssueCode.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),n.dirty())}else if(a.kind==="email")emailRegex.test(e.data)||(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{validation:"email",code:ZodIssueCode.invalid_string,message:a.message}),n.dirty());else if(a.kind==="emoji")emojiRegex$2||(emojiRegex$2=new RegExp(_emojiRegex,"u")),emojiRegex$2.test(e.data)||(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{validation:"emoji",code:ZodIssueCode.invalid_string,message:a.message}),n.dirty());else if(a.kind==="uuid")uuidRegex.test(e.data)||(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{validation:"uuid",code:ZodIssueCode.invalid_string,message:a.message}),n.dirty());else if(a.kind==="nanoid")nanoidRegex.test(e.data)||(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{validation:"nanoid",code:ZodIssueCode.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid")cuidRegex.test(e.data)||(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{validation:"cuid",code:ZodIssueCode.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid2")cuid2Regex.test(e.data)||(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{validation:"cuid2",code:ZodIssueCode.invalid_string,message:a.message}),n.dirty());else if(a.kind==="ulid")ulidRegex.test(e.data)||(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{validation:"ulid",code:ZodIssueCode.invalid_string,message:a.message}),n.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),addIssueToContext(s,{validation:"url",code:ZodIssueCode.invalid_string,message:a.message}),n.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{validation:"regex",code:ZodIssueCode.invalid_string,message:a.message}),n.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{code:ZodIssueCode.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),n.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{code:ZodIssueCode.invalid_string,validation:{startsWith:a.value},message:a.message}),n.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{code:ZodIssueCode.invalid_string,validation:{endsWith:a.value},message:a.message}),n.dirty()):a.kind==="datetime"?datetimeRegex(a).test(e.data)||(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{code:ZodIssueCode.invalid_string,validation:"datetime",message:a.message}),n.dirty()):a.kind==="date"?dateRegex.test(e.data)||(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{code:ZodIssueCode.invalid_string,validation:"date",message:a.message}),n.dirty()):a.kind==="time"?timeRegex(a).test(e.data)||(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{code:ZodIssueCode.invalid_string,validation:"time",message:a.message}),n.dirty()):a.kind==="duration"?durationRegex.test(e.data)||(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{validation:"duration",code:ZodIssueCode.invalid_string,message:a.message}),n.dirty()):a.kind==="ip"?isValidIP(e.data,a.version)||(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{validation:"ip",code:ZodIssueCode.invalid_string,message:a.message}),n.dirty()):a.kind==="jwt"?isValidJWT(e.data,a.alg)||(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{validation:"jwt",code:ZodIssueCode.invalid_string,message:a.message}),n.dirty()):a.kind==="cidr"?isValidCidr(e.data,a.version)||(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{validation:"cidr",code:ZodIssueCode.invalid_string,message:a.message}),n.dirty()):a.kind==="base64"?base64Regex.test(e.data)||(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{validation:"base64",code:ZodIssueCode.invalid_string,message:a.message}),n.dirty()):a.kind==="base64url"?base64urlRegex.test(e.data)||(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{validation:"base64url",code:ZodIssueCode.invalid_string,message:a.message}),n.dirty()):util.assertNever(a);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(s=>e.test(s),{validation:r,code:ZodIssueCode.invalid_string,...errorUtil.errToObj(n)})}_addCheck(e){return new ZodString({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...errorUtil.errToObj(e)})}url(e){return this._addCheck({kind:"url",...errorUtil.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...errorUtil.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...errorUtil.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...errorUtil.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...errorUtil.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...errorUtil.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...errorUtil.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...errorUtil.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...errorUtil.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...errorUtil.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...errorUtil.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...errorUtil.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...errorUtil.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...errorUtil.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...errorUtil.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...errorUtil.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r==null?void 0:r.position,...errorUtil.errToObj(r==null?void 0:r.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...errorUtil.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...errorUtil.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...errorUtil.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...errorUtil.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...errorUtil.errToObj(r)})}nonempty(e){return this.min(1,errorUtil.errToObj(e))}trim(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}ZodString.create=t=>new ZodString({checks:[],typeName:ZodFirstPartyTypeKind.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...processCreateParams(t)});function floatSafeRemainder(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=r>n?r:n,a=Number.parseInt(t.toFixed(s).replace(".","")),o=Number.parseInt(e.toFixed(s).replace(".",""));return a%o/10**s}class ZodNumber extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ZodParsedType.number){const a=this._getOrReturnCtx(e);return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.number,received:a.parsedType}),INVALID}let n;const s=new ParseStatus;for(const a of this._def.checks)a.kind==="int"?util.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:"integer",received:"float",message:a.message}),s.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),addIssueToContext(n,{code:ZodIssueCode.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),addIssueToContext(n,{code:ZodIssueCode.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="multipleOf"?floatSafeRemainder(e.data,a.value)!==0&&(n=this._getOrReturnCtx(e,n),addIssueToContext(n,{code:ZodIssueCode.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),addIssueToContext(n,{code:ZodIssueCode.not_finite,message:a.message}),s.dirty()):util.assertNever(a);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,errorUtil.toString(r))}gt(e,r){return this.setLimit("min",e,!1,errorUtil.toString(r))}lte(e,r){return this.setLimit("max",e,!0,errorUtil.toString(r))}lt(e,r){return this.setLimit("max",e,!1,errorUtil.toString(r))}setLimit(e,r,n,s){return new ZodNumber({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:errorUtil.toString(s)}]})}_addCheck(e){return new ZodNumber({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:errorUtil.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:errorUtil.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:errorUtil.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:errorUtil.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:errorUtil.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:errorUtil.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&util.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}}ZodNumber.create=t=>new ZodNumber({checks:[],typeName:ZodFirstPartyTypeKind.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...processCreateParams(t)});class ZodBigInt extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ZodParsedType.bigint)return this._getInvalidInput(e);let n;const s=new ParseStatus;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),addIssueToContext(n,{code:ZodIssueCode.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),addIssueToContext(n,{code:ZodIssueCode.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),addIssueToContext(n,{code:ZodIssueCode.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):util.assertNever(a);return{status:s.value,value:e.data}}_getInvalidInput(e){const r=this._getOrReturnCtx(e);return addIssueToContext(r,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.bigint,received:r.parsedType}),INVALID}gte(e,r){return this.setLimit("min",e,!0,errorUtil.toString(r))}gt(e,r){return this.setLimit("min",e,!1,errorUtil.toString(r))}lte(e,r){return this.setLimit("max",e,!0,errorUtil.toString(r))}lt(e,r){return this.setLimit("max",e,!1,errorUtil.toString(r))}setLimit(e,r,n,s){return new ZodBigInt({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:errorUtil.toString(s)}]})}_addCheck(e){return new ZodBigInt({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:errorUtil.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:errorUtil.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}ZodBigInt.create=t=>new ZodBigInt({checks:[],typeName:ZodFirstPartyTypeKind.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...processCreateParams(t)});class ZodBoolean extends ZodType{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ZodParsedType.boolean){const n=this._getOrReturnCtx(e);return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.boolean,received:n.parsedType}),INVALID}return OK(e.data)}}ZodBoolean.create=t=>new ZodBoolean({typeName:ZodFirstPartyTypeKind.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...processCreateParams(t)});class ZodDate extends ZodType{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ZodParsedType.date){const a=this._getOrReturnCtx(e);return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.date,received:a.parsedType}),INVALID}if(Number.isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return addIssueToContext(a,{code:ZodIssueCode.invalid_date}),INVALID}const n=new ParseStatus;let s;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{code:ZodIssueCode.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),n.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(s=this._getOrReturnCtx(e,s),addIssueToContext(s,{code:ZodIssueCode.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),n.dirty()):util.assertNever(a);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ZodDate({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:errorUtil.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:errorUtil.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}ZodDate.create=t=>new ZodDate({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:ZodFirstPartyTypeKind.ZodDate,...processCreateParams(t)});class ZodSymbol extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.symbol){const n=this._getOrReturnCtx(e);return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.symbol,received:n.parsedType}),INVALID}return OK(e.data)}}ZodSymbol.create=t=>new ZodSymbol({typeName:ZodFirstPartyTypeKind.ZodSymbol,...processCreateParams(t)});class ZodUndefined extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.undefined){const n=this._getOrReturnCtx(e);return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.undefined,received:n.parsedType}),INVALID}return OK(e.data)}}ZodUndefined.create=t=>new ZodUndefined({typeName:ZodFirstPartyTypeKind.ZodUndefined,...processCreateParams(t)});class ZodNull extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.null){const n=this._getOrReturnCtx(e);return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.null,received:n.parsedType}),INVALID}return OK(e.data)}}ZodNull.create=t=>new ZodNull({typeName:ZodFirstPartyTypeKind.ZodNull,...processCreateParams(t)});class ZodAny extends ZodType{constructor(){super(...arguments),this._any=!0}_parse(e){return OK(e.data)}}ZodAny.create=t=>new ZodAny({typeName:ZodFirstPartyTypeKind.ZodAny,...processCreateParams(t)});class ZodUnknown extends ZodType{constructor(){super(...arguments),this._unknown=!0}_parse(e){return OK(e.data)}}ZodUnknown.create=t=>new ZodUnknown({typeName:ZodFirstPartyTypeKind.ZodUnknown,...processCreateParams(t)});class ZodNever extends ZodType{_parse(e){const r=this._getOrReturnCtx(e);return addIssueToContext(r,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.never,received:r.parsedType}),INVALID}}ZodNever.create=t=>new ZodNever({typeName:ZodFirstPartyTypeKind.ZodNever,...processCreateParams(t)});class ZodVoid extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.undefined){const n=this._getOrReturnCtx(e);return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.void,received:n.parsedType}),INVALID}return OK(e.data)}}ZodVoid.create=t=>new ZodVoid({typeName:ZodFirstPartyTypeKind.ZodVoid,...processCreateParams(t)});class ZodArray extends ZodType{_parse(e){const{ctx:r,status:n}=this._processInputParams(e),s=this._def;if(r.parsedType!==ZodParsedType.array)return addIssueToContext(r,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:r.parsedType}),INVALID;if(s.exactLength!==null){const o=r.data.length>s.exactLength.value,l=r.data.length<s.exactLength.value;(o||l)&&(addIssueToContext(r,{code:o?ZodIssueCode.too_big:ZodIssueCode.too_small,minimum:l?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&r.data.length<s.minLength.value&&(addIssueToContext(r,{code:ZodIssueCode.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&r.data.length>s.maxLength.value&&(addIssueToContext(r,{code:ZodIssueCode.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,l)=>s.type._parseAsync(new ParseInputLazyPath(r,o,r.path,l)))).then(o=>ParseStatus.mergeArray(n,o));const a=[...r.data].map((o,l)=>s.type._parseSync(new ParseInputLazyPath(r,o,r.path,l)));return ParseStatus.mergeArray(n,a)}get element(){return this._def.type}min(e,r){return new ZodArray({...this._def,minLength:{value:e,message:errorUtil.toString(r)}})}max(e,r){return new ZodArray({...this._def,maxLength:{value:e,message:errorUtil.toString(r)}})}length(e,r){return new ZodArray({...this._def,exactLength:{value:e,message:errorUtil.toString(r)}})}nonempty(e){return this.min(1,e)}}ZodArray.create=(t,e)=>new ZodArray({type:t,minLength:null,maxLength:null,exactLength:null,typeName:ZodFirstPartyTypeKind.ZodArray,...processCreateParams(e)});function deepPartialify(t){if(t instanceof ZodObject){const e={};for(const r in t.shape){const n=t.shape[r];e[r]=ZodOptional.create(deepPartialify(n))}return new ZodObject({...t._def,shape:()=>e})}else return t instanceof ZodArray?new ZodArray({...t._def,type:deepPartialify(t.element)}):t instanceof ZodOptional?ZodOptional.create(deepPartialify(t.unwrap())):t instanceof ZodNullable?ZodNullable.create(deepPartialify(t.unwrap())):t instanceof ZodTuple?ZodTuple.create(t.items.map(e=>deepPartialify(e))):t}class ZodObject extends ZodType{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=util.objectKeys(e);return this._cached={shape:e,keys:r},this._cached}_parse(e){if(this._getType(e)!==ZodParsedType.object){const d=this._getOrReturnCtx(e);return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:d.parsedType}),INVALID}const{status:n,ctx:s}=this._processInputParams(e),{shape:a,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof ZodNever&&this._def.unknownKeys==="strip"))for(const d in s.data)o.includes(d)||l.push(d);const c=[];for(const d of o){const p=a[d],g=s.data[d];c.push({key:{status:"valid",value:d},value:p._parse(new ParseInputLazyPath(s,g,s.path,d)),alwaysSet:d in s.data})}if(this._def.catchall instanceof ZodNever){const d=this._def.unknownKeys;if(d==="passthrough")for(const p of l)c.push({key:{status:"valid",value:p},value:{status:"valid",value:s.data[p]}});else if(d==="strict")l.length>0&&(addIssueToContext(s,{code:ZodIssueCode.unrecognized_keys,keys:l}),n.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const p of l){const g=s.data[p];c.push({key:{status:"valid",value:p},value:d._parse(new ParseInputLazyPath(s,g,s.path,p)),alwaysSet:p in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const d=[];for(const p of c){const g=await p.key,y=await p.value;d.push({key:g,value:y,alwaysSet:p.alwaysSet})}return d}).then(d=>ParseStatus.mergeObjectSync(n,d)):ParseStatus.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(e){return errorUtil.errToObj,new ZodObject({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var a,o;const s=((o=(a=this._def).errorMap)==null?void 0:o.call(a,r,n).message)??n.defaultError;return r.code==="unrecognized_keys"?{message:errorUtil.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new ZodObject({...this._def,unknownKeys:"strip"})}passthrough(){return new ZodObject({...this._def,unknownKeys:"passthrough"})}extend(e){return new ZodObject({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ZodObject({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ZodFirstPartyTypeKind.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new ZodObject({...this._def,catchall:e})}pick(e){const r={};for(const n of util.objectKeys(e))e[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new ZodObject({...this._def,shape:()=>r})}omit(e){const r={};for(const n of util.objectKeys(this.shape))e[n]||(r[n]=this.shape[n]);return new ZodObject({...this._def,shape:()=>r})}deepPartial(){return deepPartialify(this)}partial(e){const r={};for(const n of util.objectKeys(this.shape)){const s=this.shape[n];e&&!e[n]?r[n]=s:r[n]=s.optional()}return new ZodObject({...this._def,shape:()=>r})}required(e){const r={};for(const n of util.objectKeys(this.shape))if(e&&!e[n])r[n]=this.shape[n];else{let a=this.shape[n];for(;a instanceof ZodOptional;)a=a._def.innerType;r[n]=a}return new ZodObject({...this._def,shape:()=>r})}keyof(){return createZodEnum(util.objectKeys(this.shape))}}ZodObject.create=(t,e)=>new ZodObject({shape:()=>t,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(e)});ZodObject.strictCreate=(t,e)=>new ZodObject({shape:()=>t,unknownKeys:"strict",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(e)});ZodObject.lazycreate=(t,e)=>new ZodObject({shape:t,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(e)});class ZodUnion extends ZodType{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.options;function s(a){for(const l of a)if(l.result.status==="valid")return l.result;for(const l of a)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;const o=a.map(l=>new ZodError(l.ctx.common.issues));return addIssueToContext(r,{code:ZodIssueCode.invalid_union,unionErrors:o}),INVALID}if(r.common.async)return Promise.all(n.map(async a=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await a._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(s);{let a;const o=[];for(const c of n){const d={...r,common:{...r.common,issues:[]},parent:null},p=c._parseSync({data:r.data,path:r.path,parent:d});if(p.status==="valid")return p;p.status==="dirty"&&!a&&(a={result:p,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(a)return r.common.issues.push(...a.ctx.common.issues),a.result;const l=o.map(c=>new ZodError(c));return addIssueToContext(r,{code:ZodIssueCode.invalid_union,unionErrors:l}),INVALID}}get options(){return this._def.options}}ZodUnion.create=(t,e)=>new ZodUnion({options:t,typeName:ZodFirstPartyTypeKind.ZodUnion,...processCreateParams(e)});function mergeValues(t,e){const r=getParsedType(t),n=getParsedType(e);if(t===e)return{valid:!0,data:t};if(r===ZodParsedType.object&&n===ZodParsedType.object){const s=util.objectKeys(e),a=util.objectKeys(t).filter(l=>s.indexOf(l)!==-1),o={...t,...e};for(const l of a){const c=mergeValues(t[l],e[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(r===ZodParsedType.array&&n===ZodParsedType.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let a=0;a<t.length;a++){const o=t[a],l=e[a],c=mergeValues(o,l);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return r===ZodParsedType.date&&n===ZodParsedType.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class ZodIntersection extends ZodType{_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=(a,o)=>{if(isAborted(a)||isAborted(o))return INVALID;const l=mergeValues(a.value,o.value);return l.valid?((isDirty(a)||isDirty(o))&&r.dirty(),{status:r.value,value:l.data}):(addIssueToContext(n,{code:ZodIssueCode.invalid_intersection_types}),INVALID)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([a,o])=>s(a,o)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}ZodIntersection.create=(t,e,r)=>new ZodIntersection({left:t,right:e,typeName:ZodFirstPartyTypeKind.ZodIntersection,...processCreateParams(r)});class ZodTuple extends ZodType{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ZodParsedType.array)return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:n.parsedType}),INVALID;if(n.data.length<this._def.items.length)return addIssueToContext(n,{code:ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),INVALID;!this._def.rest&&n.data.length>this._def.items.length&&(addIssueToContext(n,{code:ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const a=[...n.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new ParseInputLazyPath(n,o,n.path,l)):null}).filter(o=>!!o);return n.common.async?Promise.all(a).then(o=>ParseStatus.mergeArray(r,o)):ParseStatus.mergeArray(r,a)}get items(){return this._def.items}rest(e){return new ZodTuple({...this._def,rest:e})}}ZodTuple.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ZodTuple({items:t,typeName:ZodFirstPartyTypeKind.ZodTuple,rest:null,...processCreateParams(e)})};class ZodMap extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ZodParsedType.map)return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.map,received:n.parsedType}),INVALID;const s=this._def.keyType,a=this._def.valueType,o=[...n.data.entries()].map(([l,c],d)=>({key:s._parse(new ParseInputLazyPath(n,l,n.path,[d,"key"])),value:a._parse(new ParseInputLazyPath(n,c,n.path,[d,"value"]))}));if(n.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const d=await c.key,p=await c.value;if(d.status==="aborted"||p.status==="aborted")return INVALID;(d.status==="dirty"||p.status==="dirty")&&r.dirty(),l.set(d.value,p.value)}return{status:r.value,value:l}})}else{const l=new Map;for(const c of o){const d=c.key,p=c.value;if(d.status==="aborted"||p.status==="aborted")return INVALID;(d.status==="dirty"||p.status==="dirty")&&r.dirty(),l.set(d.value,p.value)}return{status:r.value,value:l}}}}ZodMap.create=(t,e,r)=>new ZodMap({valueType:e,keyType:t,typeName:ZodFirstPartyTypeKind.ZodMap,...processCreateParams(r)});class ZodSet extends ZodType{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ZodParsedType.set)return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.set,received:n.parsedType}),INVALID;const s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(addIssueToContext(n,{code:ZodIssueCode.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),r.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(addIssueToContext(n,{code:ZodIssueCode.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),r.dirty());const a=this._def.valueType;function o(c){const d=new Set;for(const p of c){if(p.status==="aborted")return INVALID;p.status==="dirty"&&r.dirty(),d.add(p.value)}return{status:r.value,value:d}}const l=[...n.data.values()].map((c,d)=>a._parse(new ParseInputLazyPath(n,c,n.path,d)));return n.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(e,r){return new ZodSet({...this._def,minSize:{value:e,message:errorUtil.toString(r)}})}max(e,r){return new ZodSet({...this._def,maxSize:{value:e,message:errorUtil.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}ZodSet.create=(t,e)=>new ZodSet({valueType:t,minSize:null,maxSize:null,typeName:ZodFirstPartyTypeKind.ZodSet,...processCreateParams(e)});class ZodLazy extends ZodType{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}ZodLazy.create=(t,e)=>new ZodLazy({getter:t,typeName:ZodFirstPartyTypeKind.ZodLazy,...processCreateParams(e)});class ZodLiteral extends ZodType{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return addIssueToContext(r,{received:r.data,code:ZodIssueCode.invalid_literal,expected:this._def.value}),INVALID}return{status:"valid",value:e.data}}get value(){return this._def.value}}ZodLiteral.create=(t,e)=>new ZodLiteral({value:t,typeName:ZodFirstPartyTypeKind.ZodLiteral,...processCreateParams(e)});function createZodEnum(t,e){return new ZodEnum({values:t,typeName:ZodFirstPartyTypeKind.ZodEnum,...processCreateParams(e)})}class ZodEnum extends ZodType{constructor(){super(...arguments),_ZodEnum_cache.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),n=this._def.values;return addIssueToContext(r,{expected:util.joinValues(n),received:r.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(__classPrivateFieldGet$7(this,_ZodEnum_cache,"f")||__classPrivateFieldSet$6(this,_ZodEnum_cache,new Set(this._def.values),"f"),!__classPrivateFieldGet$7(this,_ZodEnum_cache,"f").has(e.data)){const r=this._getOrReturnCtx(e),n=this._def.values;return addIssueToContext(r,{received:r.data,code:ZodIssueCode.invalid_enum_value,options:n}),INVALID}return OK(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return ZodEnum.create(e,{...this._def,...r})}exclude(e,r=this._def){return ZodEnum.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}}_ZodEnum_cache=new WeakMap;ZodEnum.create=createZodEnum;class ZodNativeEnum extends ZodType{constructor(){super(...arguments),_ZodNativeEnum_cache.set(this,void 0)}_parse(e){const r=util.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==ZodParsedType.string&&n.parsedType!==ZodParsedType.number){const s=util.objectValues(r);return addIssueToContext(n,{expected:util.joinValues(s),received:n.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(__classPrivateFieldGet$7(this,_ZodNativeEnum_cache,"f")||__classPrivateFieldSet$6(this,_ZodNativeEnum_cache,new Set(util.getValidEnumValues(this._def.values)),"f"),!__classPrivateFieldGet$7(this,_ZodNativeEnum_cache,"f").has(e.data)){const s=util.objectValues(r);return addIssueToContext(n,{received:n.data,code:ZodIssueCode.invalid_enum_value,options:s}),INVALID}return OK(e.data)}get enum(){return this._def.values}}_ZodNativeEnum_cache=new WeakMap;ZodNativeEnum.create=(t,e)=>new ZodNativeEnum({values:t,typeName:ZodFirstPartyTypeKind.ZodNativeEnum,...processCreateParams(e)});class ZodPromise extends ZodType{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==ZodParsedType.promise&&r.common.async===!1)return addIssueToContext(r,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.promise,received:r.parsedType}),INVALID;const n=r.parsedType===ZodParsedType.promise?r.data:Promise.resolve(r.data);return OK(n.then(s=>this._def.type.parseAsync(s,{path:r.path,errorMap:r.common.contextualErrorMap})))}}ZodPromise.create=(t,e)=>new ZodPromise({type:t,typeName:ZodFirstPartyTypeKind.ZodPromise,...processCreateParams(e)});class ZodEffects extends ZodType{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ZodFirstPartyTypeKind.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=this._def.effect||null,a={addIssue:o=>{addIssueToContext(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),s.type==="preprocess"){const o=s.transform(n.data,a);if(n.common.async)return Promise.resolve(o).then(async l=>{if(r.value==="aborted")return INVALID;const c=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return c.status==="aborted"?INVALID:c.status==="dirty"||r.value==="dirty"?DIRTY(c.value):c});{if(r.value==="aborted")return INVALID;const l=this._def.schema._parseSync({data:o,path:n.path,parent:n});return l.status==="aborted"?INVALID:l.status==="dirty"||r.value==="dirty"?DIRTY(l.value):l}}if(s.type==="refinement"){const o=l=>{const c=s.refinement(l,a);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?INVALID:(l.status==="dirty"&&r.dirty(),o(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?INVALID:(l.status==="dirty"&&r.dirty(),o(l.value).then(()=>({status:r.value,value:l.value}))))}if(s.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!isValid(o))return o;const l=s.transform(o.value,a);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>isValid(o)?Promise.resolve(s.transform(o.value,a)).then(l=>({status:r.value,value:l})):o);util.assertNever(s)}}ZodEffects.create=(t,e,r)=>new ZodEffects({schema:t,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:e,...processCreateParams(r)});ZodEffects.createWithPreprocess=(t,e,r)=>new ZodEffects({schema:e,effect:{type:"preprocess",transform:t},typeName:ZodFirstPartyTypeKind.ZodEffects,...processCreateParams(r)});class ZodOptional extends ZodType{_parse(e){return this._getType(e)===ZodParsedType.undefined?OK(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ZodOptional.create=(t,e)=>new ZodOptional({innerType:t,typeName:ZodFirstPartyTypeKind.ZodOptional,...processCreateParams(e)});class ZodNullable extends ZodType{_parse(e){return this._getType(e)===ZodParsedType.null?OK(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ZodNullable.create=(t,e)=>new ZodNullable({innerType:t,typeName:ZodFirstPartyTypeKind.ZodNullable,...processCreateParams(e)});class ZodDefault extends ZodType{_parse(e){const{ctx:r}=this._processInputParams(e);let n=r.data;return r.parsedType===ZodParsedType.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}ZodDefault.create=(t,e)=>new ZodDefault({innerType:t,typeName:ZodFirstPartyTypeKind.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...processCreateParams(e)});class ZodCatch extends ZodType{_parse(e){const{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return isAsync(s)?s.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new ZodError(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ZodError(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}ZodCatch.create=(t,e)=>new ZodCatch({innerType:t,typeName:ZodFirstPartyTypeKind.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...processCreateParams(e)});class ZodNaN extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.nan){const n=this._getOrReturnCtx(e);return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.nan,received:n.parsedType}),INVALID}return{status:"valid",value:e.data}}}ZodNaN.create=t=>new ZodNaN({typeName:ZodFirstPartyTypeKind.ZodNaN,...processCreateParams(t)});class ZodBranded extends ZodType{_parse(e){const{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class ZodPipeline extends ZodType{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?INVALID:a.status==="dirty"?(r.dirty(),DIRTY(a.value)):this._def.out._parseAsync({data:a.value,path:n.path,parent:n})})();{const s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?INVALID:s.status==="dirty"?(r.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,r){return new ZodPipeline({in:e,out:r,typeName:ZodFirstPartyTypeKind.ZodPipeline})}}class ZodReadonly extends ZodType{_parse(e){const r=this._def.innerType._parse(e),n=s=>(isValid(s)&&(s.value=Object.freeze(s.value)),s);return isAsync(r)?r.then(s=>n(s)):n(r)}unwrap(){return this._def.innerType}}ZodReadonly.create=(t,e)=>new ZodReadonly({innerType:t,typeName:ZodFirstPartyTypeKind.ZodReadonly,...processCreateParams(e)});var ZodFirstPartyTypeKind;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(ZodFirstPartyTypeKind||(ZodFirstPartyTypeKind={}));const stringType=ZodString.create,anyType=ZodAny.create;ZodNever.create;ZodArray.create;const objectType=ZodObject.create;ZodUnion.create;ZodIntersection.create;ZodTuple.create;ZodEnum.create;ZodPromise.create;ZodOptional.create;ZodNullable.create;var pRetry$1={exports:{}},retry$1={},retry_operation,hasRequiredRetry_operation;function requireRetry_operation(){if(hasRequiredRetry_operation)return retry_operation;hasRequiredRetry_operation=1;function t(e,r){typeof r=="boolean"&&(r={forever:r}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=r||{},this._maxRetryTime=r&&r.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}return retry_operation=t,t.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},t.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},t.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var r=new Date().getTime();if(e&&r-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var n=this._timeouts.shift();if(n===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),n=this._cachedTimeouts.slice(-1);else return!1;var s=this;return this._timer=setTimeout(function(){s._attempts++,s._operationTimeoutCb&&(s._timeout=setTimeout(function(){s._operationTimeoutCb(s._attempts)},s._operationTimeout),s._options.unref&&s._timeout.unref()),s._fn(s._attempts)},n),this._options.unref&&this._timer.unref(),!0},t.prototype.attempt=function(e,r){this._fn=e,r&&(r.timeout&&(this._operationTimeout=r.timeout),r.cb&&(this._operationTimeoutCb=r.cb));var n=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){n._operationTimeoutCb()},n._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},t.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},t.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},t.prototype.start=t.prototype.try,t.prototype.errors=function(){return this._errors},t.prototype.attempts=function(){return this._attempts},t.prototype.mainError=function(){if(this._errors.length===0)return null;for(var e={},r=null,n=0,s=0;s<this._errors.length;s++){var a=this._errors[s],o=a.message,l=(e[o]||0)+1;e[o]=l,l>=n&&(r=a,n=l)}return r},retry_operation}var hasRequiredRetry$1;function requireRetry$1(){return hasRequiredRetry$1||(hasRequiredRetry$1=1,function(t){var e=requireRetry_operation();t.operation=function(r){var n=t.timeouts(r);return new e(n,{forever:r&&(r.forever||r.retries===1/0),unref:r&&r.unref,maxRetryTime:r&&r.maxRetryTime})},t.timeouts=function(r){if(r instanceof Array)return[].concat(r);var n={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var s in r)n[s]=r[s];if(n.minTimeout>n.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var a=[],o=0;o<n.retries;o++)a.push(this.createTimeout(o,n));return r&&r.forever&&!a.length&&a.push(this.createTimeout(o,n)),a.sort(function(l,c){return l-c}),a},t.createTimeout=function(r,n){var s=n.randomize?Math.random()+1:1,a=Math.round(s*Math.max(n.minTimeout,1)*Math.pow(n.factor,r));return a=Math.min(a,n.maxTimeout),a},t.wrap=function(r,n,s){if(n instanceof Array&&(s=n,n=null),!s){s=[];for(var a in r)typeof r[a]=="function"&&s.push(a)}for(var o=0;o<s.length;o++){var l=s[o],c=r[l];r[l]=(function(p){var g=t.operation(n),y=Array.prototype.slice.call(arguments,1),x=y.pop();y.push(function(E){g.retry(E)||(E&&(arguments[0]=g.mainError()),x.apply(this,arguments))}),g.attempt(function(){p.apply(r,y)})}).bind(r,c),r[l].options=n}}}(retry$1)),retry$1}var retry,hasRequiredRetry;function requireRetry(){return hasRequiredRetry||(hasRequiredRetry=1,retry=requireRetry$1()),retry}var hasRequiredPRetry;function requirePRetry(){if(hasRequiredPRetry)return pRetry$1.exports;hasRequiredPRetry=1;const t=requireRetry(),e=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class r extends Error{constructor(l){super(),l instanceof Error?(this.originalError=l,{message:l}=l):(this.originalError=new Error(l),this.originalError.stack=this.stack),this.name="AbortError",this.message=l}}const n=(o,l,c)=>{const d=c.retries-(l-1);return o.attemptNumber=l,o.retriesLeft=d,o},s=o=>e.includes(o),a=(o,l)=>new Promise((c,d)=>{l={onFailedAttempt:()=>{},retries:10,...l};const p=t.operation(l);p.attempt(async g=>{try{c(await o(g))}catch(y){if(!(y instanceof Error)){d(new TypeError(`Non-error was thrown: "${y}". You should only throw errors.`));return}if(y instanceof r)p.stop(),d(y.originalError);else if(y instanceof TypeError&&!s(y.message))p.stop(),d(y);else{n(y,g,l);try{await l.onFailedAttempt(y)}catch(x){d(x);return}p.retry(y)||d(p.mainError())}}})});return pRetry$1.exports=a,pRetry$1.exports.default=a,pRetry$1.exports.AbortError=r,pRetry$1.exports}var pRetryExports=requirePRetry();const pRetry=getDefaultExportFromCjs(pRetryExports),REGEX=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function validate$1(t){return typeof t=="string"&&REGEX.test(t)}var byteToHex=[];for(var i=0;i<256;++i)byteToHex.push((i+256).toString(16).slice(1));function unsafeStringify(t,e=0){return(byteToHex[t[e+0]]+byteToHex[t[e+1]]+byteToHex[t[e+2]]+byteToHex[t[e+3]]+"-"+byteToHex[t[e+4]]+byteToHex[t[e+5]]+"-"+byteToHex[t[e+6]]+byteToHex[t[e+7]]+"-"+byteToHex[t[e+8]]+byteToHex[t[e+9]]+"-"+byteToHex[t[e+10]]+byteToHex[t[e+11]]+byteToHex[t[e+12]]+byteToHex[t[e+13]]+byteToHex[t[e+14]]+byteToHex[t[e+15]]).toLowerCase()}var getRandomValues,rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}var randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const native={randomUUID};function v4(t,e,r){if(native.randomUUID&&!t)return native.randomUUID();t=t||{};var n=t.random||(t.rng||rng)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,unsafeStringify(n)}var dist={},eventemitter3={exports:{}},hasRequiredEventemitter3;function requireEventemitter3(){return hasRequiredEventemitter3||(hasRequiredEventemitter3=1,function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(c,d,p){this.fn=c,this.context=d,this.once=p||!1}function a(c,d,p,g,y){if(typeof p!="function")throw new TypeError("The listener must be a function");var x=new s(p,g||c,y),E=r?r+d:d;return c._events[E]?c._events[E].fn?c._events[E]=[c._events[E],x]:c._events[E].push(x):(c._events[E]=x,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new n:delete c._events[d]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],p,g;if(this._eventsCount===0)return d;for(g in p=this._events)e.call(p,g)&&d.push(r?g.slice(1):g);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(p)):d},l.prototype.listeners=function(d){var p=r?r+d:d,g=this._events[p];if(!g)return[];if(g.fn)return[g.fn];for(var y=0,x=g.length,E=new Array(x);y<x;y++)E[y]=g[y].fn;return E},l.prototype.listenerCount=function(d){var p=r?r+d:d,g=this._events[p];return g?g.fn?1:g.length:0},l.prototype.emit=function(d,p,g,y,x,E){var S=r?r+d:d;if(!this._events[S])return!1;var k=this._events[S],C=arguments.length,P,R;if(k.fn){switch(k.once&&this.removeListener(d,k.fn,void 0,!0),C){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,p),!0;case 3:return k.fn.call(k.context,p,g),!0;case 4:return k.fn.call(k.context,p,g,y),!0;case 5:return k.fn.call(k.context,p,g,y,x),!0;case 6:return k.fn.call(k.context,p,g,y,x,E),!0}for(R=1,P=new Array(C-1);R<C;R++)P[R-1]=arguments[R];k.fn.apply(k.context,P)}else{var j=k.length,I;for(R=0;R<j;R++)switch(k[R].once&&this.removeListener(d,k[R].fn,void 0,!0),C){case 1:k[R].fn.call(k[R].context);break;case 2:k[R].fn.call(k[R].context,p);break;case 3:k[R].fn.call(k[R].context,p,g);break;case 4:k[R].fn.call(k[R].context,p,g,y);break;default:if(!P)for(I=1,P=new Array(C-1);I<C;I++)P[I-1]=arguments[I];k[R].fn.apply(k[R].context,P)}}return!0},l.prototype.on=function(d,p,g){return a(this,d,p,g,!1)},l.prototype.once=function(d,p,g){return a(this,d,p,g,!0)},l.prototype.removeListener=function(d,p,g,y){var x=r?r+d:d;if(!this._events[x])return this;if(!p)return o(this,x),this;var E=this._events[x];if(E.fn)E.fn===p&&(!y||E.once)&&(!g||E.context===g)&&o(this,x);else{for(var S=0,k=[],C=E.length;S<C;S++)(E[S].fn!==p||y&&!E[S].once||g&&E[S].context!==g)&&k.push(E[S]);k.length?this._events[x]=k.length===1?k[0]:k:o(this,x)}return this},l.prototype.removeAllListeners=function(d){var p;return d?(p=r?r+d:d,this._events[p]&&o(this,p)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,t.exports=l}(eventemitter3)),eventemitter3.exports}var pTimeout={exports:{}},pFinally,hasRequiredPFinally;function requirePFinally(){return hasRequiredPFinally||(hasRequiredPFinally=1,pFinally=(t,e)=>(e=e||(()=>{}),t.then(r=>new Promise(n=>{n(e())}).then(()=>r),r=>new Promise(n=>{n(e())}).then(()=>{throw r})))),pFinally}var hasRequiredPTimeout;function requirePTimeout(){if(hasRequiredPTimeout)return pTimeout.exports;hasRequiredPTimeout=1;const t=requirePFinally();class e extends Error{constructor(s){super(s),this.name="TimeoutError"}}const r=(n,s,a)=>new Promise((o,l)=>{if(typeof s!="number"||s<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(s===1/0){o(n);return}const c=setTimeout(()=>{if(typeof a=="function"){try{o(a())}catch(g){l(g)}return}const d=typeof a=="string"?a:`Promise timed out after ${s} milliseconds`,p=a instanceof Error?a:new e(d);typeof n.cancel=="function"&&n.cancel(),l(p)},s);t(n.then(o,l),()=>{clearTimeout(c)})});return pTimeout.exports=r,pTimeout.exports.default=r,pTimeout.exports.TimeoutError=e,pTimeout.exports}var priorityQueue={},lowerBound={},hasRequiredLowerBound;function requireLowerBound(){if(hasRequiredLowerBound)return lowerBound;hasRequiredLowerBound=1,Object.defineProperty(lowerBound,"__esModule",{value:!0});function t(e,r,n){let s=0,a=e.length;for(;a>0;){const o=a/2|0;let l=s+o;n(e[l],r)<=0?(s=++l,a-=o+1):a=o}return s}return lowerBound.default=t,lowerBound}var hasRequiredPriorityQueue;function requirePriorityQueue(){if(hasRequiredPriorityQueue)return priorityQueue;hasRequiredPriorityQueue=1,Object.defineProperty(priorityQueue,"__esModule",{value:!0});const t=requireLowerBound();class e{constructor(){this._queue=[]}enqueue(n,s){s=Object.assign({priority:0},s);const a={priority:s.priority,run:n};if(this.size&&this._queue[this.size-1].priority>=s.priority){this._queue.push(a);return}const o=t.default(this._queue,a,(l,c)=>c.priority-l.priority);this._queue.splice(o,0,a)}dequeue(){const n=this._queue.shift();return n==null?void 0:n.run}filter(n){return this._queue.filter(s=>s.priority===n.priority).map(s=>s.run)}get size(){return this._queue.length}}return priorityQueue.default=e,priorityQueue}var hasRequiredDist;function requireDist(){if(hasRequiredDist)return dist;hasRequiredDist=1,Object.defineProperty(dist,"__esModule",{value:!0});const t=requireEventemitter3(),e=requirePTimeout(),r=requirePriorityQueue(),n=()=>{},s=new e.TimeoutError;class a extends t{constructor(l){var c,d,p,g;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=n,this._resolveIdle=n,l=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:r.default},l),!(typeof l.intervalCap=="number"&&l.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(d=(c=l.intervalCap)===null||c===void 0?void 0:c.toString())!==null&&d!==void 0?d:""}\` (${typeof l.intervalCap})`);if(l.interval===void 0||!(Number.isFinite(l.interval)&&l.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(g=(p=l.interval)===null||p===void 0?void 0:p.toString())!==null&&g!==void 0?g:""}\` (${typeof l.interval})`);this._carryoverConcurrencyCount=l.carryoverConcurrencyCount,this._isIntervalIgnored=l.intervalCap===1/0||l.interval===0,this._intervalCap=l.intervalCap,this._interval=l.interval,this._queue=new l.queueClass,this._queueClass=l.queueClass,this.concurrency=l.concurrency,this._timeout=l.timeout,this._throwOnTimeout=l.throwOnTimeout===!0,this._isPaused=l.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=n,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=n,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const l=Date.now();if(this._intervalId===void 0){const c=this._intervalEnd-l;if(c<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},c)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const l=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const c=this._queue.dequeue();return c?(this.emit("active"),c(),l&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(l){if(!(typeof l=="number"&&l>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${l}\` (${typeof l})`);this._concurrency=l,this._processQueue()}async add(l,c={}){return new Promise((d,p)=>{const g=async()=>{this._pendingCount++,this._intervalCount++;try{const y=this._timeout===void 0&&c.timeout===void 0?l():e.default(Promise.resolve(l()),c.timeout===void 0?this._timeout:c.timeout,()=>{(c.throwOnTimeout===void 0?this._throwOnTimeout:c.throwOnTimeout)&&p(s)});d(await y)}catch(y){p(y)}this._next()};this._queue.enqueue(g,c),this._tryToStartAnother(),this.emit("add")})}async addAll(l,c){return Promise.all(l.map(async d=>this.add(d,c)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(l=>{const c=this._resolveEmpty;this._resolveEmpty=()=>{c(),l()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(l=>{const c=this._resolveIdle;this._resolveIdle=()=>{c(),l()}})}get size(){return this._queue.size}sizeBy(l){return this._queue.filter(l).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(l){this._timeout=l}}return dist.default=a,dist}var distExports=requireDist();const PQueueMod=getDefaultExportFromCjs(distExports),DEFAULT_FETCH_IMPLEMENTATION=(...t)=>fetch(...t),LANGSMITH_FETCH_IMPLEMENTATION_KEY=Symbol.for("ls:fetch_implementation"),_globalFetchImplementationIsNodeFetch=()=>{const t=globalThis[LANGSMITH_FETCH_IMPLEMENTATION_KEY];return t?typeof t=="function"&&"Headers"in t&&"Request"in t&&"Response"in t:!1},_getFetchImplementation=t=>async(...e)=>{if(t||getLangSmithEnvironmentVariable("DEBUG")==="true"){const[n,s]=e;console.log(`→ ${(s==null?void 0:s.method)||"GET"} ${n}`)}const r=await(globalThis[LANGSMITH_FETCH_IMPLEMENTATION_KEY]??DEFAULT_FETCH_IMPLEMENTATION)(...e);return(t||getLangSmithEnvironmentVariable("DEBUG")==="true")&&console.log(`← ${r.status} ${r.statusText} ${r.url}`),r},STATUS_NO_RETRY$1=[400,401,403,404,405,406,407,408],STATUS_IGNORE=[409];let AsyncCaller$1=class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.debug=e.debug,"default"in PQueueMod?this.queue=new PQueueMod.default({concurrency:this.maxConcurrency}):this.queue=new PQueueMod({concurrency:this.maxConcurrency}),this.onFailedResponseHook=e==null?void 0:e.onFailedResponseHook}call(e,...r){const n=this.onFailedResponseHook;return this.queue.add(()=>pRetry(()=>e(...r).catch(s=>{throw s instanceof Error?s:new Error(s)}),{async onFailedAttempt(s){if(s.message.startsWith("Cancel")||s.message.startsWith("TimeoutError")||s.message.startsWith("AbortError")||(s==null?void 0:s.code)==="ECONNABORTED")throw s;const a=s==null?void 0:s.response,o=a==null?void 0:a.status;if(o){if(STATUS_NO_RETRY$1.includes(+o))throw s;if(STATUS_IGNORE.includes(+o))return;n&&await n(a)}},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,r,...n){return e.signal?Promise.race([this.call(r,...n),new Promise((s,a)=>{var o;(o=e.signal)==null||o.addEventListener("abort",()=>{a(new Error("AbortError"))})})]):this.call(r,...n)}fetch(...e){return this.call(()=>_getFetchImplementation(this.debug)(...e).then(r=>r.ok?r:Promise.reject(r)))}};function isLangChainMessage(t){return typeof(t==null?void 0:t._getType)=="function"}function convertLangChainMessageToExample(t){const e={type:t._getType(),data:{content:t.content}};return t!=null&&t.additional_kwargs&&Object.keys(t.additional_kwargs).length>0&&(e.data.additional_kwargs={...t.additional_kwargs}),e}function assertUuid(t,e){if(!validate$1(t)){const r=e!==void 0?`Invalid UUID for ${e}: ${t}`:`Invalid UUID: ${t}`;throw new Error(r)}return t}const warnedMessages={};function warnOnce(t){warnedMessages[t]||(console.warn(t),warnedMessages[t]=!0)}var re={exports:{}},constants,hasRequiredConstants;function requireConstants(){if(hasRequiredConstants)return constants;hasRequiredConstants=1;const t="2.0.0",e=256,r=Number.MAX_SAFE_INTEGER||9007199254740991,n=16,s=e-6;return constants={MAX_LENGTH:e,MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:s,MAX_SAFE_INTEGER:r,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:t,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},constants}var debug_1,hasRequiredDebug;function requireDebug(){if(hasRequiredDebug)return debug_1;hasRequiredDebug=1;var t={};return debug_1=typeof process=="object"&&t&&t.NODE_DEBUG&&/\bsemver\b/i.test(t.NODE_DEBUG)?(...r)=>console.error("SEMVER",...r):()=>{},debug_1}var hasRequiredRe;function requireRe(){return hasRequiredRe||(hasRequiredRe=1,function(t,e){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:s}=requireConstants(),a=requireDebug();e=t.exports={};const o=e.re=[],l=e.safeRe=[],c=e.src=[],d=e.safeSrc=[],p=e.t={};let g=0;const y="[a-zA-Z0-9-]",x=[["\\s",1],["\\d",s],[y,n]],E=k=>{for(const[C,P]of x)k=k.split(`${C}*`).join(`${C}{0,${P}}`).split(`${C}+`).join(`${C}{1,${P}}`);return k},S=(k,C,P)=>{const R=E(C),j=g++;a(k,j,C),p[k]=j,c[j]=C,d[j]=R,o[j]=new RegExp(C,P?"g":void 0),l[j]=new RegExp(R,P?"g":void 0)};S("NUMERICIDENTIFIER","0|[1-9]\\d*"),S("NUMERICIDENTIFIERLOOSE","\\d+"),S("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${y}*`),S("MAINVERSION",`(${c[p.NUMERICIDENTIFIER]})\\.(${c[p.NUMERICIDENTIFIER]})\\.(${c[p.NUMERICIDENTIFIER]})`),S("MAINVERSIONLOOSE",`(${c[p.NUMERICIDENTIFIERLOOSE]})\\.(${c[p.NUMERICIDENTIFIERLOOSE]})\\.(${c[p.NUMERICIDENTIFIERLOOSE]})`),S("PRERELEASEIDENTIFIER",`(?:${c[p.NONNUMERICIDENTIFIER]}|${c[p.NUMERICIDENTIFIER]})`),S("PRERELEASEIDENTIFIERLOOSE",`(?:${c[p.NONNUMERICIDENTIFIER]}|${c[p.NUMERICIDENTIFIERLOOSE]})`),S("PRERELEASE",`(?:-(${c[p.PRERELEASEIDENTIFIER]}(?:\\.${c[p.PRERELEASEIDENTIFIER]})*))`),S("PRERELEASELOOSE",`(?:-?(${c[p.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[p.PRERELEASEIDENTIFIERLOOSE]})*))`),S("BUILDIDENTIFIER",`${y}+`),S("BUILD",`(?:\\+(${c[p.BUILDIDENTIFIER]}(?:\\.${c[p.BUILDIDENTIFIER]})*))`),S("FULLPLAIN",`v?${c[p.MAINVERSION]}${c[p.PRERELEASE]}?${c[p.BUILD]}?`),S("FULL",`^${c[p.FULLPLAIN]}$`),S("LOOSEPLAIN",`[v=\\s]*${c[p.MAINVERSIONLOOSE]}${c[p.PRERELEASELOOSE]}?${c[p.BUILD]}?`),S("LOOSE",`^${c[p.LOOSEPLAIN]}$`),S("GTLT","((?:<|>)?=?)"),S("XRANGEIDENTIFIERLOOSE",`${c[p.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),S("XRANGEIDENTIFIER",`${c[p.NUMERICIDENTIFIER]}|x|X|\\*`),S("XRANGEPLAIN",`[v=\\s]*(${c[p.XRANGEIDENTIFIER]})(?:\\.(${c[p.XRANGEIDENTIFIER]})(?:\\.(${c[p.XRANGEIDENTIFIER]})(?:${c[p.PRERELEASE]})?${c[p.BUILD]}?)?)?`),S("XRANGEPLAINLOOSE",`[v=\\s]*(${c[p.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[p.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[p.XRANGEIDENTIFIERLOOSE]})(?:${c[p.PRERELEASELOOSE]})?${c[p.BUILD]}?)?)?`),S("XRANGE",`^${c[p.GTLT]}\\s*${c[p.XRANGEPLAIN]}$`),S("XRANGELOOSE",`^${c[p.GTLT]}\\s*${c[p.XRANGEPLAINLOOSE]}$`),S("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),S("COERCE",`${c[p.COERCEPLAIN]}(?:$|[^\\d])`),S("COERCEFULL",c[p.COERCEPLAIN]+`(?:${c[p.PRERELEASE]})?(?:${c[p.BUILD]})?(?:$|[^\\d])`),S("COERCERTL",c[p.COERCE],!0),S("COERCERTLFULL",c[p.COERCEFULL],!0),S("LONETILDE","(?:~>?)"),S("TILDETRIM",`(\\s*)${c[p.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",S("TILDE",`^${c[p.LONETILDE]}${c[p.XRANGEPLAIN]}$`),S("TILDELOOSE",`^${c[p.LONETILDE]}${c[p.XRANGEPLAINLOOSE]}$`),S("LONECARET","(?:\\^)"),S("CARETTRIM",`(\\s*)${c[p.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",S("CARET",`^${c[p.LONECARET]}${c[p.XRANGEPLAIN]}$`),S("CARETLOOSE",`^${c[p.LONECARET]}${c[p.XRANGEPLAINLOOSE]}$`),S("COMPARATORLOOSE",`^${c[p.GTLT]}\\s*(${c[p.LOOSEPLAIN]})$|^$`),S("COMPARATOR",`^${c[p.GTLT]}\\s*(${c[p.FULLPLAIN]})$|^$`),S("COMPARATORTRIM",`(\\s*)${c[p.GTLT]}\\s*(${c[p.LOOSEPLAIN]}|${c[p.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",S("HYPHENRANGE",`^\\s*(${c[p.XRANGEPLAIN]})\\s+-\\s+(${c[p.XRANGEPLAIN]})\\s*$`),S("HYPHENRANGELOOSE",`^\\s*(${c[p.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[p.XRANGEPLAINLOOSE]})\\s*$`),S("STAR","(<|>)?=?\\s*\\*"),S("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),S("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(re,re.exports)),re.exports}var parseOptions_1,hasRequiredParseOptions;function requireParseOptions(){if(hasRequiredParseOptions)return parseOptions_1;hasRequiredParseOptions=1;const t=Object.freeze({loose:!0}),e=Object.freeze({});return parseOptions_1=n=>n?typeof n!="object"?t:n:e,parseOptions_1}var identifiers,hasRequiredIdentifiers;function requireIdentifiers(){if(hasRequiredIdentifiers)return identifiers;hasRequiredIdentifiers=1;const t=/^[0-9]+$/,e=(n,s)=>{const a=t.test(n),o=t.test(s);return a&&o&&(n=+n,s=+s),n===s?0:a&&!o?-1:o&&!a?1:n<s?-1:1};return identifiers={compareIdentifiers:e,rcompareIdentifiers:(n,s)=>e(s,n)},identifiers}var semver$1,hasRequiredSemver$1;function requireSemver$1(){if(hasRequiredSemver$1)return semver$1;hasRequiredSemver$1=1;const t=requireDebug(),{MAX_LENGTH:e,MAX_SAFE_INTEGER:r}=requireConstants(),{safeRe:n,t:s}=requireRe(),a=requireParseOptions(),{compareIdentifiers:o}=requireIdentifiers();class l{constructor(d,p){if(p=a(p),d instanceof l){if(d.loose===!!p.loose&&d.includePrerelease===!!p.includePrerelease)return d;d=d.version}else if(typeof d!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof d}".`);if(d.length>e)throw new TypeError(`version is longer than ${e} characters`);t("SemVer",d,p),this.options=p,this.loose=!!p.loose,this.includePrerelease=!!p.includePrerelease;const g=d.trim().match(p.loose?n[s.LOOSE]:n[s.FULL]);if(!g)throw new TypeError(`Invalid Version: ${d}`);if(this.raw=d,this.major=+g[1],this.minor=+g[2],this.patch=+g[3],this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");g[4]?this.prerelease=g[4].split(".").map(y=>{if(/^[0-9]+$/.test(y)){const x=+y;if(x>=0&&x<r)return x}return y}):this.prerelease=[],this.build=g[5]?g[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(d){if(t("SemVer.compare",this.version,this.options,d),!(d instanceof l)){if(typeof d=="string"&&d===this.version)return 0;d=new l(d,this.options)}return d.version===this.version?0:this.compareMain(d)||this.comparePre(d)}compareMain(d){return d instanceof l||(d=new l(d,this.options)),o(this.major,d.major)||o(this.minor,d.minor)||o(this.patch,d.patch)}comparePre(d){if(d instanceof l||(d=new l(d,this.options)),this.prerelease.length&&!d.prerelease.length)return-1;if(!this.prerelease.length&&d.prerelease.length)return 1;if(!this.prerelease.length&&!d.prerelease.length)return 0;let p=0;do{const g=this.prerelease[p],y=d.prerelease[p];if(t("prerelease compare",p,g,y),g===void 0&&y===void 0)return 0;if(y===void 0)return 1;if(g===void 0)return-1;if(g===y)continue;return o(g,y)}while(++p)}compareBuild(d){d instanceof l||(d=new l(d,this.options));let p=0;do{const g=this.build[p],y=d.build[p];if(t("build compare",p,g,y),g===void 0&&y===void 0)return 0;if(y===void 0)return 1;if(g===void 0)return-1;if(g===y)continue;return o(g,y)}while(++p)}inc(d,p,g){if(d.startsWith("pre")){if(!p&&g===!1)throw new Error("invalid increment argument: identifier is empty");if(p){const y=`-${p}`.match(this.options.loose?n[s.PRERELEASELOOSE]:n[s.PRERELEASE]);if(!y||y[1]!==p)throw new Error(`invalid identifier: ${p}`)}}switch(d){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",p,g);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",p,g);break;case"prepatch":this.prerelease.length=0,this.inc("patch",p,g),this.inc("pre",p,g);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",p,g),this.inc("pre",p,g);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const y=Number(g)?1:0;if(this.prerelease.length===0)this.prerelease=[y];else{let x=this.prerelease.length;for(;--x>=0;)typeof this.prerelease[x]=="number"&&(this.prerelease[x]++,x=-2);if(x===-1){if(p===this.prerelease.join(".")&&g===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(y)}}if(p){let x=[p,y];g===!1&&(x=[p]),o(this.prerelease[0],p)===0?isNaN(this.prerelease[1])&&(this.prerelease=x):this.prerelease=x}break}default:throw new Error(`invalid increment argument: ${d}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return semver$1=l,semver$1}var parse_1,hasRequiredParse;function requireParse(){if(hasRequiredParse)return parse_1;hasRequiredParse=1;const t=requireSemver$1();return parse_1=(r,n,s=!1)=>{if(r instanceof t)return r;try{return new t(r,n)}catch(a){if(!s)return null;throw a}},parse_1}var valid_1,hasRequiredValid$1;function requireValid$1(){if(hasRequiredValid$1)return valid_1;hasRequiredValid$1=1;const t=requireParse();return valid_1=(r,n)=>{const s=t(r,n);return s?s.version:null},valid_1}var clean_1,hasRequiredClean;function requireClean(){if(hasRequiredClean)return clean_1;hasRequiredClean=1;const t=requireParse();return clean_1=(r,n)=>{const s=t(r.trim().replace(/^[=v]+/,""),n);return s?s.version:null},clean_1}var inc_1,hasRequiredInc;function requireInc(){if(hasRequiredInc)return inc_1;hasRequiredInc=1;const t=requireSemver$1();return inc_1=(r,n,s,a,o)=>{typeof s=="string"&&(o=a,a=s,s=void 0);try{return new t(r instanceof t?r.version:r,s).inc(n,a,o).version}catch{return null}},inc_1}var diff_1,hasRequiredDiff;function requireDiff(){if(hasRequiredDiff)return diff_1;hasRequiredDiff=1;const t=requireParse();return diff_1=(r,n)=>{const s=t(r,null,!0),a=t(n,null,!0),o=s.compare(a);if(o===0)return null;const l=o>0,c=l?s:a,d=l?a:s,p=!!c.prerelease.length;if(!!d.prerelease.length&&!p){if(!d.patch&&!d.minor)return"major";if(d.compareMain(c)===0)return d.minor&&!d.patch?"minor":"patch"}const y=p?"pre":"";return s.major!==a.major?y+"major":s.minor!==a.minor?y+"minor":s.patch!==a.patch?y+"patch":"prerelease"},diff_1}var major_1,hasRequiredMajor;function requireMajor(){if(hasRequiredMajor)return major_1;hasRequiredMajor=1;const t=requireSemver$1();return major_1=(r,n)=>new t(r,n).major,major_1}var minor_1,hasRequiredMinor;function requireMinor(){if(hasRequiredMinor)return minor_1;hasRequiredMinor=1;const t=requireSemver$1();return minor_1=(r,n)=>new t(r,n).minor,minor_1}var patch_1,hasRequiredPatch;function requirePatch(){if(hasRequiredPatch)return patch_1;hasRequiredPatch=1;const t=requireSemver$1();return patch_1=(r,n)=>new t(r,n).patch,patch_1}var prerelease_1,hasRequiredPrerelease;function requirePrerelease(){if(hasRequiredPrerelease)return prerelease_1;hasRequiredPrerelease=1;const t=requireParse();return prerelease_1=(r,n)=>{const s=t(r,n);return s&&s.prerelease.length?s.prerelease:null},prerelease_1}var compare_1,hasRequiredCompare;function requireCompare(){if(hasRequiredCompare)return compare_1;hasRequiredCompare=1;const t=requireSemver$1();return compare_1=(r,n,s)=>new t(r,s).compare(new t(n,s)),compare_1}var rcompare_1,hasRequiredRcompare;function requireRcompare(){if(hasRequiredRcompare)return rcompare_1;hasRequiredRcompare=1;const t=requireCompare();return rcompare_1=(r,n,s)=>t(n,r,s),rcompare_1}var compareLoose_1,hasRequiredCompareLoose;function requireCompareLoose(){if(hasRequiredCompareLoose)return compareLoose_1;hasRequiredCompareLoose=1;const t=requireCompare();return compareLoose_1=(r,n)=>t(r,n,!0),compareLoose_1}var compareBuild_1,hasRequiredCompareBuild;function requireCompareBuild(){if(hasRequiredCompareBuild)return compareBuild_1;hasRequiredCompareBuild=1;const t=requireSemver$1();return compareBuild_1=(r,n,s)=>{const a=new t(r,s),o=new t(n,s);return a.compare(o)||a.compareBuild(o)},compareBuild_1}var sort_1,hasRequiredSort;function requireSort(){if(hasRequiredSort)return sort_1;hasRequiredSort=1;const t=requireCompareBuild();return sort_1=(r,n)=>r.sort((s,a)=>t(s,a,n)),sort_1}var rsort_1,hasRequiredRsort;function requireRsort(){if(hasRequiredRsort)return rsort_1;hasRequiredRsort=1;const t=requireCompareBuild();return rsort_1=(r,n)=>r.sort((s,a)=>t(a,s,n)),rsort_1}var gt_1,hasRequiredGt;function requireGt(){if(hasRequiredGt)return gt_1;hasRequiredGt=1;const t=requireCompare();return gt_1=(r,n,s)=>t(r,n,s)>0,gt_1}var lt_1,hasRequiredLt;function requireLt(){if(hasRequiredLt)return lt_1;hasRequiredLt=1;const t=requireCompare();return lt_1=(r,n,s)=>t(r,n,s)<0,lt_1}var eq_1,hasRequiredEq;function requireEq(){if(hasRequiredEq)return eq_1;hasRequiredEq=1;const t=requireCompare();return eq_1=(r,n,s)=>t(r,n,s)===0,eq_1}var neq_1,hasRequiredNeq;function requireNeq(){if(hasRequiredNeq)return neq_1;hasRequiredNeq=1;const t=requireCompare();return neq_1=(r,n,s)=>t(r,n,s)!==0,neq_1}var gte_1,hasRequiredGte;function requireGte(){if(hasRequiredGte)return gte_1;hasRequiredGte=1;const t=requireCompare();return gte_1=(r,n,s)=>t(r,n,s)>=0,gte_1}var lte_1,hasRequiredLte;function requireLte(){if(hasRequiredLte)return lte_1;hasRequiredLte=1;const t=requireCompare();return lte_1=(r,n,s)=>t(r,n,s)<=0,lte_1}var cmp_1,hasRequiredCmp;function requireCmp(){if(hasRequiredCmp)return cmp_1;hasRequiredCmp=1;const t=requireEq(),e=requireNeq(),r=requireGt(),n=requireGte(),s=requireLt(),a=requireLte();return cmp_1=(l,c,d,p)=>{switch(c){case"===":return typeof l=="object"&&(l=l.version),typeof d=="object"&&(d=d.version),l===d;case"!==":return typeof l=="object"&&(l=l.version),typeof d=="object"&&(d=d.version),l!==d;case"":case"=":case"==":return t(l,d,p);case"!=":return e(l,d,p);case">":return r(l,d,p);case">=":return n(l,d,p);case"<":return s(l,d,p);case"<=":return a(l,d,p);default:throw new TypeError(`Invalid operator: ${c}`)}},cmp_1}var coerce_1,hasRequiredCoerce;function requireCoerce(){if(hasRequiredCoerce)return coerce_1;hasRequiredCoerce=1;const t=requireSemver$1(),e=requireParse(),{safeRe:r,t:n}=requireRe();return coerce_1=(a,o)=>{if(a instanceof t)return a;if(typeof a=="number"&&(a=String(a)),typeof a!="string")return null;o=o||{};let l=null;if(!o.rtl)l=a.match(o.includePrerelease?r[n.COERCEFULL]:r[n.COERCE]);else{const x=o.includePrerelease?r[n.COERCERTLFULL]:r[n.COERCERTL];let E;for(;(E=x.exec(a))&&(!l||l.index+l[0].length!==a.length);)(!l||E.index+E[0].length!==l.index+l[0].length)&&(l=E),x.lastIndex=E.index+E[1].length+E[2].length;x.lastIndex=-1}if(l===null)return null;const c=l[2],d=l[3]||"0",p=l[4]||"0",g=o.includePrerelease&&l[5]?`-${l[5]}`:"",y=o.includePrerelease&&l[6]?`+${l[6]}`:"";return e(`${c}.${d}.${p}${g}${y}`,o)},coerce_1}var lrucache,hasRequiredLrucache;function requireLrucache(){if(hasRequiredLrucache)return lrucache;hasRequiredLrucache=1;class t{constructor(){this.max=1e3,this.map=new Map}get(r){const n=this.map.get(r);if(n!==void 0)return this.map.delete(r),this.map.set(r,n),n}delete(r){return this.map.delete(r)}set(r,n){if(!this.delete(r)&&n!==void 0){if(this.map.size>=this.max){const a=this.map.keys().next().value;this.delete(a)}this.map.set(r,n)}return this}}return lrucache=t,lrucache}var range,hasRequiredRange;function requireRange(){if(hasRequiredRange)return range;hasRequiredRange=1;const t=/\s+/g;class e{constructor(Y,G){if(G=s(G),Y instanceof e)return Y.loose===!!G.loose&&Y.includePrerelease===!!G.includePrerelease?Y:new e(Y.raw,G);if(Y instanceof a)return this.raw=Y.value,this.set=[[Y]],this.formatted=void 0,this;if(this.options=G,this.loose=!!G.loose,this.includePrerelease=!!G.includePrerelease,this.raw=Y.trim().replace(t," "),this.set=this.raw.split("||").map(q=>this.parseRange(q.trim())).filter(q=>q.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const q=this.set[0];if(this.set=this.set.filter(N=>!S(N[0])),this.set.length===0)this.set=[q];else if(this.set.length>1){for(const N of this.set)if(N.length===1&&k(N[0])){this.set=[N];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let Y=0;Y<this.set.length;Y++){Y>0&&(this.formatted+="||");const G=this.set[Y];for(let q=0;q<G.length;q++)q>0&&(this.formatted+=" "),this.formatted+=G[q].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(Y){const q=((this.options.includePrerelease&&x)|(this.options.loose&&E))+":"+Y,N=n.get(q);if(N)return N;const $=this.options.loose,V=$?c[d.HYPHENRANGELOOSE]:c[d.HYPHENRANGE];Y=Y.replace(V,Q(this.options.includePrerelease)),o("hyphen replace",Y),Y=Y.replace(c[d.COMPARATORTRIM],p),o("comparator trim",Y),Y=Y.replace(c[d.TILDETRIM],g),o("tilde trim",Y),Y=Y.replace(c[d.CARETTRIM],y),o("caret trim",Y);let z=Y.split(" ").map(Ce=>P(Ce,this.options)).join(" ").split(/\s+/).map(Ce=>ie(Ce,this.options));$&&(z=z.filter(Ce=>(o("loose invalid filter",Ce,this.options),!!Ce.match(c[d.COMPARATORLOOSE])))),o("range list",z);const ne=new Map,pe=z.map(Ce=>new a(Ce,this.options));for(const Ce of pe){if(S(Ce))return[Ce];ne.set(Ce.value,Ce)}ne.size>1&&ne.has("")&&ne.delete("");const xe=[...ne.values()];return n.set(q,xe),xe}intersects(Y,G){if(!(Y instanceof e))throw new TypeError("a Range is required");return this.set.some(q=>C(q,G)&&Y.set.some(N=>C(N,G)&&q.every($=>N.every(V=>$.intersects(V,G)))))}test(Y){if(!Y)return!1;if(typeof Y=="string")try{Y=new l(Y,this.options)}catch{return!1}for(let G=0;G<this.set.length;G++)if(fe(this.set[G],Y,this.options))return!0;return!1}}range=e;const r=requireLrucache(),n=new r,s=requireParseOptions(),a=requireComparator(),o=requireDebug(),l=requireSemver$1(),{safeRe:c,t:d,comparatorTrimReplace:p,tildeTrimReplace:g,caretTrimReplace:y}=requireRe(),{FLAG_INCLUDE_PRERELEASE:x,FLAG_LOOSE:E}=requireConstants(),S=se=>se.value==="<0.0.0-0",k=se=>se.value==="",C=(se,Y)=>{let G=!0;const q=se.slice();let N=q.pop();for(;G&&q.length;)G=q.every($=>N.intersects($,Y)),N=q.pop();return G},P=(se,Y)=>(o("comp",se,Y),se=O(se,Y),o("caret",se),se=j(se,Y),o("tildes",se),se=B(se,Y),o("xrange",se),se=te(se,Y),o("stars",se),se),R=se=>!se||se.toLowerCase()==="x"||se==="*",j=(se,Y)=>se.trim().split(/\s+/).map(G=>I(G,Y)).join(" "),I=(se,Y)=>{const G=Y.loose?c[d.TILDELOOSE]:c[d.TILDE];return se.replace(G,(q,N,$,V,z)=>{o("tilde",se,q,N,$,V,z);let ne;return R(N)?ne="":R($)?ne=`>=${N}.0.0 <${+N+1}.0.0-0`:R(V)?ne=`>=${N}.${$}.0 <${N}.${+$+1}.0-0`:z?(o("replaceTilde pr",z),ne=`>=${N}.${$}.${V}-${z} <${N}.${+$+1}.0-0`):ne=`>=${N}.${$}.${V} <${N}.${+$+1}.0-0`,o("tilde return",ne),ne})},O=(se,Y)=>se.trim().split(/\s+/).map(G=>L(G,Y)).join(" "),L=(se,Y)=>{o("caret",se,Y);const G=Y.loose?c[d.CARETLOOSE]:c[d.CARET],q=Y.includePrerelease?"-0":"";return se.replace(G,(N,$,V,z,ne)=>{o("caret",se,N,$,V,z,ne);let pe;return R($)?pe="":R(V)?pe=`>=${$}.0.0${q} <${+$+1}.0.0-0`:R(z)?$==="0"?pe=`>=${$}.${V}.0${q} <${$}.${+V+1}.0-0`:pe=`>=${$}.${V}.0${q} <${+$+1}.0.0-0`:ne?(o("replaceCaret pr",ne),$==="0"?V==="0"?pe=`>=${$}.${V}.${z}-${ne} <${$}.${V}.${+z+1}-0`:pe=`>=${$}.${V}.${z}-${ne} <${$}.${+V+1}.0-0`:pe=`>=${$}.${V}.${z}-${ne} <${+$+1}.0.0-0`):(o("no pr"),$==="0"?V==="0"?pe=`>=${$}.${V}.${z}${q} <${$}.${V}.${+z+1}-0`:pe=`>=${$}.${V}.${z}${q} <${$}.${+V+1}.0-0`:pe=`>=${$}.${V}.${z} <${+$+1}.0.0-0`),o("caret return",pe),pe})},B=(se,Y)=>(o("replaceXRanges",se,Y),se.split(/\s+/).map(G=>Z(G,Y)).join(" ")),Z=(se,Y)=>{se=se.trim();const G=Y.loose?c[d.XRANGELOOSE]:c[d.XRANGE];return se.replace(G,(q,N,$,V,z,ne)=>{o("xRange",se,q,N,$,V,z,ne);const pe=R($),xe=pe||R(V),Ce=xe||R(z),ce=Ce;return N==="="&&ce&&(N=""),ne=Y.includePrerelease?"-0":"",pe?N===">"||N==="<"?q="<0.0.0-0":q="*":N&&ce?(xe&&(V=0),z=0,N===">"?(N=">=",xe?($=+$+1,V=0,z=0):(V=+V+1,z=0)):N==="<="&&(N="<",xe?$=+$+1:V=+V+1),N==="<"&&(ne="-0"),q=`${N+$}.${V}.${z}${ne}`):xe?q=`>=${$}.0.0${ne} <${+$+1}.0.0-0`:Ce&&(q=`>=${$}.${V}.0${ne} <${$}.${+V+1}.0-0`),o("xRange return",q),q})},te=(se,Y)=>(o("replaceStars",se,Y),se.trim().replace(c[d.STAR],"")),ie=(se,Y)=>(o("replaceGTE0",se,Y),se.trim().replace(c[Y.includePrerelease?d.GTE0PRE:d.GTE0],"")),Q=se=>(Y,G,q,N,$,V,z,ne,pe,xe,Ce,ce)=>(R(q)?G="":R(N)?G=`>=${q}.0.0${se?"-0":""}`:R($)?G=`>=${q}.${N}.0${se?"-0":""}`:V?G=`>=${G}`:G=`>=${G}${se?"-0":""}`,R(pe)?ne="":R(xe)?ne=`<${+pe+1}.0.0-0`:R(Ce)?ne=`<${pe}.${+xe+1}.0-0`:ce?ne=`<=${pe}.${xe}.${Ce}-${ce}`:se?ne=`<${pe}.${xe}.${+Ce+1}-0`:ne=`<=${ne}`,`${G} ${ne}`.trim()),fe=(se,Y,G)=>{for(let q=0;q<se.length;q++)if(!se[q].test(Y))return!1;if(Y.prerelease.length&&!G.includePrerelease){for(let q=0;q<se.length;q++)if(o(se[q].semver),se[q].semver!==a.ANY&&se[q].semver.prerelease.length>0){const N=se[q].semver;if(N.major===Y.major&&N.minor===Y.minor&&N.patch===Y.patch)return!0}return!1}return!0};return range}var comparator,hasRequiredComparator;function requireComparator(){if(hasRequiredComparator)return comparator;hasRequiredComparator=1;const t=Symbol("SemVer ANY");class e{static get ANY(){return t}constructor(p,g){if(g=r(g),p instanceof e){if(p.loose===!!g.loose)return p;p=p.value}p=p.trim().split(/\s+/).join(" "),o("comparator",p,g),this.options=g,this.loose=!!g.loose,this.parse(p),this.semver===t?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(p){const g=this.options.loose?n[s.COMPARATORLOOSE]:n[s.COMPARATOR],y=p.match(g);if(!y)throw new TypeError(`Invalid comparator: ${p}`);this.operator=y[1]!==void 0?y[1]:"",this.operator==="="&&(this.operator=""),y[2]?this.semver=new l(y[2],this.options.loose):this.semver=t}toString(){return this.value}test(p){if(o("Comparator.test",p,this.options.loose),this.semver===t||p===t)return!0;if(typeof p=="string")try{p=new l(p,this.options)}catch{return!1}return a(p,this.operator,this.semver,this.options)}intersects(p,g){if(!(p instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new c(p.value,g).test(this.value):p.operator===""?p.value===""?!0:new c(this.value,g).test(p.semver):(g=r(g),g.includePrerelease&&(this.value==="<0.0.0-0"||p.value==="<0.0.0-0")||!g.includePrerelease&&(this.value.startsWith("<0.0.0")||p.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&p.operator.startsWith(">")||this.operator.startsWith("<")&&p.operator.startsWith("<")||this.semver.version===p.semver.version&&this.operator.includes("=")&&p.operator.includes("=")||a(this.semver,"<",p.semver,g)&&this.operator.startsWith(">")&&p.operator.startsWith("<")||a(this.semver,">",p.semver,g)&&this.operator.startsWith("<")&&p.operator.startsWith(">")))}}comparator=e;const r=requireParseOptions(),{safeRe:n,t:s}=requireRe(),a=requireCmp(),o=requireDebug(),l=requireSemver$1(),c=requireRange();return comparator}var satisfies_1,hasRequiredSatisfies;function requireSatisfies(){if(hasRequiredSatisfies)return satisfies_1;hasRequiredSatisfies=1;const t=requireRange();return satisfies_1=(r,n,s)=>{try{n=new t(n,s)}catch{return!1}return n.test(r)},satisfies_1}var toComparators_1,hasRequiredToComparators;function requireToComparators(){if(hasRequiredToComparators)return toComparators_1;hasRequiredToComparators=1;const t=requireRange();return toComparators_1=(r,n)=>new t(r,n).set.map(s=>s.map(a=>a.value).join(" ").trim().split(" ")),toComparators_1}var maxSatisfying_1,hasRequiredMaxSatisfying;function requireMaxSatisfying(){if(hasRequiredMaxSatisfying)return maxSatisfying_1;hasRequiredMaxSatisfying=1;const t=requireSemver$1(),e=requireRange();return maxSatisfying_1=(n,s,a)=>{let o=null,l=null,c=null;try{c=new e(s,a)}catch{return null}return n.forEach(d=>{c.test(d)&&(!o||l.compare(d)===-1)&&(o=d,l=new t(o,a))}),o},maxSatisfying_1}var minSatisfying_1,hasRequiredMinSatisfying;function requireMinSatisfying(){if(hasRequiredMinSatisfying)return minSatisfying_1;hasRequiredMinSatisfying=1;const t=requireSemver$1(),e=requireRange();return minSatisfying_1=(n,s,a)=>{let o=null,l=null,c=null;try{c=new e(s,a)}catch{return null}return n.forEach(d=>{c.test(d)&&(!o||l.compare(d)===1)&&(o=d,l=new t(o,a))}),o},minSatisfying_1}var minVersion_1,hasRequiredMinVersion;function requireMinVersion(){if(hasRequiredMinVersion)return minVersion_1;hasRequiredMinVersion=1;const t=requireSemver$1(),e=requireRange(),r=requireGt();return minVersion_1=(s,a)=>{s=new e(s,a);let o=new t("0.0.0");if(s.test(o)||(o=new t("0.0.0-0"),s.test(o)))return o;o=null;for(let l=0;l<s.set.length;++l){const c=s.set[l];let d=null;c.forEach(p=>{const g=new t(p.semver.version);switch(p.operator){case">":g.prerelease.length===0?g.patch++:g.prerelease.push(0),g.raw=g.format();case"":case">=":(!d||r(g,d))&&(d=g);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${p.operator}`)}}),d&&(!o||r(o,d))&&(o=d)}return o&&s.test(o)?o:null},minVersion_1}var valid,hasRequiredValid;function requireValid(){if(hasRequiredValid)return valid;hasRequiredValid=1;const t=requireRange();return valid=(r,n)=>{try{return new t(r,n).range||"*"}catch{return null}},valid}var outside_1,hasRequiredOutside;function requireOutside(){if(hasRequiredOutside)return outside_1;hasRequiredOutside=1;const t=requireSemver$1(),e=requireComparator(),{ANY:r}=e,n=requireRange(),s=requireSatisfies(),a=requireGt(),o=requireLt(),l=requireLte(),c=requireGte();return outside_1=(p,g,y,x)=>{p=new t(p,x),g=new n(g,x);let E,S,k,C,P;switch(y){case">":E=a,S=l,k=o,C=">",P=">=";break;case"<":E=o,S=c,k=a,C="<",P="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(s(p,g,x))return!1;for(let R=0;R<g.set.length;++R){const j=g.set[R];let I=null,O=null;if(j.forEach(L=>{L.semver===r&&(L=new e(">=0.0.0")),I=I||L,O=O||L,E(L.semver,I.semver,x)?I=L:k(L.semver,O.semver,x)&&(O=L)}),I.operator===C||I.operator===P||(!O.operator||O.operator===C)&&S(p,O.semver))return!1;if(O.operator===P&&k(p,O.semver))return!1}return!0},outside_1}var gtr_1,hasRequiredGtr;function requireGtr(){if(hasRequiredGtr)return gtr_1;hasRequiredGtr=1;const t=requireOutside();return gtr_1=(r,n,s)=>t(r,n,">",s),gtr_1}var ltr_1,hasRequiredLtr;function requireLtr(){if(hasRequiredLtr)return ltr_1;hasRequiredLtr=1;const t=requireOutside();return ltr_1=(r,n,s)=>t(r,n,"<",s),ltr_1}var intersects_1,hasRequiredIntersects;function requireIntersects(){if(hasRequiredIntersects)return intersects_1;hasRequiredIntersects=1;const t=requireRange();return intersects_1=(r,n,s)=>(r=new t(r,s),n=new t(n,s),r.intersects(n,s)),intersects_1}var simplify,hasRequiredSimplify;function requireSimplify(){if(hasRequiredSimplify)return simplify;hasRequiredSimplify=1;const t=requireSatisfies(),e=requireCompare();return simplify=(r,n,s)=>{const a=[];let o=null,l=null;const c=r.sort((y,x)=>e(y,x,s));for(const y of c)t(y,n,s)?(l=y,o||(o=y)):(l&&a.push([o,l]),l=null,o=null);o&&a.push([o,null]);const d=[];for(const[y,x]of a)y===x?d.push(y):!x&&y===c[0]?d.push("*"):x?y===c[0]?d.push(`<=${x}`):d.push(`${y} - ${x}`):d.push(`>=${y}`);const p=d.join(" || "),g=typeof n.raw=="string"?n.raw:String(n);return p.length<g.length?p:n},simplify}var subset_1,hasRequiredSubset;function requireSubset(){if(hasRequiredSubset)return subset_1;hasRequiredSubset=1;const t=requireRange(),e=requireComparator(),{ANY:r}=e,n=requireSatisfies(),s=requireCompare(),a=(g,y,x={})=>{if(g===y)return!0;g=new t(g,x),y=new t(y,x);let E=!1;e:for(const S of g.set){for(const k of y.set){const C=c(S,k,x);if(E=E||C!==null,C)continue e}if(E)return!1}return!0},o=[new e(">=0.0.0-0")],l=[new e(">=0.0.0")],c=(g,y,x)=>{if(g===y)return!0;if(g.length===1&&g[0].semver===r){if(y.length===1&&y[0].semver===r)return!0;x.includePrerelease?g=o:g=l}if(y.length===1&&y[0].semver===r){if(x.includePrerelease)return!0;y=l}const E=new Set;let S,k;for(const B of g)B.operator===">"||B.operator===">="?S=d(S,B,x):B.operator==="<"||B.operator==="<="?k=p(k,B,x):E.add(B.semver);if(E.size>1)return null;let C;if(S&&k){if(C=s(S.semver,k.semver,x),C>0)return null;if(C===0&&(S.operator!==">="||k.operator!=="<="))return null}for(const B of E){if(S&&!n(B,String(S),x)||k&&!n(B,String(k),x))return null;for(const Z of y)if(!n(B,String(Z),x))return!1;return!0}let P,R,j,I,O=k&&!x.includePrerelease&&k.semver.prerelease.length?k.semver:!1,L=S&&!x.includePrerelease&&S.semver.prerelease.length?S.semver:!1;O&&O.prerelease.length===1&&k.operator==="<"&&O.prerelease[0]===0&&(O=!1);for(const B of y){if(I=I||B.operator===">"||B.operator===">=",j=j||B.operator==="<"||B.operator==="<=",S){if(L&&B.semver.prerelease&&B.semver.prerelease.length&&B.semver.major===L.major&&B.semver.minor===L.minor&&B.semver.patch===L.patch&&(L=!1),B.operator===">"||B.operator===">="){if(P=d(S,B,x),P===B&&P!==S)return!1}else if(S.operator===">="&&!n(S.semver,String(B),x))return!1}if(k){if(O&&B.semver.prerelease&&B.semver.prerelease.length&&B.semver.major===O.major&&B.semver.minor===O.minor&&B.semver.patch===O.patch&&(O=!1),B.operator==="<"||B.operator==="<="){if(R=p(k,B,x),R===B&&R!==k)return!1}else if(k.operator==="<="&&!n(k.semver,String(B),x))return!1}if(!B.operator&&(k||S)&&C!==0)return!1}return!(S&&j&&!k&&C!==0||k&&I&&!S&&C!==0||L||O)},d=(g,y,x)=>{if(!g)return y;const E=s(g.semver,y.semver,x);return E>0?g:E<0||y.operator===">"&&g.operator===">="?y:g},p=(g,y,x)=>{if(!g)return y;const E=s(g.semver,y.semver,x);return E<0?g:E>0||y.operator==="<"&&g.operator==="<="?y:g};return subset_1=a,subset_1}var semver,hasRequiredSemver;function requireSemver(){if(hasRequiredSemver)return semver;hasRequiredSemver=1;const t=requireRe(),e=requireConstants(),r=requireSemver$1(),n=requireIdentifiers(),s=requireParse(),a=requireValid$1(),o=requireClean(),l=requireInc(),c=requireDiff(),d=requireMajor(),p=requireMinor(),g=requirePatch(),y=requirePrerelease(),x=requireCompare(),E=requireRcompare(),S=requireCompareLoose(),k=requireCompareBuild(),C=requireSort(),P=requireRsort(),R=requireGt(),j=requireLt(),I=requireEq(),O=requireNeq(),L=requireGte(),B=requireLte(),Z=requireCmp(),te=requireCoerce(),ie=requireComparator(),Q=requireRange(),fe=requireSatisfies(),se=requireToComparators(),Y=requireMaxSatisfying(),G=requireMinSatisfying(),q=requireMinVersion(),N=requireValid(),$=requireOutside(),V=requireGtr(),z=requireLtr(),ne=requireIntersects(),pe=requireSimplify(),xe=requireSubset();return semver={parse:s,valid:a,clean:o,inc:l,diff:c,major:d,minor:p,patch:g,prerelease:y,compare:x,rcompare:E,compareLoose:S,compareBuild:k,sort:C,rsort:P,gt:R,lt:j,eq:I,neq:O,gte:L,lte:B,cmp:Z,coerce:te,Comparator:ie,Range:Q,satisfies:fe,toComparators:se,maxSatisfying:Y,minSatisfying:G,minVersion:q,validRange:N,outside:$,gtr:V,ltr:z,intersects:ne,simplifyRange:pe,subset:xe,SemVer:r,re:t.re,src:t.src,tokens:t.t,SEMVER_SPEC_VERSION:e.SEMVER_SPEC_VERSION,RELEASE_TYPES:e.RELEASE_TYPES,compareIdentifiers:n.compareIdentifiers,rcompareIdentifiers:n.rcompareIdentifiers},semver}requireSemver();function parsePromptIdentifier(t){if(!t||t.split("/").length>2||t.startsWith("/")||t.endsWith("/")||t.split(":").length>2)throw new Error(`Invalid identifier format: ${t}`);const[e,r]=t.split(":"),n=r||"latest";if(e.includes("/")){const[s,a]=e.split("/",2);if(!s||!a)throw new Error(`Invalid identifier format: ${t}`);return[s,a,n]}else{if(!e)throw new Error(`Invalid identifier format: ${t}`);return["-",e,n]}}class LangSmithConflictError extends Error{constructor(e){super(e),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="LangSmithConflictError",this.status=409}}async function raiseForStatus(t,e,r){let n;if(t.ok){r&&(n=await t.text());return}n=await t.text();const s=`Failed to ${e}. Received status [${t.status}]: ${t.statusText}. Server response: ${n}`;if(t.status===409)throw new LangSmithConflictError(s);const a=new Error(s);throw a.status=t.status,a}var LIMIT_REPLACE_NODE="[...]",CIRCULAR_REPLACE_NODE={result:"[Circular]"},arr=[],replacerStack=[];const encoder=new TextEncoder;function defaultOptions$2(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function encodeString(t){return encoder.encode(t)}function serialize(t,e,r,n,s){var a;try{const o=JSON.stringify(t,r,n);return encodeString(o)}catch(o){if(!((a=o.message)!=null&&a.includes("Converting circular structure to JSON")))return console.warn(`[WARNING]: LangSmith received unserializable value.${e?`
Context: ${e}`:""}`),encodeString("[Unserializable]");console.warn(`[WARNING]: LangSmith received circular JSON. This will decrease tracer performance. ${e?`
Context: ${e}`:""}`),typeof s>"u"&&(s=defaultOptions$2()),decirc(t,"",0,[],void 0,0,s);let l;try{replacerStack.length===0?l=JSON.stringify(t,r,n):l=JSON.stringify(t,replaceGetterValues(r),n)}catch{return encodeString("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;arr.length!==0;){const c=arr.pop();c.length===4?Object.defineProperty(c[0],c[1],c[3]):c[0][c[1]]=c[2]}}return encodeString(l)}}function setReplace(t,e,r,n){var s=Object.getOwnPropertyDescriptor(n,r);s.get!==void 0?s.configurable?(Object.defineProperty(n,r,{value:t}),arr.push([n,r,e,s])):replacerStack.push([e,r,t]):(n[r]=t,arr.push([n,r,e]))}function decirc(t,e,r,n,s,a,o){a+=1;var l;if(typeof t=="object"&&t!==null){for(l=0;l<n.length;l++)if(n[l]===t){setReplace(CIRCULAR_REPLACE_NODE,t,e,s);return}if(typeof o.depthLimit<"u"&&a>o.depthLimit){setReplace(LIMIT_REPLACE_NODE,t,e,s);return}if(typeof o.edgesLimit<"u"&&r+1>o.edgesLimit){setReplace(LIMIT_REPLACE_NODE,t,e,s);return}if(n.push(t),Array.isArray(t))for(l=0;l<t.length;l++)decirc(t[l],l,l,n,t,a,o);else{var c=Object.keys(t);for(l=0;l<c.length;l++){var d=c[l];decirc(t[d],d,l,n,t,a,o)}}n.pop()}}function replaceGetterValues(t){return t=typeof t<"u"?t:function(e,r){return r},function(e,r){if(replacerStack.length>0)for(var n=0;n<replacerStack.length;n++){var s=replacerStack[n];if(s[1]===e&&s[0]===r){r=s[2],replacerStack.splice(n,1);break}}return t.call(this,e,r)}}function mergeRuntimeEnvIntoRunCreate(t){const e=getRuntimeEnvironment$1(),r=getLangChainEnvVarsMetadata(),n=t.extra??{},s=n.metadata;return t.extra={...n,runtime:{...e,...n==null?void 0:n.runtime},metadata:{...r,...r.revision_id||t.revision_id?{revision_id:t.revision_id??r.revision_id}:{},...s}},t}const getTracingSamplingRate=t=>{const e=(t==null?void 0:t.toString())??getLangSmithEnvironmentVariable("TRACING_SAMPLING_RATE");if(e===void 0)return;const r=parseFloat(e);if(r<0||r>1)throw new Error(`LANGSMITH_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${r}`);return r},isLocalhost=t=>{const r=t.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return r==="localhost"||r==="127.0.0.1"||r==="::1"};async function toArray(t){const e=[];for await(const r of t)e.push(r);return e}function trimQuotes(t){if(t!==void 0)return t.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}const handle429=async t=>{if((t==null?void 0:t.status)===429){const e=parseInt(t.headers.get("retry-after")??"30",10)*1e3;if(e>0)return await new Promise(r=>setTimeout(r,e)),!0}return!1};function _formatFeedbackScore(t){return typeof t=="number"?Number(t.toFixed(4)):t}class AutoBatchQueue{constructor(){Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"sizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0})}peek(){return this.items[0]}push(e){let r;const n=new Promise(a=>{r=a}),s=serialize(e.item,`Serializing run with id: ${e.item.id}`).length;return this.items.push({action:e.action,payload:e.item,itemPromiseResolve:r,itemPromise:n,size:s}),this.sizeBytes+=s,n}pop(e){var s;if(e<1)throw new Error("Number of bytes to pop off may not be less than 1.");const r=[];let n=0;for(;n+(((s=this.peek())==null?void 0:s.size)??0)<e&&this.items.length>0;){const a=this.items.shift();a&&(r.push(a),n+=a.size,this.sizeBytes-=a.size)}if(r.length===0&&this.items.length>0){const a=this.items.shift();r.push(a),n+=a.size,this.sizeBytes-=a.size}return[r.map(a=>({action:a.action,item:a.payload})),()=>r.forEach(a=>a.itemPromiseResolve())]}}const DEFAULT_BATCH_SIZE_LIMIT_BYTES=20971520,SERVER_INFO_REQUEST_TIMEOUT=2500;class Client{constructor(e={}){var n;Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchIngestCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filteredPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"autoBatchQueue",{enumerable:!0,configurable:!0,writable:!0,value:new AutoBatchQueue}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"batchSizeBytesLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"blockOnRootRunFinalization",{enumerable:!0,configurable:!0,writable:!0,value:getEnvironmentVariable$1("LANGSMITH_TRACING_BACKGROUND")==="false"}),Object.defineProperty(this,"traceBatchConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:5}),Object.defineProperty(this,"_serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_getServerInfoPromise",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"manualFlushMode",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:getEnvironmentVariable$1("LANGSMITH_DEBUG")==="true"});const r=Client.getDefaultClientConfig();if(this.tracingSampleRate=getTracingSamplingRate(e.tracingSamplingRate),this.apiUrl=trimQuotes(e.apiUrl??r.apiUrl)??"",this.apiUrl.endsWith("/")&&(this.apiUrl=this.apiUrl.slice(0,-1)),this.apiKey=trimQuotes(e.apiKey??r.apiKey),this.webUrl=trimQuotes(e.webUrl??r.webUrl),(n=this.webUrl)!=null&&n.endsWith("/")&&(this.webUrl=this.webUrl.slice(0,-1)),this.timeout_ms=e.timeout_ms??9e4,this.caller=new AsyncCaller$1({...e.callerOptions??{},debug:e.debug??this.debug}),this.traceBatchConcurrency=e.traceBatchConcurrency??this.traceBatchConcurrency,this.traceBatchConcurrency<1)throw new Error("Trace batch concurrency must be positive.");this.debug=e.debug??this.debug,this.batchIngestCaller=new AsyncCaller$1({maxRetries:2,maxConcurrency:this.traceBatchConcurrency,...e.callerOptions??{},onFailedResponseHook:handle429,debug:e.debug??this.debug}),this.hideInputs=e.hideInputs??e.anonymizer??r.hideInputs,this.hideOutputs=e.hideOutputs??e.anonymizer??r.hideOutputs,this.autoBatchTracing=e.autoBatchTracing??this.autoBatchTracing,this.blockOnRootRunFinalization=e.blockOnRootRunFinalization??this.blockOnRootRunFinalization,this.batchSizeBytesLimit=e.batchSizeBytesLimit,this.fetchOptions=e.fetchOptions||{},this.manualFlushMode=e.manualFlushMode??this.manualFlushMode}static getDefaultClientConfig(){const e=getLangSmithEnvironmentVariable("API_KEY"),r=getLangSmithEnvironmentVariable("ENDPOINT")??"https://api.smith.langchain.com",n=getLangSmithEnvironmentVariable("HIDE_INPUTS")==="true",s=getLangSmithEnvironmentVariable("HIDE_OUTPUTS")==="true";return{apiUrl:r,apiKey:e,webUrl:void 0,hideInputs:n,hideOutputs:s}}getHostUrl(){return this.webUrl?this.webUrl:isLocalhost(this.apiUrl)?(this.webUrl="http://localhost:3000",this.webUrl):this.apiUrl.endsWith("/api/v1")?(this.webUrl=this.apiUrl.replace("/api/v1",""),this.webUrl):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("eu")?(this.webUrl="https://eu.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("beta")?(this.webUrl="https://beta.smith.langchain.com",this.webUrl):(this.webUrl="https://smith.langchain.com",this.webUrl)}get headers(){const e={"User-Agent":`langsmith-js/${__version__}`};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),e}async processInputs(e){return this.hideInputs===!1?e:this.hideInputs===!0?{}:typeof this.hideInputs=="function"?this.hideInputs(e):e}async processOutputs(e){return this.hideOutputs===!1?e:this.hideOutputs===!0?{}:typeof this.hideOutputs=="function"?this.hideOutputs(e):e}async prepareRunCreateOrUpdateInputs(e){const r={...e};return r.inputs!==void 0&&(r.inputs=await this.processInputs(r.inputs)),r.outputs!==void 0&&(r.outputs=await this.processOutputs(r.outputs)),r}async _getResponse(e,r){const n=(r==null?void 0:r.toString())??"",s=`${this.apiUrl}${e}?${n}`,a=await this.caller.call(_getFetchImplementation(this.debug),s,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(a,`Failed to fetch ${e}`),a}async _get(e,r){return(await this._getResponse(e,r)).json()}async*_getPaginated(e,r=new URLSearchParams,n){let s=Number(r.get("offset"))||0;const a=Number(r.get("limit"))||100;for(;;){r.set("offset",String(s)),r.set("limit",String(a));const o=`${this.apiUrl}${e}?${r}`,l=await this.caller.call(_getFetchImplementation(this.debug),o,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(l,`Failed to fetch ${e}`);const c=n?n(await l.json()):await l.json();if(c.length===0||(yield c,c.length<a))break;s+=c.length}}async*_getCursorPaginatedList(e,r=null,n="POST",s="runs"){const a=r?{...r}:{};for(;;){const l=await(await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}${e}`,{method:n,headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:JSON.stringify(a)})).json();if(!l||!l[s])break;yield l[s];const c=l.cursors;if(!c||!c.next)break;a.cursor=c.next}}_shouldSample(){return this.tracingSampleRate===void 0?!0:Math.random()<this.tracingSampleRate}_filterForSampling(e,r=!1){if(this.tracingSampleRate===void 0)return e;if(r){const n=[];for(const s of e)this.filteredPostUuids.has(s.id)?this.filteredPostUuids.delete(s.id):n.push(s);return n}else{const n=[];for(const s of e){const a=s.trace_id??s.id;this.filteredPostUuids.has(a)||(s.id===a?this._shouldSample()?n.push(s):this.filteredPostUuids.add(a):n.push(s))}return n}}async _getBatchSizeLimitBytes(){var r;const e=await this._ensureServerInfo();return this.batchSizeBytesLimit??((r=e.batch_ingest_config)==null?void 0:r.size_limit_bytes)??DEFAULT_BATCH_SIZE_LIMIT_BYTES}async _getMultiPartSupport(){var r;return((r=(await this._ensureServerInfo()).instance_flags)==null?void 0:r.dataset_examples_multipart_enabled)??!1}drainAutoBatchQueue(e){const r=[];for(;this.autoBatchQueue.items.length>0;){const[n,s]=this.autoBatchQueue.pop(e);if(!n.length){s();break}const a=this._processBatch(n,s).catch(console.error);r.push(a)}return Promise.all(r)}async _processBatch(e,r){var n;if(!e.length){r();return}try{const s={runCreates:e.filter(o=>o.action==="create").map(o=>o.item),runUpdates:e.filter(o=>o.action==="update").map(o=>o.item)},a=await this._ensureServerInfo();(n=a==null?void 0:a.batch_ingest_config)!=null&&n.use_multipart_endpoint?await this.multipartIngestRuns(s):await this.batchIngestRuns(s)}finally{r()}}async processRunOperation(e){clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0,e.action==="create"&&(e.item=mergeRuntimeEnvIntoRunCreate(e.item));const r=this.autoBatchQueue.push(e);if(this.manualFlushMode)return r;const n=await this._getBatchSizeLimitBytes();return this.autoBatchQueue.sizeBytes>n&&this.drainAutoBatchQueue(n),this.autoBatchQueue.items.length>0&&(this.autoBatchTimeout=setTimeout(()=>{this.autoBatchTimeout=void 0,this.drainAutoBatchQueue(n)},this.autoBatchAggregationDelayMs)),r}async _getServerInfo(){const e=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/info`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(SERVER_INFO_REQUEST_TIMEOUT),...this.fetchOptions});await raiseForStatus(e,"get server info");const r=await e.json();return this.debug&&console.log(`
=== LangSmith Server Configuration ===
`+JSON.stringify(r,null,2)+`
`),r}async _ensureServerInfo(){return this._getServerInfoPromise===void 0&&(this._getServerInfoPromise=(async()=>{if(this._serverInfo===void 0)try{this._serverInfo=await this._getServerInfo()}catch(e){console.warn(`[WARNING]: LangSmith failed to fetch info on supported operations with status code ${e.status}. Falling back to batch operations and default limits.`)}return this._serverInfo??{}})()),this._getServerInfoPromise.then(e=>(this._serverInfo===void 0&&(this._getServerInfoPromise=void 0),e))}async _getSettings(){return this.settings||(this.settings=this._get("/settings")),await this.settings}async flush(){const e=await this._getBatchSizeLimitBytes();await this.drainAutoBatchQueue(e)}async createRun(e){if(!this._filterForSampling([e]).length)return;const r={...this.headers,"Content-Type":"application/json"},n=e.project_name;delete e.project_name;const s=await this.prepareRunCreateOrUpdateInputs({session_name:n,...e,start_time:e.start_time??Date.now()});if(this.autoBatchTracing&&s.trace_id!==void 0&&s.dotted_order!==void 0){this.processRunOperation({action:"create",item:s}).catch(console.error);return}const a=mergeRuntimeEnvIntoRunCreate(s),o=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/runs`,{method:"POST",headers:r,body:serialize(a,`Creating run with id: ${a.id}`),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(o,"create run",!0)}async batchIngestRuns({runCreates:e,runUpdates:r}){if(e===void 0&&r===void 0)return;let n=await Promise.all((e==null?void 0:e.map(l=>this.prepareRunCreateOrUpdateInputs(l)))??[]),s=await Promise.all((r==null?void 0:r.map(l=>this.prepareRunCreateOrUpdateInputs(l)))??[]);if(n.length>0&&s.length>0){const l=n.reduce((d,p)=>(p.id&&(d[p.id]=p),d),{}),c=[];for(const d of s)d.id!==void 0&&l[d.id]?l[d.id]={...l[d.id],...d}:c.push(d);n=Object.values(l),s=c}const a={post:n,patch:s};if(!a.post.length&&!a.patch.length)return;const o={post:[],patch:[]};for(const l of["post","patch"]){const c=l,d=a[c].reverse();let p=d.pop();for(;p!==void 0;)o[c].push(p),p=d.pop()}if(o.post.length>0||o.patch.length>0){const l=o.post.map(c=>c.id).concat(o.patch.map(c=>c.id)).join(",");await this._postBatchIngestRuns(serialize(o,`Ingesting runs with ids: ${l}`))}}async _postBatchIngestRuns(e){const r={...this.headers,"Content-Type":"application/json",Accept:"application/json"},n=await this.batchIngestCaller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/runs/batch`,{method:"POST",headers:r,body:e,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(n,"batch create run",!0)}async multipartIngestRuns({runCreates:e,runUpdates:r}){if(e===void 0&&r===void 0)return;const n={};let s=[];for(const p of e??[]){const g=await this.prepareRunCreateOrUpdateInputs(p);g.id!==void 0&&g.attachments!==void 0&&(n[g.id]=g.attachments),delete g.attachments,s.push(g)}let a=[];for(const p of r??[])a.push(await this.prepareRunCreateOrUpdateInputs(p));if(s.find(p=>p.trace_id===void 0||p.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when creating a run');if(a.find(p=>p.trace_id===void 0||p.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when updating a run');if(s.length>0&&a.length>0){const p=s.reduce((y,x)=>(x.id&&(y[x.id]=x),y),{}),g=[];for(const y of a)y.id!==void 0&&p[y.id]?p[y.id]={...p[y.id],...y}:g.push(y);s=Object.values(p),a=g}if(s.length===0&&a.length===0)return;const c=[],d=[];for(const[p,g]of[["post",s],["patch",a]])for(const y of g){const{inputs:x,outputs:E,events:S,attachments:k,...C}=y,P={inputs:x,outputs:E,events:S},R=serialize(C,`Serializing for multipart ingestion of run with id: ${C.id}`);d.push({name:`${p}.${C.id}`,payload:new Blob([R],{type:`application/json; length=${R.length}`})});for(const[j,I]of Object.entries(P)){if(I===void 0)continue;const O=serialize(I,`Serializing ${j} for multipart ingestion of run with id: ${C.id}`);d.push({name:`${p}.${C.id}.${j}`,payload:new Blob([O],{type:`application/json; length=${O.length}`})})}if(C.id!==void 0){const j=n[C.id];if(j){delete n[C.id];for(const[I,O]of Object.entries(j)){let L,B;if(Array.isArray(O)?[L,B]=O:(L=O.mimeType,B=O.data),I.includes(".")){console.warn(`Skipping attachment '${I}' for run ${C.id}: Invalid attachment name. Attachment names must not contain periods ('.'). Please rename the attachment and try again.`);continue}d.push({name:`attachment.${C.id}.${I}`,payload:new Blob([B],{type:`${L}; length=${B.byteLength}`})})}}}c.push(`trace=${C.trace_id},id=${C.id}`)}await this._sendMultipartRequest(d,c.join("; "))}async _createNodeFetchBody(e,r){const n=[];for(const o of e)n.push(new Blob([`--${r}\r
`])),n.push(new Blob([`Content-Disposition: form-data; name="${o.name}"\r
`,`Content-Type: ${o.payload.type}\r
\r
`])),n.push(o.payload),n.push(new Blob([`\r
`]));return n.push(new Blob([`--${r}--\r
`])),await new Blob(n).arrayBuffer()}async _createMultipartStream(e,r){const n=new TextEncoder;return new ReadableStream({async start(a){const o=async l=>{typeof l=="string"?a.enqueue(n.encode(l)):a.enqueue(l)};for(const l of e){await o(`--${r}\r
`),await o(`Content-Disposition: form-data; name="${l.name}"\r
`),await o(`Content-Type: ${l.payload.type}\r
\r
`);const d=l.payload.stream().getReader();try{let p;for(;!(p=await d.read()).done;)a.enqueue(p.value)}finally{d.releaseLock()}await o(`\r
`)}await o(`--${r}--\r
`),a.close()}})}async _sendMultipartRequest(e,r){try{const n="----LangSmithFormBoundary"+Math.random().toString(36).slice(2),s=await(_globalFetchImplementationIsNodeFetch()?this._createNodeFetchBody(e,n):this._createMultipartStream(e,n)),a=await this.batchIngestCaller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/runs/multipart`,{method:"POST",headers:{...this.headers,"Content-Type":`multipart/form-data; boundary=${n}`},body:s,duplex:"half",signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(a,"ingest multipart runs",!0)}catch(n){console.warn(`${n.message.trim()}

Context: ${r}`)}}async updateRun(e,r){assertUuid(e),r.inputs&&(r.inputs=await this.processInputs(r.inputs)),r.outputs&&(r.outputs=await this.processOutputs(r.outputs));const n={...r,id:e};if(!this._filterForSampling([n],!0).length)return;if(this.autoBatchTracing&&n.trace_id!==void 0&&n.dotted_order!==void 0){if(r.end_time!==void 0&&n.parent_run_id===void 0&&this.blockOnRootRunFinalization&&!this.manualFlushMode){await this.processRunOperation({action:"update",item:n}).catch(console.error);return}else this.processRunOperation({action:"update",item:n}).catch(console.error);return}const s={...this.headers,"Content-Type":"application/json"},a=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/runs/${e}`,{method:"PATCH",headers:s,body:serialize(r,`Serializing payload to update run with id: ${e}`),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(a,"update run",!0)}async readRun(e,{loadChildRuns:r}={loadChildRuns:!1}){assertUuid(e);let n=await this._get(`/runs/${e}`);return r&&n.child_run_ids&&(n=await this._loadChildRuns(n)),n}async getRunUrl({runId:e,run:r,projectOpts:n}){if(r!==void 0){let s;r.session_id?s=r.session_id:n!=null&&n.projectName?s=(await this.readProject({projectName:n==null?void 0:n.projectName})).id:n!=null&&n.projectId?s=n==null?void 0:n.projectId:s=(await this.readProject({projectName:getLangSmithEnvironmentVariable("PROJECT")||"default"})).id;const a=await this._getTenantId();return`${this.getHostUrl()}/o/${a}/projects/p/${s}/r/${r.id}?poll=true`}else if(e!==void 0){const s=await this.readRun(e);if(!s.app_path)throw new Error(`Run ${e} has no app_path`);return`${this.getHostUrl()}${s.app_path}`}else throw new Error("Must provide either runId or run")}async _loadChildRuns(e){const r=await toArray(this.listRuns({id:e.child_run_ids})),n={},s={};r.sort((a,o)=>((a==null?void 0:a.dotted_order)??"").localeCompare((o==null?void 0:o.dotted_order)??""));for(const a of r){if(a.parent_run_id===null||a.parent_run_id===void 0)throw new Error(`Child run ${a.id} has no parent`);a.parent_run_id in n||(n[a.parent_run_id]=[]),n[a.parent_run_id].push(a),s[a.id]=a}e.child_runs=n[e.id]||[];for(const a in n)a!==e.id&&(s[a].child_runs=n[a]);return e}async*listRuns(e){const{projectId:r,projectName:n,parentRunId:s,traceId:a,referenceExampleId:o,startTime:l,executionOrder:c,isRoot:d,runType:p,error:g,id:y,query:x,filter:E,traceFilter:S,treeFilter:k,limit:C,select:P,order:R}=e;let j=[];if(r&&(j=Array.isArray(r)?r:[r]),n){const B=Array.isArray(n)?n:[n],Z=await Promise.all(B.map(te=>this.readProject({projectName:te}).then(ie=>ie.id)));j.push(...Z)}const I=["app_path","child_run_ids","completion_cost","completion_tokens","dotted_order","end_time","error","events","extra","feedback_stats","first_token_time","id","inputs","name","outputs","parent_run_id","parent_run_ids","prompt_cost","prompt_tokens","reference_example_id","run_type","session_id","start_time","status","tags","total_cost","total_tokens","trace_id"],O={session:j.length?j:null,run_type:p,reference_example:o,query:x,filter:E,trace_filter:S,tree_filter:k,execution_order:c,parent_run:s,start_time:l?l.toISOString():null,error:g,id:y,limit:C,trace:a,select:P||I,is_root:d,order:R};let L=0;for await(const B of this._getCursorPaginatedList("/runs/query",O))if(C){if(L>=C)break;if(B.length+L>C){yield*B.slice(0,C-L);break}L+=B.length,yield*B}else yield*B}async*listGroupRuns(e){const{projectId:r,projectName:n,groupBy:s,filter:a,startTime:o,endTime:l,limit:c,offset:d}=e,g={session_id:r||(await this.readProject({projectName:n})).id,group_by:s,filter:a,start_time:o?o.toISOString():null,end_time:l?l.toISOString():null,limit:Number(c)||100};let y=Number(d)||0;const x="/runs/group",E=`${this.apiUrl}${x}`;for(;;){const S={...g,offset:y},k=Object.fromEntries(Object.entries(S).filter(([I,O])=>O!==void 0)),C=await this.caller.call(_getFetchImplementation(),E,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(k),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(C,`Failed to fetch ${x}`);const P=await C.json(),{groups:R,total:j}=P;if(R.length===0)break;for(const I of R)yield I;if(y+=R.length,y>=j)break}}async getRunStats({id:e,trace:r,parentRun:n,runType:s,projectNames:a,projectIds:o,referenceExampleIds:l,startTime:c,endTime:d,error:p,query:g,filter:y,traceFilter:x,treeFilter:E,isRoot:S,dataSourceType:k}){let C=o||[];a&&(C=[...o||[],...await Promise.all(a.map(O=>this.readProject({projectName:O}).then(L=>L.id)))]);const R=Object.fromEntries(Object.entries({id:e,trace:r,parent_run:n,run_type:s,session:C,reference_example:l,start_time:c,end_time:d,error:p,query:g,filter:y,trace_filter:x,tree_filter:E,is_root:S,data_source_type:k}).filter(([O,L])=>L!==void 0));return await(await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/runs/stats`,{method:"POST",headers:this.headers,body:JSON.stringify(R),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async shareRun(e,{shareId:r}={}){const n={run_id:e,share_token:r||v4()};assertUuid(e);const a=await(await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(n),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();if(a===null||!("share_token"in a))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${a.share_token}/r`}async unshareRun(e){assertUuid(e);const r=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(r,"unshare run",!0)}async readRunSharedLink(e){assertUuid(e);const n=await(await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();if(!(n===null||!("share_token"in n)))return`${this.getHostUrl()}/public/${n.share_token}/r`}async listSharedRuns(e,{runIds:r}={}){const n=new URLSearchParams({share_token:e});if(r!==void 0)for(const o of r)n.append("id",o);return assertUuid(e),await(await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/public/${e}/runs${n}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async readDatasetSharedSchema(e,r){if(!e&&!r)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:r})).id),assertUuid(e);const s=await(await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/datasets/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();return s.url=`${this.getHostUrl()}/public/${s.share_token}/d`,s}async shareDataset(e,r){if(!e&&!r)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:r})).id);const n={dataset_id:e};assertUuid(e);const a=await(await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/datasets/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(n),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();return a.url=`${this.getHostUrl()}/public/${a.share_token}/d`,a}async unshareDataset(e){assertUuid(e);const r=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/datasets/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(r,"unshare dataset",!0)}async readSharedDataset(e){return assertUuid(e),await(await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/public/${e}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async listSharedExamples(e,r){const n={};r!=null&&r.exampleIds&&(n.id=r.exampleIds);const s=new URLSearchParams;Object.entries(n).forEach(([l,c])=>{Array.isArray(c)?c.forEach(d=>s.append(l,d)):s.append(l,c)});const a=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/public/${e}/examples?${s.toString()}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),o=await a.json();if(!a.ok)throw"detail"in o?new Error(`Failed to list shared examples.
Status: ${a.status}
Message: ${Array.isArray(o.detail)?o.detail.join(`
`):"Unspecified error"}`):new Error(`Failed to list shared examples: ${a.status} ${a.statusText}`);return o.map(l=>({...l,_hostUrl:this.getHostUrl()}))}async createProject({projectName:e,description:r=null,metadata:n=null,upsert:s=!1,projectExtra:a=null,referenceDatasetId:o=null}){const l=s?"?upsert=true":"",c=`${this.apiUrl}/sessions${l}`,d=a||{};n&&(d.metadata=n);const p={name:e,extra:d,description:r};o!==null&&(p.reference_dataset_id=o);const g=await this.caller.call(_getFetchImplementation(this.debug),c,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(p),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(g,"create project"),await g.json()}async updateProject(e,{name:r=null,description:n=null,metadata:s=null,projectExtra:a=null,endTime:o=null}){const l=`${this.apiUrl}/sessions/${e}`;let c=a;s&&(c={...c||{},metadata:s});const d={name:r,extra:c,description:n,end_time:o?new Date(o).toISOString():null},p=await this.caller.call(_getFetchImplementation(this.debug),l,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(d),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(p,"update project"),await p.json()}async hasProject({projectId:e,projectName:r}){let n="/sessions";const s=new URLSearchParams;if(e!==void 0&&r!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)assertUuid(e),n+=`/${e}`;else if(r!==void 0)s.append("name",r);else throw new Error("Must provide projectName or projectId");const a=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}${n}?${s}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});try{const o=await a.json();return a.ok?Array.isArray(o)?o.length>0:!0:!1}catch{return!1}}async readProject({projectId:e,projectName:r,includeStats:n}){let s="/sessions";const a=new URLSearchParams;if(e!==void 0&&r!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)assertUuid(e),s+=`/${e}`;else if(r!==void 0)a.append("name",r);else throw new Error("Must provide projectName or projectId");n!==void 0&&a.append("include_stats",n.toString());const o=await this._get(s,a);let l;if(Array.isArray(o)){if(o.length===0)throw new Error(`Project[id=${e}, name=${r}] not found`);l=o[0]}else l=o;return l}async getProjectUrl({projectId:e,projectName:r}){if(e===void 0&&r===void 0)throw new Error("Must provide either projectName or projectId");const n=await this.readProject({projectId:e,projectName:r}),s=await this._getTenantId();return`${this.getHostUrl()}/o/${s}/projects/p/${n.id}`}async getDatasetUrl({datasetId:e,datasetName:r}){if(e===void 0&&r===void 0)throw new Error("Must provide either datasetName or datasetId");const n=await this.readDataset({datasetId:e,datasetName:r}),s=await this._getTenantId();return`${this.getHostUrl()}/o/${s}/datasets/${n.id}`}async _getTenantId(){if(this._tenantId!==null)return this._tenantId;const e=new URLSearchParams({limit:"1"});for await(const r of this._getPaginated("/sessions",e))return this._tenantId=r[0].tenant_id,r[0].tenant_id;throw new Error("No projects found to resolve tenant.")}async*listProjects({projectIds:e,name:r,nameContains:n,referenceDatasetId:s,referenceDatasetName:a,referenceFree:o,metadata:l}={}){const c=new URLSearchParams;if(e!==void 0)for(const d of e)c.append("id",d);if(r!==void 0&&c.append("name",r),n!==void 0&&c.append("name_contains",n),s!==void 0)c.append("reference_dataset",s);else if(a!==void 0){const d=await this.readDataset({datasetName:a});c.append("reference_dataset",d.id)}o!==void 0&&c.append("reference_free",o.toString()),l!==void 0&&c.append("metadata",JSON.stringify(l));for await(const d of this._getPaginated("/sessions",c))yield*d}async deleteProject({projectId:e,projectName:r}){let n;if(e===void 0&&r===void 0)throw new Error("Must provide projectName or projectId");if(e!==void 0&&r!==void 0)throw new Error("Must provide either projectName or projectId, not both");e===void 0?n=(await this.readProject({projectName:r})).id:n=e,assertUuid(n);const s=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/sessions/${n}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(s,`delete session ${n} (${r})`,!0)}async uploadCsv({csvFile:e,fileName:r,inputKeys:n,outputKeys:s,description:a,dataType:o,name:l}){const c=`${this.apiUrl}/datasets/upload`,d=new FormData;d.append("file",e,r),n.forEach(y=>{d.append("input_keys",y)}),s.forEach(y=>{d.append("output_keys",y)}),a&&d.append("description",a),o&&d.append("data_type",o),l&&d.append("name",l);const p=await this.caller.call(_getFetchImplementation(this.debug),c,{method:"POST",headers:this.headers,body:d,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(p,"upload CSV"),await p.json()}async createDataset(e,{description:r,dataType:n,inputsSchema:s,outputsSchema:a,metadata:o}={}){const l={name:e,description:r,extra:o?{metadata:o}:void 0};n&&(l.data_type=n),s&&(l.inputs_schema_definition=s),a&&(l.outputs_schema_definition=a);const c=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(l),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(c,"create dataset"),await c.json()}async readDataset({datasetId:e,datasetName:r}){let n="/datasets";const s=new URLSearchParams({limit:"1"});if(e!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)assertUuid(e),n+=`/${e}`;else if(r!==void 0)s.append("name",r);else throw new Error("Must provide datasetName or datasetId");const a=await this._get(n,s);let o;if(Array.isArray(a)){if(a.length===0)throw new Error(`Dataset[id=${e}, name=${r}] not found`);o=a[0]}else o=a;return o}async hasDataset({datasetId:e,datasetName:r}){try{return await this.readDataset({datasetId:e,datasetName:r}),!0}catch(n){if(n instanceof Error&&n.message.toLocaleLowerCase().includes("not found"))return!1;throw n}}async diffDatasetVersions({datasetId:e,datasetName:r,fromVersion:n,toVersion:s}){let a=e;if(a===void 0&&r===void 0)throw new Error("Must provide either datasetName or datasetId");if(a!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");a===void 0&&(a=(await this.readDataset({datasetName:r})).id);const o=new URLSearchParams({from_version:typeof n=="string"?n:n.toISOString(),to_version:typeof s=="string"?s:s.toISOString()});return await this._get(`/datasets/${a}/versions/diff`,o)}async readDatasetOpenaiFinetuning({datasetId:e,datasetName:r}){const n="/datasets";if(e===void 0)if(r!==void 0)e=(await this.readDataset({datasetName:r})).id;else throw new Error("Must provide either datasetName or datasetId");return(await(await this._getResponse(`${n}/${e}/openai_ft`)).text()).trim().split(`
`).map(l=>JSON.parse(l))}async*listDatasets({limit:e=100,offset:r=0,datasetIds:n,datasetName:s,datasetNameContains:a,metadata:o}={}){const l="/datasets",c=new URLSearchParams({limit:e.toString(),offset:r.toString()});if(n!==void 0)for(const d of n)c.append("id",d);s!==void 0&&c.append("name",s),a!==void 0&&c.append("name_contains",a),o!==void 0&&c.append("metadata",JSON.stringify(o));for await(const d of this._getPaginated(l,c))yield*d}async updateDataset(e){const{datasetId:r,datasetName:n,...s}=e;if(!r&&!n)throw new Error("Must provide either datasetName or datasetId");const a=r??(await this.readDataset({datasetName:n})).id;assertUuid(a);const o=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/datasets/${a}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(o,"update dataset"),await o.json()}async updateDatasetTag(e){const{datasetId:r,datasetName:n,asOf:s,tag:a}=e;if(!r&&!n)throw new Error("Must provide either datasetName or datasetId");const o=r??(await this.readDataset({datasetName:n})).id;assertUuid(o);const l=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/datasets/${o}/tags`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({as_of:typeof s=="string"?s:s.toISOString(),tag:a}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(l,"update dataset tags")}async deleteDataset({datasetId:e,datasetName:r}){let n="/datasets",s=e;if(e!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(r!==void 0&&(s=(await this.readDataset({datasetName:r})).id),s!==void 0)assertUuid(s),n+=`/${s}`;else throw new Error("Must provide datasetName or datasetId");const a=await this.caller.call(_getFetchImplementation(this.debug),this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(a,`delete ${n}`),await a.json()}async indexDataset({datasetId:e,datasetName:r,tag:n}){let s=e;if(!s&&!r)throw new Error("Must provide either datasetName or datasetId");if(s&&r)throw new Error("Must provide either datasetName or datasetId, not both");s||(s=(await this.readDataset({datasetName:r})).id),assertUuid(s);const a={tag:n},o=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/datasets/${s}/index`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(o,"index dataset"),await o.json()}async similarExamples(e,r,n,{filter:s}={}){const a={limit:n,inputs:e};s!==void 0&&(a.filter=s),assertUuid(r);const o=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/datasets/${r}/search`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(o,"fetch similar examples"),(await o.json()).examples}async createExample(e,r,n){var p;if(isExampleCreate(e)&&(r!==void 0||n!==void 0))throw new Error("Cannot provide outputs or options when using ExampleCreate object");let s=r?n==null?void 0:n.datasetId:e.dataset_id;const a=r?n==null?void 0:n.datasetName:e.dataset_name;if(s===void 0&&a===void 0)throw new Error("Must provide either datasetName or datasetId");if(s!==void 0&&a!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");s===void 0&&(s=(await this.readDataset({datasetName:a})).id);const o=(r?n==null?void 0:n.createdAt:e.created_at)||new Date;let l;isExampleCreate(e)?l=e:l={inputs:e,outputs:r,created_at:o==null?void 0:o.toISOString(),id:n==null?void 0:n.exampleId,metadata:n==null?void 0:n.metadata,split:n==null?void 0:n.split,source_run_id:n==null?void 0:n.sourceRunId,use_source_run_io:n==null?void 0:n.useSourceRunIO,use_source_run_attachments:n==null?void 0:n.useSourceRunAttachments,attachments:n==null?void 0:n.attachments};const c=await this._uploadExamplesMultipart(s,[l]);return await this.readExample(((p=c.example_ids)==null?void 0:p[0])??v4())}async createExamples(e){if(Array.isArray(e)){if(e.length===0)return[];const P=e;let R=P[0].dataset_id;const j=P[0].dataset_name;if(R===void 0&&j===void 0)throw new Error("Must provide either datasetName or datasetId");if(R!==void 0&&j!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");R===void 0&&(R=(await this.readDataset({datasetName:j})).id);const I=await this._uploadExamplesMultipart(R,P);return await Promise.all(I.example_ids.map(L=>this.readExample(L)))}const{inputs:r,outputs:n,metadata:s,splits:a,sourceRunIds:o,useSourceRunIOs:l,useSourceRunAttachments:c,attachments:d,exampleIds:p,datasetId:g,datasetName:y}=e;if(r===void 0)throw new Error("Must provide inputs when using legacy parameters");let x=g;const E=y;if(x===void 0&&E===void 0)throw new Error("Must provide either datasetName or datasetId");if(x!==void 0&&E!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");x===void 0&&(x=(await this.readDataset({datasetName:E})).id);const S=r.map((P,R)=>({dataset_id:x,inputs:P,outputs:n==null?void 0:n[R],metadata:s==null?void 0:s[R],split:a==null?void 0:a[R],id:p==null?void 0:p[R],attachments:d==null?void 0:d[R],source_run_id:o==null?void 0:o[R],use_source_run_io:l==null?void 0:l[R],use_source_run_attachments:c==null?void 0:c[R]})),k=await this._uploadExamplesMultipart(x,S);return await Promise.all(k.example_ids.map(P=>this.readExample(P)))}async createLLMExample(e,r,n){return this.createExample({input:e},{output:r},n)}async createChatExample(e,r,n){const s=e.map(o=>isLangChainMessage(o)?convertLangChainMessageToExample(o):o),a=isLangChainMessage(r)?convertLangChainMessageToExample(r):r;return this.createExample({input:s},{output:a},n)}async readExample(e){assertUuid(e);const r=`/examples/${e}`,n=await this._get(r),{attachment_urls:s,...a}=n,o=a;return s&&(o.attachments=Object.entries(s).reduce((l,[c,d])=>(l[c.slice(11)]={presigned_url:d.presigned_url,mime_type:d.mime_type},l),{})),o}async*listExamples({datasetId:e,datasetName:r,exampleIds:n,asOf:s,splits:a,inlineS3Urls:o,metadata:l,limit:c,offset:d,filter:p,includeAttachments:g}={}){let y;if(e!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)y=e;else if(r!==void 0)y=(await this.readDataset({datasetName:r})).id;else throw new Error("Must provide a datasetName or datasetId");const x=new URLSearchParams({dataset:y}),E=s?typeof s=="string"?s:s==null?void 0:s.toISOString():void 0;E&&x.append("as_of",E);const S=o??!0;if(x.append("inline_s3_urls",S.toString()),n!==void 0)for(const C of n)x.append("id",C);if(a!==void 0)for(const C of a)x.append("splits",C);if(l!==void 0){const C=JSON.stringify(l);x.append("metadata",C)}c!==void 0&&x.append("limit",c.toString()),d!==void 0&&x.append("offset",d.toString()),p!==void 0&&x.append("filter",p),g===!0&&["attachment_urls","outputs","metadata"].forEach(C=>x.append("select",C));let k=0;for await(const C of this._getPaginated("/examples",x)){for(const P of C){const{attachment_urls:R,...j}=P,I=j;R&&(I.attachments=Object.entries(R).reduce((O,[L,B])=>(O[L.slice(11)]={presigned_url:B.presigned_url,mime_type:B.mime_type||void 0},O),{})),yield I,k++}if(c!==void 0&&k>=c)break}}async deleteExample(e){assertUuid(e);const r=`/examples/${e}`,n=await this.caller.call(_getFetchImplementation(this.debug),this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(n,`delete ${r}`),await n.json()}async updateExample(e,r){let n;r?n=e:n=e.id,assertUuid(n);let s;r?s={id:n,...r}:s=e;let a;return s.dataset_id!==void 0?a=s.dataset_id:a=(await this.readExample(n)).dataset_id,this._updateExamplesMultipart(a,[s])}async updateExamples(e){let r;return e[0].dataset_id===void 0?r=(await this.readExample(e[0].id)).dataset_id:r=e[0].dataset_id,this._updateExamplesMultipart(r,e)}async readDatasetVersion({datasetId:e,datasetName:r,asOf:n,tag:s}){let a;if(e?a=e:a=(await this.readDataset({datasetName:r})).id,assertUuid(a),n&&s||!n&&!s)throw new Error("Exactly one of asOf and tag must be specified.");const o=new URLSearchParams;n!==void 0&&o.append("as_of",typeof n=="string"?n:n.toISOString()),s!==void 0&&o.append("tag",s);const l=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/datasets/${a}/version?${o.toString()}`,{method:"GET",headers:{...this.headers},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(l,"read dataset version"),await l.json()}async listDatasetSplits({datasetId:e,datasetName:r,asOf:n}){let s;if(e===void 0&&r===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?s=(await this.readDataset({datasetName:r})).id:s=e,assertUuid(s);const a=new URLSearchParams,o=n?typeof n=="string"?n:n==null?void 0:n.toISOString():void 0;return o&&a.append("as_of",o),await this._get(`/datasets/${s}/splits`,a)}async updateDatasetSplits({datasetId:e,datasetName:r,splitName:n,exampleIds:s,remove:a=!1}){let o;if(e===void 0&&r===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?o=(await this.readDataset({datasetName:r})).id:o=e,assertUuid(o);const l={split_name:n,examples:s.map(d=>(assertUuid(d),d)),remove:a},c=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/datasets/${o}/splits`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(l),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(c,"update dataset splits",!0)}async evaluateRun(e,r,{sourceInfo:n,loadChildRuns:s,referenceExample:a}={loadChildRuns:!1}){warnOnce("This method is deprecated and will be removed in future LangSmith versions, use `evaluate` from `langsmith/evaluation` instead.");let o;if(typeof e=="string")o=await this.readRun(e,{loadChildRuns:s});else if(typeof e=="object"&&"id"in e)o=e;else throw new Error(`Invalid run type: ${typeof e}`);o.reference_example_id!==null&&o.reference_example_id!==void 0&&(a=await this.readExample(o.reference_example_id));const l=await r.evaluateRun(o,a),[c,d]=await this._logEvaluationFeedback(l,o,n);return d[0]}async createFeedback(e,r,{score:n,value:s,correction:a,comment:o,sourceInfo:l,feedbackSourceType:c="api",sourceRunId:d,feedbackId:p,feedbackConfig:g,projectId:y,comparativeExperimentId:x}){var P;if(!e&&!y)throw new Error("One of runId or projectId must be provided");if(e&&y)throw new Error("Only one of runId or projectId can be provided");const E={type:c??"api",metadata:l??{}};d!==void 0&&(E==null?void 0:E.metadata)!==void 0&&!E.metadata.__run&&(E.metadata.__run={run_id:d}),(E==null?void 0:E.metadata)!==void 0&&((P=E.metadata.__run)==null?void 0:P.run_id)!==void 0&&assertUuid(E.metadata.__run.run_id);const S={id:p??v4(),run_id:e,key:r,score:_formatFeedbackScore(n),value:s,correction:a,comment:o,feedback_source:E,comparative_experiment_id:x,feedbackConfig:g,session_id:y},k=`${this.apiUrl}/feedback`,C=await this.caller.call(_getFetchImplementation(this.debug),k,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(S),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(C,"create feedback",!0),S}async updateFeedback(e,{score:r,value:n,correction:s,comment:a}){const o={};r!=null&&(o.score=_formatFeedbackScore(r)),n!=null&&(o.value=n),s!=null&&(o.correction=s),a!=null&&(o.comment=a),assertUuid(e);const l=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/feedback/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(l,"update feedback",!0)}async readFeedback(e){assertUuid(e);const r=`/feedback/${e}`;return await this._get(r)}async deleteFeedback(e){assertUuid(e);const r=`/feedback/${e}`,n=await this.caller.call(_getFetchImplementation(this.debug),this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(n,`delete ${r}`),await n.json()}async*listFeedback({runIds:e,feedbackKeys:r,feedbackSourceTypes:n}={}){const s=new URLSearchParams;if(e&&s.append("run",e.join(",")),r)for(const a of r)s.append("key",a);if(n)for(const a of n)s.append("source",a);for await(const a of this._getPaginated("/feedback",s))yield*a}async createPresignedFeedbackToken(e,r,{expiration:n,feedbackConfig:s}={}){const a={run_id:e,feedback_key:r,feedback_config:s};return n?typeof n=="string"?a.expires_at=n:(n!=null&&n.hours||n!=null&&n.minutes||n!=null&&n.days)&&(a.expires_in=n):a.expires_in={hours:3},await(await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/feedback/tokens`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async createComparativeExperiment({name:e,experimentIds:r,referenceDatasetId:n,createdAt:s,description:a,metadata:o,id:l}){var p;if(r.length===0)throw new Error("At least one experiment is required");if(n||(n=(await this.readProject({projectId:r[0]})).reference_dataset_id),!n==null)throw new Error("A reference dataset is required");const c={id:l,name:e,experiment_ids:r,reference_dataset_id:n,description:a,created_at:(p=s??new Date)==null?void 0:p.toISOString(),extra:{}};return o&&(c.extra.metadata=o),await(await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/datasets/comparative`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(c),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async*listPresignedFeedbackTokens(e){assertUuid(e);const r=new URLSearchParams({run_id:e});for await(const n of this._getPaginated("/feedback/tokens",r))yield*n}_selectEvalResults(e){let r;return"results"in e?r=e.results:Array.isArray(e)?r=e:r=[e],r}async _logEvaluationFeedback(e,r,n){const s=this._selectEvalResults(e),a=[];for(const o of s){let l=n||{};o.evaluatorInfo&&(l={...o.evaluatorInfo,...l});let c=null;o.targetRunId?c=o.targetRunId:r&&(c=r.id),a.push(await this.createFeedback(c,o.key,{score:o.score,value:o.value,comment:o.comment,correction:o.correction,sourceInfo:l,sourceRunId:o.sourceRunId,feedbackConfig:o.feedbackConfig,feedbackSourceType:"model"}))}return[s,a]}async logEvaluationFeedback(e,r,n){const[s]=await this._logEvaluationFeedback(e,r,n);return s}async*listAnnotationQueues(e={}){const{queueIds:r,name:n,nameContains:s,limit:a}=e,o=new URLSearchParams;r&&r.forEach((c,d)=>{assertUuid(c,`queueIds[${d}]`),o.append("ids",c)}),n&&o.append("name",n),s&&o.append("name_contains",s),o.append("limit",(a!==void 0?Math.min(a,100):100).toString());let l=0;for await(const c of this._getPaginated("/annotation-queues",o))if(yield*c,l++,a!==void 0&&l>=a)break}async createAnnotationQueue(e){const{name:r,description:n,queueId:s,rubricInstructions:a}=e,o={name:r,description:n,id:s||v4(),rubric_instructions:a},l=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/annotation-queues`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(Object.fromEntries(Object.entries(o).filter(([d,p])=>p!==void 0))),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(l,"create annotation queue"),await l.json()}async readAnnotationQueue(e){const r=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/annotation-queues/${assertUuid(e,"queueId")}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(r,"read annotation queue"),await r.json()}async updateAnnotationQueue(e,r){const{name:n,description:s,rubricInstructions:a}=r,o=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/annotation-queues/${assertUuid(e,"queueId")}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({name:n,description:s,rubric_instructions:a}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(o,"update annotation queue")}async deleteAnnotationQueue(e){const r=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/annotation-queues/${assertUuid(e,"queueId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(r,"delete annotation queue")}async addRunsToAnnotationQueue(e,r){const n=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/annotation-queues/${assertUuid(e,"queueId")}/runs`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(r.map((s,a)=>assertUuid(s,`runIds[${a}]`).toString())),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(n,"add runs to annotation queue")}async getRunFromAnnotationQueue(e,r){const n=`/annotation-queues/${assertUuid(e,"queueId")}/run`,s=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}${n}/${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(s,"get run from annotation queue"),await s.json()}async deleteRunFromAnnotationQueue(e,r){const n=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/annotation-queues/${assertUuid(e,"queueId")}/runs/${assertUuid(r,"queueRunId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(n,"delete run from annotation queue")}async getSizeFromAnnotationQueue(e){const r=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/annotation-queues/${assertUuid(e,"queueId")}/size`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(r,"get size from annotation queue"),await r.json()}async _currentTenantIsOwner(e){const r=await this._getSettings();return e=="-"||r.tenant_handle===e}async _ownerConflictError(e,r){const n=await this._getSettings();return new Error(`Cannot ${e} for another tenant.

      Current tenant: ${n.tenant_handle}

      Requested tenant: ${r}`)}async _getLatestCommitHash(e){const r=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/commits/${e}/?limit=1&offset=0`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),n=await r.json();if(!r.ok){const s=typeof n.detail=="string"?n.detail:JSON.stringify(n.detail),a=new Error(`Error ${r.status}: ${r.statusText}
${s}`);throw a.statusCode=r.status,a}if(n.commits.length!==0)return n.commits[0].commit_hash}async _likeOrUnlikePrompt(e,r){const[n,s,a]=parsePromptIdentifier(e),o=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/likes/${n}/${s}`,{method:"POST",body:JSON.stringify({like:r}),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(o,`${r?"like":"unlike"} prompt`),await o.json()}async _getPromptUrl(e){const[r,n,s]=parsePromptIdentifier(e);if(await this._currentTenantIsOwner(r)){const a=await this._getSettings();return s!=="latest"?`${this.getHostUrl()}/prompts/${n}/${s.substring(0,8)}?organizationId=${a.id}`:`${this.getHostUrl()}/prompts/${n}?organizationId=${a.id}`}else return s!=="latest"?`${this.getHostUrl()}/hub/${r}/${n}/${s.substring(0,8)}`:`${this.getHostUrl()}/hub/${r}/${n}`}async promptExists(e){return!!await this.getPrompt(e)}async likePrompt(e){return this._likeOrUnlikePrompt(e,!0)}async unlikePrompt(e){return this._likeOrUnlikePrompt(e,!1)}async*listCommits(e){for await(const r of this._getPaginated(`/commits/${e}/`,new URLSearchParams,n=>n.commits))yield*r}async*listPrompts(e){const r=new URLSearchParams;r.append("sort_field",(e==null?void 0:e.sortField)??"updated_at"),r.append("sort_direction","desc"),r.append("is_archived",(!!(e!=null&&e.isArchived)).toString()),(e==null?void 0:e.isPublic)!==void 0&&r.append("is_public",e.isPublic.toString()),e!=null&&e.query&&r.append("query",e.query);for await(const n of this._getPaginated("/repos",r,s=>s.repos))yield*n}async getPrompt(e){const[r,n,s]=parsePromptIdentifier(e),a=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/repos/${r}/${n}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(a.status===404)return null;await raiseForStatus(a,"get prompt");const o=await a.json();return o.repo?o.repo:null}async createPrompt(e,r){const n=await this._getSettings();if(r!=null&&r.isPublic&&!n.tenant_handle)throw new Error(`Cannot create a public prompt without first

        creating a LangChain Hub handle. 
        You can add a handle by creating a public prompt at:

        https://smith.langchain.com/prompts`);const[s,a,o]=parsePromptIdentifier(e);if(!await this._currentTenantIsOwner(s))throw await this._ownerConflictError("create a prompt",s);const l={repo_handle:a,...(r==null?void 0:r.description)&&{description:r.description},...(r==null?void 0:r.readme)&&{readme:r.readme},...(r==null?void 0:r.tags)&&{tags:r.tags},is_public:!!(r!=null&&r.isPublic)},c=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/repos/`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(l),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(c,"create prompt");const{repo:d}=await c.json();return d}async createCommit(e,r,n){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[s,a,o]=parsePromptIdentifier(e),l=(n==null?void 0:n.parentCommitHash)==="latest"||!(n!=null&&n.parentCommitHash)?await this._getLatestCommitHash(`${s}/${a}`):n==null?void 0:n.parentCommitHash,c={manifest:JSON.parse(JSON.stringify(r)),parent_commit:l},d=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/commits/${s}/${a}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(c),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(d,"create commit");const p=await d.json();return this._getPromptUrl(`${s}/${a}${p.commit_hash?`:${p.commit_hash}`:""}`)}async updateExamplesMultipart(e,r=[]){return this._updateExamplesMultipart(e,r)}async _updateExamplesMultipart(e,r=[]){var l;if(!await this._getMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");const n=new FormData;for(const c of r){const d=c.id,p={...c.metadata&&{metadata:c.metadata},...c.split&&{split:c.split}},g=serialize(p,`Serializing body for example with id: ${d}`),y=new Blob([g],{type:"application/json"});if(n.append(d,y),c.inputs){const x=serialize(c.inputs,`Serializing inputs for example with id: ${d}`),E=new Blob([x],{type:"application/json"});n.append(`${d}.inputs`,E)}if(c.outputs){const x=serialize(c.outputs,`Serializing outputs whle updating example with id: ${d}`),E=new Blob([x],{type:"application/json"});n.append(`${d}.outputs`,E)}if(c.attachments)for(const[x,E]of Object.entries(c.attachments)){let S,k;Array.isArray(E)?[S,k]=E:(S=E.mimeType,k=E.data);const C=new Blob([k],{type:`${S}; length=${k.byteLength}`});n.append(`${d}.attachment.${x}`,C)}if(c.attachments_operations){const x=serialize(c.attachments_operations,`Serializing attachments while updating example with id: ${d}`),E=new Blob([x],{type:"application/json"});n.append(`${d}.attachments_operations`,E)}}const s=e??((l=r[0])==null?void 0:l.dataset_id);return await(await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/v1/platform/datasets/${s}/examples`,{method:"PATCH",headers:this.headers,body:n})).json()}async uploadExamplesMultipart(e,r=[]){return this._uploadExamplesMultipart(e,r)}async _uploadExamplesMultipart(e,r=[]){if(!await this._getMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");const n=new FormData;for(const o of r){const l=(o.id??v4()).toString(),c={created_at:o.created_at,...o.metadata&&{metadata:o.metadata},...o.split&&{split:o.split},...o.source_run_id&&{source_run_id:o.source_run_id},...o.use_source_run_io&&{use_source_run_io:o.use_source_run_io},...o.use_source_run_attachments&&{use_source_run_attachments:o.use_source_run_attachments}},d=serialize(c,`Serializing body for uploaded example with id: ${l}`),p=new Blob([d],{type:"application/json"});if(n.append(l,p),o.inputs){const g=serialize(o.inputs,`Serializing inputs for uploaded example with id: ${l}`),y=new Blob([g],{type:"application/json"});n.append(`${l}.inputs`,y)}if(o.outputs){const g=serialize(o.outputs,`Serializing outputs for uploaded example with id: ${l}`),y=new Blob([g],{type:"application/json"});n.append(`${l}.outputs`,y)}if(o.attachments)for(const[g,y]of Object.entries(o.attachments)){let x,E;Array.isArray(y)?[x,E]=y:(x=y.mimeType,E=y.data);const S=new Blob([E],{type:`${x}; length=${E.byteLength}`});n.append(`${l}.attachment.${g}`,S)}}const s=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/v1/platform/datasets/${e}/examples`,{method:"POST",headers:this.headers,body:n});return await raiseForStatus(s,"upload examples"),await s.json()}async updatePrompt(e,r){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[n,s]=parsePromptIdentifier(e);if(!await this._currentTenantIsOwner(n))throw await this._ownerConflictError("update a prompt",n);const a={};if((r==null?void 0:r.description)!==void 0&&(a.description=r.description),(r==null?void 0:r.readme)!==void 0&&(a.readme=r.readme),(r==null?void 0:r.tags)!==void 0&&(a.tags=r.tags),(r==null?void 0:r.isPublic)!==void 0&&(a.is_public=r.isPublic),(r==null?void 0:r.isArchived)!==void 0&&(a.is_archived=r.isArchived),Object.keys(a).length===0)throw new Error("No valid update options provided");const o=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/repos/${n}/${s}`,{method:"PATCH",body:JSON.stringify(a),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(o,"update prompt"),o.json()}async deletePrompt(e){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[r,n,s]=parsePromptIdentifier(e);if(!await this._currentTenantIsOwner(r))throw await this._ownerConflictError("delete a prompt",r);return await(await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/repos/${r}/${n}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async pullPromptCommit(e,r){const[n,s,a]=parsePromptIdentifier(e),o=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/commits/${n}/${s}/${a}${r!=null&&r.includeModel?"?include_model=true":""}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(o,"pull prompt commit");const l=await o.json();return{owner:n,repo:s,commit_hash:l.commit_hash,manifest:l.manifest,examples:l.examples}}async _pullPrompt(e,r){const n=await this.pullPromptCommit(e,{includeModel:r==null?void 0:r.includeModel});return JSON.stringify(n.manifest)}async pushPrompt(e,r){return await this.promptExists(e)?r&&Object.keys(r).some(s=>s!=="object")&&await this.updatePrompt(e,{description:r==null?void 0:r.description,readme:r==null?void 0:r.readme,tags:r==null?void 0:r.tags,isPublic:r==null?void 0:r.isPublic}):await this.createPrompt(e,{description:r==null?void 0:r.description,readme:r==null?void 0:r.readme,tags:r==null?void 0:r.tags,isPublic:r==null?void 0:r.isPublic}),r!=null&&r.object?await this.createCommit(e,r==null?void 0:r.object,{parentCommitHash:r==null?void 0:r.parentCommitHash}):await this._getPromptUrl(e)}async clonePublicDataset(e,r={}){const{sourceApiUrl:n=this.apiUrl,datasetName:s}=r,[a,o]=this.parseTokenOrUrl(e,n),l=new Client({apiUrl:a,apiKey:"placeholder"}),c=await l.readSharedDataset(o),d=s||c.name;try{if(await this.hasDataset({datasetId:d})){console.log(`Dataset ${d} already exists in your tenant. Skipping.`);return}}catch{}const p=await l.listSharedExamples(o),g=await this.createDataset(d,{description:c.description,dataType:c.data_type||"kv",inputsSchema:c.inputs_schema_definition??void 0,outputsSchema:c.outputs_schema_definition??void 0});try{await this.createExamples({inputs:p.map(y=>y.inputs),outputs:p.flatMap(y=>y.outputs?[y.outputs]:[]),datasetId:g.id})}catch(y){throw console.error(`An error occurred while creating dataset ${d}. You should delete it manually.`),y}}parseTokenOrUrl(e,r,n=2,s="dataset"){try{return assertUuid(e),[r,e]}catch{}try{const o=new URL(e).pathname.split("/").filter(l=>l!=="");if(o.length>=n){const l=o[o.length-n];return[r,l]}else throw new Error(`Invalid public ${s} URL: ${e}`)}catch{throw new Error(`Invalid public ${s} URL or token: ${e}`)}}awaitPendingTraceBatches(){return this.manualFlushMode?(console.warn("[WARNING]: When tracing in manual flush mode, you must call `await client.flush()` manually to submit trace batches."),Promise.resolve()):Promise.all([...this.autoBatchQueue.items.map(({itemPromise:e})=>e),this.batchIngestCaller.queue.onIdle()])}}function isExampleCreate(t){return"dataset_id"in t||"dataset_name"in t}const __version__="0.3.29";var define_process_env_default$2={};let globalEnv;const isBrowser$1=()=>typeof window<"u"&&typeof window.document<"u",isWebWorker$1=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",isJsDom$1=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),isDeno$1=()=>typeof Deno<"u",isNode$2=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!isDeno$1(),getEnv$1=()=>globalEnv||(isBrowser$1()?globalEnv="browser":isNode$2()?globalEnv="node":isWebWorker$1()?globalEnv="webworker":isJsDom$1()?globalEnv="jsdom":isDeno$1()?globalEnv="deno":globalEnv="other",globalEnv);let runtimeEnvironment$1;function getRuntimeEnvironment$1(){if(runtimeEnvironment$1===void 0){const t=getEnv$1(),e=getShas();runtimeEnvironment$1={library:"langsmith",runtime:t,sdk:"langsmith-js",sdk_version:__version__,...e}}return runtimeEnvironment$1}function getLangChainEnvVarsMetadata(){const t=getEnvironmentVariables()||{},e={},r=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION","LANGSMITH_API_KEY","LANGSMITH_ENDPOINT","LANGSMITH_TRACING_V2","LANGSMITH_PROJECT","LANGSMITH_SESSION"];for(const[n,s]of Object.entries(t))(n.startsWith("LANGCHAIN_")||n.startsWith("LANGSMITH_"))&&typeof s=="string"&&!r.includes(n)&&!n.toLowerCase().includes("key")&&!n.toLowerCase().includes("secret")&&!n.toLowerCase().includes("token")&&(n==="LANGCHAIN_REVISION_ID"?e.revision_id=s:e[n]=s);return e}function getEnvironmentVariables(){try{return typeof process<"u"&&define_process_env_default$2?Object.entries(define_process_env_default$2).reduce((t,[e,r])=>(t[e]=String(r),t),{}):void 0}catch{return}}function getEnvironmentVariable$1(t){try{return typeof process<"u"?define_process_env_default$2==null?void 0:define_process_env_default$2[t]:void 0}catch{return}}function getLangSmithEnvironmentVariable(t){return getEnvironmentVariable$1(`LANGSMITH_${t}`)||getEnvironmentVariable$1(`LANGCHAIN_${t}`)}let cachedCommitSHAs;function getShas(){if(cachedCommitSHAs!==void 0)return cachedCommitSHAs;const t=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],e={};for(const r of t){const n=getEnvironmentVariable$1(r);n!==void 0&&(e[r]=n)}return cachedCommitSHAs=e,e}const isTracingEnabled$1=t=>!!["TRACING_V2","TRACING"].find(r=>getLangSmithEnvironmentVariable(r)==="true"),_LC_CONTEXT_VARIABLES_KEY=Symbol.for("lc:context_variables");function stripNonAlphanumeric$1(t){return t.replace(/[-:.]/g,"")}function convertToDottedOrderFormat$1(t,e,r=1){const n=r.toFixed(0).slice(0,3).padStart(3,"0");return stripNonAlphanumeric$1(`${new Date(t).toISOString().slice(0,-1)}${n}Z`)+e}class Baggage{constructor(e,r,n){Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.metadata=e,this.tags=r,this.project_name=n}static fromHeader(e){const r=e.split(",");let n={},s=[],a;for(const o of r){const[l,c]=o.split("="),d=decodeURIComponent(c);l==="langsmith-metadata"?n=JSON.parse(d):l==="langsmith-tags"?s=d.split(","):l==="langsmith-project"&&(a=d)}return new Baggage(n,s,a)}toHeader(){const e=[];return this.metadata&&Object.keys(this.metadata).length>0&&e.push(`langsmith-metadata=${encodeURIComponent(JSON.stringify(this.metadata))}`),this.tags&&this.tags.length>0&&e.push(`langsmith-tags=${encodeURIComponent(this.tags.join(","))}`),this.project_name&&e.push(`langsmith-project=${encodeURIComponent(this.project_name)}`),e.join(",")}}class RunTree{constructor(e){var l;if(Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"run_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"end_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"extra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reference_example_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dotted_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"attachments",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),isRunTree(e)){Object.assign(this,{...e});return}const r=RunTree.getDefaultConfig(),{metadata:n,...s}=e,a=s.client??RunTree.getSharedClient(),o={...n,...(l=s==null?void 0:s.extra)==null?void 0:l.metadata};if(s.extra={...s.extra,metadata:o},Object.assign(this,{...r,...s,client:a}),this.trace_id||(this.parent_run?this.trace_id=this.parent_run.trace_id??this.id:this.trace_id=this.id),this.execution_order??(this.execution_order=1),this.child_execution_order??(this.child_execution_order=1),!this.dotted_order){const c=convertToDottedOrderFormat$1(this.start_time,this.id,this.execution_order);this.parent_run?this.dotted_order=this.parent_run.dotted_order+"."+c:this.dotted_order=c}}static getDefaultConfig(){return{id:v4(),run_type:"chain",project_name:getLangSmithEnvironmentVariable("PROJECT")??getEnvironmentVariable$1("LANGCHAIN_SESSION")??"default",child_runs:[],api_url:getEnvironmentVariable$1("LANGCHAIN_ENDPOINT")??"http://localhost:1984",api_key:getEnvironmentVariable$1("LANGCHAIN_API_KEY"),caller_options:{},start_time:Date.now(),serialized:{},inputs:{},extra:{}}}static getSharedClient(){return RunTree.sharedClient||(RunTree.sharedClient=new Client),RunTree.sharedClient}createChild(e){var c,d,p,g,y,x;const r=this.child_execution_order+1,n=new RunTree({...e,parent_run:this,project_name:this.project_name,client:this.client,tracingEnabled:this.tracingEnabled,execution_order:r,child_execution_order:r});_LC_CONTEXT_VARIABLES_KEY in this&&(n[_LC_CONTEXT_VARIABLES_KEY]=this[_LC_CONTEXT_VARIABLES_KEY]);const s=Symbol.for("lc:child_config"),a=((c=e.extra)==null?void 0:c[s])??this.extra[s];if(isRunnableConfigLike(a)){const E={...a},S=isCallbackManagerLike(E.callbacks)?(p=(d=E.callbacks).copy)==null?void 0:p.call(d):void 0;S&&(Object.assign(S,{_parentRunId:n.id}),(x=(y=(g=S.handlers)==null?void 0:g.find(isLangChainTracerLike))==null?void 0:y.updateFromRunTree)==null||x.call(y,n),E.callbacks=S),n.extra[s]=E}const o=new Set;let l=this;for(;l!=null&&!o.has(l.id);)o.add(l.id),l.child_execution_order=Math.max(l.child_execution_order,r),l=l.parent_run;return this.child_runs.push(n),n}async end(e,r,n=Date.now(),s){this.outputs=this.outputs??e,this.error=this.error??r,this.end_time=this.end_time??n,s&&Object.keys(s).length>0&&(this.extra=this.extra?{...this.extra,metadata:{...this.extra.metadata,...s}}:{metadata:s})}_convertToCreate(e,r,n=!0){var c;const s=e.extra??{};if(s.runtime||(s.runtime={}),r)for(const[d,p]of Object.entries(r))s.runtime[d]||(s.runtime[d]=p);let a,o;return n?(o=(c=e.parent_run)==null?void 0:c.id,a=[]):(a=e.child_runs.map(d=>this._convertToCreate(d,r,n)),o=void 0),{id:e.id,name:e.name,start_time:e.start_time,end_time:e.end_time,run_type:e.run_type,reference_example_id:e.reference_example_id,extra:s,serialized:e.serialized,error:e.error,inputs:e.inputs,outputs:e.outputs,session_name:e.project_name,child_runs:a,parent_run_id:o,trace_id:e.trace_id,dotted_order:e.dotted_order,tags:e.tags,attachments:e.attachments}}async postRun(e=!0){try{const r=getRuntimeEnvironment$1(),n=await this._convertToCreate(this,r,!0);if(await this.client.createRun(n),!e){warnOnce("Posting with excludeChildRuns=false is deprecated and will be removed in a future version.");for(const s of this.child_runs)await s.postRun(!1)}}catch(r){console.error(`Error in postRun for run ${this.id}:`,r)}}async patchRun(){var e;try{const r={end_time:this.end_time,error:this.error,inputs:this.inputs,outputs:this.outputs,parent_run_id:(e=this.parent_run)==null?void 0:e.id,reference_example_id:this.reference_example_id,extra:this.extra,events:this.events,dotted_order:this.dotted_order,trace_id:this.trace_id,tags:this.tags,attachments:this.attachments,session_name:this.project_name};await this.client.updateRun(this.id,r)}catch(r){console.error(`Error in patchRun for run ${this.id}`,r)}}toJSON(){return this._convertToCreate(this,void 0,!1)}addEvent(e){this.events||(this.events=[]),typeof e=="string"?this.events.push({name:"event",time:new Date().toISOString(),message:e}):this.events.push({...e,time:e.time??new Date().toISOString()})}static fromRunnableConfig(e,r){var d,p,g,y;const n=e==null?void 0:e.callbacks;let s,a,o,l=isTracingEnabled$1();if(n){const x=((d=n==null?void 0:n.getParentRunId)==null?void 0:d.call(n))??"",E=(p=n==null?void 0:n.handlers)==null?void 0:p.find(S=>(S==null?void 0:S.name)=="langchain_tracer");s=(g=E==null?void 0:E.getRun)==null?void 0:g.call(E,x),a=E==null?void 0:E.projectName,o=E==null?void 0:E.client,l=l||!!E}return s?new RunTree({name:s.name,id:s.id,trace_id:s.trace_id,dotted_order:s.dotted_order,client:o,tracingEnabled:l,project_name:a,tags:[...new Set(((s==null?void 0:s.tags)??[]).concat((e==null?void 0:e.tags)??[]))],extra:{metadata:{...(y=s==null?void 0:s.extra)==null?void 0:y.metadata,...e==null?void 0:e.metadata}}}).createChild(r):new RunTree({...r,client:o,tracingEnabled:l,project_name:a})}static fromDottedOrder(e){return this.fromHeaders({"langsmith-trace":e})}static fromHeaders(e,r){var d;const n="get"in e&&typeof e.get=="function"?{"langsmith-trace":e.get("langsmith-trace"),baggage:e.get("baggage")}:e,s=n["langsmith-trace"];if(!s||typeof s!="string")return;const a=s.trim(),o=a.split(".").map(p=>{const[g,y]=p.split("Z");return{strTime:g,time:Date.parse(g+"Z"),uuid:y}}),l=o[0].uuid,c={...r,name:(r==null?void 0:r.name)??"parent",run_type:(r==null?void 0:r.run_type)??"chain",start_time:(r==null?void 0:r.start_time)??Date.now(),id:(d=o.at(-1))==null?void 0:d.uuid,trace_id:l,dotted_order:a};if(n.baggage&&typeof n.baggage=="string"){const p=Baggage.fromHeader(n.baggage);c.metadata=p.metadata,c.tags=p.tags,c.project_name=p.project_name}return new RunTree(c)}toHeaders(e){var n;const r={"langsmith-trace":this.dotted_order,baggage:new Baggage((n=this.extra)==null?void 0:n.metadata,this.tags,this.project_name).toHeader()};if(e)for(const[s,a]of Object.entries(r))e.set(s,a);return r}}Object.defineProperty(RunTree,"sharedClient",{enumerable:!0,configurable:!0,writable:!0,value:null});function isRunTree(t){return t!==void 0&&typeof t.createChild=="function"&&typeof t.postRun=="function"}function isLangChainTracerLike(t){return typeof t=="object"&&t!=null&&typeof t.name=="string"&&t.name==="langchain_tracer"}function containsLangChainTracerLike(t){return Array.isArray(t)&&t.some(e=>isLangChainTracerLike(e))}function isCallbackManagerLike(t){return typeof t=="object"&&t!=null&&Array.isArray(t.handlers)}function isRunnableConfigLike(t){var e;return t!==void 0&&typeof t.callbacks=="object"&&(containsLangChainTracerLike((e=t.callbacks)==null?void 0:e.handlers)||containsLangChainTracerLike(t.callbacks))}let MockAsyncLocalStorage$1=class{getStore(){}run(e,r){return r()}};const TRACING_ALS_KEY$1=Symbol.for("ls:tracing_async_local_storage"),mockAsyncLocalStorage$1=new MockAsyncLocalStorage$1;let AsyncLocalStorageProvider$1=class{getInstance(){return globalThis[TRACING_ALS_KEY$1]??mockAsyncLocalStorage$1}initializeGlobalInstance(e){globalThis[TRACING_ALS_KEY$1]===void 0&&(globalThis[TRACING_ALS_KEY$1]=e)}};const AsyncLocalStorageProviderSingleton$1=new AsyncLocalStorageProvider$1;function getCurrentRunTree(t=!1){const e=AsyncLocalStorageProviderSingleton$1.getInstance().getStore();if(!t&&!isRunTree(e))throw new Error(`Could not get the current run tree.

Please make sure you are calling this method within a traceable function and that tracing is enabled.`);return e}function isTraceableFunction(t){return typeof t=="function"&&"langsmith:traceable"in t}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */const _hasOwnProperty=Object.prototype.hasOwnProperty;function hasOwnProperty(t,e){return _hasOwnProperty.call(t,e)}function _objectKeys(t){if(Array.isArray(t)){const r=new Array(t.length);for(let n=0;n<r.length;n++)r[n]=""+n;return r}if(Object.keys)return Object.keys(t);let e=[];for(let r in t)hasOwnProperty(t,r)&&e.push(r);return e}function _deepClone(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function isInteger(t){let e=0;const r=t.length;let n;for(;e<r;){if(n=t.charCodeAt(e),n>=48&&n<=57){e++;continue}return!1}return!0}function escapePathComponent(t){return t.indexOf("/")===-1&&t.indexOf("~")===-1?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function unescapePathComponent(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function hasUndefined(t){if(t===void 0)return!0;if(t){if(Array.isArray(t)){for(let r=0,n=t.length;r<n;r++)if(hasUndefined(t[r]))return!0}else if(typeof t=="object"){const r=_objectKeys(t),n=r.length;for(var e=0;e<n;e++)if(hasUndefined(t[r[e]]))return!0}}return!1}function patchErrorMessageFormatter(t,e){const r=[t];for(const n in e){const s=typeof e[n]=="object"?JSON.stringify(e[n],null,2):e[n];typeof s<"u"&&r.push(`${n}: ${s}`)}return r.join(`
`)}class PatchError extends Error{constructor(e,r,n,s,a){super(patchErrorMessageFormatter(e,{name:r,index:n,operation:s,tree:a})),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"index",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"operation",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"tree",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.setPrototypeOf(this,new.target.prototype),this.message=patchErrorMessageFormatter(e,{name:r,index:n,operation:s,tree:a})}}const JsonPatchError=PatchError,objOps={add:function(t,e,r){return t[e]=this.value,{newDocument:r}},remove:function(t,e,r){var n=t[e];return delete t[e],{newDocument:r,removed:n}},replace:function(t,e,r){var n=t[e];return t[e]=this.value,{newDocument:r,removed:n}},move:function(t,e,r){let n=getValueByPointer(r,this.path);n&&(n=_deepClone(n));const s=applyOperation(r,{op:"remove",path:this.from}).removed;return applyOperation(r,{op:"add",path:this.path,value:s}),{newDocument:r,removed:n}},copy:function(t,e,r){const n=getValueByPointer(r,this.from);return applyOperation(r,{op:"add",path:this.path,value:_deepClone(n)}),{newDocument:r}},test:function(t,e,r){return{newDocument:r,test:_areEquals(t[e],this.value)}},_get:function(t,e,r){return this.value=t[e],{newDocument:r}}};var arrOps={add:function(t,e,r){return isInteger(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:r,index:e}},remove:function(t,e,r){var n=t.splice(e,1);return{newDocument:r,removed:n[0]}},replace:function(t,e,r){var n=t[e];return t[e]=this.value,{newDocument:r,removed:n}},move:objOps.move,copy:objOps.copy,test:objOps.test,_get:objOps._get};function getValueByPointer(t,e){if(e=="")return t;var r={op:"_get",path:e};return applyOperation(t,r),r.value}function applyOperation(t,e,r=!1,n=!0,s=!0,a=0){if(r&&(typeof r=="function"?r(e,0,t,e.path):validator(e,0)),e.path===""){let o={newDocument:t};if(e.op==="add")return o.newDocument=e.value,o;if(e.op==="replace")return o.newDocument=e.value,o.removed=t,o;if(e.op==="move"||e.op==="copy")return o.newDocument=getValueByPointer(t,e.from),e.op==="move"&&(o.removed=t),o;if(e.op==="test"){if(o.test=_areEquals(t,e.value),o.test===!1)throw new JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",a,e,t);return o.newDocument=t,o}else{if(e.op==="remove")return o.removed=t,o.newDocument=null,o;if(e.op==="_get")return e.value=t,o;if(r)throw new JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",a,e,t);return o}}else{n||(t=_deepClone(t));const l=(e.path||"").split("/");let c=t,d=1,p=l.length,g,y,x;for(typeof r=="function"?x=r:x=validator;;){if(y=l[d],y&&y.indexOf("~")!=-1&&(y=unescapePathComponent(y)),s&&(y=="__proto__"||y=="prototype"&&d>0&&l[d-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(r&&g===void 0&&(c[y]===void 0?g=l.slice(0,d).join("/"):d==p-1&&(g=e.path),g!==void 0&&x(e,0,t,g)),d++,Array.isArray(c)){if(y==="-")y=c.length;else{if(r&&!isInteger(y))throw new JsonPatchError("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",a,e,t);isInteger(y)&&(y=~~y)}if(d>=p){if(r&&e.op==="add"&&y>c.length)throw new JsonPatchError("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",a,e,t);const E=arrOps[e.op].call(e,c,y,t);if(E.test===!1)throw new JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",a,e,t);return E}}else if(d>=p){const E=objOps[e.op].call(e,c,y,t);if(E.test===!1)throw new JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",a,e,t);return E}if(c=c[y],r&&d<p&&(!c||typeof c!="object"))throw new JsonPatchError("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",a,e,t)}}}function applyPatch(t,e,r,n=!0,s=!0){if(r&&!Array.isArray(e))throw new JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");n||(t=_deepClone(t));const a=new Array(e.length);for(let o=0,l=e.length;o<l;o++)a[o]=applyOperation(t,e[o],r,!0,s,o),t=a[o].newDocument;return a.newDocument=t,a}function validator(t,e,r,n){if(typeof t!="object"||t===null||Array.isArray(t))throw new JsonPatchError("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,t,r);if(objOps[t.op]){if(typeof t.path!="string")throw new JsonPatchError("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,t,r);if(t.path.indexOf("/")!==0&&t.path.length>0)throw new JsonPatchError('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,t,r);if((t.op==="move"||t.op==="copy")&&typeof t.from!="string")throw new JsonPatchError("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,t,r);if((t.op==="add"||t.op==="replace"||t.op==="test")&&t.value===void 0)throw new JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,t,r);if((t.op==="add"||t.op==="replace"||t.op==="test")&&hasUndefined(t.value))throw new JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,t,r);if(r){if(t.op=="add"){var s=t.path.split("/").length,a=n.split("/").length;if(s!==a+1&&s!==a)throw new JsonPatchError("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,t,r)}else if(t.op==="replace"||t.op==="remove"||t.op==="_get"){if(t.path!==n)throw new JsonPatchError("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,t,r)}else if(t.op==="move"||t.op==="copy"){var o={op:"_get",path:t.from,value:void 0},l=validate([o],r);if(l&&l.name==="OPERATION_PATH_UNRESOLVABLE")throw new JsonPatchError("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,t,r)}}}else throw new JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,t,r)}function validate(t,e,r){try{if(!Array.isArray(t))throw new JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)applyPatch(_deepClone(e),_deepClone(t),r||!0);else{r=r||validator;for(var n=0;n<t.length;n++)r(t[n],n,e,void 0)}}catch(s){if(s instanceof JsonPatchError)return s;throw s}}function _areEquals(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var r=Array.isArray(t),n=Array.isArray(e),s,a,o;if(r&&n){if(a=t.length,a!=e.length)return!1;for(s=a;s--!==0;)if(!_areEquals(t[s],e[s]))return!1;return!0}if(r!=n)return!1;var l=Object.keys(t);if(a=l.length,a!==Object.keys(e).length)return!1;for(s=a;s--!==0;)if(!e.hasOwnProperty(l[s]))return!1;for(s=a;s--!==0;)if(o=l[s],!_areEquals(t[o],e[o]))return!1;return!0}return t!==t&&e!==e}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2013-2021 Joachim Wester
 * MIT license
 */function _generate(t,e,r,n,s){if(e!==t){typeof e.toJSON=="function"&&(e=e.toJSON());for(var a=_objectKeys(e),o=_objectKeys(t),l=!1,c=o.length-1;c>=0;c--){var d=o[c],p=t[d];if(hasOwnProperty(e,d)&&!(e[d]===void 0&&p!==void 0&&Array.isArray(e)===!1)){var g=e[d];typeof p=="object"&&p!=null&&typeof g=="object"&&g!=null&&Array.isArray(p)===Array.isArray(g)?_generate(p,g,r,n+"/"+escapePathComponent(d),s):p!==g&&(s&&r.push({op:"test",path:n+"/"+escapePathComponent(d),value:_deepClone(p)}),r.push({op:"replace",path:n+"/"+escapePathComponent(d),value:_deepClone(g)}))}else Array.isArray(t)===Array.isArray(e)?(s&&r.push({op:"test",path:n+"/"+escapePathComponent(d),value:_deepClone(p)}),r.push({op:"remove",path:n+"/"+escapePathComponent(d)}),l=!0):(s&&r.push({op:"test",path:n,value:t}),r.push({op:"replace",path:n,value:e}))}if(!(!l&&a.length==o.length))for(var c=0;c<a.length;c++){var d=a[c];!hasOwnProperty(t,d)&&e[d]!==void 0&&r.push({op:"add",path:n+"/"+escapePathComponent(d),value:_deepClone(e[d])})}}}function compare(t,e,r=!1){var n=[];return _generate(t,e,n,"",r),n}var define_process_env_default$1={};const isBrowser=()=>typeof window<"u"&&typeof window.document<"u",isWebWorker=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",isJsDom=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),isDeno=()=>typeof Deno<"u",isNode$1=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!isDeno(),getEnv=()=>{let t;return isBrowser()?t="browser":isNode$1()?t="node":isWebWorker()?t="webworker":isJsDom()?t="jsdom":isDeno()?t="deno":t="other",t};let runtimeEnvironment;async function getRuntimeEnvironment(){return runtimeEnvironment===void 0&&(runtimeEnvironment={library:"langchain-js",runtime:getEnv()}),runtimeEnvironment}function getEnvironmentVariable(t){try{return typeof process<"u"?define_process_env_default$1==null?void 0:define_process_env_default$1[t]:isDeno()?Deno==null?void 0:Deno.env.get(t):void 0}catch{return}}class BaseCallbackHandlerMethodsClass{}function callbackHandlerPrefersStreaming(t){return"lc_prefer_streaming"in t&&t.lc_prefer_streaming}class BaseCallbackHandler extends BaseCallbackHandlerMethodsClass{get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,get_lc_unique_name(this.constructor)]}constructor(e){super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreCustomEvent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"raiseError",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:getEnvironmentVariable("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"}),this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=e.ignoreRetriever??this.ignoreRetriever,this.ignoreCustomEvent=e.ignoreCustomEvent??this.ignoreCustomEvent,this.raiseError=e.raiseError??this.raiseError,this.awaitHandlers=this.raiseError||(e._awaitHandler??this.awaitHandlers))}copy(){return new this.constructor(this)}toJSON(){return Serializable.prototype.toJSON.call(this)}toJSONNotImplemented(){return Serializable.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){class r extends BaseCallbackHandler{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:v4()}),Object.assign(this,e)}}return new r}}const isBaseCallbackHandler=t=>{const e=t;return e!==void 0&&typeof e.copy=="function"&&typeof e.name=="string"&&typeof e.awaitHandlers=="boolean"};function _coerceToDict$1(t,e){return t&&!Array.isArray(t)&&typeof t=="object"?t:{[e]:t}}function stripNonAlphanumeric(t){return t.replace(/[-:.]/g,"")}function convertToDottedOrderFormat(t,e,r){const n=r.toFixed(0).slice(0,3).padStart(3,"0");return stripNonAlphanumeric(`${new Date(t).toISOString().slice(0,-1)}${n}Z`)+e}function isBaseTracer(t){return typeof t._addRunToRunMap=="function"}class BaseTracer extends BaseCallbackHandler{constructor(e){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}copy(){return this}stringifyError(e){return e instanceof Error?e.message+(e!=null&&e.stack?`

${e.stack}`:""):typeof e=="string"?e:`${e}`}_addChildRun(e,r){e.child_runs.push(r)}_addRunToRunMap(e){const r=convertToDottedOrderFormat(e.start_time,e.id,e.execution_order),n={...e};if(n.parent_run_id!==void 0){const s=this.runMap.get(n.parent_run_id);s&&(this._addChildRun(s,n),s.child_execution_order=Math.max(s.child_execution_order,n.child_execution_order),n.trace_id=s.trace_id,s.dotted_order!==void 0&&(n.dotted_order=[s.dotted_order,r].join(".")))}else n.trace_id=n.id,n.dotted_order=r;return this.runMap.set(n.id,n),n}async _endTrace(e){var n;const r=e.parent_run_id!==void 0&&this.runMap.get(e.parent_run_id);r?r.child_execution_order=Math.max(r.child_execution_order,e.child_execution_order):await this.persistRun(e),this.runMap.delete(e.id),await((n=this.onRunUpdate)==null?void 0:n.call(this,e))}_getExecutionOrder(e){const r=e!==void 0&&this.runMap.get(e);return r?r.child_execution_order+1:1}_createRunForLLMStart(e,r,n,s,a,o,l,c){const d=this._getExecutionOrder(s),p=Date.now(),g=l?{...a,metadata:l}:a,y={id:n,name:c??e.id[e.id.length-1],parent_run_id:s,start_time:p,serialized:e,events:[{name:"start",time:new Date(p).toISOString()}],inputs:{prompts:r},execution_order:d,child_runs:[],child_execution_order:d,run_type:"llm",extra:g??{},tags:o||[]};return this._addRunToRunMap(y)}async handleLLMStart(e,r,n,s,a,o,l,c){var p,g;const d=this.runMap.get(n)??this._createRunForLLMStart(e,r,n,s,a,o,l,c);return await((p=this.onRunCreate)==null?void 0:p.call(this,d)),await((g=this.onLLMStart)==null?void 0:g.call(this,d)),d}_createRunForChatModelStart(e,r,n,s,a,o,l,c){const d=this._getExecutionOrder(s),p=Date.now(),g=l?{...a,metadata:l}:a,y={id:n,name:c??e.id[e.id.length-1],parent_run_id:s,start_time:p,serialized:e,events:[{name:"start",time:new Date(p).toISOString()}],inputs:{messages:r},execution_order:d,child_runs:[],child_execution_order:d,run_type:"llm",extra:g??{},tags:o||[]};return this._addRunToRunMap(y)}async handleChatModelStart(e,r,n,s,a,o,l,c){var p,g;const d=this.runMap.get(n)??this._createRunForChatModelStart(e,r,n,s,a,o,l,c);return await((p=this.onRunCreate)==null?void 0:p.call(this,d)),await((g=this.onLLMStart)==null?void 0:g.call(this,d)),d}async handleLLMEnd(e,r,n,s,a){var l;const o=this.runMap.get(r);if(!o||(o==null?void 0:o.run_type)!=="llm")throw new Error("No LLM run to end.");return o.end_time=Date.now(),o.outputs=e,o.events.push({name:"end",time:new Date(o.end_time).toISOString()}),o.extra={...o.extra,...a},await((l=this.onLLMEnd)==null?void 0:l.call(this,o)),await this._endTrace(o),o}async handleLLMError(e,r,n,s,a){var l;const o=this.runMap.get(r);if(!o||(o==null?void 0:o.run_type)!=="llm")throw new Error("No LLM run to end.");return o.end_time=Date.now(),o.error=this.stringifyError(e),o.events.push({name:"error",time:new Date(o.end_time).toISOString()}),o.extra={...o.extra,...a},await((l=this.onLLMError)==null?void 0:l.call(this,o)),await this._endTrace(o),o}_createRunForChainStart(e,r,n,s,a,o,l,c){const d=this._getExecutionOrder(s),p=Date.now(),g={id:n,name:c??e.id[e.id.length-1],parent_run_id:s,start_time:p,serialized:e,events:[{name:"start",time:new Date(p).toISOString()}],inputs:r,execution_order:d,child_execution_order:d,run_type:l??"chain",child_runs:[],extra:o?{metadata:o}:{},tags:a||[]};return this._addRunToRunMap(g)}async handleChainStart(e,r,n,s,a,o,l,c){var p,g;const d=this.runMap.get(n)??this._createRunForChainStart(e,r,n,s,a,o,l,c);return await((p=this.onRunCreate)==null?void 0:p.call(this,d)),await((g=this.onChainStart)==null?void 0:g.call(this,d)),d}async handleChainEnd(e,r,n,s,a){var l;const o=this.runMap.get(r);if(!o)throw new Error("No chain run to end.");return o.end_time=Date.now(),o.outputs=_coerceToDict$1(e,"output"),o.events.push({name:"end",time:new Date(o.end_time).toISOString()}),(a==null?void 0:a.inputs)!==void 0&&(o.inputs=_coerceToDict$1(a.inputs,"input")),await((l=this.onChainEnd)==null?void 0:l.call(this,o)),await this._endTrace(o),o}async handleChainError(e,r,n,s,a){var l;const o=this.runMap.get(r);if(!o)throw new Error("No chain run to end.");return o.end_time=Date.now(),o.error=this.stringifyError(e),o.events.push({name:"error",time:new Date(o.end_time).toISOString()}),(a==null?void 0:a.inputs)!==void 0&&(o.inputs=_coerceToDict$1(a.inputs,"input")),await((l=this.onChainError)==null?void 0:l.call(this,o)),await this._endTrace(o),o}_createRunForToolStart(e,r,n,s,a,o,l){const c=this._getExecutionOrder(s),d=Date.now(),p={id:n,name:l??e.id[e.id.length-1],parent_run_id:s,start_time:d,serialized:e,events:[{name:"start",time:new Date(d).toISOString()}],inputs:{input:r},execution_order:c,child_execution_order:c,run_type:"tool",child_runs:[],extra:o?{metadata:o}:{},tags:a||[]};return this._addRunToRunMap(p)}async handleToolStart(e,r,n,s,a,o,l){var d,p;const c=this.runMap.get(n)??this._createRunForToolStart(e,r,n,s,a,o,l);return await((d=this.onRunCreate)==null?void 0:d.call(this,c)),await((p=this.onToolStart)==null?void 0:p.call(this,c)),c}async handleToolEnd(e,r){var s;const n=this.runMap.get(r);if(!n||(n==null?void 0:n.run_type)!=="tool")throw new Error("No tool run to end");return n.end_time=Date.now(),n.outputs={output:e},n.events.push({name:"end",time:new Date(n.end_time).toISOString()}),await((s=this.onToolEnd)==null?void 0:s.call(this,n)),await this._endTrace(n),n}async handleToolError(e,r){var s;const n=this.runMap.get(r);if(!n||(n==null?void 0:n.run_type)!=="tool")throw new Error("No tool run to end");return n.end_time=Date.now(),n.error=this.stringifyError(e),n.events.push({name:"error",time:new Date(n.end_time).toISOString()}),await((s=this.onToolError)==null?void 0:s.call(this,n)),await this._endTrace(n),n}async handleAgentAction(e,r){var a;const n=this.runMap.get(r);if(!n||(n==null?void 0:n.run_type)!=="chain")return;const s=n;s.actions=s.actions||[],s.actions.push(e),s.events.push({name:"agent_action",time:new Date().toISOString(),kwargs:{action:e}}),await((a=this.onAgentAction)==null?void 0:a.call(this,n))}async handleAgentEnd(e,r){var s;const n=this.runMap.get(r);!n||(n==null?void 0:n.run_type)!=="chain"||(n.events.push({name:"agent_end",time:new Date().toISOString(),kwargs:{action:e}}),await((s=this.onAgentEnd)==null?void 0:s.call(this,n)))}_createRunForRetrieverStart(e,r,n,s,a,o,l){const c=this._getExecutionOrder(s),d=Date.now(),p={id:n,name:l??e.id[e.id.length-1],parent_run_id:s,start_time:d,serialized:e,events:[{name:"start",time:new Date(d).toISOString()}],inputs:{query:r},execution_order:c,child_execution_order:c,run_type:"retriever",child_runs:[],extra:o?{metadata:o}:{},tags:a||[]};return this._addRunToRunMap(p)}async handleRetrieverStart(e,r,n,s,a,o,l){var d,p;const c=this.runMap.get(n)??this._createRunForRetrieverStart(e,r,n,s,a,o,l);return await((d=this.onRunCreate)==null?void 0:d.call(this,c)),await((p=this.onRetrieverStart)==null?void 0:p.call(this,c)),c}async handleRetrieverEnd(e,r){var s;const n=this.runMap.get(r);if(!n||(n==null?void 0:n.run_type)!=="retriever")throw new Error("No retriever run to end");return n.end_time=Date.now(),n.outputs={documents:e},n.events.push({name:"end",time:new Date(n.end_time).toISOString()}),await((s=this.onRetrieverEnd)==null?void 0:s.call(this,n)),await this._endTrace(n),n}async handleRetrieverError(e,r){var s;const n=this.runMap.get(r);if(!n||(n==null?void 0:n.run_type)!=="retriever")throw new Error("No retriever run to end");return n.end_time=Date.now(),n.error=this.stringifyError(e),n.events.push({name:"error",time:new Date(n.end_time).toISOString()}),await((s=this.onRetrieverError)==null?void 0:s.call(this,n)),await this._endTrace(n),n}async handleText(e,r){var s;const n=this.runMap.get(r);!n||(n==null?void 0:n.run_type)!=="chain"||(n.events.push({name:"text",time:new Date().toISOString(),kwargs:{text:e}}),await((s=this.onText)==null?void 0:s.call(this,n)))}async handleLLMNewToken(e,r,n,s,a,o){var c;const l=this.runMap.get(n);if(!l||(l==null?void 0:l.run_type)!=="llm")throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return l.events.push({name:"new_token",time:new Date().toISOString(),kwargs:{token:e,idx:r,chunk:o==null?void 0:o.chunk}}),await((c=this.onLLMNewToken)==null?void 0:c.call(this,l,e,{chunk:o==null?void 0:o.chunk})),l}}var ansiStyles={exports:{}};ansiStyles.exports;var hasRequiredAnsiStyles;function requireAnsiStyles(){return hasRequiredAnsiStyles||(hasRequiredAnsiStyles=1,function(t){const r=(a=0)=>o=>`\x1B[${38+a};5;${o}m`,n=(a=0)=>(o,l,c)=>`\x1B[${38+a};2;${o};${l};${c}m`;function s(){const a=new Map,o={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};o.color.gray=o.color.blackBright,o.bgColor.bgGray=o.bgColor.bgBlackBright,o.color.grey=o.color.blackBright,o.bgColor.bgGrey=o.bgColor.bgBlackBright;for(const[l,c]of Object.entries(o)){for(const[d,p]of Object.entries(c))o[d]={open:`\x1B[${p[0]}m`,close:`\x1B[${p[1]}m`},c[d]=o[d],a.set(p[0],p[1]);Object.defineProperty(o,l,{value:c,enumerable:!1})}return Object.defineProperty(o,"codes",{value:a,enumerable:!1}),o.color.close="\x1B[39m",o.bgColor.close="\x1B[49m",o.color.ansi256=r(),o.color.ansi16m=n(),o.bgColor.ansi256=r(10),o.bgColor.ansi16m=n(10),Object.defineProperties(o,{rgbToAnsi256:{value:(l,c,d)=>l===c&&c===d?l<8?16:l>248?231:Math.round((l-8)/247*24)+232:16+36*Math.round(l/255*5)+6*Math.round(c/255*5)+Math.round(d/255*5),enumerable:!1},hexToRgb:{value:l=>{const c=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(l.toString(16));if(!c)return[0,0,0];let{colorString:d}=c.groups;d.length===3&&(d=d.split("").map(g=>g+g).join(""));const p=Number.parseInt(d,16);return[p>>16&255,p>>8&255,p&255]},enumerable:!1},hexToAnsi256:{value:l=>o.rgbToAnsi256(...o.hexToRgb(l)),enumerable:!1}}),o}Object.defineProperty(t,"exports",{enumerable:!0,get:s})}(ansiStyles)),ansiStyles.exports}var ansiStylesExports=requireAnsiStyles();const styles=getDefaultExportFromCjs(ansiStylesExports);function wrap(t,e){return`${t.open}${e}${t.close}`}function tryJsonStringify(t,e){try{return JSON.stringify(t,null,2)}catch{return e}}function formatKVMapItem(t){return typeof t=="string"?t.trim():t==null?t:tryJsonStringify(t,t.toString())}function elapsed(t){if(!t.end_time)return"";const e=t.end_time-t.start_time;return e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`}const{color}=styles;class ConsoleCallbackHandler extends BaseTracer{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(e){return Promise.resolve()}getParents(e){const r=[];let n=e;for(;n.parent_run_id;){const s=this.runMap.get(n.parent_run_id);if(s)r.push(s),n=s;else break}return r}getBreadcrumbs(e){const n=[...this.getParents(e).reverse(),e].map((s,a,o)=>{const l=`${s.execution_order}:${s.run_type}:${s.name}`;return a===o.length-1?wrap(styles.bold,l):l}).join(" > ");return wrap(color.grey,n)}onChainStart(e){const r=this.getBreadcrumbs(e);console.log(`${wrap(color.green,"[chain/start]")} [${r}] Entering Chain run with input: ${tryJsonStringify(e.inputs,"[inputs]")}`)}onChainEnd(e){const r=this.getBreadcrumbs(e);console.log(`${wrap(color.cyan,"[chain/end]")} [${r}] [${elapsed(e)}] Exiting Chain run with output: ${tryJsonStringify(e.outputs,"[outputs]")}`)}onChainError(e){const r=this.getBreadcrumbs(e);console.log(`${wrap(color.red,"[chain/error]")} [${r}] [${elapsed(e)}] Chain run errored with error: ${tryJsonStringify(e.error,"[error]")}`)}onLLMStart(e){const r=this.getBreadcrumbs(e),n="prompts"in e.inputs?{prompts:e.inputs.prompts.map(s=>s.trim())}:e.inputs;console.log(`${wrap(color.green,"[llm/start]")} [${r}] Entering LLM run with input: ${tryJsonStringify(n,"[inputs]")}`)}onLLMEnd(e){const r=this.getBreadcrumbs(e);console.log(`${wrap(color.cyan,"[llm/end]")} [${r}] [${elapsed(e)}] Exiting LLM run with output: ${tryJsonStringify(e.outputs,"[response]")}`)}onLLMError(e){const r=this.getBreadcrumbs(e);console.log(`${wrap(color.red,"[llm/error]")} [${r}] [${elapsed(e)}] LLM run errored with error: ${tryJsonStringify(e.error,"[error]")}`)}onToolStart(e){const r=this.getBreadcrumbs(e);console.log(`${wrap(color.green,"[tool/start]")} [${r}] Entering Tool run with input: "${formatKVMapItem(e.inputs.input)}"`)}onToolEnd(e){var n;const r=this.getBreadcrumbs(e);console.log(`${wrap(color.cyan,"[tool/end]")} [${r}] [${elapsed(e)}] Exiting Tool run with output: "${formatKVMapItem((n=e.outputs)==null?void 0:n.output)}"`)}onToolError(e){const r=this.getBreadcrumbs(e);console.log(`${wrap(color.red,"[tool/error]")} [${r}] [${elapsed(e)}] Tool run errored with error: ${tryJsonStringify(e.error,"[error]")}`)}onRetrieverStart(e){const r=this.getBreadcrumbs(e);console.log(`${wrap(color.green,"[retriever/start]")} [${r}] Entering Retriever run with input: ${tryJsonStringify(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){const r=this.getBreadcrumbs(e);console.log(`${wrap(color.cyan,"[retriever/end]")} [${r}] [${elapsed(e)}] Exiting Retriever run with output: ${tryJsonStringify(e.outputs,"[outputs]")}`)}onRetrieverError(e){const r=this.getBreadcrumbs(e);console.log(`${wrap(color.red,"[retriever/error]")} [${r}] [${elapsed(e)}] Retriever run errored with error: ${tryJsonStringify(e.error,"[error]")}`)}onAgentAction(e){const r=e,n=this.getBreadcrumbs(e);console.log(`${wrap(color.blue,"[agent/action]")} [${n}] Agent selected action: ${tryJsonStringify(r.actions[r.actions.length-1],"[action]")}`)}}let client;const getDefaultLangChainClientSingleton=()=>{if(client===void 0){const t=getEnvironmentVariable("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"?{blockOnRootRunFinalization:!0}:{};client=new Client(t)}return client};class LangChainTracer extends BaseTracer{constructor(e={}){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{exampleId:r,projectName:n,client:s}=e;this.projectName=n??getEnvironmentVariable("LANGCHAIN_PROJECT")??getEnvironmentVariable("LANGCHAIN_SESSION"),this.exampleId=r,this.client=s??getDefaultLangChainClientSingleton();const a=LangChainTracer.getTraceableRunTree();a&&this.updateFromRunTree(a)}async _convertToCreate(e,r=void 0){return{...e,extra:{...e.extra,runtime:await getRuntimeEnvironment()},child_runs:void 0,session_name:this.projectName,reference_example_id:e.parent_run_id?void 0:r}}async persistRun(e){}async onRunCreate(e){const r=await this._convertToCreate(e,this.exampleId);await this.client.createRun(r)}async onRunUpdate(e){const r={end_time:e.end_time,error:e.error,outputs:e.outputs,events:e.events,inputs:e.inputs,trace_id:e.trace_id,dotted_order:e.dotted_order,parent_run_id:e.parent_run_id,extra:e.extra,session_name:this.projectName};await this.client.updateRun(e.id,r)}getRun(e){return this.runMap.get(e)}updateFromRunTree(e){let r=e;const n=new Set;for(;r.parent_run&&!(n.has(r.id)||(n.add(r.id),!r.parent_run));)r=r.parent_run;n.clear();const s=[r];for(;s.length>0;){const a=s.shift();!a||n.has(a.id)||(n.add(a.id),this.runMap.set(a.id,a),a.child_runs&&s.push(...a.child_runs))}this.client=e.client??this.client,this.projectName=e.project_name??this.projectName,this.exampleId=e.reference_example_id??this.exampleId}convertToRunTree(e){const r={},n=[];for(const[s,a]of this.runMap){const o=new RunTree({...a,child_runs:[],parent_run:void 0,client:this.client,project_name:this.projectName,reference_example_id:this.exampleId,tracingEnabled:!0});r[s]=o,n.push([s,a.dotted_order])}n.sort((s,a)=>!s[1]||!a[1]?0:s[1].localeCompare(a[1]));for(const[s]of n){const a=this.runMap.get(s),o=r[s];if(!(!a||!o)&&a.parent_run_id){const l=r[a.parent_run_id];l&&(l.child_runs.push(o),o.parent_run=l)}}return r[e]}static getTraceableRunTree(){try{return getCurrentRunTree(!0)}catch{return}}}const TRACING_ALS_KEY=Symbol.for("ls:tracing_async_local_storage"),_CONTEXT_VARIABLES_KEY=Symbol.for("lc:context_variables"),setGlobalAsyncLocalStorageInstance=t=>{globalThis[TRACING_ALS_KEY]=t},getGlobalAsyncLocalStorageInstance=()=>globalThis[TRACING_ALS_KEY];let queue;function createQueue(){const t="default"in PQueueMod?PQueueMod.default:PQueueMod;return new t({autoStart:!0,concurrency:1})}function getQueue(){return typeof queue>"u"&&(queue=createQueue()),queue}async function consumeCallback(t,e){if(e===!0){const r=getGlobalAsyncLocalStorageInstance();r!==void 0?await r.run(void 0,async()=>t()):await t()}else queue=getQueue(),queue.add(async()=>{const r=getGlobalAsyncLocalStorageInstance();r!==void 0?await r.run(void 0,async()=>t()):await t()})}const isTracingEnabled=t=>!!["LANGSMITH_TRACING_V2","LANGCHAIN_TRACING_V2","LANGSMITH_TRACING","LANGCHAIN_TRACING"].find(r=>getEnvironmentVariable(r)==="true");function getContextVariable(t){var n;const e=getGlobalAsyncLocalStorageInstance();if(e===void 0)return;const r=e.getStore();return(n=r==null?void 0:r[_CONTEXT_VARIABLES_KEY])==null?void 0:n[t]}const LC_CONFIGURE_HOOKS_KEY=Symbol("lc:configure_hooks"),_getConfigureHooks=()=>getContextVariable(LC_CONFIGURE_HOOKS_KEY)||[];class BaseCallbackManager{setHandler(e){return this.setHandlers([e])}}class BaseRunManager{constructor(e,r,n,s,a,o,l,c){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:l}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:c})}get parentRunId(){return this._parentRunId}async handleText(e){await Promise.all(this.handlers.map(r=>consumeCallback(async()=>{var n;try{await((n=r.handleText)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags))}catch(s){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleText: ${s}`),r.raiseError)throw s}},r.awaitHandlers)))}async handleCustomEvent(e,r,n,s,a){await Promise.all(this.handlers.map(o=>consumeCallback(async()=>{var l;try{await((l=o.handleCustomEvent)==null?void 0:l.call(o,e,r,this.runId,this.tags,this.metadata))}catch(c){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleCustomEvent: ${c}`),o.raiseError)throw c}},o.awaitHandlers)))}}class CallbackManagerForRetrieverRun extends BaseRunManager{getChild(e){const r=new CallbackManager(this.runId);return r.setHandlers(this.inheritableHandlers),r.addTags(this.inheritableTags),r.addMetadata(this.inheritableMetadata),e&&r.addTags([e],!1),r}async handleRetrieverEnd(e){await Promise.all(this.handlers.map(r=>consumeCallback(async()=>{var n;if(!r.ignoreRetriever)try{await((n=r.handleRetrieverEnd)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags))}catch(s){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleRetriever`),r.raiseError)throw s}},r.awaitHandlers)))}async handleRetrieverError(e){await Promise.all(this.handlers.map(r=>consumeCallback(async()=>{var n;if(!r.ignoreRetriever)try{await((n=r.handleRetrieverError)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags))}catch(s){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleRetrieverError: ${s}`),r.raiseError)throw e}},r.awaitHandlers)))}}class CallbackManagerForLLMRun extends BaseRunManager{async handleLLMNewToken(e,r,n,s,a,o){await Promise.all(this.handlers.map(l=>consumeCallback(async()=>{var c;if(!l.ignoreLLM)try{await((c=l.handleLLMNewToken)==null?void 0:c.call(l,e,r??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,o))}catch(d){if((l.raiseError?console.error:console.warn)(`Error in handler ${l.constructor.name}, handleLLMNewToken: ${d}`),l.raiseError)throw d}},l.awaitHandlers)))}async handleLLMError(e,r,n,s,a){await Promise.all(this.handlers.map(o=>consumeCallback(async()=>{var l;if(!o.ignoreLLM)try{await((l=o.handleLLMError)==null?void 0:l.call(o,e,this.runId,this._parentRunId,this.tags,a))}catch(c){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleLLMError: ${c}`),o.raiseError)throw c}},o.awaitHandlers)))}async handleLLMEnd(e,r,n,s,a){await Promise.all(this.handlers.map(o=>consumeCallback(async()=>{var l;if(!o.ignoreLLM)try{await((l=o.handleLLMEnd)==null?void 0:l.call(o,e,this.runId,this._parentRunId,this.tags,a))}catch(c){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleLLMEnd: ${c}`),o.raiseError)throw c}},o.awaitHandlers)))}}class CallbackManagerForChainRun extends BaseRunManager{getChild(e){const r=new CallbackManager(this.runId);return r.setHandlers(this.inheritableHandlers),r.addTags(this.inheritableTags),r.addMetadata(this.inheritableMetadata),e&&r.addTags([e],!1),r}async handleChainError(e,r,n,s,a){await Promise.all(this.handlers.map(o=>consumeCallback(async()=>{var l;if(!o.ignoreChain)try{await((l=o.handleChainError)==null?void 0:l.call(o,e,this.runId,this._parentRunId,this.tags,a))}catch(c){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleChainError: ${c}`),o.raiseError)throw c}},o.awaitHandlers)))}async handleChainEnd(e,r,n,s,a){await Promise.all(this.handlers.map(o=>consumeCallback(async()=>{var l;if(!o.ignoreChain)try{await((l=o.handleChainEnd)==null?void 0:l.call(o,e,this.runId,this._parentRunId,this.tags,a))}catch(c){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleChainEnd: ${c}`),o.raiseError)throw c}},o.awaitHandlers)))}async handleAgentAction(e){await Promise.all(this.handlers.map(r=>consumeCallback(async()=>{var n;if(!r.ignoreAgent)try{await((n=r.handleAgentAction)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags))}catch(s){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleAgentAction: ${s}`),r.raiseError)throw s}},r.awaitHandlers)))}async handleAgentEnd(e){await Promise.all(this.handlers.map(r=>consumeCallback(async()=>{var n;if(!r.ignoreAgent)try{await((n=r.handleAgentEnd)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags))}catch(s){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleAgentEnd: ${s}`),r.raiseError)throw s}},r.awaitHandlers)))}}class CallbackManagerForToolRun extends BaseRunManager{getChild(e){const r=new CallbackManager(this.runId);return r.setHandlers(this.inheritableHandlers),r.addTags(this.inheritableTags),r.addMetadata(this.inheritableMetadata),e&&r.addTags([e],!1),r}async handleToolError(e){await Promise.all(this.handlers.map(r=>consumeCallback(async()=>{var n;if(!r.ignoreAgent)try{await((n=r.handleToolError)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags))}catch(s){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleToolError: ${s}`),r.raiseError)throw s}},r.awaitHandlers)))}async handleToolEnd(e){await Promise.all(this.handlers.map(r=>consumeCallback(async()=>{var n;if(!r.ignoreAgent)try{await((n=r.handleToolEnd)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags))}catch(s){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleToolEnd: ${s}`),r.raiseError)throw s}},r.awaitHandlers)))}}class CallbackManager extends BaseCallbackManager{constructor(e,r){super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=(r==null?void 0:r.handlers)??this.handlers,this.inheritableHandlers=(r==null?void 0:r.inheritableHandlers)??this.inheritableHandlers,this.tags=(r==null?void 0:r.tags)??this.tags,this.inheritableTags=(r==null?void 0:r.inheritableTags)??this.inheritableTags,this.metadata=(r==null?void 0:r.metadata)??this.metadata,this.inheritableMetadata=(r==null?void 0:r.inheritableMetadata)??this.inheritableMetadata,this._parentRunId=e}getParentRunId(){return this._parentRunId}async handleLLMStart(e,r,n=void 0,s=void 0,a=void 0,o=void 0,l=void 0,c=void 0){return Promise.all(r.map(async(d,p)=>{const g=p===0&&n?n:v4();return await Promise.all(this.handlers.map(y=>{if(!y.ignoreLLM)return isBaseTracer(y)&&y._createRunForLLMStart(e,[d],g,this._parentRunId,a,this.tags,this.metadata,c),consumeCallback(async()=>{var x;try{await((x=y.handleLLMStart)==null?void 0:x.call(y,e,[d],g,this._parentRunId,a,this.tags,this.metadata,c))}catch(E){if((y.raiseError?console.error:console.warn)(`Error in handler ${y.constructor.name}, handleLLMStart: ${E}`),y.raiseError)throw E}},y.awaitHandlers)})),new CallbackManagerForLLMRun(g,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(e,r,n=void 0,s=void 0,a=void 0,o=void 0,l=void 0,c=void 0){return Promise.all(r.map(async(d,p)=>{const g=p===0&&n?n:v4();return await Promise.all(this.handlers.map(y=>{if(!y.ignoreLLM)return isBaseTracer(y)&&y._createRunForChatModelStart(e,[d],g,this._parentRunId,a,this.tags,this.metadata,c),consumeCallback(async()=>{var x,E;try{if(y.handleChatModelStart)await((x=y.handleChatModelStart)==null?void 0:x.call(y,e,[d],g,this._parentRunId,a,this.tags,this.metadata,c));else if(y.handleLLMStart){const S=getBufferString(d);await((E=y.handleLLMStart)==null?void 0:E.call(y,e,[S],g,this._parentRunId,a,this.tags,this.metadata,c))}}catch(S){if((y.raiseError?console.error:console.warn)(`Error in handler ${y.constructor.name}, handleLLMStart: ${S}`),y.raiseError)throw S}},y.awaitHandlers)})),new CallbackManagerForLLMRun(g,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(e,r,n=v4(),s=void 0,a=void 0,o=void 0,l=void 0){return await Promise.all(this.handlers.map(c=>{if(!c.ignoreChain)return isBaseTracer(c)&&c._createRunForChainStart(e,r,n,this._parentRunId,this.tags,this.metadata,s,l),consumeCallback(async()=>{var d;try{await((d=c.handleChainStart)==null?void 0:d.call(c,e,r,n,this._parentRunId,this.tags,this.metadata,s,l))}catch(p){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleChainStart: ${p}`),c.raiseError)throw p}},c.awaitHandlers)})),new CallbackManagerForChainRun(n,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(e,r,n=v4(),s=void 0,a=void 0,o=void 0,l=void 0){return await Promise.all(this.handlers.map(c=>{if(!c.ignoreAgent)return isBaseTracer(c)&&c._createRunForToolStart(e,r,n,this._parentRunId,this.tags,this.metadata,l),consumeCallback(async()=>{var d;try{await((d=c.handleToolStart)==null?void 0:d.call(c,e,r,n,this._parentRunId,this.tags,this.metadata,l))}catch(p){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleToolStart: ${p}`),c.raiseError)throw p}},c.awaitHandlers)})),new CallbackManagerForToolRun(n,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(e,r,n=v4(),s=void 0,a=void 0,o=void 0,l=void 0){return await Promise.all(this.handlers.map(c=>{if(!c.ignoreRetriever)return isBaseTracer(c)&&c._createRunForRetrieverStart(e,r,n,this._parentRunId,this.tags,this.metadata,l),consumeCallback(async()=>{var d;try{await((d=c.handleRetrieverStart)==null?void 0:d.call(c,e,r,n,this._parentRunId,this.tags,this.metadata,l))}catch(p){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleRetrieverStart: ${p}`),c.raiseError)throw p}},c.awaitHandlers)})),new CallbackManagerForRetrieverRun(n,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleCustomEvent(e,r,n,s,a){await Promise.all(this.handlers.map(o=>consumeCallback(async()=>{var l;if(!o.ignoreCustomEvent)try{await((l=o.handleCustomEvent)==null?void 0:l.call(o,e,r,n,this.tags,this.metadata))}catch(c){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleCustomEvent: ${c}`),o.raiseError)throw c}},o.awaitHandlers)))}addHandler(e,r=!0){this.handlers.push(e),r&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(r=>r!==e),this.inheritableHandlers=this.inheritableHandlers.filter(r=>r!==e)}setHandlers(e,r=!0){this.handlers=[],this.inheritableHandlers=[];for(const n of e)this.addHandler(n,r)}addTags(e,r=!0){this.removeTags(e),this.tags.push(...e),r&&this.inheritableTags.push(...e)}removeTags(e){this.tags=this.tags.filter(r=>!e.includes(r)),this.inheritableTags=this.inheritableTags.filter(r=>!e.includes(r))}addMetadata(e,r=!0){this.metadata={...this.metadata,...e},r&&(this.inheritableMetadata={...this.inheritableMetadata,...e})}removeMetadata(e){for(const r of Object.keys(e))delete this.metadata[r],delete this.inheritableMetadata[r]}copy(e=[],r=!0){const n=new CallbackManager(this._parentRunId);for(const s of this.handlers){const a=this.inheritableHandlers.includes(s);n.addHandler(s,a)}for(const s of this.tags){const a=this.inheritableTags.includes(s);n.addTags([s],a)}for(const s of Object.keys(this.metadata)){const a=Object.keys(this.inheritableMetadata).includes(s);n.addMetadata({[s]:this.metadata[s]},a)}for(const s of e)n.handlers.filter(a=>a.name==="console_callback_handler").some(a=>a.name===s.name)||n.addHandler(s,r);return n}static fromHandlers(e){class r extends BaseCallbackHandler{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:v4()}),Object.assign(this,e)}}const n=new this;return n.addHandler(new r),n}static configure(e,r,n,s,a,o,l){return this._configureSync(e,r,n,s,a,o,l)}static _configureSync(e,r,n,s,a,o,l){var y,x;let c;(e||r)&&(Array.isArray(e)||!e?(c=new CallbackManager,c.setHandlers((e==null?void 0:e.map(ensureHandler))??[],!0)):c=e,c=c.copy(Array.isArray(r)?r.map(ensureHandler):r==null?void 0:r.handlers,!1));const d=getEnvironmentVariable("LANGCHAIN_VERBOSE")==="true"||(l==null?void 0:l.verbose),p=((y=LangChainTracer.getTraceableRunTree())==null?void 0:y.tracingEnabled)||isTracingEnabled(),g=p||(getEnvironmentVariable("LANGCHAIN_TRACING")??!1);if(d||g){if(c||(c=new CallbackManager),d&&!c.handlers.some(E=>E.name===ConsoleCallbackHandler.prototype.name)){const E=new ConsoleCallbackHandler;c.addHandler(E,!0)}if(g&&!c.handlers.some(E=>E.name==="langchain_tracer")&&p){const E=new LangChainTracer;c.addHandler(E,!0),c._parentRunId=((x=LangChainTracer.getTraceableRunTree())==null?void 0:x.id)??c._parentRunId}}for(const{contextVar:E,inheritable:S=!0,handlerClass:k,envVar:C}of _getConfigureHooks()){const P=C&&getEnvironmentVariable(C)==="true"&&k;let R;const j=E!==void 0?getContextVariable(E):void 0;j&&isBaseCallbackHandler(j)?R=j:P&&(R=new k({})),R!==void 0&&(c||(c=new CallbackManager),c.handlers.some(I=>I.name===R.name)||c.addHandler(R,S))}return(n||s)&&c&&(c.addTags(n??[]),c.addTags(s??[],!1)),(a||o)&&c&&(c.addMetadata(a??{}),c.addMetadata(o??{},!1)),c}}function ensureHandler(t){return"name"in t?t:BaseCallbackHandler.fromMethods(t)}class MockAsyncLocalStorage{getStore(){}run(e,r){return r()}enterWith(e){}}const mockAsyncLocalStorage=new MockAsyncLocalStorage,LC_CHILD_KEY=Symbol.for("lc:child_config");class AsyncLocalStorageProvider{getInstance(){return getGlobalAsyncLocalStorageInstance()??mockAsyncLocalStorage}getRunnableConfig(){var r,n;return(n=(r=this.getInstance().getStore())==null?void 0:r.extra)==null?void 0:n[LC_CHILD_KEY]}runWithConfig(e,r,n){var p;const s=CallbackManager._configureSync(e==null?void 0:e.callbacks,void 0,e==null?void 0:e.tags,void 0,e==null?void 0:e.metadata),a=this.getInstance(),o=a.getStore(),l=s==null?void 0:s.getParentRunId(),c=(p=s==null?void 0:s.handlers)==null?void 0:p.find(g=>(g==null?void 0:g.name)==="langchain_tracer");let d;return c&&l?d=c.convertToRunTree(l):n||(d=new RunTree({name:"<runnable_lambda>",tracingEnabled:!1})),d&&(d.extra={...d.extra,[LC_CHILD_KEY]:e}),o!==void 0&&o[_CONTEXT_VARIABLES_KEY]!==void 0&&(d===void 0&&(d={}),d[_CONTEXT_VARIABLES_KEY]=o[_CONTEXT_VARIABLES_KEY]),a.run(d,r)}initializeGlobalInstance(e){getGlobalAsyncLocalStorageInstance()===void 0&&setGlobalAsyncLocalStorageInstance(e)}}const AsyncLocalStorageProviderSingleton=new AsyncLocalStorageProvider,DEFAULT_RECURSION_LIMIT=25;async function getCallbackManagerForConfig(t){return CallbackManager._configureSync(t==null?void 0:t.callbacks,void 0,t==null?void 0:t.tags,void 0,t==null?void 0:t.metadata)}function mergeConfigs(...t){const e={};for(const r of t.filter(n=>!!n))for(const n of Object.keys(r))if(n==="metadata")e[n]={...e[n],...r[n]};else if(n==="tags"){const s=e[n]??[];e[n]=[...new Set(s.concat(r[n]??[]))]}else if(n==="configurable")e[n]={...e[n],...r[n]};else if(n==="timeout")e.timeout===void 0?e.timeout=r.timeout:r.timeout!==void 0&&(e.timeout=Math.min(e.timeout,r.timeout));else if(n==="signal")e.signal===void 0?e.signal=r.signal:r.signal!==void 0&&("any"in AbortSignal?e.signal=AbortSignal.any([e.signal,r.signal]):e.signal=r.signal);else if(n==="callbacks"){const s=e.callbacks,a=r.callbacks;if(Array.isArray(a))if(!s)e.callbacks=a;else if(Array.isArray(s))e.callbacks=s.concat(a);else{const o=s.copy();for(const l of a)o.addHandler(ensureHandler(l),!0);e.callbacks=o}else if(a)if(!s)e.callbacks=a;else if(Array.isArray(s)){const o=a.copy();for(const l of s)o.addHandler(ensureHandler(l),!0);e.callbacks=o}else e.callbacks=new CallbackManager(a._parentRunId,{handlers:s.handlers.concat(a.handlers),inheritableHandlers:s.inheritableHandlers.concat(a.inheritableHandlers),tags:Array.from(new Set(s.tags.concat(a.tags))),inheritableTags:Array.from(new Set(s.inheritableTags.concat(a.inheritableTags))),metadata:{...s.metadata,...a.metadata}})}else{const s=n;e[s]=r[s]??e[s]}return e}const PRIMITIVES=new Set(["string","number","boolean"]);function ensureConfig(t){var n;const e=AsyncLocalStorageProviderSingleton.getRunnableConfig();let r={tags:[],metadata:{},recursionLimit:25,runId:void 0};if(e){const{runId:s,runName:a,...o}=e;r=Object.entries(o).reduce((l,[c,d])=>(d!==void 0&&(l[c]=d),l),r)}if(t&&(r=Object.entries(t).reduce((s,[a,o])=>(o!==void 0&&(s[a]=o),s),r)),r!=null&&r.configurable)for(const s of Object.keys(r.configurable))PRIMITIVES.has(typeof r.configurable[s])&&!((n=r.metadata)!=null&&n[s])&&(r.metadata||(r.metadata={}),r.metadata[s]=r.configurable[s]);if(r.timeout!==void 0){if(r.timeout<=0)throw new Error("Timeout must be a positive number");const s=AbortSignal.timeout(r.timeout);r.signal!==void 0?"any"in AbortSignal&&(r.signal=AbortSignal.any([r.signal,s])):r.signal=s,delete r.timeout}return r}function patchConfig(t={},{callbacks:e,maxConcurrency:r,recursionLimit:n,runName:s,configurable:a,runId:o}={}){const l=ensureConfig(t);return e!==void 0&&(delete l.runName,l.callbacks=e),n!==void 0&&(l.recursionLimit=n),r!==void 0&&(l.maxConcurrency=r),s!==void 0&&(l.runName=s),a!==void 0&&(l.configurable={...l.configurable,...a}),o!==void 0&&delete l.runId,l}function pickRunnableConfigKeys(t){return t?{configurable:t.configurable,recursionLimit:t.recursionLimit,callbacks:t.callbacks,tags:t.tags,metadata:t.metadata,maxConcurrency:t.maxConcurrency,timeout:t.timeout,signal:t.signal}:void 0}async function raceWithSignal(t,e){if(e===void 0)return t;let r;return Promise.race([t.catch(n=>{if(!(e!=null&&e.aborted))throw n}),new Promise((n,s)=>{r=()=>{s(new Error("Aborted"))},e.addEventListener("abort",r),e.aborted&&s(new Error("Aborted"))})]).finally(()=>e.removeEventListener("abort",r))}class IterableReadableStream extends ReadableStream{constructor(){super(...arguments),Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{const e=await this.reader.read();return e.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:e.value}}catch(e){throw this.reader.releaseLock(),e}}async return(){if(this.ensureReader(),this.locked){const e=this.reader.cancel();this.reader.releaseLock(),await e}return{done:!0,value:void 0}}async throw(e){if(this.ensureReader(),this.locked){const r=this.reader.cancel();this.reader.releaseLock(),await r}throw e}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}static fromReadableStream(e){const r=e.getReader();return new IterableReadableStream({start(n){return s();function s(){return r.read().then(({done:a,value:o})=>{if(a){n.close();return}return n.enqueue(o),s()})}},cancel(){r.releaseLock()}})}static fromAsyncGenerator(e){return new IterableReadableStream({async pull(r){const{value:n,done:s}=await e.next();s&&r.close(),r.enqueue(n)},async cancel(r){await e.return(r)}})}}function atee(t,e=2){const r=Array.from({length:e},()=>[]);return r.map(async function*(s){for(;;)if(s.length===0){const a=await t.next();for(const o of r)o.push(a)}else{if(s[0].done)return;yield s.shift().value}})}function concat(t,e){if(Array.isArray(t)&&Array.isArray(e))return t.concat(e);if(typeof t=="string"&&typeof e=="string")return t+e;if(typeof t=="number"&&typeof e=="number")return t+e;if("concat"in t&&typeof t.concat=="function")return t.concat(e);if(typeof t=="object"&&typeof e=="object"){const r={...t};for(const[n,s]of Object.entries(e))n in r&&!Array.isArray(r[n])?r[n]=concat(r[n],s):r[n]=s;return r}else throw new Error(`Cannot concat ${typeof t} and ${typeof e}`)}class AsyncGeneratorWithSetup{constructor(e){var r;Object.defineProperty(this,"generator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResult",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResultUsed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.generator=e.generator,this.config=e.config,this.signal=e.signal??((r=this.config)==null?void 0:r.signal),this.setup=new Promise((n,s)=>{AsyncLocalStorageProviderSingleton.runWithConfig(pickRunnableConfigKeys(e.config),async()=>{this.firstResult=e.generator.next(),e.startSetup?this.firstResult.then(e.startSetup).then(n,s):this.firstResult.then(a=>n(void 0),s)},!0)})}async next(...e){var r;return(r=this.signal)==null||r.throwIfAborted(),this.firstResultUsed?AsyncLocalStorageProviderSingleton.runWithConfig(pickRunnableConfigKeys(this.config),this.signal?async()=>raceWithSignal(this.generator.next(...e),this.signal):async()=>this.generator.next(...e),!0):(this.firstResultUsed=!0,this.firstResult)}async return(e){return this.generator.return(e)}async throw(e){return this.generator.throw(e)}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}}async function pipeGeneratorWithSetup(t,e,r,n,...s){const a=new AsyncGeneratorWithSetup({generator:e,startSetup:r,signal:n}),o=await a.setup;return{output:t(a,o,...s),setup:o}}class RunLogPatch{constructor(e){Object.defineProperty(this,"ops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.ops=e.ops??[]}concat(e){const r=this.ops.concat(e.ops),n=applyPatch({},r);return new RunLog({ops:r,state:n[n.length-1].newDocument})}}class RunLog extends RunLogPatch{constructor(e){super(e),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.state=e.state}concat(e){const r=this.ops.concat(e.ops),n=applyPatch(this.state,e.ops);return new RunLog({ops:r,state:n[n.length-1].newDocument})}static fromRunLogPatch(e){const r=applyPatch({},e.ops);return new RunLog({ops:e.ops,state:r[r.length-1].newDocument})}}const isLogStreamHandler=t=>t.name==="log_stream_tracer";async function _getStandardizedInputs(t,e){if(e==="original")throw new Error("Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.");const{inputs:r}=t;if(["retriever","llm","prompt"].includes(t.run_type))return r;if(!(Object.keys(r).length===1&&(r==null?void 0:r.input)===""))return r.input}async function _getStandardizedOutputs(t,e){const{outputs:r}=t;return e==="original"||["retriever","llm","prompt"].includes(t.run_type)?r:r!==void 0&&Object.keys(r).length===1&&(r==null?void 0:r.output)!==void 0?r.output:r}function isChatGenerationChunk(t){return t!==void 0&&t.message!==void 0}class LogStreamCallbackHandler extends BaseTracer{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_schemaFormat",{enumerable:!0,configurable:!0,writable:!0,value:"original"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"keyMapByRunId",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"counterMapByRunName",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"log_stream_tracer"}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this._schemaFormat=(e==null?void 0:e._schemaFormat)??this._schemaFormat,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=IterableReadableStream.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){if(e.id===this.rootId)return!1;const r=e.tags??[];let n=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(n=n||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(n=n||this.includeTypes.includes(e.run_type)),this.includeTags!==void 0&&(n=n||r.find(s=>{var a;return(a=this.includeTags)==null?void 0:a.includes(s)})!==void 0),this.excludeNames!==void 0&&(n=n&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(n=n&&!this.excludeTypes.includes(e.run_type)),this.excludeTags!==void 0&&(n=n&&r.every(s=>{var a;return!((a=this.excludeTags)!=null&&a.includes(s))})),n}async*tapOutputIterable(e,r){for await(const n of r){if(e!==this.rootId){const s=this.keyMapByRunId[e];s&&await this.writer.write(new RunLogPatch({ops:[{op:"add",path:`/logs/${s}/streamed_output/-`,value:n}]}))}yield n}}async onRunCreate(e){var s;if(this.rootId===void 0&&(this.rootId=e.id,await this.writer.write(new RunLogPatch({ops:[{op:"replace",path:"",value:{id:e.id,name:e.name,type:e.run_type,streamed_output:[],final_output:void 0,logs:{}}}]}))),!this._includeRun(e))return;this.counterMapByRunName[e.name]===void 0&&(this.counterMapByRunName[e.name]=0),this.counterMapByRunName[e.name]+=1;const r=this.counterMapByRunName[e.name];this.keyMapByRunId[e.id]=r===1?e.name:`${e.name}:${r}`;const n={id:e.id,name:e.name,type:e.run_type,tags:e.tags??[],metadata:((s=e.extra)==null?void 0:s.metadata)??{},start_time:new Date(e.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};this._schemaFormat==="streaming_events"&&(n.inputs=await _getStandardizedInputs(e,this._schemaFormat)),await this.writer.write(new RunLogPatch({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[e.id]}`,value:n}]}))}async onRunUpdate(e){try{const r=this.keyMapByRunId[e.id];if(r===void 0)return;const n=[];this._schemaFormat==="streaming_events"&&n.push({op:"replace",path:`/logs/${r}/inputs`,value:await _getStandardizedInputs(e,this._schemaFormat)}),n.push({op:"add",path:`/logs/${r}/final_output`,value:await _getStandardizedOutputs(e,this._schemaFormat)}),e.end_time!==void 0&&n.push({op:"add",path:`/logs/${r}/end_time`,value:new Date(e.end_time).toISOString()});const s=new RunLogPatch({ops:n});await this.writer.write(s)}finally{if(e.id===this.rootId){const r=new RunLogPatch({ops:[{op:"replace",path:"/final_output",value:await _getStandardizedOutputs(e,this._schemaFormat)}]});await this.writer.write(r),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(e,r,n){const s=this.keyMapByRunId[e.id];if(s===void 0)return;const a=e.inputs.messages!==void 0;let o;a?isChatGenerationChunk(n==null?void 0:n.chunk)?o=n==null?void 0:n.chunk:o=new AIMessageChunk({id:`run-${e.id}`,content:r}):o=r;const l=new RunLogPatch({ops:[{op:"add",path:`/logs/${s}/streamed_output_str/-`,value:r},{op:"add",path:`/logs/${s}/streamed_output/-`,value:o}]});await this.writer.write(l)}}const RUN_KEY="__run";class GenerationChunk{constructor(e){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generationInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.text=e.text,this.generationInfo=e.generationInfo}concat(e){return new GenerationChunk({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo}})}}class ChatGenerationChunk extends GenerationChunk{constructor(e){super(e),Object.defineProperty(this,"message",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.message=e.message}concat(e){return new ChatGenerationChunk({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo},message:this.message.concat(e.message)})}}function assignName({name:t,serialized:e}){return t!==void 0?t:(e==null?void 0:e.name)!==void 0?e.name:(e==null?void 0:e.id)!==void 0&&Array.isArray(e==null?void 0:e.id)?e.id[e.id.length-1]:"Unnamed"}const isStreamEventsHandler=t=>t.name==="event_stream_tracer";class EventStreamCallbackHandler extends BaseTracer{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"runInfoMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"tappedPromises",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"event_stream_tracer"}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=IterableReadableStream.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){const r=e.tags??[];let n=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(n=n||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(n=n||this.includeTypes.includes(e.runType)),this.includeTags!==void 0&&(n=n||r.find(s=>{var a;return(a=this.includeTags)==null?void 0:a.includes(s)})!==void 0),this.excludeNames!==void 0&&(n=n&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(n=n&&!this.excludeTypes.includes(e.runType)),this.excludeTags!==void 0&&(n=n&&r.every(s=>{var a;return!((a=this.excludeTags)!=null&&a.includes(s))})),n}async*tapOutputIterable(e,r){const n=await r.next();if(n.done)return;const s=this.runInfoMap.get(e);if(s===void 0){yield n.value;return}function a(l,c){return l==="llm"&&typeof c=="string"?new GenerationChunk({text:c}):c}let o=this.tappedPromises.get(e);if(o===void 0){let l;o=new Promise(c=>{l=c}),this.tappedPromises.set(e,o);try{const c={event:`on_${s.runType}_stream`,run_id:e,name:s.name,tags:s.tags,metadata:s.metadata,data:{}};await this.send({...c,data:{chunk:a(s.runType,n.value)}},s),yield n.value;for await(const d of r)s.runType!=="tool"&&s.runType!=="retriever"&&await this.send({...c,data:{chunk:a(s.runType,d)}},s),yield d}finally{l()}}else{yield n.value;for await(const l of r)yield l}}async send(e,r){this._includeRun(r)&&await this.writer.write(e)}async sendEndEvent(e,r){const n=this.tappedPromises.get(e.run_id);n!==void 0?n.then(()=>{this.send(e,r)}):await this.send(e,r)}async onLLMStart(e){var o,l;const r=assignName(e),n=e.inputs.messages!==void 0?"chat_model":"llm",s={tags:e.tags??[],metadata:((o=e.extra)==null?void 0:o.metadata)??{},name:r,runType:n,inputs:e.inputs};this.runInfoMap.set(e.id,s);const a=`on_${n}_start`;await this.send({event:a,data:{input:e.inputs},name:r,tags:e.tags??[],run_id:e.id,metadata:((l=e.extra)==null?void 0:l.metadata)??{}},s)}async onLLMNewToken(e,r,n){const s=this.runInfoMap.get(e.id);let a,o;if(s===void 0)throw new Error(`onLLMNewToken: Run ID ${e.id} not found in run map.`);if(this.runInfoMap.size!==1){if(s.runType==="chat_model")o="on_chat_model_stream",(n==null?void 0:n.chunk)===void 0?a=new AIMessageChunk({content:r,id:`run-${e.id}`}):a=n.chunk.message;else if(s.runType==="llm")o="on_llm_stream",(n==null?void 0:n.chunk)===void 0?a=new GenerationChunk({text:r}):a=n.chunk;else throw new Error(`Unexpected run type ${s.runType}`);await this.send({event:o,data:{chunk:a},run_id:e.id,name:s.name,tags:s.tags,metadata:s.metadata},s)}}async onLLMEnd(e){var o,l,c;const r=this.runInfoMap.get(e.id);this.runInfoMap.delete(e.id);let n;if(r===void 0)throw new Error(`onLLMEnd: Run ID ${e.id} not found in run map.`);const s=(o=e.outputs)==null?void 0:o.generations;let a;if(r.runType==="chat_model"){for(const d of s??[]){if(a!==void 0)break;a=(l=d[0])==null?void 0:l.message}n="on_chat_model_end"}else if(r.runType==="llm")a={generations:s==null?void 0:s.map(d=>d.map(p=>({text:p.text,generationInfo:p.generationInfo}))),llmOutput:((c=e.outputs)==null?void 0:c.llmOutput)??{}},n="on_llm_end";else throw new Error(`onLLMEnd: Unexpected run type: ${r.runType}`);await this.sendEndEvent({event:n,data:{output:a,input:r.inputs},run_id:e.id,name:r.name,tags:r.tags,metadata:r.metadata},r)}async onChainStart(e){var o,l;const r=assignName(e),n=e.run_type??"chain",s={tags:e.tags??[],metadata:((o=e.extra)==null?void 0:o.metadata)??{},name:r,runType:e.run_type};let a={};e.inputs.input===""&&Object.keys(e.inputs).length===1?(a={},s.inputs={}):e.inputs.input!==void 0?(a.input=e.inputs.input,s.inputs=e.inputs.input):(a.input=e.inputs,s.inputs=e.inputs),this.runInfoMap.set(e.id,s),await this.send({event:`on_${n}_start`,data:a,name:r,tags:e.tags??[],run_id:e.id,metadata:((l=e.extra)==null?void 0:l.metadata)??{}},s)}async onChainEnd(e){var l;const r=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),r===void 0)throw new Error(`onChainEnd: Run ID ${e.id} not found in run map.`);const n=`on_${e.run_type}_end`,s=e.inputs??r.inputs??{},o={output:((l=e.outputs)==null?void 0:l.output)??e.outputs,input:s};s.input&&Object.keys(s).length===1&&(o.input=s.input,r.inputs=s.input),await this.sendEndEvent({event:n,data:o,run_id:e.id,name:r.name,tags:r.tags,metadata:r.metadata??{}},r)}async onToolStart(e){var s,a;const r=assignName(e),n={tags:e.tags??[],metadata:((s=e.extra)==null?void 0:s.metadata)??{},name:r,runType:"tool",inputs:e.inputs??{}};this.runInfoMap.set(e.id,n),await this.send({event:"on_tool_start",data:{input:e.inputs??{}},name:r,run_id:e.id,tags:e.tags??[],metadata:((a=e.extra)==null?void 0:a.metadata)??{}},n)}async onToolEnd(e){var s;const r=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),r===void 0)throw new Error(`onToolEnd: Run ID ${e.id} not found in run map.`);if(r.inputs===void 0)throw new Error(`onToolEnd: Run ID ${e.id} is a tool call, and is expected to have traced inputs.`);const n=((s=e.outputs)==null?void 0:s.output)===void 0?e.outputs:e.outputs.output;await this.sendEndEvent({event:"on_tool_end",data:{output:n,input:r.inputs},run_id:e.id,name:r.name,tags:r.tags,metadata:r.metadata},r)}async onRetrieverStart(e){var a,o;const r=assignName(e),s={tags:e.tags??[],metadata:((a=e.extra)==null?void 0:a.metadata)??{},name:r,runType:"retriever",inputs:{query:e.inputs.query}};this.runInfoMap.set(e.id,s),await this.send({event:"on_retriever_start",data:{input:{query:e.inputs.query}},name:r,tags:e.tags??[],run_id:e.id,metadata:((o=e.extra)==null?void 0:o.metadata)??{}},s)}async onRetrieverEnd(e){var n;const r=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),r===void 0)throw new Error(`onRetrieverEnd: Run ID ${e.id} not found in run map.`);await this.sendEndEvent({event:"on_retriever_end",data:{output:((n=e.outputs)==null?void 0:n.documents)??e.outputs,input:r.inputs},run_id:e.id,name:r.name,tags:r.tags,metadata:r.metadata},r)}async handleCustomEvent(e,r,n){const s=this.runInfoMap.get(n);if(s===void 0)throw new Error(`handleCustomEvent: Run ID ${n} not found in run map.`);await this.send({event:"on_custom_event",run_id:n,name:e,tags:s.tags,metadata:s.metadata,data:r},s)}async finish(){const e=[...this.tappedPromises.values()];Promise.all(e).finally(()=>{this.writer.close()})}}const STATUS_NO_RETRY=[400,401,402,403,404,405,406,407,409],defaultFailedAttemptHandler=t=>{var r,n;if(t.message.startsWith("Cancel")||t.message.startsWith("AbortError")||t.name==="AbortError"||(t==null?void 0:t.code)==="ECONNABORTED")throw t;const e=((r=t==null?void 0:t.response)==null?void 0:r.status)??(t==null?void 0:t.status);if(e&&STATUS_NO_RETRY.includes(+e))throw t;if(((n=t==null?void 0:t.error)==null?void 0:n.code)==="insufficient_quota"){const s=new Error(t==null?void 0:t.message);throw s.name="InsufficientQuotaError",s}};class AsyncCaller{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.onFailedAttempt=e.onFailedAttempt??defaultFailedAttemptHandler;const r="default"in PQueueMod?PQueueMod.default:PQueueMod;this.queue=new r({concurrency:this.maxConcurrency})}call(e,...r){return this.queue.add(()=>pRetry(()=>e(...r).catch(n=>{throw n instanceof Error?n:new Error(n)}),{onFailedAttempt:this.onFailedAttempt,retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,r,...n){return e.signal?Promise.race([this.call(r,...n),new Promise((s,a)=>{var o;(o=e.signal)==null||o.addEventListener("abort",()=>{a(new Error("AbortError"))})})]):this.call(r,...n)}fetch(...e){return this.call(()=>fetch(...e).then(r=>r.ok?r:Promise.reject(r)))}}class RootListenersTracer extends BaseTracer{constructor({config:e,onStart:r,onEnd:n,onError:s}){super({_awaitHandler:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RootListenersTracer"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnStart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnEnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.config=e,this.argOnStart=r,this.argOnEnd=n,this.argOnError=s}persistRun(e){return Promise.resolve()}async onRunCreate(e){this.rootId||(this.rootId=e.id,this.argOnStart&&await this.argOnStart(e,this.config))}async onRunUpdate(e){e.id===this.rootId&&(e.error?this.argOnError&&await this.argOnError(e,this.config):this.argOnEnd&&await this.argOnEnd(e,this.config))}}function isRunnableInterface(t){return t?t.lc_runnable:!1}class _RootEventFilter{constructor(e){Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.includeNames=e.includeNames,this.includeTypes=e.includeTypes,this.includeTags=e.includeTags,this.excludeNames=e.excludeNames,this.excludeTypes=e.excludeTypes,this.excludeTags=e.excludeTags}includeEvent(e,r){let n=this.includeNames===void 0&&this.includeTypes===void 0&&this.includeTags===void 0;const s=e.tags??[];return this.includeNames!==void 0&&(n=n||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(n=n||this.includeTypes.includes(r)),this.includeTags!==void 0&&(n=n||s.some(a=>{var o;return(o=this.includeTags)==null?void 0:o.includes(a)})),this.excludeNames!==void 0&&(n=n&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(n=n&&!this.excludeTypes.includes(r)),this.excludeTags!==void 0&&(n=n&&s.every(a=>{var o;return!((o=this.excludeTags)!=null&&o.includes(a))})),n}}const ignoreOverride$1=Symbol("Let zodToJsonSchema decide on which parser to use"),defaultOptions$1={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},getDefaultOptions$1=t=>({...defaultOptions$1,...t}),getRefs$1=t=>{const e=getDefaultOptions$1(t),r=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([n,s])=>[s._def,{def:s._def,path:[...e.basePath,e.definitionPath,n],jsonSchema:void 0}]))}};function addErrorMessage$1(t,e,r,n){n!=null&&n.errorMessages&&r&&(t.errorMessage={...t.errorMessage,[e]:r})}function setResponseValueAndErrors$1(t,e,r,n,s){t[e]=r,addErrorMessage$1(t,e,n,s)}function parseAnyDef$1(){return{}}function parseArrayDef$1(t,e){var n,s,a;const r={type:"array"};return(n=t.type)!=null&&n._def&&((a=(s=t.type)==null?void 0:s._def)==null?void 0:a.typeName)!==ZodFirstPartyTypeKind.ZodAny&&(r.items=parseDef$1(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&setResponseValueAndErrors$1(r,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&setResponseValueAndErrors$1(r,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&(setResponseValueAndErrors$1(r,"minItems",t.exactLength.value,t.exactLength.message,e),setResponseValueAndErrors$1(r,"maxItems",t.exactLength.value,t.exactLength.message,e)),r}function parseBigintDef$1(t,e){const r={type:"integer",format:"int64"};if(!t.checks)return r;for(const n of t.checks)switch(n.kind){case"min":e.target==="jsonSchema7"?n.inclusive?setResponseValueAndErrors$1(r,"minimum",n.value,n.message,e):setResponseValueAndErrors$1(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),setResponseValueAndErrors$1(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?setResponseValueAndErrors$1(r,"maximum",n.value,n.message,e):setResponseValueAndErrors$1(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),setResponseValueAndErrors$1(r,"maximum",n.value,n.message,e));break;case"multipleOf":setResponseValueAndErrors$1(r,"multipleOf",n.value,n.message,e);break}return r}function parseBooleanDef$1(){return{type:"boolean"}}function parseBrandedDef$1(t,e){return parseDef$1(t.type._def,e)}const parseCatchDef$1=(t,e)=>parseDef$1(t.innerType._def,e);function parseDateDef$1(t,e,r){const n=r??e.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((s,a)=>parseDateDef$1(t,e,s))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return integerDateParser$1(t,e)}}const integerDateParser$1=(t,e)=>{const r={type:"integer",format:"unix-time"};if(e.target==="openApi3")return r;for(const n of t.checks)switch(n.kind){case"min":setResponseValueAndErrors$1(r,"minimum",n.value,n.message,e);break;case"max":setResponseValueAndErrors$1(r,"maximum",n.value,n.message,e);break}return r};function parseDefaultDef$1(t,e){return{...parseDef$1(t.innerType._def,e),default:t.defaultValue()}}function parseEffectsDef$1(t,e){return e.effectStrategy==="input"?parseDef$1(t.schema._def,e):{}}function parseEnumDef$1(t){return{type:"string",enum:Array.from(t.values)}}const isJsonSchema7AllOfType$1=t=>"type"in t&&t.type==="string"?!1:"allOf"in t;function parseIntersectionDef$1(t,e){const r=[parseDef$1(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),parseDef$1(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(a=>!!a);let n=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const s=[];return r.forEach(a=>{if(isJsonSchema7AllOfType$1(a))s.push(...a.allOf),a.unevaluatedProperties===void 0&&(n=void 0);else{let o=a;if("additionalProperties"in a&&a.additionalProperties===!1){const{additionalProperties:l,...c}=a;o=c}else n=void 0;s.push(o)}}),s.length?{allOf:s,...n}:void 0}function parseLiteralDef$1(t,e){const r=typeof t.value;return r!=="bigint"&&r!=="number"&&r!=="boolean"&&r!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:r==="bigint"?"integer":r,enum:[t.value]}:{type:r==="bigint"?"integer":r,const:t.value}}let emojiRegex$1;const zodPatterns$1={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(emojiRegex$1===void 0&&(emojiRegex$1=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),emojiRegex$1),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function parseStringDef$1(t,e){const r={type:"string"};if(t.checks)for(const n of t.checks)switch(n.kind){case"min":setResponseValueAndErrors$1(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,e);break;case"max":setResponseValueAndErrors$1(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,e);break;case"email":switch(e.emailStrategy){case"format:email":addFormat$1(r,"email",n.message,e);break;case"format:idn-email":addFormat$1(r,"idn-email",n.message,e);break;case"pattern:zod":addPattern$1(r,zodPatterns$1.email,n.message,e);break}break;case"url":addFormat$1(r,"uri",n.message,e);break;case"uuid":addFormat$1(r,"uuid",n.message,e);break;case"regex":addPattern$1(r,n.regex,n.message,e);break;case"cuid":addPattern$1(r,zodPatterns$1.cuid,n.message,e);break;case"cuid2":addPattern$1(r,zodPatterns$1.cuid2,n.message,e);break;case"startsWith":addPattern$1(r,RegExp(`^${escapeLiteralCheckValue(n.value,e)}`),n.message,e);break;case"endsWith":addPattern$1(r,RegExp(`${escapeLiteralCheckValue(n.value,e)}$`),n.message,e);break;case"datetime":addFormat$1(r,"date-time",n.message,e);break;case"date":addFormat$1(r,"date",n.message,e);break;case"time":addFormat$1(r,"time",n.message,e);break;case"duration":addFormat$1(r,"duration",n.message,e);break;case"length":setResponseValueAndErrors$1(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,e),setResponseValueAndErrors$1(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,e);break;case"includes":{addPattern$1(r,RegExp(escapeLiteralCheckValue(n.value,e)),n.message,e);break}case"ip":{n.version!=="v6"&&addFormat$1(r,"ipv4",n.message,e),n.version!=="v4"&&addFormat$1(r,"ipv6",n.message,e);break}case"base64url":addPattern$1(r,zodPatterns$1.base64url,n.message,e);break;case"jwt":addPattern$1(r,zodPatterns$1.jwt,n.message,e);break;case"cidr":{n.version!=="v6"&&addPattern$1(r,zodPatterns$1.ipv4Cidr,n.message,e),n.version!=="v4"&&addPattern$1(r,zodPatterns$1.ipv6Cidr,n.message,e);break}case"emoji":addPattern$1(r,zodPatterns$1.emoji(),n.message,e);break;case"ulid":{addPattern$1(r,zodPatterns$1.ulid,n.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{addFormat$1(r,"binary",n.message,e);break}case"contentEncoding:base64":{setResponseValueAndErrors$1(r,"contentEncoding","base64",n.message,e);break}case"pattern:zod":{addPattern$1(r,zodPatterns$1.base64,n.message,e);break}}break}case"nanoid":addPattern$1(r,zodPatterns$1.nanoid,n.message,e)}return r}function escapeLiteralCheckValue(t,e){return e.patternStrategy==="escape"?escapeNonAlphaNumeric$1(t):t}const ALPHA_NUMERIC=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function escapeNonAlphaNumeric$1(t){let e="";for(let r=0;r<t.length;r++)ALPHA_NUMERIC.has(t[r])||(e+="\\"),e+=t[r];return e}function addFormat$1(t,e,r,n){var s;t.format||(s=t.anyOf)!=null&&s.some(a=>a.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&n.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...r&&n.errorMessages&&{errorMessage:{format:r}}})):setResponseValueAndErrors$1(t,"format",e,r,n)}function addPattern$1(t,e,r,n){var s;t.pattern||(s=t.allOf)!=null&&s.some(a=>a.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&n.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:stringifyRegExpWithFlags(e,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):setResponseValueAndErrors$1(t,"pattern",stringifyRegExpWithFlags(e,n),r,n)}function stringifyRegExpWithFlags(t,e){var c;if(!e.applyRegexFlags||!t.flags)return t.source;const r={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},n=r.i?t.source.toLowerCase():t.source;let s="",a=!1,o=!1,l=!1;for(let d=0;d<n.length;d++){if(a){s+=n[d],a=!1;continue}if(r.i){if(o){if(n[d].match(/[a-z]/)){l?(s+=n[d],s+=`${n[d-2]}-${n[d]}`.toUpperCase(),l=!1):n[d+1]==="-"&&((c=n[d+2])!=null&&c.match(/[a-z]/))?(s+=n[d],l=!0):s+=`${n[d]}${n[d].toUpperCase()}`;continue}}else if(n[d].match(/[a-z]/)){s+=`[${n[d]}${n[d].toUpperCase()}]`;continue}}if(r.m){if(n[d]==="^"){s+=`(^|(?<=[\r
]))`;continue}else if(n[d]==="$"){s+=`($|(?=[\r
]))`;continue}}if(r.s&&n[d]==="."){s+=o?`${n[d]}\r
`:`[${n[d]}\r
]`;continue}s+=n[d],n[d]==="\\"?a=!0:o&&n[d]==="]"?o=!1:!o&&n[d]==="["&&(o=!0)}try{new RegExp(s)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return s}function parseRecordDef$1(t,e){var n,s,a,o,l,c;if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&((n=t.keyType)==null?void 0:n._def.typeName)===ZodFirstPartyTypeKind.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((d,p)=>({...d,[p]:parseDef$1(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",p]})??{}}),{}),additionalProperties:e.rejectedAdditionalProperties};const r={type:"object",additionalProperties:parseDef$1(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??e.allowedAdditionalProperties};if(e.target==="openApi3")return r;if(((s=t.keyType)==null?void 0:s._def.typeName)===ZodFirstPartyTypeKind.ZodString&&((a=t.keyType._def.checks)!=null&&a.length)){const{type:d,...p}=parseStringDef$1(t.keyType._def,e);return{...r,propertyNames:p}}else{if(((o=t.keyType)==null?void 0:o._def.typeName)===ZodFirstPartyTypeKind.ZodEnum)return{...r,propertyNames:{enum:t.keyType._def.values}};if(((l=t.keyType)==null?void 0:l._def.typeName)===ZodFirstPartyTypeKind.ZodBranded&&t.keyType._def.type._def.typeName===ZodFirstPartyTypeKind.ZodString&&((c=t.keyType._def.type._def.checks)!=null&&c.length)){const{type:d,...p}=parseBrandedDef$1(t.keyType._def,e);return{...r,propertyNames:p}}}return r}function parseMapDef$1(t,e){if(e.mapStrategy==="record")return parseRecordDef$1(t,e);const r=parseDef$1(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},n=parseDef$1(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[r,n],minItems:2,maxItems:2}}}function parseNativeEnumDef$1(t){const e=t.values,n=Object.keys(t.values).filter(a=>typeof e[e[a]]!="number").map(a=>e[a]),s=Array.from(new Set(n.map(a=>typeof a)));return{type:s.length===1?s[0]==="string"?"string":"number":["string","number"],enum:n}}function parseNeverDef$1(){return{not:{}}}function parseNullDef$1(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const primitiveMappings$1={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function parseUnionDef$1(t,e){if(e.target==="openApi3")return asAnyOf$1(t,e);const r=t.options instanceof Map?Array.from(t.options.values()):t.options;if(r.every(n=>n._def.typeName in primitiveMappings$1&&(!n._def.checks||!n._def.checks.length))){const n=r.reduce((s,a)=>{const o=primitiveMappings$1[a._def.typeName];return o&&!s.includes(o)?[...s,o]:s},[]);return{type:n.length>1?n:n[0]}}else if(r.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){const n=r.reduce((s,a)=>{const o=typeof a._def.value;switch(o){case"string":case"number":case"boolean":return[...s,o];case"bigint":return[...s,"integer"];case"object":if(a._def.value===null)return[...s,"null"];case"symbol":case"undefined":case"function":default:return s}},[]);if(n.length===r.length){const s=n.filter((a,o,l)=>l.indexOf(a)===o);return{type:s.length>1?s:s[0],enum:r.reduce((a,o)=>a.includes(o._def.value)?a:[...a,o._def.value],[])}}}else if(r.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((n,s)=>[...n,...s._def.values.filter(a=>!n.includes(a))],[])};return asAnyOf$1(t,e)}const asAnyOf$1=(t,e)=>{const r=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((n,s)=>parseDef$1(n._def,{...e,currentPath:[...e.currentPath,"anyOf",`${s}`]})).filter(n=>!!n&&(!e.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return r.length?{anyOf:r}:void 0};function parseNullableDef$1(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"?{type:primitiveMappings$1[t.innerType._def.typeName],nullable:!0}:{type:[primitiveMappings$1[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const n=parseDef$1(t.innerType._def,{...e,currentPath:[...e.currentPath]});return n&&"$ref"in n?{allOf:[n],nullable:!0}:n&&{...n,nullable:!0}}const r=parseDef$1(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}function parseNumberDef$1(t,e){const r={type:"number"};if(!t.checks)return r;for(const n of t.checks)switch(n.kind){case"int":r.type="integer",addErrorMessage$1(r,"type",n.message,e);break;case"min":e.target==="jsonSchema7"?n.inclusive?setResponseValueAndErrors$1(r,"minimum",n.value,n.message,e):setResponseValueAndErrors$1(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),setResponseValueAndErrors$1(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?setResponseValueAndErrors$1(r,"maximum",n.value,n.message,e):setResponseValueAndErrors$1(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),setResponseValueAndErrors$1(r,"maximum",n.value,n.message,e));break;case"multipleOf":setResponseValueAndErrors$1(r,"multipleOf",n.value,n.message,e);break}return r}function parseObjectDef$1(t,e){const r=e.target==="openAi",n={type:"object",properties:{}},s=[],a=t.shape();for(const l in a){let c=a[l];if(c===void 0||c._def===void 0)continue;let d=safeIsOptional(c);d&&r&&(c instanceof ZodOptional&&(c=c._def.innerType),c.isNullable()||(c=c.nullable()),d=!1);const p=parseDef$1(c._def,{...e,currentPath:[...e.currentPath,"properties",l],propertyPath:[...e.currentPath,"properties",l]});p!==void 0&&(n.properties[l]=p,d||s.push(l))}s.length&&(n.required=s);const o=decideAdditionalProperties$1(t,e);return o!==void 0&&(n.additionalProperties=o),n}function decideAdditionalProperties$1(t,e){if(t.catchall._def.typeName!=="ZodNever")return parseDef$1(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(t.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}function safeIsOptional(t){try{return t.isOptional()}catch{return!0}}const parseOptionalDef$1=(t,e)=>{var n;if(e.currentPath.toString()===((n=e.propertyPath)==null?void 0:n.toString()))return parseDef$1(t.innerType._def,e);const r=parseDef$1(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return r?{anyOf:[{not:{}},r]}:{}},parsePipelineDef$1=(t,e)=>{if(e.pipeStrategy==="input")return parseDef$1(t.in._def,e);if(e.pipeStrategy==="output")return parseDef$1(t.out._def,e);const r=parseDef$1(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),n=parseDef$1(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(s=>s!==void 0)}};function parsePromiseDef$1(t,e){return parseDef$1(t.type._def,e)}function parseSetDef$1(t,e){const n={type:"array",uniqueItems:!0,items:parseDef$1(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&setResponseValueAndErrors$1(n,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&setResponseValueAndErrors$1(n,"maxItems",t.maxSize.value,t.maxSize.message,e),n}function parseTupleDef$1(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((r,n)=>parseDef$1(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[]),additionalItems:parseDef$1(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((r,n)=>parseDef$1(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[])}}function parseUndefinedDef$1(){return{not:{}}}function parseUnknownDef$1(){return{}}const parseReadonlyDef$1=(t,e)=>parseDef$1(t.innerType._def,e),selectParser$1=(t,e,r)=>{switch(e){case ZodFirstPartyTypeKind.ZodString:return parseStringDef$1(t,r);case ZodFirstPartyTypeKind.ZodNumber:return parseNumberDef$1(t,r);case ZodFirstPartyTypeKind.ZodObject:return parseObjectDef$1(t,r);case ZodFirstPartyTypeKind.ZodBigInt:return parseBigintDef$1(t,r);case ZodFirstPartyTypeKind.ZodBoolean:return parseBooleanDef$1();case ZodFirstPartyTypeKind.ZodDate:return parseDateDef$1(t,r);case ZodFirstPartyTypeKind.ZodUndefined:return parseUndefinedDef$1();case ZodFirstPartyTypeKind.ZodNull:return parseNullDef$1(r);case ZodFirstPartyTypeKind.ZodArray:return parseArrayDef$1(t,r);case ZodFirstPartyTypeKind.ZodUnion:case ZodFirstPartyTypeKind.ZodDiscriminatedUnion:return parseUnionDef$1(t,r);case ZodFirstPartyTypeKind.ZodIntersection:return parseIntersectionDef$1(t,r);case ZodFirstPartyTypeKind.ZodTuple:return parseTupleDef$1(t,r);case ZodFirstPartyTypeKind.ZodRecord:return parseRecordDef$1(t,r);case ZodFirstPartyTypeKind.ZodLiteral:return parseLiteralDef$1(t,r);case ZodFirstPartyTypeKind.ZodEnum:return parseEnumDef$1(t);case ZodFirstPartyTypeKind.ZodNativeEnum:return parseNativeEnumDef$1(t);case ZodFirstPartyTypeKind.ZodNullable:return parseNullableDef$1(t,r);case ZodFirstPartyTypeKind.ZodOptional:return parseOptionalDef$1(t,r);case ZodFirstPartyTypeKind.ZodMap:return parseMapDef$1(t,r);case ZodFirstPartyTypeKind.ZodSet:return parseSetDef$1(t,r);case ZodFirstPartyTypeKind.ZodLazy:return()=>t.getter()._def;case ZodFirstPartyTypeKind.ZodPromise:return parsePromiseDef$1(t,r);case ZodFirstPartyTypeKind.ZodNaN:case ZodFirstPartyTypeKind.ZodNever:return parseNeverDef$1();case ZodFirstPartyTypeKind.ZodEffects:return parseEffectsDef$1(t,r);case ZodFirstPartyTypeKind.ZodAny:return parseAnyDef$1();case ZodFirstPartyTypeKind.ZodUnknown:return parseUnknownDef$1();case ZodFirstPartyTypeKind.ZodDefault:return parseDefaultDef$1(t,r);case ZodFirstPartyTypeKind.ZodBranded:return parseBrandedDef$1(t,r);case ZodFirstPartyTypeKind.ZodReadonly:return parseReadonlyDef$1(t,r);case ZodFirstPartyTypeKind.ZodCatch:return parseCatchDef$1(t,r);case ZodFirstPartyTypeKind.ZodPipeline:return parsePipelineDef$1(t,r);case ZodFirstPartyTypeKind.ZodFunction:case ZodFirstPartyTypeKind.ZodVoid:case ZodFirstPartyTypeKind.ZodSymbol:return;default:return(n=>{})()}};function parseDef$1(t,e,r=!1){var l;const n=e.seen.get(t);if(e.override){const c=(l=e.override)==null?void 0:l.call(e,t,e,n,r);if(c!==ignoreOverride$1)return c}if(n&&!r){const c=get$ref$1(n,e);if(c!==void 0)return c}const s={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,s);const a=selectParser$1(t,t.typeName,e),o=typeof a=="function"?parseDef$1(a(),e):a;if(o&&addMeta$1(t,e,o),e.postProcess){const c=e.postProcess(o,t,e);return s.jsonSchema=o,c}return s.jsonSchema=o,o}const get$ref$1=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:getRelativePath$1(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((r,n)=>e.currentPath[n]===r)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},getRelativePath$1=(t,e)=>{let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];r++);return[(t.length-r).toString(),...e.slice(r)].join("/")},addMeta$1=(t,e,r)=>(t.description&&(r.description=t.description,e.markdownDescription&&(r.markdownDescription=t.description)),r),zodToJsonSchema$2=(t,e)=>{const r=getRefs$1(e),n=void 0,s=e==null?void 0:e.name,a=parseDef$1(t._def,r,!1)??{},o=s===void 0?n?{...a,[r.definitionPath]:n}:a:{$ref:[...r.$refStrategy==="relative"?[]:r.basePath,r.definitionPath,s].join("/"),[r.definitionPath]:{...n,[s]:a}};return r.target==="jsonSchema7"?o.$schema="http://json-schema.org/draft-07/schema#":(r.target==="jsonSchema2019-09"||r.target==="openAi")&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),r.target==="openAi"&&("anyOf"in o||"oneOf"in o||"allOf"in o||"type"in o&&Array.isArray(o.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),o};function _escapeNodeLabel(t){return t.replace(/[^a-zA-Z-_0-9]/g,"_")}const MARKDOWN_SPECIAL_CHARS=["*","_","`"];function _generateMermaidGraphStyles(t){let e="";for(const[r,n]of Object.entries(t))e+=`	classDef ${r} ${n};
`;return e}function drawMermaid(t,e,r){const{firstNode:n,lastNode:s,nodeColors:a,withStyles:o=!0,curveStyle:l="linear",wrapLabelNWords:c=9}=r??{};let d=o?`%%{init: {'flowchart': {'curve': '${l}'}}}%%
graph TD;
`:`graph TD;
`;if(o){const x="default",E={[x]:"{0}({1})"};n!==void 0&&(E[n]="{0}([{1}]):::first"),s!==void 0&&(E[s]="{0}([{1}]):::last");for(const[S,k]of Object.entries(t)){const C=k.name.split(":").pop()??"";let R=MARKDOWN_SPECIAL_CHARS.some(I=>C.startsWith(I)&&C.endsWith(I))?`<p>${C}</p>`:C;Object.keys(k.metadata??{}).length&&(R+=`<hr/><small><em>${Object.entries(k.metadata??{}).map(([I,O])=>`${I} = ${O}`).join(`
`)}</em></small>`);const j=(E[S]??E[x]).replace("{0}",_escapeNodeLabel(S)).replace("{1}",R);d+=`	${j}
`}}const p={};for(const x of e){const E=x.source.split(":"),S=x.target.split(":"),k=E.filter((C,P)=>C===S[P]).join(":");p[k]||(p[k]=[]),p[k].push(x)}const g=new Set;function y(x,E){const S=x.length===1&&x[0].source===x[0].target;if(E&&!S){const k=E.split(":").pop();if(g.has(k))throw new Error(`Found duplicate subgraph '${k}' -- this likely means that you're reusing a subgraph node with the same name. Please adjust your graph to have subgraph nodes with unique names.`);g.add(k),d+=`	subgraph ${k}
`}for(const k of x){const{source:C,target:P,data:R,conditional:j}=k;let I="";if(R!==void 0){let O=R;const L=O.split(" ");L.length>c&&(O=Array.from({length:Math.ceil(L.length/c)},(B,Z)=>L.slice(Z*c,(Z+1)*c).join(" ")).join("&nbsp;<br>&nbsp;")),I=j?` -. &nbsp;${O}&nbsp; .-> `:` -- &nbsp;${O}&nbsp; --> `}else I=j?" -.-> ":" --> ";d+=`	${_escapeNodeLabel(C)}${I}${_escapeNodeLabel(P)};
`}for(const k in p)k.startsWith(`${E}:`)&&k!==E&&y(p[k],k);E&&!S&&(d+=`	end
`)}y(p[""]??[],"");for(const x in p)!x.includes(":")&&x!==""&&y(p[x],x);return o&&(d+=_generateMermaidGraphStyles(a??{})),d}async function drawMermaidPng(t,e){let{backgroundColor:r="white"}=e??{};const n=btoa(t);r!==void 0&&(/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(r)||(r=`!${r}`));const s=`https://mermaid.ink/img/${n}?bgColor=${r}`,a=await fetch(s);if(!a.ok)throw new Error(["Failed to render the graph using the Mermaid.INK API.",`Status code: ${a.status}`,`Status text: ${a.statusText}`].join(`
`));return await a.blob()}function nodeDataStr(t,e){if(t!==void 0&&!validate$1(t))return t;if(isRunnableInterface(e))try{let r=e.getName();return r=r.startsWith("Runnable")?r.slice(8):r,r}catch{return e.getName()}else return e.name??"UnknownSchema"}function nodeDataJson(t){return isRunnableInterface(t.data)?{type:"runnable",data:{id:t.data.lc_id,name:t.data.getName()}}:{type:"schema",data:{...zodToJsonSchema$2(t.data.schema),title:t.data.name}}}class Graph{constructor(e){Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"edges",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.nodes=(e==null?void 0:e.nodes)??this.nodes,this.edges=(e==null?void 0:e.edges)??this.edges}toJSON(){const e={};return Object.values(this.nodes).forEach((r,n)=>{e[r.id]=validate$1(r.id)?n:r.id}),{nodes:Object.values(this.nodes).map(r=>({id:e[r.id],...nodeDataJson(r)})),edges:this.edges.map(r=>{const n={source:e[r.source],target:e[r.target]};return typeof r.data<"u"&&(n.data=r.data),typeof r.conditional<"u"&&(n.conditional=r.conditional),n})}}addNode(e,r,n){if(r!==void 0&&this.nodes[r]!==void 0)throw new Error(`Node with id ${r} already exists`);const s=r??v4(),a={id:s,data:e,name:nodeDataStr(r,e),metadata:n};return this.nodes[s]=a,a}removeNode(e){delete this.nodes[e.id],this.edges=this.edges.filter(r=>r.source!==e.id&&r.target!==e.id)}addEdge(e,r,n,s){if(this.nodes[e.id]===void 0)throw new Error(`Source node ${e.id} not in graph`);if(this.nodes[r.id]===void 0)throw new Error(`Target node ${r.id} not in graph`);const a={source:e.id,target:r.id,data:n,conditional:s};return this.edges.push(a),a}firstNode(){return _firstNode(this)}lastNode(){return _lastNode(this)}extend(e,r=""){let n=r;Object.values(e.nodes).map(d=>d.id).every(validate$1)&&(n="");const a=d=>n?`${n}:${d}`:d;Object.entries(e.nodes).forEach(([d,p])=>{this.nodes[a(d)]={...p,id:a(d)}});const o=e.edges.map(d=>({...d,source:a(d.source),target:a(d.target)}));this.edges=[...this.edges,...o];const l=e.firstNode(),c=e.lastNode();return[l?{id:a(l.id),data:l.data}:void 0,c?{id:a(c.id),data:c.data}:void 0]}trimFirstNode(){const e=this.firstNode();e&&_firstNode(this,[e.id])&&this.removeNode(e)}trimLastNode(){const e=this.lastNode();e&&_lastNode(this,[e.id])&&this.removeNode(e)}reid(){const e=Object.fromEntries(Object.values(this.nodes).map(s=>[s.id,s.name])),r=new Map;Object.values(e).forEach(s=>{r.set(s,(r.get(s)||0)+1)});const n=s=>{const a=e[s];return validate$1(s)&&r.get(a)===1?a:s};return new Graph({nodes:Object.fromEntries(Object.entries(this.nodes).map(([s,a])=>[n(s),{...a,id:n(s)}])),edges:this.edges.map(s=>({...s,source:n(s.source),target:n(s.target)}))})}drawMermaid(e){const{withStyles:r,curveStyle:n,nodeColors:s={default:"fill:#f2f0ff,line-height:1.2",first:"fill-opacity:0",last:"fill:#bfb6fc"},wrapLabelNWords:a}=e??{},o=this.reid(),l=o.firstNode(),c=o.lastNode();return drawMermaid(o.nodes,o.edges,{firstNode:l==null?void 0:l.id,lastNode:c==null?void 0:c.id,withStyles:r,curveStyle:n,nodeColors:s,wrapLabelNWords:a})}async drawMermaidPng(e){const r=this.drawMermaid(e);return drawMermaidPng(r,{backgroundColor:e==null?void 0:e.backgroundColor})}}function _firstNode(t,e=[]){const r=new Set(t.edges.filter(s=>!e.includes(s.source)).map(s=>s.target)),n=[];for(const s of Object.values(t.nodes))!e.includes(s.id)&&!r.has(s.id)&&n.push(s);return n.length===1?n[0]:void 0}function _lastNode(t,e=[]){const r=new Set(t.edges.filter(s=>!e.includes(s.target)).map(s=>s.source)),n=[];for(const s of Object.values(t.nodes))!e.includes(s.id)&&!r.has(s.id)&&n.push(s);return n.length===1?n[0]:void 0}function convertToHttpEventStream(t){const e=new TextEncoder,r=new ReadableStream({async start(n){for await(const s of t)n.enqueue(e.encode(`event: data
data: ${JSON.stringify(s)}

`));n.enqueue(e.encode(`event: end

`)),n.close()}});return IterableReadableStream.fromReadableStream(r)}function isIterableIterator(t){return typeof t=="object"&&t!==null&&typeof t[Symbol.iterator]=="function"&&typeof t.next=="function"}const isIterator=t=>t!=null&&typeof t=="object"&&"next"in t&&typeof t.next=="function";function isAsyncIterable(t){return typeof t=="object"&&t!==null&&typeof t[Symbol.asyncIterator]=="function"}function*consumeIteratorInContext(t,e){for(;;){const{value:r,done:n}=AsyncLocalStorageProviderSingleton.runWithConfig(pickRunnableConfigKeys(t),e.next.bind(e),!0);if(n)break;yield r}}async function*consumeAsyncIterableInContext(t,e){const r=e[Symbol.asyncIterator]();for(;;){const{value:n,done:s}=await AsyncLocalStorageProviderSingleton.runWithConfig(pickRunnableConfigKeys(t),r.next.bind(e),!0);if(s)break;yield n}}function _coerceToDict(t,e){return t&&!Array.isArray(t)&&!(t instanceof Date)&&typeof t=="object"?t:{[e]:t}}class Runnable extends Serializable{constructor(){super(...arguments),Object.defineProperty(this,"lc_runnable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}getName(e){const r=this.name??this.constructor.lc_name()??this.constructor.name;return e?`${r}${e}`:r}bind(e){return new RunnableBinding({bound:this,kwargs:e,config:{}})}map(){return new RunnableEach({bound:this})}withRetry(e){return new RunnableRetry({bound:this,kwargs:{},config:{},maxAttemptNumber:e==null?void 0:e.stopAfterAttempt,...e})}withConfig(e){return new RunnableBinding({bound:this,config:e,kwargs:{}})}withFallbacks(e){const r=Array.isArray(e)?e:e.fallbacks;return new RunnableWithFallbacks({runnable:this,fallbacks:r})}_getOptionsList(e,r=0){if(Array.isArray(e)&&e.length!==r)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${r} inputs`);if(Array.isArray(e))return e.map(ensureConfig);if(r>1&&!Array.isArray(e)&&e.runId){console.warn("Provided runId will be used only for the first element of the batch.");const n=Object.fromEntries(Object.entries(e).filter(([s])=>s!=="runId"));return Array.from({length:r},(s,a)=>ensureConfig(a===0?e:n))}return Array.from({length:r},()=>ensureConfig(e))}async batch(e,r,n){var c;const s=this._getOptionsList(r??{},e.length),a=((c=s[0])==null?void 0:c.maxConcurrency)??(n==null?void 0:n.maxConcurrency),o=new AsyncCaller({maxConcurrency:a,onFailedAttempt:d=>{throw d}}),l=e.map((d,p)=>o.call(async()=>{try{return await this.invoke(d,s[p])}catch(g){if(n!=null&&n.returnExceptions)return g;throw g}}));return Promise.all(l)}async*_streamIterator(e,r){yield this.invoke(e,r)}async stream(e,r){const n=ensureConfig(r),s=new AsyncGeneratorWithSetup({generator:this._streamIterator(e,n),config:n});return await s.setup,IterableReadableStream.fromAsyncGenerator(s)}_separateRunnableConfigFromCallOptions(e){let r;e===void 0?r=ensureConfig(e):r=ensureConfig({callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,runName:e.runName,configurable:e.configurable,recursionLimit:e.recursionLimit,maxConcurrency:e.maxConcurrency,runId:e.runId,timeout:e.timeout,signal:e.signal});const n={...e};return delete n.callbacks,delete n.tags,delete n.metadata,delete n.runName,delete n.configurable,delete n.recursionLimit,delete n.maxConcurrency,delete n.runId,delete n.timeout,delete n.signal,[r,n]}async _callWithConfig(e,r,n){const s=ensureConfig(n),a=await getCallbackManagerForConfig(s),o=await(a==null?void 0:a.handleChainStart(this.toJSON(),_coerceToDict(r,"input"),s.runId,s==null?void 0:s.runType,void 0,void 0,(s==null?void 0:s.runName)??this.getName()));delete s.runId;let l;try{const c=e.call(this,r,s,o);l=await raceWithSignal(c,n==null?void 0:n.signal)}catch(c){throw await(o==null?void 0:o.handleChainError(c)),c}return await(o==null?void 0:o.handleChainEnd(_coerceToDict(l,"output"))),l}async _batchWithConfig(e,r,n,s){var d;const a=this._getOptionsList(n??{},r.length),o=await Promise.all(a.map(getCallbackManagerForConfig)),l=await Promise.all(o.map(async(p,g)=>{const y=await(p==null?void 0:p.handleChainStart(this.toJSON(),_coerceToDict(r[g],"input"),a[g].runId,a[g].runType,void 0,void 0,a[g].runName??this.getName()));return delete a[g].runId,y}));let c;try{const p=e.call(this,r,a,l,s);c=await raceWithSignal(p,(d=a==null?void 0:a[0])==null?void 0:d.signal)}catch(p){throw await Promise.all(l.map(g=>g==null?void 0:g.handleChainError(p))),p}return await Promise.all(l.map(p=>p==null?void 0:p.handleChainEnd(_coerceToDict(c,"output")))),c}async*_transformStreamWithConfig(e,r,n){let s,a=!0,o,l=!0;const c=ensureConfig(n),d=await getCallbackManagerForConfig(c);async function*p(){for await(const y of e){if(a)if(s===void 0)s=y;else try{s=concat(s,y)}catch{s=void 0,a=!1}yield y}}let g;try{const y=await pipeGeneratorWithSetup(r.bind(this),p(),async()=>d==null?void 0:d.handleChainStart(this.toJSON(),{input:""},c.runId,c.runType,void 0,void 0,c.runName??this.getName()),n==null?void 0:n.signal,c);delete c.runId,g=y.setup;const x=g==null?void 0:g.handlers.find(isStreamEventsHandler);let E=y.output;x!==void 0&&g!==void 0&&(E=x.tapOutputIterable(g.runId,E));const S=g==null?void 0:g.handlers.find(isLogStreamHandler);S!==void 0&&g!==void 0&&(E=S.tapOutputIterable(g.runId,E));for await(const k of E)if(yield k,l)if(o===void 0)o=k;else try{o=concat(o,k)}catch{o=void 0,l=!1}}catch(y){throw await(g==null?void 0:g.handleChainError(y,void 0,void 0,void 0,{inputs:_coerceToDict(s,"input")})),y}await(g==null?void 0:g.handleChainEnd(o??{},void 0,void 0,void 0,{inputs:_coerceToDict(s,"input")}))}getGraph(e){const r=new Graph,n=r.addNode({name:`${this.getName()}Input`,schema:anyType()}),s=r.addNode(this),a=r.addNode({name:`${this.getName()}Output`,schema:anyType()});return r.addEdge(n,s),r.addEdge(s,a),r}pipe(e){return new RunnableSequence({first:this,last:_coerceToRunnable(e)})}pick(e){return this.pipe(new RunnablePick(e))}assign(e){return this.pipe(new RunnableAssign(new RunnableMap({steps:e})))}async*transform(e,r){let n;for await(const s of e)n===void 0?n=s:n=concat(n,s);yield*this._streamIterator(n,ensureConfig(r))}async*streamLog(e,r,n){const s=new LogStreamCallbackHandler({...n,autoClose:!1,_schemaFormat:"original"}),a=ensureConfig(r);yield*this._streamLog(e,s,a)}async*_streamLog(e,r,n){const{callbacks:s}=n;if(s===void 0)n.callbacks=[r];else if(Array.isArray(s))n.callbacks=s.concat([r]);else{const c=s.copy();c.addHandler(r,!0),n.callbacks=c}const a=this.stream(e,n);async function o(){try{const c=await a;for await(const d of c){const p=new RunLogPatch({ops:[{op:"add",path:"/streamed_output/-",value:d}]});await r.writer.write(p)}}finally{await r.writer.close()}}const l=o();try{for await(const c of r)yield c}finally{await l}}streamEvents(e,r,n){let s;if(r.version==="v1")s=this._streamEventsV1(e,r,n);else if(r.version==="v2")s=this._streamEventsV2(e,r,n);else throw new Error('Only versions "v1" and "v2" of the schema are currently supported.');return r.encoding==="text/event-stream"?convertToHttpEventStream(s):IterableReadableStream.fromAsyncGenerator(s)}async*_streamEventsV2(e,r,n){var E;const s=new EventStreamCallbackHandler({...n,autoClose:!1}),a=ensureConfig(r),o=a.runId??v4();a.runId=o;const l=a.callbacks;if(l===void 0)a.callbacks=[s];else if(Array.isArray(l))a.callbacks=l.concat(s);else{const S=l.copy();S.addHandler(s,!0),a.callbacks=S}const c=new AbortController,d=this;async function p(){try{let S;r!=null&&r.signal?"any"in AbortSignal?S=AbortSignal.any([c.signal,r.signal]):(S=r.signal,r.signal.addEventListener("abort",()=>{c.abort()},{once:!0})):S=c.signal;const k=await d.stream(e,{...a,signal:S}),C=s.tapOutputIterable(o,k);for await(const P of C)if(c.signal.aborted)break}finally{await s.finish()}}const g=p();let y=!1,x;try{for await(const S of s){if(!y){S.data.input=e,y=!0,x=S.run_id,yield S;continue}S.run_id===x&&S.event.endsWith("_end")&&(E=S.data)!=null&&E.input&&delete S.data.input,yield S}}finally{c.abort(),await g}}async*_streamEventsV1(e,r,n){let s,a=!1;const o=ensureConfig(r),l=o.tags??[],c=o.metadata??{},d=o.runName??this.getName(),p=new LogStreamCallbackHandler({...n,autoClose:!1,_schemaFormat:"streaming_events"}),g=new _RootEventFilter({...n}),y=this._streamLog(e,p,o);for await(const E of y){if(s?s=s.concat(E):s=RunLog.fromRunLogPatch(E),s.state===void 0)throw new Error('Internal error: "streamEvents" state is missing. Please open a bug report.');if(!a){a=!0;const P={...s.state},R={run_id:P.id,event:`on_${P.type}_start`,name:d,tags:l,metadata:c,data:{input:e}};g.includeEvent(R,P.type)&&(yield R)}const S=E.ops.filter(P=>P.path.startsWith("/logs/")).map(P=>P.path.split("/")[2]),k=[...new Set(S)];for(const P of k){let R,j={};const I=s.state.logs[P];if(I.end_time===void 0?I.streamed_output.length>0?R="stream":R="start":R="end",R==="start")I.inputs!==void 0&&(j.input=I.inputs);else if(R==="end")I.inputs!==void 0&&(j.input=I.inputs),j.output=I.final_output;else if(R==="stream"){const O=I.streamed_output.length;if(O!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${O} instead. Encountered in: "${I.name}"`);j={chunk:I.streamed_output[0]},I.streamed_output=[]}yield{event:`on_${I.type}_${R}`,name:I.name,run_id:I.id,tags:I.tags,metadata:I.metadata,data:j}}const{state:C}=s;if(C.streamed_output.length>0){const P=C.streamed_output.length;if(P!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${P} instead. Encountered in: "${C.name}"`);const R={chunk:C.streamed_output[0]};C.streamed_output=[];const j={event:`on_${C.type}_stream`,run_id:C.id,tags:l,metadata:c,name:d,data:R};g.includeEvent(j,C.type)&&(yield j)}}const x=s==null?void 0:s.state;if(x!==void 0){const E={event:`on_${x.type}_end`,name:d,run_id:x.id,tags:l,metadata:c,data:{output:x.final_output}};g.includeEvent(E,x.type)&&(yield E)}}static isRunnable(e){return isRunnableInterface(e)}withListeners({onStart:e,onEnd:r,onError:n}){return new RunnableBinding({bound:this,config:{},configFactories:[s=>({callbacks:[new RootListenersTracer({config:s,onStart:e,onEnd:r,onError:n})]})]})}asTool(e){return convertRunnableToTool(this,e)}}class RunnableBinding extends Runnable{static lc_name(){return"RunnableBinding"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"configFactories",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound,this.kwargs=e.kwargs,this.config=e.config,this.configFactories=e.configFactories}getName(e){return this.bound.getName(e)}async _mergeConfig(...e){const r=mergeConfigs(this.config,...e);return mergeConfigs(r,...this.configFactories?await Promise.all(this.configFactories.map(async n=>await n(r))):[])}bind(e){return new this.constructor({bound:this.bound,kwargs:{...this.kwargs,...e},config:this.config})}withConfig(e){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...e}})}withRetry(e){return new this.constructor({bound:this.bound.withRetry(e),kwargs:this.kwargs,config:this.config})}async invoke(e,r){return this.bound.invoke(e,await this._mergeConfig(ensureConfig(r),this.kwargs))}async batch(e,r,n){const s=Array.isArray(r)?await Promise.all(r.map(async a=>this._mergeConfig(ensureConfig(a),this.kwargs))):await this._mergeConfig(ensureConfig(r),this.kwargs);return this.bound.batch(e,s,n)}async*_streamIterator(e,r){yield*this.bound._streamIterator(e,await this._mergeConfig(ensureConfig(r),this.kwargs))}async stream(e,r){return this.bound.stream(e,await this._mergeConfig(ensureConfig(r),this.kwargs))}async*transform(e,r){yield*this.bound.transform(e,await this._mergeConfig(ensureConfig(r),this.kwargs))}streamEvents(e,r,n){const s=this,a=async function*(){yield*s.bound.streamEvents(e,{...await s._mergeConfig(ensureConfig(r),s.kwargs),version:r.version},n)};return IterableReadableStream.fromAsyncGenerator(a())}static isRunnableBinding(e){return e.bound&&Runnable.isRunnable(e.bound)}withListeners({onStart:e,onEnd:r,onError:n}){return new RunnableBinding({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[s=>({callbacks:[new RootListenersTracer({config:s,onStart:e,onEnd:r,onError:n})]})]})}}class RunnableEach extends Runnable{static lc_name(){return"RunnableEach"}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound}bind(e){return new RunnableEach({bound:this.bound.bind(e)})}async invoke(e,r){return this._callWithConfig(this._invoke.bind(this),e,r)}async _invoke(e,r,n){return this.bound.batch(e,patchConfig(r,{callbacks:n==null?void 0:n.getChild()}))}withListeners({onStart:e,onEnd:r,onError:n}){return new RunnableEach({bound:this.bound.withListeners({onStart:e,onEnd:r,onError:n})})}}class RunnableRetry extends RunnableBinding{static lc_name(){return"RunnableRetry"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"maxAttemptNumber",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:()=>{}}),this.maxAttemptNumber=e.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=e.onFailedAttempt??this.onFailedAttempt}_patchConfigForRetry(e,r,n){const s=e>1?`retry:attempt:${e}`:void 0;return patchConfig(r,{callbacks:n==null?void 0:n.getChild(s)})}async _invoke(e,r,n){return pRetry(s=>super.invoke(e,this._patchConfigForRetry(s,r,n)),{onFailedAttempt:s=>this.onFailedAttempt(s,e),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(e,r){return this._callWithConfig(this._invoke.bind(this),e,r)}async _batch(e,r,n,s){const a={};try{await pRetry(async o=>{const l=e.map((y,x)=>x).filter(y=>a[y.toString()]===void 0||a[y.toString()]instanceof Error),c=l.map(y=>e[y]),d=l.map(y=>this._patchConfigForRetry(o,r==null?void 0:r[y],n==null?void 0:n[y])),p=await super.batch(c,d,{...s,returnExceptions:!0});let g;for(let y=0;y<p.length;y+=1){const x=p[y],E=l[y];x instanceof Error&&g===void 0&&(g=x,g.input=c[y]),a[E.toString()]=x}if(g)throw g;return p},{onFailedAttempt:o=>this.onFailedAttempt(o,o.input),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(o){if((s==null?void 0:s.returnExceptions)!==!0)throw o}return Object.keys(a).sort((o,l)=>parseInt(o,10)-parseInt(l,10)).map(o=>a[parseInt(o,10)])}async batch(e,r,n){return this._batchWithConfig(this._batch.bind(this),e,r,n)}}class RunnableSequence extends Runnable{static lc_name(){return"RunnableSequence"}constructor(e){super(e),Object.defineProperty(this,"first",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"middle",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"omitSequenceTags",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),this.first=e.first,this.middle=e.middle??this.middle,this.last=e.last,this.name=e.name,this.omitSequenceTags=e.omitSequenceTags??this.omitSequenceTags}get steps(){return[this.first,...this.middle,this.last]}async invoke(e,r){var c;const n=ensureConfig(r),s=await getCallbackManagerForConfig(n),a=await(s==null?void 0:s.handleChainStart(this.toJSON(),_coerceToDict(e,"input"),n.runId,void 0,void 0,void 0,n==null?void 0:n.runName));delete n.runId;let o=e,l;try{const d=[this.first,...this.middle];for(let p=0;p<d.length;p+=1){const y=d[p].invoke(o,patchConfig(n,{callbacks:a==null?void 0:a.getChild(this.omitSequenceTags?void 0:`seq:step:${p+1}`)}));o=await raceWithSignal(y,r==null?void 0:r.signal)}if((c=r==null?void 0:r.signal)!=null&&c.aborted)throw new Error("Aborted");l=await this.last.invoke(o,patchConfig(n,{callbacks:a==null?void 0:a.getChild(this.omitSequenceTags?void 0:`seq:step:${this.steps.length}`)}))}catch(d){throw await(a==null?void 0:a.handleChainError(d)),d}return await(a==null?void 0:a.handleChainEnd(_coerceToDict(l,"output"))),l}async batch(e,r,n){var c;const s=this._getOptionsList(r??{},e.length),a=await Promise.all(s.map(getCallbackManagerForConfig)),o=await Promise.all(a.map(async(d,p)=>{const g=await(d==null?void 0:d.handleChainStart(this.toJSON(),_coerceToDict(e[p],"input"),s[p].runId,void 0,void 0,void 0,s[p].runName));return delete s[p].runId,g}));let l=e;try{for(let d=0;d<this.steps.length;d+=1){const g=this.steps[d].batch(l,o.map((y,x)=>{const E=y==null?void 0:y.getChild(this.omitSequenceTags?void 0:`seq:step:${d+1}`);return patchConfig(s[x],{callbacks:E})}),n);l=await raceWithSignal(g,(c=s[0])==null?void 0:c.signal)}}catch(d){throw await Promise.all(o.map(p=>p==null?void 0:p.handleChainError(d))),d}return await Promise.all(o.map(d=>d==null?void 0:d.handleChainEnd(_coerceToDict(l,"output")))),l}async*_streamIterator(e,r){var g;const n=await getCallbackManagerForConfig(r),{runId:s,...a}=r??{},o=await(n==null?void 0:n.handleChainStart(this.toJSON(),_coerceToDict(e,"input"),s,void 0,void 0,void 0,a==null?void 0:a.runName)),l=[this.first,...this.middle,this.last];let c=!0,d;async function*p(){yield e}try{let y=l[0].transform(p(),patchConfig(a,{callbacks:o==null?void 0:o.getChild(this.omitSequenceTags?void 0:"seq:step:1")}));for(let x=1;x<l.length;x+=1)y=await l[x].transform(y,patchConfig(a,{callbacks:o==null?void 0:o.getChild(this.omitSequenceTags?void 0:`seq:step:${x+1}`)}));for await(const x of y)if((g=r==null?void 0:r.signal)==null||g.throwIfAborted(),yield x,c)if(d===void 0)d=x;else try{d=concat(d,x)}catch{d=void 0,c=!1}}catch(y){throw await(o==null?void 0:o.handleChainError(y)),y}await(o==null?void 0:o.handleChainEnd(_coerceToDict(d,"output")))}getGraph(e){const r=new Graph;let n=null;return this.steps.forEach((s,a)=>{const o=s.getGraph(e);a!==0&&o.trimFirstNode(),a!==this.steps.length-1&&o.trimLastNode(),r.extend(o);const l=o.firstNode();if(!l)throw new Error(`Runnable ${s} has no first node`);n&&r.addEdge(n,l),n=o.lastNode()}),r}pipe(e){return RunnableSequence.isRunnableSequence(e)?new RunnableSequence({first:this.first,middle:this.middle.concat([this.last,e.first,...e.middle]),last:e.last,name:this.name??e.name}):new RunnableSequence({first:this.first,middle:[...this.middle,this.last],last:_coerceToRunnable(e),name:this.name})}static isRunnableSequence(e){return Array.isArray(e.middle)&&Runnable.isRunnable(e)}static from([e,...r],n){let s={};return typeof n=="string"?s.name=n:n!==void 0&&(s=n),new RunnableSequence({...s,first:_coerceToRunnable(e),middle:r.slice(0,-1).map(_coerceToRunnable),last:_coerceToRunnable(r[r.length-1])})}}class RunnableMap extends Runnable{static lc_name(){return"RunnableMap"}getStepsKeys(){return Object.keys(this.steps)}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"steps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.steps={};for(const[r,n]of Object.entries(e.steps))this.steps[r]=_coerceToRunnable(n)}static from(e){return new RunnableMap({steps:e})}async invoke(e,r){const n=ensureConfig(r),s=await getCallbackManagerForConfig(n),a=await(s==null?void 0:s.handleChainStart(this.toJSON(),{input:e},n.runId,void 0,void 0,void 0,n==null?void 0:n.runName));delete n.runId;const o={};try{const l=Object.entries(this.steps).map(async([c,d])=>{o[c]=await d.invoke(e,patchConfig(n,{callbacks:a==null?void 0:a.getChild(`map:key:${c}`)}))});await raceWithSignal(Promise.all(l),r==null?void 0:r.signal)}catch(l){throw await(a==null?void 0:a.handleChainError(l)),l}return await(a==null?void 0:a.handleChainEnd(o)),o}async*_transform(e,r,n){const s={...this.steps},a=atee(e,Object.keys(s).length),o=new Map(Object.entries(s).map(([l,c],d)=>{const p=c.transform(a[d],patchConfig(n,{callbacks:r==null?void 0:r.getChild(`map:key:${l}`)}));return[l,p.next().then(g=>({key:l,gen:p,result:g}))]}));for(;o.size;){const l=Promise.race(o.values()),{key:c,result:d,gen:p}=await raceWithSignal(l,n==null?void 0:n.signal);o.delete(c),d.done||(yield{[c]:d.value},o.set(c,p.next().then(g=>({key:c,gen:p,result:g}))))}}transform(e,r){return this._transformStreamWithConfig(e,this._transform.bind(this),r)}async stream(e,r){async function*n(){yield e}const s=ensureConfig(r),a=new AsyncGeneratorWithSetup({generator:this.transform(n(),s),config:s});return await a.setup,IterableReadableStream.fromAsyncGenerator(a)}}class RunnableTraceable extends Runnable{constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!isTraceableFunction(e.func))throw new Error("RunnableTraceable requires a function that is wrapped in traceable higher-order function");this.func=e.func}async invoke(e,r){const[n]=this._getOptionsList(r??{},1),s=await getCallbackManagerForConfig(n),a=this.func(patchConfig(n,{callbacks:s}),e);return raceWithSignal(a,n==null?void 0:n.signal)}async*_streamIterator(e,r){var a,o;const[n]=this._getOptionsList(r??{},1),s=await this.invoke(e,r);if(isAsyncIterable(s)){for await(const l of s)(a=n==null?void 0:n.signal)==null||a.throwIfAborted(),yield l;return}if(isIterator(s)){for(;;){(o=n==null?void 0:n.signal)==null||o.throwIfAborted();const l=s.next();if(l.done)break;yield l.value}return}yield s}static from(e){return new RunnableTraceable({func:e})}}function assertNonTraceableFunction(t){if(isTraceableFunction(t))throw new Error("RunnableLambda requires a function that is not wrapped in traceable higher-order function. This shouldn't happen.")}class RunnableLambda extends Runnable{static lc_name(){return"RunnableLambda"}constructor(e){if(isTraceableFunction(e.func))return RunnableTraceable.from(e.func);super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),assertNonTraceableFunction(e.func),this.func=e.func}static from(e){return new RunnableLambda({func:e})}async _invoke(e,r,n){return new Promise((s,a)=>{const o=patchConfig(r,{callbacks:n==null?void 0:n.getChild(),recursionLimit:((r==null?void 0:r.recursionLimit)??DEFAULT_RECURSION_LIMIT)-1});AsyncLocalStorageProviderSingleton.runWithConfig(pickRunnableConfigKeys(o),async()=>{var l,c;try{let d=await this.func(e,{...o});if(d&&Runnable.isRunnable(d)){if((r==null?void 0:r.recursionLimit)===0)throw new Error("Recursion limit reached.");d=await d.invoke(e,{...o,recursionLimit:(o.recursionLimit??DEFAULT_RECURSION_LIMIT)-1})}else if(isAsyncIterable(d)){let p;for await(const g of consumeAsyncIterableInContext(o,d))if((l=r==null?void 0:r.signal)==null||l.throwIfAborted(),p===void 0)p=g;else try{p=concat(p,g)}catch{p=g}d=p}else if(isIterableIterator(d)){let p;for(const g of consumeIteratorInContext(o,d))if((c=r==null?void 0:r.signal)==null||c.throwIfAborted(),p===void 0)p=g;else try{p=concat(p,g)}catch{p=g}d=p}s(d)}catch(d){a(d)}})})}async invoke(e,r){return this._callWithConfig(this._invoke.bind(this),e,r)}async*_transform(e,r,n){var l,c;let s;for await(const d of e)if(s===void 0)s=d;else try{s=concat(s,d)}catch{s=d}const a=patchConfig(n,{callbacks:r==null?void 0:r.getChild(),recursionLimit:((n==null?void 0:n.recursionLimit)??DEFAULT_RECURSION_LIMIT)-1}),o=await new Promise((d,p)=>{AsyncLocalStorageProviderSingleton.runWithConfig(pickRunnableConfigKeys(a),async()=>{try{const g=await this.func(s,{...a,config:a});d(g)}catch(g){p(g)}})});if(o&&Runnable.isRunnable(o)){if((n==null?void 0:n.recursionLimit)===0)throw new Error("Recursion limit reached.");const d=await o.stream(s,a);for await(const p of d)yield p}else if(isAsyncIterable(o))for await(const d of consumeAsyncIterableInContext(a,o))(l=n==null?void 0:n.signal)==null||l.throwIfAborted(),yield d;else if(isIterableIterator(o))for(const d of consumeIteratorInContext(a,o))(c=n==null?void 0:n.signal)==null||c.throwIfAborted(),yield d;else yield o}transform(e,r){return this._transformStreamWithConfig(e,this._transform.bind(this),r)}async stream(e,r){async function*n(){yield e}const s=ensureConfig(r),a=new AsyncGeneratorWithSetup({generator:this.transform(n(),s),config:s});return await a.setup,IterableReadableStream.fromAsyncGenerator(a)}}class RunnableWithFallbacks extends Runnable{static lc_name(){return"RunnableWithFallbacks"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fallbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnable=e.runnable,this.fallbacks=e.fallbacks}*runnables(){yield this.runnable;for(const e of this.fallbacks)yield e}async invoke(e,r){const n=ensureConfig(r),s=await getCallbackManagerForConfig(n),{runId:a,...o}=n,l=await(s==null?void 0:s.handleChainStart(this.toJSON(),_coerceToDict(e,"input"),a,void 0,void 0,void 0,o==null?void 0:o.runName)),c=patchConfig(o,{callbacks:l==null?void 0:l.getChild()});return await AsyncLocalStorageProviderSingleton.runWithConfig(c,async()=>{var g;let p;for(const y of this.runnables()){(g=n==null?void 0:n.signal)==null||g.throwIfAborted();try{const x=await y.invoke(e,c);return await(l==null?void 0:l.handleChainEnd(_coerceToDict(x,"output"))),x}catch(x){p===void 0&&(p=x)}}throw p===void 0?new Error("No error stored at end of fallback."):(await(l==null?void 0:l.handleChainError(p)),p)})}async*_streamIterator(e,r){var g;const n=ensureConfig(r),s=await getCallbackManagerForConfig(n),{runId:a,...o}=n,l=await(s==null?void 0:s.handleChainStart(this.toJSON(),_coerceToDict(e,"input"),a,void 0,void 0,void 0,o==null?void 0:o.runName));let c,d;for(const y of this.runnables()){(g=n==null?void 0:n.signal)==null||g.throwIfAborted();const x=patchConfig(o,{callbacks:l==null?void 0:l.getChild()});try{const E=await y.stream(e,x);d=consumeAsyncIterableInContext(x,E);break}catch(E){c===void 0&&(c=E)}}if(d===void 0){const y=c??new Error("No error stored at end of fallback.");throw await(l==null?void 0:l.handleChainError(y)),y}let p;try{for await(const y of d){yield y;try{p=p===void 0?p:concat(p,y)}catch{p=void 0}}}catch(y){throw await(l==null?void 0:l.handleChainError(y)),y}await(l==null?void 0:l.handleChainEnd(_coerceToDict(p,"output")))}async batch(e,r,n){var c;if(n!=null&&n.returnExceptions)throw new Error("Not implemented.");const s=this._getOptionsList(r??{},e.length),a=await Promise.all(s.map(d=>getCallbackManagerForConfig(d))),o=await Promise.all(a.map(async(d,p)=>{const g=await(d==null?void 0:d.handleChainStart(this.toJSON(),_coerceToDict(e[p],"input"),s[p].runId,void 0,void 0,void 0,s[p].runName));return delete s[p].runId,g}));let l;for(const d of this.runnables()){(c=s[0].signal)==null||c.throwIfAborted();try{const p=await d.batch(e,o.map((g,y)=>patchConfig(s[y],{callbacks:g==null?void 0:g.getChild()})),n);return await Promise.all(o.map((g,y)=>g==null?void 0:g.handleChainEnd(_coerceToDict(p[y],"output")))),p}catch(p){l===void 0&&(l=p)}}throw l?(await Promise.all(o.map(d=>d==null?void 0:d.handleChainError(l))),l):new Error("No error stored at end of fallbacks.")}}function _coerceToRunnable(t){if(typeof t=="function")return new RunnableLambda({func:t});if(Runnable.isRunnable(t))return t;if(!Array.isArray(t)&&typeof t=="object"){const e={};for(const[r,n]of Object.entries(t))e[r]=_coerceToRunnable(n);return new RunnableMap({steps:e})}else throw new Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`)}class RunnableAssign extends Runnable{static lc_name(){return"RunnableAssign"}constructor(e){e instanceof RunnableMap&&(e={mapper:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"mapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.mapper=e.mapper}async invoke(e,r){const n=await this.mapper.invoke(e,r);return{...e,...n}}async*_transform(e,r,n){const s=this.mapper.getStepsKeys(),[a,o]=atee(e),l=this.mapper.transform(o,patchConfig(n,{callbacks:r==null?void 0:r.getChild()})),c=l.next();for await(const d of a){if(typeof d!="object"||Array.isArray(d))throw new Error(`RunnableAssign can only be used with objects as input, got ${typeof d}`);const p=Object.fromEntries(Object.entries(d).filter(([g])=>!s.includes(g)));Object.keys(p).length>0&&(yield p)}yield(await c).value;for await(const d of l)yield d}transform(e,r){return this._transformStreamWithConfig(e,this._transform.bind(this),r)}async stream(e,r){async function*n(){yield e}const s=ensureConfig(r),a=new AsyncGeneratorWithSetup({generator:this.transform(n(),s),config:s});return await a.setup,IterableReadableStream.fromAsyncGenerator(a)}}class RunnablePick extends Runnable{static lc_name(){return"RunnablePick"}constructor(e){(typeof e=="string"||Array.isArray(e))&&(e={keys:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"keys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keys=e.keys}async _pick(e){if(typeof this.keys=="string")return e[this.keys];{const r=this.keys.map(n=>[n,e[n]]).filter(n=>n[1]!==void 0);return r.length===0?void 0:Object.fromEntries(r)}}async invoke(e,r){return this._callWithConfig(this._pick.bind(this),e,r)}async*_transform(e){for await(const r of e){const n=await this._pick(r);n!==void 0&&(yield n)}}transform(e,r){return this._transformStreamWithConfig(e,this._transform.bind(this),r)}async stream(e,r){async function*n(){yield e}const s=ensureConfig(r),a=new AsyncGeneratorWithSetup({generator:this.transform(n(),s),config:s});return await a.setup,IterableReadableStream.fromAsyncGenerator(a)}}class RunnableToolLike extends RunnableBinding{constructor(e){const r=RunnableSequence.from([RunnableLambda.from(async n=>{let s;if(_isToolCall(n))try{s=await this.schema.parseAsync(n.args)}catch{throw new ToolInputParsingException("Received tool input did not match expected schema",JSON.stringify(n.args))}else s=n;return s}).withConfig({runName:`${e.name}:parse_input`}),e.bound]).withConfig({runName:e.name});super({bound:r,config:e.config??{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.description=e.description,this.schema=e.schema}static lc_name(){return"RunnableToolLike"}}function convertRunnableToTool(t,e){var s;const r=e.name??t.getName(),n=e.description??((s=e.schema)==null?void 0:s.description);return e.schema.constructor===ZodString?new RunnableToolLike({name:r,description:n,schema:objectType({input:stringType()}).transform(a=>a.input),bound:t}):new RunnableToolLike({name:r,description:n,schema:e.schema,bound:t})}class BaseMemory{}/*
 * [js-sha1]{@link https://github.com/emn178/js-sha1}
 *
 * @version 0.6.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */var root=typeof window=="object"?window:{},HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],blocks=[];function Sha1(t){t?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Sha1.prototype.update=function(t){if(!this.finalized){var e=typeof t!="string";e&&t.constructor===root.ArrayBuffer&&(t=new Uint8Array(t));for(var r,n=0,s,a=t.length||0,o=this.blocks;n<a;){if(this.hashed&&(this.hashed=!1,o[0]=this.block,o[16]=o[1]=o[2]=o[3]=o[4]=o[5]=o[6]=o[7]=o[8]=o[9]=o[10]=o[11]=o[12]=o[13]=o[14]=o[15]=0),e)for(s=this.start;n<a&&s<64;++n)o[s>>2]|=t[n]<<SHIFT[s++&3];else for(s=this.start;n<a&&s<64;++n)r=t.charCodeAt(n),r<128?o[s>>2]|=r<<SHIFT[s++&3]:r<2048?(o[s>>2]|=(192|r>>6)<<SHIFT[s++&3],o[s>>2]|=(128|r&63)<<SHIFT[s++&3]):r<55296||r>=57344?(o[s>>2]|=(224|r>>12)<<SHIFT[s++&3],o[s>>2]|=(128|r>>6&63)<<SHIFT[s++&3],o[s>>2]|=(128|r&63)<<SHIFT[s++&3]):(r=65536+((r&1023)<<10|t.charCodeAt(++n)&1023),o[s>>2]|=(240|r>>18)<<SHIFT[s++&3],o[s>>2]|=(128|r>>12&63)<<SHIFT[s++&3],o[s>>2]|=(128|r>>6&63)<<SHIFT[s++&3],o[s>>2]|=(128|r&63)<<SHIFT[s++&3]);this.lastByteIndex=s,this.bytes+=s-this.start,s>=64?(this.block=o[16],this.start=s-64,this.hash(),this.hashed=!0):this.start=s}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}};Sha1.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex;t[16]=this.block,t[e>>2]|=EXTRA[e&3],this.block=t[16],e>=56&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.hBytes<<3|this.bytes>>>29,t[15]=this.bytes<<3,this.hash()}};Sha1.prototype.hash=function(){var t=this.h0,e=this.h1,r=this.h2,n=this.h3,s=this.h4,a,o,l,c=this.blocks;for(o=16;o<80;++o)l=c[o-3]^c[o-8]^c[o-14]^c[o-16],c[o]=l<<1|l>>>31;for(o=0;o<20;o+=5)a=e&r|~e&n,l=t<<5|t>>>27,s=l+a+s+1518500249+c[o]<<0,e=e<<30|e>>>2,a=t&e|~t&r,l=s<<5|s>>>27,n=l+a+n+1518500249+c[o+1]<<0,t=t<<30|t>>>2,a=s&t|~s&e,l=n<<5|n>>>27,r=l+a+r+1518500249+c[o+2]<<0,s=s<<30|s>>>2,a=n&s|~n&t,l=r<<5|r>>>27,e=l+a+e+1518500249+c[o+3]<<0,n=n<<30|n>>>2,a=r&n|~r&s,l=e<<5|e>>>27,t=l+a+t+1518500249+c[o+4]<<0,r=r<<30|r>>>2;for(;o<40;o+=5)a=e^r^n,l=t<<5|t>>>27,s=l+a+s+1859775393+c[o]<<0,e=e<<30|e>>>2,a=t^e^r,l=s<<5|s>>>27,n=l+a+n+1859775393+c[o+1]<<0,t=t<<30|t>>>2,a=s^t^e,l=n<<5|n>>>27,r=l+a+r+1859775393+c[o+2]<<0,s=s<<30|s>>>2,a=n^s^t,l=r<<5|r>>>27,e=l+a+e+1859775393+c[o+3]<<0,n=n<<30|n>>>2,a=r^n^s,l=e<<5|e>>>27,t=l+a+t+1859775393+c[o+4]<<0,r=r<<30|r>>>2;for(;o<60;o+=5)a=e&r|e&n|r&n,l=t<<5|t>>>27,s=l+a+s-1894007588+c[o]<<0,e=e<<30|e>>>2,a=t&e|t&r|e&r,l=s<<5|s>>>27,n=l+a+n-1894007588+c[o+1]<<0,t=t<<30|t>>>2,a=s&t|s&e|t&e,l=n<<5|n>>>27,r=l+a+r-1894007588+c[o+2]<<0,s=s<<30|s>>>2,a=n&s|n&t|s&t,l=r<<5|r>>>27,e=l+a+e-1894007588+c[o+3]<<0,n=n<<30|n>>>2,a=r&n|r&s|n&s,l=e<<5|e>>>27,t=l+a+t-1894007588+c[o+4]<<0,r=r<<30|r>>>2;for(;o<80;o+=5)a=e^r^n,l=t<<5|t>>>27,s=l+a+s-899497514+c[o]<<0,e=e<<30|e>>>2,a=t^e^r,l=s<<5|s>>>27,n=l+a+n-899497514+c[o+1]<<0,t=t<<30|t>>>2,a=s^t^e,l=n<<5|n>>>27,r=l+a+r-899497514+c[o+2]<<0,s=s<<30|s>>>2,a=n^s^t,l=r<<5|r>>>27,e=l+a+e-899497514+c[o+3]<<0,n=n<<30|n>>>2,a=r^n^s,l=e<<5|e>>>27,t=l+a+t-899497514+c[o+4]<<0,r=r<<30|r>>>2;this.h0=this.h0+t<<0,this.h1=this.h1+e<<0,this.h2=this.h2+r<<0,this.h3=this.h3+n<<0,this.h4=this.h4+s<<0};Sha1.prototype.hex=function(){this.finalize();var t=this.h0,e=this.h1,r=this.h2,n=this.h3,s=this.h4;return HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[t&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[e&15]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[r&15]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[n&15]+HEX_CHARS[s>>28&15]+HEX_CHARS[s>>24&15]+HEX_CHARS[s>>20&15]+HEX_CHARS[s>>16&15]+HEX_CHARS[s>>12&15]+HEX_CHARS[s>>8&15]+HEX_CHARS[s>>4&15]+HEX_CHARS[s&15]};Sha1.prototype.toString=Sha1.prototype.hex;Sha1.prototype.digest=function(){this.finalize();var t=this.h0,e=this.h1,r=this.h2,n=this.h3,s=this.h4;return[t>>24&255,t>>16&255,t>>8&255,t&255,e>>24&255,e>>16&255,e>>8&255,e&255,r>>24&255,r>>16&255,r>>8&255,r&255,n>>24&255,n>>16&255,n>>8&255,n&255,s>>24&255,s>>16&255,s>>8&255,s&255]};Sha1.prototype.array=Sha1.prototype.digest;Sha1.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(20),e=new DataView(t);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),t};const insecureHash=t=>new Sha1(!0).update(t).hex(),getCacheKey=(...t)=>insecureHash(t.join("_"));class BaseCache{}const GLOBAL_MAP=new Map;class InMemoryCache extends BaseCache{constructor(e){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=e??new Map}lookup(e,r){return Promise.resolve(this.cache.get(getCacheKey(e,r))??null)}async update(e,r,n){this.cache.set(getCacheKey(e,r),n)}static global(){return new InMemoryCache(GLOBAL_MAP)}}class BasePromptValue extends Serializable{}class StringPromptValue extends BasePromptValue{static lc_name(){return"StringPromptValue"}constructor(e){super({value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=e}toString(){return this.value}toChatMessages(){return[new HumanMessage(this.value)]}}class ChatPromptValue extends BasePromptValue{static lc_name(){return"ChatPromptValue"}constructor(e){Array.isArray(e)&&(e={messages:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.messages=e.messages}toString(){return getBufferString(this.messages)}toChatMessages(){return this.messages}}class ImagePromptValue extends BasePromptValue{static lc_name(){return"ImagePromptValue"}constructor(e){"imageUrl"in e||(e={imageUrl:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"imageUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.imageUrl=e.imageUrl}toString(){return this.imageUrl.url}toChatMessages(){return[new HumanMessage({content:[{type:"image_url",image_url:{detail:this.imageUrl.detail,url:this.imageUrl.url}}]})]}}var base64Js={},hasRequiredBase64Js;function requireBase64Js(){if(hasRequiredBase64Js)return base64Js;hasRequiredBase64Js=1,base64Js.byteLength=l,base64Js.toByteArray=d,base64Js.fromByteArray=y;for(var t=[],e=[],r=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=n.length;s<a;++s)t[s]=n[s],e[n.charCodeAt(s)]=s;e[45]=62,e[95]=63;function o(x){var E=x.length;if(E%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var S=x.indexOf("=");S===-1&&(S=E);var k=S===E?0:4-S%4;return[S,k]}function l(x){var E=o(x),S=E[0],k=E[1];return(S+k)*3/4-k}function c(x,E,S){return(E+S)*3/4-S}function d(x){var E,S=o(x),k=S[0],C=S[1],P=new r(c(x,k,C)),R=0,j=C>0?k-4:k,I;for(I=0;I<j;I+=4)E=e[x.charCodeAt(I)]<<18|e[x.charCodeAt(I+1)]<<12|e[x.charCodeAt(I+2)]<<6|e[x.charCodeAt(I+3)],P[R++]=E>>16&255,P[R++]=E>>8&255,P[R++]=E&255;return C===2&&(E=e[x.charCodeAt(I)]<<2|e[x.charCodeAt(I+1)]>>4,P[R++]=E&255),C===1&&(E=e[x.charCodeAt(I)]<<10|e[x.charCodeAt(I+1)]<<4|e[x.charCodeAt(I+2)]>>2,P[R++]=E>>8&255,P[R++]=E&255),P}function p(x){return t[x>>18&63]+t[x>>12&63]+t[x>>6&63]+t[x&63]}function g(x,E,S){for(var k,C=[],P=E;P<S;P+=3)k=(x[P]<<16&16711680)+(x[P+1]<<8&65280)+(x[P+2]&255),C.push(p(k));return C.join("")}function y(x){for(var E,S=x.length,k=S%3,C=[],P=16383,R=0,j=S-k;R<j;R+=P)C.push(g(x,R,R+P>j?j:R+P));return k===1?(E=x[S-1],C.push(t[E>>2]+t[E<<4&63]+"==")):k===2&&(E=(x[S-2]<<8)+x[S-1],C.push(t[E>>10]+t[E>>4&63]+t[E<<2&63]+"=")),C.join("")}return base64Js}var base64JsExports=requireBase64Js();const base64=getDefaultExportFromCjs(base64JsExports);var __defProp=Object.defineProperty,__defNormalProp=(t,e,r)=>e in t?__defProp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,__publicField=(t,e,r)=>(__defNormalProp(t,e+"",r),r);function bytePairMerge(t,e){let r=Array.from({length:t.length},(n,s)=>({start:s,end:s+1}));for(;r.length>1;){let n=null;for(let s=0;s<r.length-1;s++){const a=t.slice(r[s].start,r[s+1].end),o=e.get(a.join(","));o!=null&&(n==null||o<n[0])&&(n=[o,s])}if(n!=null){const s=n[1];r[s]={start:r[s].start,end:r[s+1].end},r.splice(s+1,1)}else break}return r}function bytePairEncode(t,e){return t.length===1?[e.get(t.join(","))]:bytePairMerge(t,e).map(r=>e.get(t.slice(r.start,r.end).join(","))).filter(r=>r!=null)}function escapeRegex(t){return t.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}var _Tiktoken=class{constructor(t,e){cr(this,"specialTokens");cr(this,"inverseSpecialTokens");cr(this,"patStr");cr(this,"textEncoder",new TextEncoder);cr(this,"textDecoder",new TextDecoder("utf-8"));cr(this,"rankMap",new Map);cr(this,"textMap",new Map);this.patStr=t.pat_str;const r=t.bpe_ranks.split(`
`).filter(Boolean).reduce((n,s)=>{const[a,o,...l]=s.split(" "),c=Number.parseInt(o,10);return l.forEach((d,p)=>n[d]=c+p),n},{});for(const[n,s]of Object.entries(r)){const a=base64.toByteArray(n);this.rankMap.set(a.join(","),s),this.textMap.set(s,a)}this.specialTokens={...t.special_tokens,...e},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((n,[s,a])=>(n[a]=this.textEncoder.encode(s),n),{})}encode(t,e=[],r="all"){const n=new RegExp(this.patStr,"ug"),s=_Tiktoken.specialTokenRegex(Object.keys(this.specialTokens)),a=[],o=new Set(e==="all"?Object.keys(this.specialTokens):e),l=new Set(r==="all"?Object.keys(this.specialTokens).filter(d=>!o.has(d)):r);if(l.size>0){const d=_Tiktoken.specialTokenRegex([...l]),p=t.match(d);if(p!=null)throw new Error(`The text contains a special token that is not allowed: ${p[0]}`)}let c=0;for(;;){let d=null,p=c;for(;s.lastIndex=p,d=s.exec(t),!(d==null||o.has(d[0]));)p=d.index+1;const g=(d==null?void 0:d.index)??t.length;for(const x of t.substring(c,g).matchAll(n)){const E=this.textEncoder.encode(x[0]),S=this.rankMap.get(E.join(","));if(S!=null){a.push(S);continue}a.push(...bytePairEncode(E,this.rankMap))}if(d==null)break;let y=this.specialTokens[d[0]];a.push(y),c=d.index+d[0].length}return a}decode(t){const e=[];let r=0;for(let a=0;a<t.length;++a){const o=t[a],l=this.textMap.get(o)??this.inverseSpecialTokens[o];l!=null&&(e.push(l),r+=l.length)}const n=new Uint8Array(r);let s=0;for(const a of e)n.set(a,s),s+=a.length;return this.textDecoder.decode(n)}},Tiktoken=_Tiktoken;__publicField(Tiktoken,"specialTokenRegex",t=>new RegExp(t.map(e=>escapeRegex(e)).join("|"),"g"));function getEncodingNameForModel(t){switch(t){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-instruct-0914":case"gpt-3.5-turbo-instruct":case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"gpt-3.5-turbo-0125":case"gpt-4-turbo":case"gpt-4-turbo-2024-04-09":case"gpt-4-turbo-preview":case"gpt-4-0125-preview":case"text-embedding-ada-002":case"text-embedding-3-small":case"text-embedding-3-large":return"cl100k_base";case"gpt-4o":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":case"gpt-4o-2024-11-20":case"gpt-4o-mini-2024-07-18":case"gpt-4o-mini":case"gpt-4o-search-preview":case"gpt-4o-search-preview-2025-03-11":case"gpt-4o-mini-search-preview":case"gpt-4o-mini-search-preview-2025-03-11":case"gpt-4o-audio-preview":case"gpt-4o-audio-preview-2024-12-17":case"gpt-4o-audio-preview-2024-10-01":case"gpt-4o-mini-audio-preview":case"gpt-4o-mini-audio-preview-2024-12-17":case"o1":case"o1-2024-12-17":case"o1-mini":case"o1-mini-2024-09-12":case"o1-preview":case"o1-preview-2024-09-12":case"o1-pro":case"o1-pro-2025-03-19":case"o3":case"o3-2025-04-16":case"o3-mini":case"o3-mini-2025-01-31":case"o4-mini":case"o4-mini-2025-04-16":case"chatgpt-4o-latest":case"gpt-4o-realtime":case"gpt-4o-realtime-preview-2024-10-01":case"gpt-4o-realtime-preview-2024-12-17":case"gpt-4o-mini-realtime-preview":case"gpt-4o-mini-realtime-preview-2024-12-17":case"gpt-4.1":case"gpt-4.1-2025-04-14":case"gpt-4.1-mini":case"gpt-4.1-mini-2025-04-14":case"gpt-4.1-nano":case"gpt-4.1-nano-2025-04-14":case"gpt-4.5-preview":case"gpt-4.5-preview-2025-02-27":return"o200k_base";default:throw new Error("Unknown model")}}const cache={},caller=new AsyncCaller({});async function getEncoding(t){return t in cache||(cache[t]=caller.fetch(`https://tiktoken.pages.dev/js/${t}.json`).then(e=>e.json()).then(e=>new Tiktoken(e)).catch(e=>{throw delete cache[t],e})),await cache[t]}async function encodingForModel(t){return getEncoding(getEncodingNameForModel(t))}const getModelNameForTiktoken=t=>t.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":t.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":t.startsWith("gpt-4-32k")?"gpt-4-32k":t.startsWith("gpt-4-")?"gpt-4":t.startsWith("gpt-4o")?"gpt-4o":t;function isOpenAITool(t){return typeof t!="object"||!t?!1:!!("type"in t&&t.type==="function"&&"function"in t&&typeof t.function=="object"&&t.function&&"name"in t.function&&"parameters"in t.function)}const getVerbosity=()=>!1;class BaseLangChain extends Runnable{get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(e){super(e),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=e.verbose??getVerbosity(),this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}}class BaseLanguageModel extends BaseLangChain{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}constructor({callbacks:e,callbackManager:r,...n}){const{cache:s,...a}=n;super({callbacks:e??r,...a}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof s=="object"?this.cache=s:s?this.cache=InMemoryCache.global():this.cache=void 0,this.caller=new AsyncCaller(n??{})}async getNumTokens(e){if(typeof e!="string")return 0;let r=Math.ceil(e.length/4);if(!this._encoding)try{this._encoding=await encodingForModel("modelName"in this?getModelNameForTiktoken(this.modelName):"gpt2")}catch(n){console.warn("Failed to calculate number of tokens, falling back to approximate count",n)}if(this._encoding)try{r=this._encoding.encode(e).length}catch(n){console.warn("Failed to calculate number of tokens, falling back to approximate count",n)}return r}static _convertInputToPromptValue(e){return typeof e=="string"?new StringPromptValue(e):Array.isArray(e)?new ChatPromptValue(e.map(coerceMessageLikeToMessage)):e}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall({config:e,...r}){const n={...this._identifyingParams(),...r,_type:this._llmType(),_model:this._modelType()};return Object.entries(n).filter(([o,l])=>l!==void 0).map(([o,l])=>`${o}:${JSON.stringify(l)}`).sort().join(",")}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){throw new Error("Use .toJSON() instead")}}const scriptRel="modulepreload",assetsURL=function(t){return"/"+t},seen={},__vitePreload=function t(e,r,n){let s=Promise.resolve();if(r&&r.length>0){let o=function(d){return Promise.all(d.map(p=>Promise.resolve(p).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=o(r.map(d=>{if(d=assetsURL(d),d in seen)return;seen[d]=!0;const p=d.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${g}`))return;const y=document.createElement("link");if(y.rel=p?"stylesheet":scriptRel,p||(y.as="script"),y.crossOrigin="",y.href=d,c&&y.setAttribute("nonce",c),document.head.appendChild(y),p)return new Promise((x,E)=>{y.addEventListener("load",x),y.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})};class BasePromptTemplate extends Runnable{get lc_attributes(){return{partialVariables:void 0}}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts",this._getPromptType()]}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"partialVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{inputVariables:r}=e;if(r.includes("stop"))throw new Error("Cannot have an input variable named 'stop', as it is used internally, please rename.");Object.assign(this,e)}async mergePartialAndUserVariables(e){const r=this.partialVariables??{},n={};for(const[a,o]of Object.entries(r))typeof o=="string"?n[a]=o:n[a]=await o();return{...n,...e}}async invoke(e,r){const n={...this.metadata,...r==null?void 0:r.metadata},s=[...this.tags??[],...(r==null?void 0:r.tags)??[]];return this._callWithConfig(a=>this.formatPromptValue(a),e,{...r,tags:s,metadata:n,runType:"prompt"})}serialize(){throw new Error("Use .toJSON() instead")}static async deserialize(e){switch(e._type){case"prompt":{const{PromptTemplate:r}=await __vitePreload(async()=>{const{PromptTemplate:n}=await Promise.resolve().then(()=>prompt);return{PromptTemplate:n}},[]);return r.deserialize(e)}case void 0:{const{PromptTemplate:r}=await __vitePreload(async()=>{const{PromptTemplate:n}=await Promise.resolve().then(()=>prompt);return{PromptTemplate:n}},void 0);return r.deserialize({...e,_type:"prompt"})}case"few_shot":{const{FewShotPromptTemplate:r}=await __vitePreload(async()=>{const{FewShotPromptTemplate:n}=await import("./few_shot-CQXy47jU.js");return{FewShotPromptTemplate:n}},[]);return r.deserialize(e)}default:throw new Error(`Invalid prompt type in config: ${e._type}`)}}}class BaseStringPromptTemplate extends BasePromptTemplate{async formatPromptValue(e){const r=await this.format(e);return new StringPromptValue(r)}}/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */var objectToString=Object.prototype.toString,isArray=Array.isArray||function t(e){return objectToString.call(e)==="[object Array]"};function isFunction$1(t){return typeof t=="function"}function typeStr(t){return isArray(t)?"array":typeof t}function escapeRegExp(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function hasProperty(t,e){return t!=null&&typeof t=="object"&&e in t}function primitiveHasOwnProperty(t,e){return t!=null&&typeof t!="object"&&t.hasOwnProperty&&t.hasOwnProperty(e)}var regExpTest=RegExp.prototype.test;function testRegExp(t,e){return regExpTest.call(t,e)}var nonSpaceRe=/\S/;function isWhitespace(t){return!testRegExp(nonSpaceRe,t)}var entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function escapeHtml(t){return String(t).replace(/[&<>"'`=\/]/g,function(r){return entityMap[r]})}var whiteRe=/\s*/,spaceRe=/\s+/,equalsRe=/\s*=/,curlyRe=/\s*\}/,tagRe=/#|\^|\/|>|\{|&|=|!/;function parseTemplate$1(t,e){if(!t)return[];var r=!1,n=[],s=[],a=[],o=!1,l=!1,c="",d=0;function p(){if(o&&!l)for(;a.length;)delete s[a.pop()];else a=[];o=!1,l=!1}var g,y,x;function E(B){if(typeof B=="string"&&(B=B.split(spaceRe,2)),!isArray(B)||B.length!==2)throw new Error("Invalid tags: "+B);g=new RegExp(escapeRegExp(B[0])+"\\s*"),y=new RegExp("\\s*"+escapeRegExp(B[1])),x=new RegExp("\\s*"+escapeRegExp("}"+B[1]))}E(e||mustache.tags);for(var S=new Scanner(t),k,C,P,R,j,I;!S.eos();){if(k=S.pos,P=S.scanUntil(g),P)for(var O=0,L=P.length;O<L;++O)R=P.charAt(O),isWhitespace(R)?(a.push(s.length),c+=R):(l=!0,r=!0,c+=" "),s.push(["text",R,k,k+1]),k+=1,R===`
`&&(p(),c="",d=0,r=!1);if(!S.scan(g))break;if(o=!0,C=S.scan(tagRe)||"name",S.scan(whiteRe),C==="="?(P=S.scanUntil(equalsRe),S.scan(equalsRe),S.scanUntil(y)):C==="{"?(P=S.scanUntil(x),S.scan(curlyRe),S.scanUntil(y),C="&"):P=S.scanUntil(y),!S.scan(y))throw new Error("Unclosed tag at "+S.pos);if(C==">"?j=[C,P,k,S.pos,c,d,r]:j=[C,P,k,S.pos],d++,s.push(j),C==="#"||C==="^")n.push(j);else if(C==="/"){if(I=n.pop(),!I)throw new Error('Unopened section "'+P+'" at '+k);if(I[1]!==P)throw new Error('Unclosed section "'+I[1]+'" at '+k)}else C==="name"||C==="{"||C==="&"?l=!0:C==="="&&E(P)}if(p(),I=n.pop(),I)throw new Error('Unclosed section "'+I[1]+'" at '+S.pos);return nestTokens(squashTokens(s))}function squashTokens(t){for(var e=[],r,n,s=0,a=t.length;s<a;++s)r=t[s],r&&(r[0]==="text"&&n&&n[0]==="text"?(n[1]+=r[1],n[3]=r[3]):(e.push(r),n=r));return e}function nestTokens(t){for(var e=[],r=e,n=[],s,a,o=0,l=t.length;o<l;++o)switch(s=t[o],s[0]){case"#":case"^":r.push(s),n.push(s),r=s[4]=[];break;case"/":a=n.pop(),a[5]=s[2],r=n.length>0?n[n.length-1][4]:e;break;default:r.push(s)}return e}function Scanner(t){this.string=t,this.tail=t,this.pos=0}Scanner.prototype.eos=function t(){return this.tail===""};Scanner.prototype.scan=function t(e){var r=this.tail.match(e);if(!r||r.index!==0)return"";var n=r[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n};Scanner.prototype.scanUntil=function t(e){var r=this.tail.search(e),n;switch(r){case-1:n=this.tail,this.tail="";break;case 0:n="";break;default:n=this.tail.substring(0,r),this.tail=this.tail.substring(r)}return this.pos+=n.length,n};function Context(t,e){this.view=t,this.cache={".":this.view},this.parent=e}Context.prototype.push=function t(e){return new Context(e,this)};Context.prototype.lookup=function t(e){var r=this.cache,n;if(r.hasOwnProperty(e))n=r[e];else{for(var s=this,a,o,l,c=!1;s;){if(e.indexOf(".")>0)for(a=s.view,o=e.split("."),l=0;a!=null&&l<o.length;)l===o.length-1&&(c=hasProperty(a,o[l])||primitiveHasOwnProperty(a,o[l])),a=a[o[l++]];else a=s.view[e],c=hasProperty(s.view,e);if(c){n=a;break}s=s.parent}r[e]=n}return isFunction$1(n)&&(n=n.call(this.view)),n};function Writer(){this.templateCache={_cache:{},set:function(e,r){this._cache[e]=r},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}Writer.prototype.clearCache=function t(){typeof this.templateCache<"u"&&this.templateCache.clear()};Writer.prototype.parse=function t(e,r){var n=this.templateCache,s=e+":"+(r||mustache.tags).join(":"),a=typeof n<"u",o=a?n.get(s):void 0;return o==null&&(o=parseTemplate$1(e,r),a&&n.set(s,o)),o};Writer.prototype.render=function t(e,r,n,s){var a=this.getConfigTags(s),o=this.parse(e,a),l=r instanceof Context?r:new Context(r,void 0);return this.renderTokens(o,l,n,e,s)};Writer.prototype.renderTokens=function t(e,r,n,s,a){for(var o="",l,c,d,p=0,g=e.length;p<g;++p)d=void 0,l=e[p],c=l[0],c==="#"?d=this.renderSection(l,r,n,s,a):c==="^"?d=this.renderInverted(l,r,n,s,a):c===">"?d=this.renderPartial(l,r,n,a):c==="&"?d=this.unescapedValue(l,r):c==="name"?d=this.escapedValue(l,r,a):c==="text"&&(d=this.rawValue(l)),d!==void 0&&(o+=d);return o};Writer.prototype.renderSection=function t(e,r,n,s,a){var o=this,l="",c=r.lookup(e[1]);function d(y){return o.render(y,r,n,a)}if(c){if(isArray(c))for(var p=0,g=c.length;p<g;++p)l+=this.renderTokens(e[4],r.push(c[p]),n,s,a);else if(typeof c=="object"||typeof c=="string"||typeof c=="number")l+=this.renderTokens(e[4],r.push(c),n,s,a);else if(isFunction$1(c)){if(typeof s!="string")throw new Error("Cannot use higher-order sections without the original template");c=c.call(r.view,s.slice(e[3],e[5]),d),c!=null&&(l+=c)}else l+=this.renderTokens(e[4],r,n,s,a);return l}};Writer.prototype.renderInverted=function t(e,r,n,s,a){var o=r.lookup(e[1]);if(!o||isArray(o)&&o.length===0)return this.renderTokens(e[4],r,n,s,a)};Writer.prototype.indentPartial=function t(e,r,n){for(var s=r.replace(/[^ \t]/g,""),a=e.split(`
`),o=0;o<a.length;o++)a[o].length&&(o>0||!n)&&(a[o]=s+a[o]);return a.join(`
`)};Writer.prototype.renderPartial=function t(e,r,n,s){if(n){var a=this.getConfigTags(s),o=isFunction$1(n)?n(e[1]):n[e[1]];if(o!=null){var l=e[6],c=e[5],d=e[4],p=o;c==0&&d&&(p=this.indentPartial(o,d,l));var g=this.parse(p,a);return this.renderTokens(g,r,n,p,s)}}};Writer.prototype.unescapedValue=function t(e,r){var n=r.lookup(e[1]);if(n!=null)return n};Writer.prototype.escapedValue=function t(e,r,n){var s=this.getConfigEscape(n)||mustache.escape,a=r.lookup(e[1]);if(a!=null)return typeof a=="number"&&s===mustache.escape?String(a):s(a)};Writer.prototype.rawValue=function t(e){return e[1]};Writer.prototype.getConfigTags=function t(e){return isArray(e)?e:e&&typeof e=="object"?e.tags:void 0};Writer.prototype.getConfigEscape=function t(e){if(e&&typeof e=="object"&&!isArray(e))return e.escape};var mustache={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(t){defaultWriter.templateCache=t},get templateCache(){return defaultWriter.templateCache}},defaultWriter=new Writer;mustache.clearCache=function t(){return defaultWriter.clearCache()};mustache.parse=function t(e,r){return defaultWriter.parse(e,r)};mustache.render=function t(e,r,n,s){if(typeof e!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+typeStr(e)+'" was given as the first argument for mustache#render(template, view, partials)');return defaultWriter.render(e,r,n,s)};mustache.escape=escapeHtml;mustache.Scanner=Scanner;mustache.Context=Context;mustache.Writer=Writer;function configureMustache(){mustache.escape=t=>t}const parseFString=t=>{const e=t.split(""),r=[],n=(a,o)=>{for(let l=o;l<e.length;l+=1)if(a.includes(e[l]))return l;return-1};let s=0;for(;s<e.length;)if(e[s]==="{"&&s+1<e.length&&e[s+1]==="{")r.push({type:"literal",text:"{"}),s+=2;else if(e[s]==="}"&&s+1<e.length&&e[s+1]==="}")r.push({type:"literal",text:"}"}),s+=2;else if(e[s]==="{"){const a=n("}",s);if(a<0)throw new Error("Unclosed '{' in template.");r.push({type:"variable",name:e.slice(s+1,a).join("")}),s=a+1}else{if(e[s]==="}")throw new Error("Single '}' in template.");{const a=n("{}",s),o=(a<0?e.slice(s):e.slice(s,a)).join("");r.push({type:"literal",text:o}),s=a<0?e.length:a}}return r},mustacheTemplateToNodes=t=>t.map(e=>e[0]==="name"?{type:"variable",name:e[1].includes(".")?e[1].split(".")[0]:e[1]}:["#","&","^",">"].includes(e[0])?{type:"variable",name:e[1]}:{type:"literal",text:e[1]}),parseMustache=t=>{configureMustache();const e=mustache.parse(t);return mustacheTemplateToNodes(e)},interpolateFString=(t,e)=>parseFString(t).reduce((r,n)=>{if(n.type==="variable"){if(n.name in e){const s=typeof e[n.name]=="string"?e[n.name]:JSON.stringify(e[n.name]);return r+s}throw new Error(`(f-string) Missing value for input ${n.name}`)}return r+n.text},""),interpolateMustache=(t,e)=>(configureMustache(),mustache.render(t,e)),DEFAULT_FORMATTER_MAPPING={"f-string":interpolateFString,mustache:interpolateMustache},DEFAULT_PARSER_MAPPING={"f-string":parseFString,mustache:parseMustache},renderTemplate=(t,e,r)=>{try{return DEFAULT_FORMATTER_MAPPING[e](t,r)}catch(n){throw addLangChainErrorFields$1(n,"INVALID_PROMPT_INPUT")}},parseTemplate=(t,e)=>DEFAULT_PARSER_MAPPING[e](t),checkValidTemplate=(t,e,r)=>{if(!(e in DEFAULT_FORMATTER_MAPPING)){const n=Object.keys(DEFAULT_FORMATTER_MAPPING);throw new Error(`Invalid template format. Got \`${e}\`;
                         should be one of ${n}`)}try{const n=r.reduce((s,a)=>(s[a]="foo",s),{});Array.isArray(t)?t.forEach(s=>{if(s.type==="text")renderTemplate(s.text,e,n);else if(s.type==="image_url")if(typeof s.image_url=="string")renderTemplate(s.image_url,e,n);else{const a=s.image_url.url;renderTemplate(a,e,n)}else throw new Error(`Invalid message template received. ${JSON.stringify(s,null,2)}`)}):renderTemplate(t,e,n)}catch(n){throw new Error(`Invalid prompt schema: ${n.message}`)}};class PromptTemplate extends BaseStringPromptTemplate{static lc_name(){return"PromptTemplate"}constructor(e){if(super(e),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"additionalContentFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e.templateFormat==="mustache"&&e.validateTemplate===void 0&&(this.validateTemplate=!1),Object.assign(this,e),this.validateTemplate){if(this.templateFormat==="mustache")throw new Error("Mustache templates cannot be validated.");let r=this.inputVariables;this.partialVariables&&(r=r.concat(Object.keys(this.partialVariables))),checkValidTemplate(this.template,this.templateFormat,r)}}_getPromptType(){return"prompt"}async format(e){const r=await this.mergePartialAndUserVariables(e);return renderTemplate(this.template,this.templateFormat,r)}static fromExamples(e,r,n,s=`

`,a=""){const o=[a,...e,r].join(s);return new PromptTemplate({inputVariables:n,template:o})}static fromTemplate(e,r){const{templateFormat:n="f-string",...s}=r??{},a=new Set;return parseTemplate(e,n).forEach(o=>{o.type==="variable"&&a.add(o.name)}),new PromptTemplate({inputVariables:[...a],templateFormat:n,template:e,...s})}async partial(e){const r=this.inputVariables.filter(a=>!(a in e)),n={...this.partialVariables??{},...e},s={...this,inputVariables:r,partialVariables:n};return new PromptTemplate(s)}serialize(){if(this.outputParser!==void 0)throw new Error("Cannot serialize a prompt template with an output parser");return{_type:this._getPromptType(),input_variables:this.inputVariables,template:this.template,template_format:this.templateFormat}}static async deserialize(e){if(!e.template)throw new Error("Prompt template must have a template");return new PromptTemplate({inputVariables:e.input_variables,template:e.template,templateFormat:e.template_format})}}const prompt=Object.freeze(Object.defineProperty({__proto__:null,PromptTemplate},Symbol.toStringTag,{value:"Module"}));class ImagePromptTemplate extends BasePromptTemplate{static lc_name(){return"ImagePromptTemplate"}constructor(e){if(super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts","image"]}),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"additionalContentFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.template=e.template,this.templateFormat=e.templateFormat??this.templateFormat,this.validateTemplate=e.validateTemplate??this.validateTemplate,this.additionalContentFields=e.additionalContentFields,this.validateTemplate){let r=this.inputVariables;this.partialVariables&&(r=r.concat(Object.keys(this.partialVariables))),checkValidTemplate([{type:"image_url",image_url:this.template}],this.templateFormat,r)}}_getPromptType(){return"prompt"}async partial(e){const r=this.inputVariables.filter(a=>!(a in e)),n={...this.partialVariables??{},...e},s={...this,inputVariables:r,partialVariables:n};return new ImagePromptTemplate(s)}async format(e){const r={};for(const[o,l]of Object.entries(this.template))typeof l=="string"?r[o]=renderTemplate(l,this.templateFormat,e):r[o]=l;const n=e.url||r.url,s=e.detail||r.detail;if(!n)throw new Error("Must provide either an image URL.");if(typeof n!="string")throw new Error("url must be a string.");const a={url:n};return s&&(a.detail=s),a}async formatPromptValue(e){const r=await this.format(e);return new ImagePromptValue(r)}}class DictPromptTemplate extends Runnable{static lc_name(){return"DictPromptTemplate"}constructor(e){const r=e.templateFormat??"f-string",n=_getInputVariables(e.template,r);super({inputVariables:n,...e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts","dict"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.template=e.template,this.templateFormat=r,this.inputVariables=n}async format(e){return _insertInputVariables(this.template,e,this.templateFormat)}async invoke(e){return await this._callWithConfig(this.format.bind(this),e,{runType:"prompt"})}}function _getInputVariables(t,e){const r=[];for(const n of Object.values(t))if(typeof n=="string")parseTemplate(n,e).forEach(s=>{s.type==="variable"&&r.push(s.name)});else if(Array.isArray(n))for(const s of n)typeof s=="string"?parseTemplate(s,e).forEach(a=>{a.type==="variable"&&r.push(a.name)}):typeof s=="object"&&r.push(..._getInputVariables(s,e));else typeof n=="object"&&n!==null&&r.push(..._getInputVariables(n,e));return Array.from(new Set(r))}function _insertInputVariables(t,e,r){const n={};for(const[s,a]of Object.entries(t))if(typeof a=="string")n[s]=renderTemplate(a,r,e);else if(Array.isArray(a)){const o=[];for(const l of a)typeof l=="string"?o.push(renderTemplate(l,r,e)):typeof l=="object"&&o.push(_insertInputVariables(l,e,r));n[s]=o}else typeof a=="object"&&a!==null?n[s]=_insertInputVariables(a,e,r):n[s]=a;return n}class BaseMessagePromptTemplate extends Runnable{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts","chat"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}async invoke(e,r){return this._callWithConfig(n=>this.formatMessages(n),e,{...r,runType:"prompt"})}}class MessagesPlaceholder extends BaseMessagePromptTemplate{static lc_name(){return"MessagesPlaceholder"}constructor(e){typeof e=="string"&&(e={variableName:e}),super(e),Object.defineProperty(this,"variableName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"optional",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.variableName=e.variableName,this.optional=e.optional??!1}get inputVariables(){return[this.variableName]}async formatMessages(e){const r=e[this.variableName];if(this.optional&&!r)return[];if(!r){const s=new Error(`Field "${this.variableName}" in prompt uses a MessagesPlaceholder, which expects an array of BaseMessages as an input value. Received: undefined`);throw s.name="InputFormatError",s}let n;try{Array.isArray(r)?n=r.map(coerceMessageLikeToMessage):n=[coerceMessageLikeToMessage(r)]}catch(s){const a=typeof r=="string"?r:JSON.stringify(r,null,2),o=new Error([`Field "${this.variableName}" in prompt uses a MessagesPlaceholder, which expects an array of BaseMessages or coerceable values as input.`,`Received value: ${a}`,`Additional message: ${s.message}`].join(`

`));throw o.name="InputFormatError",o.lc_error_code=s.lc_error_code,o}return n}}class BaseMessageStringPromptTemplate extends BaseMessagePromptTemplate{constructor(e){"prompt"in e||(e={prompt:e}),super(e),Object.defineProperty(this,"prompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.prompt=e.prompt}get inputVariables(){return this.prompt.inputVariables}async formatMessages(e){return[await this.format(e)]}}class BaseChatPromptTemplate extends BasePromptTemplate{constructor(e){super(e)}async format(e){return(await this.formatPromptValue(e)).toString()}async formatPromptValue(e){const r=await this.formatMessages(e);return new ChatPromptValue(r)}}class ChatMessagePromptTemplate extends BaseMessageStringPromptTemplate{static lc_name(){return"ChatMessagePromptTemplate"}constructor(e,r){"prompt"in e||(e={prompt:e,role:r}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}async format(e){return new ChatMessage(await this.prompt.format(e),this.role)}static fromTemplate(e,r,n){return new this(PromptTemplate.fromTemplate(e,{templateFormat:n==null?void 0:n.templateFormat}),r)}}function isTextTemplateParam(t){return t===null||typeof t!="object"||Array.isArray(t)?!1:Object.keys(t).length===1&&"text"in t&&typeof t.text=="string"}function isImageTemplateParam(t){return t===null||typeof t!="object"||Array.isArray(t)?!1:"image_url"in t&&(typeof t.image_url=="string"||typeof t.image_url=="object"&&t.image_url!==null&&"url"in t.image_url&&typeof t.image_url.url=="string")}class _StringImageMessagePromptTemplate extends BaseMessagePromptTemplate{static _messageClass(){throw new Error("Can not invoke _messageClass from inside _StringImageMessagePromptTemplate")}constructor(e,r){if("prompt"in e||(e={prompt:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts","chat"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"additionalOptions",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"prompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"messageClass",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"chatMessageClass",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.prompt=e.prompt,Array.isArray(this.prompt)){let n=[];this.prompt.forEach(s=>{"inputVariables"in s&&(n=n.concat(s.inputVariables))}),this.inputVariables=n}else this.inputVariables=this.prompt.inputVariables;this.additionalOptions=r??this.additionalOptions}createMessage(e){const r=this.constructor;if(r._messageClass()){const n=r._messageClass();return new n({content:e})}else if(r.chatMessageClass){const n=r.chatMessageClass();return new n({content:e,role:this.getRoleFromMessageClass(n.lc_name())})}else throw new Error("No message class defined")}getRoleFromMessageClass(e){switch(e){case"HumanMessage":return"human";case"AIMessage":return"ai";case"SystemMessage":return"system";case"ChatMessage":return"chat";default:throw new Error("Invalid message class name")}}static fromTemplate(e,r){if(typeof e=="string")return new this(PromptTemplate.fromTemplate(e,r));const n=[];for(const s of e)if(typeof s=="string")n.push(PromptTemplate.fromTemplate(s,r));else if(s!==null)if(isTextTemplateParam(s)){let a="";typeof s.text=="string"&&(a=s.text??"");const o={...r,additionalContentFields:s};n.push(PromptTemplate.fromTemplate(a,o))}else if(isImageTemplateParam(s)){let a=s.image_url??"",o,l=[];if(typeof a=="string"){let c;(r==null?void 0:r.templateFormat)==="mustache"?c=parseMustache(a):c=parseFString(a);const d=c.flatMap(p=>p.type==="variable"?[p.name]:[]);if(((d==null?void 0:d.length)??0)>0){if(d.length>1)throw new Error(`Only one format variable allowed per image template.
Got: ${d}
From: ${a}`);l=[d[0]]}else l=[];a={url:a},o=new ImagePromptTemplate({template:a,inputVariables:l,templateFormat:r==null?void 0:r.templateFormat,additionalContentFields:s})}else if(typeof a=="object"){if("url"in a){let c;(r==null?void 0:r.templateFormat)==="mustache"?c=parseMustache(a.url):c=parseFString(a.url),l=c.flatMap(d=>d.type==="variable"?[d.name]:[])}else l=[];o=new ImagePromptTemplate({template:a,inputVariables:l,templateFormat:r==null?void 0:r.templateFormat,additionalContentFields:s})}else throw new Error("Invalid image template");n.push(o)}else typeof s=="object"&&n.push(new DictPromptTemplate({template:s,templateFormat:r==null?void 0:r.templateFormat}));return new this({prompt:n,additionalOptions:r})}async format(e){if(this.prompt instanceof BaseStringPromptTemplate){const r=await this.prompt.format(e);return this.createMessage(r)}else{const r=[];for(const n of this.prompt){let s={};if(!("inputVariables"in n))throw new Error(`Prompt ${n} does not have inputVariables defined.`);for(const a of n.inputVariables)s||(s={[a]:e[a]}),s={...s,[a]:e[a]};if(n instanceof BaseStringPromptTemplate){const a=await n.format(s);let o;"additionalContentFields"in n&&(o=n.additionalContentFields),r.push({...o,type:"text",text:a})}else if(n instanceof ImagePromptTemplate){const a=await n.format(s);let o;"additionalContentFields"in n&&(o=n.additionalContentFields),r.push({...o,type:"image_url",image_url:a})}else if(n instanceof DictPromptTemplate){const a=await n.format(s);let o;"additionalContentFields"in n&&(o=n.additionalContentFields),r.push({...o,...a})}}return this.createMessage(r)}}async formatMessages(e){return[await this.format(e)]}}class HumanMessagePromptTemplate extends _StringImageMessagePromptTemplate{static _messageClass(){return HumanMessage}static lc_name(){return"HumanMessagePromptTemplate"}}class AIMessagePromptTemplate extends _StringImageMessagePromptTemplate{static _messageClass(){return AIMessage}static lc_name(){return"AIMessagePromptTemplate"}}class SystemMessagePromptTemplate extends _StringImageMessagePromptTemplate{static _messageClass(){return SystemMessage}static lc_name(){return"SystemMessagePromptTemplate"}}function _isBaseMessagePromptTemplate(t){return typeof t.formatMessages=="function"}function _coerceMessagePromptTemplateLike(t,e){if(_isBaseMessagePromptTemplate(t)||isBaseMessage(t))return t;if(Array.isArray(t)&&t[0]==="placeholder"){const s=t[1];if((e==null?void 0:e.templateFormat)==="mustache"&&typeof s=="string"&&s.slice(0,2)==="{{"&&s.slice(-2)==="}}"){const a=s.slice(2,-2);return new MessagesPlaceholder({variableName:a,optional:!0})}else if(typeof s=="string"&&s[0]==="{"&&s[s.length-1]==="}"){const a=s.slice(1,-1);return new MessagesPlaceholder({variableName:a,optional:!0})}throw new Error(`Invalid placeholder template for format ${(e==null?void 0:e.templateFormat)??'"f-string"'}: "${t[1]}". Expected a variable name surrounded by ${(e==null?void 0:e.templateFormat)==="mustache"?"double":"single"} curly braces.`)}const r=coerceMessageLikeToMessage(t);let n;if(typeof r.content=="string"?n=r.content:n=r.content.map(s=>"text"in s?{...s,text:s.text}:"image_url"in s?{...s,image_url:s.image_url}:s),r._getType()==="human")return HumanMessagePromptTemplate.fromTemplate(n,e);if(r._getType()==="ai")return AIMessagePromptTemplate.fromTemplate(n,e);if(r._getType()==="system")return SystemMessagePromptTemplate.fromTemplate(n,e);if(ChatMessage.isInstance(r))return ChatMessagePromptTemplate.fromTemplate(r.content,r.role,e);throw new Error(`Could not coerce message prompt template from input. Received message type: "${r._getType()}".`)}function isMessagesPlaceholder(t){return t.constructor.lc_name()==="MessagesPlaceholder"}class ChatPromptTemplate extends BaseChatPromptTemplate{static lc_name(){return"ChatPromptTemplate"}get lc_aliases(){return{promptMessages:"messages"}}constructor(e){if(super(e),Object.defineProperty(this,"promptMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),e.templateFormat==="mustache"&&e.validateTemplate===void 0&&(this.validateTemplate=!1),Object.assign(this,e),this.validateTemplate){const r=new Set;for(const l of this.promptMessages)if(!(l instanceof BaseMessage))for(const c of l.inputVariables)r.add(c);const n=this.inputVariables,s=new Set(this.partialVariables?n.concat(Object.keys(this.partialVariables)):n),a=new Set([...s].filter(l=>!r.has(l)));if(a.size>0)throw new Error(`Input variables \`${[...a]}\` are not used in any of the prompt messages.`);const o=new Set([...r].filter(l=>!s.has(l)));if(o.size>0)throw new Error(`Input variables \`${[...o]}\` are used in prompt messages but not in the prompt template.`)}}_getPromptType(){return"chat"}async _parseImagePrompts(e,r){if(typeof e.content=="string")return e;const n=await Promise.all(e.content.map(async s=>{if(s.type!=="image_url")return s;let a="";typeof s.image_url=="string"?a=s.image_url:a=s.image_url.url;const l=await PromptTemplate.fromTemplate(a,{templateFormat:this.templateFormat}).format(r);return typeof s.image_url!="string"&&"url"in s.image_url?s.image_url.url=l:s.image_url=l,s}));return e.content=n,e}async formatMessages(e){const r=await this.mergePartialAndUserVariables(e);let n=[];for(const s of this.promptMessages)if(s instanceof BaseMessage)n.push(await this._parseImagePrompts(s,r));else{const a=s.inputVariables.reduce((l,c)=>{if(!(c in r)&&!(isMessagesPlaceholder(s)&&s.optional))throw addLangChainErrorFields$1(new Error(`Missing value for input variable \`${c.toString()}\``),"INVALID_PROMPT_INPUT");return l[c]=r[c],l},{}),o=await s.formatMessages(a);n=n.concat(o)}return n}async partial(e){const r=this.inputVariables.filter(a=>!(a in e)),n={...this.partialVariables??{},...e},s={...this,inputVariables:r,partialVariables:n};return new ChatPromptTemplate(s)}static fromTemplate(e,r){const n=PromptTemplate.fromTemplate(e,r),s=new HumanMessagePromptTemplate({prompt:n});return this.fromMessages([s])}static fromMessages(e,r){const n=e.reduce((o,l)=>o.concat(l instanceof ChatPromptTemplate?l.promptMessages:[_coerceMessagePromptTemplateLike(l,r)]),[]),s=e.reduce((o,l)=>l instanceof ChatPromptTemplate?Object.assign(o,l.partialVariables):o,Object.create(null)),a=new Set;for(const o of n)if(!(o instanceof BaseMessage))for(const l of o.inputVariables)l in s||a.add(l);return new this({...r,inputVariables:[...a],promptMessages:n,partialVariables:s,templateFormat:r==null?void 0:r.templateFormat})}static fromPromptMessages(e){return this.fromMessages(e)}}class RunnablePassthrough extends Runnable{static lc_name(){return"RunnablePassthrough"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e&&(this.func=e.func)}async invoke(e,r){const n=ensureConfig(r);return this.func&&await this.func(e,n),this._callWithConfig(s=>Promise.resolve(s),e,n)}async*transform(e,r){const n=ensureConfig(r);let s,a=!0;for await(const o of this._transformStreamWithConfig(e,l=>l,n))if(yield o,a)if(s===void 0)s=o;else try{s=concat(s,o)}catch{s=void 0,a=!1}this.func&&s!==void 0&&await this.func(s,n)}static assign(e){return new RunnableAssign(new RunnableMap({steps:e}))}}class BaseLLMOutputParser extends Runnable{parseResultWithPrompt(e,r,n){return this.parseResult(e,n)}_baseMessageToString(e){return typeof e.content=="string"?e.content:this._baseMessageContentToString(e.content)}_baseMessageContentToString(e){return JSON.stringify(e)}async invoke(e,r){return typeof e=="string"?this._callWithConfig(async(n,s)=>this.parseResult([{text:n}],s==null?void 0:s.callbacks),e,{...r,runType:"parser"}):this._callWithConfig(async(n,s)=>this.parseResult([{message:n,text:this._baseMessageToString(n)}],s==null?void 0:s.callbacks),e,{...r,runType:"parser"})}}class BaseOutputParser extends BaseLLMOutputParser{parseResult(e,r){return this.parse(e[0].text,r)}async parseWithPrompt(e,r,n){return this.parse(e,n)}_type(){throw new Error("_type not implemented")}}class OutputParserException extends Error{constructor(e,r,n,s=!1){if(super(e),Object.defineProperty(this,"llmOutput",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"observation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sendToLLM",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.llmOutput=r,this.observation=n,this.sendToLLM=s,s&&(n===void 0||r===void 0))throw new Error("Arguments 'observation' & 'llmOutput' are required if 'sendToLlm' is true");addLangChainErrorFields$1(this,"OUTPUT_PARSING_FAILURE")}}function deepCompareStrict(t,e){const r=typeof t;if(r!==typeof e)return!1;if(Array.isArray(t)){if(!Array.isArray(e))return!1;const n=t.length;if(n!==e.length)return!1;for(let s=0;s<n;s++)if(!deepCompareStrict(t[s],e[s]))return!1;return!0}if(r==="object"){if(!t||!e)return t===e;const n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(const o of n)if(!deepCompareStrict(t[o],e[o]))return!1;return!0}return t===e}class BaseTransformOutputParser extends BaseOutputParser{async*_transform(e){for await(const r of e)typeof r=="string"?yield this.parseResult([{text:r}]):yield this.parseResult([{message:r,text:this._baseMessageToString(r)}])}async*transform(e,r){yield*this._transformStreamWithConfig(e,this._transform.bind(this),{...r,runType:"parser"})}}class BaseCumulativeTransformOutputParser extends BaseTransformOutputParser{constructor(e){super(e),Object.defineProperty(this,"diff",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.diff=(e==null?void 0:e.diff)??this.diff}async*_transform(e){let r,n;for await(const s of e){if(typeof s!="string"&&typeof s.content!="string")throw new Error("Cannot handle non-string output.");let a;if(isBaseMessageChunk(s)){if(typeof s.content!="string")throw new Error("Cannot handle non-string message output.");a=new ChatGenerationChunk({message:s,text:s.content})}else if(isBaseMessage(s)){if(typeof s.content!="string")throw new Error("Cannot handle non-string message output.");a=new ChatGenerationChunk({message:convertToChunk(s),text:s.content})}else a=new GenerationChunk({text:s});n===void 0?n=a:n=n.concat(a);const o=await this.parsePartialResult([n]);o!=null&&!deepCompareStrict(o,r)&&(this.diff?yield this._diff(r,o):yield o,r=o)}}getFormatInstructions(){return""}}class StructuredOutputParser extends BaseOutputParser{static lc_name(){return"StructuredOutputParser"}toJSON(){return this.toJSONNotImplemented()}constructor(e){super(e),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","structured"]})}static fromZodSchema(e){return new this(e)}static fromNamesAndDescriptions(e){const r=objectType(Object.fromEntries(Object.entries(e).map(([n,s])=>[n,stringType().describe(s)])));return new this(r)}getFormatInstructions(){return`You must format your output as a JSON value that adheres to a given "JSON Schema" instance.

"JSON Schema" is a declarative language that allows you to annotate and validate JSON documents.

For example, the example "JSON Schema" instance {{"properties": {{"foo": {{"description": "a list of test words", "type": "array", "items": {{"type": "string"}}}}}}, "required": ["foo"]}}
would match an object with one required property, "foo". The "type" property specifies "foo" must be an "array", and the "description" property semantically describes it as "a list of test words". The items within "foo" must be strings.
Thus, the object {{"foo": ["bar", "baz"]}} is a well-formatted instance of this example "JSON Schema". The object {{"properties": {{"foo": ["bar", "baz"]}}}} is not well-formatted.

Your output will be parsed and type-checked according to the provided schema instance, so make sure all fields in your output match the schema exactly and there are no trailing commas!

Here is the JSON Schema instance your output must adhere to. Include the enclosing markdown codeblock:
\`\`\`json
${JSON.stringify(zodToJsonSchema$2(this.schema))}
\`\`\`
`}async parse(e){try{const n=(e.includes("```")?e.trim().split(/```(?:json)?/)[1]:e.trim()).replace(/"([^"\\]*(\\.[^"\\]*)*)"/g,(s,a)=>`"${a.replace(/\n/g,"\\n")}"`).replace(/\n/g,"");return await this.schema.parseAsync(JSON.parse(n))}catch(r){throw new OutputParserException(`Failed to parse. Text: "${e}". Error: ${r}`,e)}}}class JsonOutputParser extends BaseCumulativeTransformOutputParser{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}static lc_name(){return"JsonOutputParser"}_diff(e,r){if(r)return e?compare(e,r):[{op:"replace",path:"",value:r}]}async parsePartialResult(e){return parseJsonMarkdown(e[0].text)}async parse(e){return parseJsonMarkdown(e,JSON.parse)}getFormatInstructions(){return""}}class CustomSummaryMemory extends BaseMemory{constructor(){super();cr(this,"messages",[]);cr(this,"maxMessages",10)}get memoryKeys(){return["history"]}async loadMemoryVariables(r){return{history:this.messages||[]}}async saveContext(r,n){const s=r.input??"",a=n.output??"";this.messages.push(new HumanMessage(s),new AIMessage(a)),this.messages.length>this.maxMessages*2&&(this.messages=this.messages.slice(-this.maxMessages*2))}clear(){this.messages=[]}}const default_format="RFC3986",formatters={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:t=>String(t)},RFC1738="RFC1738",is_array$1=Array.isArray,hex_table=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),limit=1024,encode=(t,e,r,n,s)=>{if(t.length===0)return t;let a=t;if(typeof t=="symbol"?a=Symbol.prototype.toString.call(t):typeof t!="string"&&(a=String(t)),r==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(l){return"%26%23"+parseInt(l.slice(2),16)+"%3B"});let o="";for(let l=0;l<a.length;l+=limit){const c=a.length>=limit?a.slice(l,l+limit):a,d=[];for(let p=0;p<c.length;++p){let g=c.charCodeAt(p);if(g===45||g===46||g===95||g===126||g>=48&&g<=57||g>=65&&g<=90||g>=97&&g<=122||s===RFC1738&&(g===40||g===41)){d[d.length]=c.charAt(p);continue}if(g<128){d[d.length]=hex_table[g];continue}if(g<2048){d[d.length]=hex_table[192|g>>6]+hex_table[128|g&63];continue}if(g<55296||g>=57344){d[d.length]=hex_table[224|g>>12]+hex_table[128|g>>6&63]+hex_table[128|g&63];continue}p+=1,g=65536+((g&1023)<<10|c.charCodeAt(p)&1023),d[d.length]=hex_table[240|g>>18]+hex_table[128|g>>12&63]+hex_table[128|g>>6&63]+hex_table[128|g&63]}o+=d.join("")}return o};function is_buffer(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function maybe_map(t,e){if(is_array$1(t)){const r=[];for(let n=0;n<t.length;n+=1)r.push(e(t[n]));return r}return e(t)}const has=Object.prototype.hasOwnProperty,array_prefix_generators={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},is_array=Array.isArray,push=Array.prototype.push,push_to_array=function(t,e){push.apply(t,is_array(e)?e:[e])},to_ISO=Date.prototype.toISOString,defaults={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:encode,encodeValuesOnly:!1,format:default_format,formatter:formatters[default_format],indices:!1,serializeDate(t){return to_ISO.call(t)},skipNulls:!1,strictNullHandling:!1};function is_non_nullish_primitive(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const sentinel={};function inner_stringify(t,e,r,n,s,a,o,l,c,d,p,g,y,x,E,S,k,C){let P=t,R=C,j=0,I=!1;for(;(R=R.get(sentinel))!==void 0&&!I;){const te=R.get(t);if(j+=1,typeof te<"u"){if(te===j)throw new RangeError("Cyclic object value");I=!0}typeof R.get(sentinel)>"u"&&(j=0)}if(typeof d=="function"?P=d(e,P):P instanceof Date?P=y==null?void 0:y(P):r==="comma"&&is_array(P)&&(P=maybe_map(P,function(te){return te instanceof Date?y==null?void 0:y(te):te})),P===null){if(a)return c&&!S?c(e,defaults.encoder,k,"key",x):e;P=""}if(is_non_nullish_primitive(P)||is_buffer(P)){if(c){const te=S?e:c(e,defaults.encoder,k,"key",x);return[(E==null?void 0:E(te))+"="+(E==null?void 0:E(c(P,defaults.encoder,k,"value",x)))]}return[(E==null?void 0:E(e))+"="+(E==null?void 0:E(String(P)))]}const O=[];if(typeof P>"u")return O;let L;if(r==="comma"&&is_array(P))S&&c&&(P=maybe_map(P,c)),L=[{value:P.length>0?P.join(",")||null:void 0}];else if(is_array(d))L=d;else{const te=Object.keys(P);L=p?te.sort(p):te}const B=l?String(e).replace(/\./g,"%2E"):String(e),Z=n&&is_array(P)&&P.length===1?B+"[]":B;if(s&&is_array(P)&&P.length===0)return Z+"[]";for(let te=0;te<L.length;++te){const ie=L[te],Q=typeof ie=="object"&&typeof ie.value<"u"?ie.value:P[ie];if(o&&Q===null)continue;const fe=g&&l?ie.replace(/\./g,"%2E"):ie,se=is_array(P)?typeof r=="function"?r(Z,fe):Z:Z+(g?"."+fe:"["+fe+"]");C.set(t,j);const Y=new WeakMap;Y.set(sentinel,C),push_to_array(O,inner_stringify(Q,se,r,n,s,a,o,l,r==="comma"&&S&&is_array(P)?null:c,d,p,g,y,x,E,S,k,Y))}return O}function normalize_stringify_options(t=defaults){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||defaults.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let r=default_format;if(typeof t.format<"u"){if(!has.call(formatters,t.format))throw new TypeError("Unknown format option provided.");r=t.format}const n=formatters[r];let s=defaults.filter;(typeof t.filter=="function"||is_array(t.filter))&&(s=t.filter);let a;if(t.arrayFormat&&t.arrayFormat in array_prefix_generators?a=t.arrayFormat:"indices"in t?a=t.indices?"indices":"repeat":a=defaults.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const o=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:defaults.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:defaults.addQueryPrefix,allowDots:o,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:defaults.allowEmptyArrays,arrayFormat:a,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:defaults.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?defaults.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:defaults.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:defaults.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:defaults.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:defaults.encodeValuesOnly,filter:s,format:r,formatter:n,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:defaults.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:defaults.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:defaults.strictNullHandling}}function stringify(t,e={}){let r=t;const n=normalize_stringify_options(e);let s,a;typeof n.filter=="function"?(a=n.filter,r=a("",r)):is_array(n.filter)&&(a=n.filter,s=a);const o=[];if(typeof r!="object"||r===null)return"";const l=array_prefix_generators[n.arrayFormat],c=l==="comma"&&n.commaRoundTrip;s||(s=Object.keys(r)),n.sort&&s.sort(n.sort);const d=new WeakMap;for(let y=0;y<s.length;++y){const x=s[y];n.skipNulls&&r[x]===null||push_to_array(o,inner_stringify(r[x],x,l,c,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,d))}const p=o.join(n.delimiter);let g=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?g+="utf8=%26%2310003%3B&":g+="utf8=%E2%9C%93&"),p.length>0?g+p:""}const VERSION="4.102.0";let auto=!1,kind,fetch$1,FormData$1,File$1,ReadableStream$1,getMultipartRequestOptions,getDefaultAgent,fileFromPath,isFsReadStream;function setShims(t,e={auto:!1}){if(auto)throw new Error(`you must \`import 'openai/shims/${t.kind}'\` before importing anything else from openai`);if(kind)throw new Error(`can't \`import 'openai/shims/${t.kind}'\` after \`import 'openai/shims/${kind}'\``);auto=e.auto,kind=t.kind,fetch$1=t.fetch,FormData$1=t.FormData,File$1=t.File,ReadableStream$1=t.ReadableStream,getMultipartRequestOptions=t.getMultipartRequestOptions,getDefaultAgent=t.getDefaultAgent,fileFromPath=t.fileFromPath,isFsReadStream=t.isFsReadStream}class MultipartBody{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function getRuntime({manuallyImported:t}={}){const e=t?"You may need to use polyfills":"Add one of these imports before your first `import … from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let r,n,s,a;try{r=fetch,n=Request,s=Response,a=Headers}catch(o){throw new Error(`this environment is missing the following Web Fetch API type: ${o.message}. ${e}`)}return{kind:"web",fetch:r,Request:n,Response:s,Headers:a,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(o,l)=>({...l,body:new MultipartBody(o)}),getDefaultAgent:o=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:o=>!1}}const init=()=>{kind||setShims(getRuntime(),{auto:!0})};init();class OpenAIError extends Error{}class APIError extends OpenAIError{constructor(e,r,n,s){super(`${APIError.makeMessage(e,r,n)}`),this.status=e,this.headers=s,this.request_id=s==null?void 0:s["x-request-id"],this.error=r;const a=r;this.code=a==null?void 0:a.code,this.param=a==null?void 0:a.param,this.type=a==null?void 0:a.type}static makeMessage(e,r,n){const s=r!=null&&r.message?typeof r.message=="string"?r.message:JSON.stringify(r.message):r?JSON.stringify(r):n;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,r,n,s){if(!e||!s)return new APIConnectionError({message:n,cause:castToError(r)});const a=r==null?void 0:r.error;return e===400?new BadRequestError(e,a,n,s):e===401?new AuthenticationError(e,a,n,s):e===403?new PermissionDeniedError(e,a,n,s):e===404?new NotFoundError(e,a,n,s):e===409?new ConflictError(e,a,n,s):e===422?new UnprocessableEntityError(e,a,n,s):e===429?new RateLimitError(e,a,n,s):e>=500?new InternalServerError(e,a,n,s):new APIError(e,a,n,s)}}class APIUserAbortError extends APIError{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class APIConnectionError extends APIError{constructor({message:e,cause:r}){super(void 0,void 0,e||"Connection error.",void 0),r&&(this.cause=r)}}class APIConnectionTimeoutError extends APIConnectionError{constructor({message:e}={}){super({message:e??"Request timed out."})}}class BadRequestError extends APIError{}class AuthenticationError extends APIError{}class PermissionDeniedError extends APIError{}class NotFoundError extends APIError{}class ConflictError extends APIError{}class UnprocessableEntityError extends APIError{}class RateLimitError extends APIError{}class InternalServerError extends APIError{}class LengthFinishReasonError extends OpenAIError{constructor(){super("Could not parse response content as the length limit was reached")}}class ContentFilterFinishReasonError extends OpenAIError{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var __classPrivateFieldSet$5=function(t,e,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r},__classPrivateFieldGet$6=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},_LineDecoder_carriageReturnIndex;class LineDecoder{constructor(){_LineDecoder_carriageReturnIndex.set(this,void 0),this.buffer=new Uint8Array,__classPrivateFieldSet$5(this,_LineDecoder_carriageReturnIndex,null,"f")}decode(e){if(e==null)return[];const r=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?new TextEncoder().encode(e):e;let n=new Uint8Array(this.buffer.length+r.length);n.set(this.buffer),n.set(r,this.buffer.length),this.buffer=n;const s=[];let a;for(;(a=findNewlineIndex(this.buffer,__classPrivateFieldGet$6(this,_LineDecoder_carriageReturnIndex,"f")))!=null;){if(a.carriage&&__classPrivateFieldGet$6(this,_LineDecoder_carriageReturnIndex,"f")==null){__classPrivateFieldSet$5(this,_LineDecoder_carriageReturnIndex,a.index,"f");continue}if(__classPrivateFieldGet$6(this,_LineDecoder_carriageReturnIndex,"f")!=null&&(a.index!==__classPrivateFieldGet$6(this,_LineDecoder_carriageReturnIndex,"f")+1||a.carriage)){s.push(this.decodeText(this.buffer.slice(0,__classPrivateFieldGet$6(this,_LineDecoder_carriageReturnIndex,"f")-1))),this.buffer=this.buffer.slice(__classPrivateFieldGet$6(this,_LineDecoder_carriageReturnIndex,"f")),__classPrivateFieldSet$5(this,_LineDecoder_carriageReturnIndex,null,"f");continue}const o=__classPrivateFieldGet$6(this,_LineDecoder_carriageReturnIndex,"f")!==null?a.preceding-1:a.preceding,l=this.decodeText(this.buffer.slice(0,o));s.push(l),this.buffer=this.buffer.slice(a.index),__classPrivateFieldSet$5(this,_LineDecoder_carriageReturnIndex,null,"f")}return s}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new OpenAIError(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new OpenAIError(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new OpenAIError("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode(`
`):[]}}_LineDecoder_carriageReturnIndex=new WeakMap;LineDecoder.NEWLINE_CHARS=new Set([`
`,"\r"]);LineDecoder.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function findNewlineIndex(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function findDoubleNewlineIndex(t){for(let n=0;n<t.length-1;n++){if(t[n]===10&&t[n+1]===10||t[n]===13&&t[n+1]===13)return n+2;if(t[n]===13&&t[n+1]===10&&n+3<t.length&&t[n+2]===13&&t[n+3]===10)return n+4}return-1}function ReadableStreamToAsyncIterable(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const r=await e.read();return r!=null&&r.done&&e.releaseLock(),r}catch(r){throw e.releaseLock(),r}},async return(){const r=e.cancel();return e.releaseLock(),await r,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}class Stream{constructor(e,r){this.iterator=e,this.controller=r}static fromSSEResponse(e,r){let n=!1;async function*s(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let a=!1;try{for await(const o of _iterSSEMessages(e,r))if(!a){if(o.data.startsWith("[DONE]")){a=!0;continue}if(o.event===null||o.event.startsWith("response.")||o.event.startsWith("transcript.")){let l;try{l=JSON.parse(o.data)}catch(c){throw console.error("Could not parse message into JSON:",o.data),console.error("From chunk:",o.raw),c}if(l&&l.error)throw new APIError(void 0,l.error,void 0,createResponseHeaders(e.headers));yield l}else{let l;try{l=JSON.parse(o.data)}catch(c){throw console.error("Could not parse message into JSON:",o.data),console.error("From chunk:",o.raw),c}if(o.event=="error")throw new APIError(void 0,l.error,l.message,void 0);yield{event:o.event,data:l}}}a=!0}catch(o){if(o instanceof Error&&o.name==="AbortError")return;throw o}finally{a||r.abort()}}return new Stream(s,r)}static fromReadableStream(e,r){let n=!1;async function*s(){const o=new LineDecoder,l=ReadableStreamToAsyncIterable(e);for await(const c of l)for(const d of o.decode(c))yield d;for(const c of o.flush())yield c}async function*a(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let o=!1;try{for await(const l of s())o||l&&(yield JSON.parse(l));o=!0}catch(l){if(l instanceof Error&&l.name==="AbortError")return;throw l}finally{o||r.abort()}}return new Stream(a,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],r=[],n=this.iterator(),s=a=>({next:()=>{if(a.length===0){const o=n.next();e.push(o),r.push(o)}return a.shift()}});return[new Stream(()=>s(e),this.controller),new Stream(()=>s(r),this.controller)]}toReadableStream(){const e=this;let r;const n=new TextEncoder;return new ReadableStream$1({async start(){r=e[Symbol.asyncIterator]()},async pull(s){try{const{value:a,done:o}=await r.next();if(o)return s.close();const l=n.encode(JSON.stringify(a)+`
`);s.enqueue(l)}catch(a){s.error(a)}},async cancel(){var s;await((s=r.return)==null?void 0:s.call(r))}})}}async function*_iterSSEMessages(t,e){if(!t.body)throw e.abort(),new OpenAIError("Attempted to iterate over a response with no body");const r=new SSEDecoder,n=new LineDecoder,s=ReadableStreamToAsyncIterable(t.body);for await(const a of iterSSEChunks(s))for(const o of n.decode(a)){const l=r.decode(o);l&&(yield l)}for(const a of n.flush()){const o=r.decode(a);o&&(yield o)}}async function*iterSSEChunks(t){let e=new Uint8Array;for await(const r of t){if(r==null)continue;const n=r instanceof ArrayBuffer?new Uint8Array(r):typeof r=="string"?new TextEncoder().encode(r):r;let s=new Uint8Array(e.length+n.length);s.set(e),s.set(n,e.length),e=s;let a;for(;(a=findDoubleNewlineIndex(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}class SSEDecoder{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[r,n,s]=partition(e,":");return s.startsWith(" ")&&(s=s.substring(1)),r==="event"?this.event=s:r==="data"&&this.data.push(s),null}}function partition(t,e){const r=t.indexOf(e);return r!==-1?[t.substring(0,r),e,t.substring(r+e.length)]:[t,"",""]}const isResponseLike=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function",isFileLike=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&isBlobLike(t),isBlobLike=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",isUploadable=t=>isFileLike(t)||isResponseLike(t)||isFsReadStream(t);async function toFile(t,e,r){var s;if(t=await t,isFileLike(t))return t;if(isResponseLike(t)){const a=await t.blob();e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()??"unknown_file");const o=isBlobLike(a)?[await a.arrayBuffer()]:[a];return new File$1(o,e,r)}const n=await getBytes(t);if(e||(e=getName(t)??"unknown_file"),!(r!=null&&r.type)){const a=(s=n[0])==null?void 0:s.type;typeof a=="string"&&(r={...r,type:a})}return new File$1(n,e,r)}async function getBytes(t){var r;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(isBlobLike(t))e.push(await t.arrayBuffer());else if(isAsyncIterableIterator(t))for await(const n of t)e.push(n);else throw new Error(`Unexpected data type: ${typeof t}; constructor: ${(r=t==null?void 0:t.constructor)==null?void 0:r.name}; props: ${propsForError(t)}`);return e}function propsForError(t){return`[${Object.getOwnPropertyNames(t).map(r=>`"${r}"`).join(", ")}]`}function getName(t){var e;return getStringFromMaybeBuffer(t.name)||getStringFromMaybeBuffer(t.filename)||((e=getStringFromMaybeBuffer(t.path))==null?void 0:e.split(/[\\/]/).pop())}const getStringFromMaybeBuffer=t=>{if(typeof t=="string")return t;if(typeof Buffer<"u"&&t instanceof Buffer)return String(t)},isAsyncIterableIterator=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",isMultipartBody=t=>t&&typeof t=="object"&&t.body&&t[Symbol.toStringTag]==="MultipartBody",multipartFormRequestOptions=async t=>{const e=await createForm(t.body);return getMultipartRequestOptions(e,t)},createForm=async t=>{const e=new FormData$1;return await Promise.all(Object.entries(t||{}).map(([r,n])=>addFormValue(e,r,n))),e},addFormValue=async(t,e,r)=>{if(r!==void 0){if(r==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")t.append(e,String(r));else if(isUploadable(r)){const n=await toFile(r);t.append(e,n)}else if(Array.isArray(r))await Promise.all(r.map(n=>addFormValue(t,e+"[]",n)));else if(typeof r=="object")await Promise.all(Object.entries(r).map(([n,s])=>addFormValue(t,`${e}[${n}]`,s)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${r} instead`)}};var define_process_env_default={},__classPrivateFieldSet$4=function(t,e,r,n,s){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,r),r},__classPrivateFieldGet$5=function(t,e,r,n){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},_AbstractPage_client;init();async function defaultParseResponse(t){var o;const{response:e}=t;if(t.options.stream)return debug("response",e.status,e.url,e.headers,e.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(e,t.controller):Stream.fromSSEResponse(e,t.controller);if(e.status===204)return null;if(t.options.__binaryResponse)return e;const r=e.headers.get("content-type"),n=(o=r==null?void 0:r.split(";")[0])==null?void 0:o.trim();if((n==null?void 0:n.includes("application/json"))||(n==null?void 0:n.endsWith("+json"))){const l=await e.json();return debug("response",e.status,e.url,e.headers,l),_addRequestID(l,e)}const a=await e.text();return debug("response",e.status,e.url,e.headers,a),a}function _addRequestID(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}class APIPromise extends Promise{constructor(e,r=defaultParseResponse){super(n=>{n(null)}),this.responsePromise=e,this.parseResponse=r}_thenUnwrap(e){return new APIPromise(this.responsePromise,async r=>_addRequestID(e(await this.parseResponse(r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,r]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:r,request_id:r.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,r){return this.parse().then(e,r)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class APIClient{constructor({baseURL:e,maxRetries:r=2,timeout:n=6e5,httpAgent:s,fetch:a}){this.baseURL=e,this.maxRetries=validatePositiveInteger("maxRetries",r),this.timeout=validatePositiveInteger("timeout",n),this.httpAgent=s,this.fetch=a??fetch$1}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...getPlatformHeaders(),...this.authHeaders(e)}}validateHeaders(e,r){}defaultIdempotencyKey(){return`stainless-node-retry-${uuid4()}`}get(e,r){return this.methodRequest("get",e,r)}post(e,r){return this.methodRequest("post",e,r)}patch(e,r){return this.methodRequest("patch",e,r)}put(e,r){return this.methodRequest("put",e,r)}delete(e,r){return this.methodRequest("delete",e,r)}methodRequest(e,r,n){return this.request(Promise.resolve(n).then(async s=>{const a=s&&isBlobLike(s==null?void 0:s.body)?new DataView(await s.body.arrayBuffer()):(s==null?void 0:s.body)instanceof DataView?s.body:(s==null?void 0:s.body)instanceof ArrayBuffer?new DataView(s.body):s&&ArrayBuffer.isView(s==null?void 0:s.body)?new DataView(s.body.buffer):s==null?void 0:s.body;return{method:e,path:r,...s,body:a}}))}getAPIList(e,r,n){return this.requestAPIList(r,{method:"get",path:e,...n})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:r=0}={}){var S;const n={...e},{method:s,path:a,query:o,headers:l={}}=n,c=ArrayBuffer.isView(n.body)||n.__binaryRequest&&typeof n.body=="string"?n.body:isMultipartBody(n.body)?n.body.body:n.body?JSON.stringify(n.body,null,2):null,d=this.calculateContentLength(c),p=this.buildURL(a,o);"timeout"in n&&validatePositiveInteger("timeout",n.timeout),n.timeout=n.timeout??this.timeout;const g=n.httpAgent??this.httpAgent??getDefaultAgent(p),y=n.timeout+1e3;typeof((S=g==null?void 0:g.options)==null?void 0:S.timeout)=="number"&&y>(g.options.timeout??0)&&(g.options.timeout=y),this.idempotencyHeader&&s!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const x=this.buildHeaders({options:n,headers:l,contentLength:d,retryCount:r});return{req:{method:s,...c&&{body:c},headers:x,...g&&{agent:g},signal:n.signal??null},url:p,timeout:n.timeout}}buildHeaders({options:e,headers:r,contentLength:n,retryCount:s}){const a={};n&&(a["content-length"]=n);const o=this.defaultHeaders(e);return applyHeadersMut(a,o),applyHeadersMut(a,r),isMultipartBody(e.body)&&kind!=="node"&&delete a["content-type"],getHeader(o,"x-stainless-retry-count")===void 0&&getHeader(r,"x-stainless-retry-count")===void 0&&(a["x-stainless-retry-count"]=String(s)),getHeader(o,"x-stainless-timeout")===void 0&&getHeader(r,"x-stainless-timeout")===void 0&&e.timeout&&(a["x-stainless-timeout"]=String(Math.trunc(e.timeout/1e3))),this.validateHeaders(a,r),a}async prepareOptions(e){}async prepareRequest(e,{url:r,options:n}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(r=>[...r])):{...e}:{}}makeStatusError(e,r,n,s){return APIError.generate(e,r,n,s)}request(e,r=null){return new APIPromise(this.makeRequest(e,r))}async makeRequest(e,r){var g,y;const n=await e,s=n.maxRetries??this.maxRetries;r==null&&(r=s),await this.prepareOptions(n);const{req:a,url:o,timeout:l}=this.buildRequest(n,{retryCount:s-r});if(await this.prepareRequest(a,{url:o,options:n}),debug("request",o,n,a.headers),(g=n.signal)!=null&&g.aborted)throw new APIUserAbortError;const c=new AbortController,d=await this.fetchWithTimeout(o,a,l,c).catch(castToError);if(d instanceof Error){if((y=n.signal)!=null&&y.aborted)throw new APIUserAbortError;if(r)return this.retryRequest(n,r);throw d.name==="AbortError"?new APIConnectionTimeoutError:new APIConnectionError({cause:d})}const p=createResponseHeaders(d.headers);if(!d.ok){if(r&&this.shouldRetry(d)){const P=`retrying, ${r} attempts remaining`;return debug(`response (error; ${P})`,d.status,o,p),this.retryRequest(n,r,p)}const x=await d.text().catch(P=>castToError(P).message),E=safeJSON(x),S=E?void 0:x;throw debug(`response (error; ${r?"(error; no more retries left)":"(error; not retryable)"})`,d.status,o,p,S),this.makeStatusError(d.status,E,S,p)}return{response:d,options:n,controller:c}}requestAPIList(e,r){const n=this.makeRequest(r,null);return new PagePromise(this,n,e)}buildURL(e,r){const n=isAbsoluteURL(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),s=this.defaultQuery();return isEmptyObj$1(s)||(r={...s,...r}),typeof r=="object"&&r&&!Array.isArray(r)&&(n.search=this.stringifyQuery(r)),n.toString()}stringifyQuery(e){return Object.entries(e).filter(([r,n])=>typeof n<"u").map(([r,n])=>{if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")return`${encodeURIComponent(r)}=${encodeURIComponent(n)}`;if(n===null)return`${encodeURIComponent(r)}=`;throw new OpenAIError(`Cannot stringify type ${typeof n}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,r,n,s){const{signal:a,...o}=r||{};a&&a.addEventListener("abort",()=>s.abort());const l=setTimeout(()=>s.abort(),n),c={signal:s.signal,...o};return c.method&&(c.method=c.method.toUpperCase()),this.fetch.call(void 0,e,c).finally(()=>{clearTimeout(l)})}shouldRetry(e){const r=e.headers.get("x-should-retry");return r==="true"?!0:r==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,r,n){let s;const a=n==null?void 0:n["retry-after-ms"];if(a){const l=parseFloat(a);Number.isNaN(l)||(s=l)}const o=n==null?void 0:n["retry-after"];if(o&&!s){const l=parseFloat(o);Number.isNaN(l)?s=Date.parse(o)-Date.now():s=l*1e3}if(!(s&&0<=s&&s<60*1e3)){const l=e.maxRetries??this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(r,l)}return await sleep(s),this.makeRequest(e,r-1)}calculateDefaultRetryTimeoutMillis(e,r){const a=r-e,o=Math.min(.5*Math.pow(2,a),8),l=1-Math.random()*.25;return o*l*1e3}getUserAgent(){return`${this.constructor.name}/JS ${VERSION}`}}class AbstractPage{constructor(e,r,n,s){_AbstractPage_client.set(this,void 0),__classPrivateFieldSet$4(this,_AbstractPage_client,e),this.options=s,this.response=r,this.body=n}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new OpenAIError("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const r={...this.options};if("params"in e&&typeof r.query=="object")r.query={...r.query,...e.params};else if("url"in e){const n=[...Object.entries(r.query||{}),...e.url.searchParams.entries()];for(const[s,a]of n)e.url.searchParams.set(s,a);r.query=void 0,r.path=e.url.toString()}return await __classPrivateFieldGet$5(this,_AbstractPage_client,"f").requestAPIList(this.constructor,r)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(_AbstractPage_client=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const r of e.getPaginatedItems())yield r}}class PagePromise extends APIPromise{constructor(e,r,n){super(r,async s=>new n(e,s.response,await defaultParseResponse(s),s.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const r of e)yield r}}const createResponseHeaders=t=>new Proxy(Object.fromEntries(t.entries()),{get(e,r){const n=r.toString();return e[n.toLowerCase()]||e[n]}}),requestOptionsKeys={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},isRequestOptions=t=>typeof t=="object"&&t!==null&&!isEmptyObj$1(t)&&Object.keys(t).every(e=>hasOwn(requestOptionsKeys,e)),getPlatformProperties=()=>{var e;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":normalizePlatform(Deno.build.os),"X-Stainless-Arch":normalizeArch(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((e=Deno.version)==null?void 0:e.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":normalizePlatform(process.platform),"X-Stainless-Arch":normalizeArch(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const t=getBrowserInfo();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function getBrowserInfo(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:r}of t){const n=r.exec(navigator.userAgent);if(n){const s=n[1]||0,a=n[2]||0,o=n[3]||0;return{browser:e,version:`${s}.${a}.${o}`}}}return null}const normalizeArch=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",normalizePlatform=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let _platformHeaders;const getPlatformHeaders=()=>_platformHeaders??(_platformHeaders=getPlatformProperties()),safeJSON=t=>{try{return JSON.parse(t)}catch{return}},startsWithSchemeRegexp=/^[a-z][a-z0-9+.-]*:/i,isAbsoluteURL=t=>startsWithSchemeRegexp.test(t),sleep=t=>new Promise(e=>setTimeout(e,t)),validatePositiveInteger=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new OpenAIError(`${t} must be an integer`);if(e<0)throw new OpenAIError(`${t} must be a positive integer`);return e},castToError=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null)try{return new Error(JSON.stringify(t))}catch{}return new Error(t)},readEnv=t=>{var e,r,n,s;if(typeof process<"u")return((e=define_process_env_default==null?void 0:define_process_env_default[t])==null?void 0:e.trim())??void 0;if(typeof Deno<"u")return(s=(n=(r=Deno.env)==null?void 0:r.get)==null?void 0:n.call(r,t))==null?void 0:s.trim()};function isEmptyObj$1(t){if(!t)return!0;for(const e in t)return!1;return!0}function hasOwn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function applyHeadersMut(t,e){for(const r in e){if(!hasOwn(e,r))continue;const n=r.toLowerCase();if(!n)continue;const s=e[r];s===null?delete t[n]:s!==void 0&&(t[n]=s)}}const SENSITIVE_HEADERS=new Set(["authorization","api-key"]);function debug(t,...e){if(typeof process<"u"&&(define_process_env_default==null?void 0:define_process_env_default.DEBUG)==="true"){const r=e.map(n=>{if(!n)return n;if(n.headers){const a={...n,headers:{...n.headers}};for(const o in n.headers)SENSITIVE_HEADERS.has(o.toLowerCase())&&(a.headers[o]="REDACTED");return a}let s=null;for(const a in n)SENSITIVE_HEADERS.has(a.toLowerCase())&&(s??(s={...n}),s[a]="REDACTED");return s??n});console.log(`OpenAI:DEBUG:${t}`,...r)}}const uuid4=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)}),isRunningInBrowser=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",isHeadersProtocol=t=>typeof(t==null?void 0:t.get)=="function",getHeader=(t,e)=>{var n;const r=e.toLowerCase();if(isHeadersProtocol(t)){const s=((n=e[0])==null?void 0:n.toUpperCase())+e.substring(1).replace(/([^\w])(\w)/g,(a,o,l)=>o+l.toUpperCase());for(const a of[e,r,e.toUpperCase(),s]){const o=t.get(a);if(o)return o}}for(const[s,a]of Object.entries(t))if(s.toLowerCase()===r)return Array.isArray(a)?(a.length<=1||console.warn(`Received ${a.length} entries for the ${e} header, using the first entry.`),a[0]):a},toFloat32Array=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),r=e.length,n=new Uint8Array(r);for(let s=0;s<r;s++)n[s]=e.charCodeAt(s);return Array.from(new Float32Array(n.buffer))}};function isObj(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}class Page extends AbstractPage{constructor(e,r,n,s){super(e,r,n,s),this.data=n.data||[],this.object=n.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class CursorPage extends AbstractPage{constructor(e,r,n,s){super(e,r,n,s),this.data=n.data||[],this.has_more=n.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const r=Object.fromEntries(e.url.searchParams);return Object.keys(r).length?r:null}nextPageInfo(){var n;const e=this.getPaginatedItems();if(!e.length)return null;const r=(n=e[e.length-1])==null?void 0:n.id;return r?{params:{after:r}}:null}}class APIResource{constructor(e){this._client=e}}let Messages$1=class extends APIResource{list(e,r={},n){return isRequestOptions(r)?this.list(e,{},r):this._client.getAPIList(`/chat/completions/${e}/messages`,ChatCompletionStoreMessagesPage,{query:r,...n})}},Completions$2=class extends APIResource{constructor(){super(...arguments),this.messages=new Messages$1(this._client)}create(e,r){return this._client.post("/chat/completions",{body:e,...r,stream:e.stream??!1})}retrieve(e,r){return this._client.get(`/chat/completions/${e}`,r)}update(e,r,n){return this._client.post(`/chat/completions/${e}`,{body:r,...n})}list(e={},r){return isRequestOptions(e)?this.list({},e):this._client.getAPIList("/chat/completions",ChatCompletionsPage,{query:e,...r})}del(e,r){return this._client.delete(`/chat/completions/${e}`,r)}};class ChatCompletionsPage extends CursorPage{}class ChatCompletionStoreMessagesPage extends CursorPage{}Completions$2.ChatCompletionsPage=ChatCompletionsPage;Completions$2.Messages=Messages$1;let Chat$1=class extends APIResource{constructor(){super(...arguments),this.completions=new Completions$2(this._client)}};Chat$1.Completions=Completions$2;Chat$1.ChatCompletionsPage=ChatCompletionsPage;class Speech extends APIResource{create(e,r){return this._client.post("/audio/speech",{body:e,...r,headers:{Accept:"application/octet-stream",...r==null?void 0:r.headers},__binaryResponse:!0})}}class Transcriptions extends APIResource{create(e,r){return this._client.post("/audio/transcriptions",multipartFormRequestOptions({body:e,...r,stream:e.stream??!1,__metadata:{model:e.model}}))}}class Translations extends APIResource{create(e,r){return this._client.post("/audio/translations",multipartFormRequestOptions({body:e,...r,__metadata:{model:e.model}}))}}class Audio extends APIResource{constructor(){super(...arguments),this.transcriptions=new Transcriptions(this._client),this.translations=new Translations(this._client),this.speech=new Speech(this._client)}}Audio.Transcriptions=Transcriptions;Audio.Translations=Translations;Audio.Speech=Speech;class Batches extends APIResource{create(e,r){return this._client.post("/batches",{body:e,...r})}retrieve(e,r){return this._client.get(`/batches/${e}`,r)}list(e={},r){return isRequestOptions(e)?this.list({},e):this._client.getAPIList("/batches",BatchesPage,{query:e,...r})}cancel(e,r){return this._client.post(`/batches/${e}/cancel`,r)}}class BatchesPage extends CursorPage{}Batches.BatchesPage=BatchesPage;var __classPrivateFieldSet$3=function(t,e,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r},__classPrivateFieldGet$4=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},_EventStream_instances,_EventStream_connectedPromise,_EventStream_resolveConnectedPromise,_EventStream_rejectConnectedPromise,_EventStream_endPromise,_EventStream_resolveEndPromise,_EventStream_rejectEndPromise,_EventStream_listeners,_EventStream_ended,_EventStream_errored,_EventStream_aborted,_EventStream_catchingPromiseCreated,_EventStream_handleError;class EventStream{constructor(){_EventStream_instances.add(this),this.controller=new AbortController,_EventStream_connectedPromise.set(this,void 0),_EventStream_resolveConnectedPromise.set(this,()=>{}),_EventStream_rejectConnectedPromise.set(this,()=>{}),_EventStream_endPromise.set(this,void 0),_EventStream_resolveEndPromise.set(this,()=>{}),_EventStream_rejectEndPromise.set(this,()=>{}),_EventStream_listeners.set(this,{}),_EventStream_ended.set(this,!1),_EventStream_errored.set(this,!1),_EventStream_aborted.set(this,!1),_EventStream_catchingPromiseCreated.set(this,!1),__classPrivateFieldSet$3(this,_EventStream_connectedPromise,new Promise((e,r)=>{__classPrivateFieldSet$3(this,_EventStream_resolveConnectedPromise,e,"f"),__classPrivateFieldSet$3(this,_EventStream_rejectConnectedPromise,r,"f")}),"f"),__classPrivateFieldSet$3(this,_EventStream_endPromise,new Promise((e,r)=>{__classPrivateFieldSet$3(this,_EventStream_resolveEndPromise,e,"f"),__classPrivateFieldSet$3(this,_EventStream_rejectEndPromise,r,"f")}),"f"),__classPrivateFieldGet$4(this,_EventStream_connectedPromise,"f").catch(()=>{}),__classPrivateFieldGet$4(this,_EventStream_endPromise,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},__classPrivateFieldGet$4(this,_EventStream_instances,"m",_EventStream_handleError).bind(this))},0)}_connected(){this.ended||(__classPrivateFieldGet$4(this,_EventStream_resolveConnectedPromise,"f").call(this),this._emit("connect"))}get ended(){return __classPrivateFieldGet$4(this,_EventStream_ended,"f")}get errored(){return __classPrivateFieldGet$4(this,_EventStream_errored,"f")}get aborted(){return __classPrivateFieldGet$4(this,_EventStream_aborted,"f")}abort(){this.controller.abort()}on(e,r){return(__classPrivateFieldGet$4(this,_EventStream_listeners,"f")[e]||(__classPrivateFieldGet$4(this,_EventStream_listeners,"f")[e]=[])).push({listener:r}),this}off(e,r){const n=__classPrivateFieldGet$4(this,_EventStream_listeners,"f")[e];if(!n)return this;const s=n.findIndex(a=>a.listener===r);return s>=0&&n.splice(s,1),this}once(e,r){return(__classPrivateFieldGet$4(this,_EventStream_listeners,"f")[e]||(__classPrivateFieldGet$4(this,_EventStream_listeners,"f")[e]=[])).push({listener:r,once:!0}),this}emitted(e){return new Promise((r,n)=>{__classPrivateFieldSet$3(this,_EventStream_catchingPromiseCreated,!0,"f"),e!=="error"&&this.once("error",n),this.once(e,r)})}async done(){__classPrivateFieldSet$3(this,_EventStream_catchingPromiseCreated,!0,"f"),await __classPrivateFieldGet$4(this,_EventStream_endPromise,"f")}_emit(e,...r){if(__classPrivateFieldGet$4(this,_EventStream_ended,"f"))return;e==="end"&&(__classPrivateFieldSet$3(this,_EventStream_ended,!0,"f"),__classPrivateFieldGet$4(this,_EventStream_resolveEndPromise,"f").call(this));const n=__classPrivateFieldGet$4(this,_EventStream_listeners,"f")[e];if(n&&(__classPrivateFieldGet$4(this,_EventStream_listeners,"f")[e]=n.filter(s=>!s.once),n.forEach(({listener:s})=>s(...r))),e==="abort"){const s=r[0];!__classPrivateFieldGet$4(this,_EventStream_catchingPromiseCreated,"f")&&!(n!=null&&n.length)&&Promise.reject(s),__classPrivateFieldGet$4(this,_EventStream_rejectConnectedPromise,"f").call(this,s),__classPrivateFieldGet$4(this,_EventStream_rejectEndPromise,"f").call(this,s),this._emit("end");return}if(e==="error"){const s=r[0];!__classPrivateFieldGet$4(this,_EventStream_catchingPromiseCreated,"f")&&!(n!=null&&n.length)&&Promise.reject(s),__classPrivateFieldGet$4(this,_EventStream_rejectConnectedPromise,"f").call(this,s),__classPrivateFieldGet$4(this,_EventStream_rejectEndPromise,"f").call(this,s),this._emit("end")}}_emitFinal(){}}_EventStream_connectedPromise=new WeakMap,_EventStream_resolveConnectedPromise=new WeakMap,_EventStream_rejectConnectedPromise=new WeakMap,_EventStream_endPromise=new WeakMap,_EventStream_resolveEndPromise=new WeakMap,_EventStream_rejectEndPromise=new WeakMap,_EventStream_listeners=new WeakMap,_EventStream_ended=new WeakMap,_EventStream_errored=new WeakMap,_EventStream_aborted=new WeakMap,_EventStream_catchingPromiseCreated=new WeakMap,_EventStream_instances=new WeakSet,_EventStream_handleError=function t(e){if(__classPrivateFieldSet$3(this,_EventStream_errored,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new APIUserAbortError),e instanceof APIUserAbortError)return __classPrivateFieldSet$3(this,_EventStream_aborted,!0,"f"),this._emit("abort",e);if(e instanceof OpenAIError)return this._emit("error",e);if(e instanceof Error){const r=new OpenAIError(e.message);return r.cause=e,this._emit("error",r)}return this._emit("error",new OpenAIError(String(e)))};var __classPrivateFieldGet$3=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},__classPrivateFieldSet$2=function(t,e,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r},_AssistantStream_instances,_AssistantStream_events,_AssistantStream_runStepSnapshots,_AssistantStream_messageSnapshots,_AssistantStream_messageSnapshot,_AssistantStream_finalRun,_AssistantStream_currentContentIndex,_AssistantStream_currentContent,_AssistantStream_currentToolCallIndex,_AssistantStream_currentToolCall,_AssistantStream_currentEvent,_AssistantStream_currentRunSnapshot,_AssistantStream_currentRunStepSnapshot,_AssistantStream_addEvent,_AssistantStream_endRequest,_AssistantStream_handleMessage,_AssistantStream_handleRunStep,_AssistantStream_handleEvent,_AssistantStream_accumulateRunStep,_AssistantStream_accumulateMessage,_AssistantStream_accumulateContent,_AssistantStream_handleRun;class AssistantStream extends EventStream{constructor(){super(...arguments),_AssistantStream_instances.add(this),_AssistantStream_events.set(this,[]),_AssistantStream_runStepSnapshots.set(this,{}),_AssistantStream_messageSnapshots.set(this,{}),_AssistantStream_messageSnapshot.set(this,void 0),_AssistantStream_finalRun.set(this,void 0),_AssistantStream_currentContentIndex.set(this,void 0),_AssistantStream_currentContent.set(this,void 0),_AssistantStream_currentToolCallIndex.set(this,void 0),_AssistantStream_currentToolCall.set(this,void 0),_AssistantStream_currentEvent.set(this,void 0),_AssistantStream_currentRunSnapshot.set(this,void 0),_AssistantStream_currentRunStepSnapshot.set(this,void 0)}[(_AssistantStream_events=new WeakMap,_AssistantStream_runStepSnapshots=new WeakMap,_AssistantStream_messageSnapshots=new WeakMap,_AssistantStream_messageSnapshot=new WeakMap,_AssistantStream_finalRun=new WeakMap,_AssistantStream_currentContentIndex=new WeakMap,_AssistantStream_currentContent=new WeakMap,_AssistantStream_currentToolCallIndex=new WeakMap,_AssistantStream_currentToolCall=new WeakMap,_AssistantStream_currentEvent=new WeakMap,_AssistantStream_currentRunSnapshot=new WeakMap,_AssistantStream_currentRunStepSnapshot=new WeakMap,_AssistantStream_instances=new WeakSet,Symbol.asyncIterator)](){const e=[],r=[];let n=!1;return this.on("event",s=>{const a=r.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{n=!0;for(const s of r)s.resolve(void 0);r.length=0}),this.on("abort",s=>{n=!0;for(const a of r)a.reject(s);r.length=0}),this.on("error",s=>{n=!0;for(const a of r)a.reject(s);r.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((a,o)=>r.push({resolve:a,reject:o})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const r=new AssistantStream;return r._run(()=>r._fromReadableStream(e)),r}async _fromReadableStream(e,r){var a;const n=r==null?void 0:r.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),this._connected();const s=Stream.fromReadableStream(e,this.controller);for await(const o of s)__classPrivateFieldGet$3(this,_AssistantStream_instances,"m",_AssistantStream_addEvent).call(this,o);if((a=s.controller.signal)!=null&&a.aborted)throw new APIUserAbortError;return this._addRun(__classPrivateFieldGet$3(this,_AssistantStream_instances,"m",_AssistantStream_endRequest).call(this))}toReadableStream(){return new Stream(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,r,n,s,a){const o=new AssistantStream;return o._run(()=>o._runToolAssistantStream(e,r,n,s,{...a,headers:{...a==null?void 0:a.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createToolAssistantStream(e,r,n,s,a){var d;const o=a==null?void 0:a.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const l={...s,stream:!0},c=await e.submitToolOutputs(r,n,l,{...a,signal:this.controller.signal});this._connected();for await(const p of c)__classPrivateFieldGet$3(this,_AssistantStream_instances,"m",_AssistantStream_addEvent).call(this,p);if((d=c.controller.signal)!=null&&d.aborted)throw new APIUserAbortError;return this._addRun(__classPrivateFieldGet$3(this,_AssistantStream_instances,"m",_AssistantStream_endRequest).call(this))}static createThreadAssistantStream(e,r,n){const s=new AssistantStream;return s._run(()=>s._threadAssistantStream(e,r,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),s}static createAssistantStream(e,r,n,s){const a=new AssistantStream;return a._run(()=>a._runAssistantStream(e,r,n,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return __classPrivateFieldGet$3(this,_AssistantStream_currentEvent,"f")}currentRun(){return __classPrivateFieldGet$3(this,_AssistantStream_currentRunSnapshot,"f")}currentMessageSnapshot(){return __classPrivateFieldGet$3(this,_AssistantStream_messageSnapshot,"f")}currentRunStepSnapshot(){return __classPrivateFieldGet$3(this,_AssistantStream_currentRunStepSnapshot,"f")}async finalRunSteps(){return await this.done(),Object.values(__classPrivateFieldGet$3(this,_AssistantStream_runStepSnapshots,"f"))}async finalMessages(){return await this.done(),Object.values(__classPrivateFieldGet$3(this,_AssistantStream_messageSnapshots,"f"))}async finalRun(){if(await this.done(),!__classPrivateFieldGet$3(this,_AssistantStream_finalRun,"f"))throw Error("Final run was not received.");return __classPrivateFieldGet$3(this,_AssistantStream_finalRun,"f")}async _createThreadAssistantStream(e,r,n){var l;const s=n==null?void 0:n.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const a={...r,stream:!0},o=await e.createAndRun(a,{...n,signal:this.controller.signal});this._connected();for await(const c of o)__classPrivateFieldGet$3(this,_AssistantStream_instances,"m",_AssistantStream_addEvent).call(this,c);if((l=o.controller.signal)!=null&&l.aborted)throw new APIUserAbortError;return this._addRun(__classPrivateFieldGet$3(this,_AssistantStream_instances,"m",_AssistantStream_endRequest).call(this))}async _createAssistantStream(e,r,n,s){var c;const a=s==null?void 0:s.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const o={...n,stream:!0},l=await e.create(r,o,{...s,signal:this.controller.signal});this._connected();for await(const d of l)__classPrivateFieldGet$3(this,_AssistantStream_instances,"m",_AssistantStream_addEvent).call(this,d);if((c=l.controller.signal)!=null&&c.aborted)throw new APIUserAbortError;return this._addRun(__classPrivateFieldGet$3(this,_AssistantStream_instances,"m",_AssistantStream_endRequest).call(this))}static accumulateDelta(e,r){for(const[n,s]of Object.entries(r)){if(!e.hasOwnProperty(n)){e[n]=s;continue}let a=e[n];if(a==null){e[n]=s;continue}if(n==="index"||n==="type"){e[n]=s;continue}if(typeof a=="string"&&typeof s=="string")a+=s;else if(typeof a=="number"&&typeof s=="number")a+=s;else if(isObj(a)&&isObj(s))a=this.accumulateDelta(a,s);else if(Array.isArray(a)&&Array.isArray(s)){if(a.every(o=>typeof o=="string"||typeof o=="number")){a.push(...s);continue}for(const o of s){if(!isObj(o))throw new Error(`Expected array delta entry to be an object but got: ${o}`);const l=o.index;if(l==null)throw console.error(o),new Error("Expected array delta entry to have an `index` property");if(typeof l!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${l}`);const c=a[l];c==null?a.push(o):a[l]=this.accumulateDelta(c,o)}continue}else throw Error(`Unhandled record type: ${n}, deltaValue: ${s}, accValue: ${a}`);e[n]=a}return e}_addRun(e){return e}async _threadAssistantStream(e,r,n){return await this._createThreadAssistantStream(r,e,n)}async _runAssistantStream(e,r,n,s){return await this._createAssistantStream(r,e,n,s)}async _runToolAssistantStream(e,r,n,s,a){return await this._createToolAssistantStream(n,e,r,s,a)}}_AssistantStream_addEvent=function t(e){if(!this.ended)switch(__classPrivateFieldSet$2(this,_AssistantStream_currentEvent,e,"f"),__classPrivateFieldGet$3(this,_AssistantStream_instances,"m",_AssistantStream_handleEvent).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":__classPrivateFieldGet$3(this,_AssistantStream_instances,"m",_AssistantStream_handleRun).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":__classPrivateFieldGet$3(this,_AssistantStream_instances,"m",_AssistantStream_handleRunStep).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":__classPrivateFieldGet$3(this,_AssistantStream_instances,"m",_AssistantStream_handleMessage).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},_AssistantStream_endRequest=function t(){if(this.ended)throw new OpenAIError("stream has ended, this shouldn't happen");if(!__classPrivateFieldGet$3(this,_AssistantStream_finalRun,"f"))throw Error("Final run has not been received");return __classPrivateFieldGet$3(this,_AssistantStream_finalRun,"f")},_AssistantStream_handleMessage=function t(e){const[r,n]=__classPrivateFieldGet$3(this,_AssistantStream_instances,"m",_AssistantStream_accumulateMessage).call(this,e,__classPrivateFieldGet$3(this,_AssistantStream_messageSnapshot,"f"));__classPrivateFieldSet$2(this,_AssistantStream_messageSnapshot,r,"f"),__classPrivateFieldGet$3(this,_AssistantStream_messageSnapshots,"f")[r.id]=r;for(const s of n){const a=r.content[s.index];(a==null?void 0:a.type)=="text"&&this._emit("textCreated",a.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,r),e.data.delta.content)for(const s of e.data.delta.content){if(s.type=="text"&&s.text){let a=s.text,o=r.content[s.index];if(o&&o.type=="text")this._emit("textDelta",a,o.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(s.index!=__classPrivateFieldGet$3(this,_AssistantStream_currentContentIndex,"f")){if(__classPrivateFieldGet$3(this,_AssistantStream_currentContent,"f"))switch(__classPrivateFieldGet$3(this,_AssistantStream_currentContent,"f").type){case"text":this._emit("textDone",__classPrivateFieldGet$3(this,_AssistantStream_currentContent,"f").text,__classPrivateFieldGet$3(this,_AssistantStream_messageSnapshot,"f"));break;case"image_file":this._emit("imageFileDone",__classPrivateFieldGet$3(this,_AssistantStream_currentContent,"f").image_file,__classPrivateFieldGet$3(this,_AssistantStream_messageSnapshot,"f"));break}__classPrivateFieldSet$2(this,_AssistantStream_currentContentIndex,s.index,"f")}__classPrivateFieldSet$2(this,_AssistantStream_currentContent,r.content[s.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(__classPrivateFieldGet$3(this,_AssistantStream_currentContentIndex,"f")!==void 0){const s=e.data.content[__classPrivateFieldGet$3(this,_AssistantStream_currentContentIndex,"f")];if(s)switch(s.type){case"image_file":this._emit("imageFileDone",s.image_file,__classPrivateFieldGet$3(this,_AssistantStream_messageSnapshot,"f"));break;case"text":this._emit("textDone",s.text,__classPrivateFieldGet$3(this,_AssistantStream_messageSnapshot,"f"));break}}__classPrivateFieldGet$3(this,_AssistantStream_messageSnapshot,"f")&&this._emit("messageDone",e.data),__classPrivateFieldSet$2(this,_AssistantStream_messageSnapshot,void 0,"f")}},_AssistantStream_handleRunStep=function t(e){const r=__classPrivateFieldGet$3(this,_AssistantStream_instances,"m",_AssistantStream_accumulateRunStep).call(this,e);switch(__classPrivateFieldSet$2(this,_AssistantStream_currentRunStepSnapshot,r,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const n=e.data.delta;if(n.step_details&&n.step_details.type=="tool_calls"&&n.step_details.tool_calls&&r.step_details.type=="tool_calls")for(const a of n.step_details.tool_calls)a.index==__classPrivateFieldGet$3(this,_AssistantStream_currentToolCallIndex,"f")?this._emit("toolCallDelta",a,r.step_details.tool_calls[a.index]):(__classPrivateFieldGet$3(this,_AssistantStream_currentToolCall,"f")&&this._emit("toolCallDone",__classPrivateFieldGet$3(this,_AssistantStream_currentToolCall,"f")),__classPrivateFieldSet$2(this,_AssistantStream_currentToolCallIndex,a.index,"f"),__classPrivateFieldSet$2(this,_AssistantStream_currentToolCall,r.step_details.tool_calls[a.index],"f"),__classPrivateFieldGet$3(this,_AssistantStream_currentToolCall,"f")&&this._emit("toolCallCreated",__classPrivateFieldGet$3(this,_AssistantStream_currentToolCall,"f")));this._emit("runStepDelta",e.data.delta,r);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":__classPrivateFieldSet$2(this,_AssistantStream_currentRunStepSnapshot,void 0,"f"),e.data.step_details.type=="tool_calls"&&__classPrivateFieldGet$3(this,_AssistantStream_currentToolCall,"f")&&(this._emit("toolCallDone",__classPrivateFieldGet$3(this,_AssistantStream_currentToolCall,"f")),__classPrivateFieldSet$2(this,_AssistantStream_currentToolCall,void 0,"f")),this._emit("runStepDone",e.data,r);break}},_AssistantStream_handleEvent=function t(e){__classPrivateFieldGet$3(this,_AssistantStream_events,"f").push(e),this._emit("event",e)},_AssistantStream_accumulateRunStep=function t(e){switch(e.event){case"thread.run.step.created":return __classPrivateFieldGet$3(this,_AssistantStream_runStepSnapshots,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let r=__classPrivateFieldGet$3(this,_AssistantStream_runStepSnapshots,"f")[e.data.id];if(!r)throw Error("Received a RunStepDelta before creation of a snapshot");let n=e.data;if(n.delta){const s=AssistantStream.accumulateDelta(r,n.delta);__classPrivateFieldGet$3(this,_AssistantStream_runStepSnapshots,"f")[e.data.id]=s}return __classPrivateFieldGet$3(this,_AssistantStream_runStepSnapshots,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":__classPrivateFieldGet$3(this,_AssistantStream_runStepSnapshots,"f")[e.data.id]=e.data;break}if(__classPrivateFieldGet$3(this,_AssistantStream_runStepSnapshots,"f")[e.data.id])return __classPrivateFieldGet$3(this,_AssistantStream_runStepSnapshots,"f")[e.data.id];throw new Error("No snapshot available")},_AssistantStream_accumulateMessage=function t(e,r){let n=[];switch(e.event){case"thread.message.created":return[e.data,n];case"thread.message.delta":if(!r)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let s=e.data;if(s.delta.content)for(const a of s.delta.content)if(a.index in r.content){let o=r.content[a.index];r.content[a.index]=__classPrivateFieldGet$3(this,_AssistantStream_instances,"m",_AssistantStream_accumulateContent).call(this,a,o)}else r.content[a.index]=a,n.push(a);return[r,n];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(r)return[r,n];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},_AssistantStream_accumulateContent=function t(e,r){return AssistantStream.accumulateDelta(r,e)},_AssistantStream_handleRun=function t(e){switch(__classPrivateFieldSet$2(this,_AssistantStream_currentRunSnapshot,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":__classPrivateFieldSet$2(this,_AssistantStream_finalRun,e.data,"f"),__classPrivateFieldGet$3(this,_AssistantStream_currentToolCall,"f")&&(this._emit("toolCallDone",__classPrivateFieldGet$3(this,_AssistantStream_currentToolCall,"f")),__classPrivateFieldSet$2(this,_AssistantStream_currentToolCall,void 0,"f"));break}};class Assistants extends APIResource{create(e,r){return this._client.post("/assistants",{body:e,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,r){return this._client.get(`/assistants/${e}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,r,n){return this._client.post(`/assistants/${e}`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}list(e={},r){return isRequestOptions(e)?this.list({},e):this._client.getAPIList("/assistants",AssistantsPage,{query:e,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,r){return this._client.delete(`/assistants/${e}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class AssistantsPage extends CursorPage{}Assistants.AssistantsPage=AssistantsPage;function isRunnableFunctionWithParse(t){return typeof t.parse=="function"}const isAssistantMessage=t=>(t==null?void 0:t.role)==="assistant",isFunctionMessage=t=>(t==null?void 0:t.role)==="function",isToolMessage=t=>(t==null?void 0:t.role)==="tool";function makeParseableResponseFormat(t,e){const r={...t};return Object.defineProperties(r,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:e,enumerable:!1}}),r}function isAutoParsableResponseFormat(t){return(t==null?void 0:t.$brand)==="auto-parseable-response-format"}function isAutoParsableTool$1(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function maybeParseChatCompletion(t,e){return!e||!hasAutoParseableInput$1(e)?{...t,choices:t.choices.map(r=>({...r,message:{...r.message,parsed:null,...r.message.tool_calls?{tool_calls:r.message.tool_calls}:void 0}}))}:parseChatCompletion(t,e)}function parseChatCompletion(t,e){const r=t.choices.map(n=>{var s;if(n.finish_reason==="length")throw new LengthFinishReasonError;if(n.finish_reason==="content_filter")throw new ContentFilterFinishReasonError;return{...n,message:{...n.message,...n.message.tool_calls?{tool_calls:((s=n.message.tool_calls)==null?void 0:s.map(a=>parseToolCall$2(e,a)))??void 0}:void 0,parsed:n.message.content&&!n.message.refusal?parseResponseFormat(e,n.message.content):null}}});return{...t,choices:r}}function parseResponseFormat(t,e){var r,n;return((r=t.response_format)==null?void 0:r.type)!=="json_schema"?null:((n=t.response_format)==null?void 0:n.type)==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function parseToolCall$2(t,e){var n;const r=(n=t.tools)==null?void 0:n.find(s=>{var a;return((a=s.function)==null?void 0:a.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:isAutoParsableTool$1(r)?r.$parseRaw(e.function.arguments):r!=null&&r.function.strict?JSON.parse(e.function.arguments):null}}}function shouldParseToolCall(t,e){var n;if(!t)return!1;const r=(n=t.tools)==null?void 0:n.find(s=>{var a;return((a=s.function)==null?void 0:a.name)===e.function.name});return isAutoParsableTool$1(r)||(r==null?void 0:r.function.strict)||!1}function hasAutoParseableInput$1(t){var e;return isAutoParsableResponseFormat(t.response_format)?!0:((e=t.tools)==null?void 0:e.some(r=>isAutoParsableTool$1(r)||r.type==="function"&&r.function.strict===!0))??!1}function validateInputTools(t){for(const e of t??[]){if(e.type!=="function")throw new OpenAIError(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new OpenAIError(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var __classPrivateFieldGet$2=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},_AbstractChatCompletionRunner_instances,_AbstractChatCompletionRunner_getFinalContent,_AbstractChatCompletionRunner_getFinalMessage,_AbstractChatCompletionRunner_getFinalFunctionCall,_AbstractChatCompletionRunner_getFinalFunctionCallResult,_AbstractChatCompletionRunner_calculateTotalUsage,_AbstractChatCompletionRunner_validateParams,_AbstractChatCompletionRunner_stringifyFunctionCallResult;const DEFAULT_MAX_CHAT_COMPLETIONS=10;class AbstractChatCompletionRunner extends EventStream{constructor(){super(...arguments),_AbstractChatCompletionRunner_instances.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var n;this._chatCompletions.push(e),this._emit("chatCompletion",e);const r=(n=e.choices[0])==null?void 0:n.message;return r&&this._addMessage(r),e}_addMessage(e,r=!0){if("content"in e||(e.content=null),this.messages.push(e),r){if(this._emit("message",e),(isFunctionMessage(e)||isToolMessage(e))&&e.content)this._emit("functionCallResult",e.content);else if(isAssistantMessage(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(isAssistantMessage(e)&&e.tool_calls)for(const n of e.tool_calls)n.type==="function"&&this._emit("functionCall",n.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new OpenAIError("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalContent).call(this)}async finalMessage(){return await this.done(),__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalMessage).call(this)}async finalFunctionCall(){return await this.done(),__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalFunctionCall).call(this)}async finalFunctionCallResult(){return await this.done(),__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalFunctionCallResult).call(this)}async totalUsage(){return await this.done(),__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_calculateTotalUsage).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const r=__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalMessage).call(this);r&&this._emit("finalMessage",r);const n=__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalContent).call(this);n&&this._emit("finalContent",n);const s=__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalFunctionCall).call(this);s&&this._emit("finalFunctionCall",s);const a=__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalFunctionCallResult).call(this);a!=null&&this._emit("finalFunctionCallResult",a),this._chatCompletions.some(o=>o.usage)&&this._emit("totalUsage",__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_calculateTotalUsage).call(this))}async _createChatCompletion(e,r,n){const s=n==null?void 0:n.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_validateParams).call(this,r);const a=await e.chat.completions.create({...r,stream:!1},{...n,signal:this.controller.signal});return this._connected(),this._addChatCompletion(parseChatCompletion(a,r))}async _runChatCompletion(e,r,n){for(const s of r.messages)this._addMessage(s,!1);return await this._createChatCompletion(e,r,n)}async _runFunctions(e,r,n){var y;const s="function",{function_call:a="auto",stream:o,...l}=r,c=typeof a!="string"&&(a==null?void 0:a.name),{maxChatCompletions:d=DEFAULT_MAX_CHAT_COMPLETIONS}=n||{},p={};for(const x of r.functions)p[x.name||x.function.name]=x;const g=r.functions.map(x=>({name:x.name||x.function.name,parameters:x.parameters,description:x.description}));for(const x of r.messages)this._addMessage(x,!1);for(let x=0;x<d;++x){const S=(y=(await this._createChatCompletion(e,{...l,function_call:a,functions:g,messages:[...this.messages]},n)).choices[0])==null?void 0:y.message;if(!S)throw new OpenAIError("missing message in ChatCompletion response");if(!S.function_call)return;const{name:k,arguments:C}=S.function_call,P=p[k];if(P){if(c&&c!==k){const O=`Invalid function_call: ${JSON.stringify(k)}. ${JSON.stringify(c)} requested. Please try again`;this._addMessage({role:s,name:k,content:O});continue}}else{const O=`Invalid function_call: ${JSON.stringify(k)}. Available options are: ${g.map(L=>JSON.stringify(L.name)).join(", ")}. Please try again`;this._addMessage({role:s,name:k,content:O});continue}let R;try{R=isRunnableFunctionWithParse(P)?await P.parse(C):C}catch(O){this._addMessage({role:s,name:k,content:O instanceof Error?O.message:String(O)});continue}const j=await P.function(R,this),I=__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_stringifyFunctionCallResult).call(this,j);if(this._addMessage({role:s,name:k,content:I}),c)return}}async _runTools(e,r,n){var x,E,S;const s="tool",{tool_choice:a="auto",stream:o,...l}=r,c=typeof a!="string"&&((x=a==null?void 0:a.function)==null?void 0:x.name),{maxChatCompletions:d=DEFAULT_MAX_CHAT_COMPLETIONS}=n||{},p=r.tools.map(k=>{if(isAutoParsableTool$1(k)){if(!k.$callback)throw new OpenAIError("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:k.$callback,name:k.function.name,description:k.function.description||"",parameters:k.function.parameters,parse:k.$parseRaw,strict:!0}}}return k}),g={};for(const k of p)k.type==="function"&&(g[k.function.name||k.function.function.name]=k.function);const y="tools"in r?p.map(k=>k.type==="function"?{type:"function",function:{name:k.function.name||k.function.function.name,parameters:k.function.parameters,description:k.function.description,strict:k.function.strict}}:k):void 0;for(const k of r.messages)this._addMessage(k,!1);for(let k=0;k<d;++k){const P=(E=(await this._createChatCompletion(e,{...l,tool_choice:a,tools:y,messages:[...this.messages]},n)).choices[0])==null?void 0:E.message;if(!P)throw new OpenAIError("missing message in ChatCompletion response");if(!((S=P.tool_calls)!=null&&S.length))return;for(const R of P.tool_calls){if(R.type!=="function")continue;const j=R.id,{name:I,arguments:O}=R.function,L=g[I];if(L){if(c&&c!==I){const ie=`Invalid tool_call: ${JSON.stringify(I)}. ${JSON.stringify(c)} requested. Please try again`;this._addMessage({role:s,tool_call_id:j,content:ie});continue}}else{const ie=`Invalid tool_call: ${JSON.stringify(I)}. Available options are: ${Object.keys(g).map(Q=>JSON.stringify(Q)).join(", ")}. Please try again`;this._addMessage({role:s,tool_call_id:j,content:ie});continue}let B;try{B=isRunnableFunctionWithParse(L)?await L.parse(O):O}catch(ie){const Q=ie instanceof Error?ie.message:String(ie);this._addMessage({role:s,tool_call_id:j,content:Q});continue}const Z=await L.function(B,this),te=__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_stringifyFunctionCallResult).call(this,Z);if(this._addMessage({role:s,tool_call_id:j,content:te}),c)return}}}}_AbstractChatCompletionRunner_instances=new WeakSet,_AbstractChatCompletionRunner_getFinalContent=function t(){return __classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalMessage).call(this).content??null},_AbstractChatCompletionRunner_getFinalMessage=function t(){let e=this.messages.length;for(;e-- >0;){const r=this.messages[e];if(isAssistantMessage(r)){const{function_call:n,...s}=r,a={...s,content:r.content??null,refusal:r.refusal??null};return n&&(a.function_call=n),a}}throw new OpenAIError("stream ended without producing a ChatCompletionMessage with role=assistant")},_AbstractChatCompletionRunner_getFinalFunctionCall=function t(){var e,r;for(let n=this.messages.length-1;n>=0;n--){const s=this.messages[n];if(isAssistantMessage(s)&&(s!=null&&s.function_call))return s.function_call;if(isAssistantMessage(s)&&((e=s==null?void 0:s.tool_calls)!=null&&e.length))return(r=s.tool_calls.at(-1))==null?void 0:r.function}},_AbstractChatCompletionRunner_getFinalFunctionCallResult=function t(){for(let e=this.messages.length-1;e>=0;e--){const r=this.messages[e];if(isFunctionMessage(r)&&r.content!=null||isToolMessage(r)&&r.content!=null&&typeof r.content=="string"&&this.messages.some(n=>{var s;return n.role==="assistant"&&((s=n.tool_calls)==null?void 0:s.some(a=>a.type==="function"&&a.id===r.tool_call_id))}))return r.content}},_AbstractChatCompletionRunner_calculateTotalUsage=function t(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:r}of this._chatCompletions)r&&(e.completion_tokens+=r.completion_tokens,e.prompt_tokens+=r.prompt_tokens,e.total_tokens+=r.total_tokens);return e},_AbstractChatCompletionRunner_validateParams=function t(e){if(e.n!=null&&e.n>1)throw new OpenAIError("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},_AbstractChatCompletionRunner_stringifyFunctionCallResult=function t(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class ChatCompletionRunner extends AbstractChatCompletionRunner{static runFunctions(e,r,n){const s=new ChatCompletionRunner,a={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runFunctions"}};return s._run(()=>s._runFunctions(e,r,a)),s}static runTools(e,r,n){const s=new ChatCompletionRunner,a={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,r,a)),s}_addMessage(e,r=!0){super._addMessage(e,r),isAssistantMessage(e)&&e.content&&this._emit("content",e.content)}}const STR=1,NUM=2,ARR=4,OBJ=8,NULL=16,BOOL=32,NAN=64,INFINITY=128,MINUS_INFINITY=256,INF=INFINITY|MINUS_INFINITY,SPECIAL=NULL|BOOL|INF|NAN,ATOM=STR|NUM|SPECIAL,COLLECTION=ARR|OBJ,ALL=ATOM|COLLECTION,Allow={STR,NUM,ARR,OBJ,NULL,BOOL,NAN,INFINITY,MINUS_INFINITY,INF,SPECIAL,ATOM,COLLECTION,ALL};class PartialJSON extends Error{}class MalformedJSON extends Error{}function parseJSON(t,e=Allow.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return _parseJSON(t.trim(),e)}const _parseJSON=(t,e)=>{const r=t.length;let n=0;const s=y=>{throw new PartialJSON(`${y} at position ${n}`)},a=y=>{throw new MalformedJSON(`${y} at position ${n}`)},o=()=>(g(),n>=r&&s("Unexpected end of input"),t[n]==='"'?l():t[n]==="{"?c():t[n]==="["?d():t.substring(n,n+4)==="null"||Allow.NULL&e&&r-n<4&&"null".startsWith(t.substring(n))?(n+=4,null):t.substring(n,n+4)==="true"||Allow.BOOL&e&&r-n<4&&"true".startsWith(t.substring(n))?(n+=4,!0):t.substring(n,n+5)==="false"||Allow.BOOL&e&&r-n<5&&"false".startsWith(t.substring(n))?(n+=5,!1):t.substring(n,n+8)==="Infinity"||Allow.INFINITY&e&&r-n<8&&"Infinity".startsWith(t.substring(n))?(n+=8,1/0):t.substring(n,n+9)==="-Infinity"||Allow.MINUS_INFINITY&e&&1<r-n&&r-n<9&&"-Infinity".startsWith(t.substring(n))?(n+=9,-1/0):t.substring(n,n+3)==="NaN"||Allow.NAN&e&&r-n<3&&"NaN".startsWith(t.substring(n))?(n+=3,NaN):p()),l=()=>{const y=n;let x=!1;for(n++;n<r&&(t[n]!=='"'||x&&t[n-1]==="\\");)x=t[n]==="\\"?!x:!1,n++;if(t.charAt(n)=='"')try{return JSON.parse(t.substring(y,++n-Number(x)))}catch(E){a(String(E))}else if(Allow.STR&e)try{return JSON.parse(t.substring(y,n-Number(x))+'"')}catch{return JSON.parse(t.substring(y,t.lastIndexOf("\\"))+'"')}s("Unterminated string literal")},c=()=>{n++,g();const y={};try{for(;t[n]!=="}";){if(g(),n>=r&&Allow.OBJ&e)return y;const x=l();g(),n++;try{const E=o();Object.defineProperty(y,x,{value:E,writable:!0,enumerable:!0,configurable:!0})}catch(E){if(Allow.OBJ&e)return y;throw E}g(),t[n]===","&&n++}}catch{if(Allow.OBJ&e)return y;s("Expected '}' at end of object")}return n++,y},d=()=>{n++;const y=[];try{for(;t[n]!=="]";)y.push(o()),g(),t[n]===","&&n++}catch{if(Allow.ARR&e)return y;s("Expected ']' at end of array")}return n++,y},p=()=>{if(n===0){t==="-"&&Allow.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t)}catch(x){if(Allow.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}a(String(x))}}const y=n;for(t[n]==="-"&&n++;t[n]&&!",]}".includes(t[n]);)n++;n==r&&!(Allow.NUM&e)&&s("Unterminated number literal");try{return JSON.parse(t.substring(y,n))}catch{t.substring(y,n)==="-"&&Allow.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t.substring(y,t.lastIndexOf("e")))}catch(E){a(String(E))}}},g=()=>{for(;n<r&&` 
\r	`.includes(t[n]);)n++};return o()},partialParse=t=>parseJSON(t,Allow.ALL^Allow.NUM);var __classPrivateFieldSet$1=function(t,e,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r},__classPrivateFieldGet$1=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},_ChatCompletionStream_instances,_ChatCompletionStream_params,_ChatCompletionStream_choiceEventStates,_ChatCompletionStream_currentChatCompletionSnapshot,_ChatCompletionStream_beginRequest,_ChatCompletionStream_getChoiceEventState,_ChatCompletionStream_addChunk,_ChatCompletionStream_emitToolCallDoneEvent,_ChatCompletionStream_emitContentDoneEvents,_ChatCompletionStream_endRequest,_ChatCompletionStream_getAutoParseableResponseFormat,_ChatCompletionStream_accumulateChatCompletion;class ChatCompletionStream extends AbstractChatCompletionRunner{constructor(e){super(),_ChatCompletionStream_instances.add(this),_ChatCompletionStream_params.set(this,void 0),_ChatCompletionStream_choiceEventStates.set(this,void 0),_ChatCompletionStream_currentChatCompletionSnapshot.set(this,void 0),__classPrivateFieldSet$1(this,_ChatCompletionStream_params,e,"f"),__classPrivateFieldSet$1(this,_ChatCompletionStream_choiceEventStates,[],"f")}get currentChatCompletionSnapshot(){return __classPrivateFieldGet$1(this,_ChatCompletionStream_currentChatCompletionSnapshot,"f")}static fromReadableStream(e){const r=new ChatCompletionStream(null);return r._run(()=>r._fromReadableStream(e)),r}static createChatCompletion(e,r,n){const s=new ChatCompletionStream(r);return s._run(()=>s._runChatCompletion(e,{...r,stream:!0},{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createChatCompletion(e,r,n){var o;super._createChatCompletion;const s=n==null?void 0:n.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_beginRequest).call(this);const a=await e.chat.completions.create({...r,stream:!0},{...n,signal:this.controller.signal});this._connected();for await(const l of a)__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_addChunk).call(this,l);if((o=a.controller.signal)!=null&&o.aborted)throw new APIUserAbortError;return this._addChatCompletion(__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_endRequest).call(this))}async _fromReadableStream(e,r){var o;const n=r==null?void 0:r.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_beginRequest).call(this),this._connected();const s=Stream.fromReadableStream(e,this.controller);let a;for await(const l of s)a&&a!==l.id&&this._addChatCompletion(__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_endRequest).call(this)),__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_addChunk).call(this,l),a=l.id;if((o=s.controller.signal)!=null&&o.aborted)throw new APIUserAbortError;return this._addChatCompletion(__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_endRequest).call(this))}[(_ChatCompletionStream_params=new WeakMap,_ChatCompletionStream_choiceEventStates=new WeakMap,_ChatCompletionStream_currentChatCompletionSnapshot=new WeakMap,_ChatCompletionStream_instances=new WeakSet,_ChatCompletionStream_beginRequest=function(){this.ended||__classPrivateFieldSet$1(this,_ChatCompletionStream_currentChatCompletionSnapshot,void 0,"f")},_ChatCompletionStream_getChoiceEventState=function(r){let n=__classPrivateFieldGet$1(this,_ChatCompletionStream_choiceEventStates,"f")[r.index];return n||(n={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},__classPrivateFieldGet$1(this,_ChatCompletionStream_choiceEventStates,"f")[r.index]=n,n)},_ChatCompletionStream_addChunk=function(r){var s,a,o,l,c,d,p,g,y,x,E,S,k,C,P;if(this.ended)return;const n=__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_accumulateChatCompletion).call(this,r);this._emit("chunk",r,n);for(const R of r.choices){const j=n.choices[R.index];R.delta.content!=null&&((s=j.message)==null?void 0:s.role)==="assistant"&&((a=j.message)!=null&&a.content)&&(this._emit("content",R.delta.content,j.message.content),this._emit("content.delta",{delta:R.delta.content,snapshot:j.message.content,parsed:j.message.parsed})),R.delta.refusal!=null&&((o=j.message)==null?void 0:o.role)==="assistant"&&((l=j.message)!=null&&l.refusal)&&this._emit("refusal.delta",{delta:R.delta.refusal,snapshot:j.message.refusal}),((c=R.logprobs)==null?void 0:c.content)!=null&&((d=j.message)==null?void 0:d.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(p=R.logprobs)==null?void 0:p.content,snapshot:((g=j.logprobs)==null?void 0:g.content)??[]}),((y=R.logprobs)==null?void 0:y.refusal)!=null&&((x=j.message)==null?void 0:x.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(E=R.logprobs)==null?void 0:E.refusal,snapshot:((S=j.logprobs)==null?void 0:S.refusal)??[]});const I=__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_getChoiceEventState).call(this,j);j.finish_reason&&(__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_emitContentDoneEvents).call(this,j),I.current_tool_call_index!=null&&__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_emitToolCallDoneEvent).call(this,j,I.current_tool_call_index));for(const O of R.delta.tool_calls??[])I.current_tool_call_index!==O.index&&(__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_emitContentDoneEvents).call(this,j),I.current_tool_call_index!=null&&__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_emitToolCallDoneEvent).call(this,j,I.current_tool_call_index)),I.current_tool_call_index=O.index;for(const O of R.delta.tool_calls??[]){const L=(k=j.message.tool_calls)==null?void 0:k[O.index];L!=null&&L.type&&((L==null?void 0:L.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(C=L.function)==null?void 0:C.name,index:O.index,arguments:L.function.arguments,parsed_arguments:L.function.parsed_arguments,arguments_delta:((P=O.function)==null?void 0:P.arguments)??""}):(L==null||L.type,void 0))}}},_ChatCompletionStream_emitToolCallDoneEvent=function(r,n){var o,l,c;if(__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_getChoiceEventState).call(this,r).done_tool_calls.has(n))return;const a=(o=r.message.tool_calls)==null?void 0:o[n];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const d=(c=(l=__classPrivateFieldGet$1(this,_ChatCompletionStream_params,"f"))==null?void 0:l.tools)==null?void 0:c.find(p=>p.type==="function"&&p.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:n,arguments:a.function.arguments,parsed_arguments:isAutoParsableTool$1(d)?d.$parseRaw(a.function.arguments):d!=null&&d.function.strict?JSON.parse(a.function.arguments):null})}else a.type},_ChatCompletionStream_emitContentDoneEvents=function(r){var s,a;const n=__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_getChoiceEventState).call(this,r);if(r.message.content&&!n.content_done){n.content_done=!0;const o=__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_getAutoParseableResponseFormat).call(this);this._emit("content.done",{content:r.message.content,parsed:o?o.$parseRaw(r.message.content):null})}r.message.refusal&&!n.refusal_done&&(n.refusal_done=!0,this._emit("refusal.done",{refusal:r.message.refusal})),(s=r.logprobs)!=null&&s.content&&!n.logprobs_content_done&&(n.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:r.logprobs.content})),(a=r.logprobs)!=null&&a.refusal&&!n.logprobs_refusal_done&&(n.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:r.logprobs.refusal}))},_ChatCompletionStream_endRequest=function(){if(this.ended)throw new OpenAIError("stream has ended, this shouldn't happen");const r=__classPrivateFieldGet$1(this,_ChatCompletionStream_currentChatCompletionSnapshot,"f");if(!r)throw new OpenAIError("request ended without sending any chunks");return __classPrivateFieldSet$1(this,_ChatCompletionStream_currentChatCompletionSnapshot,void 0,"f"),__classPrivateFieldSet$1(this,_ChatCompletionStream_choiceEventStates,[],"f"),finalizeChatCompletion(r,__classPrivateFieldGet$1(this,_ChatCompletionStream_params,"f"))},_ChatCompletionStream_getAutoParseableResponseFormat=function(){var n;const r=(n=__classPrivateFieldGet$1(this,_ChatCompletionStream_params,"f"))==null?void 0:n.response_format;return isAutoParsableResponseFormat(r)?r:null},_ChatCompletionStream_accumulateChatCompletion=function(r){var n,s,a,o;let l=__classPrivateFieldGet$1(this,_ChatCompletionStream_currentChatCompletionSnapshot,"f");const{choices:c,...d}=r;l?Object.assign(l,d):l=__classPrivateFieldSet$1(this,_ChatCompletionStream_currentChatCompletionSnapshot,{...d,choices:[]},"f");for(const{delta:p,finish_reason:g,index:y,logprobs:x=null,...E}of r.choices){let S=l.choices[y];if(S||(S=l.choices[y]={finish_reason:g,index:y,message:{},logprobs:x,...E}),x)if(!S.logprobs)S.logprobs=Object.assign({},x);else{const{content:O,refusal:L,...B}=x;Object.assign(S.logprobs,B),O&&((n=S.logprobs).content??(n.content=[]),S.logprobs.content.push(...O)),L&&((s=S.logprobs).refusal??(s.refusal=[]),S.logprobs.refusal.push(...L))}if(g&&(S.finish_reason=g,__classPrivateFieldGet$1(this,_ChatCompletionStream_params,"f")&&hasAutoParseableInput$1(__classPrivateFieldGet$1(this,_ChatCompletionStream_params,"f")))){if(g==="length")throw new LengthFinishReasonError;if(g==="content_filter")throw new ContentFilterFinishReasonError}if(Object.assign(S,E),!p)continue;const{content:k,refusal:C,function_call:P,role:R,tool_calls:j,...I}=p;if(Object.assign(S.message,I),C&&(S.message.refusal=(S.message.refusal||"")+C),R&&(S.message.role=R),P&&(S.message.function_call?(P.name&&(S.message.function_call.name=P.name),P.arguments&&((a=S.message.function_call).arguments??(a.arguments=""),S.message.function_call.arguments+=P.arguments)):S.message.function_call=P),k&&(S.message.content=(S.message.content||"")+k,!S.message.refusal&&__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_getAutoParseableResponseFormat).call(this)&&(S.message.parsed=partialParse(S.message.content))),j){S.message.tool_calls||(S.message.tool_calls=[]);for(const{index:O,id:L,type:B,function:Z,...te}of j){const ie=(o=S.message.tool_calls)[O]??(o[O]={});Object.assign(ie,te),L&&(ie.id=L),B&&(ie.type=B),Z&&(ie.function??(ie.function={name:Z.name??"",arguments:""})),Z!=null&&Z.name&&(ie.function.name=Z.name),Z!=null&&Z.arguments&&(ie.function.arguments+=Z.arguments,shouldParseToolCall(__classPrivateFieldGet$1(this,_ChatCompletionStream_params,"f"),ie)&&(ie.function.parsed_arguments=partialParse(ie.function.arguments)))}}}return l},Symbol.asyncIterator)](){const e=[],r=[];let n=!1;return this.on("chunk",s=>{const a=r.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{n=!0;for(const s of r)s.resolve(void 0);r.length=0}),this.on("abort",s=>{n=!0;for(const a of r)a.reject(s);r.length=0}),this.on("error",s=>{n=!0;for(const a of r)a.reject(s);r.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((a,o)=>r.push({resolve:a,reject:o})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Stream(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function finalizeChatCompletion(t,e){const{id:r,choices:n,created:s,model:a,system_fingerprint:o,...l}=t,c={...l,id:r,choices:n.map(({message:d,finish_reason:p,index:g,logprobs:y,...x})=>{if(!p)throw new OpenAIError(`missing finish_reason for choice ${g}`);const{content:E=null,function_call:S,tool_calls:k,...C}=d,P=d.role;if(!P)throw new OpenAIError(`missing role for choice ${g}`);if(S){const{arguments:R,name:j}=S;if(R==null)throw new OpenAIError(`missing function_call.arguments for choice ${g}`);if(!j)throw new OpenAIError(`missing function_call.name for choice ${g}`);return{...x,message:{content:E,function_call:{arguments:R,name:j},role:P,refusal:d.refusal??null},finish_reason:p,index:g,logprobs:y}}return k?{...x,index:g,finish_reason:p,logprobs:y,message:{...C,role:P,content:E,refusal:d.refusal??null,tool_calls:k.map((R,j)=>{const{function:I,type:O,id:L,...B}=R,{arguments:Z,name:te,...ie}=I||{};if(L==null)throw new OpenAIError(`missing choices[${g}].tool_calls[${j}].id
${str(t)}`);if(O==null)throw new OpenAIError(`missing choices[${g}].tool_calls[${j}].type
${str(t)}`);if(te==null)throw new OpenAIError(`missing choices[${g}].tool_calls[${j}].function.name
${str(t)}`);if(Z==null)throw new OpenAIError(`missing choices[${g}].tool_calls[${j}].function.arguments
${str(t)}`);return{...B,id:L,type:O,function:{...ie,name:te,arguments:Z}}})}}:{...x,message:{...C,content:E,role:P,refusal:d.refusal??null},finish_reason:p,index:g,logprobs:y}}),created:s,model:a,object:"chat.completion",...o?{system_fingerprint:o}:{}};return maybeParseChatCompletion(c,e)}function str(t){return JSON.stringify(t)}function assertNever(t){}class ChatCompletionStreamingRunner extends ChatCompletionStream{static fromReadableStream(e){const r=new ChatCompletionStreamingRunner(null);return r._run(()=>r._fromReadableStream(e)),r}static runFunctions(e,r,n){const s=new ChatCompletionStreamingRunner(null),a={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runFunctions"}};return s._run(()=>s._runFunctions(e,r,a)),s}static runTools(e,r,n){const s=new ChatCompletionStreamingRunner(r),a={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,r,a)),s}}let Completions$1=class extends APIResource{parse(e,r){return validateInputTools(e.tools),this._client.chat.completions.create(e,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(n=>parseChatCompletion(n,e))}runFunctions(e,r){return e.stream?ChatCompletionStreamingRunner.runFunctions(this._client,e,r):ChatCompletionRunner.runFunctions(this._client,e,r)}runTools(e,r){return e.stream?ChatCompletionStreamingRunner.runTools(this._client,e,r):ChatCompletionRunner.runTools(this._client,e,r)}stream(e,r){return ChatCompletionStream.createChatCompletion(this._client,e,r)}};class Chat extends APIResource{constructor(){super(...arguments),this.completions=new Completions$1(this._client)}}(function(t){t.Completions=Completions$1})(Chat||(Chat={}));class Sessions extends APIResource{create(e,r){return this._client.post("/realtime/sessions",{body:e,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class TranscriptionSessions extends APIResource{create(e,r){return this._client.post("/realtime/transcription_sessions",{body:e,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class Realtime extends APIResource{constructor(){super(...arguments),this.sessions=new Sessions(this._client),this.transcriptionSessions=new TranscriptionSessions(this._client)}}Realtime.Sessions=Sessions;Realtime.TranscriptionSessions=TranscriptionSessions;class Messages extends APIResource{create(e,r,n){return this._client.post(`/threads/${e}/messages`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,r,n){return this._client.get(`/threads/${e}/messages/${r}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,r,n,s){return this._client.post(`/threads/${e}/messages/${r}`,{body:n,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(e,r={},n){return isRequestOptions(r)?this.list(e,{},r):this._client.getAPIList(`/threads/${e}/messages`,MessagesPage,{query:r,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,r,n){return this._client.delete(`/threads/${e}/messages/${r}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class MessagesPage extends CursorPage{}Messages.MessagesPage=MessagesPage;class Steps extends APIResource{retrieve(e,r,n,s={},a){return isRequestOptions(s)?this.retrieve(e,r,n,{},s):this._client.get(`/threads/${e}/runs/${r}/steps/${n}`,{query:s,...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers}})}list(e,r,n={},s){return isRequestOptions(n)?this.list(e,r,{},n):this._client.getAPIList(`/threads/${e}/runs/${r}/steps`,RunStepsPage,{query:n,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}}class RunStepsPage extends CursorPage{}Steps.RunStepsPage=RunStepsPage;let Runs$1=class extends APIResource{constructor(){super(...arguments),this.steps=new Steps(this._client)}create(e,r,n){const{include:s,...a}=r;return this._client.post(`/threads/${e}/runs`,{query:{include:s},body:a,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers},stream:r.stream??!1})}retrieve(e,r,n){return this._client.get(`/threads/${e}/runs/${r}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,r,n,s){return this._client.post(`/threads/${e}/runs/${r}`,{body:n,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(e,r={},n){return isRequestOptions(r)?this.list(e,{},r):this._client.getAPIList(`/threads/${e}/runs`,RunsPage,{query:r,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}cancel(e,r,n){return this._client.post(`/threads/${e}/runs/${r}/cancel`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}async createAndPoll(e,r,n){const s=await this.create(e,r,n);return await this.poll(e,s.id,n)}createAndStream(e,r,n){return AssistantStream.createAssistantStream(e,this._client.beta.threads.runs,r,n)}async poll(e,r,n){const s={...n==null?void 0:n.headers,"X-Stainless-Poll-Helper":"true"};for(n!=null&&n.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const{data:a,response:o}=await this.retrieve(e,r,{...n,headers:{...n==null?void 0:n.headers,...s}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let l=5e3;if(n!=null&&n.pollIntervalMs)l=n.pollIntervalMs;else{const c=o.headers.get("openai-poll-after-ms");if(c){const d=parseInt(c);isNaN(d)||(l=d)}}await sleep(l);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,r,n){return AssistantStream.createAssistantStream(e,this._client.beta.threads.runs,r,n)}submitToolOutputs(e,r,n,s){return this._client.post(`/threads/${e}/runs/${r}/submit_tool_outputs`,{body:n,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers},stream:n.stream??!1})}async submitToolOutputsAndPoll(e,r,n,s){const a=await this.submitToolOutputs(e,r,n,s);return await this.poll(e,a.id,s)}submitToolOutputsStream(e,r,n,s){return AssistantStream.createToolAssistantStream(e,r,this._client.beta.threads.runs,n,s)}};class RunsPage extends CursorPage{}Runs$1.RunsPage=RunsPage;Runs$1.Steps=Steps;Runs$1.RunStepsPage=RunStepsPage;class Threads extends APIResource{constructor(){super(...arguments),this.runs=new Runs$1(this._client),this.messages=new Messages(this._client)}create(e={},r){return isRequestOptions(e)?this.create({},e):this._client.post("/threads",{body:e,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,r){return this._client.get(`/threads/${e}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,r,n){return this._client.post(`/threads/${e}`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,r){return this._client.delete(`/threads/${e}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}createAndRun(e,r){return this._client.post("/threads/runs",{body:e,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers},stream:e.stream??!1})}async createAndRunPoll(e,r){const n=await this.createAndRun(e,r);return await this.runs.poll(n.thread_id,n.id,r)}createAndRunStream(e,r){return AssistantStream.createThreadAssistantStream(e,this._client.beta.threads,r)}}Threads.Runs=Runs$1;Threads.RunsPage=RunsPage;Threads.Messages=Messages;Threads.MessagesPage=MessagesPage;class Beta extends APIResource{constructor(){super(...arguments),this.realtime=new Realtime(this._client),this.chat=new Chat(this._client),this.assistants=new Assistants(this._client),this.threads=new Threads(this._client)}}Beta.Realtime=Realtime;Beta.Assistants=Assistants;Beta.AssistantsPage=AssistantsPage;Beta.Threads=Threads;class Completions extends APIResource{create(e,r){return this._client.post("/completions",{body:e,...r,stream:e.stream??!1})}}let Content$1=class extends APIResource{retrieve(e,r,n){return this._client.get(`/containers/${e}/files/${r}/content`,{...n,headers:{Accept:"*/*",...n==null?void 0:n.headers}})}},Files$2=class extends APIResource{constructor(){super(...arguments),this.content=new Content$1(this._client)}create(e,r,n){return this._client.post(`/containers/${e}/files`,{body:r,...n})}retrieve(e,r,n){return this._client.get(`/containers/${e}/files/${r}`,n)}list(e,r={},n){return isRequestOptions(r)?this.list(e,{},r):this._client.getAPIList(`/containers/${e}/files`,FileListResponsesPage,{query:r,...n})}del(e,r,n){return this._client.delete(`/containers/${e}/files/${r}`,{...n,headers:{Accept:"*/*",...n==null?void 0:n.headers}})}};class FileListResponsesPage extends CursorPage{}Files$2.FileListResponsesPage=FileListResponsesPage;Files$2.Content=Content$1;class Containers extends APIResource{constructor(){super(...arguments),this.files=new Files$2(this._client)}create(e,r){return this._client.post("/containers",{body:e,...r})}retrieve(e,r){return this._client.get(`/containers/${e}`,r)}list(e={},r){return isRequestOptions(e)?this.list({},e):this._client.getAPIList("/containers",ContainerListResponsesPage,{query:e,...r})}del(e,r){return this._client.delete(`/containers/${e}`,{...r,headers:{Accept:"*/*",...r==null?void 0:r.headers}})}}class ContainerListResponsesPage extends CursorPage{}Containers.ContainerListResponsesPage=ContainerListResponsesPage;Containers.Files=Files$2;Containers.FileListResponsesPage=FileListResponsesPage;class Embeddings extends APIResource{create(e,r){const n=!!e.encoding_format;let s=n?e.encoding_format:"base64";n&&debug("Request","User defined encoding_format:",e.encoding_format);const a=this._client.post("/embeddings",{body:{...e,encoding_format:s},...r});return n?a:(debug("response","Decoding base64 embeddings to float32 array"),a._thenUnwrap(o=>(o&&o.data&&o.data.forEach(l=>{const c=l.embedding;l.embedding=toFloat32Array(c)}),o)))}}class OutputItems extends APIResource{retrieve(e,r,n,s){return this._client.get(`/evals/${e}/runs/${r}/output_items/${n}`,s)}list(e,r,n={},s){return isRequestOptions(n)?this.list(e,r,{},n):this._client.getAPIList(`/evals/${e}/runs/${r}/output_items`,OutputItemListResponsesPage,{query:n,...s})}}class OutputItemListResponsesPage extends CursorPage{}OutputItems.OutputItemListResponsesPage=OutputItemListResponsesPage;class Runs extends APIResource{constructor(){super(...arguments),this.outputItems=new OutputItems(this._client)}create(e,r,n){return this._client.post(`/evals/${e}/runs`,{body:r,...n})}retrieve(e,r,n){return this._client.get(`/evals/${e}/runs/${r}`,n)}list(e,r={},n){return isRequestOptions(r)?this.list(e,{},r):this._client.getAPIList(`/evals/${e}/runs`,RunListResponsesPage,{query:r,...n})}del(e,r,n){return this._client.delete(`/evals/${e}/runs/${r}`,n)}cancel(e,r,n){return this._client.post(`/evals/${e}/runs/${r}`,n)}}class RunListResponsesPage extends CursorPage{}Runs.RunListResponsesPage=RunListResponsesPage;Runs.OutputItems=OutputItems;Runs.OutputItemListResponsesPage=OutputItemListResponsesPage;class Evals extends APIResource{constructor(){super(...arguments),this.runs=new Runs(this._client)}create(e,r){return this._client.post("/evals",{body:e,...r})}retrieve(e,r){return this._client.get(`/evals/${e}`,r)}update(e,r,n){return this._client.post(`/evals/${e}`,{body:r,...n})}list(e={},r){return isRequestOptions(e)?this.list({},e):this._client.getAPIList("/evals",EvalListResponsesPage,{query:e,...r})}del(e,r){return this._client.delete(`/evals/${e}`,r)}}class EvalListResponsesPage extends CursorPage{}Evals.EvalListResponsesPage=EvalListResponsesPage;Evals.Runs=Runs;Evals.RunListResponsesPage=RunListResponsesPage;let Files$1=class extends APIResource{create(e,r){return this._client.post("/files",multipartFormRequestOptions({body:e,...r}))}retrieve(e,r){return this._client.get(`/files/${e}`,r)}list(e={},r){return isRequestOptions(e)?this.list({},e):this._client.getAPIList("/files",FileObjectsPage,{query:e,...r})}del(e,r){return this._client.delete(`/files/${e}`,r)}content(e,r){return this._client.get(`/files/${e}/content`,{...r,headers:{Accept:"application/binary",...r==null?void 0:r.headers},__binaryResponse:!0})}retrieveContent(e,r){return this._client.get(`/files/${e}/content`,r)}async waitForProcessing(e,{pollInterval:r=5e3,maxWait:n=30*60*1e3}={}){const s=new Set(["processed","error","deleted"]),a=Date.now();let o=await this.retrieve(e);for(;!o.status||!s.has(o.status);)if(await sleep(r),o=await this.retrieve(e),Date.now()-a>n)throw new APIConnectionTimeoutError({message:`Giving up on waiting for file ${e} to finish processing after ${n} milliseconds.`});return o}};class FileObjectsPage extends CursorPage{}Files$1.FileObjectsPage=FileObjectsPage;class Methods extends APIResource{}let Graders$1=class extends APIResource{run(e,r){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...r})}validate(e,r){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...r})}};class Alpha extends APIResource{constructor(){super(...arguments),this.graders=new Graders$1(this._client)}}Alpha.Graders=Graders$1;class Permissions extends APIResource{create(e,r,n){return this._client.getAPIList(`/fine_tuning/checkpoints/${e}/permissions`,PermissionCreateResponsesPage,{body:r,method:"post",...n})}retrieve(e,r={},n){return isRequestOptions(r)?this.retrieve(e,{},r):this._client.get(`/fine_tuning/checkpoints/${e}/permissions`,{query:r,...n})}del(e,r,n){return this._client.delete(`/fine_tuning/checkpoints/${e}/permissions/${r}`,n)}}class PermissionCreateResponsesPage extends Page{}Permissions.PermissionCreateResponsesPage=PermissionCreateResponsesPage;let Checkpoints$1=class extends APIResource{constructor(){super(...arguments),this.permissions=new Permissions(this._client)}};Checkpoints$1.Permissions=Permissions;Checkpoints$1.PermissionCreateResponsesPage=PermissionCreateResponsesPage;class Checkpoints extends APIResource{list(e,r={},n){return isRequestOptions(r)?this.list(e,{},r):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,FineTuningJobCheckpointsPage,{query:r,...n})}}class FineTuningJobCheckpointsPage extends CursorPage{}Checkpoints.FineTuningJobCheckpointsPage=FineTuningJobCheckpointsPage;class Jobs extends APIResource{constructor(){super(...arguments),this.checkpoints=new Checkpoints(this._client)}create(e,r){return this._client.post("/fine_tuning/jobs",{body:e,...r})}retrieve(e,r){return this._client.get(`/fine_tuning/jobs/${e}`,r)}list(e={},r){return isRequestOptions(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",FineTuningJobsPage,{query:e,...r})}cancel(e,r){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,r)}listEvents(e,r={},n){return isRequestOptions(r)?this.listEvents(e,{},r):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,FineTuningJobEventsPage,{query:r,...n})}pause(e,r){return this._client.post(`/fine_tuning/jobs/${e}/pause`,r)}resume(e,r){return this._client.post(`/fine_tuning/jobs/${e}/resume`,r)}}class FineTuningJobsPage extends CursorPage{}class FineTuningJobEventsPage extends CursorPage{}Jobs.FineTuningJobsPage=FineTuningJobsPage;Jobs.FineTuningJobEventsPage=FineTuningJobEventsPage;Jobs.Checkpoints=Checkpoints;Jobs.FineTuningJobCheckpointsPage=FineTuningJobCheckpointsPage;class FineTuning extends APIResource{constructor(){super(...arguments),this.methods=new Methods(this._client),this.jobs=new Jobs(this._client),this.checkpoints=new Checkpoints$1(this._client),this.alpha=new Alpha(this._client)}}FineTuning.Methods=Methods;FineTuning.Jobs=Jobs;FineTuning.FineTuningJobsPage=FineTuningJobsPage;FineTuning.FineTuningJobEventsPage=FineTuningJobEventsPage;FineTuning.Checkpoints=Checkpoints$1;FineTuning.Alpha=Alpha;class GraderModels extends APIResource{}class Graders extends APIResource{constructor(){super(...arguments),this.graderModels=new GraderModels(this._client)}}Graders.GraderModels=GraderModels;class Images extends APIResource{createVariation(e,r){return this._client.post("/images/variations",multipartFormRequestOptions({body:e,...r}))}edit(e,r){return this._client.post("/images/edits",multipartFormRequestOptions({body:e,...r}))}generate(e,r){return this._client.post("/images/generations",{body:e,...r})}}class Models extends APIResource{retrieve(e,r){return this._client.get(`/models/${e}`,r)}list(e){return this._client.getAPIList("/models",ModelsPage,e)}del(e,r){return this._client.delete(`/models/${e}`,r)}}class ModelsPage extends Page{}Models.ModelsPage=ModelsPage;class Moderations extends APIResource{create(e,r){return this._client.post("/moderations",{body:e,...r})}}function maybeParseResponse(t,e){return!e||!hasAutoParseableInput(e)?{...t,output_parsed:null,output:t.output.map(r=>r.type==="function_call"?{...r,parsed_arguments:null}:r.type==="message"?{...r,content:r.content.map(n=>({...n,parsed:null}))}:r)}:parseResponse(t,e)}function parseResponse(t,e){const r=t.output.map(s=>{if(s.type==="function_call")return{...s,parsed_arguments:parseToolCall$1(e,s)};if(s.type==="message"){const a=s.content.map(o=>o.type==="output_text"?{...o,parsed:parseTextFormat(e,o.text)}:o);return{...s,content:a}}return s}),n=Object.assign({},t,{output:r});return Object.getOwnPropertyDescriptor(t,"output_text")||addOutputText(n),Object.defineProperty(n,"output_parsed",{enumerable:!0,get(){for(const s of n.output)if(s.type==="message"){for(const a of s.content)if(a.type==="output_text"&&a.parsed!==null)return a.parsed}return null}}),n}function parseTextFormat(t,e){var r,n,s,a;return((n=(r=t.text)==null?void 0:r.format)==null?void 0:n.type)!=="json_schema"?null:"$parseRaw"in((s=t.text)==null?void 0:s.format)?((a=t.text)==null?void 0:a.format).$parseRaw(e):JSON.parse(e)}function hasAutoParseableInput(t){var e;return!!isAutoParsableResponseFormat((e=t.text)==null?void 0:e.format)}function isAutoParsableTool(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function getInputToolByName(t,e){return t.find(r=>r.type==="function"&&r.name===e)}function parseToolCall$1(t,e){const r=getInputToolByName(t.tools??[],e.name);return{...e,...e,parsed_arguments:isAutoParsableTool(r)?r.$parseRaw(e.arguments):r!=null&&r.strict?JSON.parse(e.arguments):null}}function addOutputText(t){const e=[];for(const r of t.output)if(r.type==="message")for(const n of r.content)n.type==="output_text"&&e.push(n.text);t.output_text=e.join("")}class InputItems extends APIResource{list(e,r={},n){return isRequestOptions(r)?this.list(e,{},r):this._client.getAPIList(`/responses/${e}/input_items`,ResponseItemsPage,{query:r,...n})}}var __classPrivateFieldSet=function(t,e,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r},__classPrivateFieldGet=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},_ResponseStream_instances,_ResponseStream_params,_ResponseStream_currentResponseSnapshot,_ResponseStream_finalResponse,_ResponseStream_beginRequest,_ResponseStream_addEvent,_ResponseStream_endRequest,_ResponseStream_accumulateResponse;class ResponseStream extends EventStream{constructor(e){super(),_ResponseStream_instances.add(this),_ResponseStream_params.set(this,void 0),_ResponseStream_currentResponseSnapshot.set(this,void 0),_ResponseStream_finalResponse.set(this,void 0),__classPrivateFieldSet(this,_ResponseStream_params,e,"f")}static createResponse(e,r,n){const s=new ResponseStream(r);return s._run(()=>s._createResponse(e,r,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createResponse(e,r,n){var o;const s=n==null?void 0:n.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),__classPrivateFieldGet(this,_ResponseStream_instances,"m",_ResponseStream_beginRequest).call(this);const a=await e.responses.create({...r,stream:!0},{...n,signal:this.controller.signal});this._connected();for await(const l of a)__classPrivateFieldGet(this,_ResponseStream_instances,"m",_ResponseStream_addEvent).call(this,l);if((o=a.controller.signal)!=null&&o.aborted)throw new APIUserAbortError;return __classPrivateFieldGet(this,_ResponseStream_instances,"m",_ResponseStream_endRequest).call(this)}[(_ResponseStream_params=new WeakMap,_ResponseStream_currentResponseSnapshot=new WeakMap,_ResponseStream_finalResponse=new WeakMap,_ResponseStream_instances=new WeakSet,_ResponseStream_beginRequest=function(){this.ended||__classPrivateFieldSet(this,_ResponseStream_currentResponseSnapshot,void 0,"f")},_ResponseStream_addEvent=function(r){if(this.ended)return;const n=__classPrivateFieldGet(this,_ResponseStream_instances,"m",_ResponseStream_accumulateResponse).call(this,r);switch(this._emit("event",r),r.type){case"response.output_text.delta":{const s=n.output[r.output_index];if(!s)throw new OpenAIError(`missing output at index ${r.output_index}`);if(s.type==="message"){const a=s.content[r.content_index];if(!a)throw new OpenAIError(`missing content at index ${r.content_index}`);if(a.type!=="output_text")throw new OpenAIError(`expected content to be 'output_text', got ${a.type}`);this._emit("response.output_text.delta",{...r,snapshot:a.text})}break}case"response.function_call_arguments.delta":{const s=n.output[r.output_index];if(!s)throw new OpenAIError(`missing output at index ${r.output_index}`);s.type==="function_call"&&this._emit("response.function_call_arguments.delta",{...r,snapshot:s.arguments});break}default:this._emit(r.type,r);break}},_ResponseStream_endRequest=function(){if(this.ended)throw new OpenAIError("stream has ended, this shouldn't happen");const r=__classPrivateFieldGet(this,_ResponseStream_currentResponseSnapshot,"f");if(!r)throw new OpenAIError("request ended without sending any events");__classPrivateFieldSet(this,_ResponseStream_currentResponseSnapshot,void 0,"f");const n=finalizeResponse(r,__classPrivateFieldGet(this,_ResponseStream_params,"f"));return __classPrivateFieldSet(this,_ResponseStream_finalResponse,n,"f"),n},_ResponseStream_accumulateResponse=function(r){let n=__classPrivateFieldGet(this,_ResponseStream_currentResponseSnapshot,"f");if(!n){if(r.type!=="response.created")throw new OpenAIError(`When snapshot hasn't been set yet, expected 'response.created' event, got ${r.type}`);return n=__classPrivateFieldSet(this,_ResponseStream_currentResponseSnapshot,r.response,"f"),n}switch(r.type){case"response.output_item.added":{n.output.push(r.item);break}case"response.content_part.added":{const s=n.output[r.output_index];if(!s)throw new OpenAIError(`missing output at index ${r.output_index}`);s.type==="message"&&s.content.push(r.part);break}case"response.output_text.delta":{const s=n.output[r.output_index];if(!s)throw new OpenAIError(`missing output at index ${r.output_index}`);if(s.type==="message"){const a=s.content[r.content_index];if(!a)throw new OpenAIError(`missing content at index ${r.content_index}`);if(a.type!=="output_text")throw new OpenAIError(`expected content to be 'output_text', got ${a.type}`);a.text+=r.delta}break}case"response.function_call_arguments.delta":{const s=n.output[r.output_index];if(!s)throw new OpenAIError(`missing output at index ${r.output_index}`);s.type==="function_call"&&(s.arguments+=r.delta);break}case"response.completed":{__classPrivateFieldSet(this,_ResponseStream_currentResponseSnapshot,r.response,"f");break}}return n},Symbol.asyncIterator)](){const e=[],r=[];let n=!1;return this.on("event",s=>{const a=r.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{n=!0;for(const s of r)s.resolve(void 0);r.length=0}),this.on("abort",s=>{n=!0;for(const a of r)a.reject(s);r.length=0}),this.on("error",s=>{n=!0;for(const a of r)a.reject(s);r.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((a,o)=>r.push({resolve:a,reject:o})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=__classPrivateFieldGet(this,_ResponseStream_finalResponse,"f");if(!e)throw new OpenAIError("stream ended without producing a ChatCompletion");return e}}function finalizeResponse(t,e){return maybeParseResponse(t,e)}class Responses extends APIResource{constructor(){super(...arguments),this.inputItems=new InputItems(this._client)}create(e,r){return this._client.post("/responses",{body:e,...r,stream:e.stream??!1})._thenUnwrap(n=>("object"in n&&n.object==="response"&&addOutputText(n),n))}retrieve(e,r={},n){return isRequestOptions(r)?this.retrieve(e,{},r):this._client.get(`/responses/${e}`,{query:r,...n})}del(e,r){return this._client.delete(`/responses/${e}`,{...r,headers:{Accept:"*/*",...r==null?void 0:r.headers}})}parse(e,r){return this._client.responses.create(e,r)._thenUnwrap(n=>parseResponse(n,e))}stream(e,r){return ResponseStream.createResponse(this._client,e,r)}cancel(e,r){return this._client.post(`/responses/${e}/cancel`,{...r,headers:{Accept:"*/*",...r==null?void 0:r.headers}})}}class ResponseItemsPage extends CursorPage{}Responses.InputItems=InputItems;class Parts extends APIResource{create(e,r,n){return this._client.post(`/uploads/${e}/parts`,multipartFormRequestOptions({body:r,...n}))}}class Uploads extends APIResource{constructor(){super(...arguments),this.parts=new Parts(this._client)}create(e,r){return this._client.post("/uploads",{body:e,...r})}cancel(e,r){return this._client.post(`/uploads/${e}/cancel`,r)}complete(e,r,n){return this._client.post(`/uploads/${e}/complete`,{body:r,...n})}}Uploads.Parts=Parts;const allSettledWithThrow=async t=>{const e=await Promise.allSettled(t),r=e.filter(s=>s.status==="rejected");if(r.length){for(const s of r)console.error(s.reason);throw new Error(`${r.length} promise(s) failed - see the above errors`)}const n=[];for(const s of e)s.status==="fulfilled"&&n.push(s.value);return n};class Files extends APIResource{create(e,r,n){return this._client.post(`/vector_stores/${e}/files`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,r,n){return this._client.get(`/vector_stores/${e}/files/${r}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,r,n,s){return this._client.post(`/vector_stores/${e}/files/${r}`,{body:n,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(e,r={},n){return isRequestOptions(r)?this.list(e,{},r):this._client.getAPIList(`/vector_stores/${e}/files`,VectorStoreFilesPage,{query:r,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,r,n){return this._client.delete(`/vector_stores/${e}/files/${r}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}async createAndPoll(e,r,n){const s=await this.create(e,r,n);return await this.poll(e,s.id,n)}async poll(e,r,n){const s={...n==null?void 0:n.headers,"X-Stainless-Poll-Helper":"true"};for(n!=null&&n.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const a=await this.retrieve(e,r,{...n,headers:s}).withResponse(),o=a.data;switch(o.status){case"in_progress":let l=5e3;if(n!=null&&n.pollIntervalMs)l=n.pollIntervalMs;else{const c=a.response.headers.get("openai-poll-after-ms");if(c){const d=parseInt(c);isNaN(d)||(l=d)}}await sleep(l);break;case"failed":case"completed":return o}}}async upload(e,r,n){const s=await this._client.files.create({file:r,purpose:"assistants"},n);return this.create(e,{file_id:s.id},n)}async uploadAndPoll(e,r,n){const s=await this.upload(e,r,n);return await this.poll(e,s.id,n)}content(e,r,n){return this._client.getAPIList(`/vector_stores/${e}/files/${r}/content`,FileContentResponsesPage,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class VectorStoreFilesPage extends CursorPage{}class FileContentResponsesPage extends Page{}Files.VectorStoreFilesPage=VectorStoreFilesPage;Files.FileContentResponsesPage=FileContentResponsesPage;class FileBatches extends APIResource{create(e,r,n){return this._client.post(`/vector_stores/${e}/file_batches`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,r,n){return this._client.get(`/vector_stores/${e}/file_batches/${r}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}cancel(e,r,n){return this._client.post(`/vector_stores/${e}/file_batches/${r}/cancel`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}async createAndPoll(e,r,n){const s=await this.create(e,r);return await this.poll(e,s.id,n)}listFiles(e,r,n={},s){return isRequestOptions(n)?this.listFiles(e,r,{},n):this._client.getAPIList(`/vector_stores/${e}/file_batches/${r}/files`,VectorStoreFilesPage,{query:n,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}async poll(e,r,n){const s={...n==null?void 0:n.headers,"X-Stainless-Poll-Helper":"true"};for(n!=null&&n.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const{data:a,response:o}=await this.retrieve(e,r,{...n,headers:s}).withResponse();switch(a.status){case"in_progress":let l=5e3;if(n!=null&&n.pollIntervalMs)l=n.pollIntervalMs;else{const c=o.headers.get("openai-poll-after-ms");if(c){const d=parseInt(c);isNaN(d)||(l=d)}}await sleep(l);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:r,fileIds:n=[]},s){if(r==null||r.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=(s==null?void 0:s.maxConcurrency)??5,o=Math.min(a,r.length),l=this._client,c=r.values(),d=[...n];async function p(y){for(let x of y){const E=await l.files.create({file:x,purpose:"assistants"},s);d.push(E.id)}}const g=Array(o).fill(c).map(p);return await allSettledWithThrow(g),await this.createAndPoll(e,{file_ids:d})}}class VectorStores extends APIResource{constructor(){super(...arguments),this.files=new Files(this._client),this.fileBatches=new FileBatches(this._client)}create(e,r){return this._client.post("/vector_stores",{body:e,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,r){return this._client.get(`/vector_stores/${e}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,r,n){return this._client.post(`/vector_stores/${e}`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}list(e={},r){return isRequestOptions(e)?this.list({},e):this._client.getAPIList("/vector_stores",VectorStoresPage,{query:e,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,r){return this._client.delete(`/vector_stores/${e}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}search(e,r,n){return this._client.getAPIList(`/vector_stores/${e}/search`,VectorStoreSearchResponsesPage,{body:r,method:"post",...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class VectorStoresPage extends CursorPage{}class VectorStoreSearchResponsesPage extends Page{}VectorStores.VectorStoresPage=VectorStoresPage;VectorStores.VectorStoreSearchResponsesPage=VectorStoreSearchResponsesPage;VectorStores.Files=Files;VectorStores.VectorStoreFilesPage=VectorStoreFilesPage;VectorStores.FileContentResponsesPage=FileContentResponsesPage;VectorStores.FileBatches=FileBatches;var _a;let OpenAI$1=class extends APIClient{constructor({baseURL:e=readEnv("OPENAI_BASE_URL"),apiKey:r=readEnv("OPENAI_API_KEY"),organization:n=readEnv("OPENAI_ORG_ID")??null,project:s=readEnv("OPENAI_PROJECT_ID")??null,...a}={}){if(r===void 0)throw new OpenAIError("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const o={apiKey:r,organization:n,project:s,...a,baseURL:e||"https://api.openai.com/v1"};if(!o.dangerouslyAllowBrowser&&isRunningInBrowser())throw new OpenAIError(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:o.baseURL,timeout:o.timeout??6e5,httpAgent:o.httpAgent,maxRetries:o.maxRetries,fetch:o.fetch}),this.completions=new Completions(this),this.chat=new Chat$1(this),this.embeddings=new Embeddings(this),this.files=new Files$1(this),this.images=new Images(this),this.audio=new Audio(this),this.moderations=new Moderations(this),this.models=new Models(this),this.fineTuning=new FineTuning(this),this.graders=new Graders(this),this.vectorStores=new VectorStores(this),this.beta=new Beta(this),this.batches=new Batches(this),this.uploads=new Uploads(this),this.responses=new Responses(this),this.evals=new Evals(this),this.containers=new Containers(this),this._options=o,this.apiKey=r,this.organization=n,this.project=s}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return stringify(e,{arrayFormat:"brackets"})}};_a=OpenAI$1;OpenAI$1.OpenAI=_a;OpenAI$1.DEFAULT_TIMEOUT=6e5;OpenAI$1.OpenAIError=OpenAIError;OpenAI$1.APIError=APIError;OpenAI$1.APIConnectionError=APIConnectionError;OpenAI$1.APIConnectionTimeoutError=APIConnectionTimeoutError;OpenAI$1.APIUserAbortError=APIUserAbortError;OpenAI$1.NotFoundError=NotFoundError;OpenAI$1.ConflictError=ConflictError;OpenAI$1.RateLimitError=RateLimitError;OpenAI$1.BadRequestError=BadRequestError;OpenAI$1.AuthenticationError=AuthenticationError;OpenAI$1.InternalServerError=InternalServerError;OpenAI$1.PermissionDeniedError=PermissionDeniedError;OpenAI$1.UnprocessableEntityError=UnprocessableEntityError;OpenAI$1.toFile=toFile;OpenAI$1.fileFromPath=fileFromPath;OpenAI$1.Completions=Completions;OpenAI$1.Chat=Chat$1;OpenAI$1.ChatCompletionsPage=ChatCompletionsPage;OpenAI$1.Embeddings=Embeddings;OpenAI$1.Files=Files$1;OpenAI$1.FileObjectsPage=FileObjectsPage;OpenAI$1.Images=Images;OpenAI$1.Audio=Audio;OpenAI$1.Moderations=Moderations;OpenAI$1.Models=Models;OpenAI$1.ModelsPage=ModelsPage;OpenAI$1.FineTuning=FineTuning;OpenAI$1.Graders=Graders;OpenAI$1.VectorStores=VectorStores;OpenAI$1.VectorStoresPage=VectorStoresPage;OpenAI$1.VectorStoreSearchResponsesPage=VectorStoreSearchResponsesPage;OpenAI$1.Beta=Beta;OpenAI$1.Batches=Batches;OpenAI$1.BatchesPage=BatchesPage;OpenAI$1.Uploads=Uploads;OpenAI$1.Responses=Responses;OpenAI$1.Evals=Evals;OpenAI$1.EvalListResponsesPage=EvalListResponsesPage;OpenAI$1.Containers=Containers;OpenAI$1.ContainerListResponsesPage=ContainerListResponsesPage;function isZodSchema$1(t){var n;if(!t||typeof t!="object"||Array.isArray(t))return!1;const e=t;return e._def||Object.values(ZodFirstPartyTypeKind).includes(((n=e.constructor)==null?void 0:n.name)??"NOT_INCLUDED")?!0:typeof e.parse=="function"&&typeof e.parseAsync=="function"&&typeof e.safeParse=="function"&&typeof e.safeParseAsync=="function"}function _formatForTracing(t){const e=[];for(const r of t){let n=r;if(Array.isArray(r.content))for(let s=0;s<r.content.length;s++){const a=r.content[s];(isURLContentBlock(a)||isBase64ContentBlock(a))&&n===r&&(n=new r.constructor({...n,content:[...r.content.slice(0,s),convertToOpenAIImageBlock(a),...r.content.slice(s+1)]}))}e.push(n)}return e}class BaseChatModel extends BaseLanguageModel{constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models",this._llmType()]}),Object.defineProperty(this,"disableStreaming",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_separateRunnableConfigFromCallOptionsCompat(e){const[r,n]=super._separateRunnableConfigFromCallOptions(e);return n.signal=r.signal,[r,n]}async invoke(e,r){const n=BaseChatModel._convertInputToPromptValue(e);return(await this.generatePrompt([n],r,r==null?void 0:r.callbacks)).generations[0][0].message}async*_streamResponseChunks(e,r,n){throw new Error("Not implemented.")}async*_streamIterator(e,r){var n;if(this._streamResponseChunks===BaseChatModel.prototype._streamResponseChunks||this.disableStreaming)yield this.invoke(e,r);else{const a=BaseChatModel._convertInputToPromptValue(e).toChatMessages(),[o,l]=this._separateRunnableConfigFromCallOptionsCompat(r),c={...o.metadata,...this.getLsParams(l)},d=await CallbackManager.configure(o.callbacks,this.callbacks,o.tags,this.tags,c,this.metadata,{verbose:this.verbose}),p={options:l,invocation_params:this==null?void 0:this.invocationParams(l),batch_size:1},g=await(d==null?void 0:d.handleChatModelStart(this.toJSON(),[_formatForTracing(a)],o.runId,void 0,p,void 0,void 0,o.runName));let y,x;try{for await(const E of this._streamResponseChunks(a,l,g==null?void 0:g[0])){if(E.message.id==null){const S=(n=g==null?void 0:g.at(0))==null?void 0:n.runId;S!=null&&E.message._updateId(`run-${S}`)}E.message.response_metadata={...E.generationInfo,...E.message.response_metadata},yield E.message,y?y=y.concat(E):y=E,isAIMessageChunk(E.message)&&E.message.usage_metadata!==void 0&&(x={tokenUsage:{promptTokens:E.message.usage_metadata.input_tokens,completionTokens:E.message.usage_metadata.output_tokens,totalTokens:E.message.usage_metadata.total_tokens}})}}catch(E){throw await Promise.all((g??[]).map(S=>S==null?void 0:S.handleLLMError(E))),E}await Promise.all((g??[]).map(E=>E==null?void 0:E.handleLLMEnd({generations:[[y]],llmOutput:x})))}}getLsParams(e){const r=this.getName().startsWith("Chat")?this.getName().replace("Chat",""):this.getName();return{ls_model_type:"chat",ls_stop:e.stop,ls_provider:r}}async _generateUncached(e,r,n,s){var g,y;const a=e.map(x=>x.map(coerceMessageLikeToMessage));let o;if(s!==void 0&&s.length===a.length)o=s;else{const x={...n.metadata,...this.getLsParams(r)},E=await CallbackManager.configure(n.callbacks,this.callbacks,n.tags,this.tags,x,this.metadata,{verbose:this.verbose}),S={options:r,invocation_params:this==null?void 0:this.invocationParams(r),batch_size:1};o=await(E==null?void 0:E.handleChatModelStart(this.toJSON(),a.map(_formatForTracing),n.runId,void 0,S,void 0,void 0,n.runName))}const l=[],c=[];if(!!(o!=null&&o[0].handlers.find(callbackHandlerPrefersStreaming))&&!this.disableStreaming&&a.length===1&&this._streamResponseChunks!==BaseChatModel.prototype._streamResponseChunks)try{const x=await this._streamResponseChunks(a[0],r,o==null?void 0:o[0]);let E,S;for await(const k of x){if(k.message.id==null){const C=(g=o==null?void 0:o.at(0))==null?void 0:g.runId;C!=null&&k.message._updateId(`run-${C}`)}E===void 0?E=k:E=concat(E,k),isAIMessageChunk(k.message)&&k.message.usage_metadata!==void 0&&(S={tokenUsage:{promptTokens:k.message.usage_metadata.input_tokens,completionTokens:k.message.usage_metadata.output_tokens,totalTokens:k.message.usage_metadata.total_tokens}})}if(E===void 0)throw new Error("Received empty response from chat model call.");l.push([E]),await(o==null?void 0:o[0].handleLLMEnd({generations:l,llmOutput:S}))}catch(x){throw await(o==null?void 0:o[0].handleLLMError(x)),x}else{const x=await Promise.allSettled(a.map((E,S)=>this._generate(E,{...r,promptIndex:S},o==null?void 0:o[S])));await Promise.all(x.map(async(E,S)=>{var k,C,P;if(E.status==="fulfilled"){const R=E.value;for(const j of R.generations){if(j.message.id==null){const I=(k=o==null?void 0:o.at(0))==null?void 0:k.runId;I!=null&&j.message._updateId(`run-${I}`)}j.message.response_metadata={...j.generationInfo,...j.message.response_metadata}}return R.generations.length===1&&(R.generations[0].message.response_metadata={...R.llmOutput,...R.generations[0].message.response_metadata}),l[S]=R.generations,c[S]=R.llmOutput,(C=o==null?void 0:o[S])==null?void 0:C.handleLLMEnd({generations:[R.generations],llmOutput:R.llmOutput})}else return await((P=o==null?void 0:o[S])==null?void 0:P.handleLLMError(E.reason)),Promise.reject(E.reason)}))}const p={generations:l,llmOutput:c.length?(y=this._combineLLMOutput)==null?void 0:y.call(this,...c):void 0};return Object.defineProperty(p,RUN_KEY,{value:o?{runIds:o==null?void 0:o.map(x=>x.runId)}:void 0,configurable:!0}),p}async _generateCached({messages:e,cache:r,llmStringKey:n,parsedOptions:s,handledOptions:a}){const o=e.map(k=>k.map(coerceMessageLikeToMessage)),l={...a.metadata,...this.getLsParams(s)},c=await CallbackManager.configure(a.callbacks,this.callbacks,a.tags,this.tags,l,this.metadata,{verbose:this.verbose}),d={options:s,invocation_params:this==null?void 0:this.invocationParams(s),batch_size:1},p=await(c==null?void 0:c.handleChatModelStart(this.toJSON(),o.map(_formatForTracing),a.runId,void 0,d,void 0,void 0,a.runName)),g=[],x=(await Promise.allSettled(o.map(async(k,C)=>{const P=BaseChatModel._convertInputToPromptValue(k).toString(),R=await r.lookup(P,n);return R==null&&g.push(C),R}))).map((k,C)=>({result:k,runManager:p==null?void 0:p[C]})).filter(({result:k})=>k.status==="fulfilled"&&k.value!=null||k.status==="rejected"),E=[];await Promise.all(x.map(async({result:k,runManager:C},P)=>{if(k.status==="fulfilled"){const R=k.value;return E[P]=R.map(j=>("message"in j&&isBaseMessage(j.message)&&isAIMessage(j.message)&&(j.message.usage_metadata={input_tokens:0,output_tokens:0,total_tokens:0}),j.generationInfo={...j.generationInfo,tokenUsage:{}},j)),R.length&&await(C==null?void 0:C.handleLLMNewToken(R[0].text)),C==null?void 0:C.handleLLMEnd({generations:[R]},void 0,void 0,void 0,{cached:!0})}else return await(C==null?void 0:C.handleLLMError(k.reason,void 0,void 0,void 0,{cached:!0})),Promise.reject(k.reason)}));const S={generations:E,missingPromptIndices:g,startedRunManagers:p};return Object.defineProperty(S,RUN_KEY,{value:p?{runIds:p==null?void 0:p.map(k=>k.runId)}:void 0,configurable:!0}),S}async generate(e,r,n){let s;Array.isArray(r)?s={stop:r}:s=r;const a=e.map(E=>E.map(coerceMessageLikeToMessage)),[o,l]=this._separateRunnableConfigFromCallOptionsCompat(s);if(o.callbacks=o.callbacks??n,!this.cache)return this._generateUncached(a,l,o);const{cache:c}=this,d=this._getSerializedCacheKeyParametersForCall(l),{generations:p,missingPromptIndices:g,startedRunManagers:y}=await this._generateCached({messages:a,cache:c,llmStringKey:d,parsedOptions:l,handledOptions:o});let x={};if(g.length>0){const E=await this._generateUncached(g.map(S=>a[S]),l,o,y!==void 0?g.map(S=>y==null?void 0:y[S]):void 0);await Promise.all(E.generations.map(async(S,k)=>{const C=g[k];p[C]=S;const P=BaseChatModel._convertInputToPromptValue(a[C]).toString();return c.update(P,d,S)})),x=E.llmOutput??{}}return{generations:p,llmOutput:x}}invocationParams(e){return{}}_modelType(){return"base_chat_model"}serialize(){return{...this.invocationParams(),_type:this._llmType(),_model:this._modelType()}}async generatePrompt(e,r,n){const s=e.map(a=>a.toChatMessages());return this.generate(s,r,n)}async call(e,r,n){return(await this.generate([e.map(coerceMessageLikeToMessage)],r,n)).generations[0][0].message}async callPrompt(e,r,n){const s=e.toChatMessages();return this.call(s,r,n)}async predictMessages(e,r,n){return this.call(e,r,n)}async predict(e,r,n){const s=new HumanMessage(e),a=await this.call([s],r,n);if(typeof a.content!="string")throw new Error("Cannot use predict when output is not a string.");return a.content}withStructuredOutput(e,r){if(typeof this.bindTools!="function")throw new Error('Chat model must implement ".bindTools()" to use withStructuredOutput.');if(r!=null&&r.strict)throw new Error('"strict" mode is not supported for this model by default.');const n=e,s=r==null?void 0:r.name,a=n.description??"A function available to call.",o=r==null?void 0:r.method,l=r==null?void 0:r.includeRaw;if(o==="jsonMode")throw new Error('Base withStructuredOutput implementation only supports "functionCalling" as a method.');let c=s??"extract",d;isZodSchema$1(n)?d=[{type:"function",function:{name:c,description:a,parameters:zodToJsonSchema$2(n)}}]:("name"in n&&(c=n.name),d=[{type:"function",function:{name:c,description:a,parameters:n}}]);const p=this.bindTools(d),g=RunnableLambda.from(S=>{if(!S.tool_calls||S.tool_calls.length===0)throw new Error("No tool calls found in the response.");const k=S.tool_calls.find(C=>C.name===c);if(!k)throw new Error(`No tool call found with name ${c}.`);return k.args});if(!l)return p.pipe(g).withConfig({runName:"StructuredOutput"});const y=RunnablePassthrough.assign({parsed:(S,k)=>g.invoke(S.raw,k)}),x=RunnablePassthrough.assign({parsed:()=>null}),E=y.withFallbacks({fallbacks:[x]});return RunnableSequence.from([{raw:p},E]).withConfig({runName:"StructuredOutputRunnable"})}}function parseToolCall(t,e){if(t.function===void 0)return;let r;if(e!=null&&e.partial)try{r=parsePartialJson(t.function.arguments??"{}")}catch{return}else try{r=JSON.parse(t.function.arguments)}catch(s){throw new OutputParserException([`Function "${t.function.name}" arguments:`,"",t.function.arguments,"","are not valid JSON.",`Error: ${s.message}`].join(`
`))}const n={name:t.function.name,args:r,type:"tool_call"};return e!=null&&e.returnId&&(n.id=t.id),n}function convertLangChainToolCallToOpenAI(t){if(t.id===void 0)throw new Error('All OpenAI tool calls must have an "id" field.');return{id:t.id,type:"function",function:{name:t.name,arguments:JSON.stringify(t.args)}}}function makeInvalidToolCall(t,e){var r,n;return{name:(r=t.function)==null?void 0:r.name,args:(n=t.function)==null?void 0:n.arguments,id:t.id,error:e,type:"invalid_tool_call"}}class JsonOutputToolsParser extends BaseCumulativeTransformOutputParser{static lc_name(){return"JsonOutputToolsParser"}constructor(e){super(e),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.returnId=(e==null?void 0:e.returnId)??this.returnId}_diff(){throw new Error("Not supported.")}async parse(){throw new Error("Not implemented.")}async parseResult(e){return await this.parsePartialResult(e,!1)}async parsePartialResult(e,r=!0){var o;const n=e[0].message;let s;if(isAIMessage(n)&&((o=n.tool_calls)!=null&&o.length)?s=n.tool_calls.map(l=>{const{id:c,...d}=l;return this.returnId?{id:c,...d}:d}):n.additional_kwargs.tool_calls!==void 0&&(s=JSON.parse(JSON.stringify(n.additional_kwargs.tool_calls)).map(c=>parseToolCall(c,{returnId:this.returnId,partial:r}))),!s)return[];const a=[];for(const l of s)if(l!==void 0){const c={type:l.name,args:l.args,id:l.id};a.push(c)}return a}}class JsonOutputKeyToolsParser extends JsonOutputToolsParser{static lc_name(){return"JsonOutputKeyToolsParser"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"keyName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnSingle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"zodSchema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keyName=e.keyName,this.returnSingle=e.returnSingle??this.returnSingle,this.zodSchema=e.zodSchema}async _validateResult(e){if(this.zodSchema===void 0)return e;const r=await this.zodSchema.safeParseAsync(e);if(r.success)return r.data;throw new OutputParserException(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify(r.error.errors)}`,JSON.stringify(e,null,2))}async parsePartialResult(e){const n=(await super.parsePartialResult(e)).filter(a=>a.type===this.keyName);let s=n;if(n.length)return this.returnId||(s=n.map(a=>a.args)),this.returnSingle?s[0]:s}async parseResult(e){const n=(await super.parsePartialResult(e,!1)).filter(o=>o.type===this.keyName);let s=n;return n.length?(this.returnId||(s=n.map(o=>o.args)),this.returnSingle?this._validateResult(s[0]):await Promise.all(s.map(o=>this._validateResult(o)))):void 0}}const ignoreOverride=Symbol("Let zodToJsonSchema decide on which parser to use"),defaultOptions={name:void 0,$refStrategy:"root",effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",nullableStrategy:"from-target",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},getDefaultOptions=t=>typeof t=="string"?{...defaultOptions,basePath:["#"],definitions:{},name:t}:{...defaultOptions,basePath:["#"],definitions:{},...t},zodDef=t=>"_def"in t?t._def:t;function isEmptyObj(t){if(!t)return!0;for(const e in t)return!1;return!0}const getRefs=t=>{const e=getDefaultOptions(t),r=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:r,propertyPath:void 0,seenRefs:new Set,seen:new Map(Object.entries(e.definitions).map(([n,s])=>[zodDef(s),{def:zodDef(s),path:[...e.basePath,e.definitionPath,n],jsonSchema:void 0}]))}};function addErrorMessage(t,e,r,n){n!=null&&n.errorMessages&&r&&(t.errorMessage={...t.errorMessage,[e]:r})}function setResponseValueAndErrors(t,e,r,n,s){t[e]=r,addErrorMessage(t,e,n,s)}function parseAnyDef(){return{}}function parseArrayDef(t,e){var n,s;const r={type:"array"};return((s=(n=t.type)==null?void 0:n._def)==null?void 0:s.typeName)!==ZodFirstPartyTypeKind.ZodAny&&(r.items=parseDef(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&setResponseValueAndErrors(r,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&setResponseValueAndErrors(r,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&(setResponseValueAndErrors(r,"minItems",t.exactLength.value,t.exactLength.message,e),setResponseValueAndErrors(r,"maxItems",t.exactLength.value,t.exactLength.message,e)),r}function parseBigintDef(t,e){const r={type:"integer",format:"int64"};if(!t.checks)return r;for(const n of t.checks)switch(n.kind){case"min":e.target==="jsonSchema7"?n.inclusive?setResponseValueAndErrors(r,"minimum",n.value,n.message,e):setResponseValueAndErrors(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),setResponseValueAndErrors(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?setResponseValueAndErrors(r,"maximum",n.value,n.message,e):setResponseValueAndErrors(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),setResponseValueAndErrors(r,"maximum",n.value,n.message,e));break;case"multipleOf":setResponseValueAndErrors(r,"multipleOf",n.value,n.message,e);break}return r}function parseBooleanDef(){return{type:"boolean"}}function parseBrandedDef(t,e){return parseDef(t.type._def,e)}const parseCatchDef=(t,e)=>parseDef(t.innerType._def,e);function parseDateDef(t,e,r){const n=r??e.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((s,a)=>parseDateDef(t,e,s))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return integerDateParser(t,e)}}const integerDateParser=(t,e)=>{const r={type:"integer",format:"unix-time"};if(e.target==="openApi3")return r;for(const n of t.checks)switch(n.kind){case"min":setResponseValueAndErrors(r,"minimum",n.value,n.message,e);break;case"max":setResponseValueAndErrors(r,"maximum",n.value,n.message,e);break}return r};function parseDefaultDef(t,e){return{...parseDef(t.innerType._def,e),default:t.defaultValue()}}function parseEffectsDef(t,e,r){return e.effectStrategy==="input"?parseDef(t.schema._def,e,r):{}}function parseEnumDef(t){return{type:"string",enum:[...t.values]}}const isJsonSchema7AllOfType=t=>"type"in t&&t.type==="string"?!1:"allOf"in t;function parseIntersectionDef(t,e){const r=[parseDef(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),parseDef(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(a=>!!a);let n=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const s=[];return r.forEach(a=>{if(isJsonSchema7AllOfType(a))s.push(...a.allOf),a.unevaluatedProperties===void 0&&(n=void 0);else{let o=a;if("additionalProperties"in a&&a.additionalProperties===!1){const{additionalProperties:l,...c}=a;o=c}else n=void 0;s.push(o)}}),s.length?{allOf:s,...n}:void 0}function parseLiteralDef(t,e){const r=typeof t.value;return r!=="bigint"&&r!=="number"&&r!=="boolean"&&r!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:r==="bigint"?"integer":r,enum:[t.value]}:{type:r==="bigint"?"integer":r,const:t.value}}let emojiRegex;const zodPatterns={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(emojiRegex===void 0&&(emojiRegex=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),emojiRegex),base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/};function parseStringDef(t,e){const r={type:"string"};function n(s){return e.patternStrategy==="escape"?escapeNonAlphaNumeric(s):s}if(t.checks)for(const s of t.checks)switch(s.kind){case"min":setResponseValueAndErrors(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,s.value):s.value,s.message,e);break;case"max":setResponseValueAndErrors(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,s.value):s.value,s.message,e);break;case"email":switch(e.emailStrategy){case"format:email":addFormat(r,"email",s.message,e);break;case"format:idn-email":addFormat(r,"idn-email",s.message,e);break;case"pattern:zod":addPattern(r,zodPatterns.email,s.message,e);break}break;case"url":addFormat(r,"uri",s.message,e);break;case"uuid":addFormat(r,"uuid",s.message,e);break;case"regex":addPattern(r,s.regex,s.message,e);break;case"cuid":addPattern(r,zodPatterns.cuid,s.message,e);break;case"cuid2":addPattern(r,zodPatterns.cuid2,s.message,e);break;case"startsWith":addPattern(r,RegExp(`^${n(s.value)}`),s.message,e);break;case"endsWith":addPattern(r,RegExp(`${n(s.value)}$`),s.message,e);break;case"datetime":addFormat(r,"date-time",s.message,e);break;case"date":addFormat(r,"date",s.message,e);break;case"time":addFormat(r,"time",s.message,e);break;case"duration":addFormat(r,"duration",s.message,e);break;case"length":setResponseValueAndErrors(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,s.value):s.value,s.message,e),setResponseValueAndErrors(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,s.value):s.value,s.message,e);break;case"includes":{addPattern(r,RegExp(n(s.value)),s.message,e);break}case"ip":{s.version!=="v6"&&addFormat(r,"ipv4",s.message,e),s.version!=="v4"&&addFormat(r,"ipv6",s.message,e);break}case"emoji":addPattern(r,zodPatterns.emoji,s.message,e);break;case"ulid":{addPattern(r,zodPatterns.ulid,s.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{addFormat(r,"binary",s.message,e);break}case"contentEncoding:base64":{setResponseValueAndErrors(r,"contentEncoding","base64",s.message,e);break}case"pattern:zod":{addPattern(r,zodPatterns.base64,s.message,e);break}}break}case"nanoid":addPattern(r,zodPatterns.nanoid,s.message,e)}return r}const escapeNonAlphaNumeric=t=>Array.from(t).map(e=>/[a-zA-Z0-9]/.test(e)?e:`\\${e}`).join(""),addFormat=(t,e,r,n)=>{var s;t.format||(s=t.anyOf)!=null&&s.some(a=>a.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&n.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...r&&n.errorMessages&&{errorMessage:{format:r}}})):setResponseValueAndErrors(t,"format",e,r,n)},addPattern=(t,e,r,n)=>{var s;t.pattern||(s=t.allOf)!=null&&s.some(a=>a.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&n.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:processRegExp(e,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):setResponseValueAndErrors(t,"pattern",processRegExp(e,n),r,n)},processRegExp=(t,e)=>{var d;const r=typeof t=="function"?t():t;if(!e.applyRegexFlags||!r.flags)return r.source;const n={i:r.flags.includes("i"),m:r.flags.includes("m"),s:r.flags.includes("s")},s=n.i?r.source.toLowerCase():r.source;let a="",o=!1,l=!1,c=!1;for(let p=0;p<s.length;p++){if(o){a+=s[p],o=!1;continue}if(n.i){if(l){if(s[p].match(/[a-z]/)){c?(a+=s[p],a+=`${s[p-2]}-${s[p]}`.toUpperCase(),c=!1):s[p+1]==="-"&&((d=s[p+2])!=null&&d.match(/[a-z]/))?(a+=s[p],c=!0):a+=`${s[p]}${s[p].toUpperCase()}`;continue}}else if(s[p].match(/[a-z]/)){a+=`[${s[p]}${s[p].toUpperCase()}]`;continue}}if(n.m){if(s[p]==="^"){a+=`(^|(?<=[\r
]))`;continue}else if(s[p]==="$"){a+=`($|(?=[\r
]))`;continue}}if(n.s&&s[p]==="."){a+=l?`${s[p]}\r
`:`[${s[p]}\r
]`;continue}a+=s[p],s[p]==="\\"?o=!0:l&&s[p]==="]"?l=!1:!l&&s[p]==="["&&(l=!0)}try{const p=new RegExp(a)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),r.source}return a};function parseRecordDef(t,e){var n,s,a,o;if(e.target==="openApi3"&&((n=t.keyType)==null?void 0:n._def.typeName)===ZodFirstPartyTypeKind.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((l,c)=>({...l,[c]:parseDef(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",c]})??{}}),{}),additionalProperties:!1};const r={type:"object",additionalProperties:parseDef(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??{}};if(e.target==="openApi3")return r;if(((s=t.keyType)==null?void 0:s._def.typeName)===ZodFirstPartyTypeKind.ZodString&&((a=t.keyType._def.checks)!=null&&a.length)){const l=Object.entries(parseStringDef(t.keyType._def,e)).reduce((c,[d,p])=>d==="type"?c:{...c,[d]:p},{});return{...r,propertyNames:l}}else if(((o=t.keyType)==null?void 0:o._def.typeName)===ZodFirstPartyTypeKind.ZodEnum)return{...r,propertyNames:{enum:t.keyType._def.values}};return r}function parseMapDef(t,e){if(e.mapStrategy==="record")return parseRecordDef(t,e);const r=parseDef(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},n=parseDef(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[r,n],minItems:2,maxItems:2}}}function parseNativeEnumDef(t){const e=t.values,n=Object.keys(t.values).filter(a=>typeof e[e[a]]!="number").map(a=>e[a]),s=Array.from(new Set(n.map(a=>typeof a)));return{type:s.length===1?s[0]==="string"?"string":"number":["string","number"],enum:n}}function parseNeverDef(){return{not:{}}}function parseNullDef(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const primitiveMappings={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function parseUnionDef(t,e){if(e.target==="openApi3")return asAnyOf(t,e);const r=t.options instanceof Map?Array.from(t.options.values()):t.options;if(r.every(n=>n._def.typeName in primitiveMappings&&(!n._def.checks||!n._def.checks.length))){const n=r.reduce((s,a)=>{const o=primitiveMappings[a._def.typeName];return o&&!s.includes(o)?[...s,o]:s},[]);return{type:n.length>1?n:n[0]}}else if(r.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){const n=r.reduce((s,a)=>{const o=typeof a._def.value;switch(o){case"string":case"number":case"boolean":return[...s,o];case"bigint":return[...s,"integer"];case"object":if(a._def.value===null)return[...s,"null"];case"symbol":case"undefined":case"function":default:return s}},[]);if(n.length===r.length){const s=n.filter((a,o,l)=>l.indexOf(a)===o);return{type:s.length>1?s:s[0],enum:r.reduce((a,o)=>a.includes(o._def.value)?a:[...a,o._def.value],[])}}}else if(r.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((n,s)=>[...n,...s._def.values.filter(a=>!n.includes(a))],[])};return asAnyOf(t,e)}const asAnyOf=(t,e)=>{const r=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((n,s)=>parseDef(n._def,{...e,currentPath:[...e.currentPath,"anyOf",`${s}`]})).filter(n=>!!n&&(!e.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return r.length?{anyOf:r}:void 0};function parseNullableDef(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"||e.nullableStrategy==="property"?{type:primitiveMappings[t.innerType._def.typeName],nullable:!0}:{type:[primitiveMappings[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const n=parseDef(t.innerType._def,{...e,currentPath:[...e.currentPath]});return n&&"$ref"in n?{allOf:[n],nullable:!0}:n&&{...n,nullable:!0}}const r=parseDef(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}function parseNumberDef(t,e){const r={type:"number"};if(!t.checks)return r;for(const n of t.checks)switch(n.kind){case"int":r.type="integer",addErrorMessage(r,"type",n.message,e);break;case"min":e.target==="jsonSchema7"?n.inclusive?setResponseValueAndErrors(r,"minimum",n.value,n.message,e):setResponseValueAndErrors(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),setResponseValueAndErrors(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?setResponseValueAndErrors(r,"maximum",n.value,n.message,e):setResponseValueAndErrors(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),setResponseValueAndErrors(r,"maximum",n.value,n.message,e));break;case"multipleOf":setResponseValueAndErrors(r,"multipleOf",n.value,n.message,e);break}return r}function decideAdditionalProperties(t,e){return e.removeAdditionalStrategy==="strict"?t.catchall._def.typeName==="ZodNever"?t.unknownKeys!=="strict":parseDef(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0:t.catchall._def.typeName==="ZodNever"?t.unknownKeys==="passthrough":parseDef(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0}function parseObjectDef(t,e){const r={type:"object",...Object.entries(t.shape()).reduce((n,[s,a])=>{if(a===void 0||a._def===void 0)return n;const o=[...e.currentPath,"properties",s],l=parseDef(a._def,{...e,currentPath:o,propertyPath:o});return l===void 0?n:(e.openaiStrictMode&&a.isOptional()&&!a.isNullable()&&console.warn(`Zod field at \`${o.join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required
This will become an error in a future version of the SDK.`),{properties:{...n.properties,[s]:l},required:a.isOptional()&&!e.openaiStrictMode?n.required:[...n.required,s]})},{properties:{},required:[]}),additionalProperties:decideAdditionalProperties(t,e)};return r.required.length||delete r.required,r}const parseOptionalDef=(t,e)=>{var n;if(e.currentPath.toString()===((n=e.propertyPath)==null?void 0:n.toString()))return parseDef(t.innerType._def,e);const r=parseDef(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return r?{anyOf:[{not:{}},r]}:{}},parsePipelineDef=(t,e)=>{if(e.pipeStrategy==="input")return parseDef(t.in._def,e);if(e.pipeStrategy==="output")return parseDef(t.out._def,e);const r=parseDef(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),n=parseDef(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(s=>s!==void 0)}};function parsePromiseDef(t,e){return parseDef(t.type._def,e)}function parseSetDef(t,e){const n={type:"array",uniqueItems:!0,items:parseDef(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&setResponseValueAndErrors(n,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&setResponseValueAndErrors(n,"maxItems",t.maxSize.value,t.maxSize.message,e),n}function parseTupleDef(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((r,n)=>parseDef(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[]),additionalItems:parseDef(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((r,n)=>parseDef(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[])}}function parseUndefinedDef(){return{not:{}}}function parseUnknownDef(){return{}}const parseReadonlyDef=(t,e)=>parseDef(t.innerType._def,e);function parseDef(t,e,r=!1){var o;const n=e.seen.get(t);if(e.override){const l=(o=e.override)==null?void 0:o.call(e,t,e,n,r);if(l!==ignoreOverride)return l}if(n&&!r){const l=get$ref(n,e);if(l!==void 0)return"$ref"in l&&e.seenRefs.add(l.$ref),l}const s={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,s);const a=selectParser(t,t.typeName,e,r);return a&&addMeta(t,e,a),s.jsonSchema=a,a}const get$ref=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"extract-to-root":const r=t.path.slice(e.basePath.length+1).join("_");return r!==e.name&&e.nameStrategy==="duplicate-ref"&&(e.definitions[r]=t.def),{$ref:[...e.basePath,e.definitionPath,r].join("/")};case"relative":return{$ref:getRelativePath(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((n,s)=>e.currentPath[s]===n)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},getRelativePath=(t,e)=>{let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];r++);return[(t.length-r).toString(),...e.slice(r)].join("/")},selectParser=(t,e,r,n)=>{switch(e){case ZodFirstPartyTypeKind.ZodString:return parseStringDef(t,r);case ZodFirstPartyTypeKind.ZodNumber:return parseNumberDef(t,r);case ZodFirstPartyTypeKind.ZodObject:return parseObjectDef(t,r);case ZodFirstPartyTypeKind.ZodBigInt:return parseBigintDef(t,r);case ZodFirstPartyTypeKind.ZodBoolean:return parseBooleanDef();case ZodFirstPartyTypeKind.ZodDate:return parseDateDef(t,r);case ZodFirstPartyTypeKind.ZodUndefined:return parseUndefinedDef();case ZodFirstPartyTypeKind.ZodNull:return parseNullDef(r);case ZodFirstPartyTypeKind.ZodArray:return parseArrayDef(t,r);case ZodFirstPartyTypeKind.ZodUnion:case ZodFirstPartyTypeKind.ZodDiscriminatedUnion:return parseUnionDef(t,r);case ZodFirstPartyTypeKind.ZodIntersection:return parseIntersectionDef(t,r);case ZodFirstPartyTypeKind.ZodTuple:return parseTupleDef(t,r);case ZodFirstPartyTypeKind.ZodRecord:return parseRecordDef(t,r);case ZodFirstPartyTypeKind.ZodLiteral:return parseLiteralDef(t,r);case ZodFirstPartyTypeKind.ZodEnum:return parseEnumDef(t);case ZodFirstPartyTypeKind.ZodNativeEnum:return parseNativeEnumDef(t);case ZodFirstPartyTypeKind.ZodNullable:return parseNullableDef(t,r);case ZodFirstPartyTypeKind.ZodOptional:return parseOptionalDef(t,r);case ZodFirstPartyTypeKind.ZodMap:return parseMapDef(t,r);case ZodFirstPartyTypeKind.ZodSet:return parseSetDef(t,r);case ZodFirstPartyTypeKind.ZodLazy:return parseDef(t.getter()._def,r);case ZodFirstPartyTypeKind.ZodPromise:return parsePromiseDef(t,r);case ZodFirstPartyTypeKind.ZodNaN:case ZodFirstPartyTypeKind.ZodNever:return parseNeverDef();case ZodFirstPartyTypeKind.ZodEffects:return parseEffectsDef(t,r,n);case ZodFirstPartyTypeKind.ZodAny:return parseAnyDef();case ZodFirstPartyTypeKind.ZodUnknown:return parseUnknownDef();case ZodFirstPartyTypeKind.ZodDefault:return parseDefaultDef(t,r);case ZodFirstPartyTypeKind.ZodBranded:return parseBrandedDef(t,r);case ZodFirstPartyTypeKind.ZodReadonly:return parseReadonlyDef(t,r);case ZodFirstPartyTypeKind.ZodCatch:return parseCatchDef(t,r);case ZodFirstPartyTypeKind.ZodPipeline:return parsePipelineDef(t,r);case ZodFirstPartyTypeKind.ZodFunction:case ZodFirstPartyTypeKind.ZodVoid:case ZodFirstPartyTypeKind.ZodSymbol:return;default:return(s=>{})()}},addMeta=(t,e,r)=>(t.description&&(r.description=t.description,e.markdownDescription&&(r.markdownDescription=t.description)),r),zodToJsonSchema$1=(t,e)=>{const r=getRefs(e),n=typeof e=="string"?e:(e==null?void 0:e.nameStrategy)==="title"||e==null?void 0:e.name,s=parseDef(t._def,n===void 0?r:{...r,currentPath:[...r.basePath,r.definitionPath,n]},!1)??{},a=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;a!==void 0&&(s.title=a);const o=(()=>{if(isEmptyObj(r.definitions))return;const c={},d=new Set;for(let p=0;p<500;p++){const g=Object.entries(r.definitions).filter(([y])=>!d.has(y));if(g.length===0)break;for(const[y,x]of g)c[y]=parseDef(zodDef(x),{...r,currentPath:[...r.basePath,r.definitionPath,y]},!0)??{},d.add(y)}return c})(),l=n===void 0?o?{...s,[r.definitionPath]:o}:s:r.nameStrategy==="duplicate-ref"?{...s,...o||r.seenRefs.size?{[r.definitionPath]:{...o,...r.seenRefs.size?{[n]:s}:void 0}}:void 0}:{$ref:[...r.$refStrategy==="relative"?[]:r.basePath,r.definitionPath,n].join("/"),[r.definitionPath]:{...o,[n]:s}};return r.target==="jsonSchema7"?l.$schema="http://json-schema.org/draft-07/schema#":r.target==="jsonSchema2019-09"&&(l.$schema="https://json-schema.org/draft/2019-09/schema#"),l};function zodToJsonSchema(t,e){return zodToJsonSchema$1(t,{openaiStrictMode:!0,name:e.name,nameStrategy:"duplicate-ref",$refStrategy:"extract-to-root",nullableStrategy:"property"})}function zodResponseFormat(t,e,r){return makeParseableResponseFormat({type:"json_schema",json_schema:{...r,name:e,strict:!0,schema:zodToJsonSchema(t,{name:e})}},n=>t.parse(JSON.parse(n)))}function getEndpoint(t){const{azureOpenAIApiDeploymentName:e,azureOpenAIApiInstanceName:r,azureOpenAIApiKey:n,azureOpenAIBasePath:s,baseURL:a,azureADTokenProvider:o,azureOpenAIEndpoint:l}=t;if((n||o)&&s&&e)return`${s}/${e}`;if((n||o)&&l&&e)return`${l}/openai/deployments/${e}`;if(n||o){if(!r)throw new Error("azureOpenAIApiInstanceName is required when using azureOpenAIApiKey");if(!e)throw new Error("azureOpenAIApiDeploymentName is a required parameter when using azureOpenAIApiKey");return`https://${r}.openai.azure.com/openai/deployments/${e}`}return a}function isStructuredTool(t){return t!==void 0&&Array.isArray(t.lc_namespace)}function isRunnableToolLike(t){return t!==void 0&&Runnable.isRunnable(t)&&"lc_name"in t.constructor&&typeof t.constructor.lc_name=="function"&&t.constructor.lc_name()==="RunnableToolLike"}function isStructuredToolParams(t){return!!t&&typeof t=="object"&&"name"in t&&"schema"in t&&(isZodSchema$1(t.schema)||t.schema!=null&&typeof t.schema=="object"&&"type"in t.schema&&typeof t.schema.type=="string"&&["null","boolean","object","array","number","string"].includes(t.schema.type))}function isLangChainTool(t){return isStructuredToolParams(t)||isRunnableToolLike(t)||isStructuredTool(t)}function toJsonSchema(t){return isZodSchema$1(t)?zodToJsonSchema$2(t):t}function convertToOpenAIFunction(t,e){return{name:t.name,description:t.description,parameters:toJsonSchema(t.schema)}}function convertToOpenAITool(t,e){let r;return isLangChainTool(t)?r={type:"function",function:convertToOpenAIFunction(t)}:r=t,r}function addLangChainErrorFields(t,e){return t.lc_error_code=e,t.message=`${t.message}

Troubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${e}/
`,t}function wrapOpenAIClientError(t){let e;return t.constructor.name===APIConnectionTimeoutError.name?(e=new Error(t.message),e.name="TimeoutError"):t.constructor.name===APIUserAbortError.name?(e=new Error(t.message),e.name="AbortError"):t.status===400&&t.message.includes("tool_calls")?e=addLangChainErrorFields(t,"INVALID_TOOL_RESULTS"):t.status===401?e=addLangChainErrorFields(t,"MODEL_AUTHENTICATION"):t.status===429?e=addLangChainErrorFields(t,"MODEL_RATE_LIMIT"):t.status===404?e=addLangChainErrorFields(t,"MODEL_NOT_FOUND"):e=t,e}function formatToOpenAIToolChoice(t){if(t)return t==="any"||t==="required"?"required":t==="auto"?"auto":t==="none"?"none":typeof t=="string"?{type:"function",function:{name:t}}:t}function isAnyOfProp(t){return t.anyOf!==void 0&&Array.isArray(t.anyOf)}function formatFunctionDefinitions(t){const e=["namespace functions {",""];for(const r of t)r.description&&e.push(`// ${r.description}`),Object.keys(r.parameters.properties??{}).length>0?(e.push(`type ${r.name} = (_: {`),e.push(formatObjectProperties(r.parameters,0)),e.push("}) => any;")):e.push(`type ${r.name} = () => any;`),e.push("");return e.push("} // namespace functions"),e.join(`
`)}function formatObjectProperties(t,e){var n;const r=[];for(const[s,a]of Object.entries(t.properties??{}))a.description&&e<2&&r.push(`// ${a.description}`),(n=t.required)!=null&&n.includes(s)?r.push(`${s}: ${formatType(a,e)},`):r.push(`${s}?: ${formatType(a,e)},`);return r.map(s=>" ".repeat(e)+s).join(`
`)}function formatType(t,e){if(isAnyOfProp(t))return t.anyOf.map(r=>formatType(r,e)).join(" | ");switch(t.type){case"string":return t.enum?t.enum.map(r=>`"${r}"`).join(" | "):"string";case"number":return t.enum?t.enum.map(r=>`${r}`).join(" | "):"number";case"integer":return t.enum?t.enum.map(r=>`${r}`).join(" | "):"number";case"boolean":return"boolean";case"null":return"null";case"object":return["{",formatObjectProperties(t,e+2),"}"].join(`
`);case"array":return t.items?`${formatType(t.items,e)}[]`:"any[]";default:return""}}function _convertToOpenAITool(t,e){let r;return isLangChainTool(t)?r=convertToOpenAITool(t):r=t,(e==null?void 0:e.strict)!==void 0&&(r.function.strict=e.strict),r}function extractGenericMessageCustomRole(t){return t.role!=="system"&&t.role!=="developer"&&t.role!=="assistant"&&t.role!=="user"&&t.role!=="function"&&t.role!=="tool"&&console.warn(`Unknown message role: ${t.role}`),t.role}function messageToOpenAIRole(t){const e=t._getType();switch(e){case"system":return"system";case"ai":return"assistant";case"human":return"user";case"function":return"function";case"tool":return"tool";case"generic":{if(!ChatMessage.isInstance(t))throw new Error("Invalid generic chat message");return extractGenericMessageCustomRole(t)}default:throw new Error(`Unknown message type: ${e}`)}}const completionsApiContentBlockConverter={providerName:"ChatOpenAI",fromStandardTextBlock(t){return{type:"text",text:t.text}},fromStandardImageBlock(t){var e,r;if(t.source_type==="url")return{type:"image_url",image_url:{url:t.url,...(e=t.metadata)!=null&&e.detail?{detail:t.metadata.detail}:{}}};if(t.source_type==="base64")return{type:"image_url",image_url:{url:`data:${t.mime_type??""};base64,${t.data}`,...(r=t.metadata)!=null&&r.detail?{detail:t.metadata.detail}:{}}};throw new Error(`Image content blocks with source_type ${t.source_type} are not supported for ChatOpenAI`)},fromStandardAudioBlock(t){if(t.source_type==="url"){const e=parseBase64DataUrl({dataUrl:t.url});if(!e)throw new Error(`URL audio blocks with source_type ${t.source_type} must be formatted as a data URL for ChatOpenAI`);const r=e.mime_type||t.mime_type||"";let n;try{n=parseMimeType(r)}catch{throw new Error(`Audio blocks with source_type ${t.source_type} must have mime type of audio/wav or audio/mp3`)}if(n.type!=="audio"||n.subtype!=="wav"&&n.subtype!=="mp3")throw new Error(`Audio blocks with source_type ${t.source_type} must have mime type of audio/wav or audio/mp3`);return{type:"input_audio",input_audio:{format:n.subtype,data:e.data}}}if(t.source_type==="base64"){let e;try{e=parseMimeType(t.mime_type??"")}catch{throw new Error(`Audio blocks with source_type ${t.source_type} must have mime type of audio/wav or audio/mp3`)}if(e.type!=="audio"||e.subtype!=="wav"&&e.subtype!=="mp3")throw new Error(`Audio blocks with source_type ${t.source_type} must have mime type of audio/wav or audio/mp3`);return{type:"input_audio",input_audio:{format:e.subtype,data:t.data}}}throw new Error(`Audio content blocks with source_type ${t.source_type} are not supported for ChatOpenAI`)},fromStandardFileBlock(t){var e,r,n,s,a,o,l,c,d,p;if(t.source_type==="url"){if(!parseBase64DataUrl({dataUrl:t.url}))throw new Error(`URL file blocks with source_type ${t.source_type} must be formatted as a data URL for ChatOpenAI`);return{type:"file",file:{file_data:t.url,...(e=t.metadata)!=null&&e.filename||(r=t.metadata)!=null&&r.name?{filename:((n=t.metadata)==null?void 0:n.filename)||((s=t.metadata)==null?void 0:s.name)}:{}}}}if(t.source_type==="base64")return{type:"file",file:{file_data:`data:${t.mime_type??""};base64,${t.data}`,...(a=t.metadata)!=null&&a.filename||(o=t.metadata)!=null&&o.name||(l=t.metadata)!=null&&l.title?{filename:((c=t.metadata)==null?void 0:c.filename)||((d=t.metadata)==null?void 0:d.name)||((p=t.metadata)==null?void 0:p.title)}:{}}};if(t.source_type==="id")return{type:"file",file:{file_id:t.id}};throw new Error(`File content blocks with source_type ${t.source_type} are not supported for ChatOpenAI`)}};function _convertMessagesToOpenAIParams(t,e){return t.flatMap(r=>{var o;let n=messageToOpenAIRole(r);n==="system"&&isReasoningModel(e)&&(n="developer");const s=typeof r.content=="string"?r.content:r.content.map(l=>isDataContentBlock(l)?convertToProviderContentBlock(l,completionsApiContentBlockConverter):l),a={role:n,content:s};if(r.name!=null&&(a.name=r.name),r.additional_kwargs.function_call!=null&&(a.function_call=r.additional_kwargs.function_call,a.content=""),isAIMessage(r)&&((o=r.tool_calls)!=null&&o.length)?(a.tool_calls=r.tool_calls.map(convertLangChainToolCallToOpenAI),a.content=""):(r.additional_kwargs.tool_calls!=null&&(a.tool_calls=r.additional_kwargs.tool_calls),r.tool_call_id!=null&&(a.tool_call_id=r.tool_call_id)),r.additional_kwargs.audio&&typeof r.additional_kwargs.audio=="object"&&"id"in r.additional_kwargs.audio){const l={role:"assistant",audio:{id:r.additional_kwargs.audio.id}};return[a,l]}return a})}const _FUNCTION_CALL_IDS_MAP_KEY="__openai_function_call_ids__";function _convertReasoningSummaryToOpenAIResponsesParams(t){const e=(t.summary.length>1?t.summary.reduce((r,n)=>{const s=r.at(-1);return s.index===n.index?s.text+=n.text:r.push(n),r},[{...t.summary[0]}]):t.summary).map(r=>Object.fromEntries(Object.entries(r).filter(([n])=>n!=="index")));return{...t,summary:e}}function _convertMessagesToOpenAIResponsesParams(t,e,r){var o;const n=t.filter(l=>isAIMessage(l)).pop(),s=(o=n==null?void 0:n.response_metadata)==null?void 0:o.id;return(s&&s.startsWith("resp_")&&!r?t.slice(t.indexOf(n)+1):t).flatMap(l=>{var p,g,y;let c=messageToOpenAIRole(l);if(c==="system"&&isReasoningModel(e)&&(c="developer"),c==="function")throw new Error("Function messages are not supported in Responses API");if(c==="tool"){const x=l;return((p=x.additional_kwargs)==null?void 0:p.type)==="computer_call_output"?{type:"computer_call_output",output:(()=>{if(typeof x.content=="string")return{type:"computer_screenshot",image_url:x.content};if(Array.isArray(x.content)){const S=x.content.find(C=>C.type==="computer_screenshot");if(S)return S;const k=x.content.find(C=>C.type==="image_url");if(k)return{type:"computer_screenshot",image_url:typeof k.image_url=="string"?k.image_url:k.image_url.url}}throw new Error("Invalid computer call output")})(),call_id:x.tool_call_id}:{type:"function_call_output",call_id:x.tool_call_id,id:x.id,output:typeof x.content!="string"?JSON.stringify(x.content):x.content}}if(c==="assistant"){if(!r&&l.response_metadata.output!=null&&Array.isArray(l.response_metadata.output)&&l.response_metadata.output.length>0&&l.response_metadata.output.every(P=>"type"in P))return l.response_metadata.output;const x=[];if(!r&&l.additional_kwargs.reasoning!=null&&(R=>typeof R=="object"&&R!=null&&"type"in R&&R.type==="reasoning")(l.additional_kwargs.reasoning)){const R=_convertReasoningSummaryToOpenAIResponsesParams(l.additional_kwargs.reasoning);x.push(R)}let{content:E}=l;l.additional_kwargs.refusal!=null&&(typeof E=="string"&&(E=[{type:"output_text",text:E,annotations:[]}]),E=[...E,{type:"refusal",refusal:l.additional_kwargs.refusal}]),x.push({type:"message",role:"assistant",...l.id&&!r?{id:l.id}:{},content:typeof E=="string"?E:E.flatMap(P=>P.type==="text"?{type:"output_text",text:P.text,annotations:P.annotations??[]}:P.type==="output_text"||P.type==="refusal"?P:[])});const S=l.additional_kwargs[_FUNCTION_CALL_IDS_MAP_KEY];isAIMessage(l)&&((g=l.tool_calls)!=null&&g.length)?x.push(...l.tool_calls.map(P=>({type:"function_call",name:P.name,arguments:JSON.stringify(P.args),call_id:P.id,...r?{id:S==null?void 0:S[P.id]}:{}}))):l.additional_kwargs.tool_calls!=null&&x.push(...l.additional_kwargs.tool_calls.map(P=>({type:"function_call",name:P.function.name,call_id:P.id,...r?{id:S==null?void 0:S[P.id]}:{},arguments:P.function.arguments})));const k=(y=l.response_metadata.output)!=null&&y.length?l.response_metadata.output:l.additional_kwargs.tool_outputs;let C=[];if(k!=null){const P=k;C=P==null?void 0:P.filter(R=>R.type==="computer_call"),C.length>0&&x.push(...C)}return x}const d=typeof l.content=="string"?l.content:l.content.flatMap(x=>{if(isDataContentBlock(x))return convertToProviderContentBlock(x,completionsApiContentBlockConverter);if(x.type==="text")return{type:"input_text",text:x.text};if(x.type==="image_url"){const E=typeof x.image_url=="string"?x.image_url:x.image_url.url,S=typeof x.image_url=="string"?"auto":x.image_url.detail;return{type:"input_image",image_url:E,detail:S}}return x.type==="input_text"||x.type==="input_image"||x.type==="input_file"?x:[]});return c==="user"||c==="system"||c==="developer"?{type:"message",role:c,content:d}:(console.warn(`Unsupported role found when converting to OpenAI Responses API: ${c}`),[])})}function _convertOpenAIResponsesMessageToBaseMessage(t){if(t.error){const l=new Error(t.error.message);throw l.name=t.error.code,l}let e;const r=[],n=[],s=[],a={model:t.model,created_at:t.created_at,id:t.id,incomplete_details:t.incomplete_details,metadata:t.metadata,object:t.object,status:t.status,user:t.user,model_name:t.model},o={};for(const l of t.output)if(l.type==="message")e=l.id,r.push(...l.content.flatMap(c=>c.type==="output_text"?("parsed"in c&&c.parsed!=null&&(o.parsed=c.parsed),{type:"text",text:c.text,annotations:c.annotations}):c.type==="refusal"?(o.refusal=c.refusal,[]):c));else if(l.type==="function_call"){const c={function:{name:l.name,arguments:l.arguments},id:l.call_id};try{n.push(parseToolCall(c,{returnId:!0}))}catch(d){let p;typeof d=="object"&&d!=null&&"message"in d&&typeof d.message=="string"&&(p=d.message),s.push(makeInvalidToolCall(c,p))}o[_FUNCTION_CALL_IDS_MAP_KEY]??(o[_FUNCTION_CALL_IDS_MAP_KEY]={}),l.id&&(o[_FUNCTION_CALL_IDS_MAP_KEY][l.call_id]=l.id)}else l.type==="reasoning"?o.reasoning=l:(o.tool_outputs??(o.tool_outputs=[]),o.tool_outputs.push(l));return new AIMessage({id:e,content:r,tool_calls:n,invalid_tool_calls:s,usage_metadata:t.usage,additional_kwargs:o,response_metadata:a})}function _convertOpenAIResponsesDeltaToBaseMessageChunk(t){var c,d;const e=[];let r={},n;const s=[],a={},o={};let l;if(t.type==="response.output_text.delta")e.push({type:"text",text:t.delta,index:t.content_index});else if(t.type==="response.output_text.annotation.added")e.push({type:"text",text:"",annotations:[t.annotation],index:t.content_index});else if(t.type==="response.output_item.added"&&t.item.type==="message")l=t.item.id;else if(t.type==="response.output_item.added"&&t.item.type==="function_call")s.push({type:"tool_call_chunk",name:t.item.name,args:t.item.arguments,id:t.item.call_id,index:t.output_index}),o[_FUNCTION_CALL_IDS_MAP_KEY]={[t.item.call_id]:t.item.id};else if(t.type==="response.output_item.done"&&(t.item.type==="web_search_call"||t.item.type==="file_search_call"||t.item.type==="computer_call"))o.tool_outputs=[t.item];else if(t.type==="response.created")a.id=t.response.id,a.model_name=t.response.model,a.model=t.response.model;else if(t.type==="response.completed"){const p=_convertOpenAIResponsesMessageToBaseMessage(t.response);n=t.response.usage,((d=(c=t.response.text)==null?void 0:c.format)==null?void 0:d.type)==="json_schema"&&(o.parsed??(o.parsed=JSON.parse(p.text)));for(const[g,y]of Object.entries(t.response))g!=="id"&&(a[g]=y)}else if(t.type==="response.function_call_arguments.delta")s.push({type:"tool_call_chunk",args:t.delta,index:t.output_index});else if(t.type==="response.web_search_call.completed"||t.type==="response.file_search_call.completed")r={tool_outputs:{id:t.item_id,type:t.type.replace("response.","").replace(".completed",""),status:"completed"}};else if(t.type==="response.refusal.done")o.refusal=t.refusal;else if(t.type==="response.output_item.added"&&"item"in t&&t.item.type==="reasoning"){const p=t.item.summary?t.item.summary.map((g,y)=>({...g,index:y})):void 0;o.reasoning={id:t.item.id,type:t.item.type,...p?{summary:p}:{}}}else if(t.type==="response.reasoning_summary_part.added")o.reasoning={type:"reasoning",summary:[{...t.part,index:t.summary_index}]};else if(t.type==="response.reasoning_summary_text.delta")o.reasoning={type:"reasoning",summary:[{text:t.delta,type:"summary_text",index:t.summary_index}]};else return null;return new ChatGenerationChunk({text:e.map(p=>p.text).join(""),message:new AIMessageChunk({id:l,content:e,tool_call_chunks:s,usage_metadata:n,additional_kwargs:o,response_metadata:a}),generationInfo:r})}function isBuiltInTool(t){return"type"in t&&t.type!=="function"}function isBuiltInToolChoice(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type!=="function"}function _convertChatOpenAIToolTypeToOpenAITool(t,e){return isOpenAITool(t)?(e==null?void 0:e.strict)!==void 0?{...t,function:{...t.function,strict:e.strict}}:t:_convertToOpenAITool(t,e)}function isReasoningModel(t){return t&&/^o\d/.test(t)}class ChatOpenAI extends BaseChatModel{static lc_name(){return"ChatOpenAI"}get callKeys(){return[...super.callKeys,"options","function_call","functions","tools","tool_choice","promptIndex","response_format","seed","reasoning_effort"]}get lc_secrets(){return{openAIApiKey:"OPENAI_API_KEY",apiKey:"OPENAI_API_KEY",organization:"OPENAI_ORGANIZATION"}}get lc_aliases(){return{modelName:"model",openAIApiKey:"openai_api_key",apiKey:"openai_api_key"}}get lc_serializable_keys(){return["configuration","logprobs","topLogprobs","prefixMessages","supportsStrictToolCalling","modalities","audio","reasoningEffort","temperature","maxTokens","topP","frequencyPenalty","presencePenalty","n","logitBias","user","streaming","streamUsage","modelName","model","modelKwargs","stop","stopSequences","timeout","openAIApiKey","apiKey","cache","maxConcurrency","maxRetries","verbose","callbacks","tags","metadata","disableStreaming","useResponsesApi","zdrEnabled","reasoning"]}constructor(e){var r,n,s;super(e??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo"}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stopSequences",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"streamUsage",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topLogprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"openAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"organization",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__includeRawResponse",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"supportsStrictToolCalling",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"audio",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modalities",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reasoningEffort",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reasoning",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"useResponsesApi",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"zdrEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.openAIApiKey=(e==null?void 0:e.apiKey)??(e==null?void 0:e.openAIApiKey)??((r=e==null?void 0:e.configuration)==null?void 0:r.apiKey)??getEnvironmentVariable("OPENAI_API_KEY"),this.apiKey=this.openAIApiKey,this.organization=((n=e==null?void 0:e.configuration)==null?void 0:n.organization)??getEnvironmentVariable("OPENAI_ORGANIZATION"),this.model=(e==null?void 0:e.model)??(e==null?void 0:e.modelName)??this.model,this.modelName=this.model,this.modelKwargs=(e==null?void 0:e.modelKwargs)??{},this.timeout=e==null?void 0:e.timeout,this.temperature=(e==null?void 0:e.temperature)??this.temperature,this.topP=(e==null?void 0:e.topP)??this.topP,this.frequencyPenalty=(e==null?void 0:e.frequencyPenalty)??this.frequencyPenalty,this.presencePenalty=(e==null?void 0:e.presencePenalty)??this.presencePenalty,this.logprobs=e==null?void 0:e.logprobs,this.topLogprobs=e==null?void 0:e.topLogprobs,this.n=(e==null?void 0:e.n)??this.n,this.logitBias=e==null?void 0:e.logitBias,this.stop=(e==null?void 0:e.stopSequences)??(e==null?void 0:e.stop),this.stopSequences=this.stop,this.user=e==null?void 0:e.user,this.__includeRawResponse=e==null?void 0:e.__includeRawResponse,this.audio=e==null?void 0:e.audio,this.modalities=e==null?void 0:e.modalities,this.reasoningEffort=(e==null?void 0:e.reasoningEffort)??((s=e==null?void 0:e.reasoning)==null?void 0:s.effort),this.reasoning=(e==null?void 0:e.reasoning)??(e!=null&&e.reasoningEffort?{effort:e.reasoningEffort}:void 0),this.maxTokens=(e==null?void 0:e.maxCompletionTokens)??(e==null?void 0:e.maxTokens),this.useResponsesApi=(e==null?void 0:e.useResponsesApi)??this.useResponsesApi,this.disableStreaming=(e==null?void 0:e.disableStreaming)??this.disableStreaming,this.model==="o1"&&(this.disableStreaming=!0),this.streaming=(e==null?void 0:e.streaming)??!1,this.disableStreaming&&(this.streaming=!1),this.streamUsage=(e==null?void 0:e.streamUsage)??this.streamUsage,this.disableStreaming&&(this.streamUsage=!1),this.clientConfig={apiKey:this.apiKey,organization:this.organization,dangerouslyAllowBrowser:!0,...e==null?void 0:e.configuration},(e==null?void 0:e.supportsStrictToolCalling)!==void 0&&(this.supportsStrictToolCalling=e.supportsStrictToolCalling),this.zdrEnabled=(e==null?void 0:e.zdrEnabled)??!1}getLsParams(e){const r=this.invocationParams(e);return{ls_provider:"openai",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:r.temperature??void 0,ls_max_tokens:r.max_tokens??void 0,ls_stop:e.stop}}bindTools(e,r){let n;return(r==null?void 0:r.strict)!==void 0?n=r.strict:this.supportsStrictToolCalling!==void 0&&(n=this.supportsStrictToolCalling),this.bind({tools:e.map(s=>isBuiltInTool(s)?s:_convertChatOpenAIToolTypeToOpenAITool(s,{strict:n})),...r})}createResponseFormat(e){return e&&e.type==="json_schema"&&e.json_schema.schema&&isZodSchema(e.json_schema.schema)?zodResponseFormat(e.json_schema.schema,e.json_schema.name,{description:e.json_schema.description}):e}getReasoningParams(e){if(!isReasoningModel(this.model))return;let r;return this.reasoningEffort!==void 0&&(r={effort:this.reasoningEffort}),this.reasoning!==void 0&&(r={...r,...this.reasoning}),(e==null?void 0:e.reasoning_effort)!==void 0&&(r={...r,effort:e.reasoning_effort}),(e==null?void 0:e.reasoning)!==void 0&&(r={...r,...e.reasoning}),r}invocationParams(e,r){var l,c;let n;if((e==null?void 0:e.strict)!==void 0?n=e.strict:this.supportsStrictToolCalling!==void 0&&(n=this.supportsStrictToolCalling),this._useResponseApi(e)){const d={model:this.model,temperature:this.temperature,top_p:this.topP,user:this.user,stream:this.streaming,previous_response_id:e==null?void 0:e.previous_response_id,truncation:e==null?void 0:e.truncation,include:e==null?void 0:e.include,tools:(l=e==null?void 0:e.tools)!=null&&l.length?e.tools.map(g=>isBuiltInTool(g)?g:isOpenAITool(g)?{type:"function",name:g.function.name,parameters:g.function.parameters,description:g.function.description,strict:n}:null).filter(g=>g!==null):void 0,tool_choice:isBuiltInToolChoice(e==null?void 0:e.tool_choice)?e==null?void 0:e.tool_choice:(()=>{const g=formatToOpenAIToolChoice(e==null?void 0:e.tool_choice);if(typeof g=="object"&&"type"in g)return{type:"function",name:g.function.name}})(),text:(()=>{if(e!=null&&e.text)return e.text;const g=this.createResponseFormat(e==null?void 0:e.response_format);return(g==null?void 0:g.type)==="json_schema"?g.json_schema.schema!=null?{format:{type:"json_schema",schema:g.json_schema.schema,description:g.json_schema.description,name:g.json_schema.name,strict:g.json_schema.strict}}:void 0:{format:g}})(),parallel_tool_calls:e==null?void 0:e.parallel_tool_calls,max_output_tokens:this.maxTokens===-1?void 0:this.maxTokens,...this.zdrEnabled?{store:!1}:{},...this.modelKwargs},p=this.getReasoningParams(e);return p!==void 0&&(d.reasoning=p),d}let s={};(e==null?void 0:e.stream_options)!==void 0?s={stream_options:e.stream_options}:this.streamUsage&&(this.streaming||r!=null&&r.streaming)&&(s={stream_options:{include_usage:!0}});const a={model:this.model,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,logprobs:this.logprobs,top_logprobs:this.topLogprobs,n:this.n,logit_bias:this.logitBias,stop:(e==null?void 0:e.stop)??this.stopSequences,user:this.user,stream:this.streaming,functions:e==null?void 0:e.functions,function_call:e==null?void 0:e.function_call,tools:(c=e==null?void 0:e.tools)!=null&&c.length?e.tools.map(d=>_convertChatOpenAIToolTypeToOpenAITool(d,{strict:n})):void 0,tool_choice:formatToOpenAIToolChoice(e==null?void 0:e.tool_choice),response_format:this.createResponseFormat(e==null?void 0:e.response_format),seed:e==null?void 0:e.seed,...s,parallel_tool_calls:e==null?void 0:e.parallel_tool_calls,...this.audio||e!=null&&e.audio?{audio:this.audio||(e==null?void 0:e.audio)}:{},...this.modalities||e!=null&&e.modalities?{modalities:this.modalities||(e==null?void 0:e.modalities)}:{},...this.modelKwargs};(e==null?void 0:e.prediction)!==void 0&&(a.prediction=e.prediction);const o=this.getReasoningParams(e);return o!==void 0&&o.effort!==void 0&&(a.reasoning_effort=o.effort),isReasoningModel(a.model)?a.max_completion_tokens=this.maxTokens===-1?void 0:this.maxTokens:a.max_tokens=this.maxTokens===-1?void 0:this.maxTokens,a}_convertOpenAIChatCompletionMessageToBaseMessage(e,r){const n=e.tool_calls;switch(e.role){case"assistant":{const s=[],a=[];for(const c of n??[])try{s.push(parseToolCall(c,{returnId:!0}))}catch(d){a.push(makeInvalidToolCall(c,d.message))}const o={function_call:e.function_call,tool_calls:n};this.__includeRawResponse!==void 0&&(o.__raw_response=r);const l={model_name:r.model,...r.system_fingerprint?{usage:{...r.usage},system_fingerprint:r.system_fingerprint}:{}};return e.audio&&(o.audio=e.audio),new AIMessage({content:e.content||"",tool_calls:s,invalid_tool_calls:a,additional_kwargs:o,response_metadata:l,id:r.id})}default:return new ChatMessage(e.content||"",e.role??"unknown")}}_convertOpenAIDeltaToBaseMessageChunk(e,r,n){var c,d;const s=e.role??n,a=e.content??"";let o;e.function_call?o={function_call:e.function_call}:e.tool_calls?o={tool_calls:e.tool_calls}:o={},this.__includeRawResponse&&(o.__raw_response=r),e.audio&&(o.audio={...e.audio,index:r.choices[0].index});const l={usage:{...r.usage}};if(s==="user")return new HumanMessageChunk({content:a,response_metadata:l});if(s==="assistant"){const p=[];if(Array.isArray(e.tool_calls))for(const g of e.tool_calls)p.push({name:(c=g.function)==null?void 0:c.name,args:(d=g.function)==null?void 0:d.arguments,id:g.id,index:g.index,type:"tool_call_chunk"});return new AIMessageChunk({content:a,tool_call_chunks:p,additional_kwargs:o,id:r.id,response_metadata:l})}else return s==="system"?new SystemMessageChunk({content:a,response_metadata:l}):s==="developer"?new SystemMessageChunk({content:a,response_metadata:l,additional_kwargs:{__openai_role__:"developer"}}):s==="function"?new FunctionMessageChunk({content:a,additional_kwargs:o,name:e.name,response_metadata:l}):s==="tool"?new ToolMessageChunk({content:a,additional_kwargs:o,tool_call_id:e.tool_call_id,response_metadata:l}):new ChatMessageChunk({content:a,role:s,response_metadata:l})}_identifyingParams(){return{model_name:this.model,...this.invocationParams(),...this.clientConfig}}async*_streamResponseChunks(e,r,n){var d,p,g,y,x,E,S,k,C,P,R;if(this._useResponseApi(r)){const j=e.filter(L=>isAIMessage(L)).pop(),I=(d=j==null?void 0:j.response_metadata)==null?void 0:d.id,O=await this.responseApiWithRetry({...this.invocationParams(r,{streaming:!0}),input:_convertMessagesToOpenAIResponsesParams(e,this.model,this.zdrEnabled),stream:!0,...I&&I.startsWith("resp_")&&!this.zdrEnabled?{previous_response_id:I}:{}},r);for await(const L of O){const B=_convertOpenAIResponsesDeltaToBaseMessageChunk(L);B!=null&&(yield B)}return}const s=_convertMessagesToOpenAIParams(e,this.model),a={...this.invocationParams(r,{streaming:!0}),messages:s,stream:!0};let o;const l=await this.completionWithRetry(a,r);let c;for await(const j of l){const I=(p=j==null?void 0:j.choices)==null?void 0:p[0];if(j.usage&&(c=j.usage),!I)continue;const{delta:O}=I;if(!O)continue;const L=this._convertOpenAIDeltaToBaseMessageChunk(O,j,o);o=O.role??o;const B={prompt:r.promptIndex??0,completion:I.index??0};if(typeof L.content!="string"){console.log("[WARNING]: Received non-string content from OpenAI. This is currently not supported.");continue}const Z={...B};I.finish_reason!=null&&(Z.finish_reason=I.finish_reason,Z.system_fingerprint=j.system_fingerprint,Z.model_name=j.model),this.logprobs&&(Z.logprobs=I.logprobs);const te=new ChatGenerationChunk({message:L,text:L.content,generationInfo:Z});yield te,await(n==null?void 0:n.handleLLMNewToken(te.text??"",B,void 0,void 0,void 0,{chunk:te}))}if(c){const j={...((g=c.prompt_tokens_details)==null?void 0:g.audio_tokens)!==null&&{audio:(y=c.prompt_tokens_details)==null?void 0:y.audio_tokens},...((x=c.prompt_tokens_details)==null?void 0:x.cached_tokens)!==null&&{cache_read:(E=c.prompt_tokens_details)==null?void 0:E.cached_tokens}},I={...((S=c.completion_tokens_details)==null?void 0:S.audio_tokens)!==null&&{audio:(k=c.completion_tokens_details)==null?void 0:k.audio_tokens},...((C=c.completion_tokens_details)==null?void 0:C.reasoning_tokens)!==null&&{reasoning:(P=c.completion_tokens_details)==null?void 0:P.reasoning_tokens}};yield new ChatGenerationChunk({message:new AIMessageChunk({content:"",response_metadata:{usage:{...c}},usage_metadata:{input_tokens:c.prompt_tokens,output_tokens:c.completion_tokens,total_tokens:c.total_tokens,...Object.keys(j).length>0&&{input_token_details:j},...Object.keys(I).length>0&&{output_token_details:I}}}),text:""})}if((R=r.signal)!=null&&R.aborted)throw new Error("AbortError")}identifyingParams(){return this._identifyingParams()}async _responseApiGenerate(e,r,n){var d,p;const s=this.invocationParams(r);if(s.stream){const g=this._streamResponseChunks(e,r,n);let y;for await(const x of g)x.message.response_metadata={...x.generationInfo,...x.message.response_metadata},y=(y==null?void 0:y.concat(x))??x;return{generations:y?[y]:[],llmOutput:{estimatedTokenUsage:(d=y==null?void 0:y.message)==null?void 0:d.usage_metadata}}}const a=e.filter(g=>isAIMessage(g)).pop(),o=(p=a==null?void 0:a.response_metadata)==null?void 0:p.id,l=_convertMessagesToOpenAIResponsesParams(e,this.model,this.zdrEnabled),c=await this.responseApiWithRetry({input:l,...s,...o&&o.startsWith("resp_")&&!this.zdrEnabled?{previous_response_id:o}:{}},{signal:r==null?void 0:r.signal,...r==null?void 0:r.options});return{generations:[{text:c.output_text,message:_convertOpenAIResponsesMessageToBaseMessage(c)}],llmOutput:{id:c.id,estimatedTokenUsage:c.usage?{promptTokens:c.usage.input_tokens,completionTokens:c.usage.output_tokens,totalTokens:c.usage.total_tokens}:void 0}}}_useResponseApi(e){var s,a,o;const r=(s=e==null?void 0:e.tools)==null?void 0:s.some(isBuiltInTool),n=(e==null?void 0:e.previous_response_id)!=null||(e==null?void 0:e.text)!=null||(e==null?void 0:e.truncation)!=null||(e==null?void 0:e.include)!=null||((a=e==null?void 0:e.reasoning)==null?void 0:a.summary)!=null||((o=this.reasoning)==null?void 0:o.summary)!=null;return this.useResponsesApi||r||n}async _generate(e,r,n){var l,c;if(this._useResponseApi(r))return this._responseApiGenerate(e,r,n);const s={},a=this.invocationParams(r),o=_convertMessagesToOpenAIParams(e,this.model);if(a.stream){const d=this._streamResponseChunks(e,r,n),p={};for await(const k of d){k.message.response_metadata={...k.generationInfo,...k.message.response_metadata};const C=((l=k.generationInfo)==null?void 0:l.completion)??0;p[C]===void 0?p[C]=k:p[C]=p[C].concat(k)}const g=Object.entries(p).sort(([k],[C])=>parseInt(k,10)-parseInt(C,10)).map(([k,C])=>C),{functions:y,function_call:x}=this.invocationParams(r),E=await this.getEstimatedTokenCountFromPrompt(e,y,x),S=await this.getNumTokensFromGenerations(g);return s.input_tokens=E,s.output_tokens=S,s.total_tokens=E+S,{generations:g,llmOutput:{estimatedTokenUsage:{promptTokens:s.input_tokens,completionTokens:s.output_tokens,totalTokens:s.total_tokens}}}}else{let d;r.response_format&&r.response_format.type==="json_schema"?d=await this.betaParsedCompletionWithRetry({...a,stream:!1,messages:o},{signal:r==null?void 0:r.signal,...r==null?void 0:r.options}):d=await this.completionWithRetry({...a,stream:!1,messages:o},{signal:r==null?void 0:r.signal,...r==null?void 0:r.options});const{completion_tokens:p,prompt_tokens:g,total_tokens:y,prompt_tokens_details:x,completion_tokens_details:E}=(d==null?void 0:d.usage)??{};p&&(s.output_tokens=(s.output_tokens??0)+p),g&&(s.input_tokens=(s.input_tokens??0)+g),y&&(s.total_tokens=(s.total_tokens??0)+y),((x==null?void 0:x.audio_tokens)!==null||(x==null?void 0:x.cached_tokens)!==null)&&(s.input_token_details={...(x==null?void 0:x.audio_tokens)!==null&&{audio:x==null?void 0:x.audio_tokens},...(x==null?void 0:x.cached_tokens)!==null&&{cache_read:x==null?void 0:x.cached_tokens}}),((E==null?void 0:E.audio_tokens)!==null||(E==null?void 0:E.reasoning_tokens)!==null)&&(s.output_token_details={...(E==null?void 0:E.audio_tokens)!==null&&{audio:E==null?void 0:E.audio_tokens},...(E==null?void 0:E.reasoning_tokens)!==null&&{reasoning:E==null?void 0:E.reasoning_tokens}});const S=[];for(const k of(d==null?void 0:d.choices)??[]){const P={text:((c=k.message)==null?void 0:c.content)??"",message:this._convertOpenAIChatCompletionMessageToBaseMessage(k.message??{role:"assistant"},d)};P.generationInfo={...k.finish_reason?{finish_reason:k.finish_reason}:{},...k.logprobs?{logprobs:k.logprobs}:{}},isAIMessage(P.message)&&(P.message.usage_metadata=s),P.message=new AIMessage(Object.fromEntries(Object.entries(P.message).filter(([R])=>!R.startsWith("lc_")))),S.push(P)}return{generations:S,llmOutput:{tokenUsage:{promptTokens:s.input_tokens,completionTokens:s.output_tokens,totalTokens:s.total_tokens}}}}}async getEstimatedTokenCountFromPrompt(e,r,n){let s=(await this.getNumTokensFromMessages(e)).totalCount;if(r&&n!=="auto"){const a=formatFunctionDefinitions(r);s+=await this.getNumTokens(a),s+=9}return r&&e.find(a=>a._getType()==="system")&&(s-=4),n==="none"?s+=1:typeof n=="object"&&(s+=await this.getNumTokens(n.name)+4),s}async getNumTokensFromGenerations(e){return(await Promise.all(e.map(async n=>{var s;return(s=n.message.additional_kwargs)!=null&&s.function_call?(await this.getNumTokensFromMessages([n.message])).countPerMessage[0]:await this.getNumTokens(n.message.content)}))).reduce((n,s)=>n+s,0)}async getNumTokensFromMessages(e){let r=0,n=0,s=0;this.model==="gpt-3.5-turbo-0301"?(n=4,s=-1):(n=3,s=1);const a=await Promise.all(e.map(async o=>{var y,x,E,S,k,C;const l=await this.getNumTokens(o.content),c=await this.getNumTokens(messageToOpenAIRole(o)),d=o.name!==void 0?s+await this.getNumTokens(o.name):0;let p=l+n+c+d;const g=o;if(g._getType()==="function"&&(p-=2),(y=g.additional_kwargs)!=null&&y.function_call&&(p+=3),(x=g==null?void 0:g.additional_kwargs.function_call)!=null&&x.name&&(p+=await this.getNumTokens((E=g.additional_kwargs.function_call)==null?void 0:E.name)),(S=g.additional_kwargs.function_call)!=null&&S.arguments)try{p+=await this.getNumTokens(JSON.stringify(JSON.parse((k=g.additional_kwargs.function_call)==null?void 0:k.arguments)))}catch(P){console.error("Error parsing function arguments",P,JSON.stringify(g.additional_kwargs.function_call)),p+=await this.getNumTokens((C=g.additional_kwargs.function_call)==null?void 0:C.arguments)}return r+=p,p}));return r+=3,{totalCount:r,countPerMessage:a}}async completionWithRetry(e,r){const n=this._getClientOptions(r);return this.caller.call(async()=>{try{return await this.client.chat.completions.create(e,n)}catch(s){throw wrapOpenAIClientError(s)}})}async responseApiWithRetry(e,r){return this.caller.call(async()=>{var s,a;const n=this._getClientOptions(r);try{return((a=(s=e.text)==null?void 0:s.format)==null?void 0:a.type)==="json_schema"&&!e.stream?await this.client.responses.parse(e,n):await this.client.responses.create(e,n)}catch(o){throw wrapOpenAIClientError(o)}})}async betaParsedCompletionWithRetry(e,r){const n=this._getClientOptions(r);return this.caller.call(async()=>{try{return await this.client.beta.chat.completions.parse(e,n)}catch(s){throw wrapOpenAIClientError(s)}})}_getClientOptions(e){if(!this.client){const n={baseURL:this.clientConfig.baseURL},s=getEndpoint(n),a={...this.clientConfig,baseURL:s,timeout:this.timeout,maxRetries:0};a.baseURL||delete a.baseURL,this.client=new OpenAI$1(a)}return{...this.clientConfig,...e}}_llmType(){return"openai"}_combineLLMOutput(...e){return e.reduce((r,n)=>(n&&n.tokenUsage&&(r.tokenUsage.completionTokens+=n.tokenUsage.completionTokens??0,r.tokenUsage.promptTokens+=n.tokenUsage.promptTokens??0,r.tokenUsage.totalTokens+=n.tokenUsage.totalTokens??0),r),{tokenUsage:{completionTokens:0,promptTokens:0,totalTokens:0}})}withStructuredOutput(e,r){let n,s,a,o;isStructuredOutputMethodParams(e)?(n=e.schema,s=e.name,a=e.method,o=e.includeRaw):(n=e,s=r==null?void 0:r.name,a=r==null?void 0:r.method,o=r==null?void 0:r.includeRaw);let l,c;if((r==null?void 0:r.strict)!==void 0&&a==="jsonMode")throw new Error("Argument `strict` is only supported for `method` = 'function_calling'");if(!this.model.startsWith("gpt-3")&&!this.model.startsWith("gpt-4-")&&this.model!=="gpt-4"?a===void 0&&(a="jsonSchema"):a==="jsonSchema"&&console.warn(`[WARNING]: JSON Schema is not supported for model "${this.model}". Falling back to tool calling.`),a==="jsonMode")l=this.bind({response_format:{type:"json_object"}}),isZodSchema(n)?c=StructuredOutputParser.fromZodSchema(n):c=new JsonOutputParser;else if(a==="jsonSchema")if(l=this.bind({response_format:{type:"json_schema",json_schema:{name:s??"extract",description:n.description,schema:n,strict:r==null?void 0:r.strict}}}),isZodSchema(n)){const y=StructuredOutputParser.fromZodSchema(n);c=RunnableLambda.from(x=>"parsed"in x.additional_kwargs?x.additional_kwargs.parsed:y)}else c=new JsonOutputParser;else{let y=s??"extract";if(isZodSchema(n)){const x=zodToJsonSchema$2(n);l=this.bind({tools:[{type:"function",function:{name:y,description:x.description,parameters:x}}],tool_choice:{type:"function",function:{name:y}},...(r==null?void 0:r.strict)!==void 0?{strict:r.strict}:{}}),c=new JsonOutputKeyToolsParser({returnSingle:!0,keyName:y,zodSchema:n})}else{let x;typeof n.name=="string"&&typeof n.parameters=="object"&&n.parameters!=null?(x=n,y=n.name):(y=n.title??y,x={name:y,description:n.description??"",parameters:n}),l=this.bind({tools:[{type:"function",function:x}],tool_choice:{type:"function",function:{name:y}},...(r==null?void 0:r.strict)!==void 0?{strict:r.strict}:{}}),c=new JsonOutputKeyToolsParser({returnSingle:!0,keyName:y})}}if(!o)return l.pipe(c);const d=RunnablePassthrough.assign({parsed:(y,x)=>c.invoke(y.raw,x)}),p=RunnablePassthrough.assign({parsed:()=>null}),g=d.withFallbacks({fallbacks:[p]});return RunnableSequence.from([{raw:l},g])}}function isZodSchema(t){return typeof(t==null?void 0:t.parse)=="function"}function isStructuredOutputMethodParams(t){return t!==void 0&&typeof t.schema=="object"}const DEFAULT_SYSTEM_PROMPT=`
你是一位智慧助理, 
幫助孩子選定學習主題(topic), 
找出關鍵步驟(step) 和 設定挑戰/任務(task), 

【角色設定】
我是一位像「會帶著你探索的學習嚮導」，結合了老師的大圖思維、哥哥姊姊的親切語氣，以及任務設計師的引導力。適合國小中高年級孩子的自學探索，強調引發好奇、主動行動與表達練習。
✅【核心行為原則】
前導提問與基礎探測：以開放式問題引發好奇，探測孩子現有知識並建立主題聯繫。
分步引導：一次聚焦一個思考步驟，避免壓迫感，逐步加深理解。
激發好奇：用故事性或冒險感的語言，點燃孩子的學習興趣。
鼓勵行動：引導孩子提出自己的探索方式，培養主動性。
肯定表達：提供正向、個人化反饋，增強孩子的自信與參與感。
✅【學習流程與五步驟架構】
🚀 【旅程啟動與前導對話】
目的： 用親切、帶有冒險感的語氣，介紹即將展開的探索，設定角色與情境，引發孩子的好奇心。當接收到孩子初次針對某個主題提出的籠統或模糊問題時，立即進入這個階段。
內容：
角色問候、情境化描述： 例如：「哈囉，小小太空探險家！準備好跟我一起揭開星星的秘密了嗎？」
強調學習樂趣： 例如：「這會是一場超有趣的旅程，我們會一起發現很多驚喜喔！」
問問看/小提示 (1-2個開放式問題)：
探測孩子對主題的初步想法或相關經驗，例如：「你覺得星星的亮光跟什麼有關？」
確認孩子是否具備理解後續探索所需的基本概念。若缺乏基礎，融入簡化情境化說明，例如：「星星有點像天上的火球，你覺得火球會不會自己發光？」
強調： 在這個階段，我們不會一次性列出整個主題的所有任務步驟列表或完整的首個任務結構。而是專注於建立連接，為即將展開的「對話式探索」鋪墊。
🗺️ 每一任務步驟的組成結構與引導語說明
每個主題會拆解為5個探索步驟，每個步驟都包含以下要素：
1. ❓ 問問看：問題意識 (Engage)
探索方向： 提出問題，觀察現象，啟動好奇心。
引導語句：
小提示： 「你曾經在晚上看過星星嗎？它們看起來怎麼樣？」
問問看： 「你覺得星星為什麼會閃閃發光？是像燈泡一樣嗎？」
行動風格：
想像一下： 「如果你是天上的小小偵探，你會怎麼開始調查星星為什麼會亮呢？」
多元自由選擇： 「你可以用說的、用畫的，或表演給我看，你覺得星星的亮光跟什麼有關？」
2. 🤔 想一想：推測聯想 (Explore)
探索方向： 推理可能的答案或原因，發表想法。
引導語句：
小提示： 「嗯，真是個好問題！有沒有什麼東西也跟星星一樣會自己發光呢？」
問問看： 「你覺得星星的亮光，會不會跟太陽一樣，是自己發出來的呢？為什麼？」
探索建議： 「如果你要猜猜看星星發光的秘密，你會怎麼去想？」
行動風格：
想像一下： 「如果你是一顆星星，你覺得自己是怎麼讓自己發光的呢？」
去做做看： 「試試看畫一顆星星的內部，猜猜它裡面有什麼東西讓它發光？」
3. 🔍 查一查：蒐集資訊 (Explore/Explain)
探索方向： 找資料、做實驗、觀察、訪談等探索行動。
引導語句：
小提示： 「我們來當個小小科學家，找找看有沒有什麼辦法可以找到答案。」
探索建議： 「如果你想知道星星是怎麼發光的，你會去哪裡找答案？會問誰呢？」
問問看： 「你覺得我們可以在書裡、網路、還是觀察中找到答案？」
行動風格：
去做做看： 「試著找一本關於星星的書，看看裡面有沒有提到星星是怎麼發光的（請找大人幫忙確保安全喔！）。」
延伸看看： 「你覺得星星的亮光跟火柴棒的火光有什麼不一樣？想不想查查看？」
4. 🧠 整理一下：統整理解 (Explain/Elaborate)
探索方向： 將資訊與經驗整合、澄清概念。
引導語句：
小提示： 「哇！你找到好多資料！現在我們來把這些線索拼湊起來，看看星星發光的秘密到底是什麼。」
問問看： 「你查到的資料有沒有告訴你，星星裡面是不是藏著一個能量工廠在運轉？」
探索建議： 「如果你要跟別人解釋星星是怎麼發光的，你會怎麼說呢？」
行動風格：
想像一下： 「如果你是星星的發言人，你會怎麼告訴大家星星為什麼會亮？」
去做做看： 「試著整理一下你找到的資訊，畫一張圖或寫一段話，說明星星是怎麼發光的。」
5. 🎨 表達出來：輸出創作 (Elaborate/Evaluate)
探索方向： 用自己的方式表達成果、與人分享。
引導語句：
小提示： 「太棒了！你已經發現星星發光的秘密了！現在是分享你探險成果的時候囉！」
探索建議： 「你會怎麼把這次的發現，用最有趣的方式告訴你的好朋友呢？」
行動風格：
多元自由選擇： 「你可以用畫畫、寫故事、做一個小模型，或者口頭分享，告訴我你發現了什麼！」
挑戰任務： 「假裝你是星星的設計師，設計一顆你覺得會發出最特別亮光的星星吧！」
🌟 【探險成果發表】
目的： 回顧孩子在本次學習的努力與收穫，連結學習與生活，提升自信與樂趣。
內容：
總結本次學到的知識與技能，例如：「哇，太空探險家，你已經知道星星是怎麼發光的，還創造了自己的星星故事！真是太厲害了！」
以情境化語氣鼓勵，例如：「你的發現超棒！這次的星星探險大成功！下次你想去哪裡探險呢？」
引導期待下一次學習。
💡 逐步引導與揭示
原則： 不直接給予步驟，而是通過提問引導孩子思考，鼓勵孩子提出自己的探索方式（例如畫畫、寫故事、假設），並肯定想法。
觸發條件：
孩子完成當前探索（例如分享想法、畫作或假設）。
孩子主動問「接下來要做什麼？」
後續引導： 基於孩子回應，逐步加深理解，鼓勵自主探索。
應對無回應： 若孩子卡住，我會提供趣味性提示。例如：「嗯…是不是有點像在玩躲貓貓？星星的秘密是不是也藏起來了呢？需要我給你一點點小提示嗎？」同時，也會提供一個「快速跳轉」選項，讓孩子選擇是否想直接進入下一個步驟。
重新引導偏離主題： 若孩子偏離主題，我會先肯定他們的創意，再溫柔地拉回。例如：「你的想法好有創意！如果用在我們這次探險的星星上，會怎麼樣呢？」
🗣️ 語言風格
用國小生聽得懂的簡單、口語化語言，避免幼稚或教科書式解釋。
帶有故事性或冒險感，例如「我們一起來當星星偵探吧！」
將專有名詞或抽象概念轉化為形象化比喻，例如「星星像個大火球，裡面有能量工廠在運轉！」
每句話保持簡短，語氣親切、鼓勵。
🏡 應用情境
適用於「專題探索」「跨科學習」「自主學習任務」。
任務設計為孩子可獨立完成，或在家長協助下進行（例如實驗或搜尋資料時，會提醒「請找大人幫忙確保安全」）。
⚠️ 敏感議題處理原則
當遇到具有政治、社會、文化或宗教敏感性的議題時，AI 嚮導應保持中立、客觀的引導立場。引導過程應聚焦於事實的探索、概念的理解和多角度的思考。避免表達主觀判斷、引導孩子形成單一結論，或使用可能引起爭議的詞語。鼓勵孩子從不同來源獲取資訊，並思考資訊的多元性。


孩子的畫面上用 mindmap 展示著學習主題, 
參考 Current Mindmap Context 你能知道孩子現在看到的是什麼, 
根據當前的狀態和孩子的需求選出最適合的工具以及給孩子回饋

如果孩子想要查詢挑戰的資訊基於 Mindmap Context 給孩子回饋, 使用 chat 工具
如果孩子想要發表對於主題或生活的心得, 扮演一個聆聽者, 使用 chat 工具

請使用孩子可以理解的語言回答：
- 回應請限制在 2 到 3 句話
- 每句話不要超過 20 字
- 保持語氣溫暖、親切、有陪伴感`,actionsDescription=Object.entries(actions$1.actions).map(([t,e])=>{const r=Object.entries(e.params).map(([n,s])=>{const a=s;let o=a.type;return a.type==="array"&&a.items&&(a.items.type==="object"?o=`array of objects with properties: {${Object.entries(a.items.properties||{}).map(([c,d])=>`${c}: ${d.type}`).join(", ")}}`:o=`array of ${a.items.type}`),`${n}${a.required?" (required)":""}: ${a.description} (${o})`}).join(`
    `);return`${t}:
  Description: ${e.description}
  Parameters:
    ${r}`}).join(`

`),SYSTEM_PROMPT_WITH_ACTIONS=`${DEFAULT_SYSTEM_PROMPT}
===
你可以根據使用者輸入「建議一個最適合的動作」，並提供建議的參數。

請注意：
1. 你不能直接執行動作，只能「建議應該做什麼動作」。
2. 系統會根據你的建議內容，請使用者確認是否執行，真正的執行會由系統完成。
3. 請在回應中加入鼓勵與引導語句，但不能說「我已經為你建立了...」、「我已經完成...」，這樣會誤導使用者。

可用的動作列表：

Available actions:
${actionsDescription}

Please respond with a JSON object in the following format:
{
  "tool": "action_name",
  "params": {
    "param_name": "param_value"
  },
  "message": "Your response message to the user"
}`.replace(/{/g,"{{").replace(/}/g,"}}");class ChatService{constructor(){cr(this,"memory");cr(this,"model");cr(this,"chain");cr(this,"mindmapContext","");this.model=new ChatOpenAI({maxRetries:3,temperature:.7}),this.memory=new CustomSummaryMemory;const e=ChatPromptTemplate.fromMessages([["system",SYSTEM_PROMPT_WITH_ACTIONS],["system","Current Mindmap Context: {mindmapContext}"],new MessagesPlaceholder("history"),["human","{input}"]]);this.chain=RunnableSequence.from([async r=>{const n=await this.memory.loadMemoryVariables({});return{input:r,history:n.history,mindmapContext:this.mindmapContext}},e,this.model])}updateMindmapContext(e){this.mindmapContext=e}async sendMessage(e){try{const r=await this.memory.loadMemoryVariables({}),n=await api.post("/api/chat/completions",{messages:[{role:"system",content:SYSTEM_PROMPT_WITH_ACTIONS},{role:"system",content:`Current Mindmap Context: ${this.mindmapContext}`},...r.history.map(s=>({role:s.type==="human"?"user":"assistant",content:s.content})),{role:"user",content:e}].filter(s=>s.content),temperature:.7});return await this.memory.saveContext({input:e},{output:n.data.choices[0].message.content}),{message:n.data.choices[0].message.content,role:"assistant"}}catch(r){return console.error("❌ Chat error:",r),{message:"",role:"assistant",error:r instanceof Error?r.message:"未知錯誤"}}}clearHistory(){this.memory.clear()}}class ActionValidator{constructor(){cr(this,"config");this.config=actions$1}getActionConfig(e){return this.config.actions[e]}validateAction(e,r){const n=this.config.actions[e];if(!n)return console.error(`Unknown action: ${e}`),!1;for(const[s,a]of Object.entries(n.params))if((a.required??!1)&&!r[s])return console.error(`Missing required parameter: ${s}`),!1;return!0}validateReturn(e,r){const n=this.config.actions[e];if(!n)return console.error(`Unknown action: ${e}`),!1;const{type:s,properties:a,items:o}=n.returns;if(s==="array"&&!Array.isArray(r))return console.error(`Expected array return type for action: ${e}`),!1;if(s==="object"&&typeof r!="object")return console.error(`Expected object return type for action: ${e}`),!1;if(s==="boolean"&&typeof r!="boolean")return console.error(`Expected boolean return type for action: ${e}`),!1;if(a){for(const[l,c]of Object.entries(a))if(typeof r[l]!==c.type)return console.error(`Invalid property type for ${l} in action: ${e}`),!1}if(o){for(const l of r)if(o.properties){for(const[c,d]of Object.entries(o.properties))if(typeof l[c]!==d.type)return console.error(`Invalid item property type for ${c} in action: ${e}`),!1}}return!0}getActionDescription(e){var r;return((r=this.config.actions[e])==null?void 0:r.description)||""}}const createTopicTool={name:"create_topic",description:"建立新的學習主題",handler:async t=>{const e=useGoalStore.getState(),r={id:Date.now().toString(),title:t.topic,description:"",status:"active",steps:[]};return e.addGoal(r),r}},createStepTool={name:"create_step",description:"建立新的學習步驟",handler:async t=>{const e=useGoalStore.getState(),r=e.selectedGoalId;if(!r)throw new Error("No goal selected");const n={id:`${r}-${Date.now()}`,title:t.step_name,tasks:[]};return e.addStep(r,n),n}},createTaskTool={name:"create_task",description:"建立新的學習任務",handler:async t=>{const e=useGoalStore.getState(),r=e.selectedGoalId;if(!r)throw new Error("No goal selected");const n={id:`${t.step_tag}-${Date.now()}`,title:t.task_name,status:"todo"};return e.addTask(r,t.step_tag,n),n}},useTemplateStepsTool={name:"use_template_steps",description:"建立觀察/行動/紀錄/分享",handler:async()=>{const t=useGoalStore.getState(),e=t.selectedGoalId;if(!e)throw new Error("No goal selected");return["觀察","行動","紀錄","分享"].map(s=>{const a={id:`${e}-${Date.now()}-${s}`,title:s,tasks:[]};return t.addStep(e,a),a}).map(s=>s.title)}},completeTopicTool={name:"complete_topic",description:"結束主題",handler:async()=>{const t=useGoalStore.getState(),e=t.selectedGoalId;if(!e)return!1;const r=t.goals.find(n=>n.id===e);return r?(t.updateGoal({...r,status:"completed"}),!0):!1}},markAsBookmarkTool={name:"mark_as_bookmark",description:"收藏主題",handler:async()=>{const t=useGoalStore.getState(),e=t.selectedGoalId;if(!e)return!1;const r=t.goals.find(n=>n.id===e);return r?(t.updateGoal({...r,status:"archived"}),!0):!1}},suggestTopicsTool={name:"suggest_topics",description:"顯示主題建議",handler:async t=>t.suggestions},suggestStepsTool={name:"suggest_steps",description:"顯示步驟建議",handler:async t=>t.suggestions},suggestTasksTool={name:"suggest_tasks",description:"顯示任務建議（含分類）",handler:async t=>t.suggestions},exploreMoreTool={name:"explore_more",description:"依現有任務狀況延伸探索",handler:async t=>[]},summarizeProgressTool={name:"summarize_progress",description:"顯示目前進度",handler:async()=>{const t=useGoalStore.getState(),e=t.selectedGoalId;if(!e)return{progress:0,summary:""};const r=t.goals.find(o=>o.id===e);if(!r)return{progress:0,summary:""};const n=r.steps.reduce((o,l)=>o+l.tasks.length,0),s=r.steps.reduce((o,l)=>o+l.tasks.filter(c=>c.status==="done").length,0);return{progress:n>0?s/n*100:0,summary:`已完成 ${s}/${n} 個任務`}}},askForInputTool={name:"ask_for_input",description:"引導孩子說出任務想法",handler:async()=>({prompt:"請告訴我你的想法..."})},tools=[createTopicTool,createStepTool,createTaskTool,suggestTopicsTool,suggestStepsTool,suggestTasksTool,useTemplateStepsTool,summarizeProgressTool,markAsBookmarkTool,completeTopicTool,exploreMoreTool,askForInputTool],suggest_topics={type:"suggest_topics",title:"建議主題",description:"選擇建議的主題",options:[{paramSource:"suggestions",paramAction:"createTopic"}]},suggest_steps={type:"suggest_steps",title:"建議步驟",description:"選擇建議的步驟",options:[{paramSource:"suggestions",paramAction:"createStep"}]},suggest_tasks={type:"suggest_tasks",title:"建議任務",description:"選擇建議的任務",options:[{paramSource:"suggestions",paramAction:"createTask"}]},use_template_steps={type:"use_template_steps",title:"使用模板步驟",description:"使用預設的觀察/行動/紀錄/分享步驟",options:[]},summarize_progress={type:"summarize_progress",title:"進度摘要",description:"查看目前進度",options:[]},mark_as_bookmark={type:"mark_as_bookmark",title:"收藏主題",description:"將主題加入收藏",options:[]},complete_topic={type:"complete_topic",title:"完成主題",description:"標記主題為已完成",options:[]},explore_more={type:"explore_more",title:"延伸探索",description:"根據當前任務延伸更多探索",options:[]},ask_for_input={type:"ask_for_input",title:"輸入想法",description:"請輸入你的想法"},chat={type:"chat",title:"聊天",description:"與孩子聊天",showInput:!0,options:[]},forms={suggest_topics,suggest_steps,suggest_tasks,use_template_steps,summarize_progress,mark_as_bookmark,complete_topic,explore_more,ask_for_input,chat};class LLMRetryError extends Error{constructor(e){super(e),this.name="LLMRetryError"}}cr(LLMRetryError,"maxRetries",5);class MindMapService{constructor(e=null){cr(this,"chatService");cr(this,"validator",new ActionValidator);cr(this,"maxRetries",3);cr(this,"formConfigs");cr(this,"currentTopicId");cr(this,"contextCache",null);cr(this,"unsubscribe",null);cr(this,"errorContext",null);this.chatService=new ChatService,this.formConfigs=forms,this.currentTopicId=e,this.setupContextSubscription()}setCurrentTopic(e){this.currentTopicId!==e&&(this.currentTopicId=e,this.contextCache=null,this.setupContextSubscription())}setupContextSubscription(){if(this.unsubscribe&&this.unsubscribe(),!this.currentTopicId){this.contextCache="No active topic";return}const e=n=>{const s=n.goals.find(a=>a.id===this.currentTopicId);return s?{topic:{id:s.id,title:s.title,description:s.description},steps:s.steps.map(a=>{var o;return{id:a.id,title:a.title,tasks:(o=a.tasks)==null?void 0:o.map(l=>({id:l.id,title:l.title,status:l.status}))}})}:null};this.unsubscribe=useGoalStore.subscribe(n=>{const s=e(n);s?this.contextCache=JSON.stringify(s,null,2):this.contextCache="Topic not found"});const r=e(useGoalStore.getState());this.contextCache=r?JSON.stringify(r,null,2):"Topic not found"}async getMindmapContext(){return this.contextCache||"No active topic"}convertJsonSchemaToParamType(e){var r,n;return e.type==="array"?e.items.type==="object"&&(r=e.items.properties)!=null&&r.task_name&&(n=e.items.properties)!=null&&n.step_tag?{type:"task[]"}:{type:"string[]"}:{type:"string"}}async processLLMResponse(e){var r,n;try{const s=JSON.parse(e);console.log("🔍 Parsed Response:",s);const a=actions$1.actions[s.tool];if(!a)throw new Error(`Unknown action type: ${s.tool}`);for(const[o,l]of Object.entries(a.params)){const c=s.params[o],d=l;if(d.required&&!c)throw new Error(`Missing required parameter: ${o}`);if(c&&d.type==="array"){if(!Array.isArray(c))throw new Error(`Parameter ${o} should be an array`);if(((r=d.items)==null?void 0:r.type)==="object")for(const p of c){if(typeof p!="object")throw new Error(`Array items in ${o} should be objects`);for(const[g,y]of Object.entries(d.items.properties||{}))if(!(g in p))throw new Error(`Missing required property ${g} in array item of ${o}`)}else if(((n=d.items)==null?void 0:n.type)==="string"){for(const p of c)if(typeof p!="string")throw new Error(`Array items in ${o} should be strings`)}}}return s}catch(s){throw console.error("❌ Failed to process LLM response:",s),s}}async handleUserInput(e){var a,o,l,c;let r=0,n=null,s=this.maxRetries;for(;r<s;)try{const d=this.errorContext?`${this.errorContext}`:e;this.errorContext=null;const p=await this.getMindmapContext();this.chatService.updateMindmapContext(p);const g=await this.chatService.sendMessage(d);if("status"in g){const C=g.status;if(C>=500)throw new Error("哎呀！伺服器好像累了，讓我休息一下... 🦥");if(C>=400)throw new Error("請求似乎有點問題，讓我檢查一下... 🤔")}if(!(g!=null&&g.message))throw new Error("無效的回應格式");const y=await this.processLLMResponse(g.message);console.log("🔍 Parsed LLM Response:",y);const x=this.formConfigs[y.tool];console.log("📋 Form Config:",x);const E=actions$1.actions[y.tool];if(console.log("⚡ Action Config:",E),!x)throw new Error(`Unknown form type: ${y.tool}`);if(!E)throw new Error(`Unknown action type: ${y.tool}`);const S=((a=x.options)==null?void 0:a.map(C=>{if(C.paramSource){const P=y.params[C.paramSource];return console.log("🔍 Param Value:",P),Array.isArray(P)?P.map(I=>({label:typeof I=="string"?I:I.task_name,action:{type:C.paramAction,params:I}})):{label:typeof P=="string"?P:P.task_name,action:{type:C.paramAction,params:P}}}return C}).flat())||[];console.log("📋 Final Updated Options:",S);const k=((o=x.additionalOptions)==null?void 0:o.map(C=>({label:C.text,action:{type:C.action,params:C.text}})))||[];return{tool:y.tool,params:y.params,message:y.message||"",form:{...x,options:[...S,...k]}}}catch(d){const p=d;n=p,console.error("❌ Error details:",{message:p.message,stack:p.stack,response:(l=p.response)==null?void 0:l.data,status:(c=p.response)==null?void 0:c.status}),r++,p instanceof LLMRetryError&&(s=LLMRetryError.maxRetries,this.errorContext=`[系統錯誤] ${p.message}`),r<s&&(console.log(`Retrying... (${r}/${s})`),await new Promise(g=>setTimeout(g,1e3)))}throw new Error(`重試 ${s} 次後仍然失敗：${n==null?void 0:n.message}`)}async executeAction(e,r){const n=tools.find(a=>a.name===e);if(!n)throw new Error(`Unknown tool: ${e}`);if(console.log("⚡ Executing action:",e,"with payload:",r),!this.validator.validateAction(e,r))throw console.error("❌ Invalid action parameters"),new Error("Invalid action parameters");const s=await n.handler(r);return console.log("✅ Action result:",s),s}getTopic(){return useGoalStore.getState().goals.find(e=>e.id===this.currentTopicId)}clearFocusElement(){const e=this.getTopic();e&&useGoalStore.getState().setFocusElement(e.id,void 0)}addStep(e){if(console.log("🎯 MindMapService.addStep 開始",{step:e}),!this.currentTopicId)return console.log("❌ 新增失敗：沒有當前主題"),null;const r=useGoalStore.getState().addStep(this.currentTopicId,e);return console.log("✅ 步驟已新增到 store",{newStep:r}),r}updateGoal(e){if(console.log("🎯 MindMapService.updateGoal 開始",{goal:e}),!this.currentTopicId)return console.log("❌ 更新失敗：沒有當前主題"),null;const r=useGoalStore.getState().updateGoal(e);return console.log("✅ 目標更新結果",{result:r}),r}updateStep(e,r){return this.currentTopicId?useGoalStore.getState().updateStep(this.currentTopicId,r):null}addTask(e,r){return this.currentTopicId?useGoalStore.getState().addTask(this.currentTopicId,e,r):null}updateTask(e,r,n){if(console.log("🔍 MindMapService.updateTask 開始",{stepId:e,taskId:r,updates:n}),!this.currentTopicId)return console.log("❌ 更新失敗：沒有當前主題"),null;const s=useGoalStore.getState().updateTask(this.currentTopicId,e,n);return console.log("🔄 更新結果",{result:s}),s}async handleAction(e,r){console.log("👆 使用者觸發行為",{actionType:e,params:r,currentTopicId:this.currentTopicId});const n=this.getTopic();if(!n){console.log("❌ 處理失敗：找不到當前主題");return}try{switch(e){case"createTopic":console.log("📝 準備新增主題",{title:r});const s={title:r,tasks:[]},a=this.addStep(s);console.log("✅ 主題新增結果",{createdStep:a}),a&&(console.log("🎯 設定焦點到新主題",{type:"step",id:a.id}),useGoalStore.getState().setFocusElement(n.id,{type:"step",id:a.id}));break;case"createStep":console.log("📝 準備新增步驟",{title:r});const o={title:r,tasks:[]},l=this.addStep(o);console.log("✅ 步驟新增結果",{addedStep:l}),l&&(console.log("🎯 設定焦點到新步驟",{type:"step",id:l.id}),useGoalStore.getState().setFocusElement(n.id,{type:"step",id:l.id}));break;case"createTask":try{if(console.log("📝 準備新增任務",{params:r}),!r.step_id)throw console.log("❌ 新增失敗：缺少步驟 ID"),new LLMRetryError("哎呀！我需要知道要把任務加到哪個步驟。讓我想想看...");const x={title:r.task_name,status:"todo"},E=this.getTopic();if(!E)throw console.log("❌ 新增失敗：找不到當前主題"),new LLMRetryError("找不到目前的主題，讓我檢查一下...");if(E.steps.length===0)throw console.log("❌ 新增失敗：沒有任何步驟"),new LLMRetryError("需要先建立步驟。建議使用 use_template_steps 建立預設步驟結構。");if(!E.steps.find(C=>C.id===r.step_id))throw console.log("❌ 新增失敗：找不到目標步驟",{stepId:r.step_id}),new LLMRetryError("咦？這個步驟好像不見了。讓我檢查一下...");const k=this.addTask(r.step_id,x);console.log("✅ 任務新增結果",{addedTask:k}),k&&(console.log("🎯 設定焦點到新任務",{type:"task",id:k.id}),useGoalStore.getState().setFocusElement(n.id,{type:"task",id:k.id}))}catch(x){throw console.error("❌ 建立任務時發生錯誤:",x),x}break;case"createTopics":console.log("📝 準備批量新增主題",{topics:r});let c=null;r.forEach(x=>{const E={title:x,tasks:[]},S=this.addStep(E);console.log("✅ 主題新增結果",{title:x,createdStep:S}),S&&(c=S.id)}),c&&(console.log("🎯 設定焦點到最後新增的主題",{type:"step",id:c}),useGoalStore.getState().setFocusElement(n.id,{type:"step",id:c}));break;case"createSteps":console.log("📝 準備批量新增步驟",{steps:r});let d=null;r.forEach(x=>{const E={title:x,tasks:[]},S=this.addStep(E);console.log("✅ 步驟新增結果",{title:x,addedStep:S}),S&&(d=S.id)}),d&&(console.log("🎯 設定焦點到最後新增的步驟",{type:"step",id:d}),useGoalStore.getState().setFocusElement(n.id,{type:"step",id:d}));break;case"createTasks":console.log("📝 準備批量新增任務",{tasks:r});let p=null;r.forEach(x=>{const E={title:x.task_name,status:"todo"},S=this.addTask(x.step_tag,E);console.log("✅ 任務新增結果",{title:x.task_name,stepId:x.step_tag,addedTask:S}),S&&(p=S.id)}),p&&(console.log("🎯 設定焦點到最後新增的任務",{type:"task",id:p}),useGoalStore.getState().setFocusElement(n.id,{type:"task",id:p}));break;case"use_template_steps":console.log("📝 準備使用模板步驟");let g=null;[{title:"觀察",tasks:[],order:1},{title:"行動",tasks:[],order:2},{title:"紀錄",tasks:[],order:3},{title:"分享",tasks:[],order:4}].forEach(x=>{const E=this.addStep(x);console.log("✅ 模板步驟新增結果",{title:x.title,order:x.order,addedStep:E}),E&&(g=E.id)}),g&&(console.log("🎯 設定焦點到最後新增的模板步驟",{type:"step",id:g}),useGoalStore.getState().setFocusElement(n.id,{type:"step",id:g}));break}}catch(s){throw console.error("❌ 處理使用者行為時發生錯誤:",s),s}}calculateProgress(e){const r=e.steps.reduce((s,a)=>s+a.tasks.length,0);if(r===0)return 0;const n=e.steps.reduce((s,a)=>s+a.tasks.filter(o=>o.status==="done").length,0);return Math.round(n/r*100)}}const FloatingAssistant=({enabled:t=!0,dragConstraints:e,initialPosition:r={x:0,y:0},onDragEnd:n,className:s="",onActionSubmit:a,goalId:o=null,onFocus:l})=>{const[c,d]=reactExports.useState("idle"),[p,g]=reactExports.useState(!1),[y,x]=reactExports.useState(!1),[E,S]=reactExports.useState([]);React.useMemo(()=>new ChatService,[]);const k=React.useMemo(()=>new MindMapService(o),[o]),C=useDragControls(),[P,R]=reactExports.useState({showChoices:!1,showInput:!1,message:"",choices:[],inputText:"",inputPlaceholder:"和我分享你的想法吧"}),j=(Q,fe)=>{R(se=>{var q;const Y=Q(se),G={...se,...Y};return"showInput"in Y||(G.showInput=!(((q=G.choices)==null?void 0:q.length)>0)),console.log(`🔍 [${fe}] New state:`,G),G})},I=(Q,fe)=>{console.log("🔍 Form config:",Q),j(se=>{var Y,G,q;return{message:fe||se.message,showChoices:(((Y=Q.options)==null?void 0:Y.length)??0)>0,showInput:Q.showInput??!(((G=Q.options)==null?void 0:G.length)??0),inputPlaceholder:Q.description||"和我分享你的想法吧",choices:((q=Q.options)==null?void 0:q.map(N=>({text:N.label,icon:ie(N.action.type),description:"",action:async()=>{try{d("thinking"),await k.handleAction(N.action.type,N.action.params),d("idle")}catch($){throw console.error("Failed to handle option click:",$),$ instanceof Error&&$.message,j(V=>({message:"哎呀！好像遇到了一點問題... 讓我看看"}),"handleOptionClick-error"),d("idle"),$}}})))||[]}},"updateUIFromForm")};reactExports.useEffect(()=>{t&&j(Q=>({message:"嗨！今天想要做什麼呢？",showChoices:!0,showInput:!1,inputText:"",inputPlaceholder:"和我分享你的想法吧",choices:[{text:"幫我想分類",icon:jsxRuntimeExports.jsx(ListChecks,{className:"h-12 w-12 text-indigo-600"}),description:"幫你規劃學習目標的分類",action:()=>O("根據現在的主題和結構, 幫我建議 1~3 個學習步驟")},{text:"幫我想任務",icon:jsxRuntimeExports.jsx(Target,{className:"h-12 w-12 text-emerald-600"}),description:"幫你規劃具體的學習任務",action:()=>O("根據現在的主題和結構, 幫我建議 1~3 個新的學習任務")},{text:"跟我聊聊這個主題",icon:jsxRuntimeExports.jsx(MessageSquare,{className:"h-12 w-12 text-orange-600"}),description:"討論這個主題的相關內容",action:()=>O("跟我聊聊這個主題, 有沒有推薦的方向呢？")},{text:"隨便聊聊天",icon:jsxRuntimeExports.jsx(Brain,{className:"h-12 w-12 text-purple-600"}),description:"來聊聊天吧！",action:()=>L()}]}),"initialSetup")},[t]);const O=Q=>{d("thinking"),B(Q)},L=()=>{d("idle"),j(Q=>({message:"好啊！想聊什麼呢？",showChoices:!1,showInput:!0,inputText:"",inputPlaceholder:"想聊什麼都可以喔！"}),"handleChatMode")},B=reactExports.useCallback(async Q=>{const fe=Q||P.inputText;if(!(!fe.trim()||y)){x(!0),d("thinking"),j(se=>({...se,inputText:""}),"handleSendMessage-clear");try{const se=await k.handleUserInput(fe);S(Y=>[...Y,{message:fe,role:"user"}]),se.form?I(se.form,se.message):j(Y=>({message:se.message||"你想跟我說什麼呢"}),"handleSendMessage"),d("idle")}catch(se){console.error("Failed to send message:",se),j(Y=>({message:"抱歉，發生了一些錯誤，請稍後再試。"}),"handleSendMessage-error"),d("idle")}finally{x(!1)}}},[P.inputText,y,k]),Z=reactExports.useCallback(Q=>{Q.key==="Enter"&&!Q.shiftKey&&(Q.preventDefault(),B())},[B]),te=()=>{p||(c==="idle"&&!P.message&&!P.showChoices&&!P.showInput?(d("idle"),j(Q=>({message:"嗨！今天想要做什麼呢？",showChoices:!0,showInput:!1,inputText:"",inputPlaceholder:"和我分享你的想法吧",choices:[{text:"幫我想分類",icon:jsxRuntimeExports.jsx(ListChecks,{className:"h-12 w-12 text-indigo-600"}),description:"幫你規劃學習目標的分類",action:()=>O("根據現在的主題和結構, 幫我建議 1~3 個學習步驟")},{text:"幫我想任務",icon:jsxRuntimeExports.jsx(Target,{className:"h-12 w-12 text-emerald-600"}),description:"幫你規劃具體的學習任務",action:()=>O("根據現在的主題和結構, 幫我建議 1~3 個新的學習任務")},{text:"跟我聊聊這個主題",icon:jsxRuntimeExports.jsx(MessageSquare,{className:"h-12 w-12 text-orange-600"}),description:"討論這個主題的相關內容",action:()=>O("跟我聊聊這個主題, 有沒有推薦的方向呢？")},{text:"隨便聊聊天",icon:jsxRuntimeExports.jsx(Brain,{className:"h-12 w-12 text-purple-600"}),description:"來聊聊天吧！",action:()=>L()}]}),"handleAssistantClick-show")):(d("idle"),j(Q=>({message:"",showChoices:!1,showInput:!1,inputText:"",choices:[]}),"handleAssistantClick-hide")))};reactExports.useEffect(()=>{},[c,P]);const ie=Q=>{const fe=[jsxRuntimeExports.jsx(Lightbulb,{className:"h-12 w-12 text-yellow-500"}),jsxRuntimeExports.jsx(ListChecks,{className:"h-12 w-12 text-blue-500"}),jsxRuntimeExports.jsx(Target,{className:"h-12 w-12 text-red-500"}),jsxRuntimeExports.jsx(Bookmark,{className:"h-12 w-12 text-purple-500"}),jsxRuntimeExports.jsx(CircleCheckBig,{className:"h-12 w-12 text-green-500"}),jsxRuntimeExports.jsx(Compass,{className:"h-12 w-12 text-indigo-500"}),jsxRuntimeExports.jsx(MessageSquare,{className:"h-12 w-12 text-teal-500"}),jsxRuntimeExports.jsx(Brain,{className:"h-12 w-12 text-emerald-600"})],se=Math.floor(Math.random()*fe.length);return fe[se]};return jsxRuntimeExports.jsx(AnimatePresence,{children:t&&jsxRuntimeExports.jsx(motion.div,{drag:!0,dragControls:C,dragConstraints:e,dragMomentum:!1,dragElastic:0,initial:r,dragListener:!1,onDragStart:()=>{g(!0)},onDragEnd:(Q,fe)=>{g(!1),n&&n({x:fe.point.x,y:fe.point.y})},style:{position:"absolute",zIndex:p?50:40},className:`${s}`,onClick:Q=>Q.stopPropagation(),onPointerDown:Q=>Q.stopPropagation(),children:jsxRuntimeExports.jsxs(motion.div,{style:{position:"absolute",zIndex:p?50:40},className:"relative w-24 h-24",onClick:Q=>Q.stopPropagation(),onPointerDown:Q=>Q.stopPropagation(),children:[jsxRuntimeExports.jsx("button",{onPointerDown:Q=>{Q.stopPropagation(),C.start(Q)},onClick:Q=>{Q.stopPropagation(),te()},className:"w-full h-full rounded-full bg-white dark:bg-gray-800 shadow-lg overflow-hidden hover:shadow-xl transition-shadow relative cursor-move",children:jsxRuntimeExports.jsx(Lottie,{animationData:slothAnimation,loop:!0,className:"w-full h-full pointer-events-none"})}),jsxRuntimeExports.jsx(motion.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>d(c==="menu"?"idle":"menu"),className:"absolute -top-2 -right-2 bg-white dark:bg-gray-800 rounded-full p-1 shadow-md",children:jsxRuntimeExports.jsx(Settings,{className:"h-4 w-4 text-indigo-500"})}),jsxRuntimeExports.jsxs(AnimatePresence,{mode:"wait",children:[c!=="menu"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[P.message&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"absolute bottom-[calc(100%+2rem)] right-0 bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 max-w-[500px] min-w-[400px] pointer-events-auto select-text cursor-text min-h-[8rem] max-h-[8rem] overflow-y-auto",style:{pointerEvents:p?"none":"auto",transformOrigin:"bottom right"},children:[jsxRuntimeExports.jsx("div",{className:`relative ${c==="thinking"?"blur-[1px]":""}`,children:jsxRuntimeExports.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-gray-200 font-sans leading-relaxed whitespace-pre-wrap",children:P.message})}),c==="thinking"&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex justify-center items-center bg-white/30 dark:bg-gray-800/30 backdrop-blur-[1px] rounded-2xl",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-center items-center space-x-4",children:[jsxRuntimeExports.jsx(motion.div,{animate:{scale:[1,1.2,1],opacity:[1,.5,1]},transition:{duration:1,repeat:1/0,delay:0},className:"w-4 h-4 bg-indigo-500 dark:bg-indigo-400 rounded-full"}),jsxRuntimeExports.jsx(motion.div,{animate:{scale:[1,1.2,1],opacity:[1,.5,1]},transition:{duration:1,repeat:1/0,delay:.3},className:"w-4 h-4 bg-indigo-500 dark:bg-indigo-400 rounded-full"}),jsxRuntimeExports.jsx(motion.div,{animate:{scale:[1,1.2,1],opacity:[1,.5,1]},transition:{duration:1,repeat:1/0,delay:.6},className:"w-4 h-4 bg-indigo-500 dark:bg-indigo-400 rounded-full"})]})}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 right-0 transform translate-x-full",children:jsxRuntimeExports.jsx("div",{className:"w-4 h-4 bg-white dark:bg-gray-800 transform rotate-45"})})]}),P.showInput&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"absolute bottom-[calc(100%+11rem)] right-0 bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 max-w-[500px] min-w-[400px] pointer-events-auto cursor-default",style:{pointerEvents:p?"none":"auto",transformOrigin:"bottom right"},children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("div",{className:"mb-3 text-base text-gray-500 dark:text-gray-400",children:P.inputPlaceholder}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsx("textarea",{value:P.inputText,onChange:Q=>R(fe=>({...fe,inputText:Q.target.value})),onKeyPress:Z,placeholder:"輸入訊息...",className:"flex-1 resize-none rounded-lg border border-gray-300 dark:border-gray-600 p-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",rows:2}),jsxRuntimeExports.jsx(motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:B,disabled:y||!P.inputText.trim(),className:"p-3 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:y?jsxRuntimeExports.jsx(LoaderCircle,{className:"h-5 w-5 animate-spin"}):jsxRuntimeExports.jsx(Send,{className:"h-5 w-5"})})]})]}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 right-6 transform translate-y-full",children:jsxRuntimeExports.jsx("div",{className:"w-4 h-4 bg-white dark:bg-gray-800 transform rotate-45"})})]}),P.showChoices&&P.choices.length>0&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:`absolute right-0 bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 max-w-[500px] min-w-[400px] pointer-events-auto cursor-default ${P.showInput?"bottom-[calc(100%+22rem)]":"bottom-[calc(100%+11rem)]"}`,style:{pointerEvents:p?"none":"auto",transformOrigin:"bottom right"},children:[jsxRuntimeExports.jsx("div",{className:"space-y-4",children:P.choices.map((Q,fe)=>jsxRuntimeExports.jsxs(motion.button,{whileHover:{scale:1.02},whileTap:{scale:.95},onClick:()=>Q.action(),className:"w-full p-4 bg-white dark:bg-gray-700 rounded-xl shadow-md hover:shadow-lg transition-all duration-200 flex items-center space-x-4",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-indigo-50 dark:bg-indigo-900/30 rounded-full flex items-center justify-center",children:Q.icon}),jsxRuntimeExports.jsxs("div",{className:"flex-1 text-left",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:Q.text}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:Q.description})]})]},fe))}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 right-6 transform translate-y-full",children:jsxRuntimeExports.jsx("div",{className:"w-4 h-4 bg-white dark:bg-gray-800 transform rotate-45"})})]})]}):null,c==="menu"?jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"absolute top-0 right-0 mt-8 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-2 w-48",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>{},className:"w-full flex items-center px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:[jsxRuntimeExports.jsx(History,{className:"h-4 w-4 mr-2"}),"查看對話紀錄"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{},className:"w-full flex items-center px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:[jsxRuntimeExports.jsx(Settings,{className:"h-4 w-4 mr-2"}),"設定"]})]}):null]})]})})})},useAssistant=t=>{const[e,r]=reactExports.useState((t==null?void 0:t.isVisible)??!0),[n,s]=reactExports.useState((t==null?void 0:t.position)??{x:0,y:0});return{isVisible:e,position:n,setPosition:s,toggleAssistant:()=>r(!e)}},StudentPlanning=()=>{const{goals:t,updateGoal:e,updateTask:r}=useGoalStore(),[n,s]=reactExports.useState(null),[a,o]=reactExports.useState(!1),[l,c]=reactExports.useState(!1),[d,p]=reactExports.useState(!1),[g,y]=reactExports.useState(!1),[x,E]=reactExports.useState(null),[S,k]=reactExports.useState(!1),[C,P]=reactExports.useState(""),[R,j]=reactExports.useState(!1),[I,O]=reactExports.useState(new Set),[L,B]=reactExports.useState(!1),[Z,te]=reactExports.useState(!1),[ie,Q]=reactExports.useState([]),{isVisible:fe,position:se,setPosition:Y,toggleAssistant:G}=useAssistant({position:{x:-120,y:0}});reactExports.useRef(null);const q=reactExports.useRef(null),N=useNavigate();reactExports.useEffect(()=>{O(new Set(t.map(ce=>ce.id)))},[t]),reactExports.useEffect(()=>{const ce=Re=>{const oe=Re.target;oe.closest(".dropdown-option")||!oe.closest(".subject-select")&&!oe.closest(".type-select")&&(B(!1),te(!1))};return document.addEventListener("mousedown",ce),()=>document.removeEventListener("mousedown",ce)},[]);const $=()=>{te(!Z),B(!1)},V=()=>{B(!L),te(!1)},z=ce=>{Q(Re=>Re.includes(ce)?Re.filter(oe=>oe!==ce):[...Re,ce])},ne=ce=>{if(!(ce!=null&&ce.steps))return 0;const Re=ce.steps.reduce((Se,Ne)=>{var Fe;return Se+(((Fe=Ne.tasks)==null?void 0:Fe.length)||0)},0),oe=ce.steps.reduce((Se,Ne)=>{var Fe;return Se+(((Fe=Ne.tasks)==null?void 0:Fe.filter(et=>et.status==="done").length)||0)},0);return Re===0?0:Math.round(oe/Re*100)},pe=(ce,Re,oe)=>{r(ce,Re,oe)},xe=(ce,Re,oe)=>{r(ce,Re,oe)},Ce=ce=>{const Re=t.find(oe=>oe.id===ce);if(Re){const oe={...Re,status:GOAL_STATUSES.ARCHIVED};console.log("Deleting goal:",{goalId:ce,updatedGoal:oe}),e(oe)}};return jsxRuntimeExports.jsxs(PageLayout,{title:"學習計畫",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 relative",children:[jsxRuntimeExports.jsx("div",{ref:q,className:"fixed bottom-20 right-6 w-[400px] h-[400px]",style:{pointerEvents:"none"},children:jsxRuntimeExports.jsx(FloatingAssistant,{enabled:fe,onToggle:G,hideCloseButton:!0,dragConstraints:q,initialPosition:se,onPositionChange:Y,className:"pointer-events-auto"})}),jsxRuntimeExports.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"我的目標"}),jsxRuntimeExports.jsxs("button",{onClick:()=>c(!0),className:"inline-flex items-center px-3 py-1.5 text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700",children:[jsxRuntimeExports.jsx(Plus,{className:"h-4 w-4 mr-1"}),"新增目標"]})]}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:t.filter(ce=>ce.status!==GOAL_STATUSES.ARCHIVED).map(ce=>jsxRuntimeExports.jsxs("button",{onClick:()=>{g&&x&&(I.has(x.id)||Ce(x.id),y(!1),j(!1)),s(ce),E(ce)},className:`w-full text-left p-3 rounded-lg transition ${(n==null?void 0:n.id)===ce.id?"bg-indigo-50 dark:bg-indigo-900/30 border-2 border-indigo-500":"border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start",children:[jsxRuntimeExports.jsx("div",{className:"flex-1 min-w-0 flex items-start gap-2",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:`shrink-0 ${ce.templateType==="學習目標"?"text-purple-500":ce.templateType==="個人成長"?"text-blue-500":ce.templateType==="專案計畫"?"text-green-500":"text-orange-500"}`,children:ce.templateType==="學習目標"?jsxRuntimeExports.jsx(Brain,{className:"h-4 w-4"}):ce.templateType==="個人成長"?jsxRuntimeExports.jsx(Target,{className:"h-4 w-4"}):ce.templateType==="專案計畫"?jsxRuntimeExports.jsx(Sparkles,{className:"h-4 w-4"}):jsxRuntimeExports.jsx(PartyPopper,{className:"h-4 w-4"})}),jsxRuntimeExports.jsx("h3",{className:"font-medium text-gray-900 dark:text-white truncate",children:ce.title})]})}),jsxRuntimeExports.jsx("span",{className:`shrink-0 inline-flex items-center px-2.5 py-0.5 rounded text-xs font-medium ${subjects.getSubjectStyle(ce.subject||"").bg} ${subjects.getSubjectStyle(ce.subject||"").text}`,children:ce.subject||"未分類"})]}),jsxRuntimeExports.jsxs("div",{className:"mt-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"進度"}),jsxRuntimeExports.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[ne(ce),"%"]})]}),jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:jsxRuntimeExports.jsx("div",{className:"bg-indigo-600 h-2 rounded-full",style:{width:`${ne(ce)}%`}})})]}),ce.dueDate&&jsxRuntimeExports.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500 dark:text-gray-400",children:[jsxRuntimeExports.jsx(Calendar$1,{className:"h-4 w-4 mr-1"}),new Intl.DateTimeFormat("zh-TW",{month:"long",day:"numeric"}).format(new Date(ce.dueDate))]})]},ce.id))})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"目標設定小技巧"}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg mr-3",children:jsxRuntimeExports.jsx(Target,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"具體且可衡量"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"設定明確的目標和可量化的指標"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-start",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg mr-3",children:jsxRuntimeExports.jsx(BookOpen,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"分解大目標"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"將大目標拆解成小步驟，逐步達成"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-start",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg mr-3",children:jsxRuntimeExports.jsx(Lightbulb,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"定期回顧"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"每週檢視進度，適時調整計畫"})]})]})]})]})]}),jsxRuntimeExports.jsx("div",{className:"lg:col-span-2",children:n?jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-6",children:[jsxRuntimeExports.jsx("div",{className:"flex-1",children:g?jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("input",{type:"text",value:x==null?void 0:x.title,onChange:ce=>{x&&E({...x,title:ce.target.value})},placeholder:"輸入目標標題（例如：完成科學探索專案）",className:`w-full text-2xl font-bold bg-gray-50 dark:bg-gray-700 border ${R&&(x==null?void 0:x.title)===""?"border-red-500":"border-gray-300 dark:border-gray-600"} rounded-md px-3 py-2 placeholder-gray-400 dark:placeholder-gray-500`}),jsxRuntimeExports.jsx("textarea",{value:x==null?void 0:x.description,onChange:ce=>{x&&E({...x,description:ce.target.value})},placeholder:"描述你的目標內容和期望達成的結果（例如：透過觀察、實驗和記錄，探索自然現象並培養科學思維）",className:`w-full text-gray-600 dark:text-gray-300 bg-gray-50 dark:bg-gray-700 border ${R&&(x==null?void 0:x.description)===""?"border-red-500":"border-gray-300 dark:border-gray-600"} rounded-md px-3 py-2 placeholder-gray-400 dark:placeholder-gray-500`,rows:3}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"relative inline-block",children:[jsxRuntimeExports.jsxs("button",{onClick:$,className:`inline-flex items-center gap-2 px-2.5 py-0.5 rounded-md text-sm font-medium type-select ${(x==null?void 0:x.templateType)==="學習目標"?"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300":(x==null?void 0:x.templateType)==="個人成長"?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300":(x==null?void 0:x.templateType)==="專案計畫"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300"}`,children:[(x==null?void 0:x.templateType)==="學習目標"?jsxRuntimeExports.jsx(Brain,{className:"h-4 w-4"}):(x==null?void 0:x.templateType)==="個人成長"?jsxRuntimeExports.jsx(Target,{className:"h-4 w-4"}):(x==null?void 0:x.templateType)==="專案計畫"?jsxRuntimeExports.jsx(Sparkles,{className:"h-4 w-4"}):jsxRuntimeExports.jsx(PartyPopper,{className:"h-4 w-4"}),x==null?void 0:x.templateType,jsxRuntimeExports.jsx(ChevronDown,{className:"h-4 w-4"})]}),Z&&jsxRuntimeExports.jsx("div",{className:"absolute z-10 mt-1 w-40 bg-white dark:bg-gray-800 shadow-lg rounded-md border border-gray-200 dark:border-gray-700",children:goalTemplates.map(ce=>jsxRuntimeExports.jsxs("button",{onClick:Re=>{Re.stopPropagation(),x&&(E({...x,templateType:ce.title}),te(!1))},className:`flex items-center gap-2 w-full text-left px-4 py-2 text-sm hover:bg-gray-50 dark:hover:bg-gray-700 dropdown-option ${ce.title==="學習目標"?"text-purple-600 dark:text-purple-400":ce.title==="個人成長"?"text-blue-600 dark:text-blue-400":ce.title==="專案計畫"?"text-green-600 dark:text-green-400":"text-orange-600 dark:text-orange-400"}`,children:[ce.icon,ce.title]},ce.title))})]}),jsxRuntimeExports.jsxs("div",{className:"relative inline-block",children:[jsxRuntimeExports.jsxs("button",{onClick:V,className:`inline-flex items-center gap-2 px-2.5 py-0.5 rounded-md text-sm font-medium subject-select ${subjects.getSubjectStyle((x==null?void 0:x.subject)||"").bg} ${subjects.getSubjectStyle((x==null?void 0:x.subject)||"").text}`,children:[(x==null?void 0:x.subject)||"未分類",jsxRuntimeExports.jsx(ChevronDown,{className:"h-4 w-4"})]}),L&&jsxRuntimeExports.jsx("div",{className:"absolute z-10 mt-1 w-40 bg-white dark:bg-gray-800 shadow-lg rounded-md border border-gray-200 dark:border-gray-700",children:Object.values(SUBJECTS).map(ce=>jsxRuntimeExports.jsx("button",{onClick:Re=>{Re.stopPropagation(),x&&(E({...x,subject:ce}),B(!1))},className:`w-full text-left px-4 py-2 text-sm hover:bg-gray-50 dark:hover:bg-gray-700 dropdown-option ${subjects.getSubjectStyle(ce).text}`,children:ce},ce))})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end space-x-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{var ce;j(!0),x&&n&&x.title.trim()!==""&&((ce=x.description)==null?void 0:ce.trim())!==""&&(y(!1),e(x),s(x),j(!1),O(Re=>new Set(Re).add(x.id)))},disabled:!(x!=null&&x.title)||!(x!=null&&x.description),className:"px-3 py-1.5 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 rounded-md disabled:opacity-50 disabled:cursor-not-allowed",children:"保存"}),jsxRuntimeExports.jsx("button",{onClick:()=>{y(!1),E(n)},className:"px-3 py-1.5 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md",children:"取消"})]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:n.title}),jsxRuntimeExports.jsx("p",{className:"mt-1 text-gray-600 dark:text-gray-300",children:n.description}),jsxRuntimeExports.jsxs("div",{className:"mt-2 flex gap-2",children:[jsxRuntimeExports.jsxs("span",{className:`inline-flex items-center gap-2 px-2.5 py-0.5 rounded-md text-sm font-medium ${n.templateType==="學習目標"?"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300":n.templateType==="個人成長"?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300":n.templateType==="專案計畫"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300"}`,children:[n.templateType==="學習目標"?jsxRuntimeExports.jsx(Brain,{className:"h-4 w-4"}):n.templateType==="個人成長"?jsxRuntimeExports.jsx(Target,{className:"h-4 w-4"}):n.templateType==="專案計畫"?jsxRuntimeExports.jsx(Sparkles,{className:"h-4 w-4"}):jsxRuntimeExports.jsx(PartyPopper,{className:"h-4 w-4"}),n.templateType]}),jsxRuntimeExports.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-md text-sm font-medium ${subjects.getSubjectStyle(n.subject||"").bg} ${subjects.getSubjectStyle(n.subject||"").text}`,children:n.subject||"未分類"})]})]})}),!g&&jsxRuntimeExports.jsxs("div",{className:"flex space-x-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{y(!0),E(n)},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:jsxRuntimeExports.jsx(Pencil,{className:"h-5 w-5"})}),jsxRuntimeExports.jsx("button",{onClick:()=>N(`/student/planning/goal/${n.id}`),className:"text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400",children:jsxRuntimeExports.jsx(Brain,{className:"h-5 w-5"})}),jsxRuntimeExports.jsx("button",{onClick:()=>k(!0),className:"text-gray-400 hover:text-red-600 dark:hover:text-red-400",children:jsxRuntimeExports.jsx(Trash2,{className:"h-5 w-5"})}),jsxRuntimeExports.jsx("button",{onClick:G,className:`text-gray-400 ${fe?"text-indigo-600 dark:text-indigo-400":"hover:text-indigo-600 dark:hover:text-indigo-400"}`,children:jsxRuntimeExports.jsx(Sparkles,{className:"h-5 w-5"})})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 bg-indigo-50 dark:bg-indigo-900/30 rounded-lg",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"總進度"}),jsxRuntimeExports.jsxs("p",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-400",children:[ne(n),"%"]})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/30 rounded-lg",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"已完成項目"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:n.steps.reduce((ce,Re)=>ce+Re.tasks.filter(oe=>oe.status==="done").length,0)})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-orange-50 dark:bg-orange-900/30 rounded-lg",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"待辦項目"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:n.steps.reduce((ce,Re)=>ce+Re.tasks.filter(oe=>oe.status==="todo").length,0)})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"學習步驟"}),jsxRuntimeExports.jsxs("button",{onClick:()=>{},className:"inline-flex items-center px-3 py-1.5 text-sm font-medium rounded-md text-indigo-600 bg-indigo-50 hover:bg-indigo-100 dark:text-indigo-400 dark:bg-indigo-900/30 dark:hover:bg-indigo-900/50",children:[jsxRuntimeExports.jsx(Plus,{className:"h-4 w-4 mr-1"}),"新增步驟"]})]}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:n.steps.map(ce=>jsxRuntimeExports.jsx(StepItem,{step:ce,isExpanded:ie.includes(ce.id),onToggle:()=>z(ce.id),onTaskStatusChange:Re=>pe(n.id,ce.id,Re),onTaskEdit:Re=>xe(n.id,ce.id,Re),onAddTask:()=>{}},ce.id))})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 dark:from-indigo-900 dark:to-purple-900 rounded-lg shadow p-6 text-white",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold",children:"AI 學習助理"}),jsxRuntimeExports.jsx(Sparkles,{className:"h-5 w-5"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm opacity-90 mb-4",children:"需要協助拆解目標或規劃學習路徑嗎？我可以幫你："}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[jsxRuntimeExports.jsxs("button",{className:"p-3 bg-white/10 hover:bg-white/20 rounded-lg text-sm text-left transition",children:[jsxRuntimeExports.jsx(ArrowRight,{className:"h-4 w-4 mb-2"}),"將目標拆解成可執行的小步驟"]}),jsxRuntimeExports.jsxs("button",{className:"p-3 bg-white/10 hover:bg-white/20 rounded-lg text-sm text-left transition",children:[jsxRuntimeExports.jsx(ArrowRight,{className:"h-4 w-4 mb-2"}),"建議適合的學習資源和方法"]})]})]})]}):jsxRuntimeExports.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 text-center",children:jsxRuntimeExports.jsxs("div",{className:"max-w-sm mx-auto",children:[jsxRuntimeExports.jsx(Target,{className:"h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"選擇一個目標開始"}),jsxRuntimeExports.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"從左側選擇一個目標，或點擊「新增目標」來開始規劃你的學習之旅。"})]})})})]}),l&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:jsxRuntimeExports.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full",children:jsxRuntimeExports.jsxs("div",{className:"p-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"選擇目標類型"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:goalTemplates.map((ce,Re)=>jsxRuntimeExports.jsxs("button",{onClick:()=>{const oe={id:crypto.randomUUID(),title:"",description:"",templateType:ce.title,subject:SUBJECTS.CUSTOM,dueDate:new Date().toISOString(),progress:0,steps:[],status:"active"};c(!1),e(oe),s(oe),E(oe),y(!0)},className:"p-4 border-2 border-gray-200 dark:border-gray-700 rounded-lg hover:border-indigo-500 dark:hover:border-indigo-500 transition text-left",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center mb-3",children:ce.icon}),jsxRuntimeExports.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-1",children:ce.title}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:ce.description})]},Re))}),jsxRuntimeExports.jsx("div",{className:"flex justify-end",children:jsxRuntimeExports.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 dark:text-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 rounded-md",children:"取消"})})]})})}),S&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"確認刪除目標"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"確定要刪除此目標嗎？此操作無法復原。"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end space-x-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{k(!1),P("")},className:"px-3 py-1.5 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md",children:"取消"}),jsxRuntimeExports.jsx("button",{onClick:()=>{n&&(Ce(n.id),s(null),k(!1),P(""))},className:"px-3 py-1.5 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-md disabled:opacity-50 disabled:cursor-not-allowed",children:"刪除"})]})]})})]})},v="5.5.7",fr=60,ip=0,op=180,w=400,h=400,nm="Mind Map Loading",ddd=0,assets=[],layers=[{ddd:0,ind:1,ty:4,nm:"Circle",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:30,s:[100]},{t:60,s:[100]}]},r:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[0]},{t:180,s:[360]}]},p:{a:0,k:[200,200]},a:{a:0,k:[0,0,0]},s:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[80,80,100]},{t:30,s:[100,100,100]}]}},ao:0,shapes:[{ty:"gr",it:[{ty:"el",p:{a:0,k:[0,0]},s:{a:0,k:[160,160]}},{ty:"st",c:{a:0,k:[.6,.4,1,1]},o:{a:0,k:100},w:{a:0,k:20},lc:2,lj:2}],nm:"Circle_Stroke_Group"}]},{ddd:0,ind:2,ty:4,nm:"Bars",sr:1,ks:{o:{a:0,k:100},r:{a:0,k:0},p:{a:0,k:[200,200]},a:{a:0,k:[0,0,0]},s:{a:0,k:[100,100,100]}},ao:0,shapes:[{ty:"gr",it:[{ty:"rc",p:{a:0,k:[-60,0]},s:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[20,0]},{t:45,s:[20,80]}]},r:{a:0,k:0}},{ty:"fl",c:{a:0,k:[.6,.4,1,1]}}],nm:"Bar_1_Fill_Group"},{ty:"gr",it:[{ty:"rc",p:{a:0,k:[-20,0]},s:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:15,s:[20,0]},{t:60,s:[20,120]}]},r:{a:0,k:0}},{ty:"fl",c:{a:0,k:[.8,.6,1,1]}}],nm:"Bar_2_Fill_Group"},{ty:"gr",it:[{ty:"rc",p:{a:0,k:[20,0]},s:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:30,s:[20,0]},{t:75,s:[20,60]}]},r:{a:0,k:0}},{ty:"fl",c:{a:0,k:[1,.8,1,1]}}],nm:"Bar_3_Fill_Group"},{ty:"gr",it:[{ty:"rc",p:{a:0,k:[60,0]},s:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:45,s:[20,0]},{t:90,s:[20,100]}]},r:{a:0,k:0}},{ty:"fl",c:{a:0,k:[.902,.702,1,1]}}],nm:"Bar_4_Fill_Group"}]}],loadingAnimation={v,fr,ip,op,w,h,nm,ddd,assets,layers};function composeEventHandlers(t,e,{checkForDefaultPrevented:r=!0}={}){return function(s){if(t==null||t(s),r===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function setRef(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function composeRefs(...t){return e=>{let r=!1;const n=t.map(s=>{const a=setRef(s,e);return!r&&typeof a=="function"&&(r=!0),a});if(r)return()=>{for(let s=0;s<n.length;s++){const a=n[s];typeof a=="function"?a():setRef(t[s],null)}}}}function useComposedRefs(...t){return reactExports.useCallback(composeRefs(...t),t)}function createContextScope(t,e=[]){let r=[];function n(a,o){const l=reactExports.createContext(o),c=r.length;r=[...r,o];const d=g=>{var C;const{scope:y,children:x,...E}=g,S=((C=y==null?void 0:y[t])==null?void 0:C[c])||l,k=reactExports.useMemo(()=>E,Object.values(E));return jsxRuntimeExports.jsx(S.Provider,{value:k,children:x})};d.displayName=a+"Provider";function p(g,y){var S;const x=((S=y==null?void 0:y[t])==null?void 0:S[c])||l,E=reactExports.useContext(x);if(E)return E;if(o!==void 0)return o;throw new Error(`\`${g}\` must be used within \`${a}\``)}return[d,p]}const s=()=>{const a=r.map(o=>reactExports.createContext(o));return function(l){const c=(l==null?void 0:l[t])||a;return reactExports.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[n,composeContextScopes(s,...e)]}function composeContextScopes(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const g=c(a)[`__scope${d}`];return{...l,...g}},{});return reactExports.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}var useLayoutEffect2=globalThis!=null&&globalThis.document?reactExports.useLayoutEffect:()=>{},useInsertionEffect=React$1[" useInsertionEffect ".trim().toString()]||useLayoutEffect2;function useControllableState({prop:t,defaultProp:e,onChange:r=()=>{},caller:n}){const[s,a,o]=useUncontrolledState({defaultProp:e,onChange:r}),l=t!==void 0,c=l?t:s;{const p=reactExports.useRef(t!==void 0);reactExports.useEffect(()=>{const g=p.current;g!==l&&console.warn(`${n} is changing from ${g?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),p.current=l},[l,n])}const d=reactExports.useCallback(p=>{var g;if(l){const y=isFunction(p)?p(t):p;y!==t&&((g=o.current)==null||g.call(o,y))}else a(p)},[l,t,a,o]);return[c,d]}function useUncontrolledState({defaultProp:t,onChange:e}){const[r,n]=reactExports.useState(t),s=reactExports.useRef(r),a=reactExports.useRef(e);return useInsertionEffect(()=>{a.current=e},[e]),reactExports.useEffect(()=>{var o;s.current!==r&&((o=a.current)==null||o.call(a,r),s.current=r)},[r,s]),[r,n,a]}function isFunction(t){return typeof t=="function"}function createSlot(t){const e=createSlotClone(t),r=reactExports.forwardRef((n,s)=>{const{children:a,...o}=n,l=reactExports.Children.toArray(a),c=l.find(isSlottable);if(c){const d=c.props.children,p=l.map(g=>g===c?reactExports.Children.count(d)>1?reactExports.Children.only(null):reactExports.isValidElement(d)?d.props.children:null:g);return jsxRuntimeExports.jsx(e,{...o,ref:s,children:reactExports.isValidElement(d)?reactExports.cloneElement(d,void 0,p):null})}return jsxRuntimeExports.jsx(e,{...o,ref:s,children:a})});return r.displayName=`${t}.Slot`,r}function createSlotClone(t){const e=reactExports.forwardRef((r,n)=>{const{children:s,...a}=r;if(reactExports.isValidElement(s)){const o=getElementRef$1(s),l=mergeProps(a,s.props);return s.type!==reactExports.Fragment&&(l.ref=n?composeRefs(n,o):o),reactExports.cloneElement(s,l)}return reactExports.Children.count(s)>1?reactExports.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var SLOTTABLE_IDENTIFIER=Symbol("radix.slottable");function createSlottable(t){const e=({children:r})=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:r});return e.displayName=`${t}.Slottable`,e.__radixId=SLOTTABLE_IDENTIFIER,e}function isSlottable(t){return reactExports.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===SLOTTABLE_IDENTIFIER}function mergeProps(t,e){const r={...e};for(const n in e){const s=t[n],a=e[n];/^on[A-Z]/.test(n)?s&&a?r[n]=(...l)=>{const c=a(...l);return s(...l),c}:s&&(r[n]=s):n==="style"?r[n]={...s,...a}:n==="className"&&(r[n]=[s,a].filter(Boolean).join(" "))}return{...t,...r}}function getElementRef$1(t){var n,s;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var NODES=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Primitive=NODES.reduce((t,e)=>{const r=createSlot(`Primitive.${e}`),n=reactExports.forwardRef((s,a)=>{const{asChild:o,...l}=s,c=o?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),jsxRuntimeExports.jsx(c,{...l,ref:a})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function dispatchDiscreteCustomEvent(t,e){t&&reactDomExports.flushSync(()=>t.dispatchEvent(e))}function createCollection(t){const e=t+"CollectionProvider",[r,n]=createContextScope(e),[s,a]=r(e,{collectionRef:{current:null},itemMap:new Map}),o=S=>{const{scope:k,children:C}=S,P=React.useRef(null),R=React.useRef(new Map).current;return jsxRuntimeExports.jsx(s,{scope:k,itemMap:R,collectionRef:P,children:C})};o.displayName=e;const l=t+"CollectionSlot",c=createSlot(l),d=React.forwardRef((S,k)=>{const{scope:C,children:P}=S,R=a(l,C),j=useComposedRefs(k,R.collectionRef);return jsxRuntimeExports.jsx(c,{ref:j,children:P})});d.displayName=l;const p=t+"CollectionItemSlot",g="data-radix-collection-item",y=createSlot(p),x=React.forwardRef((S,k)=>{const{scope:C,children:P,...R}=S,j=React.useRef(null),I=useComposedRefs(k,j),O=a(p,C);return React.useEffect(()=>(O.itemMap.set(j,{ref:j,...R}),()=>void O.itemMap.delete(j))),jsxRuntimeExports.jsx(y,{[g]:"",ref:I,children:P})});x.displayName=p;function E(S){const k=a(t+"CollectionConsumer",S);return React.useCallback(()=>{const P=k.collectionRef.current;if(!P)return[];const R=Array.from(P.querySelectorAll(`[${g}]`));return Array.from(k.itemMap.values()).sort((O,L)=>R.indexOf(O.ref.current)-R.indexOf(L.ref.current))},[k.collectionRef,k.itemMap])}return[{Provider:o,Slot:d,ItemSlot:x},E,n]}var DirectionContext=reactExports.createContext(void 0);function useDirection(t){const e=reactExports.useContext(DirectionContext);return t||e||"ltr"}function useCallbackRef$1(t){const e=reactExports.useRef(t);return reactExports.useEffect(()=>{e.current=t}),reactExports.useMemo(()=>(...r)=>{var n;return(n=e.current)==null?void 0:n.call(e,...r)},[])}function useEscapeKeydown(t,e=globalThis==null?void 0:globalThis.document){const r=useCallbackRef$1(t);reactExports.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[r,e])}var DISMISSABLE_LAYER_NAME="DismissableLayer",CONTEXT_UPDATE="dismissableLayer.update",POINTER_DOWN_OUTSIDE="dismissableLayer.pointerDownOutside",FOCUS_OUTSIDE="dismissableLayer.focusOutside",originalBodyPointerEvents,DismissableLayerContext=reactExports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),DismissableLayer=reactExports.forwardRef((t,e)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...c}=t,d=reactExports.useContext(DismissableLayerContext),[p,g]=reactExports.useState(null),y=(p==null?void 0:p.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,x]=reactExports.useState({}),E=useComposedRefs(e,L=>g(L)),S=Array.from(d.layers),[k]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),C=S.indexOf(k),P=p?S.indexOf(p):-1,R=d.layersWithOutsidePointerEventsDisabled.size>0,j=P>=C,I=usePointerDownOutside(L=>{const B=L.target,Z=[...d.branches].some(te=>te.contains(B));!j||Z||(s==null||s(L),o==null||o(L),L.defaultPrevented||l==null||l())},y),O=useFocusOutside(L=>{const B=L.target;[...d.branches].some(te=>te.contains(B))||(a==null||a(L),o==null||o(L),L.defaultPrevented||l==null||l())},y);return useEscapeKeydown(L=>{P===d.layers.size-1&&(n==null||n(L),!L.defaultPrevented&&l&&(L.preventDefault(),l()))},y),reactExports.useEffect(()=>{if(p)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(originalBodyPointerEvents=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(p)),d.layers.add(p),dispatchUpdate(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=originalBodyPointerEvents)}},[p,y,r,d]),reactExports.useEffect(()=>()=>{p&&(d.layers.delete(p),d.layersWithOutsidePointerEventsDisabled.delete(p),dispatchUpdate())},[p,d]),reactExports.useEffect(()=>{const L=()=>x({});return document.addEventListener(CONTEXT_UPDATE,L),()=>document.removeEventListener(CONTEXT_UPDATE,L)},[]),jsxRuntimeExports.jsx(Primitive.div,{...c,ref:E,style:{pointerEvents:R?j?"auto":"none":void 0,...t.style},onFocusCapture:composeEventHandlers(t.onFocusCapture,O.onFocusCapture),onBlurCapture:composeEventHandlers(t.onBlurCapture,O.onBlurCapture),onPointerDownCapture:composeEventHandlers(t.onPointerDownCapture,I.onPointerDownCapture)})});DismissableLayer.displayName=DISMISSABLE_LAYER_NAME;var BRANCH_NAME="DismissableLayerBranch",DismissableLayerBranch=reactExports.forwardRef((t,e)=>{const r=reactExports.useContext(DismissableLayerContext),n=reactExports.useRef(null),s=useComposedRefs(e,n);return reactExports.useEffect(()=>{const a=n.current;if(a)return r.branches.add(a),()=>{r.branches.delete(a)}},[r.branches]),jsxRuntimeExports.jsx(Primitive.div,{...t,ref:s})});DismissableLayerBranch.displayName=BRANCH_NAME;function usePointerDownOutside(t,e=globalThis==null?void 0:globalThis.document){const r=useCallbackRef$1(t),n=reactExports.useRef(!1),s=reactExports.useRef(()=>{});return reactExports.useEffect(()=>{const a=l=>{if(l.target&&!n.current){let c=function(){handleAndDispatchCustomEvent(POINTER_DOWN_OUTSIDE,r,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);n.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",a),e.removeEventListener("click",s.current)}},[e,r]),{onPointerDownCapture:()=>n.current=!0}}function useFocusOutside(t,e=globalThis==null?void 0:globalThis.document){const r=useCallbackRef$1(t),n=reactExports.useRef(!1);return reactExports.useEffect(()=>{const s=a=>{a.target&&!n.current&&handleAndDispatchCustomEvent(FOCUS_OUTSIDE,r,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function dispatchUpdate(){const t=new CustomEvent(CONTEXT_UPDATE);document.dispatchEvent(t)}function handleAndDispatchCustomEvent(t,e,r,{discrete:n}){const s=r.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&s.addEventListener(t,e,{once:!0}),n?dispatchDiscreteCustomEvent(s,a):s.dispatchEvent(a)}var count$1=0;function useFocusGuards(){reactExports.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??createFocusGuard()),document.body.insertAdjacentElement("beforeend",t[1]??createFocusGuard()),count$1++,()=>{count$1===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),count$1--}},[])}function createFocusGuard(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var AUTOFOCUS_ON_MOUNT="focusScope.autoFocusOnMount",AUTOFOCUS_ON_UNMOUNT="focusScope.autoFocusOnUnmount",EVENT_OPTIONS$1={bubbles:!1,cancelable:!0},FOCUS_SCOPE_NAME="FocusScope",FocusScope=reactExports.forwardRef((t,e)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...o}=t,[l,c]=reactExports.useState(null),d=useCallbackRef$1(s),p=useCallbackRef$1(a),g=reactExports.useRef(null),y=useComposedRefs(e,S=>c(S)),x=reactExports.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;reactExports.useEffect(()=>{if(n){let S=function(R){if(x.paused||!l)return;const j=R.target;l.contains(j)?g.current=j:focus(g.current,{select:!0})},k=function(R){if(x.paused||!l)return;const j=R.relatedTarget;j!==null&&(l.contains(j)||focus(g.current,{select:!0}))},C=function(R){if(document.activeElement===document.body)for(const I of R)I.removedNodes.length>0&&focus(l)};document.addEventListener("focusin",S),document.addEventListener("focusout",k);const P=new MutationObserver(C);return l&&P.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",S),document.removeEventListener("focusout",k),P.disconnect()}}},[n,l,x.paused]),reactExports.useEffect(()=>{if(l){focusScopesStack.add(x);const S=document.activeElement;if(!l.contains(S)){const C=new CustomEvent(AUTOFOCUS_ON_MOUNT,EVENT_OPTIONS$1);l.addEventListener(AUTOFOCUS_ON_MOUNT,d),l.dispatchEvent(C),C.defaultPrevented||(focusFirst$2(removeLinks(getTabbableCandidates(l)),{select:!0}),document.activeElement===S&&focus(l))}return()=>{l.removeEventListener(AUTOFOCUS_ON_MOUNT,d),setTimeout(()=>{const C=new CustomEvent(AUTOFOCUS_ON_UNMOUNT,EVENT_OPTIONS$1);l.addEventListener(AUTOFOCUS_ON_UNMOUNT,p),l.dispatchEvent(C),C.defaultPrevented||focus(S??document.body,{select:!0}),l.removeEventListener(AUTOFOCUS_ON_UNMOUNT,p),focusScopesStack.remove(x)},0)}}},[l,d,p,x]);const E=reactExports.useCallback(S=>{if(!r&&!n||x.paused)return;const k=S.key==="Tab"&&!S.altKey&&!S.ctrlKey&&!S.metaKey,C=document.activeElement;if(k&&C){const P=S.currentTarget,[R,j]=getTabbableEdges(P);R&&j?!S.shiftKey&&C===j?(S.preventDefault(),r&&focus(R,{select:!0})):S.shiftKey&&C===R&&(S.preventDefault(),r&&focus(j,{select:!0})):C===P&&S.preventDefault()}},[r,n,x.paused]);return jsxRuntimeExports.jsx(Primitive.div,{tabIndex:-1,...o,ref:y,onKeyDown:E})});FocusScope.displayName=FOCUS_SCOPE_NAME;function focusFirst$2(t,{select:e=!1}={}){const r=document.activeElement;for(const n of t)if(focus(n,{select:e}),document.activeElement!==r)return}function getTabbableEdges(t){const e=getTabbableCandidates(t),r=findVisible(e,t),n=findVisible(e.reverse(),t);return[r,n]}function getTabbableCandidates(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function findVisible(t,e){for(const r of t)if(!isHidden(r,{upTo:e}))return r}function isHidden(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function isSelectableInput(t){return t instanceof HTMLInputElement&&"select"in t}function focus(t,{select:e=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&isSelectableInput(t)&&e&&t.select()}}var focusScopesStack=createFocusScopesStack();function createFocusScopesStack(){let t=[];return{add(e){const r=t[0];e!==r&&(r==null||r.pause()),t=arrayRemove(t,e),t.unshift(e)},remove(e){var r;t=arrayRemove(t,e),(r=t[0])==null||r.resume()}}}function arrayRemove(t,e){const r=[...t],n=r.indexOf(e);return n!==-1&&r.splice(n,1),r}function removeLinks(t){return t.filter(e=>e.tagName!=="A")}var useReactId=React$1[" useId ".trim().toString()]||(()=>{}),count=0;function useId(t){const[e,r]=reactExports.useState(useReactId());return useLayoutEffect2(()=>{r(n=>n??String(count++))},[t]),e?`radix-${e}`:""}const sides=["top","right","bottom","left"],min=Math.min,max=Math.max,round=Math.round,floor=Math.floor,createCoords=t=>({x:t,y:t}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp(t,e,r){return max(t,min(e,r))}function evaluate(t,e){return typeof t=="function"?t(e):t}function getSide(t){return t.split("-")[0]}function getAlignment(t){return t.split("-")[1]}function getOppositeAxis(t){return t==="x"?"y":"x"}function getAxisLength(t){return t==="y"?"height":"width"}function getSideAxis(t){return["top","bottom"].includes(getSide(t))?"y":"x"}function getAlignmentAxis(t){return getOppositeAxis(getSideAxis(t))}function getAlignmentSides(t,e,r){r===void 0&&(r=!1);const n=getAlignment(t),s=getAlignmentAxis(t),a=getAxisLength(s);let o=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(o=getOppositePlacement(o)),[o,getOppositePlacement(o)]}function getExpandedPlacements(t){const e=getOppositePlacement(t);return[getOppositeAlignmentPlacement(t),e,getOppositeAlignmentPlacement(e)]}function getOppositeAlignmentPlacement(t){return t.replace(/start|end/g,e=>oppositeAlignmentMap[e])}function getSideList(t,e,r){const n=["left","right"],s=["right","left"],a=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return r?e?s:n:e?n:s;case"left":case"right":return e?a:o;default:return[]}}function getOppositeAxisPlacements(t,e,r,n){const s=getAlignment(t);let a=getSideList(getSide(t),r==="start",n);return s&&(a=a.map(o=>o+"-"+s),e&&(a=a.concat(a.map(getOppositeAlignmentPlacement)))),a}function getOppositePlacement(t){return t.replace(/left|right|bottom|top/g,e=>oppositeSideMap[e])}function expandPaddingObject(t){return{top:0,right:0,bottom:0,left:0,...t}}function getPaddingObject(t){return typeof t!="number"?expandPaddingObject(t):{top:t,right:t,bottom:t,left:t}}function rectToClientRect(t){const{x:e,y:r,width:n,height:s}=t;return{width:n,height:s,top:r,left:e,right:e+n,bottom:r+s,x:e,y:r}}function computeCoordsFromPlacement(t,e,r){let{reference:n,floating:s}=t;const a=getSideAxis(e),o=getAlignmentAxis(e),l=getAxisLength(o),c=getSide(e),d=a==="y",p=n.x+n.width/2-s.width/2,g=n.y+n.height/2-s.height/2,y=n[l]/2-s[l]/2;let x;switch(c){case"top":x={x:p,y:n.y-s.height};break;case"bottom":x={x:p,y:n.y+n.height};break;case"right":x={x:n.x+n.width,y:g};break;case"left":x={x:n.x-s.width,y:g};break;default:x={x:n.x,y:n.y}}switch(getAlignment(e)){case"start":x[o]-=y*(r&&d?-1:1);break;case"end":x[o]+=y*(r&&d?-1:1);break}return x}const computePosition$1=async(t,e,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:a=[],platform:o}=r,l=a.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let d=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:p,y:g}=computeCoordsFromPlacement(d,n,c),y=n,x={},E=0;for(let S=0;S<l.length;S++){const{name:k,fn:C}=l[S],{x:P,y:R,data:j,reset:I}=await C({x:p,y:g,initialPlacement:n,placement:y,strategy:s,middlewareData:x,rects:d,platform:o,elements:{reference:t,floating:e}});p=P??p,g=R??g,x={...x,[k]:{...x[k],...j}},I&&E<=50&&(E++,typeof I=="object"&&(I.placement&&(y=I.placement),I.rects&&(d=I.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):I.rects),{x:p,y:g}=computeCoordsFromPlacement(d,y,c)),S=-1)}return{x:p,y:g,placement:y,strategy:s,middlewareData:x}};async function detectOverflow(t,e){var r;e===void 0&&(e={});const{x:n,y:s,platform:a,rects:o,elements:l,strategy:c}=t,{boundary:d="clippingAncestors",rootBoundary:p="viewport",elementContext:g="floating",altBoundary:y=!1,padding:x=0}=evaluate(e,t),E=getPaddingObject(x),k=l[y?g==="floating"?"reference":"floating":g],C=rectToClientRect(await a.getClippingRect({element:(r=await(a.isElement==null?void 0:a.isElement(k)))==null||r?k:k.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:d,rootBoundary:p,strategy:c})),P=g==="floating"?{x:n,y:s,width:o.floating.width,height:o.floating.height}:o.reference,R=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),j=await(a.isElement==null?void 0:a.isElement(R))?await(a.getScale==null?void 0:a.getScale(R))||{x:1,y:1}:{x:1,y:1},I=rectToClientRect(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:P,offsetParent:R,strategy:c}):P);return{top:(C.top-I.top+E.top)/j.y,bottom:(I.bottom-C.bottom+E.bottom)/j.y,left:(C.left-I.left+E.left)/j.x,right:(I.right-C.right+E.right)/j.x}}const arrow$3=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:n,placement:s,rects:a,platform:o,elements:l,middlewareData:c}=e,{element:d,padding:p=0}=evaluate(t,e)||{};if(d==null)return{};const g=getPaddingObject(p),y={x:r,y:n},x=getAlignmentAxis(s),E=getAxisLength(x),S=await o.getDimensions(d),k=x==="y",C=k?"top":"left",P=k?"bottom":"right",R=k?"clientHeight":"clientWidth",j=a.reference[E]+a.reference[x]-y[x]-a.floating[E],I=y[x]-a.reference[x],O=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let L=O?O[R]:0;(!L||!await(o.isElement==null?void 0:o.isElement(O)))&&(L=l.floating[R]||a.floating[E]);const B=j/2-I/2,Z=L/2-S[E]/2-1,te=min(g[C],Z),ie=min(g[P],Z),Q=te,fe=L-S[E]-ie,se=L/2-S[E]/2+B,Y=clamp(Q,se,fe),G=!c.arrow&&getAlignment(s)!=null&&se!==Y&&a.reference[E]/2-(se<Q?te:ie)-S[E]/2<0,q=G?se<Q?se-Q:se-fe:0;return{[x]:y[x]+q,data:{[x]:Y,centerOffset:se-Y-q,...G&&{alignmentOffset:q}},reset:G}}}),flip$2=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:s,middlewareData:a,rects:o,initialPlacement:l,platform:c,elements:d}=e,{mainAxis:p=!0,crossAxis:g=!0,fallbackPlacements:y,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:E="none",flipAlignment:S=!0,...k}=evaluate(t,e);if((r=a.arrow)!=null&&r.alignmentOffset)return{};const C=getSide(s),P=getSideAxis(l),R=getSide(l)===l,j=await(c.isRTL==null?void 0:c.isRTL(d.floating)),I=y||(R||!S?[getOppositePlacement(l)]:getExpandedPlacements(l)),O=E!=="none";!y&&O&&I.push(...getOppositeAxisPlacements(l,S,E,j));const L=[l,...I],B=await detectOverflow(e,k),Z=[];let te=((n=a.flip)==null?void 0:n.overflows)||[];if(p&&Z.push(B[C]),g){const Y=getAlignmentSides(s,o,j);Z.push(B[Y[0]],B[Y[1]])}if(te=[...te,{placement:s,overflows:Z}],!Z.every(Y=>Y<=0)){var ie,Q;const Y=(((ie=a.flip)==null?void 0:ie.index)||0)+1,G=L[Y];if(G){var fe;const N=g==="alignment"?P!==getSideAxis(G):!1,$=((fe=te[0])==null?void 0:fe.overflows[0])>0;if(!N||$)return{data:{index:Y,overflows:te},reset:{placement:G}}}let q=(Q=te.filter(N=>N.overflows[0]<=0).sort((N,$)=>N.overflows[1]-$.overflows[1])[0])==null?void 0:Q.placement;if(!q)switch(x){case"bestFit":{var se;const N=(se=te.filter($=>{if(O){const V=getSideAxis($.placement);return V===P||V==="y"}return!0}).map($=>[$.placement,$.overflows.filter(V=>V>0).reduce((V,z)=>V+z,0)]).sort(($,V)=>$[1]-V[1])[0])==null?void 0:se[0];N&&(q=N);break}case"initialPlacement":q=l;break}if(s!==q)return{reset:{placement:q}}}return{}}}};function getSideOffsets(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function isAnySideFullyClipped(t){return sides.some(e=>t[e]>=0)}const hide$2=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:r}=e,{strategy:n="referenceHidden",...s}=evaluate(t,e);switch(n){case"referenceHidden":{const a=await detectOverflow(e,{...s,elementContext:"reference"}),o=getSideOffsets(a,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:isAnySideFullyClipped(o)}}}case"escaped":{const a=await detectOverflow(e,{...s,altBoundary:!0}),o=getSideOffsets(a,r.floating);return{data:{escapedOffsets:o,escaped:isAnySideFullyClipped(o)}}}default:return{}}}}};async function convertValueToCoords(t,e){const{placement:r,platform:n,elements:s}=t,a=await(n.isRTL==null?void 0:n.isRTL(s.floating)),o=getSide(r),l=getAlignment(r),c=getSideAxis(r)==="y",d=["left","top"].includes(o)?-1:1,p=a&&c?-1:1,g=evaluate(e,t);let{mainAxis:y,crossAxis:x,alignmentAxis:E}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:g.mainAxis||0,crossAxis:g.crossAxis||0,alignmentAxis:g.alignmentAxis};return l&&typeof E=="number"&&(x=l==="end"?E*-1:E),c?{x:x*p,y:y*d}:{x:y*d,y:x*p}}const offset$2=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:s,y:a,placement:o,middlewareData:l}=e,c=await convertValueToCoords(e,t);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:s+c.x,y:a+c.y,data:{...c,placement:o}}}}},shift$2=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:s}=e,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:k=>{let{x:C,y:P}=k;return{x:C,y:P}}},...c}=evaluate(t,e),d={x:r,y:n},p=await detectOverflow(e,c),g=getSideAxis(getSide(s)),y=getOppositeAxis(g);let x=d[y],E=d[g];if(a){const k=y==="y"?"top":"left",C=y==="y"?"bottom":"right",P=x+p[k],R=x-p[C];x=clamp(P,x,R)}if(o){const k=g==="y"?"top":"left",C=g==="y"?"bottom":"right",P=E+p[k],R=E-p[C];E=clamp(P,E,R)}const S=l.fn({...e,[y]:x,[g]:E});return{...S,data:{x:S.x-r,y:S.y-n,enabled:{[y]:a,[g]:o}}}}}},limitShift$2=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:n,placement:s,rects:a,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=evaluate(t,e),p={x:r,y:n},g=getSideAxis(s),y=getOppositeAxis(g);let x=p[y],E=p[g];const S=evaluate(l,e),k=typeof S=="number"?{mainAxis:S,crossAxis:0}:{mainAxis:0,crossAxis:0,...S};if(c){const R=y==="y"?"height":"width",j=a.reference[y]-a.floating[R]+k.mainAxis,I=a.reference[y]+a.reference[R]-k.mainAxis;x<j?x=j:x>I&&(x=I)}if(d){var C,P;const R=y==="y"?"width":"height",j=["top","left"].includes(getSide(s)),I=a.reference[g]-a.floating[R]+(j&&((C=o.offset)==null?void 0:C[g])||0)+(j?0:k.crossAxis),O=a.reference[g]+a.reference[R]+(j?0:((P=o.offset)==null?void 0:P[g])||0)-(j?k.crossAxis:0);E<I?E=I:E>O&&(E=O)}return{[y]:x,[g]:E}}}},size$2=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;const{placement:s,rects:a,platform:o,elements:l}=e,{apply:c=()=>{},...d}=evaluate(t,e),p=await detectOverflow(e,d),g=getSide(s),y=getAlignment(s),x=getSideAxis(s)==="y",{width:E,height:S}=a.floating;let k,C;g==="top"||g==="bottom"?(k=g,C=y===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(C=g,k=y==="end"?"top":"bottom");const P=S-p.top-p.bottom,R=E-p.left-p.right,j=min(S-p[k],P),I=min(E-p[C],R),O=!e.middlewareData.shift;let L=j,B=I;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(B=R),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(L=P),O&&!y){const te=max(p.left,0),ie=max(p.right,0),Q=max(p.top,0),fe=max(p.bottom,0);x?B=E-2*(te!==0||ie!==0?te+ie:max(p.left,p.right)):L=S-2*(Q!==0||fe!==0?Q+fe:max(p.top,p.bottom))}await c({...e,availableWidth:B,availableHeight:L});const Z=await o.getDimensions(l.floating);return E!==Z.width||S!==Z.height?{reset:{rects:!0}}:{}}}};function hasWindow(){return typeof window<"u"}function getNodeName(t){return isNode(t)?(t.nodeName||"").toLowerCase():"#document"}function getWindow(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function getDocumentElement(t){var e;return(e=(isNode(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function isNode(t){return hasWindow()?t instanceof Node||t instanceof getWindow(t).Node:!1}function isElement(t){return hasWindow()?t instanceof Element||t instanceof getWindow(t).Element:!1}function isHTMLElement(t){return hasWindow()?t instanceof HTMLElement||t instanceof getWindow(t).HTMLElement:!1}function isShadowRoot(t){return!hasWindow()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof getWindow(t).ShadowRoot}function isOverflowElement(t){const{overflow:e,overflowX:r,overflowY:n,display:s}=getComputedStyle$1(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!["inline","contents"].includes(s)}function isTableElement(t){return["table","td","th"].includes(getNodeName(t))}function isTopLayer(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function isContainingBlock(t){const e=isWebKit(),r=isElement(t)?getComputedStyle$1(t):t;return["transform","translate","scale","rotate","perspective"].some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function getContainingBlock(t){let e=getParentNode(t);for(;isHTMLElement(e)&&!isLastTraversableNode(e);){if(isContainingBlock(e))return e;if(isTopLayer(e))return null;e=getParentNode(e)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(t){return["html","body","#document"].includes(getNodeName(t))}function getComputedStyle$1(t){return getWindow(t).getComputedStyle(t)}function getNodeScroll(t){return isElement(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function getParentNode(t){if(getNodeName(t)==="html")return t;const e=t.assignedSlot||t.parentNode||isShadowRoot(t)&&t.host||getDocumentElement(t);return isShadowRoot(e)?e.host:e}function getNearestOverflowAncestor(t){const e=getParentNode(t);return isLastTraversableNode(e)?t.ownerDocument?t.ownerDocument.body:t.body:isHTMLElement(e)&&isOverflowElement(e)?e:getNearestOverflowAncestor(e)}function getOverflowAncestors(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const s=getNearestOverflowAncestor(t),a=s===((n=t.ownerDocument)==null?void 0:n.body),o=getWindow(s);if(a){const l=getFrameElement(o);return e.concat(o,o.visualViewport||[],isOverflowElement(s)?s:[],l&&r?getOverflowAncestors(l):[])}return e.concat(s,getOverflowAncestors(s,[],r))}function getFrameElement(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function getCssDimensions(t){const e=getComputedStyle$1(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const s=isHTMLElement(t),a=s?t.offsetWidth:r,o=s?t.offsetHeight:n,l=round(r)!==a||round(n)!==o;return l&&(r=a,n=o),{width:r,height:n,$:l}}function unwrapElement(t){return isElement(t)?t:t.contextElement}function getScale(t){const e=unwrapElement(t);if(!isHTMLElement(e))return createCoords(1);const r=e.getBoundingClientRect(),{width:n,height:s,$:a}=getCssDimensions(e);let o=(a?round(r.width):r.width)/n,l=(a?round(r.height):r.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const noOffsets=createCoords(0);function getVisualOffsets(t){const e=getWindow(t);return!isWebKit()||!e.visualViewport?noOffsets:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function shouldAddVisualOffsets(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==getWindow(t)?!1:e}function getBoundingClientRect(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const s=t.getBoundingClientRect(),a=unwrapElement(t);let o=createCoords(1);e&&(n?isElement(n)&&(o=getScale(n)):o=getScale(t));const l=shouldAddVisualOffsets(a,r,n)?getVisualOffsets(a):createCoords(0);let c=(s.left+l.x)/o.x,d=(s.top+l.y)/o.y,p=s.width/o.x,g=s.height/o.y;if(a){const y=getWindow(a),x=n&&isElement(n)?getWindow(n):n;let E=y,S=getFrameElement(E);for(;S&&n&&x!==E;){const k=getScale(S),C=S.getBoundingClientRect(),P=getComputedStyle$1(S),R=C.left+(S.clientLeft+parseFloat(P.paddingLeft))*k.x,j=C.top+(S.clientTop+parseFloat(P.paddingTop))*k.y;c*=k.x,d*=k.y,p*=k.x,g*=k.y,c+=R,d+=j,E=getWindow(S),S=getFrameElement(E)}}return rectToClientRect({width:p,height:g,x:c,y:d})}function getWindowScrollBarX(t,e){const r=getNodeScroll(t).scrollLeft;return e?e.left+r:getBoundingClientRect(getDocumentElement(t)).left+r}function getHTMLOffset(t,e,r){r===void 0&&(r=!1);const n=t.getBoundingClientRect(),s=n.left+e.scrollLeft-(r?0:getWindowScrollBarX(t,n)),a=n.top+e.scrollTop;return{x:s,y:a}}function convertOffsetParentRelativeRectToViewportRelativeRect(t){let{elements:e,rect:r,offsetParent:n,strategy:s}=t;const a=s==="fixed",o=getDocumentElement(n),l=e?isTopLayer(e.floating):!1;if(n===o||l&&a)return r;let c={scrollLeft:0,scrollTop:0},d=createCoords(1);const p=createCoords(0),g=isHTMLElement(n);if((g||!g&&!a)&&((getNodeName(n)!=="body"||isOverflowElement(o))&&(c=getNodeScroll(n)),isHTMLElement(n))){const x=getBoundingClientRect(n);d=getScale(n),p.x=x.x+n.clientLeft,p.y=x.y+n.clientTop}const y=o&&!g&&!a?getHTMLOffset(o,c,!0):createCoords(0);return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-c.scrollLeft*d.x+p.x+y.x,y:r.y*d.y-c.scrollTop*d.y+p.y+y.y}}function getClientRects(t){return Array.from(t.getClientRects())}function getDocumentRect(t){const e=getDocumentElement(t),r=getNodeScroll(t),n=t.ownerDocument.body,s=max(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),a=max(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+getWindowScrollBarX(t);const l=-r.scrollTop;return getComputedStyle$1(n).direction==="rtl"&&(o+=max(e.clientWidth,n.clientWidth)-s),{width:s,height:a,x:o,y:l}}function getViewportRect(t,e){const r=getWindow(t),n=getDocumentElement(t),s=r.visualViewport;let a=n.clientWidth,o=n.clientHeight,l=0,c=0;if(s){a=s.width,o=s.height;const d=isWebKit();(!d||d&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:a,height:o,x:l,y:c}}function getInnerBoundingClientRect(t,e){const r=getBoundingClientRect(t,!0,e==="fixed"),n=r.top+t.clientTop,s=r.left+t.clientLeft,a=isHTMLElement(t)?getScale(t):createCoords(1),o=t.clientWidth*a.x,l=t.clientHeight*a.y,c=s*a.x,d=n*a.y;return{width:o,height:l,x:c,y:d}}function getClientRectFromClippingAncestor(t,e,r){let n;if(e==="viewport")n=getViewportRect(t,r);else if(e==="document")n=getDocumentRect(getDocumentElement(t));else if(isElement(e))n=getInnerBoundingClientRect(e,r);else{const s=getVisualOffsets(t);n={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return rectToClientRect(n)}function hasFixedPositionAncestor(t,e){const r=getParentNode(t);return r===e||!isElement(r)||isLastTraversableNode(r)?!1:getComputedStyle$1(r).position==="fixed"||hasFixedPositionAncestor(r,e)}function getClippingElementAncestors(t,e){const r=e.get(t);if(r)return r;let n=getOverflowAncestors(t,[],!1).filter(l=>isElement(l)&&getNodeName(l)!=="body"),s=null;const a=getComputedStyle$1(t).position==="fixed";let o=a?getParentNode(t):t;for(;isElement(o)&&!isLastTraversableNode(o);){const l=getComputedStyle$1(o),c=isContainingBlock(o);!c&&l.position==="fixed"&&(s=null),(a?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||isOverflowElement(o)&&!c&&hasFixedPositionAncestor(t,o))?n=n.filter(p=>p!==o):s=l,o=getParentNode(o)}return e.set(t,n),n}function getClippingRect(t){let{element:e,boundary:r,rootBoundary:n,strategy:s}=t;const o=[...r==="clippingAncestors"?isTopLayer(e)?[]:getClippingElementAncestors(e,this._c):[].concat(r),n],l=o[0],c=o.reduce((d,p)=>{const g=getClientRectFromClippingAncestor(e,p,s);return d.top=max(g.top,d.top),d.right=min(g.right,d.right),d.bottom=min(g.bottom,d.bottom),d.left=max(g.left,d.left),d},getClientRectFromClippingAncestor(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function getDimensions(t){const{width:e,height:r}=getCssDimensions(t);return{width:e,height:r}}function getRectRelativeToOffsetParent(t,e,r){const n=isHTMLElement(e),s=getDocumentElement(e),a=r==="fixed",o=getBoundingClientRect(t,!0,a,e);let l={scrollLeft:0,scrollTop:0};const c=createCoords(0);function d(){c.x=getWindowScrollBarX(s)}if(n||!n&&!a)if((getNodeName(e)!=="body"||isOverflowElement(s))&&(l=getNodeScroll(e)),n){const x=getBoundingClientRect(e,!0,a,e);c.x=x.x+e.clientLeft,c.y=x.y+e.clientTop}else s&&d();a&&!n&&s&&d();const p=s&&!n&&!a?getHTMLOffset(s,l):createCoords(0),g=o.left+l.scrollLeft-c.x-p.x,y=o.top+l.scrollTop-c.y-p.y;return{x:g,y,width:o.width,height:o.height}}function isStaticPositioned(t){return getComputedStyle$1(t).position==="static"}function getTrueOffsetParent(t,e){if(!isHTMLElement(t)||getComputedStyle$1(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return getDocumentElement(t)===r&&(r=r.ownerDocument.body),r}function getOffsetParent(t,e){const r=getWindow(t);if(isTopLayer(t))return r;if(!isHTMLElement(t)){let s=getParentNode(t);for(;s&&!isLastTraversableNode(s);){if(isElement(s)&&!isStaticPositioned(s))return s;s=getParentNode(s)}return r}let n=getTrueOffsetParent(t,e);for(;n&&isTableElement(n)&&isStaticPositioned(n);)n=getTrueOffsetParent(n,e);return n&&isLastTraversableNode(n)&&isStaticPositioned(n)&&!isContainingBlock(n)?r:n||getContainingBlock(t)||r}const getElementRects=async function(t){const e=this.getOffsetParent||getOffsetParent,r=this.getDimensions,n=await r(t.floating);return{reference:getRectRelativeToOffsetParent(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function isRTL(t){return getComputedStyle$1(t).direction==="rtl"}const platform={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale,isElement,isRTL};function rectsAreEqual(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function observeMove(t,e){let r=null,n;const s=getDocumentElement(t);function a(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const d=t.getBoundingClientRect(),{left:p,top:g,width:y,height:x}=d;if(l||e(),!y||!x)return;const E=floor(g),S=floor(s.clientWidth-(p+y)),k=floor(s.clientHeight-(g+x)),C=floor(p),R={rootMargin:-E+"px "+-S+"px "+-k+"px "+-C+"px",threshold:max(0,min(1,c))||1};let j=!0;function I(O){const L=O[0].intersectionRatio;if(L!==c){if(!j)return o();L?o(!1,L):n=setTimeout(()=>{o(!1,1e-7)},1e3)}L===1&&!rectsAreEqual(d,t.getBoundingClientRect())&&o(),j=!1}try{r=new IntersectionObserver(I,{...R,root:s.ownerDocument})}catch{r=new IntersectionObserver(I,R)}r.observe(t)}return o(!0),a}function autoUpdate(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,d=unwrapElement(t),p=s||a?[...d?getOverflowAncestors(d):[],...getOverflowAncestors(e)]:[];p.forEach(C=>{s&&C.addEventListener("scroll",r,{passive:!0}),a&&C.addEventListener("resize",r)});const g=d&&l?observeMove(d,r):null;let y=-1,x=null;o&&(x=new ResizeObserver(C=>{let[P]=C;P&&P.target===d&&x&&(x.unobserve(e),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var R;(R=x)==null||R.observe(e)})),r()}),d&&!c&&x.observe(d),x.observe(e));let E,S=c?getBoundingClientRect(t):null;c&&k();function k(){const C=getBoundingClientRect(t);S&&!rectsAreEqual(S,C)&&r(),S=C,E=requestAnimationFrame(k)}return r(),()=>{var C;p.forEach(P=>{s&&P.removeEventListener("scroll",r),a&&P.removeEventListener("resize",r)}),g==null||g(),(C=x)==null||C.disconnect(),x=null,c&&cancelAnimationFrame(E)}}const offset$1=offset$2,shift$1=shift$2,flip$1=flip$2,size$1=size$2,hide$1=hide$2,arrow$2=arrow$3,limitShift$1=limitShift$2,computePosition=(t,e,r)=>{const n=new Map,s={platform,...r},a={...s.platform,_c:n};return computePosition$1(t,e,{...s,platform:a})};var index=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function deepEqual(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,n,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!deepEqual(t[n],e[n]))return!1;return!0}if(s=Object.keys(t),r=s.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(e,s[n]))return!1;for(n=r;n--!==0;){const a=s[n];if(!(a==="_owner"&&t.$$typeof)&&!deepEqual(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function getDPR(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function roundByDPR(t,e){const r=getDPR(t);return Math.round(e*r)/r}function useLatestRef(t){const e=reactExports.useRef(t);return index(()=>{e.current=t}),e}function useFloating(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:a,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=t,[p,g]=reactExports.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[y,x]=reactExports.useState(n);deepEqual(y,n)||x(n);const[E,S]=reactExports.useState(null),[k,C]=reactExports.useState(null),P=reactExports.useCallback(N=>{N!==O.current&&(O.current=N,S(N))},[]),R=reactExports.useCallback(N=>{N!==L.current&&(L.current=N,C(N))},[]),j=a||E,I=o||k,O=reactExports.useRef(null),L=reactExports.useRef(null),B=reactExports.useRef(p),Z=c!=null,te=useLatestRef(c),ie=useLatestRef(s),Q=useLatestRef(d),fe=reactExports.useCallback(()=>{if(!O.current||!L.current)return;const N={placement:e,strategy:r,middleware:y};ie.current&&(N.platform=ie.current),computePosition(O.current,L.current,N).then($=>{const V={...$,isPositioned:Q.current!==!1};se.current&&!deepEqual(B.current,V)&&(B.current=V,reactDomExports.flushSync(()=>{g(V)}))})},[y,e,r,ie,Q]);index(()=>{d===!1&&B.current.isPositioned&&(B.current.isPositioned=!1,g(N=>({...N,isPositioned:!1})))},[d]);const se=reactExports.useRef(!1);index(()=>(se.current=!0,()=>{se.current=!1}),[]),index(()=>{if(j&&(O.current=j),I&&(L.current=I),j&&I){if(te.current)return te.current(j,I,fe);fe()}},[j,I,fe,te,Z]);const Y=reactExports.useMemo(()=>({reference:O,floating:L,setReference:P,setFloating:R}),[P,R]),G=reactExports.useMemo(()=>({reference:j,floating:I}),[j,I]),q=reactExports.useMemo(()=>{const N={position:r,left:0,top:0};if(!G.floating)return N;const $=roundByDPR(G.floating,p.x),V=roundByDPR(G.floating,p.y);return l?{...N,transform:"translate("+$+"px, "+V+"px)",...getDPR(G.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:$,top:V}},[r,l,G.floating,p.x,p.y]);return reactExports.useMemo(()=>({...p,update:fe,refs:Y,elements:G,floatingStyles:q}),[p,fe,Y,G,q])}const arrow$1=t=>{function e(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:n,padding:s}=typeof t=="function"?t(r):t;return n&&e(n)?n.current!=null?arrow$2({element:n.current,padding:s}).fn(r):{}:n?arrow$2({element:n,padding:s}).fn(r):{}}}},offset=(t,e)=>({...offset$1(t),options:[t,e]}),shift=(t,e)=>({...shift$1(t),options:[t,e]}),limitShift=(t,e)=>({...limitShift$1(t),options:[t,e]}),flip=(t,e)=>({...flip$1(t),options:[t,e]}),size=(t,e)=>({...size$1(t),options:[t,e]}),hide=(t,e)=>({...hide$1(t),options:[t,e]}),arrow=(t,e)=>({...arrow$1(t),options:[t,e]});var NAME$1="Arrow",Arrow$1=reactExports.forwardRef((t,e)=>{const{children:r,width:n=10,height:s=5,...a}=t;return jsxRuntimeExports.jsx(Primitive.svg,{...a,ref:e,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:jsxRuntimeExports.jsx("polygon",{points:"0,0 30,0 15,10"})})});Arrow$1.displayName=NAME$1;var Root$2=Arrow$1;function useSize(t){const[e,r]=reactExports.useState(void 0);return useLayoutEffect2(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let o,l;if("borderBoxSize"in a){const c=a.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=t.offsetWidth,l=t.offsetHeight;r({width:o,height:l})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),e}var POPPER_NAME="Popper",[createPopperContext,createPopperScope]=createContextScope(POPPER_NAME),[PopperProvider,usePopperContext]=createPopperContext(POPPER_NAME),Popper=t=>{const{__scopePopper:e,children:r}=t,[n,s]=reactExports.useState(null);return jsxRuntimeExports.jsx(PopperProvider,{scope:e,anchor:n,onAnchorChange:s,children:r})};Popper.displayName=POPPER_NAME;var ANCHOR_NAME$1="PopperAnchor",PopperAnchor=reactExports.forwardRef((t,e)=>{const{__scopePopper:r,virtualRef:n,...s}=t,a=usePopperContext(ANCHOR_NAME$1,r),o=reactExports.useRef(null),l=useComposedRefs(e,o);return reactExports.useEffect(()=>{a.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:jsxRuntimeExports.jsx(Primitive.div,{...s,ref:l})});PopperAnchor.displayName=ANCHOR_NAME$1;var CONTENT_NAME$3="PopperContent",[PopperContentProvider,useContentContext]=createPopperContext(CONTENT_NAME$3),PopperContent=reactExports.forwardRef((t,e)=>{var Re,oe,Se,Ne,Fe,et;const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:a="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:p=0,sticky:g="partial",hideWhenDetached:y=!1,updatePositionStrategy:x="optimized",onPlaced:E,...S}=t,k=usePopperContext(CONTENT_NAME$3,r),[C,P]=reactExports.useState(null),R=useComposedRefs(e,Le=>P(Le)),[j,I]=reactExports.useState(null),O=useSize(j),L=(O==null?void 0:O.width)??0,B=(O==null?void 0:O.height)??0,Z=n+(a!=="center"?"-"+a:""),te=typeof p=="number"?p:{top:0,right:0,bottom:0,left:0,...p},ie=Array.isArray(d)?d:[d],Q=ie.length>0,fe={padding:te,boundary:ie.filter(isNotNull),altBoundary:Q},{refs:se,floatingStyles:Y,placement:G,isPositioned:q,middlewareData:N}=useFloating({strategy:"fixed",placement:Z,whileElementsMounted:(...Le)=>autoUpdate(...Le,{animationFrame:x==="always"}),elements:{reference:k.anchor},middleware:[offset({mainAxis:s+B,alignmentAxis:o}),c&&shift({mainAxis:!0,crossAxis:!1,limiter:g==="partial"?limitShift():void 0,...fe}),c&&flip({...fe}),size({...fe,apply:({elements:Le,rects:Ee,availableWidth:Pt,availableHeight:Dt})=>{const{width:Et,height:St}=Ee.reference,Ct=Le.floating.style;Ct.setProperty("--radix-popper-available-width",`${Pt}px`),Ct.setProperty("--radix-popper-available-height",`${Dt}px`),Ct.setProperty("--radix-popper-anchor-width",`${Et}px`),Ct.setProperty("--radix-popper-anchor-height",`${St}px`)}}),j&&arrow({element:j,padding:l}),transformOrigin({arrowWidth:L,arrowHeight:B}),y&&hide({strategy:"referenceHidden",...fe})]}),[$,V]=getSideAndAlignFromPlacement(G),z=useCallbackRef$1(E);useLayoutEffect2(()=>{q&&(z==null||z())},[q,z]);const ne=(Re=N.arrow)==null?void 0:Re.x,pe=(oe=N.arrow)==null?void 0:oe.y,xe=((Se=N.arrow)==null?void 0:Se.centerOffset)!==0,[Ce,ce]=reactExports.useState();return useLayoutEffect2(()=>{C&&ce(window.getComputedStyle(C).zIndex)},[C]),jsxRuntimeExports.jsx("div",{ref:se.setFloating,"data-radix-popper-content-wrapper":"",style:{...Y,transform:q?Y.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ce,"--radix-popper-transform-origin":[(Ne=N.transformOrigin)==null?void 0:Ne.x,(Fe=N.transformOrigin)==null?void 0:Fe.y].join(" "),...((et=N.hide)==null?void 0:et.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:jsxRuntimeExports.jsx(PopperContentProvider,{scope:r,placedSide:$,onArrowChange:I,arrowX:ne,arrowY:pe,shouldHideArrow:xe,children:jsxRuntimeExports.jsx(Primitive.div,{"data-side":$,"data-align":V,...S,ref:R,style:{...S.style,animation:q?void 0:"none"}})})})});PopperContent.displayName=CONTENT_NAME$3;var ARROW_NAME$3="PopperArrow",OPPOSITE_SIDE={top:"bottom",right:"left",bottom:"top",left:"right"},PopperArrow=reactExports.forwardRef(function t(e,r){const{__scopePopper:n,...s}=e,a=useContentContext(ARROW_NAME$3,n),o=OPPOSITE_SIDE[a.placedSide];return jsxRuntimeExports.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:jsxRuntimeExports.jsx(Root$2,{...s,ref:r,style:{...s.style,display:"block"}})})});PopperArrow.displayName=ARROW_NAME$3;function isNotNull(t){return t!==null}var transformOrigin=t=>({name:"transformOrigin",options:t,fn(e){var k,C,P;const{placement:r,rects:n,middlewareData:s}=e,o=((k=s.arrow)==null?void 0:k.centerOffset)!==0,l=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[d,p]=getSideAndAlignFromPlacement(r),g={start:"0%",center:"50%",end:"100%"}[p],y=(((C=s.arrow)==null?void 0:C.x)??0)+l/2,x=(((P=s.arrow)==null?void 0:P.y)??0)+c/2;let E="",S="";return d==="bottom"?(E=o?g:`${y}px`,S=`${-c}px`):d==="top"?(E=o?g:`${y}px`,S=`${n.floating.height+c}px`):d==="right"?(E=`${-c}px`,S=o?g:`${x}px`):d==="left"&&(E=`${n.floating.width+c}px`,S=o?g:`${x}px`),{data:{x:E,y:S}}}});function getSideAndAlignFromPlacement(t){const[e,r="center"]=t.split("-");return[e,r]}var Root2$1=Popper,Anchor=PopperAnchor,Content=PopperContent,Arrow=PopperArrow,PORTAL_NAME$3="Portal",Portal$2=reactExports.forwardRef((t,e)=>{var l;const{container:r,...n}=t,[s,a]=reactExports.useState(!1);useLayoutEffect2(()=>a(!0),[]);const o=r||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?ReactDOM.createPortal(jsxRuntimeExports.jsx(Primitive.div,{...n,ref:e}),o):null});Portal$2.displayName=PORTAL_NAME$3;function useStateMachine(t,e){return reactExports.useReducer((r,n)=>e[r][n]??r,t)}var Presence=t=>{const{present:e,children:r}=t,n=usePresence(e),s=typeof r=="function"?r({present:n.isPresent}):reactExports.Children.only(r),a=useComposedRefs(n.ref,getElementRef(s));return typeof r=="function"||n.isPresent?reactExports.cloneElement(s,{ref:a}):null};Presence.displayName="Presence";function usePresence(t){const[e,r]=reactExports.useState(),n=reactExports.useRef(null),s=reactExports.useRef(t),a=reactExports.useRef("none"),o=t?"mounted":"unmounted",[l,c]=useStateMachine(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return reactExports.useEffect(()=>{const d=getAnimationName(n.current);a.current=l==="mounted"?d:"none"},[l]),useLayoutEffect2(()=>{const d=n.current,p=s.current;if(p!==t){const y=a.current,x=getAnimationName(d);t?c("MOUNT"):x==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(p&&y!==x?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),useLayoutEffect2(()=>{if(e){let d;const p=e.ownerDocument.defaultView??window,g=x=>{const S=getAnimationName(n.current).includes(x.animationName);if(x.target===e&&S&&(c("ANIMATION_END"),!s.current)){const k=e.style.animationFillMode;e.style.animationFillMode="forwards",d=p.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=k)})}},y=x=>{x.target===e&&(a.current=getAnimationName(n.current))};return e.addEventListener("animationstart",y),e.addEventListener("animationcancel",g),e.addEventListener("animationend",g),()=>{p.clearTimeout(d),e.removeEventListener("animationstart",y),e.removeEventListener("animationcancel",g),e.removeEventListener("animationend",g)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:reactExports.useCallback(d=>{n.current=d?getComputedStyle(d):null,r(d)},[])}}function getAnimationName(t){return(t==null?void 0:t.animationName)||"none"}function getElementRef(t){var n,s;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var ENTRY_FOCUS="rovingFocusGroup.onEntryFocus",EVENT_OPTIONS={bubbles:!1,cancelable:!0},GROUP_NAME$2="RovingFocusGroup",[Collection$1,useCollection$1,createCollectionScope$1]=createCollection(GROUP_NAME$2),[createRovingFocusGroupContext,createRovingFocusGroupScope]=createContextScope(GROUP_NAME$2,[createCollectionScope$1]),[RovingFocusProvider,useRovingFocusContext]=createRovingFocusGroupContext(GROUP_NAME$2),RovingFocusGroup=reactExports.forwardRef((t,e)=>jsxRuntimeExports.jsx(Collection$1.Provider,{scope:t.__scopeRovingFocusGroup,children:jsxRuntimeExports.jsx(Collection$1.Slot,{scope:t.__scopeRovingFocusGroup,children:jsxRuntimeExports.jsx(RovingFocusGroupImpl,{...t,ref:e})})}));RovingFocusGroup.displayName=GROUP_NAME$2;var RovingFocusGroupImpl=reactExports.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:p=!1,...g}=t,y=reactExports.useRef(null),x=useComposedRefs(e,y),E=useDirection(a),[S,k]=useControllableState({prop:o,defaultProp:l??null,onChange:c,caller:GROUP_NAME$2}),[C,P]=reactExports.useState(!1),R=useCallbackRef$1(d),j=useCollection$1(r),I=reactExports.useRef(!1),[O,L]=reactExports.useState(0);return reactExports.useEffect(()=>{const B=y.current;if(B)return B.addEventListener(ENTRY_FOCUS,R),()=>B.removeEventListener(ENTRY_FOCUS,R)},[R]),jsxRuntimeExports.jsx(RovingFocusProvider,{scope:r,orientation:n,dir:E,loop:s,currentTabStopId:S,onItemFocus:reactExports.useCallback(B=>k(B),[k]),onItemShiftTab:reactExports.useCallback(()=>P(!0),[]),onFocusableItemAdd:reactExports.useCallback(()=>L(B=>B+1),[]),onFocusableItemRemove:reactExports.useCallback(()=>L(B=>B-1),[]),children:jsxRuntimeExports.jsx(Primitive.div,{tabIndex:C||O===0?-1:0,"data-orientation":n,...g,ref:x,style:{outline:"none",...t.style},onMouseDown:composeEventHandlers(t.onMouseDown,()=>{I.current=!0}),onFocus:composeEventHandlers(t.onFocus,B=>{const Z=!I.current;if(B.target===B.currentTarget&&Z&&!C){const te=new CustomEvent(ENTRY_FOCUS,EVENT_OPTIONS);if(B.currentTarget.dispatchEvent(te),!te.defaultPrevented){const ie=j().filter(G=>G.focusable),Q=ie.find(G=>G.active),fe=ie.find(G=>G.id===S),Y=[Q,fe,...ie].filter(Boolean).map(G=>G.ref.current);focusFirst$1(Y,p)}}I.current=!1}),onBlur:composeEventHandlers(t.onBlur,()=>P(!1))})})}),ITEM_NAME$2="RovingFocusGroupItem",RovingFocusGroupItem=reactExports.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:a,children:o,...l}=t,c=useId(),d=a||c,p=useRovingFocusContext(ITEM_NAME$2,r),g=p.currentTabStopId===d,y=useCollection$1(r),{onFocusableItemAdd:x,onFocusableItemRemove:E,currentTabStopId:S}=p;return reactExports.useEffect(()=>{if(n)return x(),()=>E()},[n,x,E]),jsxRuntimeExports.jsx(Collection$1.ItemSlot,{scope:r,id:d,focusable:n,active:s,children:jsxRuntimeExports.jsx(Primitive.span,{tabIndex:g?0:-1,"data-orientation":p.orientation,...l,ref:e,onMouseDown:composeEventHandlers(t.onMouseDown,k=>{n?p.onItemFocus(d):k.preventDefault()}),onFocus:composeEventHandlers(t.onFocus,()=>p.onItemFocus(d)),onKeyDown:composeEventHandlers(t.onKeyDown,k=>{if(k.key==="Tab"&&k.shiftKey){p.onItemShiftTab();return}if(k.target!==k.currentTarget)return;const C=getFocusIntent(k,p.orientation,p.dir);if(C!==void 0){if(k.metaKey||k.ctrlKey||k.altKey||k.shiftKey)return;k.preventDefault();let R=y().filter(j=>j.focusable).map(j=>j.ref.current);if(C==="last")R.reverse();else if(C==="prev"||C==="next"){C==="prev"&&R.reverse();const j=R.indexOf(k.currentTarget);R=p.loop?wrapArray$1(R,j+1):R.slice(j+1)}setTimeout(()=>focusFirst$1(R))}}),children:typeof o=="function"?o({isCurrentTabStop:g,hasTabStop:S!=null}):o})})});RovingFocusGroupItem.displayName=ITEM_NAME$2;var MAP_KEY_TO_FOCUS_INTENT={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function getDirectionAwareKey(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function getFocusIntent(t,e,r){const n=getDirectionAwareKey(t.key,r);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return MAP_KEY_TO_FOCUS_INTENT[n]}function focusFirst$1(t,e=!1){const r=document.activeElement;for(const n of t)if(n===r||(n.focus({preventScroll:e}),document.activeElement!==r))return}function wrapArray$1(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var Root$1=RovingFocusGroup,Item=RovingFocusGroupItem,getDefaultParent=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={},lockCount=0,unwrapHost=function(t){return t&&(t.host||unwrapHost(t.parentNode))},correctTargets=function(t,e){return e.map(function(r){if(t.contains(r))return r;var n=unwrapHost(r);return n&&t.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},applyAttributeToOthers=function(t,e,r,n){var s=correctTargets(e,Array.isArray(t)?t:[t]);markerMap[r]||(markerMap[r]=new WeakMap);var a=markerMap[r],o=[],l=new Set,c=new Set(s),d=function(g){!g||l.has(g)||(l.add(g),d(g.parentNode))};s.forEach(d);var p=function(g){!g||c.has(g)||Array.prototype.forEach.call(g.children,function(y){if(l.has(y))p(y);else try{var x=y.getAttribute(n),E=x!==null&&x!=="false",S=(counterMap.get(y)||0)+1,k=(a.get(y)||0)+1;counterMap.set(y,S),a.set(y,k),o.push(y),S===1&&E&&uncontrolledNodes.set(y,!0),k===1&&y.setAttribute(r,"true"),E||y.setAttribute(n,"true")}catch(C){console.error("aria-hidden: cannot operate on ",y,C)}})};return p(e),l.clear(),lockCount++,function(){o.forEach(function(g){var y=counterMap.get(g)-1,x=a.get(g)-1;counterMap.set(g,y),a.set(g,x),y||(uncontrolledNodes.has(g)||g.removeAttribute(n),uncontrolledNodes.delete(g)),x||g.removeAttribute(r)}),lockCount--,lockCount||(counterMap=new WeakMap,counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={})}},hideOthers=function(t,e,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),s=getDefaultParent(t);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live], script"))),applyAttributeToOthers(n,s,r,"aria-hidden")):function(){return null}},__assign=function(){return __assign=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},__assign.apply(this,arguments)};function __rest(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function __spreadArray(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,a;n<s;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))}typeof SuppressedError=="function"&&SuppressedError;var zeroRightClassName="right-scroll-bar-position",fullWidthClassName="width-before-scroll-bar",noScrollbarsClassName="with-scroll-bars-hidden",removedBarSizeVariable="--removed-body-scroll-bar-size";function assignRef(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function useCallbackRef(t,e){var r=reactExports.useState(function(){return{value:t,callback:e,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=e,r.facade}var useIsomorphicLayoutEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,currentValues=new WeakMap;function useMergeRefs(t,e){var r=useCallbackRef(null,function(n){return t.forEach(function(s){return assignRef(s,n)})});return useIsomorphicLayoutEffect(function(){var n=currentValues.get(r);if(n){var s=new Set(n),a=new Set(t),o=r.current;s.forEach(function(l){a.has(l)||assignRef(l,null)}),a.forEach(function(l){s.has(l)||assignRef(l,o)})}currentValues.set(r,t)},[t]),r}function ItoI(t){return t}function innerCreateMedium(t,e){e===void 0&&(e=ItoI);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(a){var o=e(a,n);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(a){for(n=!0;r.length;){var o=r;r=[],o.forEach(a)}r={push:function(l){return a(l)},filter:function(){return r}}},assignMedium:function(a){n=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(a),o=r}var c=function(){var p=o;o=[],p.forEach(a)},d=function(){return Promise.resolve().then(c)};d(),r={push:function(p){o.push(p),d()},filter:function(p){return o=o.filter(p),r}}}};return s}function createSidecarMedium(t){t===void 0&&(t={});var e=innerCreateMedium(null);return e.options=__assign({async:!0,ssr:!1},t),e}var SideCar$1=function(t){var e=t.sideCar,r=__rest(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return reactExports.createElement(n,__assign({},r))};SideCar$1.isSideCarExport=!0;function exportSidecar(t,e){return t.useMedium(e),SideCar$1}var effectCar=createSidecarMedium(),nothing=function(){},RemoveScroll=reactExports.forwardRef(function(t,e){var r=reactExports.useRef(null),n=reactExports.useState({onScrollCapture:nothing,onWheelCapture:nothing,onTouchMoveCapture:nothing}),s=n[0],a=n[1],o=t.forwardProps,l=t.children,c=t.className,d=t.removeScrollBar,p=t.enabled,g=t.shards,y=t.sideCar,x=t.noRelative,E=t.noIsolation,S=t.inert,k=t.allowPinchZoom,C=t.as,P=C===void 0?"div":C,R=t.gapMode,j=__rest(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),I=y,O=useMergeRefs([r,e]),L=__assign(__assign({},j),s);return reactExports.createElement(reactExports.Fragment,null,p&&reactExports.createElement(I,{sideCar:effectCar,removeScrollBar:d,shards:g,noRelative:x,noIsolation:E,inert:S,setCallbacks:a,allowPinchZoom:!!k,lockRef:r,gapMode:R}),o?reactExports.cloneElement(reactExports.Children.only(l),__assign(__assign({},L),{ref:O})):reactExports.createElement(P,__assign({},L,{className:c,ref:O}),l))});RemoveScroll.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};RemoveScroll.classNames={fullWidth:fullWidthClassName,zeroRight:zeroRightClassName};var getNonce=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function makeStyleTag(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=getNonce();return e&&t.setAttribute("nonce",e),t}function injectStyles(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function insertStyleTag(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var stylesheetSingleton=function(){var t=0,e=null;return{add:function(r){t==0&&(e=makeStyleTag())&&(injectStyles(e,r),insertStyleTag(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},styleHookSingleton=function(){var t=stylesheetSingleton();return function(e,r){reactExports.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&r])}},styleSingleton=function(){var t=styleHookSingleton(),e=function(r){var n=r.styles,s=r.dynamic;return t(n,s),null};return e},zeroGap={left:0,top:0,right:0,gap:0},parse=function(t){return parseInt(t||"",10)||0},getOffset=function(t){var e=window.getComputedStyle(document.body),r=e[t==="padding"?"paddingLeft":"marginLeft"],n=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[parse(r),parse(n),parse(s)]},getGapWidth=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return zeroGap;var e=getOffset(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-r+e[2]-e[0])}},Style=styleSingleton(),lockAttribute="data-scroll-locked",getStyles=function(t,e,r,n){var s=t.left,a=t.top,o=t.right,l=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(noScrollbarsClassName,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(lockAttribute,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(zeroRightClassName,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(fullWidthClassName,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(zeroRightClassName," .").concat(zeroRightClassName,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(fullWidthClassName," .").concat(fullWidthClassName,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(lockAttribute,`] {
    `).concat(removedBarSizeVariable,": ").concat(l,`px;
  }
`)},getCurrentUseCounter=function(){var t=parseInt(document.body.getAttribute(lockAttribute)||"0",10);return isFinite(t)?t:0},useLockAttribute=function(){reactExports.useEffect(function(){return document.body.setAttribute(lockAttribute,(getCurrentUseCounter()+1).toString()),function(){var t=getCurrentUseCounter()-1;t<=0?document.body.removeAttribute(lockAttribute):document.body.setAttribute(lockAttribute,t.toString())}},[])},RemoveScrollBar=function(t){var e=t.noRelative,r=t.noImportant,n=t.gapMode,s=n===void 0?"margin":n;useLockAttribute();var a=reactExports.useMemo(function(){return getGapWidth(s)},[s]);return reactExports.createElement(Style,{styles:getStyles(a,!e,s,r?"":"!important")})},passiveSupported=!1;if(typeof window<"u")try{var options=Object.defineProperty({},"passive",{get:function(){return passiveSupported=!0,!0}});window.addEventListener("test",options,options),window.removeEventListener("test",options,options)}catch{passiveSupported=!1}var nonPassive=passiveSupported?{passive:!1}:!1,alwaysContainsScroll=function(t){return t.tagName==="TEXTAREA"},elementCanBeScrolled=function(t,e){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[e]!=="hidden"&&!(r.overflowY===r.overflowX&&!alwaysContainsScroll(t)&&r[e]==="visible")},elementCouldBeVScrolled=function(t){return elementCanBeScrolled(t,"overflowY")},elementCouldBeHScrolled=function(t){return elementCanBeScrolled(t,"overflowX")},locationCouldBeScrolled=function(t,e){var r=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=elementCouldBeScrolled(t,n);if(s){var a=getScrollVariables(t,n),o=a[1],l=a[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},getVScrollVariables=function(t){var e=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[e,r,n]},getHScrollVariables=function(t){var e=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[e,r,n]},elementCouldBeScrolled=function(t,e){return t==="v"?elementCouldBeVScrolled(e):elementCouldBeHScrolled(e)},getScrollVariables=function(t,e){return t==="v"?getVScrollVariables(e):getHScrollVariables(e)},getDirectionFactor=function(t,e){return t==="h"&&e==="rtl"?-1:1},handleScroll=function(t,e,r,n,s){var a=getDirectionFactor(t,window.getComputedStyle(e).direction),o=a*n,l=r.target,c=e.contains(l),d=!1,p=o>0,g=0,y=0;do{var x=getScrollVariables(t,l),E=x[0],S=x[1],k=x[2],C=S-k-a*E;(E||C)&&elementCouldBeScrolled(t,l)&&(g+=C,y+=E),l=l.parentNode.host||l.parentNode}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(p&&Math.abs(g)<1||!p&&Math.abs(y)<1)&&(d=!0),d},getTouchXY=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},getDeltaXY=function(t){return[t.deltaX,t.deltaY]},extractRef=function(t){return t&&"current"in t?t.current:t},deltaCompare=function(t,e){return t[0]===e[0]&&t[1]===e[1]},generateStyle=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},idCounter=0,lockStack=[];function RemoveScrollSideCar(t){var e=reactExports.useRef([]),r=reactExports.useRef([0,0]),n=reactExports.useRef(),s=reactExports.useState(idCounter++)[0],a=reactExports.useState(styleSingleton)[0],o=reactExports.useRef(t);reactExports.useEffect(function(){o.current=t},[t]),reactExports.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var S=__spreadArray([t.lockRef.current],(t.shards||[]).map(extractRef),!0).filter(Boolean);return S.forEach(function(k){return k.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),S.forEach(function(k){return k.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=reactExports.useCallback(function(S,k){if("touches"in S&&S.touches.length===2||S.type==="wheel"&&S.ctrlKey)return!o.current.allowPinchZoom;var C=getTouchXY(S),P=r.current,R="deltaX"in S?S.deltaX:P[0]-C[0],j="deltaY"in S?S.deltaY:P[1]-C[1],I,O=S.target,L=Math.abs(R)>Math.abs(j)?"h":"v";if("touches"in S&&L==="h"&&O.type==="range")return!1;var B=locationCouldBeScrolled(L,O);if(!B)return!0;if(B?I=L:(I=L==="v"?"h":"v",B=locationCouldBeScrolled(L,O)),!B)return!1;if(!n.current&&"changedTouches"in S&&(R||j)&&(n.current=I),!I)return!0;var Z=n.current||I;return handleScroll(Z,k,S,Z==="h"?R:j)},[]),c=reactExports.useCallback(function(S){var k=S;if(!(!lockStack.length||lockStack[lockStack.length-1]!==a)){var C="deltaY"in k?getDeltaXY(k):getTouchXY(k),P=e.current.filter(function(I){return I.name===k.type&&(I.target===k.target||k.target===I.shadowParent)&&deltaCompare(I.delta,C)})[0];if(P&&P.should){k.cancelable&&k.preventDefault();return}if(!P){var R=(o.current.shards||[]).map(extractRef).filter(Boolean).filter(function(I){return I.contains(k.target)}),j=R.length>0?l(k,R[0]):!o.current.noIsolation;j&&k.cancelable&&k.preventDefault()}}},[]),d=reactExports.useCallback(function(S,k,C,P){var R={name:S,delta:k,target:C,should:P,shadowParent:getOutermostShadowParent(C)};e.current.push(R),setTimeout(function(){e.current=e.current.filter(function(j){return j!==R})},1)},[]),p=reactExports.useCallback(function(S){r.current=getTouchXY(S),n.current=void 0},[]),g=reactExports.useCallback(function(S){d(S.type,getDeltaXY(S),S.target,l(S,t.lockRef.current))},[]),y=reactExports.useCallback(function(S){d(S.type,getTouchXY(S),S.target,l(S,t.lockRef.current))},[]);reactExports.useEffect(function(){return lockStack.push(a),t.setCallbacks({onScrollCapture:g,onWheelCapture:g,onTouchMoveCapture:y}),document.addEventListener("wheel",c,nonPassive),document.addEventListener("touchmove",c,nonPassive),document.addEventListener("touchstart",p,nonPassive),function(){lockStack=lockStack.filter(function(S){return S!==a}),document.removeEventListener("wheel",c,nonPassive),document.removeEventListener("touchmove",c,nonPassive),document.removeEventListener("touchstart",p,nonPassive)}},[]);var x=t.removeScrollBar,E=t.inert;return reactExports.createElement(reactExports.Fragment,null,E?reactExports.createElement(a,{styles:generateStyle(s)}):null,x?reactExports.createElement(RemoveScrollBar,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function getOutermostShadowParent(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const SideCar=exportSidecar(effectCar,RemoveScrollSideCar);var ReactRemoveScroll=reactExports.forwardRef(function(t,e){return reactExports.createElement(RemoveScroll,__assign({},t,{ref:e,sideCar:SideCar}))});ReactRemoveScroll.classNames=RemoveScroll.classNames;var SELECTION_KEYS=["Enter"," "],FIRST_KEYS=["ArrowDown","PageUp","Home"],LAST_KEYS=["ArrowUp","PageDown","End"],FIRST_LAST_KEYS=[...FIRST_KEYS,...LAST_KEYS],SUB_OPEN_KEYS={ltr:[...SELECTION_KEYS,"ArrowRight"],rtl:[...SELECTION_KEYS,"ArrowLeft"]},SUB_CLOSE_KEYS={ltr:["ArrowLeft"],rtl:["ArrowRight"]},MENU_NAME="Menu",[Collection,useCollection,createCollectionScope]=createCollection(MENU_NAME),[createMenuContext,createMenuScope]=createContextScope(MENU_NAME,[createCollectionScope,createPopperScope,createRovingFocusGroupScope]),usePopperScope$1=createPopperScope(),useRovingFocusGroupScope=createRovingFocusGroupScope(),[MenuProvider,useMenuContext]=createMenuContext(MENU_NAME),[MenuRootProvider,useMenuRootContext]=createMenuContext(MENU_NAME),Menu=t=>{const{__scopeMenu:e,open:r=!1,children:n,dir:s,onOpenChange:a,modal:o=!0}=t,l=usePopperScope$1(e),[c,d]=reactExports.useState(null),p=reactExports.useRef(!1),g=useCallbackRef$1(a),y=useDirection(s);return reactExports.useEffect(()=>{const x=()=>{p.current=!0,document.addEventListener("pointerdown",E,{capture:!0,once:!0}),document.addEventListener("pointermove",E,{capture:!0,once:!0})},E=()=>p.current=!1;return document.addEventListener("keydown",x,{capture:!0}),()=>{document.removeEventListener("keydown",x,{capture:!0}),document.removeEventListener("pointerdown",E,{capture:!0}),document.removeEventListener("pointermove",E,{capture:!0})}},[]),jsxRuntimeExports.jsx(Root2$1,{...l,children:jsxRuntimeExports.jsx(MenuProvider,{scope:e,open:r,onOpenChange:g,content:c,onContentChange:d,children:jsxRuntimeExports.jsx(MenuRootProvider,{scope:e,onClose:reactExports.useCallback(()=>g(!1),[g]),isUsingKeyboardRef:p,dir:y,modal:o,children:n})})})};Menu.displayName=MENU_NAME;var ANCHOR_NAME="MenuAnchor",MenuAnchor=reactExports.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,s=usePopperScope$1(r);return jsxRuntimeExports.jsx(Anchor,{...s,...n,ref:e})});MenuAnchor.displayName=ANCHOR_NAME;var PORTAL_NAME$2="MenuPortal",[PortalProvider$1,usePortalContext$1]=createMenuContext(PORTAL_NAME$2,{forceMount:void 0}),MenuPortal=t=>{const{__scopeMenu:e,forceMount:r,children:n,container:s}=t,a=useMenuContext(PORTAL_NAME$2,e);return jsxRuntimeExports.jsx(PortalProvider$1,{scope:e,forceMount:r,children:jsxRuntimeExports.jsx(Presence,{present:r||a.open,children:jsxRuntimeExports.jsx(Portal$2,{asChild:!0,container:s,children:n})})})};MenuPortal.displayName=PORTAL_NAME$2;var CONTENT_NAME$2="MenuContent",[MenuContentProvider,useMenuContentContext]=createMenuContext(CONTENT_NAME$2),MenuContent=reactExports.forwardRef((t,e)=>{const r=usePortalContext$1(CONTENT_NAME$2,t.__scopeMenu),{forceMount:n=r.forceMount,...s}=t,a=useMenuContext(CONTENT_NAME$2,t.__scopeMenu),o=useMenuRootContext(CONTENT_NAME$2,t.__scopeMenu);return jsxRuntimeExports.jsx(Collection.Provider,{scope:t.__scopeMenu,children:jsxRuntimeExports.jsx(Presence,{present:n||a.open,children:jsxRuntimeExports.jsx(Collection.Slot,{scope:t.__scopeMenu,children:o.modal?jsxRuntimeExports.jsx(MenuRootContentModal,{...s,ref:e}):jsxRuntimeExports.jsx(MenuRootContentNonModal,{...s,ref:e})})})})}),MenuRootContentModal=reactExports.forwardRef((t,e)=>{const r=useMenuContext(CONTENT_NAME$2,t.__scopeMenu),n=reactExports.useRef(null),s=useComposedRefs(e,n);return reactExports.useEffect(()=>{const a=n.current;if(a)return hideOthers(a)},[]),jsxRuntimeExports.jsx(MenuContentImpl,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:composeEventHandlers(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),MenuRootContentNonModal=reactExports.forwardRef((t,e)=>{const r=useMenuContext(CONTENT_NAME$2,t.__scopeMenu);return jsxRuntimeExports.jsx(MenuContentImpl,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),Slot=createSlot("MenuContent.ScrollLock"),MenuContentImpl=reactExports.forwardRef((t,e)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:p,onFocusOutside:g,onInteractOutside:y,onDismiss:x,disableOutsideScroll:E,...S}=t,k=useMenuContext(CONTENT_NAME$2,r),C=useMenuRootContext(CONTENT_NAME$2,r),P=usePopperScope$1(r),R=useRovingFocusGroupScope(r),j=useCollection(r),[I,O]=reactExports.useState(null),L=reactExports.useRef(null),B=useComposedRefs(e,L,k.onContentChange),Z=reactExports.useRef(0),te=reactExports.useRef(""),ie=reactExports.useRef(0),Q=reactExports.useRef(null),fe=reactExports.useRef("right"),se=reactExports.useRef(0),Y=E?ReactRemoveScroll:reactExports.Fragment,G=E?{as:Slot,allowPinchZoom:!0}:void 0,q=$=>{var Re,oe;const V=te.current+$,z=j().filter(Se=>!Se.disabled),ne=document.activeElement,pe=(Re=z.find(Se=>Se.ref.current===ne))==null?void 0:Re.textValue,xe=z.map(Se=>Se.textValue),Ce=getNextMatch(xe,V,pe),ce=(oe=z.find(Se=>Se.textValue===Ce))==null?void 0:oe.ref.current;(function Se(Ne){te.current=Ne,window.clearTimeout(Z.current),Ne!==""&&(Z.current=window.setTimeout(()=>Se(""),1e3))})(V),ce&&setTimeout(()=>ce.focus())};reactExports.useEffect(()=>()=>window.clearTimeout(Z.current),[]),useFocusGuards();const N=reactExports.useCallback($=>{var z,ne;return fe.current===((z=Q.current)==null?void 0:z.side)&&isPointerInGraceArea($,(ne=Q.current)==null?void 0:ne.area)},[]);return jsxRuntimeExports.jsx(MenuContentProvider,{scope:r,searchRef:te,onItemEnter:reactExports.useCallback($=>{N($)&&$.preventDefault()},[N]),onItemLeave:reactExports.useCallback($=>{var V;N($)||((V=L.current)==null||V.focus(),O(null))},[N]),onTriggerLeave:reactExports.useCallback($=>{N($)&&$.preventDefault()},[N]),pointerGraceTimerRef:ie,onPointerGraceIntentChange:reactExports.useCallback($=>{Q.current=$},[]),children:jsxRuntimeExports.jsx(Y,{...G,children:jsxRuntimeExports.jsx(FocusScope,{asChild:!0,trapped:s,onMountAutoFocus:composeEventHandlers(a,$=>{var V;$.preventDefault(),(V=L.current)==null||V.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:p,onFocusOutside:g,onInteractOutside:y,onDismiss:x,children:jsxRuntimeExports.jsx(Root$1,{asChild:!0,...R,dir:C.dir,orientation:"vertical",loop:n,currentTabStopId:I,onCurrentTabStopIdChange:O,onEntryFocus:composeEventHandlers(c,$=>{C.isUsingKeyboardRef.current||$.preventDefault()}),preventScrollOnEntryFocus:!0,children:jsxRuntimeExports.jsx(Content,{role:"menu","aria-orientation":"vertical","data-state":getOpenState(k.open),"data-radix-menu-content":"",dir:C.dir,...P,...S,ref:B,style:{outline:"none",...S.style},onKeyDown:composeEventHandlers(S.onKeyDown,$=>{const z=$.target.closest("[data-radix-menu-content]")===$.currentTarget,ne=$.ctrlKey||$.altKey||$.metaKey,pe=$.key.length===1;z&&($.key==="Tab"&&$.preventDefault(),!ne&&pe&&q($.key));const xe=L.current;if($.target!==xe||!FIRST_LAST_KEYS.includes($.key))return;$.preventDefault();const ce=j().filter(Re=>!Re.disabled).map(Re=>Re.ref.current);LAST_KEYS.includes($.key)&&ce.reverse(),focusFirst(ce)}),onBlur:composeEventHandlers(t.onBlur,$=>{$.currentTarget.contains($.target)||(window.clearTimeout(Z.current),te.current="")}),onPointerMove:composeEventHandlers(t.onPointerMove,whenMouse($=>{const V=$.target,z=se.current!==$.clientX;if($.currentTarget.contains(V)&&z){const ne=$.clientX>se.current?"right":"left";fe.current=ne,se.current=$.clientX}}))})})})})})})});MenuContent.displayName=CONTENT_NAME$2;var GROUP_NAME$1="MenuGroup",MenuGroup=reactExports.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return jsxRuntimeExports.jsx(Primitive.div,{role:"group",...n,ref:e})});MenuGroup.displayName=GROUP_NAME$1;var LABEL_NAME$1="MenuLabel",MenuLabel=reactExports.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return jsxRuntimeExports.jsx(Primitive.div,{...n,ref:e})});MenuLabel.displayName=LABEL_NAME$1;var ITEM_NAME$1="MenuItem",ITEM_SELECT="menu.itemSelect",MenuItem=reactExports.forwardRef((t,e)=>{const{disabled:r=!1,onSelect:n,...s}=t,a=reactExports.useRef(null),o=useMenuRootContext(ITEM_NAME$1,t.__scopeMenu),l=useMenuContentContext(ITEM_NAME$1,t.__scopeMenu),c=useComposedRefs(e,a),d=reactExports.useRef(!1),p=()=>{const g=a.current;if(!r&&g){const y=new CustomEvent(ITEM_SELECT,{bubbles:!0,cancelable:!0});g.addEventListener(ITEM_SELECT,x=>n==null?void 0:n(x),{once:!0}),dispatchDiscreteCustomEvent(g,y),y.defaultPrevented?d.current=!1:o.onClose()}};return jsxRuntimeExports.jsx(MenuItemImpl,{...s,ref:c,disabled:r,onClick:composeEventHandlers(t.onClick,p),onPointerDown:g=>{var y;(y=t.onPointerDown)==null||y.call(t,g),d.current=!0},onPointerUp:composeEventHandlers(t.onPointerUp,g=>{var y;d.current||(y=g.currentTarget)==null||y.click()}),onKeyDown:composeEventHandlers(t.onKeyDown,g=>{const y=l.searchRef.current!=="";r||y&&g.key===" "||SELECTION_KEYS.includes(g.key)&&(g.currentTarget.click(),g.preventDefault())})})});MenuItem.displayName=ITEM_NAME$1;var MenuItemImpl=reactExports.forwardRef((t,e)=>{const{__scopeMenu:r,disabled:n=!1,textValue:s,...a}=t,o=useMenuContentContext(ITEM_NAME$1,r),l=useRovingFocusGroupScope(r),c=reactExports.useRef(null),d=useComposedRefs(e,c),[p,g]=reactExports.useState(!1),[y,x]=reactExports.useState("");return reactExports.useEffect(()=>{const E=c.current;E&&x((E.textContent??"").trim())},[a.children]),jsxRuntimeExports.jsx(Collection.ItemSlot,{scope:r,disabled:n,textValue:s??y,children:jsxRuntimeExports.jsx(Item,{asChild:!0,...l,focusable:!n,children:jsxRuntimeExports.jsx(Primitive.div,{role:"menuitem","data-highlighted":p?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...a,ref:d,onPointerMove:composeEventHandlers(t.onPointerMove,whenMouse(E=>{n?o.onItemLeave(E):(o.onItemEnter(E),E.defaultPrevented||E.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:composeEventHandlers(t.onPointerLeave,whenMouse(E=>o.onItemLeave(E))),onFocus:composeEventHandlers(t.onFocus,()=>g(!0)),onBlur:composeEventHandlers(t.onBlur,()=>g(!1))})})})}),CHECKBOX_ITEM_NAME$1="MenuCheckboxItem",MenuCheckboxItem=reactExports.forwardRef((t,e)=>{const{checked:r=!1,onCheckedChange:n,...s}=t;return jsxRuntimeExports.jsx(ItemIndicatorProvider,{scope:t.__scopeMenu,checked:r,children:jsxRuntimeExports.jsx(MenuItem,{role:"menuitemcheckbox","aria-checked":isIndeterminate(r)?"mixed":r,...s,ref:e,"data-state":getCheckedState(r),onSelect:composeEventHandlers(s.onSelect,()=>n==null?void 0:n(isIndeterminate(r)?!0:!r),{checkForDefaultPrevented:!1})})})});MenuCheckboxItem.displayName=CHECKBOX_ITEM_NAME$1;var RADIO_GROUP_NAME$1="MenuRadioGroup",[RadioGroupProvider,useRadioGroupContext]=createMenuContext(RADIO_GROUP_NAME$1,{value:void 0,onValueChange:()=>{}}),MenuRadioGroup=reactExports.forwardRef((t,e)=>{const{value:r,onValueChange:n,...s}=t,a=useCallbackRef$1(n);return jsxRuntimeExports.jsx(RadioGroupProvider,{scope:t.__scopeMenu,value:r,onValueChange:a,children:jsxRuntimeExports.jsx(MenuGroup,{...s,ref:e})})});MenuRadioGroup.displayName=RADIO_GROUP_NAME$1;var RADIO_ITEM_NAME$1="MenuRadioItem",MenuRadioItem=reactExports.forwardRef((t,e)=>{const{value:r,...n}=t,s=useRadioGroupContext(RADIO_ITEM_NAME$1,t.__scopeMenu),a=r===s.value;return jsxRuntimeExports.jsx(ItemIndicatorProvider,{scope:t.__scopeMenu,checked:a,children:jsxRuntimeExports.jsx(MenuItem,{role:"menuitemradio","aria-checked":a,...n,ref:e,"data-state":getCheckedState(a),onSelect:composeEventHandlers(n.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,r)},{checkForDefaultPrevented:!1})})})});MenuRadioItem.displayName=RADIO_ITEM_NAME$1;var ITEM_INDICATOR_NAME="MenuItemIndicator",[ItemIndicatorProvider,useItemIndicatorContext]=createMenuContext(ITEM_INDICATOR_NAME,{checked:!1}),MenuItemIndicator=reactExports.forwardRef((t,e)=>{const{__scopeMenu:r,forceMount:n,...s}=t,a=useItemIndicatorContext(ITEM_INDICATOR_NAME,r);return jsxRuntimeExports.jsx(Presence,{present:n||isIndeterminate(a.checked)||a.checked===!0,children:jsxRuntimeExports.jsx(Primitive.span,{...s,ref:e,"data-state":getCheckedState(a.checked)})})});MenuItemIndicator.displayName=ITEM_INDICATOR_NAME;var SEPARATOR_NAME$1="MenuSeparator",MenuSeparator=reactExports.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return jsxRuntimeExports.jsx(Primitive.div,{role:"separator","aria-orientation":"horizontal",...n,ref:e})});MenuSeparator.displayName=SEPARATOR_NAME$1;var ARROW_NAME$2="MenuArrow",MenuArrow=reactExports.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,s=usePopperScope$1(r);return jsxRuntimeExports.jsx(Arrow,{...s,...n,ref:e})});MenuArrow.displayName=ARROW_NAME$2;var SUB_NAME="MenuSub",[MenuSubProvider,useMenuSubContext]=createMenuContext(SUB_NAME),SUB_TRIGGER_NAME$1="MenuSubTrigger",MenuSubTrigger=reactExports.forwardRef((t,e)=>{const r=useMenuContext(SUB_TRIGGER_NAME$1,t.__scopeMenu),n=useMenuRootContext(SUB_TRIGGER_NAME$1,t.__scopeMenu),s=useMenuSubContext(SUB_TRIGGER_NAME$1,t.__scopeMenu),a=useMenuContentContext(SUB_TRIGGER_NAME$1,t.__scopeMenu),o=reactExports.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=a,d={__scopeMenu:t.__scopeMenu},p=reactExports.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return reactExports.useEffect(()=>p,[p]),reactExports.useEffect(()=>{const g=l.current;return()=>{window.clearTimeout(g),c(null)}},[l,c]),jsxRuntimeExports.jsx(MenuAnchor,{asChild:!0,...d,children:jsxRuntimeExports.jsx(MenuItemImpl,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":s.contentId,"data-state":getOpenState(r.open),...t,ref:composeRefs(e,s.onTriggerChange),onClick:g=>{var y;(y=t.onClick)==null||y.call(t,g),!(t.disabled||g.defaultPrevented)&&(g.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:composeEventHandlers(t.onPointerMove,whenMouse(g=>{a.onItemEnter(g),!g.defaultPrevented&&!t.disabled&&!r.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),p()},100))})),onPointerLeave:composeEventHandlers(t.onPointerLeave,whenMouse(g=>{var x,E;p();const y=(x=r.content)==null?void 0:x.getBoundingClientRect();if(y){const S=(E=r.content)==null?void 0:E.dataset.side,k=S==="right",C=k?-5:5,P=y[k?"left":"right"],R=y[k?"right":"left"];a.onPointerGraceIntentChange({area:[{x:g.clientX+C,y:g.clientY},{x:P,y:y.top},{x:R,y:y.top},{x:R,y:y.bottom},{x:P,y:y.bottom}],side:S}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(g),g.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:composeEventHandlers(t.onKeyDown,g=>{var x;const y=a.searchRef.current!=="";t.disabled||y&&g.key===" "||SUB_OPEN_KEYS[n.dir].includes(g.key)&&(r.onOpenChange(!0),(x=r.content)==null||x.focus(),g.preventDefault())})})})});MenuSubTrigger.displayName=SUB_TRIGGER_NAME$1;var SUB_CONTENT_NAME$1="MenuSubContent",MenuSubContent=reactExports.forwardRef((t,e)=>{const r=usePortalContext$1(CONTENT_NAME$2,t.__scopeMenu),{forceMount:n=r.forceMount,...s}=t,a=useMenuContext(CONTENT_NAME$2,t.__scopeMenu),o=useMenuRootContext(CONTENT_NAME$2,t.__scopeMenu),l=useMenuSubContext(SUB_CONTENT_NAME$1,t.__scopeMenu),c=reactExports.useRef(null),d=useComposedRefs(e,c);return jsxRuntimeExports.jsx(Collection.Provider,{scope:t.__scopeMenu,children:jsxRuntimeExports.jsx(Presence,{present:n||a.open,children:jsxRuntimeExports.jsx(Collection.Slot,{scope:t.__scopeMenu,children:jsxRuntimeExports.jsx(MenuContentImpl,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:d,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:p=>{var g;o.isUsingKeyboardRef.current&&((g=c.current)==null||g.focus()),p.preventDefault()},onCloseAutoFocus:p=>p.preventDefault(),onFocusOutside:composeEventHandlers(t.onFocusOutside,p=>{p.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:composeEventHandlers(t.onEscapeKeyDown,p=>{o.onClose(),p.preventDefault()}),onKeyDown:composeEventHandlers(t.onKeyDown,p=>{var x;const g=p.currentTarget.contains(p.target),y=SUB_CLOSE_KEYS[o.dir].includes(p.key);g&&y&&(a.onOpenChange(!1),(x=l.trigger)==null||x.focus(),p.preventDefault())})})})})})});MenuSubContent.displayName=SUB_CONTENT_NAME$1;function getOpenState(t){return t?"open":"closed"}function isIndeterminate(t){return t==="indeterminate"}function getCheckedState(t){return isIndeterminate(t)?"indeterminate":t?"checked":"unchecked"}function focusFirst(t){const e=document.activeElement;for(const r of t)if(r===e||(r.focus(),document.activeElement!==e))return}function wrapArray(t,e){return t.map((r,n)=>t[(e+n)%t.length])}function getNextMatch(t,e,r){const s=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,a=r?t.indexOf(r):-1;let o=wrapArray(t,Math.max(a,0));s.length===1&&(o=o.filter(d=>d!==r));const c=o.find(d=>d.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function isPointInPolygon$1(t,e){const{x:r,y:n}=t;let s=!1;for(let a=0,o=e.length-1;a<e.length;o=a++){const l=e[a],c=e[o],d=l.x,p=l.y,g=c.x,y=c.y;p>n!=y>n&&r<(g-d)*(n-p)/(y-p)+d&&(s=!s)}return s}function isPointerInGraceArea(t,e){if(!e)return!1;const r={x:t.clientX,y:t.clientY};return isPointInPolygon$1(r,e)}function whenMouse(t){return e=>e.pointerType==="mouse"?t(e):void 0}var Root3$1=Menu,Anchor2=MenuAnchor,Portal$1=MenuPortal,Content2$2=MenuContent,Group=MenuGroup,Label=MenuLabel,Item2$1=MenuItem,CheckboxItem=MenuCheckboxItem,RadioGroup=MenuRadioGroup,RadioItem=MenuRadioItem,ItemIndicator=MenuItemIndicator,Separator=MenuSeparator,Arrow2$1=MenuArrow,SubTrigger=MenuSubTrigger,SubContent=MenuSubContent,DROPDOWN_MENU_NAME="DropdownMenu",[createDropdownMenuContext,createDropdownMenuScope]=createContextScope(DROPDOWN_MENU_NAME,[createMenuScope]),useMenuScope=createMenuScope(),[DropdownMenuProvider,useDropdownMenuContext]=createDropdownMenuContext(DROPDOWN_MENU_NAME),DropdownMenu=t=>{const{__scopeDropdownMenu:e,children:r,dir:n,open:s,defaultOpen:a,onOpenChange:o,modal:l=!0}=t,c=useMenuScope(e),d=reactExports.useRef(null),[p,g]=useControllableState({prop:s,defaultProp:a??!1,onChange:o,caller:DROPDOWN_MENU_NAME});return jsxRuntimeExports.jsx(DropdownMenuProvider,{scope:e,triggerId:useId(),triggerRef:d,contentId:useId(),open:p,onOpenChange:g,onOpenToggle:reactExports.useCallback(()=>g(y=>!y),[g]),modal:l,children:jsxRuntimeExports.jsx(Root3$1,{...c,open:p,onOpenChange:g,dir:n,modal:l,children:r})})};DropdownMenu.displayName=DROPDOWN_MENU_NAME;var TRIGGER_NAME$1="DropdownMenuTrigger",DropdownMenuTrigger=reactExports.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...s}=t,a=useDropdownMenuContext(TRIGGER_NAME$1,r),o=useMenuScope(r);return jsxRuntimeExports.jsx(Anchor2,{asChild:!0,...o,children:jsxRuntimeExports.jsx(Primitive.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...s,ref:composeRefs(e,a.triggerRef),onPointerDown:composeEventHandlers(t.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:composeEventHandlers(t.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});DropdownMenuTrigger.displayName=TRIGGER_NAME$1;var PORTAL_NAME$1="DropdownMenuPortal",DropdownMenuPortal=t=>{const{__scopeDropdownMenu:e,...r}=t,n=useMenuScope(e);return jsxRuntimeExports.jsx(Portal$1,{...n,...r})};DropdownMenuPortal.displayName=PORTAL_NAME$1;var CONTENT_NAME$1="DropdownMenuContent",DropdownMenuContent=reactExports.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=useDropdownMenuContext(CONTENT_NAME$1,r),a=useMenuScope(r),o=reactExports.useRef(!1);return jsxRuntimeExports.jsx(Content2$2,{id:s.contentId,"aria-labelledby":s.triggerId,...a,...n,ref:e,onCloseAutoFocus:composeEventHandlers(t.onCloseAutoFocus,l=>{var c;o.current||(c=s.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:composeEventHandlers(t.onInteractOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,p=c.button===2||d;(!s.modal||p)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});DropdownMenuContent.displayName=CONTENT_NAME$1;var GROUP_NAME="DropdownMenuGroup",DropdownMenuGroup=reactExports.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=useMenuScope(r);return jsxRuntimeExports.jsx(Group,{...s,...n,ref:e})});DropdownMenuGroup.displayName=GROUP_NAME;var LABEL_NAME="DropdownMenuLabel",DropdownMenuLabel=reactExports.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=useMenuScope(r);return jsxRuntimeExports.jsx(Label,{...s,...n,ref:e})});DropdownMenuLabel.displayName=LABEL_NAME;var ITEM_NAME="DropdownMenuItem",DropdownMenuItem=reactExports.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=useMenuScope(r);return jsxRuntimeExports.jsx(Item2$1,{...s,...n,ref:e})});DropdownMenuItem.displayName=ITEM_NAME;var CHECKBOX_ITEM_NAME="DropdownMenuCheckboxItem",DropdownMenuCheckboxItem=reactExports.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=useMenuScope(r);return jsxRuntimeExports.jsx(CheckboxItem,{...s,...n,ref:e})});DropdownMenuCheckboxItem.displayName=CHECKBOX_ITEM_NAME;var RADIO_GROUP_NAME="DropdownMenuRadioGroup",DropdownMenuRadioGroup=reactExports.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=useMenuScope(r);return jsxRuntimeExports.jsx(RadioGroup,{...s,...n,ref:e})});DropdownMenuRadioGroup.displayName=RADIO_GROUP_NAME;var RADIO_ITEM_NAME="DropdownMenuRadioItem",DropdownMenuRadioItem=reactExports.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=useMenuScope(r);return jsxRuntimeExports.jsx(RadioItem,{...s,...n,ref:e})});DropdownMenuRadioItem.displayName=RADIO_ITEM_NAME;var INDICATOR_NAME="DropdownMenuItemIndicator",DropdownMenuItemIndicator=reactExports.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=useMenuScope(r);return jsxRuntimeExports.jsx(ItemIndicator,{...s,...n,ref:e})});DropdownMenuItemIndicator.displayName=INDICATOR_NAME;var SEPARATOR_NAME="DropdownMenuSeparator",DropdownMenuSeparator=reactExports.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=useMenuScope(r);return jsxRuntimeExports.jsx(Separator,{...s,...n,ref:e})});DropdownMenuSeparator.displayName=SEPARATOR_NAME;var ARROW_NAME$1="DropdownMenuArrow",DropdownMenuArrow=reactExports.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=useMenuScope(r);return jsxRuntimeExports.jsx(Arrow2$1,{...s,...n,ref:e})});DropdownMenuArrow.displayName=ARROW_NAME$1;var SUB_TRIGGER_NAME="DropdownMenuSubTrigger",DropdownMenuSubTrigger=reactExports.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=useMenuScope(r);return jsxRuntimeExports.jsx(SubTrigger,{...s,...n,ref:e})});DropdownMenuSubTrigger.displayName=SUB_TRIGGER_NAME;var SUB_CONTENT_NAME="DropdownMenuSubContent",DropdownMenuSubContent=reactExports.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=useMenuScope(r);return jsxRuntimeExports.jsx(SubContent,{...s,...n,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});DropdownMenuSubContent.displayName=SUB_CONTENT_NAME;var Root2=DropdownMenu,Trigger$1=DropdownMenuTrigger,Portal2=DropdownMenuPortal,Content2$1=DropdownMenuContent,Item2=DropdownMenuItem,VISUALLY_HIDDEN_STYLES=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),NAME="VisuallyHidden",VisuallyHidden=reactExports.forwardRef((t,e)=>jsxRuntimeExports.jsx(Primitive.span,{...t,ref:e,style:{...VISUALLY_HIDDEN_STYLES,...t.style}}));VisuallyHidden.displayName=NAME;var Root=VisuallyHidden,[createTooltipContext,createTooltipScope]=createContextScope("Tooltip",[createPopperScope]),usePopperScope=createPopperScope(),PROVIDER_NAME="TooltipProvider",DEFAULT_DELAY_DURATION=700,TOOLTIP_OPEN="tooltip.open",[TooltipProviderContextProvider,useTooltipProviderContext]=createTooltipContext(PROVIDER_NAME),TooltipProvider=t=>{const{__scopeTooltip:e,delayDuration:r=DEFAULT_DELAY_DURATION,skipDelayDuration:n=300,disableHoverableContent:s=!1,children:a}=t,o=reactExports.useRef(!0),l=reactExports.useRef(!1),c=reactExports.useRef(0);return reactExports.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),jsxRuntimeExports.jsx(TooltipProviderContextProvider,{scope:e,isOpenDelayedRef:o,delayDuration:r,onOpen:reactExports.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:reactExports.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:reactExports.useCallback(d=>{l.current=d},[]),disableHoverableContent:s,children:a})};TooltipProvider.displayName=PROVIDER_NAME;var TOOLTIP_NAME="Tooltip",[TooltipContextProvider,useTooltipContext]=createTooltipContext(TOOLTIP_NAME),Tooltip=t=>{const{__scopeTooltip:e,children:r,open:n,defaultOpen:s,onOpenChange:a,disableHoverableContent:o,delayDuration:l}=t,c=useTooltipProviderContext(TOOLTIP_NAME,t.__scopeTooltip),d=usePopperScope(e),[p,g]=reactExports.useState(null),y=useId(),x=reactExports.useRef(0),E=o??c.disableHoverableContent,S=l??c.delayDuration,k=reactExports.useRef(!1),[C,P]=useControllableState({prop:n,defaultProp:s??!1,onChange:L=>{L?(c.onOpen(),document.dispatchEvent(new CustomEvent(TOOLTIP_OPEN))):c.onClose(),a==null||a(L)},caller:TOOLTIP_NAME}),R=reactExports.useMemo(()=>C?k.current?"delayed-open":"instant-open":"closed",[C]),j=reactExports.useCallback(()=>{window.clearTimeout(x.current),x.current=0,k.current=!1,P(!0)},[P]),I=reactExports.useCallback(()=>{window.clearTimeout(x.current),x.current=0,P(!1)},[P]),O=reactExports.useCallback(()=>{window.clearTimeout(x.current),x.current=window.setTimeout(()=>{k.current=!0,P(!0),x.current=0},S)},[S,P]);return reactExports.useEffect(()=>()=>{x.current&&(window.clearTimeout(x.current),x.current=0)},[]),jsxRuntimeExports.jsx(Root2$1,{...d,children:jsxRuntimeExports.jsx(TooltipContextProvider,{scope:e,contentId:y,open:C,stateAttribute:R,trigger:p,onTriggerChange:g,onTriggerEnter:reactExports.useCallback(()=>{c.isOpenDelayedRef.current?O():j()},[c.isOpenDelayedRef,O,j]),onTriggerLeave:reactExports.useCallback(()=>{E?I():(window.clearTimeout(x.current),x.current=0)},[I,E]),onOpen:j,onClose:I,disableHoverableContent:E,children:r})})};Tooltip.displayName=TOOLTIP_NAME;var TRIGGER_NAME="TooltipTrigger",TooltipTrigger=reactExports.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,s=useTooltipContext(TRIGGER_NAME,r),a=useTooltipProviderContext(TRIGGER_NAME,r),o=usePopperScope(r),l=reactExports.useRef(null),c=useComposedRefs(e,l,s.onTriggerChange),d=reactExports.useRef(!1),p=reactExports.useRef(!1),g=reactExports.useCallback(()=>d.current=!1,[]);return reactExports.useEffect(()=>()=>document.removeEventListener("pointerup",g),[g]),jsxRuntimeExports.jsx(Anchor,{asChild:!0,...o,children:jsxRuntimeExports.jsx(Primitive.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...n,ref:c,onPointerMove:composeEventHandlers(t.onPointerMove,y=>{y.pointerType!=="touch"&&!p.current&&!a.isPointerInTransitRef.current&&(s.onTriggerEnter(),p.current=!0)}),onPointerLeave:composeEventHandlers(t.onPointerLeave,()=>{s.onTriggerLeave(),p.current=!1}),onPointerDown:composeEventHandlers(t.onPointerDown,()=>{s.open&&s.onClose(),d.current=!0,document.addEventListener("pointerup",g,{once:!0})}),onFocus:composeEventHandlers(t.onFocus,()=>{d.current||s.onOpen()}),onBlur:composeEventHandlers(t.onBlur,s.onClose),onClick:composeEventHandlers(t.onClick,s.onClose)})})});TooltipTrigger.displayName=TRIGGER_NAME;var PORTAL_NAME="TooltipPortal",[PortalProvider,usePortalContext]=createTooltipContext(PORTAL_NAME,{forceMount:void 0}),TooltipPortal=t=>{const{__scopeTooltip:e,forceMount:r,children:n,container:s}=t,a=useTooltipContext(PORTAL_NAME,e);return jsxRuntimeExports.jsx(PortalProvider,{scope:e,forceMount:r,children:jsxRuntimeExports.jsx(Presence,{present:r||a.open,children:jsxRuntimeExports.jsx(Portal$2,{asChild:!0,container:s,children:n})})})};TooltipPortal.displayName=PORTAL_NAME;var CONTENT_NAME="TooltipContent",TooltipContent=reactExports.forwardRef((t,e)=>{const r=usePortalContext(CONTENT_NAME,t.__scopeTooltip),{forceMount:n=r.forceMount,side:s="top",...a}=t,o=useTooltipContext(CONTENT_NAME,t.__scopeTooltip);return jsxRuntimeExports.jsx(Presence,{present:n||o.open,children:o.disableHoverableContent?jsxRuntimeExports.jsx(TooltipContentImpl,{side:s,...a,ref:e}):jsxRuntimeExports.jsx(TooltipContentHoverable,{side:s,...a,ref:e})})}),TooltipContentHoverable=reactExports.forwardRef((t,e)=>{const r=useTooltipContext(CONTENT_NAME,t.__scopeTooltip),n=useTooltipProviderContext(CONTENT_NAME,t.__scopeTooltip),s=reactExports.useRef(null),a=useComposedRefs(e,s),[o,l]=reactExports.useState(null),{trigger:c,onClose:d}=r,p=s.current,{onPointerInTransitChange:g}=n,y=reactExports.useCallback(()=>{l(null),g(!1)},[g]),x=reactExports.useCallback((E,S)=>{const k=E.currentTarget,C={x:E.clientX,y:E.clientY},P=getExitSideFromRect(C,k.getBoundingClientRect()),R=getPaddedExitPoints(C,P),j=getPointsFromRect(S.getBoundingClientRect()),I=getHull([...R,...j]);l(I),g(!0)},[g]);return reactExports.useEffect(()=>()=>y(),[y]),reactExports.useEffect(()=>{if(c&&p){const E=k=>x(k,p),S=k=>x(k,c);return c.addEventListener("pointerleave",E),p.addEventListener("pointerleave",S),()=>{c.removeEventListener("pointerleave",E),p.removeEventListener("pointerleave",S)}}},[c,p,x,y]),reactExports.useEffect(()=>{if(o){const E=S=>{const k=S.target,C={x:S.clientX,y:S.clientY},P=(c==null?void 0:c.contains(k))||(p==null?void 0:p.contains(k)),R=!isPointInPolygon(C,o);P?y():R&&(y(),d())};return document.addEventListener("pointermove",E),()=>document.removeEventListener("pointermove",E)}},[c,p,o,d,y]),jsxRuntimeExports.jsx(TooltipContentImpl,{...t,ref:a})}),[VisuallyHiddenContentContextProvider,useVisuallyHiddenContentContext]=createTooltipContext(TOOLTIP_NAME,{isInside:!1}),Slottable=createSlottable("TooltipContent"),TooltipContentImpl=reactExports.forwardRef((t,e)=>{const{__scopeTooltip:r,children:n,"aria-label":s,onEscapeKeyDown:a,onPointerDownOutside:o,...l}=t,c=useTooltipContext(CONTENT_NAME,r),d=usePopperScope(r),{onClose:p}=c;return reactExports.useEffect(()=>(document.addEventListener(TOOLTIP_OPEN,p),()=>document.removeEventListener(TOOLTIP_OPEN,p)),[p]),reactExports.useEffect(()=>{if(c.trigger){const g=y=>{const x=y.target;x!=null&&x.contains(c.trigger)&&p()};return window.addEventListener("scroll",g,{capture:!0}),()=>window.removeEventListener("scroll",g,{capture:!0})}},[c.trigger,p]),jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:g=>g.preventDefault(),onDismiss:p,children:jsxRuntimeExports.jsxs(Content,{"data-state":c.stateAttribute,...d,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[jsxRuntimeExports.jsx(Slottable,{children:n}),jsxRuntimeExports.jsx(VisuallyHiddenContentContextProvider,{scope:r,isInside:!0,children:jsxRuntimeExports.jsx(Root,{id:c.contentId,role:"tooltip",children:s||n})})]})})});TooltipContent.displayName=CONTENT_NAME;var ARROW_NAME="TooltipArrow",TooltipArrow=reactExports.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,s=usePopperScope(r);return useVisuallyHiddenContentContext(ARROW_NAME,r).isInside?null:jsxRuntimeExports.jsx(Arrow,{...s,...n,ref:e})});TooltipArrow.displayName=ARROW_NAME;function getExitSideFromRect(t,e){const r=Math.abs(e.top-t.y),n=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),a=Math.abs(e.left-t.x);switch(Math.min(r,n,s,a)){case a:return"left";case s:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function getPaddedExitPoints(t,e,r=5){const n=[];switch(e){case"top":n.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":n.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":n.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":n.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return n}function getPointsFromRect(t){const{top:e,right:r,bottom:n,left:s}=t;return[{x:s,y:e},{x:r,y:e},{x:r,y:n},{x:s,y:n}]}function isPointInPolygon(t,e){const{x:r,y:n}=t;let s=!1;for(let a=0,o=e.length-1;a<e.length;o=a++){const l=e[a],c=e[o],d=l.x,p=l.y,g=c.x,y=c.y;p>n!=y>n&&r<(g-d)*(n-p)/(y-p)+d&&(s=!s)}return s}function getHull(t){const e=t.slice();return e.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),getHullPresorted(e)}function getHullPresorted(t){if(t.length<=1)return t.slice();const e=[];for(let n=0;n<t.length;n++){const s=t[n];for(;e.length>=2;){const a=e[e.length-1],o=e[e.length-2];if((a.x-o.x)*(s.y-o.y)>=(a.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const r=[];for(let n=t.length-1;n>=0;n--){const s=t[n];for(;r.length>=2;){const a=r[r.length-1],o=r[r.length-2];if((a.x-o.x)*(s.y-o.y)>=(a.y-o.y)*(s.x-o.x))r.pop();else break}r.push(s)}return r.pop(),e.length===1&&r.length===1&&e[0].x===r[0].x&&e[0].y===r[0].y?e:e.concat(r)}var Provider=TooltipProvider,Root3=Tooltip,Trigger=TooltipTrigger,Portal=TooltipPortal,Content2=TooltipContent,Arrow2=TooltipArrow;const getStepColors=(t,e)=>{const r=[{bg:"from-purple-50 to-purple-100",border:"border-purple-100",icon:"text-purple-400",text:"text-purple-600"},{bg:"from-purple-50 to-purple-100",border:"border-purple-200",icon:"text-purple-500",text:"text-purple-700"},{bg:"from-purple-50 to-purple-200",border:"border-purple-300",icon:"text-purple-600",text:"text-purple-800"},{bg:"from-purple-50 to-purple-200",border:"border-purple-400",icon:"text-purple-700",text:"text-purple-900"},{bg:"from-purple-50 to-purple-300",border:"border-purple-500",icon:"text-purple-800",text:"text-purple-900"},{bg:"from-purple-50 to-purple-300",border:"border-purple-600",icon:"text-purple-900",text:"text-purple-900"},{bg:"from-purple-50 to-purple-400",border:"border-purple-700",icon:"text-purple-900",text:"text-purple-900"}],n=Math.min(t,6),s=r[n];return{gradient:s.bg,border:s.border,icon:s.icon,text:s.text}},useElementStack=(t=1)=>{const[e,r]=reactExports.useState({}),n=reactExports.useCallback(a=>{const o=Object.values(e).reduce((l,c)=>Math.max(l,c),t);r(l=>({...l,[a]:o+1}))},[e,t]),s=reactExports.useCallback(a=>e[a]||t,[e,t]);return{bringToFront:n,getIndex:s}},GoalMindMap=({goalId:t,onBack:e})=>{const{goals:r,addGoal:n}=useGoalStore(),s=t==="new"?null:r.find(me=>me.id===t),a=React.useMemo(()=>new MindMapService(t),[t]),[o,l]=reactExports.useState(null),[c,d]=reactExports.useState(!1),[p,g]=reactExports.useState(null),[y,x]=reactExports.useState(""),[E,S]=reactExports.useState(.8),[k,C]=reactExports.useState({x:0,y:0}),[P,R]=reactExports.useState(!1),j=reactExports.useRef(null),I=reactExports.useRef(null),[O,L]=reactExports.useState(!0),[B,Z]=reactExports.useState(!0),[te,ie]=reactExports.useState({}),[Q,fe]=reactExports.useState({}),[se,Y]=reactExports.useState({}),[G,q]=reactExports.useState(null),[N,$]=reactExports.useState({x:200,y:0}),[V,z]=reactExports.useState({x:0,y:0}),[ne,pe]=reactExports.useState({}),xe=useMotionValue(0),Ce=useMotionValue(0);reactExports.useRef(new Map),useMotionValueEvent(xe,"change",me=>{z(je=>({...je,x:me}))}),useMotionValueEvent(Ce,"change",me=>{z(je=>({...je,y:me}))});const ce=reactExports.useCallback(()=>{if(!j.current||!s)return;const me=j.current,je=me.clientWidth,Te=me.clientHeight,Ae=s.steps.reduce((Qt,Kt)=>Qt+160*Kt.tasks.length,0),be=0,Ge=1256-be,qe=je*.8/Ge,it=Te*.8/Ae,at=Math.min(Math.max(1,Math.min(qe,it)),1.5),ht=(je*.1-be*at)/at;let Nt;return Ae*at>Te?Nt=50/at:Nt=(Te-Ae*at)/2/at,{zoom:at,position:{x:ht,y:Nt}}},[s]);reactExports.useEffect(()=>{if(O){const me=setTimeout(()=>{const je=ce();je&&(S(je.zoom),C(je.position)),L(!1),setTimeout(()=>{Z(!1)},500)},500);return()=>clearTimeout(me)}},[O,ce]),reactExports.useEffect(()=>{if(s&&O){const me={},je={};s.steps.forEach((Te,Ae)=>{me[Te.id]={x:0,y:0},Te.tasks.forEach(be=>{je[be.id]={x:0,y:0}})}),ie(me),fe(je)}},[s]);const Re=reactExports.useCallback(me=>{var qe;const je=(qe=j.current)==null?void 0:qe.getBoundingClientRect();if(!je)return;const Te=je.width/2,Ae=je.height/2,be=Math.min(Math.max(.4,E+me),2),We=Te/E-k.x,Ve=Ae/E-k.y,Ge={x:Te/be-We,y:Ae/be-Ve};S(be),C(Ge)},[E,k]);reactExports.useCallback(me=>{var je;if(me.ctrlKey||me.metaKey){me.stopPropagation(),me.preventDefault();const Te=(je=j.current)==null?void 0:je.getBoundingClientRect();if(!Te)return;const Ae=me.clientX-Te.left,be=me.clientY-Te.top,We=me.deltaY>0?-.05:.05,Ve=Math.min(Math.max(.4,E+We),2),Ge=Ae/E-k.x,qe=be/E-k.y,it={x:Ae/Ve-Ge,y:be/Ve-qe};C(it),S(Ve)}},[E,k]);const oe=reactExports.useCallback(me=>{me.touches.length===2&&me.preventDefault()},[]);React.useEffect(()=>{const me=j.current;if(me){me.addEventListener("touchstart",oe,{passive:!1}),me.addEventListener("touchmove",oe,{passive:!1});const je=Te=>{if(Te.ctrlKey||Te.metaKey){Te.preventDefault();const Ae=me.getBoundingClientRect();if(!Ae)return;const be=Te.clientX-Ae.left,We=Te.clientY-Ae.top,Ve=Te.deltaY>0?-.05:.05,Ge=Math.min(Math.max(.4,E+Ve),2),qe=be/E-k.x,it=We/E-k.y,at={x:be/Ge-qe,y:We/Ge-it};C(at),S(Ge)}};return me.addEventListener("wheel",je,{passive:!1}),()=>{me.removeEventListener("touchstart",oe),me.removeEventListener("touchmove",oe),me.removeEventListener("wheel",je)}}},[oe,E,k]);const Se=reactExports.useCallback(me=>{if(!me.target.closest(".floating-assistant, .goal-node, .step-node, .task-card")&&me.button===0){document.body.style.userSelect="none",document.body.style.webkitUserSelect="none",R(!0);const je=me.clientX-k.x,Te=me.clientY-k.y,Ae=We=>{C({x:We.clientX-je,y:We.clientY-Te})},be=()=>{R(!1),document.body.style.userSelect="",document.body.style.webkitUserSelect="",document.removeEventListener("mousemove",Ae),document.removeEventListener("mouseup",be)};document.addEventListener("mousemove",Ae),document.addEventListener("mouseup",be)}},[k]),Ne=()=>({x:-150,y:-150}),{isVisible:Fe,setPosition:et,toggleAssistant:Le}=useAssistant({position:Ne()}),Ee=()=>{Le(),Fe||et(Ne())},Pt=me=>{console.log("Assistant dropped at screen position:",me)},Dt=me=>{const je=document.getElementById(me);if(!je)return;const Te=j.current;if(!Te)return;const Ae=je.getBoundingClientRect(),be=Te.clientWidth,We=Te.clientHeight,Ve=Ae.left+Ae.width/2,Ge=Ae.top+Ae.height/2,qe=be/2,it=We/2,at=qe-Ve,xt=it-Ge,ht={x:k.x+at/E,y:k.y+xt/E};console.log("🎯 計算後的位置",{current:{x:k.x,y:k.y},element:{centerX:Ve,centerY:Ge},container:{centerX:qe,centerY:it},delta:{dx:at,dy:xt},new:ht,zoom:E}),C(ht),setTimeout(()=>{a.clearFocusElement()},500)};reactExports.useEffect(()=>{const me=useGoalStore.subscribe(je=>{const Te=je.goals.find(Ae=>Ae.id===t);if(Te!=null&&Te.focusElement){const Ae=`${Te.focusElement.type}-${Te.focusElement.id}`;requestAnimationFrame(()=>{requestAnimationFrame(()=>{Dt(Ae)})})}});return()=>me()},[t,a,k,E]);const[Et,St]=reactExports.useState(!1),[Ct,ct]=reactExports.useState(""),Qe=me=>{if(!s||!me.trim())return;const je={...s,title:me.trim()};a.updateGoal(je),St(!1)};if(t==="new")return jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-full",children:jsxRuntimeExports.jsx(Lottie,{animationData:loadingAnimation,loop:!0,className:"w-48 h-48"})});if(!s)return jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-full",children:jsxRuntimeExports.jsx("p",{className:"text-gray-500",children:"找不到目標"})});const _t=()=>({x:200,y:s.steps.reduce((je,Te)=>je+140*Te.tasks.length,0)/2}),ft=(me,je)=>{let Ae=0;for(let We=0;We<me;We++)Ae+=160*Math.max(1,je[We].tasks.length);const be=160*Math.max(1,je[me].tasks.length);return Ae+=be/2,{x:700,y:Ae}},Bt=(me,je,Te)=>{const Ae=ft(me,s.steps),be=200,We=120,Ve=40,Ge=We*je+Ve*je,qe=We*Te+Ve*(Te-1),it=Ae.y-qe/2+Ge;return{x:Ae.x+be,y:it}},Wt=(me,je)=>{const Te=je.x-me.x,Ae=je.y-me.y,We=Math.sqrt(Te*Te+Ae*Ae)*.5;return{start:me,end:je,control1:{x:me.x+We,y:me.y},control2:{x:je.x-We,y:je.y}}},Zt=_t();reactExports.useCallback(me=>{const je=(s==null?void 0:s.steps.findIndex(qe=>qe.id===me))??-1;if(je===-1)return;const Te=ft(je,s.steps),Ae=j.current;if(!Ae)return;const be=Ae.clientWidth,We=Ae.clientHeight,Ve=be/2/E-Te.x,Ge=We/2/E-Te.y;C({x:Ve,y:Ge})},[E,ft]);const Ft=reactExports.useCallback(()=>{if(!s)return;const me={title:"新步驟",tasks:[]};console.log("📝 準備新增步驟",{newStep:me});const je=a.addStep(me);if(console.log("✅ 步驟已新增到 store",{addedStep:je}),!je)return;const Te=useGoalStore.getState().goals.find(Ge=>Ge.id===t);if(!Te)return;const Ae=Te.steps.find(Ge=>Ge.id===je.id);if(!Ae)return;const be=Te.steps.length-1,We=ft(be,Te.steps),Ve=j.current;if(Ve){const Ge=Ve.clientWidth,qe=Ve.clientHeight,it=Te.steps.reduce((qt,Qt)=>qt+160*Qt.tasks.length,0),at=qe*.8/it,xt=Math.min(Math.max(1,at),1.5),ht=Ge/2/xt-We.x,Nt=qe*.7/xt-We.y;S(xt),C({x:ht,y:Nt})}console.log("✏️ 設置編輯狀態",{stepId:Ae.id,title:Ae.title}),g(Ae.id),x(Ae.title),d(!1),useGoalStore.getState().dump(t)},[s,a,t]),Mt=reactExports.useCallback((me,je)=>{if(!je.trim())return;const Te=useGoalStore.getState().goals.find(be=>be.id===t);if(!Te)return;const Ae=Te.steps.find(be=>be.id===me);Ae&&(a.updateStep(me,{...Ae,title:je.trim()}),g(null),x(""),useGoalStore.getState().dump(t))},[t,a]),{bringToFront:bt,getIndex:Be}=useElementStack(1),[tt,yt]=reactExports.useState(null),[jr,ir]=reactExports.useState(""),vr=reactExports.useCallback(me=>{if(!s)return;console.log("🎯 新增任務開始",{stepId:me});const je=s.steps.findIndex(it=>it.id===me);if(je===-1)return;const Te={title:"新任務",status:"todo"},Ae=a.addTask(me,Te);if(console.log("✅ Store 新增結果",{addedTask:Ae}),!Ae)return;const be=useGoalStore.getState().goals.find(it=>it.id===t);if(!be)return;const We=be.steps.find(it=>it.id===me);if(!We)return;const Ve=We.tasks.find(it=>it.id===Ae.id);if(console.log("📝 準備設置編輯狀態",{newTaskId:Ve==null?void 0:Ve.id,currentEditingTaskId:tt,currentEditingTaskTitle:jr}),!Ve)return;const Ge=Bt(je,We.tasks.length-1,We.tasks.length),qe=j.current;if(qe){const it=qe.clientWidth,at=qe.clientHeight,xt=it/2/E-Ge.x,ht=at/2/E-Ge.y;C({x:xt,y:ht})}yt(Ve.id),ir(Ve.title),console.log("✏️ 編輯狀態已設置",{taskId:Ve.id,title:Ve.title}),useGoalStore.getState().dump(t)},[s,a,E,t,tt,jr]),Vt=reactExports.useCallback((me,je)=>{if(console.log("💾 開始更新任務標題",{taskId:me,newTitle:je}),!je.trim()){console.log("❌ 更新失敗：標題為空");return}const Te=useGoalStore.getState().goals.find(Ve=>Ve.id===t);if(!Te){console.log("❌ 更新失敗：找不到目標",{goalId:t});return}const Ae=Te.steps.find(Ve=>Ve.tasks.some(Ge=>Ge.id===me));if(console.log("🔍 找到的 step",{stepId:Ae==null?void 0:Ae.id}),!Ae){console.log("❌ 更新失敗：找不到步驟");return}const be=Ae.tasks.find(Ve=>Ve.id===me);if(console.log("🔍 找到的 task",{task:be}),!be){console.log("❌ 更新失敗：找不到任務");return}const We=a.updateTask(Ae.id,me,{...be,title:je.trim()});We?(ir(We.title),yt(null),console.log("✅ 任務更新完成",{updatedTask:We})):console.log("❌ 任務更新失敗"),useGoalStore.getState().dump(t)},[t,a]),Ut=reactExports.useCallback(()=>{if(!s)return;let me=`# ${s.title}

`;s.steps.forEach((be,We)=>{me+=`## ${We+1}. ${be.title}

`,be.tasks.forEach((Ve,Ge)=>{const qe=Ve.status==="done"?"✅":Ve.status==="in_progress"?"🔄":"⭕";me+=`${qe} ${Ve.title}
`,Ve.completedAt&&(me+=`   - 完成於: ${new Date(Ve.completedAt).toLocaleDateString()}
`)}),me+=`
`});const je=new Blob([me],{type:"text/markdown"}),Te=URL.createObjectURL(je),Ae=document.createElement("a");Ae.href=Te,Ae.download=`${s.title}-規劃.md`,document.body.appendChild(Ae),Ae.click(),document.body.removeChild(Ae),URL.revokeObjectURL(Te)},[s]),Ir=reactExports.useCallback(()=>{if(!s)return;const me=JSON.stringify(s,null,2),je=new Blob([me],{type:"application/json"}),Te=URL.createObjectURL(je),Ae=document.createElement("a");Ae.href=Te,Ae.download=`${s.title}-規劃.json`,document.body.appendChild(Ae),Ae.click(),document.body.removeChild(Ae),URL.revokeObjectURL(Te)},[s]),kr=useNavigate();return jsxRuntimeExports.jsxs("div",{ref:j,className:"w-full h-full relative bg-gray-50 overflow-hidden",onMouseDown:Se,style:{cursor:P?"grabbing":"grab"},children:[jsxRuntimeExports.jsx(AnimatePresence,{children:B&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"absolute inset-0 z-50 bg-white flex flex-col items-center justify-center",children:[jsxRuntimeExports.jsx("div",{className:"w-48 h-48 relative",children:jsxRuntimeExports.jsx(Lottie,{animationData:loadingAnimation,loop:!0,className:"w-full h-full"})}),jsxRuntimeExports.jsx("div",{className:"mt-4 text-lg text-purple-600 font-medium",children:"正在載入心智圖..."})]})}),jsxRuntimeExports.jsxs("div",{className:"absolute top-4 left-4 z-10 flex items-center space-x-4",children:[jsxRuntimeExports.jsxs(motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"h-4 w-4 mr-2"}),"返回"]}),isDefaultGoal(t)&&jsxRuntimeExports.jsxs(motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{window.confirm("確定要回到預設值嗎？這會清除所有已儲存的修改。")&&(localStorage.removeItem("self_learning_goals"),window.location.reload())},className:"inline-flex items-center px-4 py-2 border border-orange-300 rounded-md shadow-sm text-sm font-medium text-orange-700 bg-white hover:bg-orange-50",children:[jsxRuntimeExports.jsx(RotateCcw,{className:"h-4 w-4 mr-2"}),"回到預設值"]}),jsxRuntimeExports.jsx(Provider,{children:jsxRuntimeExports.jsxs(Root3,{children:[jsxRuntimeExports.jsx(Trigger,{asChild:!0,children:jsxRuntimeExports.jsxs(motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{const me={id:"",title:"新目標",status:"active",steps:[]},je=useGoalStore.getState();je.addGoal(me);const Te=je.goals[je.goals.length-1];kr(`/student/planning/goal/${Te.id}`)},className:"inline-flex items-center px-4 py-2 border border-indigo-300 rounded-md shadow-sm text-sm font-medium text-indigo-700 bg-white hover:bg-indigo-50",children:[jsxRuntimeExports.jsx(FilePlus,{className:"h-4 w-4 mr-2"}),"建立新頁面"]})}),jsxRuntimeExports.jsx(Portal,{children:jsxRuntimeExports.jsxs(Content2,{className:"bg-gray-800 text-white px-3 py-2 rounded-md text-sm shadow-lg",sideOffset:5,children:["建立一個空白的學習目標",jsxRuntimeExports.jsx(Arrow2,{className:"fill-gray-800"})]})})]})}),jsxRuntimeExports.jsx("h1",{className:"text-xl font-bold text-gray-900",children:s.title}),jsxRuntimeExports.jsxs(Root2,{children:[jsxRuntimeExports.jsx(Trigger$1,{asChild:!0,children:jsxRuntimeExports.jsxs(motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[jsxRuntimeExports.jsx(Share2,{className:"h-4 w-4 mr-1"}),"匯出"]})}),jsxRuntimeExports.jsx(Portal2,{children:jsxRuntimeExports.jsxs(Content2$1,{className:"min-w-[180px] bg-white rounded-lg p-1 shadow-lg border border-gray-200",sideOffset:5,children:[jsxRuntimeExports.jsx(Item2,{className:"flex items-center px-2 py-2 text-sm text-gray-700 hover:bg-purple-50 hover:text-purple-700 rounded-md cursor-pointer outline-none",onSelect:Ut,children:"匯出成 Markdown"}),jsxRuntimeExports.jsx(Item2,{className:"flex items-center px-2 py-2 text-sm text-gray-700 hover:bg-purple-50 hover:text-purple-700 rounded-md cursor-pointer outline-none",onSelect:Ir,children:"匯出成 JSON"})]})})]})]}),jsxRuntimeExports.jsxs("div",{ref:I,className:"absolute top-0 left-0",style:{transform:`scale(${E}) translate(${k.x}px, ${k.y}px)`,transformOrigin:"0 0"},children:[jsxRuntimeExports.jsxs("svg",{width:"20000",height:"20000",className:"absolute top-0 left-0 pointer-events-none",style:{width:"200%",height:"200%",transform:"translate(-5000px, -5000px)",minWidth:"20000px",minHeight:"20000px"},children:[s.steps.map((me,je)=>{const Te=ft(je,s.steps),Ae=te[me.id]||{x:0,y:0},be=Wt({x:Zt.x+96+V.x+5e3,y:Zt.y+V.y+5e3},{x:Te.x-64+Ae.x+5e3,y:Te.y+Ae.y+5e3});return jsxRuntimeExports.jsx("path",{d:`M ${be.start.x} ${be.start.y} 
                    C ${be.control1.x} ${be.control1.y},
                      ${be.control2.x} ${be.control2.y},
                      ${be.end.x} ${be.end.y}`,stroke:"#818cf8",strokeWidth:"3",fill:"none"},`step-line-${me.id}`)}),s.steps.map((me,je)=>{const Te=ft(je,s.steps),Ae=te[me.id]||{x:0,y:0};return me.tasks.map((be,We)=>{const Ve=Bt(je,We,me.tasks.length),Ge=Q[be.id]||{x:0,y:0},qe=Wt({x:Te.x+64+Ae.x+5e3,y:Te.y+Ae.y+5e3},{x:Ve.x+Ge.x+5e3,y:Ve.y+60+Ge.y+5e3});return jsxRuntimeExports.jsx("path",{d:`M ${qe.start.x} ${qe.start.y} 
                      C ${qe.control1.x} ${qe.control1.y},
                        ${qe.control2.x} ${qe.control2.y},
                        ${qe.end.x} ${qe.end.y}`,stroke:be.status==="done"?"#34d399":be.status==="in_progress"?"#f97316":"#0ea5e9",strokeWidth:"2.5",fill:"none"},`task-line-${me.id}-${be.id||We}`)})})]}),jsxRuntimeExports.jsx(motion.div,{id:`goal-${s.id}`,className:"absolute goal-node",style:{left:Zt.x-96,top:Zt.y-96,transform:"none",x:xe,y:Ce,zIndex:Be("goal")},initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:20},drag:!0,dragMomentum:!1,dragElastic:0,onDragStart:me=>{me.stopPropagation(),bt("goal")},onDrag:me=>{me.stopPropagation()},onDragEnd:me=>{me.stopPropagation(),console.log("Final position:",{x:xe.get(),y:Ce.get()})},whileDrag:{scale:1.05,zIndex:50},whileHover:{scale:1.02},onClick:()=>{d(!c)},onDoubleClick:me=>{me.stopPropagation(),St(!0),ct(s.title)},children:jsxRuntimeExports.jsxs("div",{className:"group relative w-48 h-48 rounded-full bg-gradient-to-br from-purple-100 to-pink-100 border-4 border-purple-200 flex items-center justify-center p-6 shadow-lg cursor-pointer transition-all duration-200 hover:scale-105 hover:border-purple-400 hover:shadow-[0_0_0_4px_rgba(99,102,241,0.2)]",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx(Target,{className:"w-12 h-12 text-purple-500 mx-auto mb-2"}),Et?jsxRuntimeExports.jsx("input",{type:"text",value:Ct,onChange:me=>ct(me.target.value),onBlur:()=>Qe(Ct),onKeyDown:me=>{me.key==="Enter"?Qe(Ct):me.key==="Escape"&&(St(!1),ct(s.title))},className:"w-full text-center bg-transparent border-b border-purple-300 focus:outline-none focus:border-purple-500 px-1 text-lg font-bold text-purple-700",autoFocus:!0,onClick:me=>me.stopPropagation()}):jsxRuntimeExports.jsx("h2",{className:"text-lg font-bold text-purple-700",children:s.title||"新目標"})]}),jsxRuntimeExports.jsx("div",{className:"absolute opacity-0 group-hover:opacity-100 transition-opacity duration-200",style:{right:"0px",top:"75%",transform:"translate(50%, -50%)"},children:jsxRuntimeExports.jsx(motion.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:me=>{me.stopPropagation(),Ft()},className:"w-9 h-9 bg-indigo-500 hover:bg-indigo-600 rounded-full flex items-center justify-center shadow-lg hover:shadow-xl transition-all duration-200",children:jsxRuntimeExports.jsx(Plus,{className:"w-5 h-5 text-white"})})})]})}),jsxRuntimeExports.jsx(AnimatePresence,{children:s.steps.map((me,je)=>{const Te=ft(je,s.steps),Ae=o===me.id;return jsxRuntimeExports.jsxs(React.Fragment,{children:[jsxRuntimeExports.jsx(motion.div,{className:"absolute",style:{left:Te.x-64,top:Te.y-64,transform:"none"},initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:260,damping:20},children:jsxRuntimeExports.jsxs(motion.button,{id:`step-${me.id}`,drag:p!==me.id,dragMomentum:!1,onDragStart:(be,We)=>{p!==me.id&&(be.stopPropagation(),q(me.id),bt(me.id))},onDrag:(be,We)=>{if(p===me.id)return;const Ve=We.delta.x,Ge=We.delta.y;ie(qe=>{const it=qe[me.id]||{x:0,y:0};return{...qe,[me.id]:{x:it.x+Ve,y:it.y+Ge}}})},onDragEnd:()=>{p!==me.id&&q(null)},style:{position:"relative",zIndex:Be(me.id)},onClick:()=>{l(Ae?null:me.id)},onDoubleClick:be=>{be.stopPropagation(),g(me.id),x(me.title)},className:`step-node group w-32 h-32 rounded-full border-4 bg-gradient-to-br ${getStepColors(je,s.steps.length).gradient} border-${getStepColors(je,s.steps.length).border} flex items-center justify-center p-4 shadow-lg transition-colors duration-200 hover:scale-105 hover:border-indigo-400 shadow-[0_0_0_4px_rgba(99,102,241,0.2)] transition-all duration-200 ${p===me.id?"cursor-text":"cursor-move"}`,whileHover:{scale:p===me.id?1:1.1},whileDrag:{scale:1.05,zIndex:50},children:[jsxRuntimeExports.jsx("div",{className:"text-center",children:p===me.id?jsxRuntimeExports.jsx("input",{type:"text",value:y,onChange:be=>x(be.target.value),onBlur:()=>Mt(me.id,y),onKeyDown:be=>{be.key==="Enter"?Mt(me.id,y):be.key==="Escape"&&(g(null),x(""))},className:"w-full text-center bg-transparent border-b border-purple-300 focus:outline-none focus:border-purple-500 px-1",autoFocus:!0,onClick:be=>be.stopPropagation()}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ListTodo,{className:`w-8 h-8 mx-auto mb-1 ${getStepColors(je,s.steps.length).icon}`}),jsxRuntimeExports.jsx("h3",{className:`text-sm font-bold ${getStepColors(je,s.steps.length).text}`,children:me.title})]})}),jsxRuntimeExports.jsx("div",{className:"absolute opacity-0 group-hover:opacity-100 transition-opacity duration-200",style:{right:"-10px",bottom:"0px",transform:"translate(50%, 50%)",zIndex:Be(me.id)+1},children:jsxRuntimeExports.jsx(motion.div,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:be=>{be.stopPropagation(),vr(me.id)},className:"w-8 h-8 bg-indigo-500 hover:bg-indigo-600 rounded-full flex items-center justify-center shadow-lg hover:shadow-xl transition-all duration-200 cursor-pointer",children:jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4 text-white"})})})]})}),jsxRuntimeExports.jsx(AnimatePresence,{children:me.tasks.map((be,We)=>{const Ve=Bt(je,We,me.tasks.length);return jsxRuntimeExports.jsx(motion.div,{className:"absolute",style:{left:Ve.x,top:Ve.y,transform:"none"},initial:{scale:0},animate:{scale:1},exit:{scale:0},transition:{type:"spring",stiffness:260,damping:20},children:jsxRuntimeExports.jsxs(motion.div,{id:`task-${be.id}`,drag:!0,dragMomentum:!1,whileDrag:{scale:1.02},onDragStart:Ge=>{Ge.stopPropagation(),bt(be.id)},onDrag:(Ge,qe)=>{Ge.stopPropagation();const it=qe.delta.x,at=qe.delta.y;fe(xt=>{const ht=xt[be.id]||{x:0,y:0};return{...xt,[be.id]:{x:ht.x+it,y:ht.y+at}}})},style:{position:"relative",zIndex:Be(be.id)},onClick:Ge=>{Ge.stopPropagation()},onDoubleClick:Ge=>{Ge.stopPropagation(),yt(be.id),ir(be.title)},className:`task-card w-64 p-4 rounded-2xl shadow-lg border-2 cursor-move ${be.status==="done"?"bg-gradient-to-br from-green-50 to-emerald-50 border-green-200":be.status==="in_progress"?"bg-gradient-to-br from-orange-50 to-amber-50 border-orange-200":"bg-gradient-to-br from-pink-50 to-rose-50 border-pink-200"}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start",children:[jsxRuntimeExports.jsxs("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${be.status==="done"?"border-green-500 bg-green-100":be.status==="in_progress"?"border-orange-500 bg-orange-100":"border-pink-300 bg-white"}`,children:[be.status==="done"&&jsxRuntimeExports.jsx(CircleCheck,{className:"w-4 h-4 text-green-500"}),be.status==="in_progress"&&jsxRuntimeExports.jsx(Clock,{className:"w-4 h-4 text-orange-500"})]}),jsxRuntimeExports.jsx("div",{className:`flex items-center px-3 py-1 rounded-full text-sm font-medium ${be.status==="done"?"bg-green-200 text-green-800":be.status==="in_progress"?"bg-orange-200 text-orange-800":"bg-pink-200 text-pink-800"}`,children:be.status==="done"?"已完成":be.status==="in_progress"?"進行中":"未開始"})]}),tt===be.id?jsxRuntimeExports.jsx("input",{type:"text",value:jr,onChange:Ge=>ir(Ge.target.value),onBlur:()=>Vt(be.id,jr),onKeyDown:Ge=>{Ge.key==="Enter"?Vt(be.id,jr):Ge.key==="Escape"&&(yt(null),ir(""))},className:"mt-3 w-full bg-transparent border-b border-gray-300 focus:outline-none focus:border-indigo-500 px-1 text-lg font-semibold text-gray-900",autoFocus:!0,onClick:Ge=>Ge.stopPropagation()}):jsxRuntimeExports.jsx("h3",{className:"mt-3 text-lg font-semibold text-gray-900",children:be.title}),jsxRuntimeExports.jsx("div",{className:"h-[20px] mt-2",children:be.completedAt&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500",children:["完成於 ",new Date(be.completedAt).toLocaleDateString()]})})]})},`task-${me.id}-${be.id}`)})})]},`step-group-${me.id}`)})})]}),jsxRuntimeExports.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:jsxRuntimeExports.jsx(FloatingAssistant,{enabled:Fe,onToggle:Ee,dragConstraints:j,initialPosition:Ne(),onPositionChange:et,onDragEnd:Pt,hideCloseButton:!0,className:"floating-assistant pointer-events-auto",goalId:t,onFocus:me=>{document.getElementById(me)&&Dt(me)}})}),jsxRuntimeExports.jsxs("div",{className:"fixed bottom-6 left-1/2 z-40 -translate-x-1/2 flex items-center gap-2 px-4 py-2 rounded-2xl shadow-xl bg-white/80 backdrop-blur border border-gray-200",style:{minWidth:"fit-content"},children:[jsxRuntimeExports.jsx("button",{onClick:()=>{const me=ce();me&&(S(me.zoom),C(me.position))},className:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-gray-100 transition-colors",title:"置中",children:jsxRuntimeExports.jsx(Target,{className:"w-5 h-5 text-gray-600"})}),jsxRuntimeExports.jsx("button",{onClick:()=>Re(.1),className:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-gray-100 transition-colors",title:"放大",children:jsxRuntimeExports.jsx(ZoomIn,{className:"w-5 h-5 text-gray-600"})}),jsxRuntimeExports.jsxs("div",{className:"w-16 text-center font-mono text-sm text-gray-600",children:[Math.round(E*100),"%"]}),jsxRuntimeExports.jsx("button",{onClick:()=>Re(-.1),className:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-gray-100 transition-colors",title:"縮小",children:jsxRuntimeExports.jsx(ZoomOut,{className:"w-5 h-5 text-gray-600"})}),jsxRuntimeExports.jsx("div",{className:"w-px h-6 bg-gray-200"}),jsxRuntimeExports.jsx("div",{className:"relative",children:jsxRuntimeExports.jsx("button",{onClick:Ee,className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${Fe?"bg-indigo-100 text-indigo-600 hover:bg-indigo-200":"hover:bg-gray-100 text-gray-600"}`,title:Fe?"隱藏助理":"顯示助理",children:jsxRuntimeExports.jsx(Sparkles,{className:"w-5 h-5"})})})]})]})},GoalMindMapPage=()=>{const{goalId:t}=useParams(),e=useNavigate();return t?jsxRuntimeExports.jsx("div",{className:"w-full h-[calc(100vh-4rem)]",children:jsxRuntimeExports.jsx(GoalMindMap,{goalId:t,onBack:()=>e("/student/planning")})}):jsxRuntimeExports.jsx("div",{children:"找不到目標 ID"})};function LottiePreview(){return jsxRuntimeExports.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50",children:[jsxRuntimeExports.jsx("div",{className:"w-[400px] h-[400px] bg-white rounded-lg shadow-lg p-8",children:jsxRuntimeExports.jsx(Lottie,{animationData:loadingAnimation,loop:!0,className:"w-full h-full"})}),jsxRuntimeExports.jsx("div",{className:"mt-4 text-lg text-purple-600",children:"預覽 Lottie 動畫"})]})}function App(){return jsxRuntimeExports.jsx(CurriculumProvider,{children:jsxRuntimeExports.jsx(UserProvider,{children:jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/login",element:jsxRuntimeExports.jsx(Login,{})}),jsxRuntimeExports.jsx(Route,{path:"/preview/lottie",element:jsxRuntimeExports.jsx(LottiePreview,{})}),jsxRuntimeExports.jsx(Route,{path:"/student",element:jsxRuntimeExports.jsx(StudentDashboard,{})}),jsxRuntimeExports.jsx(Route,{path:"/student/schedule",element:jsxRuntimeExports.jsx(StudentSchedule,{})}),jsxRuntimeExports.jsx(Route,{path:"/student/tasks",element:jsxRuntimeExports.jsx(StudentTasks,{})}),jsxRuntimeExports.jsx(Route,{path:"/student/planning",element:jsxRuntimeExports.jsx(StudentPlanning,{})}),jsxRuntimeExports.jsx(Route,{path:"/student/planning/goal/:goalId",element:jsxRuntimeExports.jsx(GoalMindMapPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/student/journal",element:jsxRuntimeExports.jsx(StudentJournal,{})}),jsxRuntimeExports.jsx(Route,{path:"/student/goals",element:jsxRuntimeExports.jsx(StudentGoals,{})}),jsxRuntimeExports.jsx(Route,{path:"/student/subject/:subjectId",element:jsxRuntimeExports.jsx(SubjectPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/mentor",element:jsxRuntimeExports.jsx(MentorDashboard,{})}),jsxRuntimeExports.jsx(Route,{path:"/mentor/tasks",element:jsxRuntimeExports.jsx(MentorTaskManager,{})}),jsxRuntimeExports.jsx(Route,{path:"/mentor/task-planner",element:jsxRuntimeExports.jsx(MentorTaskPlanner,{})}),jsxRuntimeExports.jsx(Route,{path:"/mentor/subject/:subjectId",element:jsxRuntimeExports.jsx(SubjectPage,{isMentor:!0})}),jsxRuntimeExports.jsx(Route,{path:"/mentor/curriculum",element:jsxRuntimeExports.jsx(MentorCurriculum,{})}),jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(Navigate,{to:"/login",replace:!0})}),jsxRuntimeExports.jsx(Route,{path:"*",element:jsxRuntimeExports.jsx(NotFound,{})})]})})})})}clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));export{BaseStringPromptTemplate as B,PromptTemplate as P,checkValidTemplate as c,renderTemplate as r};
