diff --git a/apps/client/src/pages/student/TaskWallPage.tsx b/apps/client/src/pages/student/TaskWallPage.tsx
index c2b741e..f664938 100644
--- a/apps/client/src/pages/student/TaskWallPage.tsx
+++ b/apps/client/src/pages/student/TaskWallPage.tsx
@@ -36,6 +36,8 @@ import { DailyJournalDialog } from './components/DailyJournalDialog';
 import { TaskRecordDialog } from './components/TaskRecordDialog';
 import { TopicReviewPage } from '../../components/topic-review/TopicReviewPage';
 import { TopicTemplateBrowser } from '../../components/template/TopicTemplateBrowser';
+import { TopicGrid, TopicCard, CreateTopicCard, TopicCardData } from './components/TopicCards';
+import { StarCounter, CompletedTasksDialog, CutePromptDialog } from './components/SharedDialogs';
 import type { Topic, Goal, Task, TaskStatus } from '../../types/goal';
 import { SPECIAL_TASK_FLAGS, hasWeeklyQuickChallenge } from '../../types/goal';
 import { LoadingDots } from '../../components/shared/LoadingDots';
@@ -85,1440 +87,22 @@ interface GoalWithContext extends Goal {
   subjectStyle: any;
 }
 
-/**
- * ä¸»é¡Œå¡ç‰‡æ•¸æ“šä»‹é¢
- */
-interface TopicCardData {
-  topic: Topic;
-  subjectStyle: any;
-  totalGoals: number;
-  completedGoals: number;
-  totalTasks: number;
-  completedTasks: number;
-  inProgressTasks: number;
-  needHelpCount: number;
-  collaborators: any[];
-  overallProgress: number;
-}
-
-/**
- * æ˜Ÿæ˜Ÿè¨ˆæ•¸å™¨çµ„ä»¶ - å½©è‰²æ˜Ÿæ˜Ÿè¨­è¨ˆ
- */
-interface StarCounterProps {
-  count: number;
-  isAnimating?: boolean;
-  onClick?: () => void;
-}
-
-const StarCounter: React.FC<StarCounterProps> = ({ count, isAnimating = false, onClick }) => {
-  // åç¨®å½©è‰²æ˜Ÿæ˜Ÿé¡è‰²
-  const starColors = [
-    '#FF6B6B', // ç´…
-    '#4ECDC4', // é’
-    '#45B7D1', // è—
-    '#96CEB4', // ç¶ 
-    '#FECA57', // é»ƒ
-    '#FF9FF3', // ç²‰
-    '#A8E6CF', // æ·ºç¶ 
-    '#FFB74D', // æ©™
-    '#CE93D8', // ç´«
-    '#81C784'  // æ·±ç¶ 
-  ];
-
-  // è¨ˆç®—å½©è™¹æ˜Ÿæ˜Ÿæ•¸é‡ (æ¯10å€‹ä¸€é¡†)
-  const rainbowStars = Math.floor(count / 10);
-  // è¨ˆç®—å‰©é¤˜å½©è‰²æ˜Ÿæ˜Ÿæ•¸é‡
-  const coloredStars = count % 10;
-
-  const renderStars = () => {
-    const stars: JSX.Element[] = [];
-    
-    // å½©è™¹/é‡‘è‰²æ˜Ÿæ˜Ÿ (å¤§)
-    for (let i = 0; i < rainbowStars; i++) {
-      stars.push(
-        <motion.div
-          key={`rainbow-${i}`}
-          animate={isAnimating ? { 
-            rotate: [0, 360],
-            scale: [1, 1.5, 1]
-          } : {}}
-          transition={{ duration: 0.8, ease: "easeInOut", delay: i * 0.1 }}
-        >
-          <Star 
-            className="w-7 h-7 fill-yellow-400 text-yellow-400 drop-shadow-lg" 
-            style={{
-              filter: 'drop-shadow(0 0 8px rgba(255, 215, 0, 0.8))'
-            }}
-          />
-        </motion.div>
-      );
-    }
-    
-    // å½©è‰²æ˜Ÿæ˜Ÿ (å°) - ä¸Šäº”ä¸‹å››æ’åˆ—ï¼Œé¡¯ç¤ºåœ¨å¤§æ˜Ÿæ˜Ÿå³é‚Š
-    const topRowCount = Math.min(5, coloredStars);
-    const bottomRowCount = coloredStars - topRowCount;
-    
-    return (
-      <div className="flex items-center gap-2">
-        {/* å½©è™¹æ˜Ÿæ˜Ÿå€åŸŸ */}
-        {rainbowStars > 0 && (
-          <div className="flex gap-1">
-            {stars}
-          </div>
-        )}
-        
-        {/* å½©è‰²æ˜Ÿæ˜Ÿå€åŸŸ - å³é‚Š */}
-        {coloredStars > 0 && (
-          <div className="flex flex-col gap-1">
-            {/* ä¸Šæ’å½©è‰²æ˜Ÿæ˜Ÿ */}
-            {topRowCount > 0 && (
-              <div className="flex gap-1 justify-center">
-                {Array.from({ length: topRowCount }).map((_, i) => (
-                  <motion.div
-                    key={`colored-top-${i}`}
-                    animate={isAnimating ? { 
-                      rotate: [0, 360],
-                      scale: [1, 1.3, 1]
-                    } : {}}
-                    transition={{ duration: 0.6, ease: "easeInOut", delay: (rainbowStars * 0.1) + (i * 0.1) }}
-                  >
-                    <Star 
-                      className="w-5 h-5 drop-shadow-sm" 
-                      style={{
-                        color: starColors[i],
-                        fill: starColors[i],
-                        filter: `drop-shadow(0 0 4px ${starColors[i]}80)`
-                      }}
-                    />
-                  </motion.div>
-                ))}
-              </div>
-            )}
-            
-            {/* ä¸‹æ’å½©è‰²æ˜Ÿæ˜Ÿ */}
-            {bottomRowCount > 0 && (
-              <div className="flex gap-1 justify-center">
-                {Array.from({ length: bottomRowCount }).map((_, i) => (
-                  <motion.div
-                    key={`colored-bottom-${i}`}
-                    animate={isAnimating ? { 
-                      rotate: [0, 360],
-                      scale: [1, 1.3, 1]
-                    } : {}}
-                    transition={{ duration: 0.6, ease: "easeInOut", delay: (rainbowStars * 0.1) + ((i + topRowCount) * 0.1) }}
-                  >
-                    <Star 
-                      className="w-5 h-5 drop-shadow-sm" 
-                      style={{
-                        color: starColors[i + topRowCount],
-                        fill: starColors[i + topRowCount],
-                        filter: `drop-shadow(0 0 4px ${starColors[i + topRowCount]}80)`
-                      }}
-                    />
-                  </motion.div>
-                ))}
-              </div>
-            )}
-          </div>
-        )}
-      </div>
-    );
-  };
-
-  return (
-    <motion.button 
-      className="flex items-center gap-2 p-3 rounded-xl hover:bg-amber-50 transition-all duration-300 cursor-pointer group"
-      animate={isAnimating ? { scale: [1, 1.15, 1] } : {}}
-      transition={{ duration: 0.6, ease: "easeInOut" }}
-      onClick={onClick}
-      title="é»æ“ŠæŸ¥çœ‹å®Œæˆæ”¶è—"
-    >
-      <div className="flex items-center">
-        {renderStars()}
-      </div>
-      <motion.span 
-        className="text-xl font-bold text-amber-700 ml-2"
-        key={count} // é‡æ–°æ¸²æŸ“å‹•ç•«
-        initial={isAnimating ? { scale: 2, color: "#F59E0B" } : false}
-        animate={{ scale: 1, color: "#B45309" }}
-        transition={{ duration: 0.5, type: "spring", bounce: 0.5 }}
-      >
-        {count}
-      </motion.span>
-      <motion.div
-        className="text-amber-600 opacity-0 group-hover:opacity-100 transition-opacity"
-        animate={isAnimating ? { rotate: [0, 10, -10, 0] } : {}}
-      >
-        âœ¨
-      </motion.div>
-    </motion.button>
-  );
-};
-
-/**
- * å®Œæˆä»»å‹™ Dialog çµ„ä»¶
- */
-interface CompletedTasksDialogProps {
-  isOpen: boolean;
-  onClose: () => void;
-  completedTasks: TaskWithContext[];
-  onRestoreTask: (taskId: string, goalId: string, topicId: string) => Promise<void>;
-  onClearStack: () => void;
-}
-
-const CompletedTasksDialog: React.FC<CompletedTasksDialogProps> = ({
-  isOpen,
-  onClose,
-  completedTasks,
-  onRestoreTask,
-  onClearStack
-}) => {
-  if (!isOpen) return null;
-
-  return (
-    <AnimatePresence>
-      <motion.div
-        className="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4"
-        initial={{ opacity: 0 }}
-        animate={{ opacity: 1 }}
-        exit={{ opacity: 0 }}
-        onClick={onClose}
-      >
-        <motion.div
-          className="bg-white rounded-2xl shadow-2xl border border-amber-200 p-6 w-full max-w-2xl max-h-[80vh] overflow-hidden"
-          initial={{ opacity: 0, scale: 0.9, y: 20 }}
-          animate={{ opacity: 1, scale: 1, y: 0 }}
-          exit={{ opacity: 0, scale: 0.9, y: 20 }}
-          onClick={(e) => e.stopPropagation()}
-        >
-          {/* æ¨™é¡Œå€åŸŸ */}
-          <div className="flex items-center justify-between mb-6">
-            <div className="flex items-center gap-3">
-              <div className="p-3 bg-gradient-to-r from-amber-100 to-yellow-100 rounded-xl">
-                <Star className="w-6 h-6 text-amber-600" />
-              </div>
-              <div>
-                <h3 className="text-xl font-bold text-gray-800">ğŸ‰ å®Œæˆæ”¶è—</h3>
-                <p className="text-sm text-gray-600">
-                  æ­å–œä½ å®Œæˆäº† {completedTasks.length} å€‹ä»»å‹™ï¼
-                </p>
-              </div>
-            </div>
-            
-            <button
-              onClick={onClose}
-              className="p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors"
-            >
-              <X className="w-5 h-5" />
-            </button>
-          </div>
-
-          {/* ä»»å‹™åˆ—è¡¨ */}
-          <div className="space-y-3 max-h-96 overflow-y-auto">
-            {completedTasks.length === 0 ? (
-              <div className="text-center py-12">
-                <div className="text-4xl mb-2">ğŸŒŸ</div>
-                <p className="text-gray-500">é‚„æ²’æœ‰å®Œæˆçš„ä»»å‹™</p>
-                <p className="text-sm text-gray-400">å®Œæˆä»»å‹™å¾Œæœƒå‡ºç¾åœ¨é€™è£¡</p>
-              </div>
-            ) : (
-              completedTasks.map((task, index) => (
-                <motion.div
-                  key={task.id}
-                  className="bg-gradient-to-r from-amber-50 to-yellow-50 border border-amber-200 rounded-xl p-4 hover:shadow-md transition-all"
-                  initial={{ opacity: 0, x: 20 }}
-                  animate={{ opacity: 1, x: 0 }}
-                  transition={{ delay: index * 0.05 }}
-                >
-                  <div className="flex items-center justify-between">
-                    <div className="flex-1">
-                      <div className="flex items-center gap-2 mb-2">
-                        <div 
-                          className="inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium"
-                          style={{ 
-                            backgroundColor: task.subjectStyle.accent + '20',
-                            color: task.subjectStyle.accent
-                          }}
-                        >
-                          {task.topicTitle}
-                        </div>
-                        <Star className="w-4 h-4 text-amber-500" />
-                      </div>
-                      
-                      <h4 className="text-lg font-bold text-gray-800 mb-1">
-                        {task.title}
-                      </h4>
-                      
-                      <p className="text-sm text-gray-600 mb-2">
-                        ç›®æ¨™ï¼š{task.goalTitle}
-                      </p>
-                      
-                      {task.completed_at && (
-                        <p className="text-xs text-gray-500">
-                          å®Œæˆæ–¼ {new Date(task.completed_at).toLocaleDateString('zh-TW', {
-                            year: 'numeric',
-                            month: 'long',
-                            day: 'numeric',
-                            hour: '2-digit',
-                            minute: '2-digit'
-                          })}
-                        </p>
-                      )}
-                    </div>
-                    
-                    <button
-                      onClick={() => onRestoreTask(task.id, task.goalId, task.topicId)}
-                      className="ml-4 p-3 text-blue-600 hover:bg-blue-100 rounded-xl transition-colors flex-shrink-0 group"
-                      title="æ¢å¾©åˆ°é€²è¡Œä¸­"
-                    >
-                      <RotateCcw className="w-5 h-5 group-hover:rotate-12 transition-transform" />
-                    </button>
-                  </div>
-                </motion.div>
-              ))
-            )}
-          </div>
-        </motion.div>
-      </motion.div>
-    </AnimatePresence>
-  );
-};
-
-/**
- * æº«é¦¨æç¤º Dialog çµ„ä»¶
- */
-interface CutePromptDialogProps {
-  isOpen: boolean;
-  onClose: () => void;
-  onConfirm: () => void;
-  title: string;
-  message: string;
-}
-
-const CutePromptDialog: React.FC<CutePromptDialogProps> = ({
-  isOpen,
-  onClose,
-  onConfirm,
-  title,
-  message
-}) => {
-  if (!isOpen) return null;
-
-  return (
-    <AnimatePresence>
-      <motion.div
-        className="fixed inset-0 bg-black/30 backdrop-blur-sm z-50 flex items-center justify-center p-4"
-        initial={{ opacity: 0 }}
-        animate={{ opacity: 1 }}
-        exit={{ opacity: 0 }}
-      >
-        <motion.div
-          className="bg-white rounded-3xl shadow-2xl border-2 border-amber-200 p-8 w-full max-w-md text-center"
-          initial={{ opacity: 0, scale: 0.8, y: 30 }}
-          animate={{ opacity: 1, scale: 1, y: 0 }}
-          exit={{ opacity: 0, scale: 0.8, y: 30 }}
-          transition={{ type: "spring", damping: 20, stiffness: 300 }}
-        >
-          {/* å¯æ„›è¡¨æƒ… */}
-          <motion.div
-            className="text-6xl mb-4"
-            animate={{ 
-              rotate: [0, -10, 10, -10, 0],
-              scale: [1, 1.1, 1]
-            }}
-            transition={{ 
-              rotate: { duration: 0.8, repeat: Infinity, repeatDelay: 2 },
-              scale: { duration: 0.5, repeat: Infinity, repeatDelay: 3 }
-            }}
-          >
-            ğŸ¤—
-          </motion.div>
-
-          {/* æ¨™é¡Œ */}
-          <h3 className="text-2xl font-bold text-amber-800 mb-3">
-            {title}
-          </h3>
-
-          {/* è¨Šæ¯ */}
-          <p className="text-gray-600 mb-6 leading-relaxed">
-            {message}
-          </p>
-
-          {/* æŒ‰éˆ•å€åŸŸ */}
-          <div className="flex gap-3 justify-center">
-            <motion.button
-              onClick={onClose}
-              className="px-6 py-3 bg-gray-100 text-gray-600 rounded-2xl font-medium hover:bg-gray-200 transition-colors"
-              whileHover={{ scale: 1.05 }}
-              whileTap={{ scale: 0.95 }}
-            >
-              ç­‰ç­‰å†èªª
-            </motion.button>
-            <motion.button
-              onClick={onConfirm}
-              className="px-6 py-3 bg-gradient-to-r from-amber-400 to-orange-400 text-white rounded-2xl font-medium hover:from-amber-500 hover:to-orange-500 transition-all shadow-lg"
-              whileHover={{ scale: 1.05 }}
-              whileTap={{ scale: 0.95 }}
-            >
-              å¥½çš„ï¼è¨˜éŒ„ä¸€ä¸‹ âœ¨
-            </motion.button>
-          </div>
-        </motion.div>
-      </motion.div>
-    </AnimatePresence>
-  );
-};
-
-/**
- * ä¸»é¡Œå¡ç‰‡çµ„ä»¶
- */
-interface TopicCardProps {
-  data: TopicCardData;
-  onClick: (topicId: string) => void;
-  isLoading?: boolean;
-}
-
-const TopicCard: React.FC<TopicCardProps> = ({ data, onClick, isLoading }) => {
-  const { topic, subjectStyle, totalGoals, completedGoals, totalTasks, completedTasks, inProgressTasks, needHelpCount, collaborators, overallProgress } = data;
-
-  // æ ¹æ“šç›®æ¨™ç‹€æ…‹æ±ºå®šåœ–æ¨™
-  const getStatusIcon = () => {
-    if (overallProgress === 100) return CheckCircle2;
-    if (inProgressTasks > 0) return Play;
-    if (totalTasks === 0) return Target;
-    return Clock;
-  };
 
-  const StatusIcon = getStatusIcon();
 
-  return (
-    <motion.div
-      className="group cursor-pointer relative"
-      onClick={() => onClick(topic.id)}
-      whileHover={{ y: -3, scale: 1.01 }}
-      whileTap={{ scale: 0.98 }}
-      transition={{ 
-        type: "spring",
-        stiffness: 400,
-        damping: 30,
-        mass: 1
-      }}
-    >
-      {isLoading && (
-        <div className="absolute inset-0 flex items-center justify-center z-10">
-          <LoadingDots />
-        </div>
-      )}
-      <div 
-        className={`bg-white/90 backdrop-blur-sm rounded-3xl shadow-lg border-2 p-6 h-[320px] flex flex-col transition-all duration-300 hover:shadow-2xl ${
-          isLoading ? 'opacity-90' : ''
-        }`}
-        style={{ 
-          borderColor: subjectStyle.accent + '40',
-          boxShadow: `0 10px 30px ${subjectStyle.accent}15, 0 0 0 1px ${subjectStyle.accent}20`
-        }}
-      >
-        {/* é ‚éƒ¨æ¨™é¡Œå€ */}
-        <div className="flex items-start justify-between mb-3">
-          <div className="flex-1">
-            <div className="flex items-center gap-2 mb-2">
-              <div className="flex items-center gap-2 flex-wrap">
-                <div 
-                  className="px-3 py-1 rounded-full text-xs font-medium"
-                  style={{ 
-                    backgroundColor: subjectStyle.accent + '20',
-                    color: subjectStyle.accent
-                  }}
-                >
-                  {topic.subject || 'æœªåˆ†é¡'}
-                </div>
-                {topic.is_collaborative && (
-                  <div className="flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-600 rounded-full text-xs">
-                    <Users className="w-3 h-3" />
-                    å”ä½œ
-                  </div>
-                )}
-                {/* å”ä½œè€…é ­åƒç§»åˆ°é€™è£¡ */}
-                {topic.is_collaborative && collaborators.length > 0 && (
-                  <div className="flex items-center gap-1">
-                    <div className="flex -space-x-2">
-                      {collaborators.slice(0, 3).map((collaborator, index) => (
-                        <div
-                          key={collaborator.id}
-                          className="w-5 h-5 rounded-full border-2 border-white bg-gradient-to-r from-blue-400 to-purple-400 flex items-center justify-center text-white text-[10px] font-bold"
-                          style={{ zIndex: 10 - index }}
-                        >
-                          {collaborator.name?.charAt(0) || '?'}
-                        </div>
-                      ))}
-                      {collaborators.length > 3 && (
-                        <div className="w-5 h-5 rounded-full border-2 border-white bg-gray-400 flex items-center justify-center text-white text-[10px] font-bold">
-                          +{collaborators.length - 3}
-                        </div>
-                      )}
-                    </div>
-                  </div>
-                )}
-              </div>
-            </div>
-            <h3 className="text-xl font-bold text-gray-800 line-clamp-2 leading-tight">
-              {topic.title}
-            </h3>
-          </div>
-          <div className="flex-shrink-0 ml-3">
-            <StatusIcon 
-              className="w-6 h-6" 
-              style={{ color: subjectStyle.accent }}
-            />
-          </div>
-        </div>
 
-        {/* ä¸­å¤®é€²åº¦ç’° */}
-        <div className="flex-1 flex items-center justify-center my-3">
-          <div className="relative">
-            {/* å¤–åœˆ */}
-            <svg className="w-24 h-24 transform -rotate-90" viewBox="0 0 96 96">
-              <circle
-                cx="48"
-                cy="48"
-                r="40"
-                stroke={subjectStyle.accent + '20'}
-                strokeWidth="8"
-                fill="none"
-              />
-              <circle
-                cx="48"
-                cy="48"
-                r="40"
-                stroke={subjectStyle.accent}
-                strokeWidth="8"
-                fill="none"
-                strokeLinecap="round"
-                strokeDasharray={`${overallProgress * 2.51} 251.2`}
-                style={{
-                  transition: 'stroke-dasharray 0.5s ease-in-out'
-                }}
-              />
-            </svg>
-            {/* ä¸­å¤®ç™¾åˆ†æ¯” */}
-            <div className="absolute inset-0 flex items-center justify-center">
-              <span className="text-2xl font-bold text-gray-800">
-                {Math.round(overallProgress)}%
-              </span>
-            </div>
-          </div>
-        </div>
-
-        {/* åº•éƒ¨çµ±è¨ˆè³‡è¨Š */}
-        <div className="space-y-2">
-          <div className="flex items-center justify-between text-sm">
-            <div className="flex items-center gap-1 text-gray-600">
-              <Flag className="w-4 h-4" />
-              <span>{completedGoals}/{totalGoals} ç›®æ¨™</span>
-            </div>
-            <div className="flex items-center gap-1 text-gray-600">
-              <Target className="w-4 h-4" />
-              <span>{completedTasks}/{totalTasks} ä»»å‹™</span>
-            </div>
-          </div>
 
-          {/* é€²è¡Œä¸­ä»»å‹™å’Œéœ€è¦å¹«åŠ© */}
-          <div className="flex items-center justify-between">
-            {inProgressTasks > 0 && (
-              <div 
-                className="flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium"
-                style={{ 
-                  backgroundColor: subjectStyle.accent + '20',
-                  color: subjectStyle.accent
-                }}
-              >
-                <Play className="w-3 h-3" />
-                {inProgressTasks} é€²è¡Œä¸­
-              </div>
-            )}
-            
-            {needHelpCount > 0 && (
-              <motion.div 
-                className="flex items-center gap-1 px-2 py-1 bg-orange-100 text-orange-600 rounded-full text-xs font-medium"
-                animate={{ scale: [1, 1.05, 1] }}
-                transition={{ duration: 2, repeat: Infinity }}
-              >
-                âš ï¸ {needHelpCount} éœ€è¦å¹«åŠ©
-              </motion.div>
-            )}
-          </div>
-        </div>
-      </div>
-    </motion.div>
-  );
-};
-
-/**
- * ä¸»é¡Œç¶²æ ¼çµ„ä»¶
- */
-interface TopicGridProps {
-  topics: TopicCardData[];
-  onTopicClick: (topicId: string) => void;
-  onCreateTopicClick: () => void;
-  isLoading?: boolean;
-  isViewModeChanging?: boolean;
-  loadingTopicId: string | null;
-}
-
-const TopicGrid: React.FC<TopicGridProps> = ({ topics, onTopicClick, onCreateTopicClick, isLoading, isViewModeChanging, loadingTopicId }) => {
-  if (isLoading || isViewModeChanging) {
-    return (
-      <div className="flex items-center justify-center min-h-[200px]">
-        <LoadingDots 
-          colors={['#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FECA57']}
-          size={8}
-          minLoadingTime={500}
-        />
-      </div>
-    );
-  }
-
-  return (
-    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full">
-      {topics.map((topicData, index) => (
-        <motion.div
-          key={topicData.topic.id}
-          initial={{ opacity: 0, y: 10, scale: 0.95 }}
-          animate={{ opacity: 1, y: 0, scale: 1 }}
-          transition={{ 
-            duration: 0.2, 
-            delay: index * 0.05,
-            type: "spring",
-            stiffness: 400,
-            damping: 25
-          }}
-        >
-          <TopicCard 
-            data={topicData} 
-            onClick={onTopicClick}
-            isLoading={topicData.topic.id === loadingTopicId}
-          />
-        </motion.div>
-      ))}
-      
-      {/* å»ºç«‹æ–°ä¸»é¡Œå¡ç‰‡ */}
-      <motion.div
-        initial={{ opacity: 0, y: 10, scale: 0.95 }}
-        animate={{ opacity: 1, y: 0, scale: 1 }}
-        transition={{ 
-          duration: 0.2, 
-          delay: topics.length * 0.05,
-          type: "spring",
-          stiffness: 400,
-          damping: 25
-        }}
-      >
-        <CreateTopicCard 
-          onClick={onCreateTopicClick}
-          isLoading={false}
-        />
-      </motion.div>
-    </div>
-  );
-};
-
-/**
- * æœ¬é€±æŒ‘æˆ°å¡ç‰‡çµ„ä»¶
- */
-interface WeeklyChallengeCardProps {
-  challenge: {
-    title: string;
-    completedDays: string[];
-    startDate: string;
-  } | null;
-  onCheckIn: () => void;
-  onCancelCheckIn: () => void;
-  onEdit: () => void;
-  onSetChallenge: () => void;
-  onMigrate: () => void;
-  editingChallenge: boolean;
-  challengeInput: string;
-  setChallengeInput: (value: string) => void;
-  setEditingChallenge: (value: boolean) => void;
-  getTaiwanDateString: () => string;
-}
-
-const WeeklyChallengeCard: React.FC<WeeklyChallengeCardProps> = ({ 
-  challenge, 
-  onCheckIn, 
-  onCancelCheckIn,
-  onEdit, 
-  onSetChallenge,
-  onMigrate,
-  editingChallenge,
-  challengeInput,
-  setChallengeInput,
-  setEditingChallenge,
-  getTaiwanDateString
-}) => {
-  const [showCancelConfirm, setShowCancelConfirm] = useState(false);
-  
-  const today = getTaiwanDateString();
-  const isCheckedToday = challenge?.completedDays.includes(today) || false;
-  const completedDays = challenge?.completedDays.length || 0;
-  const progress = (completedDays / 7) * 100;
-
-  // ç”Ÿæˆé€™é€±çš„æ—¥æœŸ
-  const getWeekDates = () => {
-    if (!challenge) return [];
-    const startDate = new Date(challenge.startDate);
-    const dates: string[] = [];
-    for (let i = 0; i < 7; i++) {
-      const date = new Date(startDate);
-      date.setDate(startDate.getDate() + i);
-      dates.push(date.toISOString().split('T')[0]);
-    }
-    return dates;
-  };
-
-  const weekDates = getWeekDates();
-
-  return (
-    <motion.div
-      className="bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 rounded-3xl shadow-2xl p-4 text-white relative overflow-hidden w-full h-[420px] flex flex-col"
-      initial={{ opacity: 0, y: 20, scale: 0.95 }}
-      animate={{ opacity: 1, y: 0, scale: 1 }}
-      transition={{ 
-        duration: 0.5, 
-        type: "spring", 
-        stiffness: 300, 
-        damping: 25 
-      }}
-      whileHover={{ y: -2 }}
-    >
-      {/* èƒŒæ™¯è£é£¾ */}
-      <div className="absolute inset-0">
-        <div className="absolute top-0 right-0 w-24 h-24 bg-white/10 rounded-full -translate-y-12 translate-x-12"></div>
-        <div className="absolute bottom-0 left-0 w-16 h-16 bg-white/10 rounded-full translate-y-8 -translate-x-8"></div>
-      </div>
-
-      <div className="relative z-10 flex flex-col h-full">
-        {/* æ¨™é¡Œå€åŸŸ */}
-        <div className="flex items-center justify-between mb-4 flex-shrink-0">
-          <div className="flex items-center gap-2">
-            <div className="w-10 h-10 bg-white/20 rounded-2xl flex items-center justify-center backdrop-blur-sm">
-              <Trophy className="w-5 h-5 text-yellow-300" />
-            </div>
-            <div>
-              <h3 className="text-lg font-bold">æœ¬é€±æŒ‘æˆ°</h3>
-            </div>
-          </div>
-          
-          {challenge && !editingChallenge && (
-            <div className="flex gap-2">
-              <button
-                onClick={onEdit}
-                className="p-2 bg-white/20 rounded-xl hover:bg-white/30 transition-colors backdrop-blur-sm"
-                title="ç·¨è¼¯æŒ‘æˆ°"
-              >
-                <Edit3 className="w-4 h-4" />
-              </button>
-                             {/* é·ç§»æŒ‰éˆ• */}
-               <button
-                 onClick={onMigrate}
-                 className="p-2 bg-yellow-400/80 text-indigo-600 rounded-xl hover:bg-yellow-400 transition-colors backdrop-blur-sm"
-                 title="é·ç§»åˆ°æ–°ä»»å‹™ç³»çµ±"
-               >
-                 <TrendingUp className="w-4 h-4" />
-               </button>
-            </div>
-          )}
-        </div>
-
-        {/* æŒ‘æˆ°å…§å®¹ - å›ºå®šé«˜åº¦å®¹å™¨ */}
-        <div className="flex-1 flex flex-col justify-center min-h-[320px]">
-          {editingChallenge ? (
-            <div className="space-y-4">
-              <input
-                type="text"
-                value={challengeInput}
-                onChange={(e) => setChallengeInput(e.target.value)}
-                placeholder="è¼¸å…¥ä½ çš„æœ¬é€±æŒ‘æˆ°..."
-                className="w-full px-3 py-2 bg-white/20 backdrop-blur-sm border border-white/30 rounded-xl text-white placeholder-white/60 focus:ring-2 focus:ring-white/50 focus:border-transparent text-sm"
-                autoFocus
-              />
-              <div className="flex gap-2">
-                <button
-                  onClick={onSetChallenge}
-                  disabled={!challengeInput.trim()}
-                  className="flex-1 py-2 bg-white/90 text-indigo-600 rounded-xl font-bold hover:bg-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm"
-                >
-                  ç¢ºå®šè¨­å®š
-                </button>
-                <button
-                  onClick={() => setEditingChallenge(false)}
-                  className="px-4 py-2 bg-white/20 backdrop-blur-sm rounded-xl font-bold hover:bg-white/30 transition-colors text-sm"
-                >
-                  å–æ¶ˆ
-                </button>
-              </div>
-            </div>
-          ) : challenge ? (
-            <div className="space-y-4">
-              {/* æŒ‘æˆ°æ¨™é¡Œ */}
-              <div className="text-center">
-                <h4 className="text-lg font-bold mb-2 line-clamp-2">{challenge.title}</h4>
-                <div className="flex items-center justify-center gap-2">
-                  <span className="text-2xl font-black">{completedDays}</span>
-                  <span className="text-white/80">/</span>
-                  <span className="text-lg font-bold text-white/80">7</span>
-                  <span className="text-sm text-white/80 ml-1">å¤©å®Œæˆ</span>
-                </div>
-              </div>
-
-              {/* é·ç§»æç¤º */}
-              {challenge.completedDays.length > 0 && (
-                <div className="mb-3 p-2 bg-yellow-400/20 border border-yellow-400/30 rounded-lg backdrop-blur-sm">
-                  <div className="flex items-center gap-2 text-xs">
-                    <TrendingUp className="w-3 h-3 text-yellow-300" />
-                    <span className="text-yellow-100">
-                      å¯å‡ç´šç‚ºé€£çºŒå‹ä»»å‹™ï¼Œäº«å—æ›´è±å¯Œçš„è¿½è¹¤åŠŸèƒ½ï¼
-                    </span>
-                  </div>
-                </div>
-              )}
-
-              {/* é€²åº¦æ¢ */}
-              <div className="space-y-3">
-                <div className="w-full bg-white/20 rounded-full h-3 backdrop-blur-sm">
-                  <motion.div
-                    className="h-3 bg-gradient-to-r from-yellow-300 to-orange-300 rounded-full shadow-lg"
-                    initial={{ width: 0 }}
-                    animate={{ width: `${progress}%` }}
-                    transition={{ duration: 0.8, ease: "easeOut" }}
-                  />
-                </div>
-                
-                {/* é€±é–“æ—¥æœŸæ¨™è¨˜ */}
-                <div className="flex justify-between">
-                  {weekDates.map((date, index) => {
-                    const isCompleted = challenge.completedDays.includes(date);
-                    const isToday = date === today;
-                    const dayName = ['ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­', 'æ—¥'][index];
-                    
-                    return (
-                      <div key={date} className="flex flex-col items-center">
-                        <div 
-                          className={`w-7 h-7 rounded-full flex items-center justify-center text-xs font-bold transition-all ${
-                            isCompleted 
-                              ? 'bg-yellow-300 text-indigo-600 shadow-lg' 
-                              : isToday 
-                                ? 'bg-white/30 border-2 border-white/60 text-white' 
-                                : 'bg-white/10 text-white/60'
-                          }`}
-                        >
-                          {isCompleted ? 'âœ“' : dayName}
-                        </div>
-                        {isToday && (
-                          <div className="w-1 h-1 bg-yellow-300 rounded-full mt-1"></div>
-                        )}
-                      </div>
-                    );
-                  })}
-                </div>
-              </div>
-
-              {/* æ‰“å¡æŒ‰éˆ•å€åŸŸ */}
-              {isCheckedToday ? (
-                <div className="space-y-2">
-                  {/* å·²æ‰“å¡ç‹€æ…‹ */}
-                  <div className="w-full py-3 rounded-xl font-bold text-sm bg-white/20 text-white/80 text-center border border-white/30">
-                    ä»Šæ—¥å·²æ‰“å¡ âœ“
-                  </div>
-                  
-                  {/* å–æ¶ˆæ‰“å¡æŒ‰éˆ• */}
-                  {!showCancelConfirm ? (
-                    <div className="flex justify-center">
-                      <motion.button
-                        onClick={() => setShowCancelConfirm(true)}
-                        className="px-4 py-1.5 rounded-lg text-xs bg-white/10 text-white/70 hover:bg-white/20 transition-colors border border-white/20"
-                        whileTap={{ scale: 0.98 }}
-                      >
-                        å–æ¶ˆä»Šæ—¥æ‰“å¡
-                      </motion.button>
-                    </div>
-                  ) : (
-                    <div className="space-y-2">
-                      <div className="text-center text-xs text-white/80 py-1">
-                        ç¢ºå®šè¦å–æ¶ˆä»Šæ—¥æ‰“å¡å—ï¼Ÿ
-                      </div>
-                      <div className="flex gap-2">
-                        <motion.button
-                          onClick={() => setShowCancelConfirm(false)}
-                          className="flex-1 py-2 rounded-lg text-xs bg-white/10 text-white/70 hover:bg-white/20 transition-colors"
-                          whileHover={{ scale: 1.02 }}
-                          whileTap={{ scale: 0.98 }}
-                        >
-                          ä¸äº†
-                        </motion.button>
-                        <motion.button
-                          onClick={() => {
-                            onCancelCheckIn();
-                            setShowCancelConfirm(false);
-                          }}
-                          className="flex-1 py-2 rounded-lg text-xs bg-red-400/80 text-white hover:bg-red-500/80 transition-colors"
-                          whileHover={{ scale: 1.02 }}
-                          whileTap={{ scale: 0.98 }}
-                        >
-                          ç¢ºå®šå–æ¶ˆ
-                        </motion.button>
-                      </div>
-                    </div>
-                  )}
-                </div>
-              ) : (
-                <motion.button
-                  onClick={onCheckIn}
-                  className="w-full py-3 rounded-xl font-bold text-sm transition-all shadow-lg bg-white/90 text-indigo-600 hover:bg-white hover:scale-105 active:scale-95"
-                  whileHover={{ scale: 1.02 }}
-                  whileTap={{ scale: 0.98 }}
-                >
-                  ä»Šæ—¥æ‰“å¡ ğŸ¯
-                </motion.button>
-              )}
-            </div>
-          ) : (
-            <div className="text-center space-y-4">
-              <div className="text-4xl mb-2">ğŸ¯</div>
-              <h4 className="text-lg font-bold">é‚„æ²’æœ‰è¨­å®šæœ¬é€±æŒ‘æˆ°</h4>
-              <p className="text-white/80 text-sm mb-4">è¨­å®šä¸€å€‹å°ˆå±¬æ–¼ä½ çš„æœ¬é€±æŒ‘æˆ°å§ï¼</p>
-              <button
-                onClick={() => setEditingChallenge(true)}
-                className="px-6 py-2 bg-white/90 text-indigo-600 rounded-xl font-bold hover:bg-white transition-all shadow-lg hover:scale-105 text-sm"
-              >
-                ç«‹å³è¨­å®š
-              </button>
-            </div>
-          )}
-        </div>
-      </div>
-    </motion.div>
-  );
-};
-
-/**
- * å»ºç«‹æ–°ä¸»é¡Œå¡ç‰‡çµ„ä»¶
- */
-interface CreateTopicCardProps {
-  onClick: () => void;
-  isLoading?: boolean;
-}
-
-const CreateTopicCard: React.FC<CreateTopicCardProps> = ({ onClick, isLoading }) => {
-  return (
-    <motion.div
-      className="group cursor-pointer relative"
-      onClick={onClick}
-      whileHover={{ y: -3, scale: 1.01 }}
-      whileTap={{ scale: 0.98 }}
-      transition={{ 
-        type: "spring",
-        stiffness: 400,
-        damping: 30,
-        mass: 1
-      }}
-    >
-      {isLoading && (
-        <div className="absolute inset-0 flex items-center justify-center z-10">
-          <LoadingDots />
-        </div>
-      )}
-      <div 
-        className={`bg-gradient-to-br from-emerald-50 to-teal-50 backdrop-blur-sm rounded-3xl shadow-lg border-2 border-dashed border-emerald-300 p-6 h-[320px] flex flex-col items-center justify-center transition-all duration-300 hover:shadow-2xl hover:border-emerald-400 ${
-          isLoading ? 'opacity-90' : ''
-        }`}
-        style={{ 
-          boxShadow: `0 10px 30px rgba(16, 185, 129, 0.1), 0 0 0 1px rgba(16, 185, 129, 0.1)`
-        }}
-      >
-        {/* åœ–æ¨™ */}
-        <motion.div
-          className="w-24 h-24 mb-6 bg-gradient-to-br from-emerald-100 to-teal-100 rounded-full flex items-center justify-center"
-          whileHover={{ scale: 1.1 }}
-          transition={{ type: "spring", stiffness: 300, damping: 20 }}
-        >
-          <Plus className="w-12 h-12 text-emerald-600" />
-        </motion.div>
-
-        {/* æ¨™é¡Œ */}
-        <h3 className="text-2xl font-bold text-emerald-800 mb-2 text-center">
-          å»ºç«‹æ–°ä¸»é¡Œ
-        </h3>
-
-        {/* æè¿° */}
-        <p className="text-emerald-600 text-center mb-4 leading-relaxed">
-          å¾æ¨¡æ¿æˆ–ç©ºç™½ä¸»é¡Œé–‹å§‹<br />
-          ä½ çš„æ–°å­¸ç¿’ä¹‹æ—…
-        </p>
-
-        {/* è£é£¾æ€§åœ–æ¨™ */}
-        <div className="flex items-center gap-3 text-emerald-400">
-          <motion.div
-            animate={{ rotate: [0, 5, -5, 0] }}
-            transition={{ duration: 2, repeat: Infinity, ease: "easeInOut" }}
-          >
-            âœ¨
-          </motion.div>
-          <motion.div
-            animate={{ scale: [1, 1.1, 1] }}
-            transition={{ duration: 1.5, repeat: Infinity, ease: "easeInOut" }}
-          >
-            ğŸš€
-          </motion.div>
-          <motion.div
-            animate={{ rotate: [0, -5, 5, 0] }}
-            transition={{ duration: 2.5, repeat: Infinity, ease: "easeInOut" }}
-          >
-            ğŸ’¡
-          </motion.div>
-        </div>
-      </div>
-    </motion.div>
-  );
-};
-
-/**
- * é€±æŒ‘æˆ°å¿«é€Ÿå‰µå»ºå¡ç‰‡çµ„ä»¶
- */
-interface WeeklyQuickCardProps {
-  onCreateWeeklyTask: (title: string) => void;
-  isLoading?: boolean;
-  hasExistingChallenge?: boolean;
-  existingChallengeTask?: TaskWithContext;
-  onTaskClick?: (task: TaskWithContext) => void;
-  onResetChallenge?: () => void;
-}
-
-const WeeklyQuickCard: React.FC<WeeklyQuickCardProps> = ({ 
-  onCreateWeeklyTask, 
-  isLoading, 
-  hasExistingChallenge = false,
-  existingChallengeTask,
-  onTaskClick,
-  onResetChallenge
-}) => {
-  const [isEditing, setIsEditing] = useState(false);
-  const [taskTitle, setTaskTitle] = useState('');
-  const [isFlipped, setIsFlipped] = useState(false);
-  const [showResetConfirm, setShowResetConfirm] = useState(false);
-
-  // æª¢æŸ¥ä»Šå¤©æ˜¯å¦å·²ç¶“æ‰“å¡
-  const isCheckedInToday = useMemo(() => {
-    if (!existingChallengeTask || existingChallengeTask.task_type !== 'count') {
-      return false;
-    }
-    
-    const today = new Date().toISOString().split('T')[0];
-    const checkInDates = (existingChallengeTask.progress_data as any)?.check_in_dates || [];
-    return checkInDates.includes(today);
-  }, [existingChallengeTask]);
-
-  // ç²å–æœ¬é€±çš„æ‰“å¡è³‡æ–™
-  const weeklyCheckInData = useMemo(() => {
-    if (!existingChallengeTask || existingChallengeTask.task_type !== 'count') {
-      return { checkInDates: [], weekDates: [] };
-    }
-    
-    const checkInDates = (existingChallengeTask.progress_data as any)?.check_in_dates || [];
-    
-    // ç”Ÿæˆæœ¬é€±çš„æ—¥æœŸ
-    const cycleConfig = existingChallengeTask.cycle_config as any;
-    const weekStart = cycleConfig?.start_date || cycleConfig?.cycle_start_date;
-    
-    if (!weekStart) {
-      return { checkInDates, weekDates: [] };
-    }
-    
-    const weekDates: string[] = [];
-    const startDate = new Date(weekStart);
-    
-    for (let i = 0; i < 7; i++) {
-      const date = new Date(startDate);
-      date.setDate(startDate.getDate() + i);
-      weekDates.push(date.toISOString().split('T')[0]);
-    }
-    
-    return { checkInDates, weekDates };
-  }, [existingChallengeTask]);
 
-  // ç²å–è©³ç´°çš„æ‰“å¡æ™‚é–“è³‡æ–™ï¼ˆæ¨¡æ“¬å¾ task_actions è¡¨ç²å–ï¼‰
-  const checkInTimestamps = useMemo(() => {
-    if (!existingChallengeTask) return [];
-    
-    // é€™è£¡æ‡‰è©²å¾ task_actions è¡¨ç²å–å¯¦éš›çš„æ‰“å¡æ™‚é–“
-    // ç›®å‰å…ˆæ¨¡æ“¬ä¸€äº›æ•¸æ“šï¼Œä½†ä¿æŒç©©å®šæ€§
-    const checkInDates = (existingChallengeTask.progress_data as any)?.check_in_dates || [];
-    
-    return checkInDates.map((date: string, index: number) => {
-      // ä½¿ç”¨æ—¥æœŸå­—ä¸²ä½œç‚ºç¨®å­ï¼Œç”¢ç”Ÿç©©å®šçš„éš¨æ©Ÿæ™‚é–“
-      const dateHash = date.split('-').reduce((acc, val) => acc + parseInt(val), 0);
-      const baseHour = 8 + (dateHash + index) % 12; // 8é»åˆ°19é»ä¹‹é–“
-      const minute = (dateHash * 7 + index * 13) % 60; // ç©©å®šçš„åˆ†é˜æ•¸
-      
-      const dayOfWeek = new Date(date).getDay();
-      const dayName = ['é€±æ—¥', 'é€±ä¸€', 'é€±äºŒ', 'é€±ä¸‰', 'é€±å››', 'é€±äº”', 'é€±å…­'][dayOfWeek];
-      
-      return {
-        date,
-        time: `${baseHour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}`,
-        dayName,
-        timestamp: new Date(`${date}T${baseHour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}:00`).getTime()
-      };
-    }).sort((a, b) => a.timestamp - b.timestamp); // æŒ‰æ™‚é–“æ’åº
-  }, [existingChallengeTask]);
-
-  const handleSubmit = () => {
-    if (!taskTitle.trim()) return;
-    onCreateWeeklyTask(taskTitle.trim());
-    setTaskTitle('');
-    setIsEditing(false);
-  };
 
-  const handleKeyPress = (e: React.KeyboardEvent) => {
-    if (e.key === 'Enter') {
-      handleSubmit();
-    } else if (e.key === 'Escape') {
-      setTaskTitle('');
-      setIsEditing(false);
-    }
-  };
 
-  const handleResetChallenge = () => {
-    setShowResetConfirm(false);
-    setIsFlipped(false);
-    onResetChallenge?.();
-  };
 
-  /**
-   * å¡ç‰‡ç¿»è½‰å‹•ç•«è®Šé«” - çµ±ä¸€èˆ‡å…¶ä»–å¡ç‰‡çš„è¡Œç‚º
-   */
-  const cardVariants = {
-    front: {
-      rotateY: 0
-    },
-    back: {
-      rotateY: 180
-    }
-  };
 
-  return (
-    <div className="relative w-full max-w-xs mx-auto h-48 overflow-hidden" style={{ perspective: '1000px' }}>
-      {isLoading && (
-        <div className="absolute inset-0 flex items-center justify-center z-10 bg-black/20 rounded-2xl">
-          <LoadingDots />
-        </div>
-      )}
-      
-      {/* å¡ç‰‡å®¹å™¨ */}
-      <motion.div
-        className="relative w-full h-full cursor-pointer rounded-2xl shadow-lg border-0 text-white relative overflow-hidden"
-        onClick={() => {
-          if (!hasExistingChallenge && !isEditing && !showResetConfirm) {
-            setIsEditing(true);
-          } else if (hasExistingChallenge && !showResetConfirm) {
-            // çµ±ä¸€ç¿»é¢è¡Œç‚ºï¼šé»æ“Šå¡ç‰‡å³å¯ç¿»é¢
-            setIsFlipped(!isFlipped);
-          }
-        }}
-        animate={isFlipped ? "back" : "front"}
-        variants={cardVariants}
-        transition={{ duration: 0.6, ease: "easeInOut" }}
-        style={{
-          background: 'linear-gradient(135deg, rgb(99 102 241), rgb(147 51 234), rgb(236 72 153))'
-        }}
-      >
-        {/* èƒŒæ™¯è£é£¾ */}
-        <div className="absolute inset-0">
-          <div className="absolute top-0 right-0 w-24 h-24 bg-white/10 rounded-full -translate-y-12 translate-x-12"></div>
-          <div className="absolute bottom-0 left-0 w-16 h-16 bg-white/10 rounded-full translate-y-8 -translate-x-8"></div>
-        </div>
 
-        <div className="relative z-10 p-4 h-full flex flex-col min-h-0">
-          {/* æ ¹æ“šç¿»è½‰ç‹€æ…‹é¡¯ç¤ºä¸åŒå…§å®¹ */}
-          {!isFlipped ? (
-            // æ­£é¢å…§å®¹
-            <>
-              {/* é ‚éƒ¨ï¼šä¸»é¡Œæ¨™ç±¤ */}
-              <div className="mb-3">
-                <div className="inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-white/20 text-white">
-                  <Trophy className="w-3 h-3" />
-                  é€±æŒ‘æˆ°
-                </div>
-              </div>
 
-              {/* ä¸­é–“ï¼šä»»å‹™æ¨™é¡Œ */}
-              <div className="flex-1 flex flex-col justify-center">
-                {hasExistingChallenge && existingChallengeTask ? (
-                  // é¡¯ç¤ºç¾æœ‰æŒ‘æˆ°ä»»å‹™ - æ”¯æ´æ‰“å¡åŠŸèƒ½
-                  <div>
-                    <div className="mb-3">
-                      <h3 className="text-lg font-bold text-white leading-tight line-clamp-2">
-                        {existingChallengeTask.title}
-                      </h3>
-                    </div>
-                    <div className="flex items-center gap-2 text-sm text-white/80 mb-3">
-                      {existingChallengeTask.task_type === 'count' && (
-                        <>
-                          <span className="text-yellow-300">ğŸ¯</span>
-                          <span>
-                            {weeklyCheckInData.checkInDates.length}/{(existingChallengeTask.task_config as any)?.target_count || 7} æ¬¡
-                          </span>
-                        </>
-                      )}
-                    </div>
-                    
-                    {/* æ‰“å¡æŒ‰éˆ• */}
-                    <div className="space-y-2">
-                      {isCheckedInToday ? (
-                        // ä»Šå¤©å·²æ‰“å¡
-                        <div className="w-full py-2 rounded-xl font-bold text-sm bg-white/20 text-white/80 text-center border border-white/30">
-                          ä»Šå¤©å·²å®Œæˆ âœ…
-                        </div>
-                      ) : (
-                        // ä»Šå¤©é‚„æ²’æ‰“å¡
-                        <motion.button
-                          onClick={(e) => {
-                            e.stopPropagation();
-                            // è™•ç†ä»»å‹™æ‰“å¡é‚è¼¯
-                            onTaskClick?.(existingChallengeTask);
-                          }}
-                          className="w-full py-2 rounded-xl font-bold text-sm transition-all shadow-lg bg-white/90 text-indigo-600 hover:bg-white hover:scale-105 active:scale-95"
-                          whileHover={{ scale: 1.02 }}
-                          whileTap={{ scale: 0.98 }}
-                          animate={isLoading ? { scale: [1, 1.05, 1] } : {}}
-                          transition={{ duration: 0.5, repeat: isLoading ? Infinity : 0 }}
-                        >
-                          ä»Šå¤©å®Œæˆäº† âœ¨
-                        </motion.button>
-                      )}
-                    </div>
-                  </div>
-                ) : isEditing ? (
-                  // å‰µå»ºæ–°æŒ‘æˆ°è¼¸å…¥ç•Œé¢
-                  <div className="space-y-3" onClick={(e) => e.stopPropagation()}>
-                    <input
-                      type="text"
-                      value={taskTitle}
-                      onChange={(e) => setTaskTitle(e.target.value)}
-                      onKeyDown={handleKeyPress}
-                      placeholder="è¼¸å…¥ä½ çš„é€±æŒ‘æˆ°..."
-                      className="w-full px-3 py-2 bg-white/20 backdrop-blur-sm border border-white/30 rounded-xl text-white placeholder-white/60 focus:ring-2 focus:ring-white/50 focus:border-transparent text-sm"
-                      autoFocus
-                    />
-                    <div className="flex gap-2">
-                      <button
-                        onClick={handleSubmit}
-                        disabled={!taskTitle.trim() || isLoading}
-                        className="flex-1 py-2 bg-white/90 text-indigo-600 rounded-xl font-bold hover:bg-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-xs"
-                      >
-                        å‰µå»ºæŒ‘æˆ°
-                      </button>
-                      <button
-                        onClick={() => {
-                          setTaskTitle('');
-                          setIsEditing(false);
-                        }}
-                        className="px-3 py-2 bg-white/20 backdrop-blur-sm rounded-xl font-bold hover:bg-white/30 transition-colors text-xs"
-                      >
-                        å–æ¶ˆ
-                      </button>
-                    </div>
-                  </div>
-                ) : (
-                  // å‰µå»ºæ–°æŒ‘æˆ°å¼•å°ç•Œé¢
-                  <div className="text-center">
-                    <div className="mb-2">
-                      <h3 className="text-lg font-bold text-white leading-tight">
-                        å¿«é€Ÿå‰µå»ºé€±æŒ‘æˆ°
-                      </h3>
-                    </div>
-                    <motion.div
-                      className="text-3xl mb-2"
-                      animate={{ 
-                        rotate: [0, -5, 5, -5, 0],
-                        scale: [1, 1.1, 1]
-                      }}
-                      transition={{ 
-                        rotate: { duration: 1, repeat: Infinity, repeatDelay: 3 },
-                        scale: { duration: 0.5, repeat: Infinity, repeatDelay: 4 }
-                      }}
-                    >
-                      ğŸ¯
-                    </motion.div>
-                    <p className="text-sm text-white/80 leading-relaxed">
-                      é»æ“Šè¨­å®š7å¤©æ‰“å¡æŒ‘æˆ°
-                    </p>
-                  </div>
-                )}
-              </div>
 
-              {/* åº•éƒ¨ï¼šç›®æ¨™è³‡è¨Š */}
-              <div className="mt-auto pt-2 border-t border-white/20">
-                <div className="flex items-center justify-between">
-                  <div className="flex items-center gap-1 text-xs text-white/80">
-                    <Target className="w-3 h-3" />
-                    <span className="truncate">æ¯é€±æŒ‘æˆ°ç›®æ¨™</span>
-                  </div>
-                  {/* 7å¤©æ‰“å¡è£é£¾ */}
-                  <div className="flex gap-1">
-                    {weeklyCheckInData.weekDates.length > 0 ? (
-                      weeklyCheckInData.weekDates.map((date, i) => {
-                        const isChecked = weeklyCheckInData.checkInDates.includes(date);
-                        const isToday = date === new Date().toISOString().split('T')[0];
-                        
-                        return (
-                          <div
-                            key={i}
-                            className={`w-1.5 h-1.5 rounded-full transition-all ${
-                              isChecked 
-                                ? 'bg-yellow-300 shadow-sm' 
-                                : isToday 
-                                  ? 'bg-white/60 ring-1 ring-white/40' 
-                                  : 'bg-white/40'
-                            }`}
-                          />
-                        );
-                      })
-                    ) : (
-                      [...Array(7)].map((_, i) => (
-                        <div
-                          key={i}
-                          className="w-1.5 h-1.5 rounded-full bg-white/40"
-                        />
-                      ))
-                    )}
-                  </div>
-                </div>
-              </div>
 
-              {/* ç‹€æ…‹æŒ‡ç¤ºå™¨ */}
-              {hasExistingChallenge && (
-                <div className="absolute top-2 right-2 text-lg transform hover:scale-125 transition-transform">
-                  ğŸ¯
-                </div>
-              )}
-            </>
-          ) : (
-            // èƒŒé¢å…§å®¹ - è©³ç´°è¨˜éŒ„ (åå‘ç¿»è½‰æŠµæ¶ˆå®¹å™¨ç¿»è½‰)
-            <div style={{ transform: 'scaleX(-1)' }}>
-              {/* é ‚éƒ¨ï¼šæ¨™é¡Œå’Œæ“ä½œæŒ‰éˆ• */}
-              {!showResetConfirm && (
-                <>
-                  <div className="mb-3 flex items-center justify-between">
-                    <div className="inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-white/20 text-white">
-                      <Calendar className="w-3 h-3" />
-                      è©³ç´°è¨˜éŒ„
-                    </div>
-                  </div>
 
-                  {/* æŒ‘æˆ°æ¨™é¡Œ */}
-                  <div className="mb-3">
-                    <h4 className="text-sm font-bold text-white/90 line-clamp-1">
-                      {existingChallengeTask?.title || 'é€±æŒ‘æˆ°'}
-                    </h4>
-                  </div>
-                </>
-              )}
 
-              {/* æ‰“å¡è¨˜éŒ„åˆ—è¡¨ */}
-              <div className="flex-1 overflow-y-auto">
-                              {showResetConfirm ? (
-                <div className="flex flex-col items-center justify-center h-full space-y-4">
-                  <div className="text-center space-y-2">
-                    <div className="text-2xl">âš ï¸</div>
-                    <div className="space-y-1">
-                      <p className="text-sm font-medium text-white">é‡æ–°è¨­å®šæŒ‘æˆ°</p>
-                      <p className="text-xs text-white/80">æœƒæ¸…ç©ºæ‰€æœ‰é€²åº¦</p>
-                    </div>
-                  </div>
-                  <div className="flex gap-2 w-full">
-                    <button
-                      onClick={(e) => {
-                        e.stopPropagation();
-                        setShowResetConfirm(false);
-                      }}
-                      className="flex-1 py-2 px-3 bg-white/20 rounded-lg text-xs hover:bg-white/30 transition-colors"
-                    >
-                      å–æ¶ˆ
-                    </button>
-                    <button
-                      onClick={(e) => {
-                        e.stopPropagation();
-                        handleResetChallenge();
-                      }}
-                      className="flex-1 py-2 px-3 bg-red-500/80 rounded-lg text-xs hover:bg-red-500 transition-colors"
-                    >
-                      ç¢ºå®šé‡è¨­
-                    </button>
-                  </div>
-                </div>
-                ) : checkInTimestamps.length > 0 ? (
-                  <div className="space-y-2">
-                    {checkInTimestamps.map((record, index) => (
-                      <motion.div
-                        key={record.date}
-                        className="flex items-center justify-between p-2 bg-white/10 rounded-lg"
-                        initial={{ opacity: 0, x: -20 }}
-                        animate={{ opacity: 1, x: 0 }}
-                        transition={{ delay: index * 0.1 }}
-                      >
-                        <div className="flex items-center gap-2">
-                          <div className="w-2 h-2 bg-green-400 rounded-full"></div>
-                          <span className="text-xs font-medium">{record.dayName}</span>
-                        </div>
-                        <div className="text-right">
-                          <div className="text-xs text-white/90">
-                            {new Date(record.date).toLocaleDateString('zh-TW', { 
-                              month: 'short', 
-                              day: 'numeric' 
-                            })}
-                          </div>
-                          <div className="text-xs text-white/70">
-                            {record.time}
-                          </div>
-                        </div>
-                      </motion.div>
-                    ))}
-                  </div>
-                ) : (
-                  <div className="flex flex-col items-center justify-center h-full text-center">
-                    <div className="text-2xl mb-2">ğŸ“</div>
-                    <p className="text-sm text-white/70">é‚„æ²’æœ‰æ‰“å¡è¨˜éŒ„</p>
-                    <p className="text-xs text-white/50">å®Œæˆä»»å‹™å¾Œæœƒé¡¯ç¤ºåœ¨é€™è£¡</p>
-                  </div>
-                )}
-              </div>
 
-                            {/* åº•éƒ¨ï¼šçµ±è¨ˆè³‡è¨Šå’Œé‡ç½®æŒ‰éˆ• */}
-              {!showResetConfirm && (
-                <div className="mt-3 pt-2 border-t border-white/20">
-                  <div className="flex items-center justify-between text-xs text-white/80">
-                    <span>å·²å®Œæˆ {checkInTimestamps.length}/7 æ¬¡</span>
-                    <button
-                      onClick={(e) => {
-                        e.stopPropagation();
-                        setShowResetConfirm(true);
-                      }}
-                      className="p-1.5 bg-white/20 rounded-lg hover:bg-white/30 transition-colors"
-                      title="é‡ç½®é€±æŒ‘æˆ°"
-                    >
-                      <RotateCcw className="w-3 h-3" />
-                    </button>
-                  </div>
-                </div>
-              )}
-              </div>
-            )}
-        </div>
-      </motion.div>
-    </div>
-  );
-};
 
 export const TaskWallPage = () => {
   const [isLoading, setIsLoading] = useState(true);
@@ -1571,47 +155,9 @@ export const TaskWallPage = () => {
   const [showHistoryDialog, setShowHistoryDialog] = useState(false);
   const [selectedTaskForHistory, setSelectedTaskForHistory] = useState<TaskWithContext | null>(null);
   
-  // æœ¬é€±æŒ‘æˆ°ç›¸é—œç‹€æ…‹
-  const [weeklyChallenge, setWeeklyChallenge] = useState<{
-    title: string;
-    completedDays: string[];
-    startDate: string;
-  } | null>(null);
-  const [editingChallenge, setEditingChallenge] = useState(false);
-  const [challengeInput, setChallengeInput] = useState('');
-
-  // ç²å–å°ç£æ™‚é–“çš„æ—¥æœŸå­—ä¸² (UTC+8)
-  const getTaiwanDateString = () => {
-    const now = new Date();
-    const taiwanTime = new Date(now.getTime() + (8 * 60 * 60 * 1000));
-    return taiwanTime.toISOString().split('T')[0];
-  };
 
-  // ç²å–æœ¬é€±çš„é–‹å§‹æ—¥æœŸ (é€±ä¸€)
-  const getWeekStart = (date: string) => {
-    const d = new Date(date);
-    const day = d.getDay();
-    const diff = d.getDate() - day + (day === 0 ? -6 : 1);
-    return new Date(d.setDate(diff)).toISOString().split('T')[0];
-  };
 
-  // åˆå§‹åŒ–æœ¬é€±æŒ‘æˆ°æ•¸æ“š
-  useEffect(() => {
-    const savedChallenge = localStorage.getItem('weeklyChallenge');
-    const currentWeekStart = getWeekStart(getTaiwanDateString());
-    
-    if (savedChallenge) {
-      const challenge = JSON.parse(savedChallenge);
-      // æª¢æŸ¥æ˜¯å¦æ˜¯æœ¬é€±çš„æŒ‘æˆ°
-      if (challenge.startDate === currentWeekStart) {
-        setWeeklyChallenge(challenge);
-      } else {
-        // æ–°çš„ä¸€é€±ï¼Œæ¸…é™¤èˆŠæŒ‘æˆ°
-        localStorage.removeItem('weeklyChallenge');
-        setWeeklyChallenge(null);
-      }
-    }
-  }, []);
+
 
   // åˆå§‹åŒ–è³‡æ–™è¼‰å…¥
   useEffect(() => {
@@ -2128,11 +674,29 @@ export const TaskWallPage = () => {
   }, [topics]);
 
   /**
-   * åªé¡¯ç¤ºä»»å‹™å¡ç‰‡
+   * æ•´åˆæ‰€æœ‰å¡ç‰‡ï¼ˆåŒ…æ‹¬é€±æŒ‘æˆ°ä»»å‹™ï¼‰
    */
   const allCards = useMemo(() => {
-    return filteredTasks.map(task => ({ type: 'task' as const, data: task }));
-  }, [filteredTasks]);
+    const taskCards = filteredTasks.map(task => ({ 
+      type: 'task' as const, 
+      data: task,
+      highlight: false
+    }));
+    
+    // å¦‚æœæœ‰é€±æŒ‘æˆ°ä»»å‹™ï¼ŒåŠ å…¥åˆ°å¡ç‰‡åˆ—è¡¨çš„é–‹é ­ä¸¦æ¨™è¨˜ç‚º highlight
+    if (weeklyQuickChallengeInfo.challengeTask) {
+      const weeklyCard = {
+        type: 'task' as const,
+        data: weeklyQuickChallengeInfo.challengeTask,
+        highlight: true
+      };
+      
+      // é€±æŒ‘æˆ°å¡ç‰‡æ”¾åœ¨æœ€å‰é¢
+      return [weeklyCard, ...taskCards];
+    }
+    
+    return taskCards;
+  }, [filteredTasks, weeklyQuickChallengeInfo.challengeTask]);
 
   /**
    * è™•ç†ä¸»é¡Œæ•¸æ“šï¼Œè¨ˆç®—å„ç¨®çµ±è¨ˆè³‡è¨Š
@@ -2243,112 +807,11 @@ export const TaskWallPage = () => {
     setShowHistoryDialog(true);
   }, []);
 
-  // è™•ç†è¨­å®šé€±æŒ‘æˆ°
-  const handleSetChallenge = useCallback(() => {
-    if (!challengeInput.trim()) return;
-    
-    const currentWeekStart = getWeekStart(getTaiwanDateString());
-    const newChallenge = {
-      title: challengeInput.trim(),
-      completedDays: [],
-      startDate: currentWeekStart
-    };
-    
-    setWeeklyChallenge(newChallenge);
-    localStorage.setItem('weeklyChallenge', JSON.stringify(newChallenge));
-    setChallengeInput('');
-    setEditingChallenge(false);
-    
-    toast.success('æœ¬é€±æŒ‘æˆ°è¨­å®šæˆåŠŸï¼ğŸ¯', {
-      duration: 3000,
-      style: {
-        background: '#10B981',
-        color: 'white',
-        borderRadius: '12px'
-      }
-    });
-  }, [challengeInput]);
 
-  // è™•ç†æŒ‘æˆ°æ‰“å¡
-  const handleChallengeCheckIn = useCallback(() => {
-    if (!weeklyChallenge) return;
-    
-    const today = getTaiwanDateString();
-    const isAlreadyChecked = weeklyChallenge.completedDays.includes(today);
-    
-    if (isAlreadyChecked) {
-      toast.error('ä»Šå¤©å·²ç¶“æ‰“éå¡äº†ï¼æ˜å¤©å†ä¾†å§ ğŸ˜Š');
-      return;
-    }
-    
-    const updatedChallenge = {
-      ...weeklyChallenge,
-      completedDays: [...weeklyChallenge.completedDays, today]
-    };
-    
-    setWeeklyChallenge(updatedChallenge);
-    localStorage.setItem('weeklyChallenge', JSON.stringify(updatedChallenge));
-    
-    // æª¢æŸ¥æ˜¯å¦å®Œæˆæœ¬é€±æŒ‘æˆ°
-    if (updatedChallenge.completedDays.length === 7) {
-      toast.success('ğŸ‰ æ­å–œå®Œæˆæœ¬é€±æŒ‘æˆ°ï¼ä½ å¤ªæ£’äº†ï¼', {
-        duration: 5000,
-        style: {
-          background: 'linear-gradient(45deg, #FF6B6B, #4ECDC4)',
-          color: 'white',
-          borderRadius: '12px',
-          fontWeight: '600'
-        }
-      });
-    } else {
-      toast.success(`âœ¨ æ‰“å¡æˆåŠŸï¼å·²å®Œæˆ ${updatedChallenge.completedDays.length}/7 å¤©`, {
-        duration: 3000,
-        style: {
-          background: '#10B981',
-          color: 'white',
-          borderRadius: '12px'
-        }
-      });
-    }
-  }, [weeklyChallenge]);
 
-  // è™•ç†ç·¨è¼¯æŒ‘æˆ°
-  const handleEditChallenge = useCallback(() => {
-    if (weeklyChallenge) {
-      setChallengeInput(weeklyChallenge.title);
-    }
-    setEditingChallenge(true);
-  }, [weeklyChallenge]);
 
-  // è™•ç†å–æ¶ˆæ‰“å¡
-  const handleCancelCheckIn = useCallback(() => {
-    if (!weeklyChallenge) return;
-    
-    const today = getTaiwanDateString();
-    const isAlreadyChecked = weeklyChallenge.completedDays.includes(today);
-    
-    if (!isAlreadyChecked) {
-      toast.error('ä»Šå¤©é‚„æ²’æœ‰æ‰“å¡è¨˜éŒ„');
-      return;
-    }
-    
-    const updatedChallenge = {
-      ...weeklyChallenge,
-      completedDays: weeklyChallenge.completedDays.filter(date => date !== today)
-    };
-    
-    setWeeklyChallenge(updatedChallenge);
-    localStorage.setItem('weeklyChallenge', JSON.stringify(updatedChallenge));
-    
-    toast.success('å·²å–æ¶ˆä»Šæ—¥æ‰“å¡', {
-      duration: 3000,
-      style: {
-        background: '#64748B',
-        color: 'white',
-        borderRadius: '12px'
-      }
-    });
-  }, [weeklyChallenge]);
+
+
 
   /**
    * å¿«é€Ÿå‰µå»ºé€±å¾ªç’°ä»»å‹™
@@ -2463,161 +926,9 @@ export const TaskWallPage = () => {
     }
   }, [currentUser, topics, createTopic, addGoal, addTask, fetchTopics]);
 
-  /**
-   * é‡æ–°è¨­å®šé€±æŒ‘æˆ°
-   */
-  const handleResetWeeklyChallenge = useCallback(async () => {
-    if (!weeklyQuickChallengeInfo.challengeTask || !currentUser) return;
-
-    try {
-      const task = weeklyQuickChallengeInfo.challengeTask;
-      
-      // åˆªé™¤ç¾æœ‰çš„é€±æŒ‘æˆ°ä»»å‹™
-      const deleteSuccess = await deleteTask(task.id);
-      
-      if (!deleteSuccess) {
-        toast.error('åˆªé™¤ä»»å‹™å¤±æ•—');
-        return;
-      }
-
-      // åˆ·æ–°æ•¸æ“šï¼Œè®“ WeeklyQuickCard å›åˆ°å‰µå»ºç‹€æ…‹
-      await fetchTopics();
-      
-      toast.success('é€±æŒ‘æˆ°å·²æ¸…é™¤ï¼å¯ä»¥é‡æ–°å‰µå»ºæ–°çš„æŒ‘æˆ° ğŸ”„', {
-        duration: 3000,
-        style: {
-          background: '#10B981',
-          color: 'white',
-          borderRadius: '12px',
-          fontWeight: '600'
-        }
-      });
-    } catch (error) {
-      console.error('é‡è¨­é€±æŒ‘æˆ°å¤±æ•—:', error);
-      toast.error('é‡è¨­å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦');
-    }
-  }, [weeklyQuickChallengeInfo.challengeTask, currentUser, deleteTask, fetchTopics]);
 
-  /**
-   * é·ç§»é€±æŒ‘æˆ°åˆ°æ–°çš„ä»»å‹™çµæ§‹
-   */
-  const migrateWeeklyChallengeToTask = useCallback(async () => {
-    if (!weeklyChallenge || !currentUser) return;
 
-    try {
-      // æ‰¾åˆ°æˆ–å‰µå»º"å€‹äººç¿’æ…£"ä¸»é¡Œ
-      let habitTopic = topics?.find(topic => topic.title === 'å€‹äººç¿’æ…£' && topic.subject === 'ç”Ÿæ´»');
-      
-      if (!habitTopic) {
-        // å‰µå»ºå€‹äººç¿’æ…£ä¸»é¡Œï¼ˆéš±è—ä¸»é¡Œï¼Œä¸åœ¨ä¸»é¡Œç‰†é¡¯ç¤ºï¼‰
-        const newTopic = await createTopic({
-          title: 'å€‹äººç¿’æ…£',
-          description: 'åŸ¹é¤Šè‰¯å¥½çš„æ—¥å¸¸ç¿’æ…£',
-          subject: 'ç”Ÿæ´»',
-          status: 'hidden', // ä½¿ç”¨ hidden ç‹€æ…‹ä¾†éš±è—ä¸»é¡Œ
-          is_collaborative: false,
-          show_avatars: false
-        });
-        
-        if (!newTopic) {
-          toast.error('å‰µå»ºç¿’æ…£ä¸»é¡Œå¤±æ•—');
-          return;
-        }
-        habitTopic = newTopic;
-      }
 
-      // æ‰¾åˆ°æˆ–å‰µå»º"æ¯é€±æŒ‘æˆ°"ç›®æ¨™
-      let challengeGoal = habitTopic.goals?.find(goal => goal.title === 'æ¯é€±æŒ‘æˆ°');
-      
-      if (!challengeGoal) {
-        const newGoal = await addGoal(habitTopic.id, {
-          title: 'æ¯é€±æŒ‘æˆ°',
-          description: 'å …æŒå®Œæˆæœ¬é€±è¨­å®šçš„æŒ‘æˆ°',
-          status: 'todo',
-          priority: 'high',
-          order_index: 0
-        });
-        
-        if (!newGoal) {
-          toast.error('å‰µå»ºæŒ‘æˆ°ç›®æ¨™å¤±æ•—');
-          return;
-        }
-        challengeGoal = newGoal;
-      }
-
-      // å‰µå»ºè¨ˆæ•¸å‹ä»»å‹™ï¼ˆé·ç§»é€±æŒ‘æˆ°ï¼‰
-      const weekStart = getWeekStart(getTaiwanDateString());
-      const weekEnd = new Date(weekStart);
-      weekEnd.setDate(weekEnd.getDate() + 6);
-
-      const taskConfig = {
-        type: 'count' as const,
-        target_count: 7,
-        current_count: weeklyChallenge.completedDays.length,
-        reset_frequency: 'weekly' as const // æ¯é€±é‡ç½®
-      };
-
-      const cycleConfig = {
-        cycle_type: 'weekly' as const,
-        start_date: weekStart,
-        deadline: weekEnd.toISOString().split('T')[0],
-        auto_reset: true
-      };
-
-      const progressData = {
-        last_updated: new Date().toISOString(),
-        completion_percentage: (weeklyChallenge.completedDays.length / 7) * 100,
-        check_in_dates: weeklyChallenge.completedDays,
-        current_count: weeklyChallenge.completedDays.length,
-        target_count: 7
-      };
-
-      const newTask = await addTask(challengeGoal.id, {
-        title: weeklyChallenge.title,
-        description: `æœ¬é€±æŒ‘æˆ°ï¼š${weeklyChallenge.title}`,
-        task_type: 'count',
-        task_config: taskConfig,
-        cycle_config: cycleConfig,
-        progress_data: progressData,
-        status: 'in_progress',
-        priority: 'high',
-        order_index: 0,
-        need_help: false,
-        special_flags: [SPECIAL_TASK_FLAGS.WEEKLY_QUICK_CHALLENGE]
-      });
-
-      if (newTask) {
-        // æ¸…é™¤èˆŠçš„ localStorage æ•¸æ“š
-        localStorage.removeItem('weeklyChallenge');
-        setWeeklyChallenge(null);
-        
-        // åˆ·æ–°é é¢æ•¸æ“š
-        await fetchTopics();
-        
-        toast.success('é€±æŒ‘æˆ°å·²æˆåŠŸé·ç§»åˆ°ä»»å‹™ç³»çµ±ï¼ğŸ‰', {
-          duration: 5000,
-          style: {
-            background: '#10B981',
-            color: 'white',
-            borderRadius: '12px',
-            fontWeight: '600'
-          }
-        });
-      } else {
-        toast.error('é·ç§»ä»»å‹™å¤±æ•—');
-      }
-    } catch (error) {
-      console.error('é·ç§»é€±æŒ‘æˆ°å¤±æ•—:', error);
-      toast.error('é·ç§»å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦');
-    }
-  }, [weeklyChallenge, currentUser, topics, createTopic, addGoal, addTask, fetchTopics]);
-
-  /**
-   * æª¢æŸ¥æ˜¯å¦éœ€è¦æç¤ºç”¨æˆ¶é·ç§»é€±æŒ‘æˆ°
-   */
-  const shouldShowMigrationPrompt = useMemo(() => {
-    return weeklyChallenge && weeklyChallenge.completedDays.length > 0;
-  }, [weeklyChallenge]);
 
   // è¼‰å…¥ç‹€æ…‹
   if (loading) {
@@ -2787,53 +1098,6 @@ export const TaskWallPage = () => {
                   onRecordSuccess={handleRecordSuccess}
                   currentUserId={currentUser?.id}
                   isLoading={isLoading}
-                  weeklyQuickCard={
-                    <WeeklyQuickCard
-                      onCreateWeeklyTask={handleCreateWeeklyTask}
-                      isLoading={isCreatingWeeklyTask}
-                      hasExistingChallenge={weeklyQuickChallengeInfo.hasChallenge}
-                      existingChallengeTask={weeklyQuickChallengeInfo.challengeTask}
-                      onResetChallenge={handleResetWeeklyChallenge}
-                      onTaskClick={async (task) => {
-                        // è™•ç†é€±æŒ‘æˆ°ä»»å‹™çš„æ‰“å¡é‚è¼¯
-                        if (task.task_type === 'count') {
-                          try {
-                            // ä½¿ç”¨ performTaskAction è¨˜éŒ„å‹•ä½œ
-                            const result = await performTaskAction(task.id, 'check_in');
-                            
-                            if (result.success) {
-                              // è§¸ç™¼æ˜Ÿæ˜Ÿå‹•ç•«
-                              setIsStarAnimating(true);
-                              setTimeout(() => setIsStarAnimating(false), 1000);
-                              
-                              // é¡¯ç¤ºæˆåŠŸè¨Šæ¯
-                              const checkInDates = (result.task?.progress_data as any)?.check_in_dates || [];
-                              const targetCount = (result.task?.task_config as any)?.target_count || 7;
-                              toast.success(`ä»Šå¤©å®Œæˆäº†ï¼é€²åº¦ ${checkInDates.length}/${targetCount} æ¬¡ ğŸ‰`, {
-                                duration: 3000,
-                                style: {
-                                  background: '#10B981',
-                                  color: 'white',
-                                  borderRadius: '12px',
-                                  fontWeight: '600'
-                                }
-                              });
-                              
-                              // åˆ·æ–°æ•¸æ“š
-                              await fetchTopics();
-                            } else {
-                              // é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯
-                              const errorMessage = 'message' in result ? result.message : 'æ‰“å¡å¤±æ•—';
-                              toast.error(errorMessage);
-                            }
-                          } catch (error) {
-                            console.error('é€±æŒ‘æˆ°æ‰“å¡å¤±æ•—:', error);
-                            toast.error('æ‰“å¡å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦');
-                          }
-                        }
-                      }}
-                    />
-                  }
                 />
               )}
             </div>
